function drawbarChart(){Highcharts.chart("myBar",{chart:{type:"column"},title:{align:"left",text:""},subtitle:{align:"left",text:""},accessibility:{announceNewData:{enabled:!0}},xAxis:{type:"category",transform:"translate(28px, 10px);"},yAxis:{title:{text:"Core Components Completeness"}},legend:{enabled:!1},credits:{enabled:!1},plotOptions:{series:{borderWidth:0,dataLabels:{enabled:!0,format:"{point.y}%"}}},tooltip:{headerFormat:'<span style="font-size:11px">{series.name}</span><br>',pointFormat:'<span style="color:{point.color}">{point.name}</span>: <b>{point.y:.2f}%</b> of total<br/>'},series:[{name:"",colorByPoint:!0,data:[{name:"Physical Infra",y:83,drilldown:"Physical Infra",color:"#5B8874",transform:"translate(28px, 10px) !important"},{name:"ICT Infra",y:43,drilldown:"ICT Infra",color:"#7b9f8f"},{name:"Data Standards",y:33,drilldown:"Data Standards",color:"#9cb7ab"},{name:"Plans and procedures",y:32,drilldown:"Plans and procedures",color:"#bdcfc7"},{name:"Human resources",y:20,drilldown:"Human resources",color:"#dee7e3"}]}],drilldown:{breadcrumbs:{position:{align:"right"}},series:[{name:"Chrome",id:"Chrome",data:[["v65.0",.1],["v64.0",1.3],["v63.0",53.02],["v62.0",1.4],["v61.0",.88],["v60.0",.56],["v59.0",.45],["v58.0",.49],["v57.0",.32],["v56.0",.29],["v55.0",.79],["v54.0",.18],["v51.0",.13],["v49.0",2.16],["v48.0",.13],["v47.0",.11],["v43.0",.17],["v29.0",.26]]},{name:"Firefox",id:"Firefox",data:[["v58.0",1.02],["v57.0",7.36],["v56.0",.35],["v55.0",.11],["v54.0",.1],["v52.0",.95],["v51.0",.15],["v50.0",.1],["v48.0",.31],["v47.0",.12]]},{name:"Internet Explorer",id:"Internet Explorer",data:[["v11.0",6.2],["v10.0",.29],["v9.0",.27],["v8.0",.47]]},{name:"Safari",id:"Safari",data:[["v11.0",3.39],["v10.1",.96],["v10.0",.36],["v9.1",.54],["v9.0",.13],["v5.1",.2]]},{name:"Edge",id:"Edge",data:[["v16",2.6],["v15",.92],["v14",.4],["v13",.1]]},{name:"Opera",id:"Opera",data:[["v50.0",.96],["v49.0",.82],["v12.1",.14]]}]}})}function drawpieChart(){Highcharts.chart("container-pie",{chart:{type:"pie",options3d:{enabled:!0,alpha:45,beta:0}},title:{text:"",align:"left"},subtitle:{text:"",align:"left"},accessibility:{point:{valueSuffix:"%"}},credits:{enabled:!1},tooltip:{pointFormat:"{series.name}: <b>{point.percentage:.1f}%</b>",enabled:!1},plotOptions:{pie:{allowPointSelect:!0,cursor:"pointer",depth:35,dataLabels:{enabled:!0,format:"{point.y}%"},showInLegend:!0}},series:[{type:"pie",name:"",data:[{name:"Completed",y:55,color:"#5B8874"},{name:"Not Started",y:30,color:"#B07F40"},{name:"Work In Progress",y:10,color:"#833B2B",sliced:!0,selected:!0},{name:"N/A",y:5,color:"#a9acb1"}]}]})}function drawlineChart(){Highcharts.setOptions({lang:{thousandsSep:","}}),Highcharts.chart("container-line",{chart:{type:"line"},title:{text:""},xAxis:{labels:{style:{fontWeight:"bold"}},categories:["Jan","","","","Feb","Mar","Apr","May"],crosshair:!0},yAxis:{labels:{style:{fontWeight:"bold"}},min:0,title:{text:"<b>No of Patients</b>"}},credits:{enabled:!1},tooltip:{headerFormat:'<span style="font-size:12px">{point.key}</span><table>',pointFormat:'<tr><td style="color:blue;padding:0"><b></b>: </td><td style="padding:0"><b>{point.y:,.0f}<a style="font-size:8px">-</a> {point.q}</b></td></tr>',footerFormat:"</table>",shared:!0,useHTML:!0},plotOptions:{line:{pointPadding:.1,borderWidth:.2,dataLabels:{enabled:!0,align:"center",y:30,format:"{point.q}",style:{}}}},series:[{name:"Days & Months",data:[{y:2300,q:"D1"},{y:2e3,q:"D2"},{y:1900,q:"D3"},{y:1500,q:"D4"},{y:1200,q:"D9"},{y:1e3,q:"D34"},{y:900,q:"D64"},{y:800,q:"D94"}],color:"#4472C4"}],legend:{enabled:!0,symbolRadius:0},exporting:{buttons:{contextButton:{text:"",symbol:"url(/sites/all/themes/fastrackcities/images/download-icon.png)",symbolStrokeWidth:1,symbolFill:"#bada55",symbolStroke:"#330033"}}}})}function drawtreeMap(){Highcharts.chart("container-tree",{colorAxis:{minColor:"#FFFFFF",maxColor:Highcharts.getOptions().colors[0]},tooltip:{pointFormat:"{point.name}: <b>{point.value}%</b>",enabled:!0},plotOptions:{treemap:{allowPointSelect:!0,cursor:"pointer",depth:35,dataLabels:{enabled:!0,format:"{point.name}"}}},series:[{type:"treemap",layoutAlgorithm:"squarified",clip:!1,data:[{name:"Angola",value:45,color:"#f68954"},{name:"Botswana",value:20,color:"#f8a37a"},{name:"Madagascar",value:15,color:"#fabda0"},{name:"Malawi",value:10,color:"#fcd7c6"},{name:" Mauritius",value:10,color:"#fef1ec"}]}],title:{text:""},credits:{enabled:!1}})}!function(vt,te){"object"==typeof exports&&typeof module<"u"?module.exports=te():"function"==typeof define&&define.amd?define(te):(vt=typeof globalThis<"u"?globalThis:vt||self).bootstrap=te()}(this,function(){"use strict";const vt="transitionend",te=Xt=>{let Z=Xt.getAttribute("data-bs-target");if(!Z||"#"===Z){let Tt=Xt.getAttribute("href");if(!Tt||!Tt.includes("#")&&!Tt.startsWith("."))return null;Tt.includes("#")&&!Tt.startsWith("#")&&(Tt=`#${Tt.split("#")[1]}`),Z=Tt&&"#"!==Tt?Tt.trim():null}return Z},Ct=Xt=>{const Z=te(Xt);return Z&&document.querySelector(Z)?Z:null},wt=Xt=>{const Z=te(Xt);return Z?document.querySelector(Z):null},xt=Xt=>{Xt.dispatchEvent(new Event(vt))},jt=Xt=>!(!Xt||"object"!=typeof Xt)&&(void 0!==Xt.jquery&&(Xt=Xt[0]),void 0!==Xt.nodeType),zt=Xt=>jt(Xt)?Xt.jquery?Xt[0]:Xt:"string"==typeof Xt&&Xt.length>0?document.querySelector(Xt):null,Ut=Xt=>{if(!jt(Xt)||0===Xt.getClientRects().length)return!1;const Z="visible"===getComputedStyle(Xt).getPropertyValue("visibility"),Tt=Xt.closest("details:not([open])");if(!Tt)return Z;if(Tt!==Xt){const ce=Xt.closest("summary");if(ce&&ce.parentNode!==Tt||null===ce)return!1}return Z},Rt=Xt=>!Xt||Xt.nodeType!==Node.ELEMENT_NODE||!!Xt.classList.contains("disabled")||(void 0!==Xt.disabled?Xt.disabled:Xt.hasAttribute("disabled")&&"false"!==Xt.getAttribute("disabled")),It=Xt=>{if(!document.documentElement.attachShadow)return null;if("function"==typeof Xt.getRootNode){const Z=Xt.getRootNode();return Z instanceof ShadowRoot?Z:null}return Xt instanceof ShadowRoot?Xt:Xt.parentNode?It(Xt.parentNode):null},K=()=>{},st=()=>window.jQuery&&!document.body.hasAttribute("data-bs-no-jquery")?window.jQuery:null,R=[],I=()=>"rtl"===document.documentElement.dir,A=Xt=>{var Z;Z=()=>{const Tt=st();if(Tt){const ce=Xt.NAME,Ke=Tt.fn[ce];Tt.fn[ce]=Xt.jQueryInterface,Tt.fn[ce].Constructor=Xt,Tt.fn[ce].noConflict=()=>(Tt.fn[ce]=Ke,Xt.jQueryInterface)}},"loading"===document.readyState?(R.length||document.addEventListener("DOMContentLoaded",()=>{for(const Tt of R)Tt()}),R.push(Z)):Z()},x=Xt=>{"function"==typeof Xt&&Xt()},T=(Xt,Z,Tt=!0)=>{if(!Tt)return void x(Xt);const ce=(ti=>{if(!ti)return 0;let{transitionDuration:Bi,transitionDelay:Wi}=window.getComputedStyle(ti);const en=Number.parseFloat(Bi),ji=Number.parseFloat(Wi);return en||ji?(Bi=Bi.split(",")[0],Wi=Wi.split(",")[0],1e3*(Number.parseFloat(Bi)+Number.parseFloat(Wi))):0})(Z)+5;let Ke=!1;const $e=({target:ti})=>{ti===Z&&(Ke=!0,Z.removeEventListener(vt,$e),x(Xt))};Z.addEventListener(vt,$e),setTimeout(()=>{Ke||xt(Z)},ce)},j=(Xt,Z,Tt,ce)=>{const Ke=Xt.length;let $e=Xt.indexOf(Z);return-1===$e?!Tt&&ce?Xt[Ke-1]:Xt[0]:($e+=Tt?1:-1,ce&&($e=($e+Ke)%Ke),Xt[Math.max(0,Math.min($e,Ke-1))])},V=/[^.]*(?=\..*)\.|.*/,nt=/\..*/,w=/::\d+$/,l={};let it=1;const N={mouseenter:"mouseover",mouseleave:"mouseout"},G=new Set(["click","dblclick","mouseup","mousedown","contextmenu","mousewheel","DOMMouseScroll","mouseover","mouseout","mousemove","selectstart","selectend","keydown","keypress","keyup","orientationchange","touchstart","touchmove","touchend","touchcancel","pointerdown","pointermove","pointerup","pointerleave","pointercancel","gesturestart","gesturechange","gestureend","focus","blur","change","reset","select","submit","focusin","focusout","load","unload","beforeunload","resize","move","DOMContentLoaded","readystatechange","error","abort","scroll"]);function v(Xt,Z){return Z&&`${Z}::${it++}`||Xt.uidEvent||it++}function M(Xt){const Z=v(Xt);return Xt.uidEvent=Z,l[Z]=l[Z]||{},l[Z]}function b(Xt,Z,Tt=null){return Object.values(Xt).find(ce=>ce.callable===Z&&ce.delegationSelector===Tt)}function k(Xt,Z,Tt){const ce="string"==typeof Z,Ke=ce?Tt:Z||Tt;let $e=B(Xt);return G.has($e)||($e=Xt),[ce,Ke,$e]}function _(Xt,Z,Tt,ce,Ke){if("string"!=typeof Z||!Xt)return;let[$e,ti,Bi]=k(Z,Tt,ce);var ho;Z in N&&(ho=ti,ti=function(uo){if(!uo.relatedTarget||uo.relatedTarget!==uo.delegateTarget&&!uo.delegateTarget.contains(uo.relatedTarget))return ho.call(this,uo)});const Wi=M(Xt),en=Wi[Bi]||(Wi[Bi]={}),ji=b(en,ti,$e?Tt:null);if(ji)return void(ji.oneOff=ji.oneOff&&Ke);const Gi=v(ti,Z.replace(V,"")),Qn=$e?function(Zn,ho,uo){return function _o(ar){const mr=Zn.querySelectorAll(ho);for(let{target:Eo}=ar;Eo&&Eo!==this;Eo=Eo.parentNode)for(const jo of mr)if(jo===Eo)return at(ar,{delegateTarget:Eo}),_o.oneOff&&H.off(Zn,ar.type,ho,uo),uo.apply(Eo,[ar])}}(Xt,Tt,ti):function(Zn,ho){return function uo(_o){return at(_o,{delegateTarget:Zn}),uo.oneOff&&H.off(Zn,_o.type,ho),ho.apply(Zn,[_o])}}(Xt,ti);Qn.delegationSelector=$e?Tt:null,Qn.callable=ti,Qn.oneOff=Ke,Qn.uidEvent=Gi,en[Gi]=Qn,Xt.addEventListener(Bi,Qn,$e)}function y(Xt,Z,Tt,ce,Ke){const $e=b(Z[Tt],ce,Ke);$e&&(Xt.removeEventListener(Tt,$e,Boolean(Ke)),delete Z[Tt][$e.uidEvent])}function O(Xt,Z,Tt,ce){const Ke=Z[Tt]||{};for(const $e of Object.keys(Ke))if($e.includes(ce)){const ti=Ke[$e];y(Xt,Z,Tt,ti.callable,ti.delegationSelector)}}function B(Xt){return Xt=Xt.replace(nt,""),N[Xt]||Xt}const H={on(Xt,Z,Tt,ce){_(Xt,Z,Tt,ce,!1)},one(Xt,Z,Tt,ce){_(Xt,Z,Tt,ce,!0)},off(Xt,Z,Tt,ce){if("string"!=typeof Z||!Xt)return;const[Ke,$e,ti]=k(Z,Tt,ce),Bi=ti!==Z,Wi=M(Xt),en=Wi[ti]||{},ji=Z.startsWith(".");if(void 0===$e){if(ji)for(const Gi of Object.keys(Wi))O(Xt,Wi,Gi,Z.slice(1));for(const Gi of Object.keys(en)){const Qn=Gi.replace(w,"");if(!Bi||Z.includes(Qn)){const Zn=en[Gi];y(Xt,Wi,ti,Zn.callable,Zn.delegationSelector)}}}else{if(!Object.keys(en).length)return;y(Xt,Wi,ti,$e,Ke?Tt:null)}},trigger(Xt,Z,Tt){if("string"!=typeof Z||!Xt)return null;const ce=st();let Ke=null,$e=!0,ti=!0,Bi=!1;Z!==B(Z)&&ce&&(Ke=ce.Event(Z,Tt),ce(Xt).trigger(Ke),$e=!Ke.isPropagationStopped(),ti=!Ke.isImmediatePropagationStopped(),Bi=Ke.isDefaultPrevented());let Wi=new Event(Z,{bubbles:$e,cancelable:!0});return Wi=at(Wi,Tt),Bi&&Wi.preventDefault(),ti&&Xt.dispatchEvent(Wi),Wi.defaultPrevented&&Ke&&Ke.preventDefault(),Wi}};function at(Xt,Z){for(const[Tt,ce]of Object.entries(Z||{}))try{Xt[Tt]=ce}catch{Object.defineProperty(Xt,Tt,{configurable:!0,get:()=>ce})}return Xt}const ft=new Map,rt={set(Xt,Z,Tt){ft.has(Xt)||ft.set(Xt,new Map);const ce=ft.get(Xt);ce.has(Z)||0===ce.size?ce.set(Z,Tt):console.error(`Bootstrap doesn't allow more than one instance per element. Bound instance: ${Array.from(ce.keys())[0]}.`)},get:(Xt,Z)=>ft.has(Xt)&&ft.get(Xt).get(Z)||null,remove(Xt,Z){if(!ft.has(Xt))return;const Tt=ft.get(Xt);Tt.delete(Z),0===Tt.size&&ft.delete(Xt)}};function z(Xt){if("true"===Xt)return!0;if("false"===Xt)return!1;if(Xt===Number(Xt).toString())return Number(Xt);if(""===Xt||"null"===Xt)return null;if("string"!=typeof Xt)return Xt;try{return JSON.parse(decodeURIComponent(Xt))}catch{return Xt}}function q(Xt){return Xt.replace(/[A-Z]/g,Z=>`-${Z.toLowerCase()}`)}const mt={setDataAttribute(Xt,Z,Tt){Xt.setAttribute(`data-bs-${q(Z)}`,Tt)},removeDataAttribute(Xt,Z){Xt.removeAttribute(`data-bs-${q(Z)}`)},getDataAttributes(Xt){if(!Xt)return{};const Z={},Tt=Object.keys(Xt.dataset).filter(ce=>ce.startsWith("bs")&&!ce.startsWith("bsConfig"));for(const ce of Tt){let Ke=ce.replace(/^bs/,"");Ke=Ke.charAt(0).toLowerCase()+Ke.slice(1,Ke.length),Z[Ke]=z(Xt.dataset[ce])}return Z},getDataAttribute:(Xt,Z)=>z(Xt.getAttribute(`data-bs-${q(Z)}`))};class pt{static get Default(){return{}}static get DefaultType(){return{}}static get NAME(){throw new Error('You have to implement the static method "NAME", for each component!')}_getConfig(Z){return Z=this._mergeConfigObj(Z),Z=this._configAfterMerge(Z),this._typeCheckConfig(Z),Z}_configAfterMerge(Z){return Z}_mergeConfigObj(Z,Tt){const ce=jt(Tt)?mt.getDataAttribute(Tt,"config"):{};return{...this.constructor.Default,..."object"==typeof ce?ce:{},...jt(Tt)?mt.getDataAttributes(Tt):{},..."object"==typeof Z?Z:{}}}_typeCheckConfig(Z,Tt=this.constructor.DefaultType){for(const Ke of Object.keys(Tt)){const $e=Tt[Ke],ti=Z[Ke],Bi=jt(ti)?"element":null==(ce=ti)?`${ce}`:Object.prototype.toString.call(ce).match(/\s([a-z]+)/i)[1].toLowerCase();if(!new RegExp($e).test(Bi))throw new TypeError(`${this.constructor.NAME.toUpperCase()}: Option "${Ke}" provided type "${Bi}" but expected type "${$e}".`)}var ce}}class dt extends pt{constructor(Z,Tt){super(),(Z=zt(Z))&&(this._element=Z,this._config=this._getConfig(Tt),rt.set(this._element,this.constructor.DATA_KEY,this))}dispose(){rt.remove(this._element,this.constructor.DATA_KEY),H.off(this._element,this.constructor.EVENT_KEY);for(const Z of Object.getOwnPropertyNames(this))this[Z]=null}_queueCallback(Z,Tt,ce=!0){T(Z,Tt,ce)}_getConfig(Z){return Z=this._mergeConfigObj(Z,this._element),Z=this._configAfterMerge(Z),this._typeCheckConfig(Z),Z}static getInstance(Z){return rt.get(zt(Z),this.DATA_KEY)}static getOrCreateInstance(Z,Tt={}){return this.getInstance(Z)||new this(Z,"object"==typeof Tt?Tt:null)}static get VERSION(){return"5.2.3"}static get DATA_KEY(){return`bs.${this.NAME}`}static get EVENT_KEY(){return`.${this.DATA_KEY}`}static eventName(Z){return`${Z}${this.EVENT_KEY}`}}const Y=(Xt,Z="hide")=>{const ce=Xt.NAME;H.on(document,`click.dismiss${Xt.EVENT_KEY}`,`[data-bs-dismiss="${ce}"]`,function(Ke){if(["A","AREA"].includes(this.tagName)&&Ke.preventDefault(),Rt(this))return;const $e=wt(this)||this.closest(`.${ce}`);Xt.getOrCreateInstance($e)[Z]()})};class lt extends dt{static get NAME(){return"alert"}close(){if(H.trigger(this._element,"close.bs.alert").defaultPrevented)return;this._element.classList.remove("show");const Z=this._element.classList.contains("fade");this._queueCallback(()=>this._destroyElement(),this._element,Z)}_destroyElement(){this._element.remove(),H.trigger(this._element,"closed.bs.alert"),this.dispose()}static jQueryInterface(Z){return this.each(function(){const Tt=lt.getOrCreateInstance(this);if("string"==typeof Z){if(void 0===Tt[Z]||Z.startsWith("_")||"constructor"===Z)throw new TypeError(`No method named "${Z}"`);Tt[Z](this)}})}}Y(lt,"close"),A(lt);const ht='[data-bs-toggle="button"]';class Lt extends dt{static get NAME(){return"button"}toggle(){this._element.setAttribute("aria-pressed",this._element.classList.toggle("active"))}static jQueryInterface(Z){return this.each(function(){const Tt=Lt.getOrCreateInstance(this);"toggle"===Z&&Tt[Z]()})}}H.on(document,"click.bs.button.data-api",ht,Xt=>{Xt.preventDefault();const Z=Xt.target.closest(ht);Lt.getOrCreateInstance(Z).toggle()}),A(Lt);const At={find:(Xt,Z=document.documentElement)=>[].concat(...Element.prototype.querySelectorAll.call(Z,Xt)),findOne:(Xt,Z=document.documentElement)=>Element.prototype.querySelector.call(Z,Xt),children:(Xt,Z)=>[].concat(...Xt.children).filter(Tt=>Tt.matches(Z)),parents(Xt,Z){const Tt=[];let ce=Xt.parentNode.closest(Z);for(;ce;)Tt.push(ce),ce=ce.parentNode.closest(Z);return Tt},prev(Xt,Z){let Tt=Xt.previousElementSibling;for(;Tt;){if(Tt.matches(Z))return[Tt];Tt=Tt.previousElementSibling}return[]},next(Xt,Z){let Tt=Xt.nextElementSibling;for(;Tt;){if(Tt.matches(Z))return[Tt];Tt=Tt.nextElementSibling}return[]},focusableChildren(Xt){const Z=["a","button","input","textarea","select","details","[tabindex]",'[contenteditable="true"]'].map(Tt=>`${Tt}:not([tabindex^="-"])`).join(",");return this.find(Z,Xt).filter(Tt=>!Rt(Tt)&&Ut(Tt))}},Wt={endCallback:null,leftCallback:null,rightCallback:null},Ot={endCallback:"(function|null)",leftCallback:"(function|null)",rightCallback:"(function|null)"};class se extends pt{constructor(Z,Tt){super(),this._element=Z,Z&&se.isSupported()&&(this._config=this._getConfig(Tt),this._deltaX=0,this._supportPointerEvents=Boolean(window.PointerEvent),this._initEvents())}static get Default(){return Wt}static get DefaultType(){return Ot}static get NAME(){return"swipe"}dispose(){H.off(this._element,".bs.swipe")}_start(Z){this._supportPointerEvents?this._eventIsPointerPenTouch(Z)&&(this._deltaX=Z.clientX):this._deltaX=Z.touches[0].clientX}_end(Z){this._eventIsPointerPenTouch(Z)&&(this._deltaX=Z.clientX-this._deltaX),this._handleSwipe(),x(this._config.endCallback)}_move(Z){this._deltaX=Z.touches&&Z.touches.length>1?0:Z.touches[0].clientX-this._deltaX}_handleSwipe(){const Z=Math.abs(this._deltaX);if(Z<=40)return;const Tt=Z/this._deltaX;this._deltaX=0,Tt&&x(Tt>0?this._config.rightCallback:this._config.leftCallback)}_initEvents(){this._supportPointerEvents?(H.on(this._element,"pointerdown.bs.swipe",Z=>this._start(Z)),H.on(this._element,"pointerup.bs.swipe",Z=>this._end(Z)),this._element.classList.add("pointer-event")):(H.on(this._element,"touchstart.bs.swipe",Z=>this._start(Z)),H.on(this._element,"touchmove.bs.swipe",Z=>this._move(Z)),H.on(this._element,"touchend.bs.swipe",Z=>this._end(Z)))}_eventIsPointerPenTouch(Z){return this._supportPointerEvents&&("pen"===Z.pointerType||"touch"===Z.pointerType)}static isSupported(){return"ontouchstart"in document.documentElement||navigator.maxTouchPoints>0}}const _e="next",We="prev",He="left",Fe="right",pe="slid.bs.carousel",Me="carousel",me="active",qt={ArrowLeft:Fe,ArrowRight:He},Kt={interval:5e3,keyboard:!0,pause:"hover",ride:!1,touch:!0,wrap:!0},xe={interval:"(number|boolean)",keyboard:"boolean",pause:"(string|boolean)",ride:"(boolean|string)",touch:"boolean",wrap:"boolean"};class be extends dt{constructor(Z,Tt){super(Z,Tt),this._interval=null,this._activeElement=null,this._isSliding=!1,this.touchTimeout=null,this._swipeHelper=null,this._indicatorsElement=At.findOne(".carousel-indicators",this._element),this._addEventListeners(),this._config.ride===Me&&this.cycle()}static get Default(){return Kt}static get DefaultType(){return xe}static get NAME(){return"carousel"}next(){this._slide(_e)}nextWhenVisible(){!document.hidden&&Ut(this._element)&&this.next()}prev(){this._slide(We)}pause(){this._isSliding&&xt(this._element),this._clearInterval()}cycle(){this._clearInterval(),this._updateInterval(),this._interval=setInterval(()=>this.nextWhenVisible(),this._config.interval)}_maybeEnableCycle(){this._config.ride&&(this._isSliding?H.one(this._element,pe,()=>this.cycle()):this.cycle())}to(Z){const Tt=this._getItems();if(Z>Tt.length-1||Z<0)return;if(this._isSliding)return void H.one(this._element,pe,()=>this.to(Z));const ce=this._getItemIndex(this._getActive());ce!==Z&&this._slide(Z>ce?_e:We,Tt[Z])}dispose(){this._swipeHelper&&this._swipeHelper.dispose(),super.dispose()}_configAfterMerge(Z){return Z.defaultInterval=Z.interval,Z}_addEventListeners(){this._config.keyboard&&H.on(this._element,"keydown.bs.carousel",Z=>this._keydown(Z)),"hover"===this._config.pause&&(H.on(this._element,"mouseenter.bs.carousel",()=>this.pause()),H.on(this._element,"mouseleave.bs.carousel",()=>this._maybeEnableCycle())),this._config.touch&&se.isSupported()&&this._addTouchEventListeners()}_addTouchEventListeners(){for(const Tt of At.find(".carousel-item img",this._element))H.on(Tt,"dragstart.bs.carousel",ce=>ce.preventDefault());this._swipeHelper=new se(this._element,{leftCallback:()=>this._slide(this._directionToOrder(He)),rightCallback:()=>this._slide(this._directionToOrder(Fe)),endCallback:()=>{"hover"===this._config.pause&&(this.pause(),this.touchTimeout&&clearTimeout(this.touchTimeout),this.touchTimeout=setTimeout(()=>this._maybeEnableCycle(),500+this._config.interval))}})}_keydown(Z){if(/input|textarea/i.test(Z.target.tagName))return;const Tt=qt[Z.key];Tt&&(Z.preventDefault(),this._slide(this._directionToOrder(Tt)))}_getItemIndex(Z){return this._getItems().indexOf(Z)}_setActiveIndicatorElement(Z){if(!this._indicatorsElement)return;const Tt=At.findOne(".active",this._indicatorsElement);Tt.classList.remove(me),Tt.removeAttribute("aria-current");const ce=At.findOne(`[data-bs-slide-to="${Z}"]`,this._indicatorsElement);ce&&(ce.classList.add(me),ce.setAttribute("aria-current","true"))}_updateInterval(){const Z=this._activeElement||this._getActive();if(!Z)return;const Tt=Number.parseInt(Z.getAttribute("data-bs-interval"),10);this._config.interval=Tt||this._config.defaultInterval}_slide(Z,Tt=null){if(this._isSliding)return;const ce=this._getActive(),Ke=Z===_e,$e=Tt||j(this._getItems(),ce,Ke,this._config.wrap);if($e===ce)return;const ti=this._getItemIndex($e),Bi=Gi=>H.trigger(this._element,Gi,{relatedTarget:$e,direction:this._orderToDirection(Z),from:this._getItemIndex(ce),to:ti});if(Bi("slide.bs.carousel").defaultPrevented||!ce||!$e)return;const Wi=Boolean(this._interval);this.pause(),this._isSliding=!0,this._setActiveIndicatorElement(ti),this._activeElement=$e;const en=Ke?"carousel-item-start":"carousel-item-end",ji=Ke?"carousel-item-next":"carousel-item-prev";$e.classList.add(ji),ce.classList.add(en),$e.classList.add(en),this._queueCallback(()=>{$e.classList.remove(en,ji),$e.classList.add(me),ce.classList.remove(me,ji,en),this._isSliding=!1,Bi(pe)},ce,this._isAnimated()),Wi&&this.cycle()}_isAnimated(){return this._element.classList.contains("slide")}_getActive(){return At.findOne(".active.carousel-item",this._element)}_getItems(){return At.find(".carousel-item",this._element)}_clearInterval(){this._interval&&(clearInterval(this._interval),this._interval=null)}_directionToOrder(Z){return I()?Z===He?We:_e:Z===He?_e:We}_orderToDirection(Z){return I()?Z===We?He:Fe:Z===We?Fe:He}static jQueryInterface(Z){return this.each(function(){const Tt=be.getOrCreateInstance(this,Z);if("number"!=typeof Z){if("string"==typeof Z){if(void 0===Tt[Z]||Z.startsWith("_")||"constructor"===Z)throw new TypeError(`No method named "${Z}"`);Tt[Z]()}}else Tt.to(Z)})}}H.on(document,"click.bs.carousel.data-api","[data-bs-slide], [data-bs-slide-to]",function(Xt){const Z=wt(this);if(!Z||!Z.classList.contains(Me))return;Xt.preventDefault();const Tt=be.getOrCreateInstance(Z),ce=this.getAttribute("data-bs-slide-to");return ce?(Tt.to(ce),void Tt._maybeEnableCycle()):"next"===mt.getDataAttribute(this,"slide")?(Tt.next(),void Tt._maybeEnableCycle()):(Tt.prev(),void Tt._maybeEnableCycle())}),H.on(window,"load.bs.carousel.data-api",()=>{const Xt=At.find('[data-bs-ride="carousel"]');for(const Z of Xt)be.getOrCreateInstance(Z)}),A(be);const Te="show",ye="collapse",oi="collapsing",fi='[data-bs-toggle="collapse"]',tn={parent:null,toggle:!0},Ii={parent:"(null|element)",toggle:"boolean"};class Pi extends dt{constructor(Z,Tt){super(Z,Tt),this._isTransitioning=!1,this._triggerArray=[];const ce=At.find(fi);for(const Ke of ce){const $e=Ct(Ke),ti=At.find($e).filter(Bi=>Bi===this._element);null!==$e&&ti.length&&this._triggerArray.push(Ke)}this._initializeChildren(),this._config.parent||this._addAriaAndCollapsedClass(this._triggerArray,this._isShown()),this._config.toggle&&this.toggle()}static get Default(){return tn}static get DefaultType(){return Ii}static get NAME(){return"collapse"}toggle(){this._isShown()?this.hide():this.show()}show(){if(this._isTransitioning||this._isShown())return;let Z=[];if(this._config.parent&&(Z=this._getFirstLevelChildren(".collapse.show, .collapse.collapsing").filter(Ke=>Ke!==this._element).map(Ke=>Pi.getOrCreateInstance(Ke,{toggle:!1}))),Z.length&&Z[0]._isTransitioning||H.trigger(this._element,"show.bs.collapse").defaultPrevented)return;for(const Ke of Z)Ke.hide();const Tt=this._getDimension();this._element.classList.remove(ye),this._element.classList.add(oi),this._element.style[Tt]=0,this._addAriaAndCollapsedClass(this._triggerArray,!0),this._isTransitioning=!0;const ce=`scroll${Tt[0].toUpperCase()+Tt.slice(1)}`;this._queueCallback(()=>{this._isTransitioning=!1,this._element.classList.remove(oi),this._element.classList.add(ye,Te),this._element.style[Tt]="",H.trigger(this._element,"shown.bs.collapse")},this._element,!0),this._element.style[Tt]=`${this._element[ce]}px`}hide(){if(this._isTransitioning||!this._isShown()||H.trigger(this._element,"hide.bs.collapse").defaultPrevented)return;const Z=this._getDimension();this._element.style[Z]=`${this._element.getBoundingClientRect()[Z]}px`,this._element.classList.add(oi),this._element.classList.remove(ye,Te);for(const Tt of this._triggerArray){const ce=wt(Tt);ce&&!this._isShown(ce)&&this._addAriaAndCollapsedClass([Tt],!1)}this._isTransitioning=!0,this._element.style[Z]="",this._queueCallback(()=>{this._isTransitioning=!1,this._element.classList.remove(oi),this._element.classList.add(ye),H.trigger(this._element,"hidden.bs.collapse")},this._element,!0)}_isShown(Z=this._element){return Z.classList.contains(Te)}_configAfterMerge(Z){return Z.toggle=Boolean(Z.toggle),Z.parent=zt(Z.parent),Z}_getDimension(){return this._element.classList.contains("collapse-horizontal")?"width":"height"}_initializeChildren(){if(!this._config.parent)return;const Z=this._getFirstLevelChildren(fi);for(const Tt of Z){const ce=wt(Tt);ce&&this._addAriaAndCollapsedClass([Tt],this._isShown(ce))}}_getFirstLevelChildren(Z){const Tt=At.find(":scope .collapse .collapse",this._config.parent);return At.find(Z,this._config.parent).filter(ce=>!Tt.includes(ce))}_addAriaAndCollapsedClass(Z,Tt){if(Z.length)for(const ce of Z)ce.classList.toggle("collapsed",!Tt),ce.setAttribute("aria-expanded",Tt)}static jQueryInterface(Z){const Tt={};return"string"==typeof Z&&/show|hide/.test(Z)&&(Tt.toggle=!1),this.each(function(){const ce=Pi.getOrCreateInstance(this,Tt);if("string"==typeof Z){if(void 0===ce[Z])throw new TypeError(`No method named "${Z}"`);ce[Z]()}})}}H.on(document,"click.bs.collapse.data-api",fi,function(Xt){("A"===Xt.target.tagName||Xt.delegateTarget&&"A"===Xt.delegateTarget.tagName)&&Xt.preventDefault();const Z=Ct(this),Tt=At.find(Z);for(const ce of Tt)Pi.getOrCreateInstance(ce,{toggle:!1}).toggle()}),A(Pi);var Ji="top",Mi="bottom",nn="right",Ti="left",Cn="auto",wn=[Ji,Mi,nn,Ti],X="start",bt="end",Gt="clippingParents",ee="viewport",we="popper",Ye="reference",xi=wn.reduce(function(Xt,Z){return Xt.concat([Z+"-"+X,Z+"-"+bt])},[]),Ui=[].concat(wn,[Cn]).reduce(function(Xt,Z){return Xt.concat([Z,Z+"-"+X,Z+"-"+bt])},[]),hn="beforeRead",Mo="afterRead",qo="beforeMain",Dr="afterMain",No="beforeWrite",ko="afterWrite",Kr=[hn,"read",Mo,qo,"main",Dr,No,"write",ko];function dr(Xt){return Xt?(Xt.nodeName||"").toLowerCase():null}function gr(Xt){if(null==Xt)return window;if("[object Window]"!==Xt.toString()){var Z=Xt.ownerDocument;return Z&&Z.defaultView||window}return Xt}function lr(Xt){return Xt instanceof gr(Xt).Element||Xt instanceof Element}function kn(Xt){return Xt instanceof gr(Xt).HTMLElement||Xt instanceof HTMLElement}function En(Xt){return typeof ShadowRoot<"u"&&(Xt instanceof gr(Xt).ShadowRoot||Xt instanceof ShadowRoot)}const Ft={name:"applyStyles",enabled:!0,phase:"write",fn:function(Xt){var Z=Xt.state;Object.keys(Z.elements).forEach(function(Tt){var ce=Z.styles[Tt]||{},Ke=Z.attributes[Tt]||{},$e=Z.elements[Tt];kn($e)&&dr($e)&&(Object.assign($e.style,ce),Object.keys(Ke).forEach(function(ti){var Bi=Ke[ti];!1===Bi?$e.removeAttribute(ti):$e.setAttribute(ti,!0===Bi?"":Bi)}))})},effect:function(Xt){var Z=Xt.state,Tt={popper:{position:Z.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(Z.elements.popper.style,Tt.popper),Z.styles=Tt,Z.elements.arrow&&Object.assign(Z.elements.arrow.style,Tt.arrow),function(){Object.keys(Z.elements).forEach(function(ce){var Ke=Z.elements[ce],$e=Z.attributes[ce]||{},ti=Object.keys(Z.styles.hasOwnProperty(ce)?Z.styles[ce]:Tt[ce]).reduce(function(Bi,Wi){return Bi[Wi]="",Bi},{});kn(Ke)&&dr(Ke)&&(Object.assign(Ke.style,ti),Object.keys($e).forEach(function(Bi){Ke.removeAttribute(Bi)}))})}},requires:["computeStyles"]};function Yt(Xt){return Xt.split("-")[0]}var Jt=Math.max,he=Math.min,Ce=Math.round;function De(){var Xt=navigator.userAgentData;return null!=Xt&&Xt.brands?Xt.brands.map(function(Z){return Z.brand+"/"+Z.version}).join(" "):navigator.userAgent}function Ge(){return!/^((?!chrome|android).)*safari/i.test(De())}function oe(Xt,Z,Tt){void 0===Z&&(Z=!1),void 0===Tt&&(Tt=!1);var ce=Xt.getBoundingClientRect(),Ke=1,$e=1;Z&&kn(Xt)&&(Ke=Xt.offsetWidth>0&&Ce(ce.width)/Xt.offsetWidth||1,$e=Xt.offsetHeight>0&&Ce(ce.height)/Xt.offsetHeight||1);var ti=(lr(Xt)?gr(Xt):window).visualViewport,Bi=!Ge()&&Tt,Wi=(ce.left+(Bi&&ti?ti.offsetLeft:0))/Ke,en=(ce.top+(Bi&&ti?ti.offsetTop:0))/$e,ji=ce.width/Ke,Gi=ce.height/$e;return{width:ji,height:Gi,top:en,right:Wi+ji,bottom:en+Gi,left:Wi,x:Wi,y:en}}function Ee(Xt){var Z=oe(Xt),Tt=Xt.offsetWidth,ce=Xt.offsetHeight;return Math.abs(Z.width-Tt)<=1&&(Tt=Z.width),Math.abs(Z.height-ce)<=1&&(ce=Z.height),{x:Xt.offsetLeft,y:Xt.offsetTop,width:Tt,height:ce}}function ii(Xt,Z){var Tt=Z.getRootNode&&Z.getRootNode();if(Xt.contains(Z))return!0;if(Tt&&En(Tt)){var ce=Z;do{if(ce&&Xt.isSameNode(ce))return!0;ce=ce.parentNode||ce.host}while(ce)}return!1}function Si(Xt){return gr(Xt).getComputedStyle(Xt)}function Oi(Xt){return["table","td","th"].indexOf(dr(Xt))>=0}function di(Xt){return((lr(Xt)?Xt.ownerDocument:Xt.document)||window.document).documentElement}function hi(Xt){return"html"===dr(Xt)?Xt:Xt.assignedSlot||Xt.parentNode||(En(Xt)?Xt.host:null)||di(Xt)}function sn(Xt){return kn(Xt)&&"fixed"!==Si(Xt).position?Xt.offsetParent:null}function Fi(Xt){for(var Z=gr(Xt),Tt=sn(Xt);Tt&&Oi(Tt)&&"static"===Si(Tt).position;)Tt=sn(Tt);return Tt&&("html"===dr(Tt)||"body"===dr(Tt)&&"static"===Si(Tt).position)?Z:Tt||function(ce){var Ke=/firefox/i.test(De());if(/Trident/i.test(De())&&kn(ce)&&"fixed"===Si(ce).position)return null;var $e=hi(ce);for(En($e)&&($e=$e.host);kn($e)&&["html","body"].indexOf(dr($e))<0;){var ti=Si($e);if("none"!==ti.transform||"none"!==ti.perspective||"paint"===ti.contain||-1!==["transform","perspective"].indexOf(ti.willChange)||Ke&&"filter"===ti.willChange||Ke&&ti.filter&&"none"!==ti.filter)return $e;$e=$e.parentNode}return null}(Xt)||Z}function yi(Xt){return["top","bottom"].indexOf(Xt)>=0?"x":"y"}function Zi(Xt,Z,Tt){return Jt(Xt,he(Z,Tt))}function Yi(Xt){return Object.assign({},{top:0,right:0,bottom:0,left:0},Xt)}function Ki(Xt,Z){return Z.reduce(function(Tt,ce){return Tt[ce]=Xt,Tt},{})}const Nn={name:"arrow",enabled:!0,phase:"main",fn:function(Xt){var Z,fo,Hi,Tt=Xt.state,ce=Xt.name,Ke=Xt.options,$e=Tt.elements.arrow,ti=Tt.modifiersData.popperOffsets,Bi=Yt(Tt.placement),Wi=yi(Bi),en=[Ti,nn].indexOf(Bi)>=0?"height":"width";if($e&&ti){var ji=(Hi=Tt,Yi("number"!=typeof(fo="function"==typeof(fo=Ke.padding)?fo(Object.assign({},Hi.rects,{placement:Hi.placement})):fo)?fo:Ki(fo,wn))),Gi=Ee($e),Qn="y"===Wi?Ji:Ti,Zn="y"===Wi?Mi:nn,ho=Tt.rects.reference[en]+Tt.rects.reference[Wi]-ti[Wi]-Tt.rects.popper[en],uo=ti[Wi]-Tt.rects.reference[Wi],_o=Fi($e),ar=_o?"y"===Wi?_o.clientHeight||0:_o.clientWidth||0:0,Un=ar/2-Gi[en]/2+(ho/2-uo/2),Bo=Zi(ji[Qn],Un,ar-Gi[en]-ji[Zn]);Tt.modifiersData[ce]=((Z={})[Wi]=Bo,Z.centerOffset=Bo-Un,Z)}},effect:function(Xt){var Z=Xt.state,Tt=Xt.options.element,ce=void 0===Tt?"[data-popper-arrow]":Tt;null!=ce&&("string"!=typeof ce||(ce=Z.elements.popper.querySelector(ce)))&&ii(Z.elements.popper,ce)&&(Z.elements.arrow=ce)},requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function Vi(Xt){return Xt.split("-")[1]}var so={top:"auto",right:"auto",bottom:"auto",left:"auto"};function Hn(Xt){var Z,Tt=Xt.popper,ce=Xt.popperRect,Ke=Xt.placement,$e=Xt.variation,ti=Xt.offsets,Bi=Xt.position,Wi=Xt.gpuAcceleration,en=Xt.adaptive,ji=Xt.roundOffsets,Gi=Xt.isFixed,Qn=ti.x,Zn=void 0===Qn?0:Qn,ho=ti.y,uo=void 0===ho?0:ho,_o="function"==typeof ji?ji({x:Zn,y:uo}):{x:Zn,y:uo};Zn=_o.x,uo=_o.y;var ar=ti.hasOwnProperty("x"),mr=ti.hasOwnProperty("y"),Eo=Ti,jo=Ji,Un=window;if(en){var Bo=Fi(Tt),pr="clientHeight",fo="clientWidth";Bo===gr(Tt)&&"static"!==Si(Bo=di(Tt)).position&&"absolute"===Bi&&(pr="scrollHeight",fo="scrollWidth"),(Ke===Ji||(Ke===Ti||Ke===nn)&&$e===bt)&&(jo=Mi,uo-=(Gi&&Bo===Un&&Un.visualViewport?Un.visualViewport.height:Bo[pr])-ce.height,uo*=Wi?1:-1),Ke!==Ti&&(Ke!==Ji&&Ke!==Mi||$e!==bt)||(Eo=nn,Zn-=(Gi&&Bo===Un&&Un.visualViewport?Un.visualViewport.width:Bo[fo])-ce.width,Zn*=Wi?1:-1)}var Hi,Is,So,bs,tr=Object.assign({position:Bi},en&&so),ps=!0===ji?(So=(Is={x:Zn,y:uo}).y,bs=window.devicePixelRatio||1,{x:Ce(Is.x*bs)/bs||0,y:Ce(So*bs)/bs||0}):{x:Zn,y:uo};return Zn=ps.x,uo=ps.y,Object.assign({},tr,Wi?((Hi={})[jo]=mr?"0":"",Hi[Eo]=ar?"0":"",Hi.transform=(Un.devicePixelRatio||1)<=1?"translate("+Zn+"px, "+uo+"px)":"translate3d("+Zn+"px, "+uo+"px, 0)",Hi):((Z={})[jo]=mr?uo+"px":"",Z[Eo]=ar?Zn+"px":"",Z.transform="",Z))}const Gn={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:function(Xt){var Z=Xt.state,Tt=Xt.options,ce=Tt.gpuAcceleration,Ke=void 0===ce||ce,$e=Tt.adaptive,ti=void 0===$e||$e,Bi=Tt.roundOffsets,Wi=void 0===Bi||Bi,en={placement:Yt(Z.placement),variation:Vi(Z.placement),popper:Z.elements.popper,popperRect:Z.rects.popper,gpuAcceleration:Ke,isFixed:"fixed"===Z.options.strategy};null!=Z.modifiersData.popperOffsets&&(Z.styles.popper=Object.assign({},Z.styles.popper,Hn(Object.assign({},en,{offsets:Z.modifiersData.popperOffsets,position:Z.options.strategy,adaptive:ti,roundOffsets:Wi})))),null!=Z.modifiersData.arrow&&(Z.styles.arrow=Object.assign({},Z.styles.arrow,Hn(Object.assign({},en,{offsets:Z.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:Wi})))),Z.attributes.popper=Object.assign({},Z.attributes.popper,{"data-popper-placement":Z.placement})},data:{}};var vo={passive:!0};const Jn={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:function(Xt){var Z=Xt.state,Tt=Xt.instance,ce=Xt.options,Ke=ce.scroll,$e=void 0===Ke||Ke,ti=ce.resize,Bi=void 0===ti||ti,Wi=gr(Z.elements.popper),en=[].concat(Z.scrollParents.reference,Z.scrollParents.popper);return $e&&en.forEach(function(ji){ji.addEventListener("scroll",Tt.update,vo)}),Bi&&Wi.addEventListener("resize",Tt.update,vo),function(){$e&&en.forEach(function(ji){ji.removeEventListener("scroll",Tt.update,vo)}),Bi&&Wi.removeEventListener("resize",Tt.update,vo)}},data:{}};var yr={left:"right",right:"left",bottom:"top",top:"bottom"};function Co(Xt){return Xt.replace(/left|right|bottom|top/g,function(Z){return yr[Z]})}var vr={start:"end",end:"start"};function bo(Xt){return Xt.replace(/start|end/g,function(Z){return vr[Z]})}function ao(Xt){var Z=gr(Xt);return{scrollLeft:Z.pageXOffset,scrollTop:Z.pageYOffset}}function gn(Xt){return oe(di(Xt)).left+ao(Xt).scrollLeft}function Tr(Xt){var Z=Si(Xt);return/auto|scroll|overlay|hidden/.test(Z.overflow+Z.overflowY+Z.overflowX)}function Vs(Xt){return["html","body","#document"].indexOf(dr(Xt))>=0?Xt.ownerDocument.body:kn(Xt)&&Tr(Xt)?Xt:Vs(hi(Xt))}function Uo(Xt,Z){var Tt;void 0===Z&&(Z=[]);var ce=Vs(Xt),Ke=ce===(null==(Tt=Xt.ownerDocument)?void 0:Tt.body),$e=gr(ce),ti=Ke?[$e].concat($e.visualViewport||[],Tr(ce)?ce:[]):ce,Bi=Z.concat(ti);return Ke?Bi:Bi.concat(Uo(hi(ti)))}function zr(Xt){return Object.assign({},Xt,{left:Xt.x,top:Xt.y,right:Xt.x+Xt.width,bottom:Xt.y+Xt.height})}function $s(Xt,Z,Tt){return Z===ee?zr(function(ce,Ke){var $e=gr(ce),ti=di(ce),Bi=$e.visualViewport,Wi=ti.clientWidth,en=ti.clientHeight,ji=0,Gi=0;if(Bi){Wi=Bi.width,en=Bi.height;var Qn=Ge();(Qn||!Qn&&"fixed"===Ke)&&(ji=Bi.offsetLeft,Gi=Bi.offsetTop)}return{width:Wi,height:en,x:ji+gn(ce),y:Gi}}(Xt,Tt)):lr(Z)?(($e=oe(ce=Z,!1,"fixed"===Tt)).top=$e.top+ce.clientTop,$e.left=$e.left+ce.clientLeft,$e.bottom=$e.top+ce.clientHeight,$e.right=$e.left+ce.clientWidth,$e.width=ce.clientWidth,$e.height=ce.clientHeight,$e.x=$e.left,$e.y=$e.top,$e):zr(function(ce){var Ke,$e=di(ce),ti=ao(ce),Bi=null==(Ke=ce.ownerDocument)?void 0:Ke.body,Wi=Jt($e.scrollWidth,$e.clientWidth,Bi?Bi.scrollWidth:0,Bi?Bi.clientWidth:0),en=Jt($e.scrollHeight,$e.clientHeight,Bi?Bi.scrollHeight:0,Bi?Bi.clientHeight:0),ji=-ti.scrollLeft+gn(ce),Gi=-ti.scrollTop;return"rtl"===Si(Bi||$e).direction&&(ji+=Jt($e.clientWidth,Bi?Bi.clientWidth:0)-Wi),{width:Wi,height:en,x:ji,y:Gi}}(di(Xt)));var ce,$e}function wa(Xt){var Z,Tt=Xt.reference,ce=Xt.element,Ke=Xt.placement,$e=Ke?Yt(Ke):null,ti=Ke?Vi(Ke):null,Bi=Tt.x+Tt.width/2-ce.width/2,Wi=Tt.y+Tt.height/2-ce.height/2;switch($e){case Ji:Z={x:Bi,y:Tt.y-ce.height};break;case Mi:Z={x:Bi,y:Tt.y+Tt.height};break;case nn:Z={x:Tt.x+Tt.width,y:Wi};break;case Ti:Z={x:Tt.x-ce.width,y:Wi};break;default:Z={x:Tt.x,y:Tt.y}}var en=$e?yi($e):null;if(null!=en){var ji="y"===en?"height":"width";switch(ti){case X:Z[en]=Z[en]-(Tt[ji]/2-ce[ji]/2);break;case bt:Z[en]=Z[en]+(Tt[ji]/2-ce[ji]/2)}}return Z}function Vo(Xt,Z){void 0===Z&&(Z={});var jr,So,bs,Ni,Do,ds,Ds,ws,Gs,_r,ce=Z.placement,Ke=void 0===ce?Xt.placement:ce,$e=Z.strategy,ti=void 0===$e?Xt.strategy:$e,Bi=Z.boundary,Wi=void 0===Bi?Gt:Bi,en=Z.rootBoundary,ji=void 0===en?ee:en,Gi=Z.elementContext,Qn=void 0===Gi?we:Gi,Zn=Z.altBoundary,ho=void 0!==Zn&&Zn,uo=Z.padding,_o=void 0===uo?0:uo,ar=Yi("number"!=typeof _o?_o:Ki(_o,wn)),Eo=Xt.rects.popper,jo=Xt.elements[ho?Qn===we?Ye:we:Qn],Un=(jr=lr(jo)?jo:jo.contextElement||di(Xt.elements.popper),bs=ji,Ni=ti,ws="clippingParents"===(So=Wi)?(ds=Uo(hi(Do=jr)),lr(Ds=["absolute","fixed"].indexOf(Si(Do).position)>=0&&kn(Do)?Fi(Do):Do)?ds.filter(function(os){return lr(os)&&ii(os,Ds)&&"body"!==dr(os)}):[]):[].concat(So),_r=(Gs=[].concat(ws,[bs])).reduce(function(Do,ds){var Ds=$s(jr,ds,Ni);return Do.top=Jt(Ds.top,Do.top),Do.right=he(Ds.right,Do.right),Do.bottom=he(Ds.bottom,Do.bottom),Do.left=Jt(Ds.left,Do.left),Do},$s(jr,Gs[0],Ni)),_r.width=_r.right-_r.left,_r.height=_r.bottom-_r.top,_r.x=_r.left,_r.y=_r.top,_r),Bo=oe(Xt.elements.reference),pr=wa({reference:Bo,element:Eo,strategy:"absolute",placement:Ke}),fo=zr(Object.assign({},Eo,pr)),Hi=Qn===we?fo:Bo,tr={top:Un.top-Hi.top+ar.top,bottom:Hi.bottom-Un.bottom+ar.bottom,left:Un.left-Hi.left+ar.left,right:Hi.right-Un.right+ar.right},ps=Xt.modifiersData.offset;if(Qn===we&&ps){var Is=ps[Ke];Object.keys(tr).forEach(function(jr){var So=[nn,Mi].indexOf(jr)>=0?1:-1,bs=[Ji,Mi].indexOf(jr)>=0?"y":"x";tr[jr]+=Is[bs]*So})}return tr}const Or={name:"flip",enabled:!0,phase:"main",fn:function(Xt){var Z=Xt.state,Tt=Xt.options,ce=Xt.name;if(!Z.modifiersData[ce]._skip){for(var Ke=Tt.mainAxis,$e=void 0===Ke||Ke,ti=Tt.altAxis,Bi=void 0===ti||ti,Wi=Tt.fallbackPlacements,en=Tt.padding,ji=Tt.boundary,Gi=Tt.rootBoundary,Qn=Tt.altBoundary,Zn=Tt.flipVariations,ho=void 0===Zn||Zn,uo=Tt.allowedAutoPlacements,_o=Z.options.placement,ar=Yt(_o),mr=Wi||(ar!==_o&&ho?function(Do){if(Yt(Do)===Cn)return[];var ds=Co(Do);return[bo(Do),ds,bo(ds)]}(_o):[Co(_o)]),Eo=[_o].concat(mr).reduce(function(Do,ds){return Do.concat(Yt(ds)===Cn?function Hr(Xt,Z){void 0===Z&&(Z={});var Ke=Z.boundary,$e=Z.rootBoundary,ti=Z.padding,Bi=Z.flipVariations,Wi=Z.allowedAutoPlacements,en=void 0===Wi?Ui:Wi,ji=Vi(Z.placement),Gi=ji?Bi?xi:xi.filter(function(ho){return Vi(ho)===ji}):wn,Qn=Gi.filter(function(ho){return en.indexOf(ho)>=0});0===Qn.length&&(Qn=Gi);var Zn=Qn.reduce(function(ho,uo){return ho[uo]=Vo(Xt,{placement:uo,boundary:Ke,rootBoundary:$e,padding:ti})[Yt(uo)],ho},{});return Object.keys(Zn).sort(function(ho,uo){return Zn[ho]-Zn[uo]})}(Z,{placement:ds,boundary:ji,rootBoundary:Gi,padding:en,flipVariations:ho,allowedAutoPlacements:uo}):ds)},[]),jo=Z.rects.reference,Un=Z.rects.popper,Bo=new Map,pr=!0,fo=Eo[0],Hi=0;Hi<Eo.length;Hi++){var tr=Eo[Hi],ps=Yt(tr),Is=Vi(tr)===X,jr=[Ji,Mi].indexOf(ps)>=0,So=jr?"width":"height",bs=Vo(Z,{placement:tr,boundary:ji,rootBoundary:Gi,altBoundary:Qn,padding:en}),Ni=jr?Is?nn:Ti:Is?Mi:Ji;jo[So]>Un[So]&&(Ni=Co(Ni));var ws=Co(Ni),Gs=[];if($e&&Gs.push(bs[ps]<=0),Bi&&Gs.push(bs[Ni]<=0,bs[ws]<=0),Gs.every(function(Do){return Do})){fo=tr,pr=!1;break}Bo.set(tr,Gs)}if(pr)for(var Ba=function(Do){var ds=Eo.find(function(Ds){var os=Bo.get(Ds);if(os)return os.slice(0,Do).every(function(ua){return ua})});if(ds)return fo=ds,"break"},_r=ho?3:1;_r>0&&"break"!==Ba(_r);_r--);Z.placement!==fo&&(Z.modifiersData[ce]._skip=!0,Z.placement=fo,Z.reset=!0)}},requiresIfExists:["offset"],data:{_skip:!1}};function Cr(Xt,Z,Tt){return void 0===Tt&&(Tt={x:0,y:0}),{top:Xt.top-Z.height-Tt.y,right:Xt.right-Z.width+Tt.x,bottom:Xt.bottom-Z.height+Tt.y,left:Xt.left-Z.width-Tt.x}}function Br(Xt){return[Ji,nn,Mi,Ti].some(function(Z){return Xt[Z]>=0})}const Jo={name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:function(Xt){var Z=Xt.state,Tt=Xt.name,ce=Z.rects.reference,Ke=Z.rects.popper,$e=Z.modifiersData.preventOverflow,ti=Vo(Z,{elementContext:"reference"}),Bi=Vo(Z,{altBoundary:!0}),Wi=Cr(ti,ce),en=Cr(Bi,Ke,$e),ji=Br(Wi),Gi=Br(en);Z.modifiersData[Tt]={referenceClippingOffsets:Wi,popperEscapeOffsets:en,isReferenceHidden:ji,hasPopperEscaped:Gi},Z.attributes.popper=Object.assign({},Z.attributes.popper,{"data-popper-reference-hidden":ji,"data-popper-escaped":Gi})}},Ps={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:function(Xt){var Z=Xt.state,ce=Xt.name,Ke=Xt.options.offset,$e=void 0===Ke?[0,0]:Ke,ti=Ui.reduce(function(ji,Gi){return ji[Gi]=(Zn=Z.rects,ho=$e,uo=Yt(Qn=Gi),_o=[Ti,Ji].indexOf(uo)>=0?-1:1,mr=(mr=(ar="function"==typeof ho?ho(Object.assign({},Zn,{placement:Qn})):ho)[0])||0,Eo=((Eo=ar[1])||0)*_o,[Ti,nn].indexOf(uo)>=0?{x:Eo,y:mr}:{x:mr,y:Eo}),ji;var Qn,Zn,ho,uo,_o,ar,mr,Eo},{}),Bi=ti[Z.placement],en=Bi.y;null!=Z.modifiersData.popperOffsets&&(Z.modifiersData.popperOffsets.x+=Bi.x,Z.modifiersData.popperOffsets.y+=en),Z.modifiersData[ce]=ti}},is={name:"popperOffsets",enabled:!0,phase:"read",fn:function(Xt){var Z=Xt.state;Z.modifiersData[Xt.name]=wa({reference:Z.rects.reference,element:Z.rects.popper,strategy:"absolute",placement:Z.placement})},data:{}},oa={name:"preventOverflow",enabled:!0,phase:"main",fn:function(Xt){var Yo,Pr,Z=Xt.state,Tt=Xt.options,ce=Xt.name,Ke=Tt.mainAxis,$e=void 0===Ke||Ke,ti=Tt.altAxis,Bi=void 0!==ti&&ti,Qn=Tt.tether,Zn=void 0===Qn||Qn,ho=Tt.tetherOffset,uo=void 0===ho?0:ho,_o=Vo(Z,{boundary:Tt.boundary,rootBoundary:Tt.rootBoundary,padding:Tt.padding,altBoundary:Tt.altBoundary}),ar=Yt(Z.placement),mr=Vi(Z.placement),Eo=!mr,jo=yi(ar),Un="x"===jo?"y":"x",Bo=Z.modifiersData.popperOffsets,pr=Z.rects.reference,fo=Z.rects.popper,Hi="function"==typeof uo?uo(Object.assign({},Z.rects,{placement:Z.placement})):uo,tr="number"==typeof Hi?{mainAxis:Hi,altAxis:Hi}:Object.assign({mainAxis:0,altAxis:0},Hi),ps=Z.modifiersData.offset?Z.modifiersData.offset[Z.placement]:null,Is={x:0,y:0};if(Bo){if($e){var jr,So="y"===jo?Ji:Ti,bs="y"===jo?Mi:nn,Ni="y"===jo?"height":"width",ws=Bo[jo],Gs=ws+_o[So],Ba=ws-_o[bs],_r=Zn?-fo[Ni]/2:0,Do=mr===X?pr[Ni]:fo[Ni],ds=mr===X?-fo[Ni]:-pr[Ni],Ds=Z.elements.arrow,os=Zn&&Ds?Ee(Ds):{width:0,height:0},ua=Z.modifiersData["arrow#persistent"]?Z.modifiersData["arrow#persistent"].padding:{top:0,right:0,bottom:0,left:0},xl=ua[So],rl=ua[bs],Ra=Zi(0,pr[Ni],os[Ni]),sl=Eo?pr[Ni]/2-_r-Ra-xl-tr.mainAxis:Do-Ra-xl-tr.mainAxis,Ws=Eo?-pr[Ni]/2+_r+Ra+rl+tr.mainAxis:ds+Ra+rl+tr.mainAxis,fs=Z.elements.arrow&&Fi(Z.elements.arrow),pa=null!=(jr=ps?.[jo])?jr:0,ta=ws+Ws-pa,ts=Zi(Zn?he(Gs,ws+sl-pa-(fs?"y"===jo?fs.clientTop||0:fs.clientLeft||0:0)):Gs,ws,Zn?Jt(Ba,ta):Ba);Bo[jo]=ts,Is[jo]=ts-ws}if(Bi){var ja,Ar=Bo[Un],La="y"===Un?"height":"width",Pn=Ar+_o["x"===jo?Ji:Ti],yn=Ar-_o["x"===jo?Mi:nn],$a=-1!==[Ji,Ti].indexOf(ar),zs=null!=(ja=ps?.[Un])?ja:0,da=$a?Pn:Ar-pr[La]-fo[La]-zs+tr.altAxis,ms=$a?Ar+pr[La]+fo[La]-zs-tr.altAxis:yn,Aa=Zn&&$a?(Pr=Zi(da,Ar,Yo=ms))>Yo?Yo:Pr:Zi(Zn?da:Pn,Ar,Zn?ms:yn);Bo[Un]=Aa,Is[Un]=Aa-Ar}Z.modifiersData[ce]=Is}},requiresIfExists:["offset"]};function Mr(Xt,Z,Tt){void 0===Tt&&(Tt=!1);var ce,Ke,Gi,Qn,Zn,ho,$e=kn(Z),ti=kn(Z)&&(Qn=(Gi=Z).getBoundingClientRect(),Zn=Ce(Qn.width)/Gi.offsetWidth||1,ho=Ce(Qn.height)/Gi.offsetHeight||1,1!==Zn||1!==ho),Bi=di(Z),Wi=oe(Xt,ti,Tt),en={scrollLeft:0,scrollTop:0},ji={x:0,y:0};return($e||!$e&&!Tt)&&(("body"!==dr(Z)||Tr(Bi))&&(en=(ce=Z)!==gr(ce)&&kn(ce)?{scrollLeft:(Ke=ce).scrollLeft,scrollTop:Ke.scrollTop}:ao(ce)),kn(Z)?((ji=oe(Z,!0)).x+=Z.clientLeft,ji.y+=Z.clientTop):Bi&&(ji.x=gn(Bi))),{x:Wi.left+en.scrollLeft-ji.x,y:Wi.top+en.scrollTop-ji.y,width:Wi.width,height:Wi.height}}function ra(Xt){var Z=new Map,Tt=new Set,ce=[];function Ke($e){Tt.add($e.name),[].concat($e.requires||[],$e.requiresIfExists||[]).forEach(function(ti){if(!Tt.has(ti)){var Bi=Z.get(ti);Bi&&Ke(Bi)}}),ce.push($e)}return Xt.forEach(function($e){Z.set($e.name,$e)}),Xt.forEach(function($e){Tt.has($e.name)||Ke($e)}),ce}var rr={placement:"bottom",modifiers:[],strategy:"absolute"};function Lo(){for(var Xt=arguments.length,Z=new Array(Xt),Tt=0;Tt<Xt;Tt++)Z[Tt]=arguments[Tt];return!Z.some(function(ce){return!(ce&&"function"==typeof ce.getBoundingClientRect)})}function Ro(Xt){void 0===Xt&&(Xt={});var Tt=Xt.defaultModifiers,ce=void 0===Tt?[]:Tt,Ke=Xt.defaultOptions,$e=void 0===Ke?rr:Ke;return function(ti,Bi,Wi){void 0===Wi&&(Wi=$e);var en,ji,Gi={placement:"bottom",orderedModifiers:[],options:Object.assign({},rr,$e),modifiersData:{},elements:{reference:ti,popper:Bi},attributes:{},styles:{}},Qn=[],Zn=!1,ho={state:Gi,setOptions:function(_o){var ar="function"==typeof _o?_o(Gi.options):_o;uo(),Gi.options=Object.assign({},$e,Gi.options,ar),Gi.scrollParents={reference:lr(ti)?Uo(ti):ti.contextElement?Uo(ti.contextElement):[],popper:Uo(Bi)};var mr,Eo,Un,Bo,jo=(mr=[].concat(ce,Gi.options.modifiers),Eo=mr.reduce(function(Un,Bo){var pr=Un[Bo.name];return Un[Bo.name]=pr?Object.assign({},pr,Bo,{options:Object.assign({},pr.options,Bo.options),data:Object.assign({},pr.data,Bo.data)}):Bo,Un},{}),Un=Object.keys(Eo).map(function(Un){return Eo[Un]}),Bo=ra(Un),Kr.reduce(function(pr,fo){return pr.concat(Bo.filter(function(Hi){return Hi.phase===fo}))},[]));return Gi.orderedModifiers=jo.filter(function(Un){return Un.enabled}),Gi.orderedModifiers.forEach(function(Un){var pr=Un.options,Hi=Un.effect;if("function"==typeof Hi){var tr=Hi({state:Gi,name:Un.name,instance:ho,options:void 0===pr?{}:pr});Qn.push(tr||function(){})}}),ho.update()},forceUpdate:function(){if(!Zn){var _o=Gi.elements,ar=_o.reference,mr=_o.popper;if(Lo(ar,mr)){Gi.rects={reference:Mr(ar,Fi(mr),"fixed"===Gi.options.strategy),popper:Ee(mr)},Gi.reset=!1,Gi.placement=Gi.options.placement,Gi.orderedModifiers.forEach(function(Hi){return Gi.modifiersData[Hi.name]=Object.assign({},Hi.data)});for(var Eo=0;Eo<Gi.orderedModifiers.length;Eo++)if(!0!==Gi.reset){var jo=Gi.orderedModifiers[Eo],Un=jo.fn,Bo=jo.options;"function"==typeof Un&&(Gi=Un({state:Gi,options:void 0===Bo?{}:Bo,name:jo.name,instance:ho})||Gi)}else Gi.reset=!1,Eo=-1}}},update:(en=function(){return new Promise(function(_o){ho.forceUpdate(),_o(Gi)})},function(){return ji||(ji=new Promise(function(_o){Promise.resolve().then(function(){ji=void 0,_o(en())})})),ji}),destroy:function(){uo(),Zn=!0}};if(!Lo(ti,Bi))return ho;function uo(){Qn.forEach(function(_o){return _o()}),Qn=[]}return ho.setOptions(Wi).then(function(_o){!Zn&&Wi.onFirstUpdate&&Wi.onFirstUpdate(_o)}),ho}}var Lr=Ro(),ks=Ro({defaultModifiers:[Jn,is,Gn,Ft]}),us=Ro({defaultModifiers:[Jn,is,Gn,Ft,Ps,Or,oa,Nn,Jo]});const Js=Object.freeze(Object.defineProperty({__proto__:null,popperGenerator:Ro,detectOverflow:Vo,createPopperBase:Lr,createPopper:us,createPopperLite:ks,top:Ji,bottom:Mi,right:nn,left:Ti,auto:Cn,basePlacements:wn,start:X,end:bt,clippingParents:Gt,viewport:ee,popper:we,reference:Ye,variationPlacements:xi,placements:Ui,beforeRead:hn,read:"read",afterRead:Mo,beforeMain:qo,main:"main",afterMain:Dr,beforeWrite:No,write:"write",afterWrite:ko,modifierPhases:Kr,applyStyles:Ft,arrow:Nn,computeStyles:Gn,eventListeners:Jn,flip:Or,hide:Jo,offset:Ps,popperOffsets:is,preventOverflow:oa},Symbol.toStringTag,{value:"Module"})),ss="dropdown",za="ArrowUp",sa="ArrowDown",Ya="click.bs.dropdown.data-api",E="keydown.bs.dropdown.data-api",tt="show",yt='[data-bs-toggle="dropdown"]:not(.disabled):not(:disabled)',St=`${yt}.show`,Zt=".dropdown-menu",ne=I()?"top-end":"top-start",fe=I()?"top-start":"top-end",Be=I()?"bottom-end":"bottom-start",je=I()?"bottom-start":"bottom-end",ei=I()?"left-start":"right-start",vi=I()?"right-start":"left-start",Li={autoClose:!0,boundary:"clippingParents",display:"dynamic",offset:[0,2],popperConfig:null,reference:"toggle"},ci={autoClose:"(boolean|string)",boundary:"(string|element)",display:"string",offset:"(array|string|function)",popperConfig:"(null|object|function)",reference:"(string|element|object)"};class ui extends dt{constructor(Z,Tt){super(Z,Tt),this._popper=null,this._parent=this._element.parentNode,this._menu=At.next(this._element,Zt)[0]||At.prev(this._element,Zt)[0]||At.findOne(Zt,this._parent),this._inNavbar=this._detectNavbar()}static get Default(){return Li}static get DefaultType(){return ci}static get NAME(){return ss}toggle(){return this._isShown()?this.hide():this.show()}show(){if(Rt(this._element)||this._isShown())return;const Z={relatedTarget:this._element};if(!H.trigger(this._element,"show.bs.dropdown",Z).defaultPrevented){if(this._createPopper(),"ontouchstart"in document.documentElement&&!this._parent.closest(".navbar-nav"))for(const Tt of[].concat(...document.body.children))H.on(Tt,"mouseover",K);this._element.focus(),this._element.setAttribute("aria-expanded",!0),this._menu.classList.add(tt),this._element.classList.add(tt),H.trigger(this._element,"shown.bs.dropdown",Z)}}hide(){!Rt(this._element)&&this._isShown()&&this._completeHide({relatedTarget:this._element})}dispose(){this._popper&&this._popper.destroy(),super.dispose()}update(){this._inNavbar=this._detectNavbar(),this._popper&&this._popper.update()}_completeHide(Z){if(!H.trigger(this._element,"hide.bs.dropdown",Z).defaultPrevented){if("ontouchstart"in document.documentElement)for(const Tt of[].concat(...document.body.children))H.off(Tt,"mouseover",K);this._popper&&this._popper.destroy(),this._menu.classList.remove(tt),this._element.classList.remove(tt),this._element.setAttribute("aria-expanded","false"),mt.removeDataAttribute(this._menu,"popper"),H.trigger(this._element,"hidden.bs.dropdown",Z)}}_getConfig(Z){if("object"==typeof(Z=super._getConfig(Z)).reference&&!jt(Z.reference)&&"function"!=typeof Z.reference.getBoundingClientRect)throw new TypeError(`${ss.toUpperCase()}: Option "reference" provided type "object" without a required "getBoundingClientRect" method.`);return Z}_createPopper(){if(void 0===Js)throw new TypeError("Bootstrap's dropdowns require Popper (https://popper.js.org)");let Z=this._element;"parent"===this._config.reference?Z=this._parent:jt(this._config.reference)?Z=zt(this._config.reference):"object"==typeof this._config.reference&&(Z=this._config.reference);const Tt=this._getPopperConfig();this._popper=us(Z,this._menu,Tt)}_isShown(){return this._menu.classList.contains(tt)}_getPlacement(){const Z=this._parent;if(Z.classList.contains("dropend"))return ei;if(Z.classList.contains("dropstart"))return vi;if(Z.classList.contains("dropup-center"))return"top";if(Z.classList.contains("dropdown-center"))return"bottom";const Tt="end"===getComputedStyle(this._menu).getPropertyValue("--bs-position").trim();return Z.classList.contains("dropup")?Tt?fe:ne:Tt?je:Be}_detectNavbar(){return null!==this._element.closest(".navbar")}_getOffset(){const{offset:Z}=this._config;return"string"==typeof Z?Z.split(",").map(Tt=>Number.parseInt(Tt,10)):"function"==typeof Z?Tt=>Z(Tt,this._element):Z}_getPopperConfig(){const Z={placement:this._getPlacement(),modifiers:[{name:"preventOverflow",options:{boundary:this._config.boundary}},{name:"offset",options:{offset:this._getOffset()}}]};return(this._inNavbar||"static"===this._config.display)&&(mt.setDataAttribute(this._menu,"popper","static"),Z.modifiers=[{name:"applyStyles",enabled:!1}]),{...Z,..."function"==typeof this._config.popperConfig?this._config.popperConfig(Z):this._config.popperConfig}}_selectMenuItem({key:Z,target:Tt}){const ce=At.find(".dropdown-menu .dropdown-item:not(.disabled):not(:disabled)",this._menu).filter(Ke=>Ut(Ke));ce.length&&j(ce,Tt,Z===sa,!ce.includes(Tt)).focus()}static jQueryInterface(Z){return this.each(function(){const Tt=ui.getOrCreateInstance(this,Z);if("string"==typeof Z){if(void 0===Tt[Z])throw new TypeError(`No method named "${Z}"`);Tt[Z]()}})}static clearMenus(Z){if(2===Z.button||"keyup"===Z.type&&"Tab"!==Z.key)return;const Tt=At.find(St);for(const ce of Tt){const Ke=ui.getInstance(ce);if(!Ke||!1===Ke._config.autoClose)continue;const $e=Z.composedPath(),ti=$e.includes(Ke._menu);if($e.includes(Ke._element)||"inside"===Ke._config.autoClose&&!ti||"outside"===Ke._config.autoClose&&ti||Ke._menu.contains(Z.target)&&("keyup"===Z.type&&"Tab"===Z.key||/input|select|option|textarea|form/i.test(Z.target.tagName)))continue;const Bi={relatedTarget:Ke._element};"click"===Z.type&&(Bi.clickEvent=Z),Ke._completeHide(Bi)}}static dataApiKeydownHandler(Z){const Tt=/input|textarea/i.test(Z.target.tagName),ce="Escape"===Z.key,Ke=[za,sa].includes(Z.key);if(!Ke&&!ce||Tt&&!ce)return;Z.preventDefault();const $e=this.matches(yt)?this:At.prev(this,yt)[0]||At.next(this,yt)[0]||At.findOne(yt,Z.delegateTarget.parentNode),ti=ui.getOrCreateInstance($e);if(Ke)return Z.stopPropagation(),ti.show(),void ti._selectMenuItem(Z);ti._isShown()&&(Z.stopPropagation(),ti.hide(),$e.focus())}}H.on(document,E,yt,ui.dataApiKeydownHandler),H.on(document,E,Zt,ui.dataApiKeydownHandler),H.on(document,Ya,ui.clearMenus),H.on(document,"keyup.bs.dropdown.data-api",ui.clearMenus),H.on(document,Ya,yt,function(Xt){Xt.preventDefault(),ui.getOrCreateInstance(this).toggle()}),A(ui);const an=".fixed-top, .fixed-bottom, .is-fixed, .sticky-top",cn=".sticky-top",bn="padding-right",Qo="margin-right";class wr{constructor(){this._element=document.body}getWidth(){const Z=document.documentElement.clientWidth;return Math.abs(window.innerWidth-Z)}hide(){const Z=this.getWidth();this._disableOverFlow(),this._setElementAttributes(this._element,bn,Tt=>Tt+Z),this._setElementAttributes(an,bn,Tt=>Tt+Z),this._setElementAttributes(cn,Qo,Tt=>Tt-Z)}reset(){this._resetElementAttributes(this._element,"overflow"),this._resetElementAttributes(this._element,bn),this._resetElementAttributes(an,bn),this._resetElementAttributes(cn,Qo)}isOverflowing(){return this.getWidth()>0}_disableOverFlow(){this._saveInitialAttribute(this._element,"overflow"),this._element.style.overflow="hidden"}_setElementAttributes(Z,Tt,ce){const Ke=this.getWidth();this._applyManipulationCallback(Z,$e=>{if($e!==this._element&&window.innerWidth>$e.clientWidth+Ke)return;this._saveInitialAttribute($e,Tt);const ti=window.getComputedStyle($e).getPropertyValue(Tt);$e.style.setProperty(Tt,`${ce(Number.parseFloat(ti))}px`)})}_saveInitialAttribute(Z,Tt){const ce=Z.style.getPropertyValue(Tt);ce&&mt.setDataAttribute(Z,Tt,ce)}_resetElementAttributes(Z,Tt){this._applyManipulationCallback(Z,ce=>{const Ke=mt.getDataAttribute(ce,Tt);null!==Ke?(mt.removeDataAttribute(ce,Tt),ce.style.setProperty(Tt,Ke)):ce.style.removeProperty(Tt)})}_applyManipulationCallback(Z,Tt){if(jt(Z))Tt(Z);else for(const ce of At.find(Z,this._element))Tt(ce)}}const Io="mousedown.bs.backdrop",io={className:"modal-backdrop",clickCallback:null,isAnimated:!1,isVisible:!0,rootElement:"body"},Ir={className:"string",clickCallback:"(function|null)",isAnimated:"boolean",isVisible:"boolean",rootElement:"(element|string)"};class Ao extends pt{constructor(Z){super(),this._config=this._getConfig(Z),this._isAppended=!1,this._element=null}static get Default(){return io}static get DefaultType(){return Ir}static get NAME(){return"backdrop"}show(Z){if(!this._config.isVisible)return void x(Z);this._append();this._getElement().classList.add("show"),this._emulateAnimation(()=>{x(Z)})}hide(Z){this._config.isVisible?(this._getElement().classList.remove("show"),this._emulateAnimation(()=>{this.dispose(),x(Z)})):x(Z)}dispose(){this._isAppended&&(H.off(this._element,Io),this._element.remove(),this._isAppended=!1)}_getElement(){if(!this._element){const Z=document.createElement("div");Z.className=this._config.className,this._config.isAnimated&&Z.classList.add("fade"),this._element=Z}return this._element}_configAfterMerge(Z){return Z.rootElement=zt(Z.rootElement),Z}_append(){if(this._isAppended)return;const Z=this._getElement();this._config.rootElement.append(Z),H.on(Z,Io,()=>{x(this._config.clickCallback)}),this._isAppended=!0}_emulateAnimation(Z){T(Z,this._getElement(),this._config.isAnimated)}}const er=".bs.focustrap",aa="backward",ga={autofocus:!0,trapElement:null},hr={autofocus:"boolean",trapElement:"element"};class Jr extends pt{constructor(Z){super(),this._config=this._getConfig(Z),this._isActive=!1,this._lastTabNavDirection=null}static get Default(){return ga}static get DefaultType(){return hr}static get NAME(){return"focustrap"}activate(){this._isActive||(this._config.autofocus&&this._config.trapElement.focus(),H.off(document,er),H.on(document,"focusin.bs.focustrap",Z=>this._handleFocusin(Z)),H.on(document,"keydown.tab.bs.focustrap",Z=>this._handleKeydown(Z)),this._isActive=!0)}deactivate(){this._isActive&&(this._isActive=!1,H.off(document,er))}_handleFocusin(Z){const{trapElement:Tt}=this._config;if(Z.target===document||Z.target===Tt||Tt.contains(Z.target))return;const ce=At.focusableChildren(Tt);0===ce.length?Tt.focus():this._lastTabNavDirection===aa?ce[ce.length-1].focus():ce[0].focus()}_handleKeydown(Z){"Tab"===Z.key&&(this._lastTabNavDirection=Z.shiftKey?aa:"forward")}}const js="hidden.bs.modal",Ho="show.bs.modal",Qr="modal-open",Go="modal-static",Rr={backdrop:!0,focus:!0,keyboard:!0},sr={backdrop:"(boolean|string)",focus:"boolean",keyboard:"boolean"};class ir extends dt{constructor(Z,Tt){super(Z,Tt),this._dialog=At.findOne(".modal-dialog",this._element),this._backdrop=this._initializeBackDrop(),this._focustrap=this._initializeFocusTrap(),this._isShown=!1,this._isTransitioning=!1,this._scrollBar=new wr,this._addEventListeners()}static get Default(){return Rr}static get DefaultType(){return sr}static get NAME(){return"modal"}toggle(Z){return this._isShown?this.hide():this.show(Z)}show(Z){this._isShown||this._isTransitioning||H.trigger(this._element,Ho,{relatedTarget:Z}).defaultPrevented||(this._isShown=!0,this._isTransitioning=!0,this._scrollBar.hide(),document.body.classList.add(Qr),this._adjustDialog(),this._backdrop.show(()=>this._showElement(Z)))}hide(){this._isShown&&!this._isTransitioning&&(H.trigger(this._element,"hide.bs.modal").defaultPrevented||(this._isShown=!1,this._isTransitioning=!0,this._focustrap.deactivate(),this._element.classList.remove("show"),this._queueCallback(()=>this._hideModal(),this._element,this._isAnimated())))}dispose(){for(const Z of[window,this._dialog])H.off(Z,".bs.modal");this._backdrop.dispose(),this._focustrap.deactivate(),super.dispose()}handleUpdate(){this._adjustDialog()}_initializeBackDrop(){return new Ao({isVisible:Boolean(this._config.backdrop),isAnimated:this._isAnimated()})}_initializeFocusTrap(){return new Jr({trapElement:this._element})}_showElement(Z){document.body.contains(this._element)||document.body.append(this._element),this._element.style.display="block",this._element.removeAttribute("aria-hidden"),this._element.setAttribute("aria-modal",!0),this._element.setAttribute("role","dialog"),this._element.scrollTop=0;const Tt=At.findOne(".modal-body",this._dialog);Tt&&(Tt.scrollTop=0),this._element.classList.add("show"),this._queueCallback(()=>{this._config.focus&&this._focustrap.activate(),this._isTransitioning=!1,H.trigger(this._element,"shown.bs.modal",{relatedTarget:Z})},this._dialog,this._isAnimated())}_addEventListeners(){H.on(this._element,"keydown.dismiss.bs.modal",Z=>{if("Escape"===Z.key)return this._config.keyboard?(Z.preventDefault(),void this.hide()):void this._triggerBackdropTransition()}),H.on(window,"resize.bs.modal",()=>{this._isShown&&!this._isTransitioning&&this._adjustDialog()}),H.on(this._element,"mousedown.dismiss.bs.modal",Z=>{H.one(this._element,"click.dismiss.bs.modal",Tt=>{this._element===Z.target&&this._element===Tt.target&&("static"!==this._config.backdrop?this._config.backdrop&&this.hide():this._triggerBackdropTransition())})})}_hideModal(){this._element.style.display="none",this._element.setAttribute("aria-hidden",!0),this._element.removeAttribute("aria-modal"),this._element.removeAttribute("role"),this._isTransitioning=!1,this._backdrop.hide(()=>{document.body.classList.remove(Qr),this._resetAdjustments(),this._scrollBar.reset(),H.trigger(this._element,js)})}_isAnimated(){return this._element.classList.contains("fade")}_triggerBackdropTransition(){if(H.trigger(this._element,"hidePrevented.bs.modal").defaultPrevented)return;const Z=this._element.scrollHeight>document.documentElement.clientHeight,Tt=this._element.style.overflowY;"hidden"===Tt||this._element.classList.contains(Go)||(Z||(this._element.style.overflowY="hidden"),this._element.classList.add(Go),this._queueCallback(()=>{this._element.classList.remove(Go),this._queueCallback(()=>{this._element.style.overflowY=Tt},this._dialog)},this._dialog),this._element.focus())}_adjustDialog(){const Z=this._element.scrollHeight>document.documentElement.clientHeight,Tt=this._scrollBar.getWidth(),ce=Tt>0;if(ce&&!Z){const Ke=I()?"paddingLeft":"paddingRight";this._element.style[Ke]=`${Tt}px`}if(!ce&&Z){const Ke=I()?"paddingRight":"paddingLeft";this._element.style[Ke]=`${Tt}px`}}_resetAdjustments(){this._element.style.paddingLeft="",this._element.style.paddingRight=""}static jQueryInterface(Z,Tt){return this.each(function(){const ce=ir.getOrCreateInstance(this,Z);if("string"==typeof Z){if(void 0===ce[Z])throw new TypeError(`No method named "${Z}"`);ce[Z](Tt)}})}}H.on(document,"click.bs.modal.data-api",'[data-bs-toggle="modal"]',function(Xt){const Z=wt(this);["A","AREA"].includes(this.tagName)&&Xt.preventDefault(),H.one(Z,Ho,ce=>{ce.defaultPrevented||H.one(Z,js,()=>{Ut(this)&&this.focus()})});const Tt=At.findOne(".modal.show");Tt&&ir.getInstance(Tt).hide(),ir.getOrCreateInstance(Z).toggle(this)}),Y(ir),A(ir);const go="showing",Gr=".offcanvas.show",cr="hidePrevented.bs.offcanvas",co="hidden.bs.offcanvas",la={backdrop:!0,keyboard:!0,scroll:!1},as={backdrop:"(boolean|string)",keyboard:"boolean",scroll:"boolean"};class _s extends dt{constructor(Z,Tt){super(Z,Tt),this._isShown=!1,this._backdrop=this._initializeBackDrop(),this._focustrap=this._initializeFocusTrap(),this._addEventListeners()}static get Default(){return la}static get DefaultType(){return as}static get NAME(){return"offcanvas"}toggle(Z){return this._isShown?this.hide():this.show(Z)}show(Z){this._isShown||H.trigger(this._element,"show.bs.offcanvas",{relatedTarget:Z}).defaultPrevented||(this._isShown=!0,this._backdrop.show(),this._config.scroll||(new wr).hide(),this._element.setAttribute("aria-modal",!0),this._element.setAttribute("role","dialog"),this._element.classList.add(go),this._queueCallback(()=>{this._config.scroll&&!this._config.backdrop||this._focustrap.activate(),this._element.classList.add("show"),this._element.classList.remove(go),H.trigger(this._element,"shown.bs.offcanvas",{relatedTarget:Z})},this._element,!0))}hide(){this._isShown&&(H.trigger(this._element,"hide.bs.offcanvas").defaultPrevented||(this._focustrap.deactivate(),this._element.blur(),this._isShown=!1,this._element.classList.add("hiding"),this._backdrop.hide(),this._queueCallback(()=>{this._element.classList.remove("show","hiding"),this._element.removeAttribute("aria-modal"),this._element.removeAttribute("role"),this._config.scroll||(new wr).reset(),H.trigger(this._element,co)},this._element,!0)))}dispose(){this._backdrop.dispose(),this._focustrap.deactivate(),super.dispose()}_initializeBackDrop(){const Z=Boolean(this._config.backdrop);return new Ao({className:"offcanvas-backdrop",isVisible:Z,isAnimated:!0,rootElement:this._element.parentNode,clickCallback:Z?()=>{"static"!==this._config.backdrop?this.hide():H.trigger(this._element,cr)}:null})}_initializeFocusTrap(){return new Jr({trapElement:this._element})}_addEventListeners(){H.on(this._element,"keydown.dismiss.bs.offcanvas",Z=>{"Escape"===Z.key&&(this._config.keyboard?this.hide():H.trigger(this._element,cr))})}static jQueryInterface(Z){return this.each(function(){const Tt=_s.getOrCreateInstance(this,Z);if("string"==typeof Z){if(void 0===Tt[Z]||Z.startsWith("_")||"constructor"===Z)throw new TypeError(`No method named "${Z}"`);Tt[Z](this)}})}}H.on(document,"click.bs.offcanvas.data-api",'[data-bs-toggle="offcanvas"]',function(Xt){const Z=wt(this);if(["A","AREA"].includes(this.tagName)&&Xt.preventDefault(),Rt(this))return;H.one(Z,co,()=>{Ut(this)&&this.focus()});const Tt=At.findOne(Gr);Tt&&Tt!==Z&&_s.getInstance(Tt).hide(),_s.getOrCreateInstance(Z).toggle(this)}),H.on(window,"load.bs.offcanvas.data-api",()=>{for(const Xt of At.find(Gr))_s.getOrCreateInstance(Xt).show()}),H.on(window,"resize.bs.offcanvas",()=>{for(const Xt of At.find("[aria-modal][class*=show][class*=offcanvas-]"))"fixed"!==getComputedStyle(Xt).position&&_s.getOrCreateInstance(Xt).hide()}),Y(_s),A(_s);const Qs=new Set(["background","cite","href","itemtype","longdesc","poster","src","xlink:href"]),Oa=/^(?:(?:https?|mailto|ftp|tel|file|sms):|[^#&/:?]*(?:[#/?]|$))/i,ya=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[\d+/a-z]+=*$/i,Es=(Xt,Z)=>{const Tt=Xt.nodeName.toLowerCase();return Z.includes(Tt)?!Qs.has(Tt)||Boolean(Oa.test(Xt.nodeValue)||ya.test(Xt.nodeValue)):Z.filter(ce=>ce instanceof RegExp).some(ce=>ce.test(Tt))},xs={"*":["class","dir","id","lang","role",/^aria-[\w-]*$/i],a:["target","href","title","rel"],area:[],b:[],br:[],col:[],code:[],div:[],em:[],hr:[],h1:[],h2:[],h3:[],h4:[],h5:[],h6:[],i:[],img:["src","srcset","alt","title","width","height"],li:[],ol:[],p:[],pre:[],s:[],small:[],span:[],sub:[],sup:[],strong:[],u:[],ul:[]},Sa={allowList:xs,content:{},extraClass:"",html:!1,sanitize:!0,sanitizeFn:null,template:"<div></div>"},r={allowList:"object",content:"object",extraClass:"(string|function)",html:"boolean",sanitize:"boolean",sanitizeFn:"(null|function)",template:"string"},f={entry:"(string|element|function|null)",selector:"(string|element)"};class U extends pt{constructor(Z){super(),this._config=this._getConfig(Z)}static get Default(){return Sa}static get DefaultType(){return r}static get NAME(){return"TemplateFactory"}getContent(){return Object.values(this._config.content).map(Z=>this._resolvePossibleFunction(Z)).filter(Boolean)}hasContent(){return this.getContent().length>0}changeContent(Z){return this._checkContent(Z),this._config.content={...this._config.content,...Z},this}toHtml(){const Z=document.createElement("div");Z.innerHTML=this._maybeSanitize(this._config.template);for(const[Ke,$e]of Object.entries(this._config.content))this._setContent(Z,$e,Ke);const Tt=Z.children[0],ce=this._resolvePossibleFunction(this._config.extraClass);return ce&&Tt.classList.add(...ce.split(" ")),Tt}_typeCheckConfig(Z){super._typeCheckConfig(Z),this._checkContent(Z.content)}_checkContent(Z){for(const[Tt,ce]of Object.entries(Z))super._typeCheckConfig({selector:Tt,entry:ce},f)}_setContent(Z,Tt,ce){const Ke=At.findOne(ce,Z);Ke&&((Tt=this._resolvePossibleFunction(Tt))?jt(Tt)?this._putElementInTemplate(zt(Tt),Ke):this._config.html?Ke.innerHTML=this._maybeSanitize(Tt):Ke.textContent=Tt:Ke.remove())}_maybeSanitize(Z){return this._config.sanitize?function(Tt,ce,Ke){if(!Tt.length)return Tt;if(Ke&&"function"==typeof Ke)return Ke(Tt);const $e=(new window.DOMParser).parseFromString(Tt,"text/html"),ti=[].concat(...$e.body.querySelectorAll("*"));for(const Bi of ti){const Wi=Bi.nodeName.toLowerCase();if(!Object.keys(ce).includes(Wi)){Bi.remove();continue}const en=[].concat(...Bi.attributes),ji=[].concat(ce["*"]||[],ce[Wi]||[]);for(const Gi of en)Es(Gi,ji)||Bi.removeAttribute(Gi.nodeName)}return $e.body.innerHTML}(Z,this._config.allowList,this._config.sanitizeFn):Z}_resolvePossibleFunction(Z){return"function"==typeof Z?Z(this):Z}_putElementInTemplate(Z,Tt){if(this._config.html)return Tt.innerHTML="",void Tt.append(Z);Tt.textContent=Z.textContent}}const ut=new Set(["sanitize","allowList","sanitizeFn"]),Et="fade",ae="show",Xe="hide.bs.modal",ki="hover",Sn={AUTO:"auto",TOP:"top",RIGHT:I()?"left":"right",BOTTOM:"bottom",LEFT:I()?"right":"left"},no={allowList:xs,animation:!0,boundary:"clippingParents",container:!1,customClass:"",delay:0,fallbackPlacements:["top","right","bottom","left"],html:!1,offset:[0,0],placement:"top",popperConfig:null,sanitize:!0,sanitizeFn:null,selector:!1,template:'<div class="tooltip" role="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',title:"",trigger:"hover focus"},wo={allowList:"object",animation:"boolean",boundary:"(string|element)",container:"(string|element|boolean)",customClass:"(string|function)",delay:"(number|object)",fallbackPlacements:"array",html:"boolean",offset:"(array|string|function)",placement:"(string|function)",popperConfig:"(null|object|function)",sanitize:"boolean",sanitizeFn:"(null|function)",selector:"(string|boolean)",template:"string",title:"(string|element|function)",trigger:"string"};class fr extends dt{constructor(Z,Tt){if(void 0===Js)throw new TypeError("Bootstrap's tooltips require Popper (https://popper.js.org)");super(Z,Tt),this._isEnabled=!0,this._timeout=0,this._isHovered=null,this._activeTrigger={},this._popper=null,this._templateFactory=null,this._newContent=null,this.tip=null,this._setListeners(),this._config.selector||this._fixTitle()}static get Default(){return no}static get DefaultType(){return wo}static get NAME(){return"tooltip"}enable(){this._isEnabled=!0}disable(){this._isEnabled=!1}toggleEnabled(){this._isEnabled=!this._isEnabled}toggle(){this._isEnabled&&(this._activeTrigger.click=!this._activeTrigger.click,this._isShown()?this._leave():this._enter())}dispose(){clearTimeout(this._timeout),H.off(this._element.closest(".modal"),Xe,this._hideModalHandler),this._element.getAttribute("data-bs-original-title")&&this._element.setAttribute("title",this._element.getAttribute("data-bs-original-title")),this._disposePopper(),super.dispose()}show(){if("none"===this._element.style.display)throw new Error("Please use show on visible elements");if(!this._isWithContent()||!this._isEnabled)return;const Z=H.trigger(this._element,this.constructor.eventName("show")),Tt=(It(this._element)||this._element.ownerDocument.documentElement).contains(this._element);if(Z.defaultPrevented||!Tt)return;this._disposePopper();const ce=this._getTipElement();this._element.setAttribute("aria-describedby",ce.getAttribute("id"));const{container:Ke}=this._config;if(this._element.ownerDocument.documentElement.contains(this.tip)||(Ke.append(ce),H.trigger(this._element,this.constructor.eventName("inserted"))),this._popper=this._createPopper(ce),ce.classList.add(ae),"ontouchstart"in document.documentElement)for(const $e of[].concat(...document.body.children))H.on($e,"mouseover",K);this._queueCallback(()=>{H.trigger(this._element,this.constructor.eventName("shown")),!1===this._isHovered&&this._leave(),this._isHovered=!1},this.tip,this._isAnimated())}hide(){if(this._isShown()&&!H.trigger(this._element,this.constructor.eventName("hide")).defaultPrevented){if(this._getTipElement().classList.remove(ae),"ontouchstart"in document.documentElement)for(const Z of[].concat(...document.body.children))H.off(Z,"mouseover",K);this._activeTrigger.click=!1,this._activeTrigger.focus=!1,this._activeTrigger.hover=!1,this._isHovered=null,this._queueCallback(()=>{this._isWithActiveTrigger()||(this._isHovered||this._disposePopper(),this._element.removeAttribute("aria-describedby"),H.trigger(this._element,this.constructor.eventName("hidden")))},this.tip,this._isAnimated())}}update(){this._popper&&this._popper.update()}_isWithContent(){return Boolean(this._getTitle())}_getTipElement(){return this.tip||(this.tip=this._createTipElement(this._newContent||this._getContentForTemplate())),this.tip}_createTipElement(Z){const Tt=this._getTemplateFactory(Z).toHtml();if(!Tt)return null;Tt.classList.remove(Et,ae),Tt.classList.add(`bs-${this.constructor.NAME}-auto`);const ce=(Ke=>{do{Ke+=Math.floor(1e6*Math.random())}while(document.getElementById(Ke));return Ke})(this.constructor.NAME).toString();return Tt.setAttribute("id",ce),this._isAnimated()&&Tt.classList.add(Et),Tt}setContent(Z){this._newContent=Z,this._isShown()&&(this._disposePopper(),this.show())}_getTemplateFactory(Z){return this._templateFactory?this._templateFactory.changeContent(Z):this._templateFactory=new U({...this._config,content:Z,extraClass:this._resolvePossibleFunction(this._config.customClass)}),this._templateFactory}_getContentForTemplate(){return{".tooltip-inner":this._getTitle()}}_getTitle(){return this._resolvePossibleFunction(this._config.title)||this._element.getAttribute("data-bs-original-title")}_initializeOnDelegatedTarget(Z){return this.constructor.getOrCreateInstance(Z.delegateTarget,this._getDelegateConfig())}_isAnimated(){return this._config.animation||this.tip&&this.tip.classList.contains(Et)}_isShown(){return this.tip&&this.tip.classList.contains(ae)}_createPopper(Z){const Tt="function"==typeof this._config.placement?this._config.placement.call(this,Z,this._element):this._config.placement,ce=Sn[Tt.toUpperCase()];return us(this._element,Z,this._getPopperConfig(ce))}_getOffset(){const{offset:Z}=this._config;return"string"==typeof Z?Z.split(",").map(Tt=>Number.parseInt(Tt,10)):"function"==typeof Z?Tt=>Z(Tt,this._element):Z}_resolvePossibleFunction(Z){return"function"==typeof Z?Z.call(this._element):Z}_getPopperConfig(Z){const Tt={placement:Z,modifiers:[{name:"flip",options:{fallbackPlacements:this._config.fallbackPlacements}},{name:"offset",options:{offset:this._getOffset()}},{name:"preventOverflow",options:{boundary:this._config.boundary}},{name:"arrow",options:{element:`.${this.constructor.NAME}-arrow`}},{name:"preSetPlacement",enabled:!0,phase:"beforeMain",fn:ce=>{this._getTipElement().setAttribute("data-popper-placement",ce.state.placement)}}]};return{...Tt,..."function"==typeof this._config.popperConfig?this._config.popperConfig(Tt):this._config.popperConfig}}_setListeners(){const Z=this._config.trigger.split(" ");for(const Tt of Z)if("click"===Tt)H.on(this._element,this.constructor.eventName("click"),this._config.selector,ce=>{this._initializeOnDelegatedTarget(ce).toggle()});else if("manual"!==Tt){const ce=this.constructor.eventName(Tt===ki?"mouseenter":"focusin"),Ke=this.constructor.eventName(Tt===ki?"mouseleave":"focusout");H.on(this._element,ce,this._config.selector,$e=>{const ti=this._initializeOnDelegatedTarget($e);ti._activeTrigger["focusin"===$e.type?"focus":ki]=!0,ti._enter()}),H.on(this._element,Ke,this._config.selector,$e=>{const ti=this._initializeOnDelegatedTarget($e);ti._activeTrigger["focusout"===$e.type?"focus":ki]=ti._element.contains($e.relatedTarget),ti._leave()})}this._hideModalHandler=()=>{this._element&&this.hide()},H.on(this._element.closest(".modal"),Xe,this._hideModalHandler)}_fixTitle(){const Z=this._element.getAttribute("title");Z&&(this._element.getAttribute("aria-label")||this._element.textContent.trim()||this._element.setAttribute("aria-label",Z),this._element.setAttribute("data-bs-original-title",Z),this._element.removeAttribute("title"))}_enter(){this._isShown()||this._isHovered?this._isHovered=!0:(this._isHovered=!0,this._setTimeout(()=>{this._isHovered&&this.show()},this._config.delay.show))}_leave(){this._isWithActiveTrigger()||(this._isHovered=!1,this._setTimeout(()=>{this._isHovered||this.hide()},this._config.delay.hide))}_setTimeout(Z,Tt){clearTimeout(this._timeout),this._timeout=setTimeout(Z,Tt)}_isWithActiveTrigger(){return Object.values(this._activeTrigger).includes(!0)}_getConfig(Z){const Tt=mt.getDataAttributes(this._element);for(const ce of Object.keys(Tt))ut.has(ce)&&delete Tt[ce];return Z={...Tt,..."object"==typeof Z&&Z?Z:{}},Z=this._mergeConfigObj(Z),Z=this._configAfterMerge(Z),this._typeCheckConfig(Z),Z}_configAfterMerge(Z){return Z.container=!1===Z.container?document.body:zt(Z.container),"number"==typeof Z.delay&&(Z.delay={show:Z.delay,hide:Z.delay}),"number"==typeof Z.title&&(Z.title=Z.title.toString()),"number"==typeof Z.content&&(Z.content=Z.content.toString()),Z}_getDelegateConfig(){const Z={};for(const Tt in this._config)this.constructor.Default[Tt]!==this._config[Tt]&&(Z[Tt]=this._config[Tt]);return Z.selector=!1,Z.trigger="manual",Z}_disposePopper(){this._popper&&(this._popper.destroy(),this._popper=null),this.tip&&(this.tip.remove(),this.tip=null)}static jQueryInterface(Z){return this.each(function(){const Tt=fr.getOrCreateInstance(this,Z);if("string"==typeof Z){if(void 0===Tt[Z])throw new TypeError(`No method named "${Z}"`);Tt[Z]()}})}}A(fr);const Fs={...fr.Default,content:"",offset:[0,8],placement:"right",template:'<div class="popover" role="tooltip"><div class="popover-arrow"></div><h3 class="popover-header"></h3><div class="popover-body"></div></div>',trigger:"click"},ns={...fr.DefaultType,content:"(null|string|element|function)"};class Wr extends fr{static get Default(){return Fs}static get DefaultType(){return ns}static get NAME(){return"popover"}_isWithContent(){return this._getTitle()||this._getContent()}_getContentForTemplate(){return{".popover-header":this._getTitle(),".popover-body":this._getContent()}}_getContent(){return this._resolvePossibleFunction(this._config.content)}static jQueryInterface(Z){return this.each(function(){const Tt=Wr.getOrCreateInstance(this,Z);if("string"==typeof Z){if(void 0===Tt[Z])throw new TypeError(`No method named "${Z}"`);Tt[Z]()}})}}A(Wr);const ha="click.bs.scrollspy",ls="active",ur={offset:null,rootMargin:"0px 0px -25%",smoothScroll:!1,target:null,threshold:[.1,.5,1]},Ms={offset:"(number|null)",rootMargin:"string",smoothScroll:"boolean",target:"element",threshold:"array"};class Hs extends dt{constructor(Z,Tt){super(Z,Tt),this._targetLinks=new Map,this._observableSections=new Map,this._rootElement="visible"===getComputedStyle(this._element).overflowY?null:this._element,this._activeTarget=null,this._observer=null,this._previousScrollData={visibleEntryTop:0,parentScrollTop:0},this.refresh()}static get Default(){return ur}static get DefaultType(){return Ms}static get NAME(){return"scrollspy"}refresh(){this._initializeTargetsAndObservables(),this._maybeEnableSmoothScroll(),this._observer?this._observer.disconnect():this._observer=this._getNewObserver();for(const Z of this._observableSections.values())this._observer.observe(Z)}dispose(){this._observer.disconnect(),super.dispose()}_configAfterMerge(Z){return Z.target=zt(Z.target)||document.body,Z.rootMargin=Z.offset?`${Z.offset}px 0px -30%`:Z.rootMargin,"string"==typeof Z.threshold&&(Z.threshold=Z.threshold.split(",").map(Tt=>Number.parseFloat(Tt))),Z}_maybeEnableSmoothScroll(){this._config.smoothScroll&&(H.off(this._config.target,ha),H.on(this._config.target,ha,"[href]",Z=>{const Tt=this._observableSections.get(Z.target.hash);if(Tt){Z.preventDefault();const ce=this._rootElement||window,Ke=Tt.offsetTop-this._element.offsetTop;if(ce.scrollTo)return void ce.scrollTo({top:Ke,behavior:"smooth"});ce.scrollTop=Ke}}))}_getNewObserver(){return new IntersectionObserver(Tt=>this._observerCallback(Tt),{root:this._rootElement,threshold:this._config.threshold,rootMargin:this._config.rootMargin})}_observerCallback(Z){const Tt=ti=>this._targetLinks.get(`#${ti.target.id}`),ce=ti=>{this._previousScrollData.visibleEntryTop=ti.target.offsetTop,this._process(Tt(ti))},Ke=(this._rootElement||document.documentElement).scrollTop,$e=Ke>=this._previousScrollData.parentScrollTop;this._previousScrollData.parentScrollTop=Ke;for(const ti of Z){if(!ti.isIntersecting){this._activeTarget=null,this._clearActiveClass(Tt(ti));continue}const Bi=ti.target.offsetTop>=this._previousScrollData.visibleEntryTop;if($e&&Bi){if(ce(ti),!Ke)return}else $e||Bi||ce(ti)}}_initializeTargetsAndObservables(){this._targetLinks=new Map,this._observableSections=new Map;const Z=At.find("[href]",this._config.target);for(const Tt of Z){if(!Tt.hash||Rt(Tt))continue;const ce=At.findOne(Tt.hash,this._element);Ut(ce)&&(this._targetLinks.set(Tt.hash,Tt),this._observableSections.set(Tt.hash,ce))}}_process(Z){this._activeTarget!==Z&&(this._clearActiveClass(this._config.target),this._activeTarget=Z,Z.classList.add(ls),this._activateParents(Z),H.trigger(this._element,"activate.bs.scrollspy",{relatedTarget:Z}))}_activateParents(Z){if(Z.classList.contains("dropdown-item"))At.findOne(".dropdown-toggle",Z.closest(".dropdown")).classList.add(ls);else for(const Tt of At.parents(Z,".nav, .list-group"))for(const ce of At.prev(Tt,".nav-link, .nav-item > .nav-link, .list-group-item"))ce.classList.add(ls)}_clearActiveClass(Z){Z.classList.remove(ls);const Tt=At.find("[href].active",Z);for(const ce of Tt)ce.classList.remove(ls)}static jQueryInterface(Z){return this.each(function(){const Tt=Hs.getOrCreateInstance(this,Z);if("string"==typeof Z){if(void 0===Tt[Z]||Z.startsWith("_")||"constructor"===Z)throw new TypeError(`No method named "${Z}"`);Tt[Z]()}})}}H.on(window,"load.bs.scrollspy.data-api",()=>{for(const Xt of At.find('[data-bs-spy="scroll"]'))Hs.getOrCreateInstance(Xt)}),A(Hs);const Ta="ArrowLeft",Ls="ArrowRight",Ka="ArrowUp",Va="ArrowDown",ve="active",ni="show",zi='[data-bs-toggle="tab"], [data-bs-toggle="pill"], [data-bs-toggle="list"]',ri=`.nav-link:not(.dropdown-toggle), .list-group-item:not(.dropdown-toggle), [role="tab"]:not(.dropdown-toggle), ${zi}`;class Di extends dt{constructor(Z){super(Z),this._parent=this._element.closest('.list-group, .nav, [role="tablist"]'),this._parent&&(this._setInitialAttributes(this._parent,this._getChildren()),H.on(this._element,"keydown.bs.tab",Tt=>this._keydown(Tt)))}static get NAME(){return"tab"}show(){const Z=this._element;if(this._elemIsActive(Z))return;const Tt=this._getActiveElem(),ce=Tt?H.trigger(Tt,"hide.bs.tab",{relatedTarget:Z}):null;H.trigger(Z,"show.bs.tab",{relatedTarget:Tt}).defaultPrevented||ce&&ce.defaultPrevented||(this._deactivate(Tt,Z),this._activate(Z,Tt))}_activate(Z,Tt){Z&&(Z.classList.add(ve),this._activate(wt(Z)),this._queueCallback(()=>{"tab"===Z.getAttribute("role")?(Z.removeAttribute("tabindex"),Z.setAttribute("aria-selected",!0),this._toggleDropDown(Z,!0),H.trigger(Z,"shown.bs.tab",{relatedTarget:Tt})):Z.classList.add(ni)},Z,Z.classList.contains("fade")))}_deactivate(Z,Tt){Z&&(Z.classList.remove(ve),Z.blur(),this._deactivate(wt(Z)),this._queueCallback(()=>{"tab"===Z.getAttribute("role")?(Z.setAttribute("aria-selected",!1),Z.setAttribute("tabindex","-1"),this._toggleDropDown(Z,!1),H.trigger(Z,"hidden.bs.tab",{relatedTarget:Tt})):Z.classList.remove(ni)},Z,Z.classList.contains("fade")))}_keydown(Z){if(![Ta,Ls,Ka,Va].includes(Z.key))return;Z.stopPropagation(),Z.preventDefault();const Tt=[Ls,Va].includes(Z.key),ce=j(this._getChildren().filter(Ke=>!Rt(Ke)),Z.target,Tt,!0);ce&&(ce.focus({preventScroll:!0}),Di.getOrCreateInstance(ce).show())}_getChildren(){return At.find(ri,this._parent)}_getActiveElem(){return this._getChildren().find(Z=>this._elemIsActive(Z))||null}_setInitialAttributes(Z,Tt){this._setAttributeIfNotExists(Z,"role","tablist");for(const ce of Tt)this._setInitialAttributesOnChild(ce)}_setInitialAttributesOnChild(Z){Z=this._getInnerElement(Z);const Tt=this._elemIsActive(Z),ce=this._getOuterElement(Z);Z.setAttribute("aria-selected",Tt),ce!==Z&&this._setAttributeIfNotExists(ce,"role","presentation"),Tt||Z.setAttribute("tabindex","-1"),this._setAttributeIfNotExists(Z,"role","tab"),this._setInitialAttributesOnTargetPanel(Z)}_setInitialAttributesOnTargetPanel(Z){const Tt=wt(Z);Tt&&(this._setAttributeIfNotExists(Tt,"role","tabpanel"),Z.id&&this._setAttributeIfNotExists(Tt,"aria-labelledby",`#${Z.id}`))}_toggleDropDown(Z,Tt){const ce=this._getOuterElement(Z);if(!ce.classList.contains("dropdown"))return;const Ke=($e,ti)=>{const Bi=At.findOne($e,ce);Bi&&Bi.classList.toggle(ti,Tt)};Ke(".dropdown-toggle",ve),Ke(".dropdown-menu",ni),ce.setAttribute("aria-expanded",Tt)}_setAttributeIfNotExists(Z,Tt,ce){Z.hasAttribute(Tt)||Z.setAttribute(Tt,ce)}_elemIsActive(Z){return Z.classList.contains(ve)}_getInnerElement(Z){return Z.matches(ri)?Z:At.findOne(ri,Z)}_getOuterElement(Z){return Z.closest(".nav-item, .list-group-item")||Z}static jQueryInterface(Z){return this.each(function(){const Tt=Di.getOrCreateInstance(this);if("string"==typeof Z){if(void 0===Tt[Z]||Z.startsWith("_")||"constructor"===Z)throw new TypeError(`No method named "${Z}"`);Tt[Z]()}})}}H.on(document,"click.bs.tab",zi,function(Xt){["A","AREA"].includes(this.tagName)&&Xt.preventDefault(),Rt(this)||Di.getOrCreateInstance(this).show()}),H.on(window,"load.bs.tab",()=>{for(const Xt of At.find('.active[data-bs-toggle="tab"], .active[data-bs-toggle="pill"], .active[data-bs-toggle="list"]'))Di.getOrCreateInstance(Xt)}),A(Di);const rn="show",xn="showing",lo={animation:"boolean",autohide:"boolean",delay:"number"},oo={animation:!0,autohide:!0,delay:5e3};class Wn extends dt{constructor(Z,Tt){super(Z,Tt),this._timeout=null,this._hasMouseInteraction=!1,this._hasKeyboardInteraction=!1,this._setListeners()}static get Default(){return oo}static get DefaultType(){return lo}static get NAME(){return"toast"}show(){H.trigger(this._element,"show.bs.toast").defaultPrevented||(this._clearTimeout(),this._config.animation&&this._element.classList.add("fade"),this._element.classList.remove("hide"),this._element.classList.add(rn,xn),this._queueCallback(()=>{this._element.classList.remove(xn),H.trigger(this._element,"shown.bs.toast"),this._maybeScheduleHide()},this._element,this._config.animation))}hide(){this.isShown()&&(H.trigger(this._element,"hide.bs.toast").defaultPrevented||(this._element.classList.add(xn),this._queueCallback(()=>{this._element.classList.add("hide"),this._element.classList.remove(xn,rn),H.trigger(this._element,"hidden.bs.toast")},this._element,this._config.animation)))}dispose(){this._clearTimeout(),this.isShown()&&this._element.classList.remove(rn),super.dispose()}isShown(){return this._element.classList.contains(rn)}_maybeScheduleHide(){this._config.autohide&&(this._hasMouseInteraction||this._hasKeyboardInteraction||(this._timeout=setTimeout(()=>{this.hide()},this._config.delay)))}_onInteraction(Z,Tt){switch(Z.type){case"mouseover":case"mouseout":this._hasMouseInteraction=Tt;break;case"focusin":case"focusout":this._hasKeyboardInteraction=Tt}if(Tt)return void this._clearTimeout();const ce=Z.relatedTarget;this._element===ce||this._element.contains(ce)||this._maybeScheduleHide()}_setListeners(){H.on(this._element,"mouseover.bs.toast",Z=>this._onInteraction(Z,!0)),H.on(this._element,"mouseout.bs.toast",Z=>this._onInteraction(Z,!1)),H.on(this._element,"focusin.bs.toast",Z=>this._onInteraction(Z,!0)),H.on(this._element,"focusout.bs.toast",Z=>this._onInteraction(Z,!1))}_clearTimeout(){clearTimeout(this._timeout),this._timeout=null}static jQueryInterface(Z){return this.each(function(){const Tt=Wn.getOrCreateInstance(this,Z);if("string"==typeof Z){if(void 0===Tt[Z])throw new TypeError(`No method named "${Z}"`);Tt[Z](this)}})}}return Y(Wn),A(Wn),{Alert:lt,Button:Lt,Carousel:be,Collapse:Pi,Dropdown:ui,Modal:ir,Offcanvas:_s,Popover:Wr,ScrollSpy:Hs,Tab:Di,Toast:Wn,Tooltip:fr}}),function(vt,te){"object"==typeof exports&&typeof module<"u"?te(exports):"function"==typeof define&&define.amd?define(["exports"],te):te((vt=typeof globalThis<"u"?globalThis:vt||self).leaflet={})}(this,function(vt){"use strict";function te(r){for(var f,U,ut=1,Et=arguments.length;ut<Et;ut++)for(f in U=arguments[ut])r[f]=U[f];return r}var Ct=Object.create||function(r){return wt.prototype=r,new wt};function wt(){}function xt(r,f){var U,ut=Array.prototype.slice;return r.bind?r.bind.apply(r,ut.call(arguments,1)):(U=ut.call(arguments,2),function(){return r.apply(f,U.length?U.concat(ut.call(arguments)):arguments)})}var jt=0;function zt(r){return"_leaflet_id"in r||(r._leaflet_id=++jt),r._leaflet_id}function Ut(r,f,U){var ut,Et,ae=function(){ut=!1,Et&&(qe.apply(U,Et),Et=!1)},qe=function(){ut?Et=arguments:(r.apply(U,arguments),setTimeout(ae,f),ut=!0)};return qe}function Rt(r,Et,U){var ut=Et[1],ae=ut-(Et=Et[0]);return r===ut&&U?r:((r-Et)%ae+ae)%ae+Et}function It(){return!1}function K(r,f){return!1===f?r:(f=Math.pow(10,void 0===f?6:f),Math.round(r*f)/f)}function et(r){return r.trim?r.trim():r.replace(/^\s+|\s+$/g,"")}function st(r){return et(r).split(/\s+/)}function R(r,f){for(var U in Object.prototype.hasOwnProperty.call(r,"options")||(r.options=r.options?Ct(r.options):{}),f)r.options[U]=f[U];return r.options}function I(r,f,U){var ut,Et=[];for(ut in r)Et.push(encodeURIComponent(U?ut.toUpperCase():ut)+"="+encodeURIComponent(r[ut]));return(f&&-1!==f.indexOf("?")?"&":"?")+Et.join("&")}var A=/\{ *([\w_ -]+) *\}/g;function x(r,f){return r.replace(A,function(U,ut){if(void 0===(ut=f[ut]))throw new Error("No value provided for variable "+U);return"function"==typeof ut?ut(f):ut})}var T=Array.isArray||function(r){return"[object Array]"===Object.prototype.toString.call(r)};function j(r,f){for(var U=0;U<r.length;U++)if(r[U]===f)return U;return-1}var V="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=";function nt(r){return window["webkit"+r]||window["moz"+r]||window["ms"+r]}var w=0;function l(r){var f=+new Date,U=Math.max(0,16-(f-w));return w=f+U,window.setTimeout(r,U)}var it=window.requestAnimationFrame||nt("RequestAnimationFrame")||l,N=window.cancelAnimationFrame||nt("CancelAnimationFrame")||nt("CancelRequestAnimationFrame")||function(r){window.clearTimeout(r)};function G(r,f,U){if(!U||it!==l)return it.call(window,xt(r,f));r.call(f)}function v(r){r&&N.call(window,r)}var M={__proto__:null,extend:te,create:Ct,bind:xt,get lastId(){return jt},stamp:zt,throttle:Ut,wrapNum:Rt,falseFn:It,formatNum:K,trim:et,splitWords:st,setOptions:R,getParamString:I,template:x,isArray:T,indexOf:j,emptyImageUrl:V,requestFn:it,cancelFn:N,requestAnimFrame:G,cancelAnimFrame:v};function b(){}b.extend=function(r){function f(){R(this),this.initialize&&this.initialize.apply(this,arguments),this.callInitHooks()}var U,ut=f.__super__=this.prototype,Et=Ct(ut);for(U in(Et.constructor=f).prototype=Et,this)Object.prototype.hasOwnProperty.call(this,U)&&"prototype"!==U&&"__super__"!==U&&(f[U]=this[U]);if(r.statics&&te(f,r.statics),r.includes){var ae=r.includes;if(typeof L<"u"&&L&&L.Mixin){ae=T(ae)?ae:[ae];for(var qe=0;qe<ae.length;qe++)ae[qe]===L.Mixin.Events&&console.warn("Deprecated include of L.Mixin.Events: this property will be removed in future releases, please inherit from L.Evented instead.",(new Error).stack)}te.apply(null,[Et].concat(r.includes))}return te(Et,r),delete Et.statics,delete Et.includes,Et.options&&(Et.options=ut.options?Ct(ut.options):{},te(Et.options,r.options)),Et._initHooks=[],Et.callInitHooks=function(){if(!this._initHooksCalled){ut.callInitHooks&&ut.callInitHooks.call(this),this._initHooksCalled=!0;for(var Xe=0,ki=Et._initHooks.length;Xe<ki;Xe++)Et._initHooks[Xe].call(this)}},f},b.include=function(r){var f=this.prototype.options;return te(this.prototype,r),r.options&&(this.prototype.options=f,this.mergeOptions(r.options)),this},b.mergeOptions=function(r){return te(this.prototype.options,r),this},b.addInitHook=function(r){var f=Array.prototype.slice.call(arguments,1),U="function"==typeof r?r:function(){this[r].apply(this,f)};return this.prototype._initHooks=this.prototype._initHooks||[],this.prototype._initHooks.push(U),this};var k={on:function(r,f,U){if("object"==typeof r)for(var ut in r)this._on(ut,r[ut],f);else for(var Et=0,ae=(r=st(r)).length;Et<ae;Et++)this._on(r[Et],f,U);return this},off:function(r,f,U){if(arguments.length)if("object"==typeof r)for(var ut in r)this._off(ut,r[ut],f);else{r=st(r);for(var Et=1===arguments.length,ae=0,qe=r.length;ae<qe;ae++)Et?this._off(r[ae]):this._off(r[ae],f,U)}else delete this._events;return this},_on:function(r,f,U,ut){"function"!=typeof f?console.warn("wrong listener type: "+typeof f):!1===this._listens(r,f,U)&&(f={fn:f,ctx:U=U===this?void 0:U},ut&&(f.once=!0),this._events=this._events||{},this._events[r]=this._events[r]||[],this._events[r].push(f))},_off:function(r,f,U){var ut,Et,ae;if(this._events&&(ut=this._events[r]))if(1===arguments.length){if(this._firingCount)for(Et=0,ae=ut.length;Et<ae;Et++)ut[Et].fn=It;delete this._events[r]}else"function"!=typeof f?console.warn("wrong listener type: "+typeof f):!1!==(f=this._listens(r,f,U))&&(U=ut[f],this._firingCount&&(U.fn=It,this._events[r]=ut=ut.slice()),ut.splice(f,1))},fire:function(r,f,U){if(this.listens(r,U)){var ut=te({},f,{type:r,target:this,sourceTarget:f&&f.sourceTarget||this});if(this._events){var Et=this._events[r];if(Et){this._firingCount=this._firingCount+1||1;for(var ae=0,qe=Et.length;ae<qe;ae++){var Xe=Et[ae],ki=Xe.fn;Xe.once&&this.off(r,ki,Xe.ctx),ki.call(Xe.ctx||this,ut)}this._firingCount--}}U&&this._propagateEvent(ut)}return this},listens:function(r,f,U,ut){"string"!=typeof r&&console.warn('"string" type argument expected');var Et=f,ae=("function"!=typeof f&&(ut=!!f,U=Et=void 0),this._events&&this._events[r]);if(ae&&ae.length&&!1!==this._listens(r,Et,U))return!0;if(ut)for(var qe in this._eventParents)if(this._eventParents[qe].listens(r,f,U,ut))return!0;return!1},_listens:function(r,f,U){if(this._events){var ut=this._events[r]||[];if(!f)return!!ut.length;U===this&&(U=void 0);for(var Et=0,ae=ut.length;Et<ae;Et++)if(ut[Et].fn===f&&ut[Et].ctx===U)return Et}return!1},once:function(r,f,U){if("object"==typeof r)for(var ut in r)this._on(ut,r[ut],f,!0);else for(var Et=0,ae=(r=st(r)).length;Et<ae;Et++)this._on(r[Et],f,U,!0);return this},addEventParent:function(r){return this._eventParents=this._eventParents||{},this._eventParents[zt(r)]=r,this},removeEventParent:function(r){return this._eventParents&&delete this._eventParents[zt(r)],this},_propagateEvent:function(r){for(var f in this._eventParents)this._eventParents[f].fire(r.type,te({layer:r.target,propagatedFrom:r.target},r),!0)}},_=(k.addEventListener=k.on,k.removeEventListener=k.clearAllEventListeners=k.off,k.addOneTimeEventListener=k.once,k.fireEvent=k.fire,k.hasEventListeners=k.listens,b.extend(k));function y(r,f,U){this.x=U?Math.round(r):r,this.y=U?Math.round(f):f}var O=Math.trunc||function(r){return 0<r?Math.floor(r):Math.ceil(r)};function B(r,f,U){return r instanceof y?r:T(r)?new y(r[0],r[1]):null==r?r:"object"==typeof r&&"x"in r&&"y"in r?new y(r.x,r.y):new y(r,f,U)}function H(r,f){if(r)for(var U=f?[r,f]:r,ut=0,Et=U.length;ut<Et;ut++)this.extend(U[ut])}function at(r,f){return!r||r instanceof H?r:new H(r,f)}function ft(r,f){if(r)for(var U=f?[r,f]:r,ut=0,Et=U.length;ut<Et;ut++)this.extend(U[ut])}function rt(r,f){return r instanceof ft?r:new ft(r,f)}function z(r,f,U){if(isNaN(r)||isNaN(f))throw new Error("Invalid LatLng object: ("+r+", "+f+")");this.lat=+r,this.lng=+f,void 0!==U&&(this.alt=+U)}function q(r,f,U){return r instanceof z?r:T(r)&&"object"!=typeof r[0]?3===r.length?new z(r[0],r[1],r[2]):2===r.length?new z(r[0],r[1]):null:null==r?r:"object"==typeof r&&"lat"in r?new z(r.lat,"lng"in r?r.lng:r.lon,r.alt):void 0===f?null:new z(r,f,U)}y.prototype={clone:function(){return new y(this.x,this.y)},add:function(r){return this.clone()._add(B(r))},_add:function(r){return this.x+=r.x,this.y+=r.y,this},subtract:function(r){return this.clone()._subtract(B(r))},_subtract:function(r){return this.x-=r.x,this.y-=r.y,this},divideBy:function(r){return this.clone()._divideBy(r)},_divideBy:function(r){return this.x/=r,this.y/=r,this},multiplyBy:function(r){return this.clone()._multiplyBy(r)},_multiplyBy:function(r){return this.x*=r,this.y*=r,this},scaleBy:function(r){return new y(this.x*r.x,this.y*r.y)},unscaleBy:function(r){return new y(this.x/r.x,this.y/r.y)},round:function(){return this.clone()._round()},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},floor:function(){return this.clone()._floor()},_floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.clone()._ceil()},_ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},trunc:function(){return this.clone()._trunc()},_trunc:function(){return this.x=O(this.x),this.y=O(this.y),this},distanceTo:function(U){var f=(U=B(U)).x-this.x;return U=U.y-this.y,Math.sqrt(f*f+U*U)},equals:function(r){return(r=B(r)).x===this.x&&r.y===this.y},contains:function(r){return r=B(r),Math.abs(r.x)<=Math.abs(this.x)&&Math.abs(r.y)<=Math.abs(this.y)},toString:function(){return"Point("+K(this.x)+", "+K(this.y)+")"}},H.prototype={extend:function(r){var f,U;if(r){if(r instanceof y||"number"==typeof r[0]||"x"in r)f=U=B(r);else if(f=(r=at(r)).min,U=r.max,!f||!U)return this;this.min||this.max?(this.min.x=Math.min(f.x,this.min.x),this.max.x=Math.max(U.x,this.max.x),this.min.y=Math.min(f.y,this.min.y),this.max.y=Math.max(U.y,this.max.y)):(this.min=f.clone(),this.max=U.clone())}return this},getCenter:function(r){return B((this.min.x+this.max.x)/2,(this.min.y+this.max.y)/2,r)},getBottomLeft:function(){return B(this.min.x,this.max.y)},getTopRight:function(){return B(this.max.x,this.min.y)},getTopLeft:function(){return this.min},getBottomRight:function(){return this.max},getSize:function(){return this.max.subtract(this.min)},contains:function(r){var f,U;return(r=("number"==typeof r[0]||r instanceof y?B:at)(r))instanceof H?(f=r.min,U=r.max):f=U=r,f.x>=this.min.x&&U.x<=this.max.x&&f.y>=this.min.y&&U.y<=this.max.y},intersects:function(ae){ae=at(ae);var f=this.min,U=this.max,ut=ae.min,Et=(ae=ae.max).x>=f.x&&ut.x<=U.x;return ae=ae.y>=f.y&&ut.y<=U.y,Et&&ae},overlaps:function(ae){ae=at(ae);var f=this.min,U=this.max,ut=ae.min,Et=(ae=ae.max).x>f.x&&ut.x<U.x;return ae=ae.y>f.y&&ut.y<U.y,Et&&ae},isValid:function(){return!(!this.min||!this.max)},pad:function(Et){var f=this.min,U=this.max,ut=Math.abs(f.x-U.x)*Et;return Et=Math.abs(f.y-U.y)*Et,at(B(f.x-ut,f.y-Et),B(U.x+ut,U.y+Et))},equals:function(r){return!!r&&(r=at(r),this.min.equals(r.getTopLeft())&&this.max.equals(r.getBottomRight()))}},ft.prototype={extend:function(r){var f,U,ut=this._southWest,Et=this._northEast;if(r instanceof z)U=f=r;else{if(!(r instanceof ft))return r?this.extend(q(r)||rt(r)):this;if(U=r._northEast,!(f=r._southWest)||!U)return this}return ut||Et?(ut.lat=Math.min(f.lat,ut.lat),ut.lng=Math.min(f.lng,ut.lng),Et.lat=Math.max(U.lat,Et.lat),Et.lng=Math.max(U.lng,Et.lng)):(this._southWest=new z(f.lat,f.lng),this._northEast=new z(U.lat,U.lng)),this},pad:function(Et){var f=this._southWest,U=this._northEast,ut=Math.abs(f.lat-U.lat)*Et;return Et=Math.abs(f.lng-U.lng)*Et,new ft(new z(f.lat-ut,f.lng-Et),new z(U.lat+ut,U.lng+Et))},getCenter:function(){return new z((this._southWest.lat+this._northEast.lat)/2,(this._southWest.lng+this._northEast.lng)/2)},getSouthWest:function(){return this._southWest},getNorthEast:function(){return this._northEast},getNorthWest:function(){return new z(this.getNorth(),this.getWest())},getSouthEast:function(){return new z(this.getSouth(),this.getEast())},getWest:function(){return this._southWest.lng},getSouth:function(){return this._southWest.lat},getEast:function(){return this._northEast.lng},getNorth:function(){return this._northEast.lat},contains:function(r){r=("number"==typeof r[0]||r instanceof z||"lat"in r?q:rt)(r);var f,U,ut=this._southWest,Et=this._northEast;return r instanceof ft?(f=r.getSouthWest(),U=r.getNorthEast()):f=U=r,f.lat>=ut.lat&&U.lat<=Et.lat&&f.lng>=ut.lng&&U.lng<=Et.lng},intersects:function(ae){ae=rt(ae);var f=this._southWest,U=this._northEast,ut=ae.getSouthWest(),Et=(ae=ae.getNorthEast()).lat>=f.lat&&ut.lat<=U.lat;return ae=ae.lng>=f.lng&&ut.lng<=U.lng,Et&&ae},overlaps:function(ae){ae=rt(ae);var f=this._southWest,U=this._northEast,ut=ae.getSouthWest(),Et=(ae=ae.getNorthEast()).lat>f.lat&&ut.lat<U.lat;return ae=ae.lng>f.lng&&ut.lng<U.lng,Et&&ae},toBBoxString:function(){return[this.getWest(),this.getSouth(),this.getEast(),this.getNorth()].join(",")},equals:function(r,f){return!!r&&(r=rt(r),this._southWest.equals(r.getSouthWest(),f)&&this._northEast.equals(r.getNorthEast(),f))},isValid:function(){return!(!this._southWest||!this._northEast)}};var mt={latLngToPoint:function(r,f){return r=this.projection.project(r),f=this.scale(f),this.transformation._transform(r,f)},pointToLatLng:function(r,f){return f=this.scale(f),r=this.transformation.untransform(r,f),this.projection.unproject(r)},project:function(r){return this.projection.project(r)},unproject:function(r){return this.projection.unproject(r)},scale:function(r){return 256*Math.pow(2,r)},zoom:function(r){return Math.log(r/256)/Math.LN2},getProjectedBounds:function(r){var f;return this.infinite?null:(f=this.projection.bounds,r=this.scale(r),new H(this.transformation.transform(f.min,r),this.transformation.transform(f.max,r)))},infinite:!(z.prototype={equals:function(r,f){return!!r&&(r=q(r),Math.max(Math.abs(this.lat-r.lat),Math.abs(this.lng-r.lng))<=(void 0===f?1e-9:f))},toString:function(r){return"LatLng("+K(this.lat,r)+", "+K(this.lng,r)+")"},distanceTo:function(r){return pt.distance(this,q(r))},wrap:function(){return pt.wrapLatLng(this)},toBounds:function(f){var U=(f=180*f/40075017)/Math.cos(Math.PI/180*this.lat);return rt([this.lat-f,this.lng-U],[this.lat+f,this.lng+U])},clone:function(){return new z(this.lat,this.lng,this.alt)}}),wrapLatLng:function(r){var f=this.wrapLng?Rt(r.lng,this.wrapLng,!0):r.lng;return new z(this.wrapLat?Rt(r.lat,this.wrapLat,!0):r.lat,f,r.alt)},wrapLatLngBounds:function(r){var ut=r.getCenter(),f=this.wrapLatLng(ut),U=ut.lat-f.lat;return ut=ut.lng-f.lng,0==U&&0==ut?r:(f=r.getSouthWest(),r=r.getNorthEast(),new ft(new z(f.lat-U,f.lng-ut),new z(r.lat-U,r.lng-ut)))}},pt=te({},mt,{wrapLng:[-180,180],R:6371e3,distance:function(qe,ae){var Xe=Math.PI/180,U=qe.lat*Xe,ut=ae.lat*Xe,Et=Math.sin((ae.lat-qe.lat)*Xe/2);return ae=Math.sin((ae.lng-qe.lng)*Xe/2),qe=Et*Et+Math.cos(U)*Math.cos(ut)*ae*ae,Xe=2*Math.atan2(Math.sqrt(qe),Math.sqrt(1-qe)),this.R*Xe}}),dt={R:dt=6378137,MAX_LATITUDE:85.0511287798,project:function(r){var f=Math.PI/180,U=this.MAX_LATITUDE;return U=Math.max(Math.min(U,r.lat),-U),U=Math.sin(U*f),new y(this.R*r.lng*f,this.R*Math.log((1+U)/(1-U))/2)},unproject:function(r){var f=180/Math.PI;return new z((2*Math.atan(Math.exp(r.y/this.R))-Math.PI/2)*f,r.x*f/this.R)},bounds:new H([-(dt*=Math.PI),-dt],[dt,dt])};function Y(r,f,U,ut){T(r)?(this._a=r[0],this._b=r[1],this._c=r[2],this._d=r[3]):(this._a=r,this._b=f,this._c=U,this._d=ut)}function lt(r,f,U,ut){return new Y(r,f,U,ut)}Y.prototype={transform:function(r,f){return this._transform(r.clone(),f)},_transform:function(r,f){return r.x=(f=f||1)*(this._a*r.x+this._b),r.y=f*(this._c*r.y+this._d),r},untransform:function(r,f){return new y((r.x/(f=f||1)-this._b)/this._a,(r.y/f-this._d)/this._c)}};var ht=te({},pt,{code:"EPSG:3857",projection:dt,transformation:lt(ht=.5/(Math.PI*dt.R),.5,-ht,.5)}),Lt=te({},ht,{code:"EPSG:900913"});function At(r){return document.createElementNS("http://www.w3.org/2000/svg",r)}function Wt(r,f){for(var U,ut,Et,ae,qe="",Xe=0,ki=r.length;Xe<ki;Xe++){for(U=0,ut=(Et=r[Xe]).length;U<ut;U++)qe+=(U?"L":"M")+(ae=Et[U]).x+" "+ae.y;qe+=f?ye.svg?"z":"x":""}return qe||"M0 0"}var as=document.documentElement.style,Ot="ActiveXObject"in window,bo=Ot&&!document.addEventListener,Hr="msLaunchUri"in navigator&&!("documentMode"in document),Or=Te("webkit"),se=Te("android"),us=Te("android 2")||Te("android 3"),Js=parseInt(/WebKit\/([0-9]+)|$/.exec(navigator.userAgent)[1],10),ss=(Js=se&&Te("Google")&&Js<537&&!("AudioNode"in window),!!window.opera),za=!Hr&&Te("chrome"),_e=Te("gecko")&&!Or&&!ss&&!Ot,sa=!za&&Te("safari"),E=Te("phantom"),tt="OTransition"in as,We=0===navigator.platform.indexOf("Win"),Ao=Ot&&"transition"in as,Zo="WebKitCSSMatrix"in window&&"m11"in new window.WebKitCSSMatrix&&!us,_s=(as="MozPerspective"in as,!window.L_DISABLE_3D&&(Ao||Zo||as)&&!tt&&!E),Oa=(Qs=typeof orientation<"u"||Te("mobile"))&&Or,ya=Qs&&Zo,Es=!window.PointerEvent&&window.MSPointerEvent,xs=!(!window.PointerEvent&&!Es),He="ontouchstart"in window||!!window.TouchEvent,Fe=!window.L_NO_TOUCH&&(He||xs),pe=Qs&&ss,Me=Qs&&_e,me=1<(window.devicePixelRatio||window.screen.deviceXDPI/window.screen.logicalXDPI),qt=function(){var r=!1;try{var f=Object.defineProperty({},"passive",{get:function(){r=!0}});window.addEventListener("testPassiveEventSupport",It,f),window.removeEventListener("testPassiveEventSupport",It,f)}catch{}return r}(),Kt=!!document.createElement("canvas").getContext,xe=!(!document.createElementNS||!At("svg").createSVGRect),be=!!xe&&((be=document.createElement("div")).innerHTML="<svg/>","http://www.w3.org/2000/svg"===(be.firstChild&&be.firstChild.namespaceURI));function Te(r){return 0<=navigator.userAgent.toLowerCase().indexOf(r)}var ye={ie:Ot,ielt9:bo,edge:Hr,webkit:Or,android:se,android23:us,androidStock:Js,opera:ss,chrome:za,gecko:_e,safari:sa,phantom:E,opera12:tt,win:We,ie3d:Ao,webkit3d:Zo,gecko3d:as,any3d:_s,mobile:Qs,mobileWebkit:Oa,mobileWebkit3d:ya,msPointer:Es,pointer:xs,touch:Fe,touchNative:He,mobileOpera:pe,mobileGecko:Me,retina:me,passiveEvents:qt,canvas:Kt,svg:xe,vml:!xe&&function(){try{var r=document.createElement("div"),f=(r.innerHTML='<v:shape adj="1"/>',r.firstChild);return f.style.behavior="url(#default#VML)",f&&"object"==typeof f.adj}catch{return!1}}(),inlineSvg:be,mac:0===navigator.platform.indexOf("Mac"),linux:0===navigator.platform.indexOf("Linux")},oi=ye.msPointer?"MSPointerDown":"pointerdown",fi=ye.msPointer?"MSPointerMove":"pointermove",tn=ye.msPointer?"MSPointerUp":"pointerup",Ii=ye.msPointer?"MSPointerCancel":"pointercancel",Pi={touchstart:oi,touchmove:fi,touchend:tn,touchcancel:Ii},Ji={touchstart:function(r,f){f.MSPOINTER_TYPE_TOUCH&&f.pointerType===f.MSPOINTER_TYPE_TOUCH&&Hn(f),bt(r,f)},touchmove:bt,touchend:bt,touchcancel:bt},Mi={},nn=!1;function Cn(r){Mi[r.pointerId]=r}function wn(r){Mi[r.pointerId]&&(Mi[r.pointerId]=r)}function X(r){delete Mi[r.pointerId]}function bt(r,f){if(f.pointerType!==(f.MSPOINTER_TYPE_MOUSE||"mouse")){for(var U in f.touches=[],Mi)f.touches.push(Mi[U]);f.changedTouches=[f],r(f)}}var we,Ye,xi,Ui,hn,Fn,Mo=he(["transform","webkitTransform","OTransform","MozTransform","msTransform"]),qo=he(["webkitTransition","transition","OTransition","MozTransition","msTransition"]),Oo="webkitTransition"===qo||"OTransition"===qo?qo+"End":"transitionend";function Dr(r){return"string"==typeof r?document.getElementById(r):r}function No(r,f){var U=r.style[f]||r.currentStyle&&r.currentStyle[f];return"auto"===(U=U&&"auto"!==U||!document.defaultView?U:(r=document.defaultView.getComputedStyle(r,null))?r[f]:null)?null:U}function po(r,f,U){return(r=document.createElement(r)).className=f||"",U&&U.appendChild(r),r}function ko(r){var f=r.parentNode;f&&f.removeChild(r)}function Kr(r){for(;r.firstChild;)r.removeChild(r.firstChild)}function dr(r){var f=r.parentNode;f&&f.lastChild!==r&&f.appendChild(r)}function gr(r){var f=r.parentNode;f&&f.firstChild!==r&&f.insertBefore(r,f.firstChild)}function lr(r,f){return void 0!==r.classList?r.classList.contains(f):0<(r=Yt(r)).length&&new RegExp("(^|\\s)"+f+"(\\s|$)").test(r)}function kn(r,f){var U;if(void 0!==r.classList)for(var ut=st(f),Et=0,ae=ut.length;Et<ae;Et++)r.classList.add(ut[Et]);else lr(r,f)||Ft(r,((U=Yt(r))?U+" ":"")+f)}function En(r,f){void 0!==r.classList?r.classList.remove(f):Ft(r,et((" "+Yt(r)+" ").replace(" "+f+" "," ")))}function Ft(r,f){void 0===r.className.baseVal?r.className=f:r.className.baseVal=f}function Yt(r){return void 0===(r=r.correspondingElement?r.correspondingElement:r).className.baseVal?r.className:r.className.baseVal}function Jt(r,f){if("opacity"in r.style)r.style.opacity=f;else if("filter"in r.style){var U=!1,ut="DXImageTransform.Microsoft.Alpha";try{U=r.filters.item(ut)}catch{if(1===f)return}f=Math.round(100*f),U?(U.Enabled=100!==f,U.Opacity=f):r.style.filter+=" progid:"+ut+"(opacity="+f+")"}}function he(r){for(var f=document.documentElement.style,U=0;U<r.length;U++)if(r[U]in f)return r[U];return!1}function Ce(r,f,U){f=f||new y(0,0),r.style[Mo]=(ye.ie3d?"translate("+f.x+"px,"+f.y+"px)":"translate3d("+f.x+"px,"+f.y+"px,0)")+(U?" scale("+U+")":"")}function De(r,f){r._leaflet_pos=f,ye.any3d?Ce(r,f):(r.style.left=f.x+"px",r.style.top=f.y+"px")}function Ge(r){return r._leaflet_pos||new y(0,0)}function oe(){hi(window,"dragstart",Hn)}function Ee(){Fi(window,"dragstart",Hn)}function ii(r){for(;-1===r.tabIndex;)r=r.parentNode;r.style&&(Si(),Fn=(hn=r).style.outline,r.style.outline="none",hi(window,"keydown",Si))}function Si(){hn&&(hn.style.outline=Fn,Fn=hn=void 0,Fi(window,"keydown",Si))}function Oi(r){for(;!((r=r.parentNode).offsetWidth&&r.offsetHeight||r===document.body););return r}function di(r){var f=r.getBoundingClientRect();return{x:f.width/r.offsetWidth||1,y:f.height/r.offsetHeight||1,boundingClientRect:f}}function hi(r,f,U,ut){if(f&&"object"==typeof f)for(var Et in f)Yi(r,Et,f[Et],U);else for(var ae=0,qe=(f=st(f)).length;ae<qe;ae++)Yi(r,f[ae],U,ut);return this}Ui="onselectstart"in document?(xi=function(){hi(window,"selectstart",Hn)},function(){Fi(window,"selectstart",Hn)}):(Ye=he(["userSelect","WebkitUserSelect","OUserSelect","MozUserSelect","msUserSelect"]),xi=function(){var r;Ye&&(r=document.documentElement.style,we=r[Ye],r[Ye]="none")},function(){Ye&&(document.documentElement.style[Ye]=we,we=void 0)}),Ot={__proto__:null,TRANSFORM:Mo,TRANSITION:qo,TRANSITION_END:Oo,get:Dr,getStyle:No,create:po,remove:ko,empty:Kr,toFront:dr,toBack:gr,hasClass:lr,addClass:kn,removeClass:En,setClass:Ft,getClass:Yt,setOpacity:Jt,testProp:he,setTransform:Ce,setPosition:De,getPosition:Ge,get disableTextSelection(){return xi},get enableTextSelection(){return Ui},disableImageDrag:oe,enableImageDrag:Ee,preventOutline:ii,restoreOutline:Si,getSizedParentNode:Oi,getScale:di};var sn="_leaflet_events";function Fi(r,f,U,ut){if(1===arguments.length)yi(r),delete r[sn];else if(f&&"object"==typeof f)for(var Et in f)Ki(r,Et,f[Et],U);else if(f=st(f),2===arguments.length)yi(r,function(Xe){return-1!==j(f,Xe)});else for(var ae=0,qe=f.length;ae<qe;ae++)Ki(r,f[ae],U,ut);return this}function yi(r,f){for(var U in r[sn]){var ut=U.split(/\d/)[0];f&&!f(ut)||Ki(r,ut,null,null,U)}}var Zi={mouseenter:"mouseover",mouseleave:"mouseout",wheel:!("onwheel"in window)&&"mousewheel"};function Yi(r,f,U,ut){var Et,ae,qe=f+zt(U)+(ut?"_"+zt(ut):"");r[sn]&&r[sn][qe]||(ae=Et=function(Xe){return U.call(ut||r,Xe||window.event)},!ye.touchNative&&ye.pointer&&0===f.indexOf("touch")?Et=function Ti(r,f,U){return"touchstart"!==f||nn||(document.addEventListener(oi,Cn,!0),document.addEventListener(fi,wn,!0),document.addEventListener(tn,X,!0),document.addEventListener(Ii,X,!0),nn=!0),Ji[f]?(U=Ji[f].bind(this,U),r.addEventListener(Pi[f],U,!1),U):(console.warn("wrong event specified:",f),It)}(r,f,Et):ye.touch&&"dblclick"===f?Et=function ee(r,f){r.addEventListener("dblclick",f);var U,ut=0;function Et(ae){var qe;1!==ae.detail?U=ae.detail:"mouse"===ae.pointerType||ae.sourceCapabilities&&!ae.sourceCapabilities.firesTouchEvents||(qe=vo(ae)).some(function(Xe){return Xe instanceof HTMLLabelElement&&Xe.attributes.for})&&!qe.some(function(Xe){return Xe instanceof HTMLInputElement||Xe instanceof HTMLSelectElement})||((qe=Date.now())-ut<=200?2==++U&&f(function(Xe){var ki,Ci,Sn={};for(Ci in Xe)Sn[Ci]=(ki=Xe[Ci])&&ki.bind?ki.bind(Xe):ki;return(Xe=Sn).type="dblclick",Sn.detail=2,Sn.isTrusted=!1,Sn._simulated=!0,Sn}(ae)):U=1,ut=qe)}return r.addEventListener("click",Et),{dblclick:f,simDblclick:Et}}(r,Et):"addEventListener"in r?"touchstart"===f||"touchmove"===f||"wheel"===f||"mousewheel"===f?r.addEventListener(Zi[f]||f,Et,!!ye.passiveEvents&&{passive:!1}):"mouseenter"===f||"mouseleave"===f?r.addEventListener(Zi[f],Et=function(Xe){Xe=Xe||window.event,vr(r,Xe)&&ae(Xe)},!1):r.addEventListener(f,ae,!1):r.attachEvent("on"+f,Et),r[sn]=r[sn]||{},r[sn][qe]=Et)}function Ki(r,f,Xe,ut,Et){var ae,qe;Et=Et||f+zt(Xe)+(ut?"_"+zt(ut):""),(Xe=r[sn]&&r[sn][Et])&&(!ye.touchNative&&ye.pointer&&0===f.indexOf("touch")?(ut=r,qe=Xe,Pi[ae=f]?ut.removeEventListener(Pi[ae],qe,!1):console.warn("wrong event specified:",ae)):ye.touch&&"dblclick"===f?((qe=r).removeEventListener("dblclick",(ut=Xe).dblclick),qe.removeEventListener("click",ut.simDblclick)):"removeEventListener"in r?r.removeEventListener(Zi[f]||f,Xe,!1):r.detachEvent("on"+f,Xe),r[sn][Et]=null)}function Nn(r){return r.stopPropagation?r.stopPropagation():r.originalEvent?r.originalEvent._stopped=!0:r.cancelBubble=!0,this}function Vi(r){return Yi(r,"wheel",Nn),this}function so(r){return hi(r,"mousedown touchstart dblclick contextmenu",Nn),r._leaflet_disable_click=!0,this}function Hn(r){return r.preventDefault?r.preventDefault():r.returnValue=!1,this}function Gn(r){return Hn(r),Nn(r),this}function vo(r){if(r.composedPath)return r.composedPath();for(var f=[],U=r.target;U;)f.push(U),U=U.parentNode;return f}function Jn(r,f){var U,ut;return f?(ut=(U=di(f)).boundingClientRect,new y((r.clientX-ut.left)/U.x-f.clientLeft,(r.clientY-ut.top)/U.y-f.clientTop)):new y(r.clientX,r.clientY)}var yr=ye.linux&&ye.chrome?window.devicePixelRatio:ye.mac?3*window.devicePixelRatio:0<window.devicePixelRatio?2*window.devicePixelRatio:1;function Co(r){return ye.edge?r.wheelDeltaY/2:r.deltaY&&0===r.deltaMode?-r.deltaY/yr:r.deltaY&&1===r.deltaMode?20*-r.deltaY:r.deltaY&&2===r.deltaMode?60*-r.deltaY:r.deltaX||r.deltaZ?0:r.wheelDelta?(r.wheelDeltaY||r.wheelDelta)/2:r.detail&&Math.abs(r.detail)<32765?20*-r.detail:r.detail?r.detail/-32765*60:0}function vr(r,f){var U=f.relatedTarget;if(!U)return!0;try{for(;U&&U!==r;)U=U.parentNode}catch{return!1}return U!==r}bo={__proto__:null,on:hi,off:Fi,stopPropagation:Nn,disableScrollPropagation:Vi,disableClickPropagation:so,preventDefault:Hn,stop:Gn,getPropagationPath:vo,getMousePosition:Jn,getWheelDelta:Co,isExternalTarget:vr,addListener:hi,removeListener:Fi};var ao=_.extend({run:function(r,f,U,ut){this.stop(),this._el=r,this._inProgress=!0,this._duration=U||.25,this._easeOutPower=1/Math.max(ut||.5,.2),this._startPos=Ge(r),this._offset=f.subtract(this._startPos),this._startTime=+new Date,this.fire("start"),this._animate()},stop:function(){this._inProgress&&(this._step(!0),this._complete())},_animate:function(){this._animId=G(this._animate,this),this._step()},_step:function(r){var f=+new Date-this._startTime,U=1e3*this._duration;f<U?this._runFrame(this._easeOut(f/U),r):(this._runFrame(1),this._complete())},_runFrame:function(r,f){r=this._startPos.add(this._offset.multiplyBy(r)),f&&r._round(),De(this._el,r),this.fire("step")},_complete:function(){v(this._animId),this._inProgress=!1,this.fire("end")},_easeOut:function(r){return 1-Math.pow(1-r,this._easeOutPower)}}),gn=_.extend({options:{crs:ht,center:void 0,zoom:void 0,minZoom:void 0,maxZoom:void 0,layers:[],maxBounds:void 0,renderer:void 0,zoomAnimation:!0,zoomAnimationThreshold:4,fadeAnimation:!0,markerZoomAnimation:!0,transform3DLimit:8388608,zoomSnap:1,zoomDelta:1,trackResize:!0},initialize:function(r,f){f=R(this,f),this._handlers=[],this._layers={},this._zoomBoundLayers={},this._sizeChanged=!0,this._initContainer(r),this._initLayout(),this._onResize=xt(this._onResize,this),this._initEvents(),f.maxBounds&&this.setMaxBounds(f.maxBounds),void 0!==f.zoom&&(this._zoom=this._limitZoom(f.zoom)),f.center&&void 0!==f.zoom&&this.setView(q(f.center),f.zoom,{reset:!0}),this.callInitHooks(),this._zoomAnimated=qo&&ye.any3d&&!ye.mobileOpera&&this.options.zoomAnimation,this._zoomAnimated&&(this._createAnimProxy(),hi(this._proxy,Oo,this._catchTransitionEnd,this)),this._addLayers(this.options.layers)},setView:function(r,f,U){return f=void 0===f?this._zoom:this._limitZoom(f),r=this._limitCenter(q(r),f,this.options.maxBounds),U=U||{},this._stop(),this._loaded&&!U.reset&&!0!==U&&(void 0!==U.animate&&(U.zoom=te({animate:U.animate},U.zoom),U.pan=te({animate:U.animate,duration:U.duration},U.pan)),this._zoom!==f?this._tryAnimatedZoom&&this._tryAnimatedZoom(r,f,U.zoom):this._tryAnimatedPan(r,U.pan))?(clearTimeout(this._sizeTimer),this):(this._resetView(r,f,U.pan&&U.pan.noMoveStart),this)},setZoom:function(r,f){return this._loaded?this.setView(this.getCenter(),r,{zoom:f}):(this._zoom=r,this)},zoomIn:function(r,f){return this.setZoom(this._zoom+(r=r||(ye.any3d?this.options.zoomDelta:1)),f)},zoomOut:function(r,f){return this.setZoom(this._zoom-(r=r||(ye.any3d?this.options.zoomDelta:1)),f)},setZoomAround:function(Et,f,U){var ae=this.getZoomScale(f),ut=this.getSize().divideBy(2);return Et=(Et instanceof y?Et:this.latLngToContainerPoint(Et)).subtract(ut).multiplyBy(1-1/ae),ae=this.containerPointToLatLng(ut.add(Et)),this.setView(ae,f,{zoom:U})},_getBoundsCenterZoom:function(r,f){f=f||{},r=r.getBounds?r.getBounds():rt(r);var U=B(f.paddingTopLeft||f.padding||[0,0]),ut=B(f.paddingBottomRight||f.padding||[0,0]),Et=this.getBoundsZoom(r,!1,U.add(ut));return(Et="number"==typeof f.maxZoom?Math.min(f.maxZoom,Et):Et)===1/0?{center:r.getCenter(),zoom:Et}:(f=ut.subtract(U).divideBy(2),ut=this.project(r.getSouthWest(),Et),U=this.project(r.getNorthEast(),Et),{center:this.unproject(ut.add(U).divideBy(2).add(f),Et),zoom:Et})},fitBounds:function(r,f){if((r=rt(r)).isValid())return r=this._getBoundsCenterZoom(r,f),this.setView(r.center,r.zoom,f);throw new Error("Bounds are not valid.")},fitWorld:function(r){return this.fitBounds([[-90,-180],[90,180]],r)},panTo:function(r,f){return this.setView(r,this._zoom,{pan:f})},panBy:function(r,f){var U;return f=f||{},(r=B(r).round()).x||r.y?(!0===f.animate||this.getSize().contains(r)?(this._panAnim||(this._panAnim=new ao,this._panAnim.on({step:this._onPanTransitionStep,end:this._onPanTransitionEnd},this)),f.noMoveStart||this.fire("movestart"),!1!==f.animate?(kn(this._mapPane,"leaflet-pan-anim"),U=this._getMapPanePos().subtract(r).round(),this._panAnim.run(this._mapPane,U,f.duration||.25,f.easeLinearity)):(this._rawPanBy(r),this.fire("move").fire("moveend"))):this._resetView(this.unproject(this.project(this.getCenter()).add(r)),this.getZoom()),this):this.fire("moveend")},flyTo:function(r,f,U){if(!1===(U=U||{}).animate||!ye.any3d)return this.setView(r,f,U);this._stop();var ut=this.project(this.getCenter()),Et=this.project(r),ae=this.getSize(),qe=this._zoom,Xe=(r=q(r),f=void 0===f?qe:f,Math.max(ae.x,ae.y)),ki=Xe*this.getZoomScale(qe,f),Ci=Et.distanceTo(ut)||1,Sn=1.42,no=Sn*Sn;function wo(ur){return ur=(ki*ki-Xe*Xe+(ur?-1:1)*no*no*Ci*Ci)/(2*(ur?ki:Xe)*no*Ci),(ur=Math.sqrt(ur*ur+1)-ur)<1e-9?-18:Math.log(ur)}function fr(ur){return(Math.exp(ur)-Math.exp(-ur))/2}function Fs(ur){return(Math.exp(ur)+Math.exp(-ur))/2}var ns=wo(0),ha=Date.now(),ls=(wo(1)-ns)/Sn,ca=U.duration?1e3*U.duration:1e3*ls*.8;return this._moveStart(!0,U.noMoveStart),function ur(){var Ms=(Date.now()-ha)/ca,Hs=(1-Math.pow(1-Ms,1.5))*ls;Ms<=1?(this._flyToFrame=G(ur,this),this._move(this.unproject(ut.add(Et.subtract(ut).multiplyBy(function Wr(ur){return Xe*(Fs(ns)*(fr(ur=ns+Sn*ur)/Fs(ur))-fr(ns))/no}(Hs)/Ci)),qe),this.getScaleZoom(Xe/(Ms=Hs,Xe*(Fs(ns)/Fs(ns+Sn*Ms))),qe),{flyTo:!0})):this._move(r,f)._moveEnd(!0)}.call(this),this},flyToBounds:function(r,f){return r=this._getBoundsCenterZoom(r,f),this.flyTo(r.center,r.zoom,f)},setMaxBounds:function(r){return r=rt(r),this.listens("moveend",this._panInsideMaxBounds)&&this.off("moveend",this._panInsideMaxBounds),r.isValid()?(this.options.maxBounds=r,this._loaded&&this._panInsideMaxBounds(),this.on("moveend",this._panInsideMaxBounds)):(this.options.maxBounds=null,this)},setMinZoom:function(r){var f=this.options.minZoom;return this.options.minZoom=r,this._loaded&&f!==r&&(this.fire("zoomlevelschange"),this.getZoom()<this.options.minZoom)?this.setZoom(r):this},setMaxZoom:function(r){var f=this.options.maxZoom;return this.options.maxZoom=r,this._loaded&&f!==r&&(this.fire("zoomlevelschange"),this.getZoom()>this.options.maxZoom)?this.setZoom(r):this},panInsideBounds:function(ut,f){this._enforcingBounds=!0;var U=this.getCenter();return ut=this._limitCenter(U,this._zoom,rt(ut)),U.equals(ut)||this.panTo(ut,f),this._enforcingBounds=!1,this},panInside:function(Et,f){var ae=B((f=f||{}).paddingTopLeft||f.padding||[0,0]),U=B(f.paddingBottomRight||f.padding||[0,0]),ut=this.project(this.getCenter()),qe=(Et=this.project(Et),(ae=at([(qe=this.getPixelBounds()).min.add(ae),qe.max.subtract(U)])).getSize());return ae.contains(Et)||(this._enforcingBounds=!0,U=Et.subtract(ae.getCenter()),ae=ae.extend(Et).getSize().subtract(qe),ut.x+=U.x<0?-ae.x:ae.x,ut.y+=U.y<0?-ae.y:ae.y,this.panTo(this.unproject(ut),f),this._enforcingBounds=!1),this},invalidateSize:function(r){if(!this._loaded)return this;r=te({animate:!1,pan:!0},!0===r?{animate:!0}:r);var f=this.getSize(),U=(this._sizeChanged=!0,this._lastCenter=null,this.getSize()),Et=f.divideBy(2).round(),ut=U.divideBy(2).round();return(Et=Et.subtract(ut)).x||Et.y?(r.animate&&r.pan?this.panBy(Et):(r.pan&&this._rawPanBy(Et),this.fire("move"),r.debounceMoveend?(clearTimeout(this._sizeTimer),this._sizeTimer=setTimeout(xt(this.fire,this,"moveend"),200)):this.fire("moveend")),this.fire("resize",{oldSize:f,newSize:U})):this},stop:function(){return this.setZoom(this._limitZoom(this._zoom)),this.options.zoomSnap||this.fire("viewreset"),this._stop()},locate:function(r){var f,U;return r=this._locateOptions=te({timeout:1e4,watch:!1},r),"geolocation"in navigator?(f=xt(this._handleGeolocationResponse,this),U=xt(this._handleGeolocationError,this),r.watch?this._locationWatchId=navigator.geolocation.watchPosition(f,U,r):navigator.geolocation.getCurrentPosition(f,U,r)):this._handleGeolocationError({code:0,message:"Geolocation not supported."}),this},stopLocate:function(){return navigator.geolocation&&navigator.geolocation.clearWatch&&navigator.geolocation.clearWatch(this._locationWatchId),this._locateOptions&&(this._locateOptions.setView=!1),this},_handleGeolocationError:function(r){var f;this._container._leaflet_id&&(f=r.code,r=r.message||(1===f?"permission denied":2===f?"position unavailable":"timeout"),this._locateOptions.setView&&!this._loaded&&this.fitWorld(),this.fire("locationerror",{code:f,message:"Geolocation error: "+r+"."}))},_handleGeolocationResponse:function(r){if(this._container._leaflet_id){var f,U,ut=new z(r.coords.latitude,r.coords.longitude),Et=ut.toBounds(2*r.coords.accuracy),ae=this._locateOptions,qe=(ae.setView&&(f=this.getBoundsZoom(Et),this.setView(ut,ae.maxZoom?Math.min(f,ae.maxZoom):f)),{latlng:ut,bounds:Et,timestamp:r.timestamp});for(U in r.coords)"number"==typeof r.coords[U]&&(qe[U]=r.coords[U]);this.fire("locationfound",qe)}},addHandler:function(r,f){return f&&(f=this[r]=new f(this),this._handlers.push(f),this.options[r]&&f.enable()),this},remove:function(){if(this._initEvents(!0),this.options.maxBounds&&this.off("moveend",this._panInsideMaxBounds),this._containerId!==this._container._leaflet_id)throw new Error("Map container is being reused by another instance");try{delete this._container._leaflet_id,delete this._containerId}catch{this._container._leaflet_id=void 0,this._containerId=void 0}for(var r in void 0!==this._locationWatchId&&this.stopLocate(),this._stop(),ko(this._mapPane),this._clearControlPos&&this._clearControlPos(),this._resizeRequest&&(v(this._resizeRequest),this._resizeRequest=null),this._clearHandlers(),this._loaded&&this.fire("unload"),this._layers)this._layers[r].remove();for(r in this._panes)ko(this._panes[r]);return this._layers=[],this._panes=[],delete this._mapPane,delete this._renderer,this},createPane:function(r,f){return f=po("div","leaflet-pane"+(r?" leaflet-"+r.replace("Pane","")+"-pane":""),f||this._mapPane),r&&(this._panes[r]=f),f},getCenter:function(){return this._checkIfLoaded(),this._lastCenter&&!this._moved()?this._lastCenter.clone():this.layerPointToLatLng(this._getCenterLayerPoint())},getZoom:function(){return this._zoom},getBounds:function(){var r=this.getPixelBounds();return new ft(this.unproject(r.getBottomLeft()),this.unproject(r.getTopRight()))},getMinZoom:function(){return void 0===this.options.minZoom?this._layersMinZoom||0:this.options.minZoom},getMaxZoom:function(){return void 0===this.options.maxZoom?void 0===this._layersMaxZoom?1/0:this._layersMaxZoom:this.options.maxZoom},getBoundsZoom:function(ki,f,Xe){ki=rt(ki),Xe=B(Xe||[0,0]);var Ci=this.getZoom()||0,ut=this.getMinZoom(),Et=this.getMaxZoom(),ae=ki.getNorthWest(),qe=(ki=ki.getSouthEast(),Xe=this.getSize().subtract(Xe),ki=at(this.project(ki,Ci),this.project(ae,Ci)).getSize(),ae=ye.any3d?this.options.zoomSnap:1,Xe.x/ki.x);return Xe=Xe.y/ki.y,ki=f?Math.max(qe,Xe):Math.min(qe,Xe),Ci=this.getScaleZoom(ki,Ci),ae&&(Ci=Math.round(Ci/(ae/100))*(ae/100),Ci=f?Math.ceil(Ci/ae)*ae:Math.floor(Ci/ae)*ae),Math.max(ut,Math.min(Et,Ci))},getSize:function(){return this._size&&!this._sizeChanged||(this._size=new y(this._container.clientWidth||0,this._container.clientHeight||0),this._sizeChanged=!1),this._size.clone()},getPixelBounds:function(r,f){return new H(r=this._getTopLeftPoint(r,f),r.add(this.getSize()))},getPixelOrigin:function(){return this._checkIfLoaded(),this._pixelOrigin},getPixelWorldBounds:function(r){return this.options.crs.getProjectedBounds(void 0===r?this.getZoom():r)},getPane:function(r){return"string"==typeof r?this._panes[r]:r},getPanes:function(){return this._panes},getContainer:function(){return this._container},getZoomScale:function(r,f){var U=this.options.crs;return f=void 0===f?this._zoom:f,U.scale(r)/U.scale(f)},getScaleZoom:function(ut,f){var U=this.options.crs;return ut=U.zoom(ut*U.scale(f=void 0===f?this._zoom:f)),isNaN(ut)?1/0:ut},project:function(r,f){return f=void 0===f?this._zoom:f,this.options.crs.latLngToPoint(q(r),f)},unproject:function(r,f){return f=void 0===f?this._zoom:f,this.options.crs.pointToLatLng(B(r),f)},layerPointToLatLng:function(r){return r=B(r).add(this.getPixelOrigin()),this.unproject(r)},latLngToLayerPoint:function(r){return this.project(q(r))._round()._subtract(this.getPixelOrigin())},wrapLatLng:function(r){return this.options.crs.wrapLatLng(q(r))},wrapLatLngBounds:function(r){return this.options.crs.wrapLatLngBounds(rt(r))},distance:function(r,f){return this.options.crs.distance(q(r),q(f))},containerPointToLayerPoint:function(r){return B(r).subtract(this._getMapPanePos())},layerPointToContainerPoint:function(r){return B(r).add(this._getMapPanePos())},containerPointToLatLng:function(r){return r=this.containerPointToLayerPoint(B(r)),this.layerPointToLatLng(r)},latLngToContainerPoint:function(r){return this.layerPointToContainerPoint(this.latLngToLayerPoint(q(r)))},mouseEventToContainerPoint:function(r){return Jn(r,this._container)},mouseEventToLayerPoint:function(r){return this.containerPointToLayerPoint(this.mouseEventToContainerPoint(r))},mouseEventToLatLng:function(r){return this.layerPointToLatLng(this.mouseEventToLayerPoint(r))},_initContainer:function(r){if(!(r=this._container=Dr(r)))throw new Error("Map container not found.");if(r._leaflet_id)throw new Error("Map container is already initialized.");hi(r,"scroll",this._onScroll,this),this._containerId=zt(r)},_initLayout:function(){var r=this._container,f=(this._fadeAnimated=this.options.fadeAnimation&&ye.any3d,kn(r,"leaflet-container"+(ye.touch?" leaflet-touch":"")+(ye.retina?" leaflet-retina":"")+(ye.ielt9?" leaflet-oldie":"")+(ye.safari?" leaflet-safari":"")+(this._fadeAnimated?" leaflet-fade-anim":"")),No(r,"position"));"absolute"!==f&&"relative"!==f&&"fixed"!==f&&"sticky"!==f&&(r.style.position="relative"),this._initPanes(),this._initControlPos&&this._initControlPos()},_initPanes:function(){var r=this._panes={};this._paneRenderers={},this._mapPane=this.createPane("mapPane",this._container),De(this._mapPane,new y(0,0)),this.createPane("tilePane"),this.createPane("overlayPane"),this.createPane("shadowPane"),this.createPane("markerPane"),this.createPane("tooltipPane"),this.createPane("popupPane"),this.options.markerZoomAnimation||(kn(r.markerPane,"leaflet-zoom-hide"),kn(r.shadowPane,"leaflet-zoom-hide"))},_resetView:function(r,f,U){De(this._mapPane,new y(0,0));var ut=!this._loaded,Et=(this._loaded=!0,f=this._limitZoom(f),this.fire("viewprereset"),this._zoom!==f);this._moveStart(Et,U)._move(r,f)._moveEnd(Et),this.fire("viewreset"),ut&&this.fire("load")},_moveStart:function(r,f){return r&&this.fire("zoomstart"),f||this.fire("movestart"),this},_move:function(r,f,U,ut){void 0===f&&(f=this._zoom);var Et=this._zoom!==f;return this._zoom=f,this._lastCenter=r,this._pixelOrigin=this._getNewPixelOrigin(r),ut?U&&U.pinch&&this.fire("zoom",U):((Et||U&&U.pinch)&&this.fire("zoom",U),this.fire("move",U)),this},_moveEnd:function(r){return r&&this.fire("zoomend"),this.fire("moveend")},_stop:function(){return v(this._flyToFrame),this._panAnim&&this._panAnim.stop(),this},_rawPanBy:function(r){De(this._mapPane,this._getMapPanePos().subtract(r))},_getZoomSpan:function(){return this.getMaxZoom()-this.getMinZoom()},_panInsideMaxBounds:function(){this._enforcingBounds||this.panInsideBounds(this.options.maxBounds)},_checkIfLoaded:function(){if(!this._loaded)throw new Error("Set map center and zoom first.")},_initEvents:function(r){this._targets={};var f=r?Fi:hi;f((this._targets[zt(this._container)]=this)._container,"click dblclick mousedown mouseup mouseover mouseout mousemove contextmenu keypress keydown keyup",this._handleDOMEvent,this),this.options.trackResize&&f(window,"resize",this._onResize,this),ye.any3d&&this.options.transform3DLimit&&(r?this.off:this.on).call(this,"moveend",this._onMoveEnd)},_onResize:function(){v(this._resizeRequest),this._resizeRequest=G(function(){this.invalidateSize({debounceMoveend:!0})},this)},_onScroll:function(){this._container.scrollTop=0,this._container.scrollLeft=0},_onMoveEnd:function(){var r=this._getMapPanePos();Math.max(Math.abs(r.x),Math.abs(r.y))>=this.options.transform3DLimit&&this._resetView(this.getCenter(),this.getZoom())},_findEventTargets:function(r,f){for(var U,ut=[],Et="mouseout"===f||"mouseover"===f,ae=r.target||r.srcElement,qe=!1;ae;){if((U=this._targets[zt(ae)])&&("click"===f||"preclick"===f)&&this._draggableMoved(U)){qe=!0;break}if(U&&U.listens(f,!0)&&(Et&&!vr(ae,r)||(ut.push(U),Et))||ae===this._container)break;ae=ae.parentNode}return ut.length||qe||Et||!this.listens(f,!0)?ut:[this]},_isClickDisabled:function(r){for(;r&&r!==this._container;){if(r._leaflet_disable_click)return!0;r=r.parentNode}},_handleDOMEvent:function(r){var f,U=r.target||r.srcElement;!this._loaded||U._leaflet_disable_events||"click"===r.type&&this._isClickDisabled(U)||("mousedown"===(f=r.type)&&ii(U),this._fireDOMEvent(r,f))},_mouseEvents:["click","dblclick","mouseover","mouseout","contextmenu"],_fireDOMEvent:function(r,f,U){"click"===r.type&&((Xe=te({},r)).type="preclick",this._fireDOMEvent(Xe,Xe.type,U));var ut=this._findEventTargets(r,f);if(U){for(var Et=[],ae=0;ae<U.length;ae++)U[ae].listens(f,!0)&&Et.push(U[ae]);ut=Et.concat(ut)}if(ut.length){"contextmenu"===f&&Hn(r);var qe,Xe=ut[0],ki={originalEvent:r};for("keypress"!==r.type&&"keydown"!==r.type&&"keyup"!==r.type&&(ki.containerPoint=(qe=Xe.getLatLng&&(!Xe._radius||Xe._radius<=10))?this.latLngToContainerPoint(Xe.getLatLng()):this.mouseEventToContainerPoint(r),ki.layerPoint=this.containerPointToLayerPoint(ki.containerPoint),ki.latlng=qe?Xe.getLatLng():this.layerPointToLatLng(ki.layerPoint)),ae=0;ae<ut.length;ae++)if(ut[ae].fire(f,ki,!0),ki.originalEvent._stopped||!1===ut[ae].options.bubblingMouseEvents&&-1!==j(this._mouseEvents,f))return}},_draggableMoved:function(r){return(r=r.dragging&&r.dragging.enabled()?r:this).dragging&&r.dragging.moved()||this.boxZoom&&this.boxZoom.moved()},_clearHandlers:function(){for(var r=0,f=this._handlers.length;r<f;r++)this._handlers[r].disable()},whenReady:function(r,f){return this._loaded?r.call(f||this,{target:this}):this.on("load",r,f),this},_getMapPanePos:function(){return Ge(this._mapPane)||new y(0,0)},_moved:function(){var r=this._getMapPanePos();return r&&!r.equals([0,0])},_getTopLeftPoint:function(r,f){return(r&&void 0!==f?this._getNewPixelOrigin(r,f):this.getPixelOrigin()).subtract(this._getMapPanePos())},_getNewPixelOrigin:function(r,f){var U=this.getSize()._divideBy(2);return this.project(r,f)._subtract(U)._add(this._getMapPanePos())._round()},_latLngToNewLayerPoint:function(r,f,U){return U=this._getNewPixelOrigin(U,f),this.project(r,f)._subtract(U)},_latLngBoundsToNewLayerBounds:function(r,f,U){return U=this._getNewPixelOrigin(U,f),at([this.project(r.getSouthWest(),f)._subtract(U),this.project(r.getNorthWest(),f)._subtract(U),this.project(r.getSouthEast(),f)._subtract(U),this.project(r.getNorthEast(),f)._subtract(U)])},_getCenterLayerPoint:function(){return this.containerPointToLayerPoint(this.getSize()._divideBy(2))},_getCenterOffset:function(r){return this.latLngToLayerPoint(r).subtract(this._getCenterLayerPoint())},_limitCenter:function(r,f,U){var ut,Et;return!U||(ut=this.project(r,f),Et=this.getSize().divideBy(2),Et=new H(ut.subtract(Et),ut.add(Et)),Et=this._getBoundsOffset(Et,U,f),Math.abs(Et.x)<=1&&Math.abs(Et.y)<=1)?r:this.unproject(ut.add(Et),f)},_limitOffset:function(r,f){var U;return f?(U=new H((U=this.getPixelBounds()).min.add(r),U.max.add(r)),r.add(this._getBoundsOffset(U,f))):r},_getBoundsOffset:function(r,f,U){return U=(f=at(this.project(f.getNorthEast(),U),this.project(f.getSouthWest(),U))).min.subtract(r.min),f=f.max.subtract(r.max),new y(this._rebound(U.x,-f.x),this._rebound(U.y,-f.y))},_rebound:function(r,f){return 0<r+f?Math.round(r-f)/2:Math.max(0,Math.ceil(r))-Math.max(0,Math.floor(f))},_limitZoom:function(r){var f=this.getMinZoom(),U=this.getMaxZoom(),ut=ye.any3d?this.options.zoomSnap:1;return ut&&(r=Math.round(r/ut)*ut),Math.max(f,Math.min(U,r))},_onPanTransitionStep:function(){this.fire("move")},_onPanTransitionEnd:function(){En(this._mapPane,"leaflet-pan-anim"),this.fire("moveend")},_tryAnimatedPan:function(r,f){return r=this._getCenterOffset(r)._trunc(),!(!0!==(f&&f.animate)&&!this.getSize().contains(r)||(this.panBy(r,f),0))},_createAnimProxy:function(){var r=this._proxy=po("div","leaflet-proxy leaflet-zoom-animated");this._panes.mapPane.appendChild(r),this.on("zoomanim",function(f){var U=Mo,ut=this._proxy.style[U];Ce(this._proxy,this.project(f.center,f.zoom),this.getZoomScale(f.zoom,1)),ut===this._proxy.style[U]&&this._animatingZoom&&this._onZoomTransitionEnd()},this),this.on("load moveend",this._animMoveEnd,this),this._on("unload",this._destroyAnimProxy,this)},_destroyAnimProxy:function(){ko(this._proxy),this.off("load moveend",this._animMoveEnd,this),delete this._proxy},_animMoveEnd:function(){var r=this.getCenter(),f=this.getZoom();Ce(this._proxy,this.project(r,f),this.getZoomScale(f,1))},_catchTransitionEnd:function(r){this._animatingZoom&&0<=r.propertyName.indexOf("transform")&&this._onZoomTransitionEnd()},_nothingToAnimate:function(){return!this._container.getElementsByClassName("leaflet-zoom-animated").length},_tryAnimatedZoom:function(r,f,U){if(!this._animatingZoom){if(U=U||{},!this._zoomAnimated||!1===U.animate||this._nothingToAnimate()||Math.abs(f-this._zoom)>this.options.zoomAnimationThreshold)return!1;var ut=this.getZoomScale(f);if(ut=this._getCenterOffset(r)._divideBy(1-1/ut),!0!==U.animate&&!this.getSize().contains(ut))return!1;G(function(){this._moveStart(!0,!1)._animateZoom(r,f,!0)},this)}return!0},_animateZoom:function(r,f,U,ut){this._mapPane&&(U&&(this._animatingZoom=!0,this._animateToCenter=r,this._animateToZoom=f,kn(this._mapPane,"leaflet-zoom-anim")),this.fire("zoomanim",{center:r,zoom:f,noUpdate:ut}),this._tempFireZoomEvent||(this._tempFireZoomEvent=this._zoom!==this._animateToZoom),this._move(this._animateToCenter,this._animateToZoom,void 0,!0),setTimeout(xt(this._onZoomTransitionEnd,this),250))},_onZoomTransitionEnd:function(){this._animatingZoom&&(this._mapPane&&En(this._mapPane,"leaflet-zoom-anim"),this._animatingZoom=!1,this._move(this._animateToCenter,this._animateToZoom,void 0,!0),this._tempFireZoomEvent&&this.fire("zoom"),delete this._tempFireZoomEvent,this.fire("move"),this._moveEnd(!0))}});function Tr(r){return new Uo(r)}var Vs,Uo=b.extend({options:{position:"topright"},initialize:function(r){R(this,r)},getPosition:function(){return this.options.position},setPosition:function(r){var f=this._map;return f&&f.removeControl(this),this.options.position=r,f&&f.addControl(this),this},getContainer:function(){return this._container},addTo:function(ut){this.remove(),this._map=ut;var f=this._container=this.onAdd(ut),U=this.getPosition();return ut=ut._controlCorners[U],kn(f,"leaflet-control"),-1!==U.indexOf("bottom")?ut.insertBefore(f,ut.firstChild):ut.appendChild(f),this._map.on("unload",this.remove,this),this},remove:function(){return this._map&&(ko(this._container),this.onRemove&&this.onRemove(this._map),this._map.off("unload",this.remove,this),this._map=null),this},_refocusOnMap:function(r){this._map&&r&&0<r.screenX&&0<r.screenY&&this._map.getContainer().focus()}}),zr=(gn.include({addControl:function(r){return r.addTo(this),this},removeControl:function(r){return r.remove(),this},_initControlPos:function(){var r=this._controlCorners={},f="leaflet-",U=this._controlContainer=po("div",f+"control-container",this._container);function ut(Et,ae){r[Et+ae]=po("div",f+Et+" "+f+ae,U)}ut("top","left"),ut("top","right"),ut("bottom","left"),ut("bottom","right")},_clearControlPos:function(){for(var r in this._controlCorners)ko(this._controlCorners[r]);ko(this._controlContainer),delete this._controlCorners,delete this._controlContainer}}),Uo.extend({options:{collapsed:!0,position:"topright",autoZIndex:!0,hideSingleBase:!1,sortLayers:!1,sortFunction:function(r,f,U,ut){return U<ut?-1:ut<U?1:0}},initialize:function(r,f,U){for(var ut in R(this,U),this._layerControlInputs=[],this._layers=[],this._lastZIndex=0,this._handlingClick=!1,r)this._addLayer(r[ut],ut);for(ut in f)this._addLayer(f[ut],ut,!0)},onAdd:function(r){this._initLayout(),this._update(),(this._map=r).on("zoomend",this._checkDisabledLayers,this);for(var f=0;f<this._layers.length;f++)this._layers[f].layer.on("add remove",this._onLayerChange,this);return this._container},addTo:function(r){return Uo.prototype.addTo.call(this,r),this._expandIfNotCollapsed()},onRemove:function(){this._map.off("zoomend",this._checkDisabledLayers,this);for(var r=0;r<this._layers.length;r++)this._layers[r].layer.off("add remove",this._onLayerChange,this)},addBaseLayer:function(r,f){return this._addLayer(r,f),this._map?this._update():this},addOverlay:function(r,f){return this._addLayer(r,f,!0),this._map?this._update():this},removeLayer:function(r){return r.off("add remove",this._onLayerChange,this),(r=this._getLayer(zt(r)))&&this._layers.splice(this._layers.indexOf(r),1),this._map?this._update():this},expand:function(){kn(this._container,"leaflet-control-layers-expanded"),this._section.style.height=null;var r=this._map.getSize().y-(this._container.offsetTop+50);return r<this._section.clientHeight?(kn(this._section,"leaflet-control-layers-scrollbar"),this._section.style.height=r+"px"):En(this._section,"leaflet-control-layers-scrollbar"),this._checkDisabledLayers(),this},collapse:function(){return En(this._container,"leaflet-control-layers-expanded"),this},_initLayout:function(){var r="leaflet-control-layers",f=this._container=po("div",r),U=this.options.collapsed,ut=(f.setAttribute("aria-haspopup",!0),so(f),Vi(f),this._section=po("section",r+"-list")),Et=(U&&(this._map.on("click",this.collapse,this),hi(f,{mouseenter:this._expandSafely,mouseleave:this.collapse},this)),this._layersLink=po("a",r+"-toggle",f));Et.href="#",Et.title="Layers",Et.setAttribute("role","button"),hi(Et,{keydown:function(ae){13===ae.keyCode&&this._expandSafely()},click:function(ae){Hn(ae),this._expandSafely()}},this),U||this.expand(),this._baseLayersList=po("div",r+"-base",ut),this._separator=po("div",r+"-separator",ut),this._overlaysList=po("div",r+"-overlays",ut),f.appendChild(ut)},_getLayer:function(r){for(var f=0;f<this._layers.length;f++)if(this._layers[f]&&zt(this._layers[f].layer)===r)return this._layers[f]},_addLayer:function(r,f,U){this._map&&r.on("add remove",this._onLayerChange,this),this._layers.push({layer:r,name:f,overlay:U}),this.options.sortLayers&&this._layers.sort(xt(function(ut,Et){return this.options.sortFunction(ut.layer,Et.layer,ut.name,Et.name)},this)),this.options.autoZIndex&&r.setZIndex&&(this._lastZIndex++,r.setZIndex(this._lastZIndex)),this._expandIfNotCollapsed()},_update:function(){if(this._container){Kr(this._baseLayersList),Kr(this._overlaysList),this._layerControlInputs=[];for(var r,f,U,ut=0,Et=0;Et<this._layers.length;Et++)this._addItem(U=this._layers[Et]),f=f||U.overlay,r=r||!U.overlay,ut+=U.overlay?0:1;this.options.hideSingleBase&&(this._baseLayersList.style.display=(r=r&&1<ut)?"":"none"),this._separator.style.display=f&&r?"":"none"}return this},_onLayerChange:function(U){this._handlingClick||this._update();var f=this._getLayer(zt(U.target));(U=f.overlay?"add"===U.type?"overlayadd":"overlayremove":"add"===U.type?"baselayerchange":null)&&this._map.fire(U,f)},_createRadioElement:function(r,f){return r='<input type="radio" class="leaflet-control-layers-selector" name="'+r+'"'+(f?' checked="checked"':"")+"/>",(f=document.createElement("div")).innerHTML=r,f.firstChild},_addItem:function(r){var f,U=document.createElement("label"),ut=this._map.hasLayer(r.layer),Et=((r.overlay?((f=document.createElement("input")).type="checkbox",f.className="leaflet-control-layers-selector",f.defaultChecked=ut):f=this._createRadioElement("leaflet-base-layers_"+zt(this),ut),this._layerControlInputs.push(f),f.layerId=zt(r.layer),hi(f,"click",this._onInputClick,this),ut=document.createElement("span")).innerHTML=" "+r.name,document.createElement("span"));return U.appendChild(Et),Et.appendChild(f),Et.appendChild(ut),(r.overlay?this._overlaysList:this._baseLayersList).appendChild(U),this._checkDisabledLayers(),U},_onInputClick:function(){var r,f,U=this._layerControlInputs,ut=[],Et=[];this._handlingClick=!0;for(var ae=U.length-1;0<=ae;ae--)f=this._getLayer((r=U[ae]).layerId).layer,r.checked?ut.push(f):r.checked||Et.push(f);for(ae=0;ae<Et.length;ae++)this._map.hasLayer(Et[ae])&&this._map.removeLayer(Et[ae]);for(ae=0;ae<ut.length;ae++)this._map.hasLayer(ut[ae])||this._map.addLayer(ut[ae]);this._handlingClick=!1,this._refocusOnMap()},_checkDisabledLayers:function(){for(var r,f,U=this._layerControlInputs,ut=this._map.getZoom(),Et=U.length-1;0<=Et;Et--)f=this._getLayer((r=U[Et]).layerId).layer,r.disabled=void 0!==f.options.minZoom&&ut<f.options.minZoom||void 0!==f.options.maxZoom&&ut>f.options.maxZoom},_expandIfNotCollapsed:function(){return this._map&&!this.options.collapsed&&this.expand(),this},_expandSafely:function(){var r=this._section;hi(r,"click",Hn),this.expand(),setTimeout(function(){Fi(r,"click",Hn)})}})),$s=Uo.extend({options:{position:"topleft",zoomInText:'<span aria-hidden="true">+</span>',zoomInTitle:"Zoom in",zoomOutText:'<span aria-hidden="true">&#x2212;</span>',zoomOutTitle:"Zoom out"},onAdd:function(r){var f="leaflet-control-zoom",U=po("div",f+" leaflet-bar"),ut=this.options;return this._zoomInButton=this._createButton(ut.zoomInText,ut.zoomInTitle,f+"-in",U,this._zoomIn),this._zoomOutButton=this._createButton(ut.zoomOutText,ut.zoomOutTitle,f+"-out",U,this._zoomOut),this._updateDisabled(),r.on("zoomend zoomlevelschange",this._updateDisabled,this),U},onRemove:function(r){r.off("zoomend zoomlevelschange",this._updateDisabled,this)},disable:function(){return this._disabled=!0,this._updateDisabled(),this},enable:function(){return this._disabled=!1,this._updateDisabled(),this},_zoomIn:function(r){!this._disabled&&this._map._zoom<this._map.getMaxZoom()&&this._map.zoomIn(this._map.options.zoomDelta*(r.shiftKey?3:1))},_zoomOut:function(r){!this._disabled&&this._map._zoom>this._map.getMinZoom()&&this._map.zoomOut(this._map.options.zoomDelta*(r.shiftKey?3:1))},_createButton:function(r,f,U,ut,Et){return(U=po("a",U,ut)).innerHTML=r,U.href="#",U.title=f,U.setAttribute("role","button"),U.setAttribute("aria-label",f),so(U),hi(U,"click",Gn),hi(U,"click",Et,this),hi(U,"click",this._refocusOnMap,this),U},_updateDisabled:function(){var r=this._map,f="leaflet-disabled";En(this._zoomInButton,f),En(this._zoomOutButton,f),this._zoomInButton.setAttribute("aria-disabled","false"),this._zoomOutButton.setAttribute("aria-disabled","false"),!this._disabled&&r._zoom!==r.getMinZoom()||(kn(this._zoomOutButton,f),this._zoomOutButton.setAttribute("aria-disabled","true")),!this._disabled&&r._zoom!==r.getMaxZoom()||(kn(this._zoomInButton,f),this._zoomInButton.setAttribute("aria-disabled","true"))}}),wa=(gn.mergeOptions({zoomControl:!0}),gn.addInitHook(function(){this.options.zoomControl&&(this.zoomControl=new $s,this.addControl(this.zoomControl))}),Uo.extend({options:{position:"bottomleft",maxWidth:100,metric:!0,imperial:!0},onAdd:function(r){var f="leaflet-control-scale",U=po("div",f),ut=this.options;return this._addScales(ut,f+"-line",U),r.on(ut.updateWhenIdle?"moveend":"move",this._update,this),r.whenReady(this._update,this),U},onRemove:function(r){r.off(this.options.updateWhenIdle?"moveend":"move",this._update,this)},_addScales:function(r,f,U){r.metric&&(this._mScale=po("div",f,U)),r.imperial&&(this._iScale=po("div",f,U))},_update:function(){var r=(f=this._map).getSize().y/2,f=f.distance(f.containerPointToLatLng([0,r]),f.containerPointToLatLng([this.options.maxWidth,r]));this._updateScales(f)},_updateScales:function(r){this.options.metric&&r&&this._updateMetric(r),this.options.imperial&&r&&this._updateImperial(r)},_updateMetric:function(r){var f=this._getRoundNum(r);this._updateScale(this._mScale,f<1e3?f+" m":f/1e3+" km",f/r)},_updateImperial:function(ut){var f,U;5280<(ut*=3.2808399)?(U=this._getRoundNum(f=ut/5280),this._updateScale(this._iScale,U+" mi",U/f)):(U=this._getRoundNum(ut),this._updateScale(this._iScale,U+" ft",U/ut))},_updateScale:function(r,f,U){r.style.width=Math.round(this.options.maxWidth*U)+"px",r.innerHTML=f},_getRoundNum:function(U){var f=Math.pow(10,(Math.floor(U)+"").length-1);return f*(10<=(U/=f)?10:5<=U?5:3<=U?3:2<=U?2:1)}})),Vo=Uo.extend({options:{position:"bottomright",prefix:'<a href="https://leafletjs.com" title="A JavaScript library for interactive maps">'+(ye.inlineSvg?'<svg aria-hidden="true" xmlns="http://www.w3.org/2000/svg" width="12" height="8" viewBox="0 0 12 8" class="leaflet-attribution-flag"><path fill="#4C7BE1" d="M0 0h12v4H0z"/><path fill="#FFD500" d="M0 4h12v3H0z"/><path fill="#E0BC00" d="M0 7h12v1H0z"/></svg> ':"")+"Leaflet</a>"},initialize:function(r){R(this,r),this._attributions={}},onAdd:function(r){for(var f in(r.attributionControl=this)._container=po("div","leaflet-control-attribution"),so(this._container),r._layers)r._layers[f].getAttribution&&this.addAttribution(r._layers[f].getAttribution());return this._update(),r.on("layeradd",this._addAttribution,this),this._container},onRemove:function(r){r.off("layeradd",this._addAttribution,this)},_addAttribution:function(r){r.layer.getAttribution&&(this.addAttribution(r.layer.getAttribution()),r.layer.once("remove",function(){this.removeAttribution(r.layer.getAttribution())},this))},setPrefix:function(r){return this.options.prefix=r,this._update(),this},addAttribution:function(r){return r&&(this._attributions[r]||(this._attributions[r]=0),this._attributions[r]++,this._update()),this},removeAttribution:function(r){return r&&this._attributions[r]&&(this._attributions[r]--,this._update()),this},_update:function(){if(this._map){var r,f=[];for(r in this._attributions)this._attributions[r]&&f.push(r);var U=[];this.options.prefix&&U.push(this.options.prefix),f.length&&U.push(f.join(", ")),this._container.innerHTML=U.join(' <span aria-hidden="true">|</span> ')}}}),Cr=((gn.mergeOptions({attributionControl:!0}),gn.addInitHook(function(){this.options.attributionControl&&(new Vo).addTo(this)}),Uo.Layers=zr,Uo.Zoom=$s,Uo.Scale=wa,Uo.Attribution=Vo,Tr.layers=function(r,f,U){return new zr(r,f,U)},Tr.zoom=function(r){return new $s(r)},Tr.scale=function(r){return new wa(r)},Tr.attribution=function(r){return new Vo(r)},Hr=b.extend({initialize:function(r){this._map=r},enable:function(){return this._enabled||(this._enabled=!0,this.addHooks()),this},disable:function(){return this._enabled&&(this._enabled=!1,this.removeHooks()),this},enabled:function(){return!!this._enabled}})).addTo=function(r,f){return r.addHandler(f,this),this},Or={Events:k},ye.touch?"touchstart mousedown":"mousedown"),Br=_.extend({options:{clickTolerance:3},initialize:function(r,f,U,ut){R(this,ut),this._element=r,this._dragStartTarget=f||r,this._preventOutline=U},enable:function(){this._enabled||(hi(this._dragStartTarget,Cr,this._onDown,this),this._enabled=!0)},disable:function(){this._enabled&&(Br._dragging===this&&this.finishDrag(!0),Fi(this._dragStartTarget,Cr,this._onDown,this),this._enabled=!1,this._moved=!1)},_onDown:function(r){var f,U;this._enabled&&(this._moved=!1,lr(this._element,"leaflet-zoom-anim")||(r.touches&&1!==r.touches.length?Br._dragging===this&&this.finishDrag():Br._dragging||r.shiftKey||1!==r.which&&1!==r.button&&!r.touches||((Br._dragging=this)._preventOutline&&ii(this._element),oe(),xi(),this._moving||(this.fire("down"),U=r.touches?r.touches[0]:r,f=Oi(this._element),this._startPoint=new y(U.clientX,U.clientY),this._startPos=Ge(this._element),this._parentScale=di(f),U="mousedown"===r.type,hi(document,U?"mousemove":"touchmove",this._onMove,this),hi(document,U?"mouseup":"touchend touchcancel",this._onUp,this)))))},_onMove:function(r){var f;this._enabled&&(r.touches&&1<r.touches.length?this._moved=!0:!(f=new y((f=r.touches&&1===r.touches.length?r.touches[0]:r).clientX,f.clientY)._subtract(this._startPoint)).x&&!f.y||Math.abs(f.x)+Math.abs(f.y)<this.options.clickTolerance||(f.x/=this._parentScale.x,f.y/=this._parentScale.y,Hn(r),this._moved||(this.fire("dragstart"),this._moved=!0,kn(document.body,"leaflet-dragging"),this._lastTarget=r.target||r.srcElement,window.SVGElementInstance&&this._lastTarget instanceof window.SVGElementInstance&&(this._lastTarget=this._lastTarget.correspondingUseElement),kn(this._lastTarget,"leaflet-drag-target")),this._newPos=this._startPos.add(f),this._moving=!0,this._lastEvent=r,this._updatePosition()))},_updatePosition:function(){var r={originalEvent:this._lastEvent};this.fire("predrag",r),De(this._element,this._newPos),this.fire("drag",r)},_onUp:function(){this._enabled&&this.finishDrag()},finishDrag:function(r){En(document.body,"leaflet-dragging"),this._lastTarget&&(En(this._lastTarget,"leaflet-drag-target"),this._lastTarget=null),Fi(document,"mousemove touchmove",this._onMove,this),Fi(document,"mouseup touchend touchcancel",this._onUp,this),Ee(),Ui(),this._moved&&this._moving&&this.fire("dragend",{noInertia:r,distance:this._newPos.distanceTo(this._startPos)}),this._moving=!1,Br._dragging=!1}});function Jo(r,f){if(f&&r.length){var U=r=function(Xe,ki){for(var Ci=[Xe[0]],Sn=1,no=0,wo=Xe.length;Sn<wo;Sn++)void 0,(ns=(Wr=Xe[no]).x-(fr=Xe[Sn]).x)*ns+(Wr=Wr.y-fr.y)*Wr>ki&&(Ci.push(Xe[Sn]),no=Sn);var fr,Wr,ns;return no<wo-1&&Ci.push(Xe[wo-1]),Ci}(r,f*=f),ut=U.length,Et=new(typeof Uint8Array!=void 0+""?Uint8Array:Array)(ut);Et[0]=Et[ut-1]=1,function Xe(ki,Ci,Sn,no,wo){var fr,Fs,ns,Wr=0;for(Fs=no+1;Fs<=wo-1;Fs++)Wr<(ns=ra(ki[Fs],ki[no],ki[wo],!0))&&(fr=Fs,Wr=ns);Sn<Wr&&(Ci[fr]=1,Xe(ki,Ci,Sn,no,fr),Xe(ki,Ci,Sn,fr,wo))}(U,Et,f,0,ut-1);var ae,qe=[];for(ae=0;ae<ut;ae++)Et[ae]&&qe.push(U[ae]);return qe}return r.slice()}function Ps(r,f,U){return Math.sqrt(ra(r,f,U,!0))}function is(r,f,U,ut,Et){var ae,qe,Xe,ki=ut?Vs:Mr(r,U),Ci=Mr(f,U);for(Vs=Ci;;){if(!(ki|Ci))return[r,f];if(ki&Ci)return!1;Xe=Mr(qe=oa(r,f,ae=ki||Ci,U,Et),U),ae===ki?(r=qe,ki=Xe):(f=qe,Ci=Xe)}}function oa(r,ki,U,Sn,Et){var ae,qe,Xe=ki.x-r.x,Ci=(ki=ki.y-r.y,Sn.min);return Sn=Sn.max,8&U?(ae=r.x+Xe*(Sn.y-r.y)/ki,qe=Sn.y):4&U?(ae=r.x+Xe*(Ci.y-r.y)/ki,qe=Ci.y):2&U?(ae=Sn.x,qe=r.y+ki*(Sn.x-r.x)/Xe):1&U&&(ae=Ci.x,qe=r.y+ki*(Ci.x-r.x)/Xe),new y(ae,qe,Et)}function Mr(r,f){var U=0;return r.x<f.min.x?U|=1:r.x>f.max.x&&(U|=2),r.y<f.min.y?U|=4:r.y>f.max.y&&(U|=8),U}function ra(r,ae,U,ut){var Et=ae.x,qe=U.x-Et,Xe=U.y-(ae=ae.y),ki=qe*qe+Xe*Xe;return 0<ki&&(1<(ki=((r.x-Et)*qe+(r.y-ae)*Xe)/ki)?(Et=U.x,ae=U.y):0<ki&&(Et+=qe*ki,ae+=Xe*ki)),qe=r.x-Et,Xe=r.y-ae,ut?qe*qe+Xe*Xe:new y(Et,ae)}function rr(r){return!T(r[0])||"object"!=typeof r[0][0]&&void 0!==r[0][0]}function Lo(r){return console.warn("Deprecated use of _flat, please use L.LineUtil.isFlat instead."),rr(r)}function Ro(r,f){var U,ut,Et,ae,qe;if(!r||0===r.length)throw new Error("latlngs not passed");rr(r)||(console.warn("latlngs are not flat! Only the first ring will be used"),r=r[0]);var Xe,ki=[];for(Xe in r)ki.push(f.project(q(r[Xe])));for(var Ci=ki.length,Sn=0,no=0;Sn<Ci-1;Sn++)no+=ki[Sn].distanceTo(ki[Sn+1])/2;if(0===no)qe=ki[0];else for(U=Sn=0;Sn<Ci-1;Sn++)if(no<(U+=ae=(ut=ki[Sn]).distanceTo(Et=ki[Sn+1]))){qe=[Et.x-(ae=(U-no)/ae)*(Et.x-ut.x),Et.y-ae*(Et.y-ut.y)];break}return f.unproject(B(qe))}function Lr(r,f,U){for(var ut,Et,ae,qe,Xe,ki,Ci,Sn=[1,4,2,8],no=0,wo=r.length;no<wo;no++)r[no]._code=Mr(r[no],f);for(ae=0;ae<4;ae++){for(ki=Sn[ae],ut=[],no=0,Et=(wo=r.length)-1;no<wo;Et=no++)Xe=r[Et],(qe=r[no])._code&ki?Xe._code&ki||((Ci=oa(Xe,qe,ki,f,U))._code=Mr(Ci,f),ut.push(Ci)):(Xe._code&ki&&((Ci=oa(Xe,qe,ki,f,U))._code=Mr(Ci,f),ut.push(Ci)),ut.push(qe));r=ut}return r}function ks(r,f){var U,ut,Et,ae,qe;if(!r||0===r.length)throw new Error("latlngs not passed");rr(r)||(console.warn("latlngs are not flat! Only the first ring will be used"),r=r[0]);var ki,Ci=[];for(ki in r)Ci.push(f.project(q(r[ki])));for(var Sn=Ci.length,no=ae=qe=0,wo=0,fr=Sn-1;wo<Sn;fr=wo++)ae+=((U=Ci[wo]).x+(ut=Ci[fr]).x)*(Et=U.y*ut.x-ut.y*U.x),qe+=(U.y+ut.y)*Et,no+=3*Et;return f.unproject(B(0===no?Ci[0]:[ae/no,qe/no]))}se={__proto__:null,simplify:Jo,pointToSegmentDistance:Ps,closestPointOnSegment:function(r,f,U){return ra(r,f,U)},clipSegment:is,_getEdgeIntersection:oa,_getBitCode:Mr,_sqClosestPointOnSegment:ra,isFlat:rr,_flat:Lo,polylineCenter:Ro},us={__proto__:null,clipPolygon:Lr,polygonCenter:ks},za={__proto__:null,LonLat:Js={project:function(r){return new y(r.lng,r.lat)},unproject:function(r){return new z(r.y,r.x)},bounds:new H([-180,-90],[180,90])},Mercator:ss={R:6378137,R_MINOR:6356752.314245179,bounds:new H([-20037508.34279,-15496570.73972],[20037508.34279,18764656.23138]),project:function(r){var f=Math.PI/180,U=this.R,ae=r.lat*f,ut=this.R_MINOR/U,Et=(ut=Math.sqrt(1-ut*ut))*Math.sin(ae);return Et=Math.tan(Math.PI/4-ae/2)/Math.pow((1-Et)/(1+Et),ut/2),ae=-U*Math.log(Math.max(Et,1e-10)),new y(r.lng*f*U,ae)},unproject:function(r){for(var f,U=180/Math.PI,ut=this.R,Et=this.R_MINOR/ut,ae=Math.sqrt(1-Et*Et),qe=Math.exp(-r.y/ut),Xe=Math.PI/2-2*Math.atan(qe),ki=0,Ci=.1;ki<15&&1e-7<Math.abs(Ci);ki++)f=ae*Math.sin(Xe),f=Math.pow((1-f)/(1+f),ae/2),Xe+=Ci=Math.PI/2-2*Math.atan(qe*f)-Xe;return new z(Xe*U,r.x*U/ut)}},SphericalMercator:dt},sa=te({},pt,{code:"EPSG:3395",projection:ss,transformation:lt(_e=.5/(Math.PI*ss.R),.5,-_e,.5)});var Ya=te({},pt,{code:"EPSG:4326",projection:Js,transformation:lt(1/180,1,-1/180,.5)}),yt=(E=te({},mt,{projection:Js,transformation:lt(1,0,-1,0),scale:function(r){return Math.pow(2,r)},zoom:function(r){return Math.log(r)/Math.LN2},distance:function(r,ut){var U=ut.lng-r.lng;return ut=ut.lat-r.lat,Math.sqrt(U*U+ut*ut)},infinite:!0}),mt.Earth=pt,mt.EPSG3395=sa,mt.EPSG3857=ht,mt.EPSG900913=Lt,mt.EPSG4326=Ya,mt.Simple=E,tt=_.extend({options:{pane:"overlayPane",attribution:null,bubblingMouseEvents:!0},addTo:function(r){return r.addLayer(this),this},remove:function(){return this.removeFrom(this._map||this._mapToAdd)},removeFrom:function(r){return r&&r.removeLayer(this),this},getPane:function(r){return this._map.getPane(r?this.options[r]||r:this.options.pane)},addInteractiveTarget:function(r){return this._map._targets[zt(r)]=this},removeInteractiveTarget:function(r){return delete this._map._targets[zt(r)],this},getAttribution:function(){return this.options.attribution},_layerAdd:function(r){var f,U=r.target;U.hasLayer(this)&&(this._map=U,this._zoomAnimated=U._zoomAnimated,this.getEvents&&(f=this.getEvents(),U.on(f,this),this.once("remove",function(){U.off(f,this)},this)),this.onAdd(U),this.fire("add"),U.fire("layeradd",{layer:this}))}}),gn.include({addLayer:function(r){var f;if(r._layerAdd)return f=zt(r),this._layers[f]||((this._layers[f]=r)._mapToAdd=this,r.beforeAdd&&r.beforeAdd(this),this.whenReady(r._layerAdd,r)),this;throw new Error("The provided object is not a Layer.")},removeLayer:function(r){var f=zt(r);return this._layers[f]&&(this._loaded&&r.onRemove(this),delete this._layers[f],this._loaded&&(this.fire("layerremove",{layer:r}),r.fire("remove")),r._map=r._mapToAdd=null),this},hasLayer:function(r){return zt(r)in this._layers},eachLayer:function(r,f){for(var U in this._layers)r.call(f,this._layers[U]);return this},_addLayers:function(r){for(var f=0,U=(r=r?T(r)?r:[r]:[]).length;f<U;f++)this.addLayer(r[f])},_addZoomLimit:function(r){isNaN(r.options.maxZoom)&&isNaN(r.options.minZoom)||(this._zoomBoundLayers[zt(r)]=r,this._updateZoomLevels())},_removeZoomLimit:function(r){r=zt(r),this._zoomBoundLayers[r]&&(delete this._zoomBoundLayers[r],this._updateZoomLevels())},_updateZoomLevels:function(){var r,f=1/0,U=-1/0,ut=this._getZoomSpan();for(r in this._zoomBoundLayers){var Et=this._zoomBoundLayers[r].options;f=void 0===Et.minZoom?f:Math.min(f,Et.minZoom),U=void 0===Et.maxZoom?U:Math.max(U,Et.maxZoom)}this._layersMaxZoom=U===-1/0?void 0:U,this._layersMinZoom=f===1/0?void 0:f,ut!==this._getZoomSpan()&&this.fire("zoomlevelschange"),void 0===this.options.maxZoom&&this._layersMaxZoom&&this.getZoom()>this._layersMaxZoom&&this.setZoom(this._layersMaxZoom),void 0===this.options.minZoom&&this._layersMinZoom&&this.getZoom()<this._layersMinZoom&&this.setZoom(this._layersMinZoom)}}),tt.extend({initialize:function(r,f){var U,ut;if(R(this,f),this._layers={},r)for(U=0,ut=r.length;U<ut;U++)this.addLayer(r[U])},addLayer:function(r){var f=this.getLayerId(r);return this._layers[f]=r,this._map&&this._map.addLayer(r),this},removeLayer:function(r){return r=r in this._layers?r:this.getLayerId(r),this._map&&this._layers[r]&&this._map.removeLayer(this._layers[r]),delete this._layers[r],this},hasLayer:function(r){return("number"==typeof r?r:this.getLayerId(r))in this._layers},clearLayers:function(){return this.eachLayer(this.removeLayer,this)},invoke:function(r){var f,U,ut=Array.prototype.slice.call(arguments,1);for(f in this._layers)(U=this._layers[f])[r]&&U[r].apply(U,ut);return this},onAdd:function(r){this.eachLayer(r.addLayer,r)},onRemove:function(r){this.eachLayer(r.removeLayer,r)},eachLayer:function(r,f){for(var U in this._layers)r.call(f,this._layers[U]);return this},getLayer:function(r){return this._layers[r]},getLayers:function(){var r=[];return this.eachLayer(r.push,r),r},setZIndex:function(r){return this.invoke("setZIndex",r)},getLayerId:zt})),St=yt.extend({addLayer:function(r){return this.hasLayer(r)?this:(r.addEventParent(this),yt.prototype.addLayer.call(this,r),this.fire("layeradd",{layer:r}))},removeLayer:function(r){return this.hasLayer(r)?((r=r in this._layers?this._layers[r]:r).removeEventParent(this),yt.prototype.removeLayer.call(this,r),this.fire("layerremove",{layer:r})):this},setStyle:function(r){return this.invoke("setStyle",r)},bringToFront:function(){return this.invoke("bringToFront")},bringToBack:function(){return this.invoke("bringToBack")},getBounds:function(){var r,f=new ft;for(r in this._layers){var U=this._layers[r];f.extend(U.getBounds?U.getBounds():U.getLatLng())}return f}}),Zt=b.extend({options:{popupAnchor:[0,0],tooltipAnchor:[0,0],crossOrigin:!1},initialize:function(r){R(this,r)},createIcon:function(r){return this._createIcon("icon",r)},createShadow:function(r){return this._createIcon("shadow",r)},_createIcon:function(r,f){var U=this._getIconUrl(r);if(U)return U=this._createImg(U,f&&"IMG"===f.tagName?f:null),this._setIconStyles(U,r),!this.options.crossOrigin&&""!==this.options.crossOrigin||(U.crossOrigin=!0===this.options.crossOrigin?"":this.options.crossOrigin),U;if("icon"===r)throw new Error("iconUrl not set in Icon options (see the docs).");return null},_setIconStyles:function(r,f){var U=this.options,ut=B(ut="number"==typeof(ut=U[f+"Size"])?[ut,ut]:ut),Et=B("shadow"===f&&U.shadowAnchor||U.iconAnchor||ut&&ut.divideBy(2,!0));r.className="leaflet-marker-"+f+" "+(U.className||""),Et&&(r.style.marginLeft=-Et.x+"px",r.style.marginTop=-Et.y+"px"),ut&&(r.style.width=ut.x+"px",r.style.height=ut.y+"px")},_createImg:function(r,f){return(f=f||document.createElement("img")).src=r,f},_getIconUrl:function(r){return ye.retina&&this.options[r+"RetinaUrl"]||this.options[r+"Url"]}}),ne=Zt.extend({options:{iconUrl:"marker-icon.png",iconRetinaUrl:"marker-icon-2x.png",shadowUrl:"marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],tooltipAnchor:[16,-28],shadowSize:[41,41]},_getIconUrl:function(r){return"string"!=typeof ne.imagePath&&(ne.imagePath=this._detectIconPath()),(this.options.imagePath||ne.imagePath)+Zt.prototype._getIconUrl.call(this,r)},_stripUrl:function(r){function f(U,ut,Et){return(ut=ut.exec(U))&&ut[Et]}return(r=f(r,/^url\((['"])?(.+)\1\)$/,2))&&f(r,/^(.*)marker-icon\.png$/,1)},_detectIconPath:function(){var r=po("div","leaflet-default-icon-path",document.body),f=No(r,"background-image")||No(r,"backgroundImage");return document.body.removeChild(r),(f=this._stripUrl(f))?f:(r=document.querySelector('link[href$="leaflet.css"]'))?r.href.substring(0,r.href.length-11-1):""}}),fe=Hr.extend({initialize:function(r){this._marker=r},addHooks:function(){var r=this._marker._icon;this._draggable||(this._draggable=new Br(r,r,!0)),this._draggable.on({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).enable(),kn(r,"leaflet-marker-draggable")},removeHooks:function(){this._draggable.off({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).disable(),this._marker._icon&&En(this._marker._icon,"leaflet-marker-draggable")},moved:function(){return this._draggable&&this._draggable._moved},_adjustPan:function(r){var f=this._marker,U=f._map,ut=this._marker.options.autoPanSpeed,Et=this._marker.options.autoPanPadding,ae=Ge(f._icon),qe=U.getPixelBounds(),Xe=U.getPixelOrigin();(Xe=at(qe.min._subtract(Xe).add(Et),qe.max._subtract(Xe).subtract(Et))).contains(ae)||(Et=B((Math.max(Xe.max.x,ae.x)-Xe.max.x)/(qe.max.x-Xe.max.x)-(Math.min(Xe.min.x,ae.x)-Xe.min.x)/(qe.min.x-Xe.min.x),(Math.max(Xe.max.y,ae.y)-Xe.max.y)/(qe.max.y-Xe.max.y)-(Math.min(Xe.min.y,ae.y)-Xe.min.y)/(qe.min.y-Xe.min.y)).multiplyBy(ut),U.panBy(Et,{animate:!1}),this._draggable._newPos._add(Et),this._draggable._startPos._add(Et),De(f._icon,this._draggable._newPos),this._onDrag(r),this._panRequest=G(this._adjustPan.bind(this,r)))},_onDragStart:function(){this._oldLatLng=this._marker.getLatLng(),this._marker.closePopup&&this._marker.closePopup(),this._marker.fire("movestart").fire("dragstart")},_onPreDrag:function(r){this._marker.options.autoPan&&(v(this._panRequest),this._panRequest=G(this._adjustPan.bind(this,r)))},_onDrag:function(r){var f=this._marker,U=f._shadow,ut=Ge(f._icon),Et=f._map.layerPointToLatLng(ut);U&&De(U,ut),f._latlng=Et,r.latlng=Et,r.oldLatLng=this._oldLatLng,f.fire("move",r).fire("drag",r)},_onDragEnd:function(r){v(this._panRequest),delete this._oldLatLng,this._marker.fire("moveend").fire("dragend",r)}}),Be=tt.extend({options:{icon:new ne,interactive:!0,keyboard:!0,title:"",alt:"Marker",zIndexOffset:0,opacity:1,riseOnHover:!1,riseOffset:250,pane:"markerPane",shadowPane:"shadowPane",bubblingMouseEvents:!1,autoPanOnFocus:!0,draggable:!1,autoPan:!1,autoPanPadding:[50,50],autoPanSpeed:10},initialize:function(r,f){R(this,f),this._latlng=q(r)},onAdd:function(r){this._zoomAnimated=this._zoomAnimated&&r.options.markerZoomAnimation,this._zoomAnimated&&r.on("zoomanim",this._animateZoom,this),this._initIcon(),this.update()},onRemove:function(r){this.dragging&&this.dragging.enabled()&&(this.options.draggable=!0,this.dragging.removeHooks()),delete this.dragging,this._zoomAnimated&&r.off("zoomanim",this._animateZoom,this),this._removeIcon(),this._removeShadow()},getEvents:function(){return{zoom:this.update,viewreset:this.update}},getLatLng:function(){return this._latlng},setLatLng:function(r){var f=this._latlng;return this._latlng=q(r),this.update(),this.fire("move",{oldLatLng:f,latlng:this._latlng})},setZIndexOffset:function(r){return this.options.zIndexOffset=r,this.update()},getIcon:function(){return this.options.icon},setIcon:function(r){return this.options.icon=r,this._map&&(this._initIcon(),this.update()),this._popup&&this.bindPopup(this._popup,this._popup.options),this},getElement:function(){return this._icon},update:function(){var r;return this._icon&&this._map&&(r=this._map.latLngToLayerPoint(this._latlng).round(),this._setPos(r)),this},_initIcon:function(){var ut,r=this.options,f="leaflet-zoom-"+(this._zoomAnimated?"animated":"hide"),U=!1,Et=!1;(ut=r.icon.createIcon(this._icon))!==this._icon&&(this._icon&&this._removeIcon(),U=!0,r.title&&(ut.title=r.title),"IMG"===ut.tagName&&(ut.alt=r.alt||"")),kn(ut,f),r.keyboard&&(ut.tabIndex="0",ut.setAttribute("role","button")),this._icon=ut,r.riseOnHover&&this.on({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&hi(ut,"focus",this._panOnFocus,this),(ut=r.icon.createShadow(this._shadow))!==this._shadow&&(this._removeShadow(),Et=!0),ut&&(kn(ut,f),ut.alt=""),this._shadow=ut,r.opacity<1&&this._updateOpacity(),U&&this.getPane().appendChild(this._icon),this._initInteraction(),ut&&Et&&this.getPane(r.shadowPane).appendChild(this._shadow)},_removeIcon:function(){this.options.riseOnHover&&this.off({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&Fi(this._icon,"focus",this._panOnFocus,this),ko(this._icon),this.removeInteractiveTarget(this._icon),this._icon=null},_removeShadow:function(){this._shadow&&ko(this._shadow),this._shadow=null},_setPos:function(r){this._icon&&De(this._icon,r),this._shadow&&De(this._shadow,r),this._zIndex=r.y+this.options.zIndexOffset,this._resetZIndex()},_updateZIndex:function(r){this._icon&&(this._icon.style.zIndex=this._zIndex+r)},_animateZoom:function(r){r=this._map._latLngToNewLayerPoint(this._latlng,r.zoom,r.center).round(),this._setPos(r)},_initInteraction:function(){var r;this.options.interactive&&(kn(this._icon,"leaflet-interactive"),this.addInteractiveTarget(this._icon),fe&&(r=this.options.draggable,this.dragging&&(r=this.dragging.enabled(),this.dragging.disable()),this.dragging=new fe(this),r&&this.dragging.enable()))},setOpacity:function(r){return this.options.opacity=r,this._map&&this._updateOpacity(),this},_updateOpacity:function(){var r=this.options.opacity;this._icon&&Jt(this._icon,r),this._shadow&&Jt(this._shadow,r)},_bringToFront:function(){this._updateZIndex(this.options.riseOffset)},_resetZIndex:function(){this._updateZIndex(0)},_panOnFocus:function(){var r,f,U=this._map;U&&(r=(f=this.options.icon.options).iconSize?B(f.iconSize):B(0,0),f=f.iconAnchor?B(f.iconAnchor):B(0,0),U.panInside(this._latlng,{paddingTopLeft:f,paddingBottomRight:r.subtract(f)}))},_getPopupAnchor:function(){return this.options.icon.options.popupAnchor},_getTooltipAnchor:function(){return this.options.icon.options.tooltipAnchor}}),je=tt.extend({options:{stroke:!0,color:"#3388ff",weight:3,opacity:1,lineCap:"round",lineJoin:"round",dashArray:null,dashOffset:null,fill:!1,fillColor:null,fillOpacity:.2,fillRule:"evenodd",interactive:!0,bubblingMouseEvents:!0},beforeAdd:function(r){this._renderer=r.getRenderer(this)},onAdd:function(){this._renderer._initPath(this),this._reset(),this._renderer._addPath(this)},onRemove:function(){this._renderer._removePath(this)},redraw:function(){return this._map&&this._renderer._updatePath(this),this},setStyle:function(r){return R(this,r),this._renderer&&(this._renderer._updateStyle(this),this.options.stroke&&r&&Object.prototype.hasOwnProperty.call(r,"weight")&&this._updateBounds()),this},bringToFront:function(){return this._renderer&&this._renderer._bringToFront(this),this},bringToBack:function(){return this._renderer&&this._renderer._bringToBack(this),this},getElement:function(){return this._path},_reset:function(){this._project(),this._update()},_clickTolerance:function(){return(this.options.stroke?this.options.weight/2:0)+(this._renderer.options.tolerance||0)}}),ei=je.extend({options:{fill:!0,radius:10},initialize:function(r,f){R(this,f),this._latlng=q(r),this._radius=this.options.radius},setLatLng:function(r){var f=this._latlng;return this._latlng=q(r),this.redraw(),this.fire("move",{oldLatLng:f,latlng:this._latlng})},getLatLng:function(){return this._latlng},setRadius:function(r){return this.options.radius=this._radius=r,this.redraw()},getRadius:function(){return this._radius},setStyle:function(r){var f=r&&r.radius||this._radius;return je.prototype.setStyle.call(this,r),this.setRadius(f),this},_project:function(){this._point=this._map.latLngToLayerPoint(this._latlng),this._updateBounds()},_updateBounds:function(){var U=this._radius,r=this._radiusY||U,f=this._clickTolerance();this._pxBounds=new H(this._point.subtract(U=[U+f,r+f]),this._point.add(U))},_update:function(){this._map&&this._updatePath()},_updatePath:function(){this._renderer._updateCircle(this)},_empty:function(){return this._radius&&!this._renderer._bounds.intersects(this._pxBounds)},_containsPoint:function(r){return r.distanceTo(this._point)<=this._radius+this._clickTolerance()}}),vi=ei.extend({initialize:function(r,f,U){if(R(this,f="number"==typeof f?te({},U,{radius:f}):f),this._latlng=q(r),isNaN(this.options.radius))throw new Error("Circle radius cannot be NaN");this._mRadius=this.options.radius},setRadius:function(r){return this._mRadius=r,this.redraw()},getRadius:function(){return this._mRadius},getBounds:function(){var r=[this._radius,this._radiusY||this._radius];return new ft(this._map.layerPointToLatLng(this._point.subtract(r)),this._map.layerPointToLatLng(this._point.add(r)))},setStyle:je.prototype.setStyle,_project:function(){var r,f,U,ut,Et,ae=this._latlng.lng,qe=this._latlng.lat,Xe=this._map,ki=Xe.options.crs;ki.distance===pt.distance?(ut=Math.PI/180,r=Xe.project([qe+(Et=this._mRadius/pt.R/ut),ae]),f=Xe.project([qe-Et,ae]),f=r.add(f).divideBy(2),U=Xe.unproject(f).lat,ut=Math.acos((Math.cos(Et*ut)-Math.sin(qe*ut)*Math.sin(U*ut))/(Math.cos(qe*ut)*Math.cos(U*ut)))/ut,!isNaN(ut)&&0!==ut||(ut=Et/Math.cos(Math.PI/180*qe)),this._point=f.subtract(Xe.getPixelOrigin()),this._radius=isNaN(ut)?0:f.x-Xe.project([U,ae-ut]).x,this._radiusY=f.y-r.y):(Et=ki.unproject(ki.project(this._latlng).subtract([this._mRadius,0])),this._point=Xe.latLngToLayerPoint(this._latlng),this._radius=this._point.x-Xe.latLngToLayerPoint(Et).x),this._updateBounds()}}),Li=je.extend({options:{smoothFactor:1,noClip:!1},initialize:function(r,f){R(this,f),this._setLatLngs(r)},getLatLngs:function(){return this._latlngs},setLatLngs:function(r){return this._setLatLngs(r),this.redraw()},isEmpty:function(){return!this._latlngs.length},closestLayerPoint:function(r){for(var f=1/0,U=null,ut=ra,Et=0,ae=this._parts.length;Et<ae;Et++)for(var qe=this._parts[Et],Xe=1,ki=qe.length;Xe<ki;Xe++){var Ci,Sn,no=ut(r,Ci=qe[Xe-1],Sn=qe[Xe],!0);no<f&&(f=no,U=ut(r,Ci,Sn))}return U&&(U.distance=Math.sqrt(f)),U},getCenter:function(){if(this._map)return Ro(this._defaultShape(),this._map.options.crs);throw new Error("Must add layer to map before using getCenter()")},getBounds:function(){return this._bounds},addLatLng:function(r,f){return f=f||this._defaultShape(),r=q(r),f.push(r),this._bounds.extend(r),this.redraw()},_setLatLngs:function(r){this._bounds=new ft,this._latlngs=this._convertLatLngs(r)},_defaultShape:function(){return rr(this._latlngs)?this._latlngs:this._latlngs[0]},_convertLatLngs:function(r){for(var f=[],U=rr(r),ut=0,Et=r.length;ut<Et;ut++)U?(f[ut]=q(r[ut]),this._bounds.extend(f[ut])):f[ut]=this._convertLatLngs(r[ut]);return f},_project:function(){var r=new H;this._rings=[],this._projectLatlngs(this._latlngs,this._rings,r),this._bounds.isValid()&&r.isValid()&&(this._rawPxBounds=r,this._updateBounds())},_updateBounds:function(){var r=new y(r=this._clickTolerance(),r);this._rawPxBounds&&(this._pxBounds=new H([this._rawPxBounds.min.subtract(r),this._rawPxBounds.max.add(r)]))},_projectLatlngs:function(r,f,U){var ut,Et,qe=r.length;if(r[0]instanceof z){for(Et=[],ut=0;ut<qe;ut++)Et[ut]=this._map.latLngToLayerPoint(r[ut]),U.extend(Et[ut]);f.push(Et)}else for(ut=0;ut<qe;ut++)this._projectLatlngs(r[ut],f,U)},_clipPoints:function(){var r=this._renderer._bounds;if(this._parts=[],this._pxBounds&&this._pxBounds.intersects(r))if(this.options.noClip)this._parts=this._rings;else for(var f,U,ut,Et,ae=this._parts,qe=0,Xe=0,ki=this._rings.length;qe<ki;qe++)for(f=0,U=(Et=this._rings[qe]).length;f<U-1;f++)(ut=is(Et[f],Et[f+1],r,f,!0))&&(ae[Xe]=ae[Xe]||[],ae[Xe].push(ut[0]),ut[1]===Et[f+1]&&f!==U-2||(ae[Xe].push(ut[1]),Xe++))},_simplifyPoints:function(){for(var r=this._parts,f=this.options.smoothFactor,U=0,ut=r.length;U<ut;U++)r[U]=Jo(r[U],f)},_update:function(){this._map&&(this._clipPoints(),this._simplifyPoints(),this._updatePath())},_updatePath:function(){this._renderer._updatePoly(this)},_containsPoint:function(r,f){var U,ut,Et,ae,qe,Xe,ki=this._clickTolerance();if(this._pxBounds&&this._pxBounds.contains(r))for(U=0,ae=this._parts.length;U<ae;U++)for(ut=0,Et=(qe=(Xe=this._parts[U]).length)-1;ut<qe;Et=ut++)if((f||0!==ut)&&Ps(r,Xe[Et],Xe[ut])<=ki)return!0;return!1}});Li._flat=Lo;var ci=Li.extend({options:{fill:!0},isEmpty:function(){return!this._latlngs.length||!this._latlngs[0].length},getCenter:function(){if(this._map)return ks(this._defaultShape(),this._map.options.crs);throw new Error("Must add layer to map before using getCenter()")},_convertLatLngs:function(f){var U=(f=Li.prototype._convertLatLngs.call(this,f)).length;return 2<=U&&f[0]instanceof z&&f[0].equals(f[U-1])&&f.pop(),f},_setLatLngs:function(r){Li.prototype._setLatLngs.call(this,r),rr(this._latlngs)&&(this._latlngs=[this._latlngs])},_defaultShape:function(){return(rr(this._latlngs[0])?this._latlngs:this._latlngs[0])[0]},_clipPoints:function(){var f=this._renderer._bounds,r=new y(r=this.options.weight,r);if(f=new H(f.min.subtract(r),f.max.add(r)),this._parts=[],this._pxBounds&&this._pxBounds.intersects(f))if(this.options.noClip)this._parts=this._rings;else for(var U,ut=0,Et=this._rings.length;ut<Et;ut++)(U=Lr(this._rings[ut],f,!0)).length&&this._parts.push(U)},_updatePath:function(){this._renderer._updatePoly(this,!0)},_containsPoint:function(r){var f,U,ut,Et,ae,qe,Xe,ki,Ci=!1;if(!this._pxBounds||!this._pxBounds.contains(r))return!1;for(Et=0,Xe=this._parts.length;Et<Xe;Et++)for(ae=0,qe=(ki=(f=this._parts[Et]).length)-1;ae<ki;qe=ae++)(U=f[ae]).y>r.y!=(ut=f[qe]).y>r.y&&r.x<(ut.x-U.x)*(r.y-U.y)/(ut.y-U.y)+U.x&&(Ci=!Ci);return Ci||Li.prototype._containsPoint.call(this,r,!0)}}),ui=St.extend({initialize:function(r,f){R(this,f),this._layers={},r&&this.addData(r)},addData:function(r){var f,U,ut,Et=T(r)?r:r.features;if(Et){for(f=0,U=Et.length;f<U;f++)((ut=Et[f]).geometries||ut.geometry||ut.features||ut.coordinates)&&this.addData(ut);return this}var ae,qe=this.options;return qe.filter&&!qe.filter(r)||!(ae=an(r,qe))?this:(ae.feature=io(r),ae.defaultOptions=ae.options,this.resetStyle(ae),qe.onEachFeature&&qe.onEachFeature(r,ae),this.addLayer(ae))},resetStyle:function(r){return void 0===r?this.eachLayer(this.resetStyle,this):(r.options=te({},r.defaultOptions),this._setLayerStyle(r,this.options.style),this)},setStyle:function(r){return this.eachLayer(function(f){this._setLayerStyle(f,r)},this)},_setLayerStyle:function(r,f){r.setStyle&&("function"==typeof f&&(f=f(r.feature)),r.setStyle(f))}});function an(r,f){var U,ut,Et,ae,qe="Feature"===r.type?r.geometry:r,Xe=qe?qe.coordinates:null,ki=[],Ci=f&&f.pointToLayer,Sn=f&&f.coordsToLatLng||bn;if(!Xe&&!qe)return null;switch(qe.type){case"Point":return cn(Ci,r,U=Sn(Xe),f);case"MultiPoint":for(Et=0,ae=Xe.length;Et<ae;Et++)U=Sn(Xe[Et]),ki.push(cn(Ci,r,U,f));return new St(ki);case"LineString":case"MultiLineString":return ut=Qo(Xe,"LineString"===qe.type?0:1,Sn),new Li(ut,f);case"Polygon":case"MultiPolygon":return ut=Qo(Xe,"Polygon"===qe.type?1:2,Sn),new ci(ut,f);case"GeometryCollection":for(Et=0,ae=qe.geometries.length;Et<ae;Et++){var no=an({geometry:qe.geometries[Et],type:"Feature",properties:r.properties},f);no&&ki.push(no)}return new St(ki);case"FeatureCollection":for(Et=0,ae=qe.features.length;Et<ae;Et++){var wo=an(qe.features[Et],f);wo&&ki.push(wo)}return new St(ki);default:throw new Error("Invalid GeoJSON object.")}}function cn(r,f,U,ut){return r?r(f,U):new Be(U,ut&&ut.markersInheritOptions&&ut)}function bn(r){return new z(r[1],r[0],r[2])}function Qo(r,f,U){for(var ut,Et=[],ae=0,qe=r.length;ae<qe;ae++)ut=f?Qo(r[ae],f-1,U):(U||bn)(r[ae]),Et.push(ut);return Et}function wr(r,f){return void 0!==(r=q(r)).alt?[K(r.lng,f),K(r.lat,f),K(r.alt,f)]:[K(r.lng,f),K(r.lat,f)]}function $r(r,f,U,ut){for(var Et=[],ae=0,qe=r.length;ae<qe;ae++)Et.push(f?$r(r[ae],rr(r[ae])?0:f-1,U,ut):wr(r[ae],ut));return!f&&U&&Et.push(Et[0].slice()),Et}function Io(r,f){return r.feature?te({},r.feature,{geometry:f}):io(f)}function io(r){return"Feature"===r.type||"FeatureCollection"===r.type?r:{type:"Feature",properties:{},geometry:r}}function Ir(r,f){return new ui(r,f)}Be.include(We={toGeoJSON:function(r){return Io(this,{type:"Point",coordinates:wr(this.getLatLng(),r)})}}),vi.include(We),ei.include(We),Li.include({toGeoJSON:function(r){var f=!rr(this._latlngs);return Io(this,{type:(f?"Multi":"")+"LineString",coordinates:$r(this._latlngs,f?1:0,!1,r)})}}),ci.include({toGeoJSON:function(ut){var f=!rr(this._latlngs),U=f&&!rr(this._latlngs[0]);return ut=$r(this._latlngs,U?2:f?1:0,!0,ut),Io(this,{type:(U?"Multi":"")+"Polygon",coordinates:ut=f?ut:[ut]})}}),yt.include({toMultiPoint:function(r){var f=[];return this.eachLayer(function(U){f.push(U.toGeoJSON(r).geometry.coordinates)}),Io(this,{type:"MultiPoint",coordinates:f})},toGeoJSON:function(r){var f,U,ut=this.feature&&this.feature.geometry&&this.feature.geometry.type;return"MultiPoint"===ut?this.toMultiPoint(r):(f="GeometryCollection"===ut,U=[],this.eachLayer(function(Et){Et.toGeoJSON&&(Et=Et.toGeoJSON(r),f?U.push(Et.geometry):"FeatureCollection"===(Et=io(Et)).type?U.push.apply(U,Et.features):U.push(Et))}),f?Io(this,{geometries:U,type:"GeometryCollection"}):{type:"FeatureCollection",features:U})}}),Ao=Ir;var er=tt.extend({options:{opacity:1,alt:"",interactive:!1,crossOrigin:!1,errorOverlayUrl:"",zIndex:1,className:""},initialize:function(r,f,U){this._url=r,this._bounds=rt(f),R(this,U)},onAdd:function(){this._image||(this._initImage(),this.options.opacity<1&&this._updateOpacity()),this.options.interactive&&(kn(this._image,"leaflet-interactive"),this.addInteractiveTarget(this._image)),this.getPane().appendChild(this._image),this._reset()},onRemove:function(){ko(this._image),this.options.interactive&&this.removeInteractiveTarget(this._image)},setOpacity:function(r){return this.options.opacity=r,this._image&&this._updateOpacity(),this},setStyle:function(r){return r.opacity&&this.setOpacity(r.opacity),this},bringToFront:function(){return this._map&&dr(this._image),this},bringToBack:function(){return this._map&&gr(this._image),this},setUrl:function(r){return this._url=r,this._image&&(this._image.src=r),this},setBounds:function(r){return this._bounds=rt(r),this._map&&this._reset(),this},getEvents:function(){var r={zoom:this._reset,viewreset:this._reset};return this._zoomAnimated&&(r.zoomanim=this._animateZoom),r},setZIndex:function(r){return this.options.zIndex=r,this._updateZIndex(),this},getBounds:function(){return this._bounds},getElement:function(){return this._image},_initImage:function(){var r="IMG"===this._url.tagName,f=this._image=r?this._url:po("img");kn(f,"leaflet-image-layer"),this._zoomAnimated&&kn(f,"leaflet-zoom-animated"),this.options.className&&kn(f,this.options.className),f.onselectstart=It,f.onmousemove=It,f.onload=xt(this.fire,this,"load"),f.onerror=xt(this._overlayOnError,this,"error"),!this.options.crossOrigin&&""!==this.options.crossOrigin||(f.crossOrigin=!0===this.options.crossOrigin?"":this.options.crossOrigin),this.options.zIndex&&this._updateZIndex(),r?this._url=f.src:(f.src=this._url,f.alt=this.options.alt)},_animateZoom:function(U){var f=this._map.getZoomScale(U.zoom);U=this._map._latLngBoundsToNewLayerBounds(this._bounds,U.zoom,U.center).min,Ce(this._image,U,f)},_reset:function(){var r=this._image,f=new H(this._map.latLngToLayerPoint(this._bounds.getNorthWest()),this._map.latLngToLayerPoint(this._bounds.getSouthEast())),U=f.getSize();De(r,f.min),r.style.width=U.x+"px",r.style.height=U.y+"px"},_updateOpacity:function(){Jt(this._image,this.options.opacity)},_updateZIndex:function(){this._image&&null!=this.options.zIndex&&(this._image.style.zIndex=this.options.zIndex)},_overlayOnError:function(){this.fire("error");var r=this.options.errorOverlayUrl;r&&this._url!==r&&(this._url=r,this._image.src=r)},getCenter:function(){return this._bounds.getCenter()}}),aa=er.extend({options:{autoplay:!0,loop:!0,keepAspectRatio:!0,muted:!1,playsInline:!0},_initImage:function(){var r="VIDEO"===this._url.tagName,f=this._image=r?this._url:po("video");if(kn(f,"leaflet-image-layer"),this._zoomAnimated&&kn(f,"leaflet-zoom-animated"),this.options.className&&kn(f,this.options.className),f.onselectstart=It,f.onmousemove=It,f.onloadeddata=xt(this.fire,this,"load"),r){for(var U=f.getElementsByTagName("source"),ut=[],Et=0;Et<U.length;Et++)ut.push(U[Et].src);this._url=0<U.length?ut:[f.src]}else{T(this._url)||(this._url=[this._url]),!this.options.keepAspectRatio&&Object.prototype.hasOwnProperty.call(f.style,"objectFit")&&(f.style.objectFit="fill"),f.autoplay=!!this.options.autoplay,f.loop=!!this.options.loop,f.muted=!!this.options.muted,f.playsInline=!!this.options.playsInline;for(var ae=0;ae<this._url.length;ae++){var qe=po("source");qe.src=this._url[ae],f.appendChild(qe)}}}}),ga=er.extend({_initImage:function(){var r=this._image=this._url;kn(r,"leaflet-image-layer"),this._zoomAnimated&&kn(r,"leaflet-zoom-animated"),this.options.className&&kn(r,this.options.className),r.onselectstart=It,r.onmousemove=It}}),hr=tt.extend({options:{interactive:!1,offset:[0,0],className:"",pane:void 0,content:""},initialize:function(r,f){r&&(r instanceof z||T(r))?(this._latlng=q(r),R(this,f)):(R(this,r),this._source=f),this.options.content&&(this._content=this.options.content)},openOn:function(r){return(r=arguments.length?r:this._source._map).hasLayer(this)||r.addLayer(this),this},close:function(){return this._map&&this._map.removeLayer(this),this},toggle:function(r){return this._map?this.close():(arguments.length?this._source=r:r=this._source,this._prepareOpen(),this.openOn(r._map)),this},onAdd:function(r){this._zoomAnimated=r._zoomAnimated,this._container||this._initLayout(),r._fadeAnimated&&Jt(this._container,0),clearTimeout(this._removeTimeout),this.getPane().appendChild(this._container),this.update(),r._fadeAnimated&&Jt(this._container,1),this.bringToFront(),this.options.interactive&&(kn(this._container,"leaflet-interactive"),this.addInteractiveTarget(this._container))},onRemove:function(r){r._fadeAnimated?(Jt(this._container,0),this._removeTimeout=setTimeout(xt(ko,void 0,this._container),200)):ko(this._container),this.options.interactive&&(En(this._container,"leaflet-interactive"),this.removeInteractiveTarget(this._container))},getLatLng:function(){return this._latlng},setLatLng:function(r){return this._latlng=q(r),this._map&&(this._updatePosition(),this._adjustPan()),this},getContent:function(){return this._content},setContent:function(r){return this._content=r,this.update(),this},getElement:function(){return this._container},update:function(){this._map&&(this._container.style.visibility="hidden",this._updateContent(),this._updateLayout(),this._updatePosition(),this._container.style.visibility="",this._adjustPan())},getEvents:function(){var r={zoom:this._updatePosition,viewreset:this._updatePosition};return this._zoomAnimated&&(r.zoomanim=this._animateZoom),r},isOpen:function(){return!!this._map&&this._map.hasLayer(this)},bringToFront:function(){return this._map&&dr(this._container),this},bringToBack:function(){return this._map&&gr(this._container),this},_prepareOpen:function(r){if(!(U=this._source)._map)return!1;if(U instanceof St){var f,U=null,ut=this._source._layers;for(f in ut)if(ut[f]._map){U=ut[f];break}if(!U)return!1;this._source=U}if(!r)if(U.getCenter)r=U.getCenter();else if(U.getLatLng)r=U.getLatLng();else{if(!U.getBounds)throw new Error("Unable to get source layer LatLng.");r=U.getBounds().getCenter()}return this.setLatLng(r),this._map&&this.update(),!0},_updateContent:function(){if(this._content){var r=this._contentNode,f="function"==typeof this._content?this._content(this._source||this):this._content;if("string"==typeof f)r.innerHTML=f;else{for(;r.hasChildNodes();)r.removeChild(r.firstChild);r.appendChild(f)}this.fire("contentupdate")}},_updatePosition:function(){var r,f,U;this._map&&(f=this._map.latLngToLayerPoint(this._latlng),r=B(this.options.offset),U=this._getAnchor(),this._zoomAnimated?De(this._container,f.add(U)):r=r.add(f).add(U),f=this._containerBottom=-r.y,U=this._containerLeft=-Math.round(this._containerWidth/2)+r.x,this._container.style.bottom=f+"px",this._container.style.left=U+"px")},_getAnchor:function(){return[0,0]}}),Jr=(gn.include({_initOverlay:function(r,f,U,ut){var Et=f;return Et instanceof r||(Et=new r(ut).setContent(f)),U&&Et.setLatLng(U),Et}}),tt.include({_initOverlay:function(r,f,U,ut){var Et=U;return Et instanceof r?(R(Et,ut),Et._source=this):(Et=f&&!ut?f:new r(ut,this)).setContent(U),Et}}),hr.extend({options:{pane:"popupPane",offset:[0,7],maxWidth:300,minWidth:50,maxHeight:null,autoPan:!0,autoPanPaddingTopLeft:null,autoPanPaddingBottomRight:null,autoPanPadding:[5,5],keepInView:!1,closeButton:!0,autoClose:!0,closeOnEscapeKey:!0,className:""},openOn:function(r){return!(r=arguments.length?r:this._source._map).hasLayer(this)&&r._popup&&r._popup.options.autoClose&&r.removeLayer(r._popup),r._popup=this,hr.prototype.openOn.call(this,r)},onAdd:function(r){hr.prototype.onAdd.call(this,r),r.fire("popupopen",{popup:this}),this._source&&(this._source.fire("popupopen",{popup:this},!0),this._source instanceof je||this._source.on("preclick",Nn))},onRemove:function(r){hr.prototype.onRemove.call(this,r),r.fire("popupclose",{popup:this}),this._source&&(this._source.fire("popupclose",{popup:this},!0),this._source instanceof je||this._source.off("preclick",Nn))},getEvents:function(){var r=hr.prototype.getEvents.call(this);return(void 0!==this.options.closeOnClick?this.options.closeOnClick:this._map.options.closePopupOnClick)&&(r.preclick=this.close),this.options.keepInView&&(r.moveend=this._adjustPan),r},_initLayout:function(){var r="leaflet-popup",f=this._container=po("div",r+" "+(this.options.className||"")+" leaflet-zoom-animated"),U=this._wrapper=po("div",r+"-content-wrapper",f);this._contentNode=po("div",r+"-content",U),so(f),Vi(this._contentNode),hi(f,"contextmenu",Nn),this._tipContainer=po("div",r+"-tip-container",f),this._tip=po("div",r+"-tip",this._tipContainer),this.options.closeButton&&((U=this._closeButton=po("a",r+"-close-button",f)).setAttribute("role","button"),U.setAttribute("aria-label","Close popup"),U.href="#close",U.innerHTML='<span aria-hidden="true">&#215;</span>',hi(U,"click",function(ut){Hn(ut),this.close()},this))},_updateLayout:function(){var r=this._contentNode,f=r.style,U=(f.width="",f.whiteSpace="nowrap",r.offsetWidth),ut=(U=Math.min(U,this.options.maxWidth),U=Math.max(U,this.options.minWidth),f.width=U+1+"px",f.whiteSpace="",f.height="",U=r.offsetHeight,this.options.maxHeight);(ut&&ut<U?(f.height=ut+"px",kn):En)(r,"leaflet-popup-scrolled"),this._containerWidth=this._container.offsetWidth},_animateZoom:function(f){f=this._map._latLngToNewLayerPoint(this._latlng,f.zoom,f.center);var U=this._getAnchor();De(this._container,f.add(U))},_adjustPan:function(){var r,f,U,ut,Et,ae,qe,Xe;this.options.autoPan&&(this._map._panAnim&&this._map._panAnim.stop(),this._autopanning?this._autopanning=!1:(r=this._map,f=parseInt(No(this._container,"marginBottom"),10)||0,Xe=this._containerWidth,(U=new y(this._containerLeft,-(f=this._container.offsetHeight+f)-this._containerBottom))._add(Ge(this._container)),U=r.layerPointToContainerPoint(U),Et=B(this.options.autoPanPadding),ut=B(this.options.autoPanPaddingTopLeft||Et),Et=B(this.options.autoPanPaddingBottomRight||Et),ae=r.getSize(),qe=0,U.x+Xe+Et.x>ae.x&&(qe=U.x+Xe-ae.x+Et.x),U.x-qe-ut.x<(Xe=0)&&(qe=U.x-ut.x),U.y+f+Et.y>ae.y&&(Xe=U.y+f-ae.y+Et.y),U.y-Xe-ut.y<0&&(Xe=U.y-ut.y),(qe||Xe)&&(this.options.keepInView&&(this._autopanning=!0),r.fire("autopanstart").panBy([qe,Xe]))))},_getAnchor:function(){return B(this._source&&this._source._getPopupAnchor?this._source._getPopupAnchor():[0,0])}})),js=(gn.mergeOptions({closePopupOnClick:!0}),gn.include({openPopup:function(r,f,U){return this._initOverlay(Jr,r,f,U).openOn(this),this},closePopup:function(r){return(r=arguments.length?r:this._popup)&&r.close(),this}}),tt.include({bindPopup:function(r,f){return this._popup=this._initOverlay(Jr,this._popup,r,f),this._popupHandlersAdded||(this.on({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!0),this},unbindPopup:function(){return this._popup&&(this.off({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!1,this._popup=null),this},openPopup:function(r){return this._popup&&(this instanceof St||(this._popup._source=this),this._popup._prepareOpen(r||this._latlng)&&this._popup.openOn(this._map)),this},closePopup:function(){return this._popup&&this._popup.close(),this},togglePopup:function(){return this._popup&&this._popup.toggle(this),this},isPopupOpen:function(){return!!this._popup&&this._popup.isOpen()},setPopupContent:function(r){return this._popup&&this._popup.setContent(r),this},getPopup:function(){return this._popup},_openPopup:function(r){var f;this._popup&&this._map&&(Gn(r),this._popup._source!==(f=r.layer||r.target)||f instanceof je?(this._popup._source=f,this.openPopup(r.latlng)):this._map.hasLayer(this._popup)?this.closePopup():this.openPopup(r.latlng))},_movePopup:function(r){this._popup.setLatLng(r.latlng)},_onKeyPress:function(r){13===r.originalEvent.keyCode&&this._openPopup(r)}}),hr.extend({options:{pane:"tooltipPane",offset:[0,0],direction:"auto",permanent:!1,sticky:!1,opacity:.9},onAdd:function(r){hr.prototype.onAdd.call(this,r),this.setOpacity(this.options.opacity),r.fire("tooltipopen",{tooltip:this}),this._source&&(this.addEventParent(this._source),this._source.fire("tooltipopen",{tooltip:this},!0))},onRemove:function(r){hr.prototype.onRemove.call(this,r),r.fire("tooltipclose",{tooltip:this}),this._source&&(this.removeEventParent(this._source),this._source.fire("tooltipclose",{tooltip:this},!0))},getEvents:function(){var r=hr.prototype.getEvents.call(this);return this.options.permanent||(r.preclick=this.close),r},_initLayout:function(){this._contentNode=this._container=po("div","leaflet-tooltip "+(this.options.className||"")+" leaflet-zoom-"+(this._zoomAnimated?"animated":"hide")),this._container.setAttribute("role","tooltip"),this._container.setAttribute("id","leaflet-tooltip-"+zt(this))},_updateLayout:function(){},_adjustPan:function(){},_setPosition:function(r){var f,U=this._container,ut=(Ci=this._map).latLngToContainerPoint(Ci.getCenter()),Ci=Ci.layerPointToContainerPoint(r),Et=this.options.direction,ae=U.offsetWidth,qe=U.offsetHeight,Xe=B(this.options.offset),ki=this._getAnchor();Ci="top"===Et?(f=ae/2,qe):"bottom"===Et?(f=ae/2,0):(f="center"===Et?ae/2:"right"===Et?0:"left"===Et?ae:Ci.x<ut.x?(Et="right",0):(Et="left",ae+2*(Xe.x+ki.x)),qe/2),r=r.subtract(B(f,Ci,!0)).add(Xe).add(ki),En(U,"leaflet-tooltip-right"),En(U,"leaflet-tooltip-left"),En(U,"leaflet-tooltip-top"),En(U,"leaflet-tooltip-bottom"),kn(U,"leaflet-tooltip-"+Et),De(U,r)},_updatePosition:function(){var r=this._map.latLngToLayerPoint(this._latlng);this._setPosition(r)},setOpacity:function(r){this.options.opacity=r,this._container&&Jt(this._container,r)},_animateZoom:function(r){r=this._map._latLngToNewLayerPoint(this._latlng,r.zoom,r.center),this._setPosition(r)},_getAnchor:function(){return B(this._source&&this._source._getTooltipAnchor&&!this.options.sticky?this._source._getTooltipAnchor():[0,0])}})),Ho=(gn.include({openTooltip:function(r,f,U){return this._initOverlay(js,r,f,U).openOn(this),this},closeTooltip:function(r){return r.close(),this}}),tt.include({bindTooltip:function(r,f){return this._tooltip&&this.isTooltipOpen()&&this.unbindTooltip(),this._tooltip=this._initOverlay(js,this._tooltip,r,f),this._initTooltipInteractions(),this._tooltip.options.permanent&&this._map&&this._map.hasLayer(this)&&this.openTooltip(),this},unbindTooltip:function(){return this._tooltip&&(this._initTooltipInteractions(!0),this.closeTooltip(),this._tooltip=null),this},_initTooltipInteractions:function(r){var f,U;!r&&this._tooltipHandlersAdded||(f=r?"off":"on",U={remove:this.closeTooltip,move:this._moveTooltip},this._tooltip.options.permanent?U.add=this._openTooltip:(U.mouseover=this._openTooltip,U.mouseout=this.closeTooltip,U.click=this._openTooltip,this._map?this._addFocusListeners():U.add=this._addFocusListeners),this._tooltip.options.sticky&&(U.mousemove=this._moveTooltip),this[f](U),this._tooltipHandlersAdded=!r)},openTooltip:function(r){return this._tooltip&&(this instanceof St||(this._tooltip._source=this),this._tooltip._prepareOpen(r)&&(this._tooltip.openOn(this._map),this.getElement?this._setAriaDescribedByOnLayer(this):this.eachLayer&&this.eachLayer(this._setAriaDescribedByOnLayer,this))),this},closeTooltip:function(){if(this._tooltip)return this._tooltip.close()},toggleTooltip:function(){return this._tooltip&&this._tooltip.toggle(this),this},isTooltipOpen:function(){return this._tooltip.isOpen()},setTooltipContent:function(r){return this._tooltip&&this._tooltip.setContent(r),this},getTooltip:function(){return this._tooltip},_addFocusListeners:function(){this.getElement?this._addFocusListenersOnLayer(this):this.eachLayer&&this.eachLayer(this._addFocusListenersOnLayer,this)},_addFocusListenersOnLayer:function(r){var f=r.getElement();f&&(hi(f,"focus",function(){this._tooltip._source=r,this.openTooltip()},this),hi(f,"blur",this.closeTooltip,this))},_setAriaDescribedByOnLayer:function(r){(r=r.getElement())&&r.setAttribute("aria-describedby",this._tooltip._container.id)},_openTooltip:function(r){!this._tooltip||!this._map||this._map.dragging&&this._map.dragging.moving()||(this._tooltip._source=r.layer||r.target,this.openTooltip(this._tooltip.options.sticky?r.latlng:void 0))},_moveTooltip:function(r){var f=r.latlng;this._tooltip.options.sticky&&r.originalEvent&&(r=this._map.mouseEventToContainerPoint(r.originalEvent),r=this._map.containerPointToLayerPoint(r),f=this._map.layerPointToLatLng(r)),this._tooltip.setLatLng(f)}}),Zt.extend({options:{iconSize:[12,12],html:!1,bgPos:null,className:"leaflet-div-icon"},createIcon:function(f){f=f&&"DIV"===f.tagName?f:document.createElement("div");var U=this.options;return U.html instanceof Element?(Kr(f),f.appendChild(U.html)):f.innerHTML=!1!==U.html?U.html:"",U.bgPos&&(U=B(U.bgPos),f.style.backgroundPosition=-U.x+"px "+-U.y+"px"),this._setIconStyles(f,"icon"),f},createShadow:function(){return null}}));Zt.Default=ne;var Qr=tt.extend({options:{tileSize:256,opacity:1,updateWhenIdle:ye.mobile,updateWhenZooming:!0,updateInterval:200,zIndex:1,bounds:null,minZoom:0,maxZoom:void 0,maxNativeZoom:void 0,minNativeZoom:void 0,noWrap:!1,pane:"tilePane",className:"",keepBuffer:2},initialize:function(r){R(this,r)},onAdd:function(){this._initContainer(),this._levels={},this._tiles={},this._resetView()},beforeAdd:function(r){r._addZoomLimit(this)},onRemove:function(r){this._removeAllTiles(),ko(this._container),r._removeZoomLimit(this),this._container=null,this._tileZoom=void 0},bringToFront:function(){return this._map&&(dr(this._container),this._setAutoZIndex(Math.max)),this},bringToBack:function(){return this._map&&(gr(this._container),this._setAutoZIndex(Math.min)),this},getContainer:function(){return this._container},setOpacity:function(r){return this.options.opacity=r,this._updateOpacity(),this},setZIndex:function(r){return this.options.zIndex=r,this._updateZIndex(),this},isLoading:function(){return this._loading},redraw:function(){var r;return this._map&&(this._removeAllTiles(),(r=this._clampZoom(this._map.getZoom()))!==this._tileZoom&&(this._tileZoom=r,this._updateLevels()),this._update()),this},getEvents:function(){var r={viewprereset:this._invalidateAll,viewreset:this._resetView,zoom:this._resetView,moveend:this._onMoveEnd};return this.options.updateWhenIdle||(this._onMove||(this._onMove=Ut(this._onMoveEnd,this.options.updateInterval,this)),r.move=this._onMove),this._zoomAnimated&&(r.zoomanim=this._animateZoom),r},createTile:function(){return document.createElement("div")},getTileSize:function(){var r=this.options.tileSize;return r instanceof y?r:new y(r,r)},_updateZIndex:function(){this._container&&null!=this.options.zIndex&&(this._container.style.zIndex=this.options.zIndex)},_setAutoZIndex:function(r){for(var f,U=this.getPane().children,ut=-r(-1/0,1/0),Et=0,ae=U.length;Et<ae;Et++)f=U[Et].style.zIndex,U[Et]!==this._container&&f&&(ut=r(ut,+f));isFinite(ut)&&(this.options.zIndex=ut+r(-1,1),this._updateZIndex())},_updateOpacity:function(){if(this._map&&!ye.ielt9){Jt(this._container,this.options.opacity);var r,f=+new Date,U=!1,ut=!1;for(r in this._tiles){var Et,ae=this._tiles[r];ae.current&&ae.loaded&&(Et=Math.min(1,(f-ae.loaded)/200),Jt(ae.el,Et),Et<1?U=!0:(ae.active?ut=!0:this._onOpaqueTile(ae),ae.active=!0))}ut&&!this._noPrune&&this._pruneTiles(),U&&(v(this._fadeFrame),this._fadeFrame=G(this._updateOpacity,this))}},_onOpaqueTile:It,_initContainer:function(){this._container||(this._container=po("div","leaflet-layer "+(this.options.className||"")),this._updateZIndex(),this.options.opacity<1&&this._updateOpacity(),this.getPane().appendChild(this._container))},_updateLevels:function(){var r=this._tileZoom,f=this.options.maxZoom;if(void 0!==r){for(var U in this._levels)U=Number(U),this._levels[U].el.children.length||U===r?(this._levels[U].el.style.zIndex=f-Math.abs(r-U),this._onUpdateLevel(U)):(ko(this._levels[U].el),this._removeTilesAtZoom(U),this._onRemoveLevel(U),delete this._levels[U]);var ut=this._levels[r],Et=this._map;return ut||((ut=this._levels[r]={}).el=po("div","leaflet-tile-container leaflet-zoom-animated",this._container),ut.el.style.zIndex=f,ut.origin=Et.project(Et.unproject(Et.getPixelOrigin()),r).round(),ut.zoom=r,this._setZoomTransform(ut,Et.getCenter(),Et.getZoom()),this._onCreateLevel(ut)),this._level=ut}},_onUpdateLevel:It,_onRemoveLevel:It,_onCreateLevel:It,_pruneTiles:function(){if(this._map){var r,f,U,ut=this._map.getZoom();if(ut>this.options.maxZoom||ut<this.options.minZoom)this._removeAllTiles();else{for(r in this._tiles)(U=this._tiles[r]).retain=U.current;for(r in this._tiles)(U=this._tiles[r]).current&&!U.active&&(this._retainParent((f=U.coords).x,f.y,f.z,f.z-5)||this._retainChildren(f.x,f.y,f.z,f.z+2));for(r in this._tiles)this._tiles[r].retain||this._removeTile(r)}}},_removeTilesAtZoom:function(r){for(var f in this._tiles)this._tiles[f].coords.z===r&&this._removeTile(f)},_removeAllTiles:function(){for(var r in this._tiles)this._removeTile(r)},_invalidateAll:function(){for(var r in this._levels)ko(this._levels[r].el),this._onRemoveLevel(Number(r)),delete this._levels[r];this._removeAllTiles(),this._tileZoom=void 0},_retainParent:function(Et,ae,qe,ut){qe-=1;var Xe=((Xe=new y(+(Et=Math.floor(Et/2)),+(ae=Math.floor(ae/2)))).z=qe,this._tileCoordsToKey(Xe));return(Xe=this._tiles[Xe])&&Xe.active?Xe.retain=!0:(Xe&&Xe.loaded&&(Xe.retain=!0),ut<qe&&this._retainParent(Et,ae,qe,ut))},_retainChildren:function(r,f,U,ut){for(var Et=2*r;Et<2*r+2;Et++)for(var ae=2*f;ae<2*f+2;ae++){var qe=((qe=new y(Et,ae)).z=U+1,this._tileCoordsToKey(qe));(qe=this._tiles[qe])&&qe.active?qe.retain=!0:(qe&&qe.loaded&&(qe.retain=!0),U+1<ut&&this._retainChildren(Et,ae,U+1,ut))}},_resetView:function(r){r=r&&(r.pinch||r.flyTo),this._setView(this._map.getCenter(),this._map.getZoom(),r,r)},_animateZoom:function(r){this._setView(r.center,r.zoom,!0,r.noUpdate)},_clampZoom:function(r){var f=this.options;return void 0!==f.minNativeZoom&&r<f.minNativeZoom?f.minNativeZoom:void 0!==f.maxNativeZoom&&f.maxNativeZoom<r?f.maxNativeZoom:r},_setView:function(r,f,U,ut){var Et=Math.round(f);Et=void 0!==this.options.maxZoom&&Et>this.options.maxZoom||void 0!==this.options.minZoom&&Et<this.options.minZoom?void 0:this._clampZoom(Et),ut&&!(this.options.updateWhenZooming&&Et!==this._tileZoom)||(this._tileZoom=Et,this._abortLoading&&this._abortLoading(),this._updateLevels(),this._resetGrid(),void 0!==Et&&this._update(r),U||this._pruneTiles(),this._noPrune=!!U),this._setZoomTransforms(r,f)},_setZoomTransforms:function(r,f){for(var U in this._levels)this._setZoomTransform(this._levels[U],r,f)},_setZoomTransform:function(r,Et,U){var ut=this._map.getZoomScale(U,r.zoom);Et=r.origin.multiplyBy(ut).subtract(this._map._getNewPixelOrigin(Et,U)).round(),ye.any3d?Ce(r.el,Et,ut):De(r.el,Et)},_resetGrid:function(){var r=this._map,f=r.options.crs,U=this._tileSize=this.getTileSize(),ut=this._tileZoom,Et=this._map.getPixelWorldBounds(this._tileZoom);Et&&(this._globalTileRange=this._pxBoundsToTileRange(Et)),this._wrapX=f.wrapLng&&!this.options.noWrap&&[Math.floor(r.project([0,f.wrapLng[0]],ut).x/U.x),Math.ceil(r.project([0,f.wrapLng[1]],ut).x/U.y)],this._wrapY=f.wrapLat&&!this.options.noWrap&&[Math.floor(r.project([f.wrapLat[0],0],ut).y/U.x),Math.ceil(r.project([f.wrapLat[1],0],ut).y/U.y)]},_onMoveEnd:function(){this._map&&!this._map._animatingZoom&&this._update()},_getTiledPixelBounds:function(U){var f=(ut=this._map)._animatingZoom?Math.max(ut._animateToZoom,ut.getZoom()):ut.getZoom(),ut=(f=ut.getZoomScale(f,this._tileZoom),U=ut.project(U,this._tileZoom).floor(),ut.getSize().divideBy(2*f));return new H(U.subtract(ut),U.add(ut))},_update:function(r){if(f=this._map){var U=this._clampZoom(f.getZoom());if(void 0===r&&(r=f.getCenter()),void 0!==this._tileZoom){var ut,f=this._getTiledPixelBounds(r),Et=this._pxBoundsToTileRange(f),ae=Et.getCenter(),qe=[],Xe=(f=this.options.keepBuffer,new H(Et.getBottomLeft().subtract([f,-f]),Et.getTopRight().add([f,-f])));if(!(isFinite(Et.min.x)&&isFinite(Et.min.y)&&isFinite(Et.max.x)&&isFinite(Et.max.y)))throw new Error("Attempted to load an infinite number of tiles");for(ut in this._tiles){var ki=this._tiles[ut].coords;ki.z===this._tileZoom&&Xe.contains(new y(ki.x,ki.y))||(this._tiles[ut].current=!1)}if(1<Math.abs(U-this._tileZoom))this._setView(r,U);else{for(var Ci=Et.min.y;Ci<=Et.max.y;Ci++)for(var Sn=Et.min.x;Sn<=Et.max.x;Sn++){var no,wo=new y(Sn,Ci);wo.z=this._tileZoom,this._isValidTile(wo)&&((no=this._tiles[this._tileCoordsToKey(wo)])?no.current=!0:qe.push(wo))}if(qe.sort(function(ns,Wr){return ns.distanceTo(ae)-Wr.distanceTo(ae)}),0!==qe.length){this._loading||(this._loading=!0,this.fire("loading"));var fr=document.createDocumentFragment();for(Sn=0;Sn<qe.length;Sn++)this._addTile(qe[Sn],fr);this._level.el.appendChild(fr)}}}}},_isValidTile:function(r){var f=this._map.options.crs;if(!f.infinite){var U=this._globalTileRange;if(!f.wrapLng&&(r.x<U.min.x||r.x>U.max.x)||!f.wrapLat&&(r.y<U.min.y||r.y>U.max.y))return!1}return!this.options.bounds||(f=this._tileCoordsToBounds(r),rt(this.options.bounds).overlaps(f))},_keyToBounds:function(r){return this._tileCoordsToBounds(this._keyToTileCoords(r))},_tileCoordsToNwSe:function(r){var f=this._map,ut=this.getTileSize(),U=r.scaleBy(ut);return ut=U.add(ut),[f.unproject(U,r.z),f.unproject(ut,r.z)]},_tileCoordsToBounds:function(r){return r=new ft((r=this._tileCoordsToNwSe(r))[0],r[1]),this.options.noWrap?r:this._map.wrapLatLngBounds(r)},_tileCoordsToKey:function(r){return r.x+":"+r.y+":"+r.z},_keyToTileCoords:function(f){var U=new y(+(f=f.split(":"))[0],+f[1]);return U.z=+f[2],U},_removeTile:function(r){var f=this._tiles[r];f&&(ko(f.el),delete this._tiles[r],this.fire("tileunload",{tile:f.el,coords:this._keyToTileCoords(r)}))},_initTile:function(r){kn(r,"leaflet-tile");var f=this.getTileSize();r.style.width=f.x+"px",r.style.height=f.y+"px",r.onselectstart=It,r.onmousemove=It,ye.ielt9&&this.options.opacity<1&&Jt(r,this.options.opacity)},_addTile:function(r,f){var U=this._getTilePos(r),ut=this._tileCoordsToKey(r),Et=this.createTile(this._wrapCoords(r),xt(this._tileReady,this,r));this._initTile(Et),this.createTile.length<2&&G(xt(this._tileReady,this,r,null,Et)),De(Et,U),this._tiles[ut]={el:Et,coords:r,current:!0},f.appendChild(Et),this.fire("tileloadstart",{tile:Et,coords:r})},_tileReady:function(r,f,U){f&&this.fire("tileerror",{error:f,tile:U,coords:r});var ut=this._tileCoordsToKey(r);(U=this._tiles[ut])&&(U.loaded=+new Date,this._map._fadeAnimated?(Jt(U.el,0),v(this._fadeFrame),this._fadeFrame=G(this._updateOpacity,this)):(U.active=!0,this._pruneTiles()),f||(kn(U.el,"leaflet-tile-loaded"),this.fire("tileload",{tile:U.el,coords:r})),this._noTilesToLoad()&&(this._loading=!1,this.fire("load"),ye.ielt9||!this._map._fadeAnimated?G(this._pruneTiles,this):setTimeout(xt(this._pruneTiles,this),250)))},_getTilePos:function(r){return r.scaleBy(this.getTileSize()).subtract(this._level.origin)},_wrapCoords:function(r){var f=new y(this._wrapX?Rt(r.x,this._wrapX):r.x,this._wrapY?Rt(r.y,this._wrapY):r.y);return f.z=r.z,f},_pxBoundsToTileRange:function(r){var f=this.getTileSize();return new H(r.min.unscaleBy(f).floor(),r.max.unscaleBy(f).ceil().subtract([1,1]))},_noTilesToLoad:function(){for(var r in this._tiles)if(!this._tiles[r].loaded)return!1;return!0}}),Xo=Qr.extend({options:{minZoom:0,maxZoom:18,subdomains:"abc",errorTileUrl:"",zoomOffset:0,tms:!1,zoomReverse:!1,detectRetina:!1,crossOrigin:!1,referrerPolicy:!1},initialize:function(r,f){this._url=r,(f=R(this,f)).detectRetina&&ye.retina&&0<f.maxZoom?(f.tileSize=Math.floor(f.tileSize/2),f.zoomReverse?(f.zoomOffset--,f.minZoom=Math.min(f.maxZoom,f.minZoom+1)):(f.zoomOffset++,f.maxZoom=Math.max(f.minZoom,f.maxZoom-1)),f.minZoom=Math.max(0,f.minZoom)):f.zoomReverse?f.minZoom=Math.min(f.maxZoom,f.minZoom):f.maxZoom=Math.max(f.minZoom,f.maxZoom),"string"==typeof f.subdomains&&(f.subdomains=f.subdomains.split("")),this.on("tileunload",this._onTileRemove)},setUrl:function(r,f){return this._url===r&&void 0===f&&(f=!0),this._url=r,f||this.redraw(),this},createTile:function(r,f){var U=document.createElement("img");return hi(U,"load",xt(this._tileOnLoad,this,f,U)),hi(U,"error",xt(this._tileOnError,this,f,U)),!this.options.crossOrigin&&""!==this.options.crossOrigin||(U.crossOrigin=!0===this.options.crossOrigin?"":this.options.crossOrigin),"string"==typeof this.options.referrerPolicy&&(U.referrerPolicy=this.options.referrerPolicy),U.alt="",U.src=this.getTileUrl(r),U},getTileUrl:function(r){var f={r:ye.retina?"@2x":"",s:this._getSubdomain(r),x:r.x,y:r.y,z:this._getZoomForUrl()};return this._map&&!this._map.options.crs.infinite&&(r=this._globalTileRange.max.y-r.y,this.options.tms&&(f.y=r),f["-y"]=r),x(this._url,te(f,this.options))},_tileOnLoad:function(r,f){ye.ielt9?setTimeout(xt(r,this,null,f),0):r(null,f)},_tileOnError:function(r,f,U){var ut=this.options.errorTileUrl;ut&&f.getAttribute("src")!==ut&&(f.src=ut),r(U,f)},_onTileRemove:function(r){r.tile.onload=null},_getZoomForUrl:function(){var r=this._tileZoom;return(r=this.options.zoomReverse?this.options.maxZoom-r:r)+this.options.zoomOffset},_getSubdomain:function(r){return r=Math.abs(r.x+r.y)%this.options.subdomains.length,this.options.subdomains[r]},_abortLoading:function(){var r,f,U;for(r in this._tiles)this._tiles[r].coords.z!==this._tileZoom&&((U=this._tiles[r].el).onload=It,U.onerror=It,U.complete||(U.src=V,f=this._tiles[r].coords,ko(U),delete this._tiles[r],this.fire("tileabort",{tile:U,coords:f})))},_removeTile:function(r){var f=this._tiles[r];if(f)return f.el.setAttribute("src",V),Qr.prototype._removeTile.call(this,r)},_tileReady:function(r,f,U){if(this._map&&(!U||U.getAttribute("src")!==V))return Qr.prototype._tileReady.call(this,r,f,U)}});function Go(r,f){return new Xo(r,f)}var Rr=Xo.extend({defaultWmsParams:{service:"WMS",request:"GetMap",layers:"",styles:"",format:"image/jpeg",transparent:!1,version:"1.1.1"},options:{crs:null,uppercase:!1},initialize:function(Et,f){this._url=Et;var U,ut=te({},this.defaultWmsParams);for(U in f)U in this.options||(ut[U]=f[U]);Et=(f=R(this,f)).detectRetina&&ye.retina?2:1;var ae=this.getTileSize();ut.width=ae.x*Et,ut.height=ae.y*Et,this.wmsParams=ut},onAdd:function(r){this._crs=this.options.crs||r.options.crs,this._wmsVersion=parseFloat(this.wmsParams.version),this.wmsParams[1.3<=this._wmsVersion?"crs":"srs"]=this._crs.code,Xo.prototype.onAdd.call(this,r)},getTileUrl:function(r){var f=this._tileCoordsToNwSe(r),U=(f=(U=at((U=this._crs).project(f[0]),U.project(f[1]))).min,U.max);return f=(1.3<=this._wmsVersion&&this._crs===Ya?[f.y,f.x,U.y,U.x]:[f.x,f.y,U.x,U.y]).join(","),(U=Xo.prototype.getTileUrl.call(this,r))+I(this.wmsParams,U,this.options.uppercase)+(this.options.uppercase?"&BBOX=":"&bbox=")+f},setParams:function(r,f){return te(this.wmsParams,r),f||this.redraw(),this}});Xo.WMS=Rr,Go.wms=function(r,f){return new Rr(r,f)};var sr=tt.extend({options:{padding:.1},initialize:function(r){R(this,r),zt(this),this._layers=this._layers||{}},onAdd:function(){this._container||(this._initContainer(),this._zoomAnimated&&kn(this._container,"leaflet-zoom-animated")),this.getPane().appendChild(this._container),this._update(),this.on("update",this._updatePaths,this)},onRemove:function(){this.off("update",this._updatePaths,this),this._destroyContainer()},getEvents:function(){var r={viewreset:this._reset,zoom:this._onZoom,moveend:this._update,zoomend:this._onZoomEnd};return this._zoomAnimated&&(r.zoomanim=this._onAnimZoom),r},_onAnimZoom:function(r){this._updateTransform(r.center,r.zoom)},_onZoom:function(){this._updateTransform(this._map.getCenter(),this._map.getZoom())},_updateTransform:function(r,f){var U=this._map.getZoomScale(f,this._zoom),Et=this._map.getSize().multiplyBy(.5+this.options.padding),ut=this._map.project(this._center,f);Et=Et.multiplyBy(-U).add(ut).subtract(this._map._getNewPixelOrigin(r,f)),ye.any3d?Ce(this._container,Et,U):De(this._container,Et)},_reset:function(){for(var r in this._update(),this._updateTransform(this._center,this._zoom),this._layers)this._layers[r]._reset()},_onZoomEnd:function(){for(var r in this._layers)this._layers[r]._project()},_updatePaths:function(){for(var r in this._layers)this._layers[r]._update()},_update:function(){var r=this.options.padding,f=this._map.getSize(),U=this._map.containerPointToLayerPoint(f.multiplyBy(-r)).round();this._bounds=new H(U,U.add(f.multiplyBy(1+2*r)).round()),this._center=this._map.getCenter(),this._zoom=this._map.getZoom()}}),ir=sr.extend({options:{tolerance:0},getEvents:function(){var r=sr.prototype.getEvents.call(this);return r.viewprereset=this._onViewPreReset,r},_onViewPreReset:function(){this._postponeUpdatePaths=!0},onAdd:function(){sr.prototype.onAdd.call(this),this._draw()},_initContainer:function(){var r=this._container=document.createElement("canvas");hi(r,"mousemove",this._onMouseMove,this),hi(r,"click dblclick mousedown mouseup contextmenu",this._onClick,this),hi(r,"mouseout",this._handleMouseOut,this),r._leaflet_disable_events=!0,this._ctx=r.getContext("2d")},_destroyContainer:function(){v(this._redrawRequest),delete this._ctx,ko(this._container),Fi(this._container),delete this._container},_updatePaths:function(){if(!this._postponeUpdatePaths){for(var r in this._redrawBounds=null,this._layers)this._layers[r]._update();this._redraw()}},_update:function(){var r,f,U,ut;this._map._animatingZoom&&this._bounds||(sr.prototype._update.call(this),f=this._container,U=(r=this._bounds).getSize(),ut=ye.retina?2:1,De(f,r.min),f.width=ut*U.x,f.height=ut*U.y,f.style.width=U.x+"px",f.style.height=U.y+"px",ye.retina&&this._ctx.scale(2,2),this._ctx.translate(-r.min.x,-r.min.y),this.fire("update"))},_reset:function(){sr.prototype._reset.call(this),this._postponeUpdatePaths&&(this._postponeUpdatePaths=!1,this._updatePaths())},_initPath:function(r){this._updateDashArray(r),r=(this._layers[zt(r)]=r)._order={layer:r,prev:this._drawLast,next:null},this._drawLast&&(this._drawLast.next=r),this._drawLast=r,this._drawFirst=this._drawFirst||this._drawLast},_addPath:function(r){this._requestRedraw(r)},_removePath:function(r){var f=(U=r._order).next,U=U.prev;f?f.prev=U:this._drawLast=U,U?U.next=f:this._drawFirst=f,delete r._order,delete this._layers[zt(r)],this._requestRedraw(r)},_updatePath:function(r){this._extendRedrawBounds(r),r._project(),r._update(),this._requestRedraw(r)},_updateStyle:function(r){this._updateDashArray(r),this._requestRedraw(r)},_updateDashArray:function(r){if("string"==typeof r.options.dashArray){for(var f,U=r.options.dashArray.split(/[, ]+/),ut=[],Et=0;Et<U.length;Et++){if(f=Number(U[Et]),isNaN(f))return;ut.push(f)}r.options._dashArray=ut}else r.options._dashArray=r.options.dashArray},_requestRedraw:function(r){this._map&&(this._extendRedrawBounds(r),this._redrawRequest=this._redrawRequest||G(this._redraw,this))},_extendRedrawBounds:function(r){var f;r._pxBounds&&(f=(r.options.weight||0)+1,this._redrawBounds=this._redrawBounds||new H,this._redrawBounds.extend(r._pxBounds.min.subtract([f,f])),this._redrawBounds.extend(r._pxBounds.max.add([f,f])))},_redraw:function(){this._redrawRequest=null,this._redrawBounds&&(this._redrawBounds.min._floor(),this._redrawBounds.max._ceil()),this._clear(),this._draw(),this._redrawBounds=null},_clear:function(){var r,f=this._redrawBounds;f?(r=f.getSize(),this._ctx.clearRect(f.min.x,f.min.y,r.x,r.y)):(this._ctx.save(),this._ctx.setTransform(1,0,0,1,0,0),this._ctx.clearRect(0,0,this._container.width,this._container.height),this._ctx.restore())},_draw:function(){var r,f,U=this._redrawBounds;this._ctx.save(),U&&(f=U.getSize(),this._ctx.beginPath(),this._ctx.rect(U.min.x,U.min.y,f.x,f.y),this._ctx.clip()),this._drawing=!0;for(var ut=this._drawFirst;ut;ut=ut.next)r=ut.layer,(!U||r._pxBounds&&r._pxBounds.intersects(U))&&r._updatePath();this._drawing=!1,this._ctx.restore()},_updatePoly:function(r,f){if(this._drawing){var U,ut,Et,ae,qe=r._parts,Xe=qe.length,ki=this._ctx;if(Xe){for(ki.beginPath(),U=0;U<Xe;U++){for(ut=0,Et=qe[U].length;ut<Et;ut++)ki[ut?"lineTo":"moveTo"]((ae=qe[U][ut]).x,ae.y);f&&ki.closePath()}this._fillStroke(ki,r)}}},_updateCircle:function(r){var f,U,ut,Et;this._drawing&&!r._empty()&&(f=r._point,U=this._ctx,ut=Math.max(Math.round(r._radius),1),1!=(Et=(Math.max(Math.round(r._radiusY),1)||ut)/ut)&&(U.save(),U.scale(1,Et)),U.beginPath(),U.arc(f.x,f.y/Et,ut,0,2*Math.PI,!1),1!=Et&&U.restore(),this._fillStroke(U,r))},_fillStroke:function(r,f){var U=f.options;U.fill&&(r.globalAlpha=U.fillOpacity,r.fillStyle=U.fillColor||U.color,r.fill(U.fillRule||"evenodd")),U.stroke&&0!==U.weight&&(r.setLineDash&&r.setLineDash(f.options&&f.options._dashArray||[]),r.globalAlpha=U.opacity,r.lineWidth=U.weight,r.strokeStyle=U.color,r.lineCap=U.lineCap,r.lineJoin=U.lineJoin,r.stroke())},_onClick:function(r){for(var f,U,ut=this._map.mouseEventToLayerPoint(r),Et=this._drawFirst;Et;Et=Et.next)(f=Et.layer).options.interactive&&f._containsPoint(ut)&&(("click"===r.type||"preclick"===r.type)&&this._map._draggableMoved(f)||(U=f));this._fireEvent(!!U&&[U],r)},_onMouseMove:function(r){var f;!this._map||this._map.dragging.moving()||this._map._animatingZoom||(f=this._map.mouseEventToLayerPoint(r),this._handleMouseHover(r,f))},_handleMouseOut:function(r){var f=this._hoveredLayer;f&&(En(this._container,"leaflet-interactive"),this._fireEvent([f],r,"mouseout"),this._hoveredLayer=null,this._mouseHoverThrottled=!1)},_handleMouseHover:function(r,f){if(!this._mouseHoverThrottled){for(var U,ut,Et=this._drawFirst;Et;Et=Et.next)(U=Et.layer).options.interactive&&U._containsPoint(f)&&(ut=U);ut!==this._hoveredLayer&&(this._handleMouseOut(r),ut&&(kn(this._container,"leaflet-interactive"),this._fireEvent([ut],r,"mouseover"),this._hoveredLayer=ut)),this._fireEvent(!!this._hoveredLayer&&[this._hoveredLayer],r),this._mouseHoverThrottled=!0,setTimeout(xt(function(){this._mouseHoverThrottled=!1},this),32)}},_fireEvent:function(r,f,U){this._map._fireDOMEvent(f,U||f.type,r)},_bringToFront:function(r){var f,U,ut=r._order;ut&&(U=ut.prev,(f=ut.next)&&((f.prev=U)?U.next=f:f&&(this._drawFirst=f),ut.prev=this._drawLast,(this._drawLast.next=ut).next=null,this._drawLast=ut,this._requestRedraw(r)))},_bringToBack:function(r){var f,U,ut=r._order;ut&&(f=ut.next,(U=ut.prev)&&((U.next=f)?f.prev=U:U&&(this._drawLast=U),ut.prev=null,ut.next=this._drawFirst,this._drawFirst.prev=ut,this._drawFirst=ut,this._requestRedraw(r)))}});function Rn(r){return ye.canvas?new ir(r):null}var go=function(){try{return document.namespaces.add("lvml","urn:schemas-microsoft-com:vml"),function(r){return document.createElement("<lvml:"+r+' class="lvml">')}}catch{}return function(r){return document.createElement("<"+r+' xmlns="urn:schemas-microsoft.com:vml" class="lvml">')}}(),Gr=(Zo={_initContainer:function(){this._container=po("div","leaflet-vml-container")},_update:function(){this._map._animatingZoom||(sr.prototype._update.call(this),this.fire("update"))},_initPath:function(r){var f=r._container=go("shape");kn(f,"leaflet-vml-shape "+(this.options.className||"")),f.coordsize="1 1",r._path=go("path"),f.appendChild(r._path),this._updateStyle(r),this._layers[zt(r)]=r},_addPath:function(r){var f=r._container;this._container.appendChild(f),r.options.interactive&&r.addInteractiveTarget(f)},_removePath:function(r){var f=r._container;ko(f),r.removeInteractiveTarget(f),delete this._layers[zt(r)]},_updateStyle:function(r){var f=r._stroke,U=r._fill,ut=r.options,Et=r._container;Et.stroked=!!ut.stroke,Et.filled=!!ut.fill,ut.stroke?(f=f||(r._stroke=go("stroke")),Et.appendChild(f),f.weight=ut.weight+"px",f.color=ut.color,f.opacity=ut.opacity,f.dashStyle=ut.dashArray?T(ut.dashArray)?ut.dashArray.join(" "):ut.dashArray.replace(/( *, *)/g," "):"",f.endcap=ut.lineCap.replace("butt","flat"),f.joinstyle=ut.lineJoin):f&&(Et.removeChild(f),r._stroke=null),ut.fill?(U=U||(r._fill=go("fill")),Et.appendChild(U),U.color=ut.fillColor||ut.color,U.opacity=ut.fillOpacity):U&&(Et.removeChild(U),r._fill=null)},_updateCircle:function(r){var f=r._point.round(),U=Math.round(r._radius),ut=Math.round(r._radiusY||U);this._setPath(r,r._empty()?"M0 0":"AL "+f.x+","+f.y+" "+U+","+ut+" 0,23592600")},_setPath:function(r,f){r._path.v=f},_bringToFront:function(r){dr(r._container)},_bringToBack:function(r){gr(r._container)}},ye.vml?go:At),cr=sr.extend({_initContainer:function(){this._container=Gr("svg"),this._container.setAttribute("pointer-events","none"),this._rootGroup=Gr("g"),this._container.appendChild(this._rootGroup)},_destroyContainer:function(){ko(this._container),Fi(this._container),delete this._container,delete this._rootGroup,delete this._svgSize},_update:function(){var r,f,U;this._map._animatingZoom&&this._bounds||(sr.prototype._update.call(this),f=(r=this._bounds).getSize(),U=this._container,this._svgSize&&this._svgSize.equals(f)||(this._svgSize=f,U.setAttribute("width",f.x),U.setAttribute("height",f.y)),De(U,r.min),U.setAttribute("viewBox",[r.min.x,r.min.y,f.x,f.y].join(" ")),this.fire("update"))},_initPath:function(r){var f=r._path=Gr("path");r.options.className&&kn(f,r.options.className),r.options.interactive&&kn(f,"leaflet-interactive"),this._updateStyle(r),this._layers[zt(r)]=r},_addPath:function(r){this._rootGroup||this._initContainer(),this._rootGroup.appendChild(r._path),r.addInteractiveTarget(r._path)},_removePath:function(r){ko(r._path),r.removeInteractiveTarget(r._path),delete this._layers[zt(r)]},_updatePath:function(r){r._project(),r._update()},_updateStyle:function(U){var f=U._path;U=U.options,f&&(U.stroke?(f.setAttribute("stroke",U.color),f.setAttribute("stroke-opacity",U.opacity),f.setAttribute("stroke-width",U.weight),f.setAttribute("stroke-linecap",U.lineCap),f.setAttribute("stroke-linejoin",U.lineJoin),U.dashArray?f.setAttribute("stroke-dasharray",U.dashArray):f.removeAttribute("stroke-dasharray"),U.dashOffset?f.setAttribute("stroke-dashoffset",U.dashOffset):f.removeAttribute("stroke-dashoffset")):f.setAttribute("stroke","none"),U.fill?(f.setAttribute("fill",U.fillColor||U.color),f.setAttribute("fill-opacity",U.fillOpacity),f.setAttribute("fill-rule",U.fillRule||"evenodd")):f.setAttribute("fill","none"))},_updatePoly:function(r,f){this._setPath(r,Wt(r._parts,f))},_updateCircle:function(r){var ut=r._point,f=Math.max(Math.round(r._radius),1),U="a"+f+","+(Math.max(Math.round(r._radiusY),1)||f)+" 0 1,0 ";ut=r._empty()?"M0 0":"M"+(ut.x-f)+","+ut.y+U+2*f+",0 "+U+2*-f+",0 ",this._setPath(r,ut)},_setPath:function(r,f){r._path.setAttribute("d",f)},_bringToFront:function(r){dr(r._path)},_bringToBack:function(r){gr(r._path)}});function co(r){return ye.svg||ye.vml?new cr(r):null}ye.vml&&cr.include(Zo),gn.include({getRenderer:function(r){return r=(r=r.options.renderer||this._getPaneRenderer(r.options.pane)||this.options.renderer||this._renderer)||(this._renderer=this._createRenderer()),this.hasLayer(r)||this.addLayer(r),r},_getPaneRenderer:function(r){var f;return"overlayPane"!==r&&void 0!==r&&(void 0===(f=this._paneRenderers[r])&&(f=this._createRenderer({pane:r}),this._paneRenderers[r]=f),f)},_createRenderer:function(r){return this.options.preferCanvas&&Rn(r)||co(r)}});var la=ci.extend({initialize:function(r,f){ci.prototype.initialize.call(this,this._boundsToLatLngs(r),f)},setBounds:function(r){return this.setLatLngs(this._boundsToLatLngs(r))},_boundsToLatLngs:function(r){return[(r=rt(r)).getSouthWest(),r.getNorthWest(),r.getNorthEast(),r.getSouthEast()]}});cr.create=Gr,cr.pointsToPath=Wt,ui.geometryToLayer=an,ui.coordsToLatLng=bn,ui.coordsToLatLngs=Qo,ui.latLngToCoords=wr,ui.latLngsToCoords=$r,ui.getFeature=Io,ui.asFeature=io,gn.mergeOptions({boxZoom:!0}),as=Hr.extend({initialize:function(r){this._map=r,this._container=r._container,this._pane=r._panes.overlayPane,this._resetStateTimeout=0,r.on("unload",this._destroy,this)},addHooks:function(){hi(this._container,"mousedown",this._onMouseDown,this)},removeHooks:function(){Fi(this._container,"mousedown",this._onMouseDown,this)},moved:function(){return this._moved},_destroy:function(){ko(this._pane),delete this._pane},_resetState:function(){this._resetStateTimeout=0,this._moved=!1},_clearDeferredResetState:function(){0!==this._resetStateTimeout&&(clearTimeout(this._resetStateTimeout),this._resetStateTimeout=0)},_onMouseDown:function(r){if(!r.shiftKey||1!==r.which&&1!==r.button)return!1;this._clearDeferredResetState(),this._resetState(),xi(),oe(),this._startPoint=this._map.mouseEventToContainerPoint(r),hi(document,{contextmenu:Gn,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseMove:function(f){this._moved||(this._moved=!0,this._box=po("div","leaflet-zoom-box",this._container),kn(this._container,"leaflet-crosshair"),this._map.fire("boxzoomstart")),this._point=this._map.mouseEventToContainerPoint(f);var U=(f=new H(this._point,this._startPoint)).getSize();De(this._box,f.min),this._box.style.width=U.x+"px",this._box.style.height=U.y+"px"},_finish:function(){this._moved&&(ko(this._box),En(this._container,"leaflet-crosshair")),Ui(),Ee(),Fi(document,{contextmenu:Gn,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseUp:function(r){1!==r.which&&1!==r.button||(this._finish(),this._moved&&(this._clearDeferredResetState(),this._resetStateTimeout=setTimeout(xt(this._resetState,this),0),r=new ft(this._map.containerPointToLatLng(this._startPoint),this._map.containerPointToLatLng(this._point)),this._map.fitBounds(r).fire("boxzoomend",{boxZoomBounds:r})))},_onKeyDown:function(r){27===r.keyCode&&(this._finish(),this._clearDeferredResetState(),this._resetState())}}),gn.addInitHook("addHandler","boxZoom",as),gn.mergeOptions({doubleClickZoom:!0}),_s=Hr.extend({addHooks:function(){this._map.on("dblclick",this._onDoubleClick,this)},removeHooks:function(){this._map.off("dblclick",this._onDoubleClick,this)},_onDoubleClick:function(r){var f=this._map,ut=f.getZoom(),U=f.options.zoomDelta;ut=r.originalEvent.shiftKey?ut-U:ut+U,"center"===f.options.doubleClickZoom?f.setZoom(ut):f.setZoomAround(r.containerPoint,ut)}});var Qs=(gn.addInitHook("addHandler","doubleClickZoom",_s),gn.mergeOptions({dragging:!0,inertia:!0,inertiaDeceleration:3400,inertiaMaxSpeed:1/0,easeLinearity:.2,worldCopyJump:!1,maxBoundsViscosity:0}),Hr.extend({addHooks:function(){var r;this._draggable||(this._draggable=new Br((r=this._map)._mapPane,r._container),this._draggable.on({dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this),this._draggable.on("predrag",this._onPreDragLimit,this),r.options.worldCopyJump&&(this._draggable.on("predrag",this._onPreDragWrap,this),r.on("zoomend",this._onZoomEnd,this),r.whenReady(this._onZoomEnd,this))),kn(this._map._container,"leaflet-grab leaflet-touch-drag"),this._draggable.enable(),this._positions=[],this._times=[]},removeHooks:function(){En(this._map._container,"leaflet-grab"),En(this._map._container,"leaflet-touch-drag"),this._draggable.disable()},moved:function(){return this._draggable&&this._draggable._moved},moving:function(){return this._draggable&&this._draggable._moving},_onDragStart:function(){var r,f=this._map;f._stop(),this._map.options.maxBounds&&this._map.options.maxBoundsViscosity?(r=rt(this._map.options.maxBounds),this._offsetLimit=at(this._map.latLngToContainerPoint(r.getNorthWest()).multiplyBy(-1),this._map.latLngToContainerPoint(r.getSouthEast()).multiplyBy(-1).add(this._map.getSize())),this._viscosity=Math.min(1,Math.max(0,this._map.options.maxBoundsViscosity))):this._offsetLimit=null,f.fire("movestart").fire("dragstart"),f.options.inertia&&(this._positions=[],this._times=[])},_onDrag:function(r){var f,U;this._map.options.inertia&&(f=this._lastTime=+new Date,U=this._lastPos=this._draggable._absPos||this._draggable._newPos,this._positions.push(U),this._times.push(f),this._prunePositions(f)),this._map.fire("move",r).fire("drag",r)},_prunePositions:function(r){for(;1<this._positions.length&&50<r-this._times[0];)this._positions.shift(),this._times.shift()},_onZoomEnd:function(){var r=this._map.getSize().divideBy(2),f=this._map.latLngToLayerPoint([0,0]);this._initialWorldOffset=f.subtract(r).x,this._worldWidth=this._map.getPixelWorldBounds().getSize().x},_viscousLimit:function(r,f){return r-(r-f)*this._viscosity},_onPreDragLimit:function(){var r,f;this._viscosity&&this._offsetLimit&&((r=this._draggable._newPos.subtract(this._draggable._startPos)).x<(f=this._offsetLimit).min.x&&(r.x=this._viscousLimit(r.x,f.min.x)),r.y<f.min.y&&(r.y=this._viscousLimit(r.y,f.min.y)),r.x>f.max.x&&(r.x=this._viscousLimit(r.x,f.max.x)),r.y>f.max.y&&(r.y=this._viscousLimit(r.y,f.max.y)),this._draggable._newPos=this._draggable._startPos.add(r))},_onPreDragWrap:function(){var Et=this._worldWidth,r=Math.round(Et/2),f=this._initialWorldOffset,U=((ut=this._draggable._newPos.x)-r+f)%Et+r-f,ut=(ut+r+f)%Et-r-f;Et=Math.abs(U+f)<Math.abs(ut+f)?U:ut,this._draggable._absPos=this._draggable._newPos.clone(),this._draggable._newPos.x=Et},_onDragEnd:function(r){var f,U,ut,Et,ae=this._map,qe=ae.options,Xe=!qe.inertia||r.noInertia||this._times.length<2;ae.fire("dragend",r),!Xe&&(this._prunePositions(+new Date),Xe=(r=(r=this._lastPos.subtract(this._positions[0])).multiplyBy((f=qe.easeLinearity)/(Xe=(this._lastTime-this._times[0])/1e3))).distanceTo([0,0]),U=Math.min(qe.inertiaMaxSpeed,Xe),r=r.multiplyBy(U/Xe),(Et=r.multiplyBy(-(ut=U/(qe.inertiaDeceleration*f))/2).round()).x||Et.y)?(Et=ae._limitOffset(Et,ae.options.maxBounds),G(function(){ae.panBy(Et,{duration:ut,easeLinearity:f,noMoveStart:!0,animate:!0})})):ae.fire("moveend")}})),Sa=(gn.addInitHook("addHandler","dragging",Qs),gn.mergeOptions({keyboard:!0,keyboardPanDelta:80}),Oa=Hr.extend({keyCodes:{left:[37],right:[39],down:[40],up:[38],zoomIn:[187,107,61,171],zoomOut:[189,109,54,173]},initialize:function(r){this._map=r,this._setPanDelta(r.options.keyboardPanDelta),this._setZoomDelta(r.options.zoomDelta)},addHooks:function(){var r=this._map._container;r.tabIndex<=0&&(r.tabIndex="0"),hi(r,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.on({focus:this._addHooks,blur:this._removeHooks},this)},removeHooks:function(){this._removeHooks(),Fi(this._map._container,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.off({focus:this._addHooks,blur:this._removeHooks},this)},_onMouseDown:function(){var r,f,U;this._focused||(U=document.body,r=document.documentElement,f=U.scrollTop||r.scrollTop,U=U.scrollLeft||r.scrollLeft,this._map._container.focus(),window.scrollTo(U,f))},_onFocus:function(){this._focused=!0,this._map.fire("focus")},_onBlur:function(){this._focused=!1,this._map.fire("blur")},_setPanDelta:function(r){for(var f=this._panKeys={},U=this.keyCodes,ut=0,Et=U.left.length;ut<Et;ut++)f[U.left[ut]]=[-1*r,0];for(ut=0,Et=U.right.length;ut<Et;ut++)f[U.right[ut]]=[r,0];for(ut=0,Et=U.down.length;ut<Et;ut++)f[U.down[ut]]=[0,r];for(ut=0,Et=U.up.length;ut<Et;ut++)f[U.up[ut]]=[0,-1*r]},_setZoomDelta:function(r){for(var f=this._zoomKeys={},U=this.keyCodes,ut=0,Et=U.zoomIn.length;ut<Et;ut++)f[U.zoomIn[ut]]=r;for(ut=0,Et=U.zoomOut.length;ut<Et;ut++)f[U.zoomOut[ut]]=-r},_addHooks:function(){hi(document,"keydown",this._onKeyDown,this)},_removeHooks:function(){Fi(document,"keydown",this._onKeyDown,this)},_onKeyDown:function(r){if(!(r.altKey||r.ctrlKey||r.metaKey)){var f,U,ut=r.keyCode,Et=this._map;if(ut in this._panKeys)Et._panAnim&&Et._panAnim._inProgress||(U=this._panKeys[ut],r.shiftKey&&(U=B(U).multiplyBy(3)),Et.options.maxBounds&&(U=Et._limitOffset(B(U),Et.options.maxBounds)),Et.options.worldCopyJump?(f=Et.wrapLatLng(Et.unproject(Et.project(Et.getCenter()).add(U))),Et.panTo(f)):Et.panBy(U));else if(ut in this._zoomKeys)Et.setZoom(Et.getZoom()+(r.shiftKey?3:1)*this._zoomKeys[ut]);else{if(27!==ut||!Et._popup||!Et._popup.options.closeOnEscapeKey)return;Et.closePopup()}Gn(r)}}}),gn.addInitHook("addHandler","keyboard",Oa),gn.mergeOptions({scrollWheelZoom:!0,wheelDebounceTime:40,wheelPxPerZoomLevel:60}),ya=Hr.extend({addHooks:function(){hi(this._map._container,"wheel",this._onWheelScroll,this),this._delta=0},removeHooks:function(){Fi(this._map._container,"wheel",this._onWheelScroll,this)},_onWheelScroll:function(r){var U=Co(r),f=this._map.options.wheelDebounceTime;this._delta+=U,this._lastMousePos=this._map.mouseEventToContainerPoint(r),this._startTime||(this._startTime=+new Date),U=Math.max(f-(+new Date-this._startTime),0),clearTimeout(this._timer),this._timer=setTimeout(xt(this._performZoom,this),U),Gn(r)},_performZoom:function(){var r=this._map,f=r.getZoom(),U=this._map.options.zoomSnap||0,ut=(r._stop(),this._delta/(4*this._map.options.wheelPxPerZoomLevel));ut=4*Math.log(2/(1+Math.exp(-Math.abs(ut))))/Math.LN2,U=U?Math.ceil(ut/U)*U:ut,ut=r._limitZoom(f+(0<this._delta?U:-U))-f,this._delta=0,this._startTime=null,ut&&("center"===r.options.scrollWheelZoom?r.setZoom(f+ut):r.setZoomAround(this._lastMousePos,f+ut))}}),gn.addInitHook("addHandler","scrollWheelZoom",ya),gn.mergeOptions({tapHold:ye.touchNative&&ye.safari&&ye.mobile,tapTolerance:15}),Es=Hr.extend({addHooks:function(){hi(this._map._container,"touchstart",this._onDown,this)},removeHooks:function(){Fi(this._map._container,"touchstart",this._onDown,this)},_onDown:function(r){var f;clearTimeout(this._holdTimeout),1===r.touches.length&&(this._startPos=this._newPos=new y((f=r.touches[0]).clientX,f.clientY),this._holdTimeout=setTimeout(xt(function(){this._cancel(),this._isTapValid()&&(hi(document,"touchend",Hn),hi(document,"touchend touchcancel",this._cancelClickPrevent),this._simulateEvent("contextmenu",f))},this),600),hi(document,"touchend touchcancel contextmenu",this._cancel,this),hi(document,"touchmove",this._onMove,this))},_cancelClickPrevent:function r(){Fi(document,"touchend",Hn),Fi(document,"touchend touchcancel",r)},_cancel:function(){clearTimeout(this._holdTimeout),Fi(document,"touchend touchcancel contextmenu",this._cancel,this),Fi(document,"touchmove",this._onMove,this)},_onMove:function(r){this._newPos=new y((r=r.touches[0]).clientX,r.clientY)},_isTapValid:function(){return this._newPos.distanceTo(this._startPos)<=this._map.options.tapTolerance},_simulateEvent:function(r,f){(r=new MouseEvent(r,{bubbles:!0,cancelable:!0,view:window,screenX:f.screenX,screenY:f.screenY,clientX:f.clientX,clientY:f.clientY}))._simulated=!0,f.target.dispatchEvent(r)}}),gn.addInitHook("addHandler","tapHold",Es),gn.mergeOptions({touchZoom:ye.touch,bounceAtZoomLimits:!0}),xs=Hr.extend({addHooks:function(){kn(this._map._container,"leaflet-touch-zoom"),hi(this._map._container,"touchstart",this._onTouchStart,this)},removeHooks:function(){En(this._map._container,"leaflet-touch-zoom"),Fi(this._map._container,"touchstart",this._onTouchStart,this)},_onTouchStart:function(r){var f,U,ut=this._map;!r.touches||2!==r.touches.length||ut._animatingZoom||this._zooming||(f=ut.mouseEventToContainerPoint(r.touches[0]),U=ut.mouseEventToContainerPoint(r.touches[1]),this._centerPoint=ut.getSize()._divideBy(2),this._startLatLng=ut.containerPointToLatLng(this._centerPoint),"center"!==ut.options.touchZoom&&(this._pinchStartLatLng=ut.containerPointToLatLng(f.add(U)._divideBy(2))),this._startDist=f.distanceTo(U),this._startZoom=ut.getZoom(),this._moved=!1,this._zooming=!0,ut._stop(),hi(document,"touchmove",this._onTouchMove,this),hi(document,"touchend touchcancel",this._onTouchEnd,this),Hn(r))},_onTouchMove:function(r){if(r.touches&&2===r.touches.length&&this._zooming){var f=this._map,U=f.mouseEventToContainerPoint(r.touches[0]),ut=f.mouseEventToContainerPoint(r.touches[1]),Et=U.distanceTo(ut)/this._startDist;if(this._zoom=f.getScaleZoom(Et,this._startZoom),!f.options.bounceAtZoomLimits&&(this._zoom<f.getMinZoom()&&Et<1||this._zoom>f.getMaxZoom()&&1<Et)&&(this._zoom=f._limitZoom(this._zoom)),"center"===f.options.touchZoom){if(this._center=this._startLatLng,1==Et)return}else{if(U=U._add(ut)._divideBy(2)._subtract(this._centerPoint),1==Et&&0===U.x&&0===U.y)return;this._center=f.unproject(f.project(this._pinchStartLatLng,this._zoom).subtract(U),this._zoom)}this._moved||(f._moveStart(!0,!1),this._moved=!0),v(this._animRequest),ut=xt(f._move,f,this._center,this._zoom,{pinch:!0,round:!1},void 0),this._animRequest=G(ut,this,!0),Hn(r)}},_onTouchEnd:function(){this._moved&&this._zooming?(this._zooming=!1,v(this._animRequest),Fi(document,"touchmove",this._onTouchMove,this),Fi(document,"touchend touchcancel",this._onTouchEnd,this),this._map.options.zoomAnimation?this._map._animateZoom(this._center,this._map._limitZoom(this._zoom),!0,this._map.options.zoomSnap):this._map._resetView(this._center,this._map._limitZoom(this._zoom))):this._zooming=!1}}),gn.addInitHook("addHandler","touchZoom",xs),gn.BoxZoom=as,gn.DoubleClickZoom=_s,gn.Drag=Qs,gn.Keyboard=Oa,gn.ScrollWheelZoom=ya,gn.TapHold=Es,gn.TouchZoom=xs,vt.Bounds=H,vt.Browser=ye,vt.CRS=mt,vt.Canvas=ir,vt.Circle=vi,vt.CircleMarker=ei,vt.Class=b,vt.Control=Uo,vt.DivIcon=Ho,vt.DivOverlay=hr,vt.DomEvent=bo,vt.DomUtil=Ot,vt.Draggable=Br,vt.Evented=_,vt.FeatureGroup=St,vt.GeoJSON=ui,vt.GridLayer=Qr,vt.Handler=Hr,vt.Icon=Zt,vt.ImageOverlay=er,vt.LatLng=z,vt.LatLngBounds=ft,vt.Layer=tt,vt.LayerGroup=yt,vt.LineUtil=se,vt.Map=gn,vt.Marker=Be,vt.Mixin=Or,vt.Path=je,vt.Point=y,vt.PolyUtil=us,vt.Polygon=ci,vt.Polyline=Li,vt.Popup=Jr,vt.PosAnimation=ao,vt.Projection=za,vt.Rectangle=la,vt.Renderer=sr,vt.SVG=cr,vt.SVGOverlay=ga,vt.TileLayer=Xo,vt.Tooltip=js,vt.Transformation=Y,vt.Util=M,vt.VideoOverlay=aa,vt.bind=xt,vt.bounds=at,vt.canvas=Rn,vt.circle=function(r,f,U){return new vi(r,f,U)},vt.circleMarker=function(r,f){return new ei(r,f)},vt.control=Tr,vt.divIcon=function(r){return new Ho(r)},vt.extend=te,vt.featureGroup=function(r,f){return new St(r,f)},vt.geoJSON=Ir,vt.geoJson=Ao,vt.gridLayer=function(r){return new Qr(r)},vt.icon=function(r){return new Zt(r)},vt.imageOverlay=function(r,f,U){return new er(r,f,U)},vt.latLng=q,vt.latLngBounds=rt,vt.layerGroup=function(r,f){return new yt(r,f)},vt.map=function(r,f){return new gn(r,f)},vt.marker=function(r,f){return new Be(r,f)},vt.point=B,vt.polygon=function(r,f){return new ci(r,f)},vt.polyline=function(r,f){return new Li(r,f)},vt.popup=function(r,f){return new Jr(r,f)},vt.rectangle=function(r,f){return new la(r,f)},vt.setOptions=R,vt.stamp=zt,vt.svg=co,vt.svgOverlay=function(r,f,U){return new ga(r,f,U)},vt.tileLayer=Go,vt.tooltip=function(r,f){return new js(r,f)},vt.transformation=lt,vt.version="1.9.3",vt.videoOverlay=function(r,f,U){return new aa(r,f,U)},window.L);vt.noConflict=function(){return window.L=Sa,this},window.L=vt}),function(vt,te){"object"==typeof exports&&typeof module<"u"?te(exports,require("leaflet")):"function"==typeof define&&define.amd?define(["exports","leaflet"],te):te(((vt=typeof globalThis<"u"?globalThis:vt||self).L=vt.L||{},vt.L.esri={}),vt.L)}(this,function(vt,te){"use strict";var wt=window.XMLHttpRequest&&"withCredentials"in new window.XMLHttpRequest,xt=""===document.documentElement.style.pointerEvents,jt={cors:wt,pointerEvents:xt},zt={attributionWidthOffset:55},Ut=0;function Rt(X){var bt="";for(var Gt in X.f=X.f||"json",X)if(Object.prototype.hasOwnProperty.call(X,Gt)){var ee,we=X[Gt],Ye=Object.prototype.toString.call(we);bt.length&&(bt+="&"),ee="[object Array]"===Ye?"[object Object]"===Object.prototype.toString.call(we[0])?JSON.stringify(we):we.join(","):"[object Object]"===Ye?JSON.stringify(we):"[object Date]"===Ye?we.valueOf():we,bt+=encodeURIComponent(Gt)+"="+encodeURIComponent(ee)}return bt}function It(X,bt){var Gt=new window.XMLHttpRequest;return Gt.onerror=function(ee){Gt.onreadystatechange=te.Util.falseFn,X.call(bt,{error:{code:500,message:"XMLHttpRequest error"}},null)},Gt.onreadystatechange=function(){var ee,we;if(4===Gt.readyState){try{ee=JSON.parse(Gt.responseText)}catch{ee=null,we={code:500,message:"Could not parse response as JSON. This could also be caused by a CORS or XMLHttpRequest error."}}!we&&ee.error&&(we=ee.error,ee=null),Gt.onerror=te.Util.falseFn,X.call(bt,we,ee)}},Gt.ontimeout=function(){this.onerror()},Gt}function K(X,bt,Gt,ee){var we=It(Gt,ee);return we.open("POST",X),null!=ee&&void 0!==ee.options&&(we.timeout=ee.options.timeout),we.setRequestHeader("Content-Type","application/x-www-form-urlencoded; charset=UTF-8"),we.send(Rt(bt)),we}function et(X,bt,Gt,ee){var we=It(Gt,ee);return we.open("GET",X+"?"+Rt(bt),!0),null!=ee&&void 0!==ee.options&&(we.timeout=ee.options.timeout,ee.options.withCredentials&&(we.withCredentials=!0)),we.send(null),we}function st(X,bt,Gt,ee){var we=Rt(bt),Ye=It(Gt,ee),xi=(X+"?"+we).length;if(xi<=2e3&&jt.cors?Ye.open("GET",X+"?"+we):xi>2e3&&jt.cors&&(Ye.open("POST",X),Ye.setRequestHeader("Content-Type","application/x-www-form-urlencoded; charset=UTF-8")),null!=ee&&void 0!==ee.options&&(Ye.timeout=ee.options.timeout,ee.options.withCredentials&&(Ye.withCredentials=!0)),xi<=2e3&&jt.cors)Ye.send(null);else{if(!(xi>2e3&&jt.cors))return xi<=2e3&&!jt.cors?R(X,bt,Gt,ee):void A("a request to "+X+" was longer then 2000 characters and this browser cannot make a cross-domain post request. Please use a proxy https://developers.arcgis.com/esri-leaflet/api-reference/request/");Ye.send(we)}return Ye}function R(X,bt,Gt,ee){window._EsriLeafletCallbacks=window._EsriLeafletCallbacks||{};var we="c"+Ut;bt.callback="window._EsriLeafletCallbacks."+we,window._EsriLeafletCallbacks[we]=function(xi){if(!0!==window._EsriLeafletCallbacks[we]){var Ui,hn=Object.prototype.toString.call(xi);"[object Object]"!==hn&&"[object Array]"!==hn&&(Ui={error:{code:500,message:"Expected array or object as JSONP response"}},xi=null),!Ui&&xi.error&&(Ui=xi,xi=null),Gt.call(ee,Ui,xi),window._EsriLeafletCallbacks[we]=!0}};var Ye=te.DomUtil.create("script",null,document.body);return Ye.type="text/javascript",Ye.src=X+"?"+Rt(bt),Ye.id=we,Ye.onerror=function(xi){xi&&!0!==window._EsriLeafletCallbacks[we]&&(Gt.call(ee,{error:{code:500,message:"An unknown error occurred"}}),window._EsriLeafletCallbacks[we]=!0)},te.DomUtil.addClass(Ye,"esri-leaflet-jsonp"),Ut++,{id:we,url:Ye.src,abort:function(){window._EsriLeafletCallbacks._callback[we]({code:0,message:"Request aborted."})}}}var I=jt.cors?et:R;function A(){console&&console.warn&&console.warn.apply(console,arguments)}I.CORS=et,I.JSONP=R;var x={request:st,get:I,post:K},T=function(X,bt,Gt,ee){var xi=(ee[1]-Gt[1])*(bt[0]-X[0])-(ee[0]-Gt[0])*(bt[1]-X[1]);if(0!==xi){var Ui=((ee[0]-Gt[0])*(X[1]-Gt[1])-(ee[1]-Gt[1])*(X[0]-Gt[0]))/xi,hn=((bt[0]-X[0])*(X[1]-Gt[1])-(bt[1]-X[1])*(X[0]-Gt[0]))/xi;if(Ui>=0&&Ui<=1&&hn>=0&&hn<=1)return!0}return!1},j=function(X,bt){for(var Gt=0;Gt<X.length-1;Gt++)for(var ee=0;ee<bt.length-1;ee++)if(T(X[Gt],X[Gt+1],bt[ee],bt[ee+1]))return!0;return!1},V=function(X){return function(bt,Gt){for(var ee=0;ee<bt.length;ee++)if(bt[ee]!==Gt[ee])return!1;return!0}(X[0],X[X.length-1])||X.push(X[0]),X},nt=function(X){for(var bt,Gt=0,ee=0,we=X.length,Ye=X[ee];ee<we-1;ee++)Gt+=((bt=X[ee+1])[0]-Ye[0])*(bt[1]+Ye[1]),Ye=bt;return Gt>=0},w=function(X){var bt={};for(var Gt in X)X.hasOwnProperty(Gt)&&(bt[Gt]=X[Gt]);return bt},l=function(X,bt){var Gt=j(X,bt),ee=function(we,Ye){for(var xi=!1,Ui=-1,hn=we.length,Fn=hn-1;++Ui<hn;Fn=Ui)(we[Ui][1]<=Ye[1]&&Ye[1]<we[Fn][1]||we[Fn][1]<=Ye[1]&&Ye[1]<we[Ui][1])&&Ye[0]<(we[Fn][0]-we[Ui][0])*(Ye[1]-we[Ui][1])/(we[Fn][1]-we[Ui][1])+we[Ui][0]&&(xi=!xi);return xi}(X,bt[0]);return!(Gt||!ee)},it=function X(bt,Gt){var ee={};if(bt.features){ee.type="FeatureCollection",ee.features=[];for(var we=0;we<bt.features.length;we++)ee.features.push(X(bt.features[we],Gt))}if("number"==typeof bt.x&&"number"==typeof bt.y&&(ee.type="Point",ee.coordinates=[bt.x,bt.y],"number"==typeof bt.z&&ee.coordinates.push(bt.z)),bt.points&&(ee.type="MultiPoint",ee.coordinates=bt.points.slice(0)),bt.paths&&(1===bt.paths.length?(ee.type="LineString",ee.coordinates=bt.paths[0].slice(0)):(ee.type="MultiLineString",ee.coordinates=bt.paths.slice(0))),bt.rings&&(ee=function(Ye){for(var xi,hn,Fn=[],Mo=[],qo=0;qo<Ye.length;qo++){var Oo=V(Ye[qo].slice(0));if(!(Oo.length<4))if(nt(Oo)){var Dr=[Oo.slice().reverse()];Fn.push(Dr)}else Mo.push(Oo.slice().reverse())}for(var No=[];Mo.length;){hn=Mo.pop();var po=!1;for(xi=Fn.length-1;xi>=0;xi--)if(l(Fn[xi][0],hn)){Fn[xi].push(hn),po=!0;break}po||No.push(hn)}for(;No.length;){hn=No.pop();var ko=!1;for(xi=Fn.length-1;xi>=0;xi--)if(j(Fn[xi][0],hn)){Fn[xi].push(hn),ko=!0;break}ko||Fn.push([hn.reverse()])}return 1===Fn.length?{type:"Polygon",coordinates:Fn[0]}:{type:"MultiPolygon",coordinates:Fn}}(bt.rings.slice(0))),"number"==typeof bt.xmin&&"number"==typeof bt.ymin&&"number"==typeof bt.xmax&&"number"==typeof bt.ymax&&(ee.type="Polygon",ee.coordinates=[[[bt.xmax,bt.ymax],[bt.xmin,bt.ymax],[bt.xmin,bt.ymin],[bt.xmax,bt.ymin],[bt.xmax,bt.ymax]]]),(bt.geometry||bt.attributes)&&(ee.type="Feature",ee.geometry=bt.geometry?X(bt.geometry):null,ee.properties=bt.attributes?w(bt.attributes):null,bt.attributes))try{ee.id=function(Ye,xi){for(var Ui=xi?[xi,"OBJECTID","FID"]:["OBJECTID","FID"],hn=0;hn<Ui.length;hn++){var Fn=Ui[hn];if(Fn in Ye&&("string"==typeof Ye[Fn]||"number"==typeof Ye[Fn]))return Ye[Fn]}throw Error("No valid id attribute found")}(bt.attributes,Gt)}catch{}return JSON.stringify(ee.geometry)===JSON.stringify({})&&(ee.geometry=null),bt.spatialReference&&bt.spatialReference.wkid&&4326!==bt.spatialReference.wkid&&console.warn("Object converted in non-standard crs - "+JSON.stringify(bt.spatialReference)),ee},N=function(X){var bt=[],Gt=X.slice(0),ee=V(Gt.shift().slice(0));if(ee.length>=4){nt(ee)||ee.reverse(),bt.push(ee);for(var we=0;we<Gt.length;we++){var Ye=V(Gt[we].slice(0));Ye.length>=4&&(nt(Ye)&&Ye.reverse(),bt.push(Ye))}}return bt},G=function X(bt,Gt){Gt=Gt||"OBJECTID";var ee,we={wkid:4326},Ye={};switch(bt.type){case"Point":Ye.x=bt.coordinates[0],Ye.y=bt.coordinates[1],bt.coordinates[2]&&(Ye.z=bt.coordinates[2]),Ye.spatialReference=we;break;case"MultiPoint":Ye.points=bt.coordinates.slice(0),bt.coordinates[0][2]&&(Ye.hasZ=!0),Ye.spatialReference=we;break;case"LineString":Ye.paths=[bt.coordinates.slice(0)],bt.coordinates[0][2]&&(Ye.hasZ=!0),Ye.spatialReference=we;break;case"MultiLineString":Ye.paths=bt.coordinates.slice(0),bt.coordinates[0][0][2]&&(Ye.hasZ=!0),Ye.spatialReference=we;break;case"Polygon":Ye.rings=N(bt.coordinates.slice(0)),bt.coordinates[0][0][2]&&(Ye.hasZ=!0),Ye.spatialReference=we;break;case"MultiPolygon":Ye.rings=function(xi){for(var Ui=[],hn=0;hn<xi.length;hn++)for(var Fn=N(xi[hn]),Mo=Fn.length-1;Mo>=0;Mo--){var qo=Fn[Mo].slice(0);Ui.push(qo)}return Ui}(bt.coordinates.slice(0)),bt.coordinates[0][0][0][2]&&(Ye.hasZ=!0),Ye.spatialReference=we;break;case"Feature":bt.geometry&&(Ye.geometry=X(bt.geometry,Gt)),Ye.attributes=bt.properties?w(bt.properties):{},bt.id&&(Ye.attributes[Gt]=bt.id);break;case"FeatureCollection":for(Ye=[],ee=0;ee<bt.features.length;ee++)Ye.push(X(bt.features[ee],Gt));break;case"GeometryCollection":for(Ye=[],ee=0;ee<bt.geometries.length;ee++)Ye.push(X(bt.geometries[ee],Gt))}return Ye},v='<a href="http://leafletjs.com" title="A JS library for interactive maps">Leaflet</a>';function M(X,bt){return G(X,bt)}function b(X,bt){return it(X,bt)}function k(X){if("NaN"!==X.xmin&&"NaN"!==X.ymin&&"NaN"!==X.xmax&&"NaN"!==X.ymax){var bt=te.latLng(X.ymin,X.xmin),Gt=te.latLng(X.ymax,X.xmax);return te.latLngBounds(bt,Gt)}return null}function _(X){return{xmin:(X=te.latLngBounds(X)).getSouthWest().lng,ymin:X.getSouthWest().lat,xmax:X.getNorthEast().lng,ymax:X.getNorthEast().lat,spatialReference:{wkid:4326}}}var y=/^(OBJECTID|FID|OID|ID)$/i;function O(X){var bt;if(X.objectIdFieldName)bt=X.objectIdFieldName;else if(X.fields){for(var Gt=0;Gt<=X.fields.length-1;Gt++)if("esriFieldTypeOID"===X.fields[Gt].type){bt=X.fields[Gt].name;break}if(!bt)for(Gt=0;Gt<=X.fields.length-1;Gt++)if(X.fields[Gt].name.match(y)){bt=X.fields[Gt].name;break}}return bt}function B(X){for(var bt in X.attributes)if(bt.match(y))return bt}function H(X,bt){var Gt,ee=X.features||X.results,we=ee&&ee.length;Gt=bt||O(X);var Ye={type:"FeatureCollection",features:[]};if(we)for(var xi=ee.length-1;xi>=0;xi--){var Ui=b(ee[xi],Gt||B(ee[xi]));Ye.features.push(Ui)}return Ye}function at(X){return"/"!==(X=te.Util.trim(X))[X.length-1]&&(X+="/"),X}function ft(X){if(-1!==X.url.indexOf("?")){X.requestParams=X.requestParams||{};var bt=X.url.substring(X.url.indexOf("?")+1);X.url=X.url.split("?")[0],X.requestParams=JSON.parse('{"'+decodeURI(bt).replace(/"/g,'\\"').replace(/&/g,'","').replace(/=/g,'":"')+'"}')}return X.url=at(X.url.split("?")[0]),X}function rt(X){return/^(?!.*utility\.arcgis\.com).*\.arcgis\.com.*FeatureServer/i.test(X)}function z(X){var bt;switch(X){case"Point":bt="esriGeometryPoint";break;case"MultiPoint":bt="esriGeometryMultipoint";break;case"LineString":case"MultiLineString":bt="esriGeometryPolyline";break;case"Polygon":case"MultiPolygon":bt="esriGeometryPolygon"}return bt}function q(X){return X.getSize().x-zt.attributionWidthOffset+"px"}function mt(X){if(X.attributionControl){if(X.attributionControl._esriAttributionLayerCount||(X.attributionControl._esriAttributionLayerCount=0),0===X.attributionControl._esriAttributionLayerCount){if(!X.attributionControl._esriAttributionAddedOnce){var bt=document.createElement("style");bt.type="text/css",bt.innerHTML=".esri-truncated-attribution:hover {white-space: normal;}",document.getElementsByTagName("head")[0].appendChild(bt);var Gt=document.createElement("style");Gt.type="text/css",Gt.innerHTML=".esri-truncated-attribution {vertical-align: -3px;white-space: nowrap;overflow: hidden;text-overflow: ellipsis;display: inline-block;transition: 0s white-space;transition-delay: 1s;max-width: "+q(X)+";}",document.getElementsByTagName("head")[0].appendChild(Gt),X.on("resize",function(ee){X.attributionControl&&(X.attributionControl._container.style.maxWidth=q(ee.target))}),X.attributionControl._esriAttributionAddedOnce=!0}X.attributionControl.setPrefix(v+' | Powered by <a href="https://www.esri.com">Esri</a>'),te.DomUtil.addClass(X.attributionControl._container,"esri-truncated-attribution:hover"),te.DomUtil.addClass(X.attributionControl._container,"esri-truncated-attribution")}X.attributionControl._esriAttributionLayerCount=X.attributionControl._esriAttributionLayerCount+1}}function pt(X){X.attributionControl&&(X.attributionControl._esriAttributionLayerCount&&1===X.attributionControl._esriAttributionLayerCount&&(X.attributionControl.setPrefix(v),te.DomUtil.removeClass(X.attributionControl._container,"esri-truncated-attribution:hover"),te.DomUtil.removeClass(X.attributionControl._container,"esri-truncated-attribution")),X.attributionControl._esriAttributionLayerCount=X.attributionControl._esriAttributionLayerCount-1)}function dt(X){var bt={geometry:null,geometryType:null};return X instanceof te.LatLngBounds?(bt.geometry=_(X),bt.geometryType="esriGeometryEnvelope",bt):(X.getLatLng&&(X=X.getLatLng()),X instanceof te.LatLng&&(X={type:"Point",coordinates:[X.lng,X.lat]}),X instanceof te.GeoJSON&&(X=X.getLayers()[0].feature.geometry,bt.geometry=M(X),bt.geometryType=z(X.type)),X.toGeoJSON&&(X=X.toGeoJSON()),"Feature"===X.type&&(X=X.geometry),"Point"===X.type||"LineString"===X.type||"Polygon"===X.type||"MultiPolygon"===X.type?(bt.geometry=M(X),bt.geometryType=z(X.type),bt):void A("invalid geometry passed to spatial query. Should be L.LatLng, L.LatLngBounds, L.Marker or a GeoJSON Point, Line, Polygon or MultiPolygon object"))}function Y(X,bt){jt.cors&&st(X,{},te.Util.bind(function(Gt,ee){if(!Gt){bt._esriAttributions=[];for(var we=0;we<ee.contributors.length;we++)for(var Ye=ee.contributors[we],xi=0;xi<Ye.coverageAreas.length;xi++){var Ui=Ye.coverageAreas[xi],hn=te.latLng(Ui.bbox[0],Ui.bbox[1]),Fn=te.latLng(Ui.bbox[2],Ui.bbox[3]);bt._esriAttributions.push({attribution:Ye.attribution,score:Ui.score,bounds:te.latLngBounds(hn,Fn),minZoom:Ui.zoomMin,maxZoom:Ui.zoomMax})}bt._esriAttributions.sort(function(Mo,qo){return qo.score-Mo.score}),lt({target:bt})}},this))}function lt(X){var bt=X.target,Gt=bt._esriAttributions;if(bt&&bt.attributionControl){var ee=bt.attributionControl._container.querySelector(".esri-dynamic-attribution");if(ee&&Gt){for(var we="",Ye=bt.getBounds(),xi=te.latLngBounds(Ye.getSouthWest().wrap(),Ye.getNorthEast().wrap()),Ui=bt.getZoom(),hn=0;hn<Gt.length;hn++){var Fn=Gt[hn],Mo=Fn.attribution;!we.match(Mo)&&Fn.bounds.intersects(xi)&&Ui>=Fn.minZoom&&Ui<=Fn.maxZoom&&(we+=", "+Mo)}we=we.substr(2),ee.innerHTML=we,ee.style.maxWidth=q(bt),bt.fire("attributionupdated",{attribution:we})}}}var ht={warn:A,cleanUrl:at,getUrlParams:ft,isArcgisOnline:rt,geojsonTypeToArcGIS:z,responseToFeatureCollection:H,geojsonToArcGIS:M,arcgisToGeoJSON:b,boundsToExtent:_,extentToBounds:k,calcAttributionWidth:q,setEsriAttribution:mt,_setGeometry:dt,_getAttributionData:Y,_updateMapAttribution:lt,_findIdAttributeFromFeature:B,_findIdAttributeFromResponse:O},Lt=te.Class.extend({options:{proxy:!1,useCors:wt},generateSetter:function(X,bt){return te.Util.bind(function(Gt){return this.params[X]=Gt,this},bt)},initialize:function(X){if(X.request&&X.options?(this._service=X,te.Util.setOptions(this,X.options)):(te.Util.setOptions(this,X),this.options.url=at(X.url)),this.params=te.Util.extend({},this.params||{}),this.setters)for(var bt in this.setters)this[bt]=this.generateSetter(this.setters[bt],this)},token:function(X){return this._service?this._service.authenticate(X):this.params.token=X,this},apikey:function(X){return this.token(X)},format:function(X){return this.params.returnUnformattedValues=!X,this},request:function(X,bt){return this.options.requestParams&&te.Util.extend(this.params,this.options.requestParams),this._service?this._service.request(this.path,this.params,X,bt):this._request("request",this.path,this.params,X,bt)},_request:function(X,bt,Gt,ee,we){var Ye=this.options.proxy?this.options.proxy+"?"+this.options.url+bt:this.options.url+bt;return"get"!==X&&"request"!==X||this.options.useCors?x[X](Ye,Gt,ee,we):x.get.JSONP(Ye,Gt,ee,we)}}),At=Lt.extend({setters:{offset:"resultOffset",limit:"resultRecordCount",fields:"outFields",precision:"geometryPrecision",featureIds:"objectIds",returnGeometry:"returnGeometry",returnM:"returnM",transform:"datumTransformation",token:"token"},path:"query",params:{returnGeometry:!0,where:"1=1",outSR:4326,outFields:"*"},within:function(X){return this._setGeometryParams(X),this.params.spatialRel="esriSpatialRelContains",this},intersects:function(X){return this._setGeometryParams(X),this.params.spatialRel="esriSpatialRelIntersects",this},contains:function(X){return this._setGeometryParams(X),this.params.spatialRel="esriSpatialRelWithin",this},crosses:function(X){return this._setGeometryParams(X),this.params.spatialRel="esriSpatialRelCrosses",this},touches:function(X){return this._setGeometryParams(X),this.params.spatialRel="esriSpatialRelTouches",this},overlaps:function(X){return this._setGeometryParams(X),this.params.spatialRel="esriSpatialRelOverlaps",this},bboxIntersects:function(X){return this._setGeometryParams(X),this.params.spatialRel="esriSpatialRelEnvelopeIntersects",this},indexIntersects:function(X){return this._setGeometryParams(X),this.params.spatialRel="esriSpatialRelIndexIntersects",this},nearby:function(X,bt){return X=te.latLng(X),this.params.geometry=[X.lng,X.lat],this.params.geometryType="esriGeometryPoint",this.params.spatialRel="esriSpatialRelIntersects",this.params.units="esriSRUnit_Meter",this.params.distance=bt,this.params.inSR=4326,this},where:function(X){return this.params.where=X,this},between:function(X,bt){return this.params.time=[X.valueOf(),bt.valueOf()],this},simplify:function(X,bt){var Gt=Math.abs(X.getBounds().getWest()-X.getBounds().getEast());return this.params.maxAllowableOffset=Gt/X.getSize().y*bt,this},orderBy:function(X,bt){return bt=bt||"ASC",this.params.orderByFields=this.params.orderByFields?this.params.orderByFields+",":"",this.params.orderByFields+=[X,bt].join(" "),this},run:function(X,bt){return this._cleanParams(),this.options.isModern||rt(this.options.url)&&void 0===this.options.isModern?(this.params.f="geojson",this.request(function(Gt,ee){this._trapSQLerrors(Gt),X.call(bt,Gt,ee,ee)},this)):this.request(function(Gt,ee){this._trapSQLerrors(Gt),X.call(bt,Gt,ee&&H(ee),ee)},this)},count:function(X,bt){return this._cleanParams(),this.params.returnCountOnly=!0,this.request(function(Gt,ee){X.call(this,Gt,ee&&ee.count,ee)},bt)},ids:function(X,bt){return this._cleanParams(),this.params.returnIdsOnly=!0,this.request(function(Gt,ee){X.call(this,Gt,ee&&ee.objectIds,ee)},bt)},bounds:function(X,bt){return this._cleanParams(),this.params.returnExtentOnly=!0,this.request(function(Gt,ee){ee&&ee.extent&&k(ee.extent)?X.call(bt,Gt,k(ee.extent),ee):X.call(bt,Gt={message:"Invalid Bounds"},null,ee)},bt)},distinct:function(){return this.params.returnGeometry=!1,this.params.returnDistinctValues=!0,this},pixelSize:function(X){var bt=te.point(X);return this.params.pixelSize=[bt.x,bt.y],this},layer:function(X){return this.path=X+"/query",this},_trapSQLerrors:function(X){X&&"400"===X.code&&A("one common syntax error in query requests is encasing string values in double quotes instead of single quotes")},_cleanParams:function(){delete this.params.returnIdsOnly,delete this.params.returnExtentOnly,delete this.params.returnCountOnly},_setGeometryParams:function(X){this.params.inSR=4326;var bt=dt(X);this.params.geometry=bt.geometry,this.params.geometryType=bt.geometryType}});function Wt(X){return new At(X)}var Ot=Lt.extend({setters:{contains:"contains",text:"searchText",fields:"searchFields",spatialReference:"sr",sr:"sr",layers:"layers",returnGeometry:"returnGeometry",maxAllowableOffset:"maxAllowableOffset",precision:"geometryPrecision",dynamicLayers:"dynamicLayers",returnZ:"returnZ",returnM:"returnM",gdbVersion:"gdbVersion",token:"token"},path:"find",params:{sr:4326,contains:!0,returnGeometry:!0,returnZ:!0,returnM:!1},layerDefs:function(X,bt){return this.params.layerDefs=this.params.layerDefs?this.params.layerDefs+";":"",this.params.layerDefs+=[X,bt].join(":"),this},simplify:function(X,bt){var Gt=Math.abs(X.getBounds().getWest()-X.getBounds().getEast());return this.params.maxAllowableOffset=Gt/X.getSize().y*bt,this},run:function(X,bt){return this.request(function(Gt,ee){X.call(bt,Gt,ee&&H(ee),ee)},bt)}});function se(X){return new Ot(X)}var _e=Lt.extend({path:"identify",between:function(X,bt){return this.params.time=[X.valueOf(),bt.valueOf()],this}}),We=_e.extend({setters:{layers:"layers",precision:"geometryPrecision",tolerance:"tolerance",returnGeometry:"returnGeometry"},params:{sr:4326,layers:"all",tolerance:3,returnGeometry:!0},on:function(X){var bt=_(X.getBounds()),Gt=X.getSize();return this.params.imageDisplay=[Gt.x,Gt.y,96],this.params.mapExtent=[bt.xmin,bt.ymin,bt.xmax,bt.ymax],this},at:function(X){return 2===X.length&&(X=te.latLng(X)),this._setGeometryParams(X),this},layerDef:function(X,bt){return this.params.layerDefs=this.params.layerDefs?this.params.layerDefs+";":"",this.params.layerDefs+=[X,bt].join(":"),this},simplify:function(X,bt){var Gt=Math.abs(X.getBounds().getWest()-X.getBounds().getEast());return this.params.maxAllowableOffset=Gt/X.getSize().y*bt,this},run:function(X,bt){return this.request(function(Gt,ee){if(Gt)X.call(bt,Gt,void 0,ee);else{var we=H(ee);ee.results=ee.results.reverse();for(var Ye=0;Ye<we.features.length;Ye++)we.features[Ye].layerId=ee.results[Ye].layerId;X.call(bt,void 0,we,ee)}})},_setGeometryParams:function(X){var bt=dt(X);this.params.geometry=bt.geometry,this.params.geometryType=bt.geometryType}});function He(X){return new We(X)}var Fe=_e.extend({setters:{setMosaicRule:"mosaicRule",setRenderingRule:"renderingRule",setPixelSize:"pixelSize",returnCatalogItems:"returnCatalogItems",returnGeometry:"returnGeometry"},params:{returnGeometry:!1},at:function(X){return X=te.latLng(X),this.params.geometry=JSON.stringify({x:X.lng,y:X.lat,spatialReference:{wkid:4326}}),this.params.geometryType="esriGeometryPoint",this},getMosaicRule:function(){return this.params.mosaicRule},getRenderingRule:function(){return this.params.renderingRule},getPixelSize:function(){return this.params.pixelSize},run:function(X,bt){return this.request(function(Gt,ee){X.call(bt,Gt,ee&&this._responseToGeoJSON(ee),ee)},this)},_responseToGeoJSON:function(X){var bt=X.location,Gt=X.catalogItems,ee=X.catalogItemVisibilities,we={pixel:{type:"Feature",geometry:{type:"Point",coordinates:[bt.x,bt.y]},crs:{type:"EPSG",properties:{code:bt.spatialReference.wkid}},properties:{OBJECTID:X.objectId,name:X.name,value:X.value},id:X.objectId}};if(X.properties&&X.properties.Values&&(we.pixel.properties.values=X.properties.Values),Gt&&Gt.features&&(we.catalogItems=H(Gt),ee&&ee.length===we.catalogItems.features.length))for(var Ye=ee.length-1;Ye>=0;Ye--)we.catalogItems.features[Ye].properties.catalogItemVisibility=ee[Ye];return we}});function pe(X){return new Fe(X)}var Me=te.Evented.extend({options:{proxy:!1,useCors:wt,timeout:0},initialize:function(X){X=X||{},this._requestQueue=[],this._authenticating=!1,te.Util.setOptions(this,X),this.options.url=at(this.options.url)},get:function(X,bt,Gt,ee){return this._request("get",X,bt,Gt,ee)},post:function(X,bt,Gt,ee){return this._request("post",X,bt,Gt,ee)},request:function(X,bt,Gt,ee){return this._request("request",X,bt,Gt,ee)},metadata:function(X,bt){return this._request("get","",{},X,bt)},authenticate:function(X){return this._authenticating=!1,this.options.token=X,this._runQueue(),this},getTimeout:function(){return this.options.timeout},setTimeout:function(X){this.options.timeout=X},_request:function(X,bt,Gt,ee,we){this.fire("requeststart",{url:this.options.url+bt,params:Gt,method:X},!0);var Ye=this._createServiceCallback(X,bt,Gt,ee,we);if(this.options.token&&(Gt.token=this.options.token),this.options.requestParams&&te.Util.extend(Gt,this.options.requestParams),!this._authenticating){var xi=this.options.proxy?this.options.proxy+"?"+this.options.url+bt:this.options.url+bt;return"get"!==X&&"request"!==X||this.options.useCors?x[X](xi,Gt,Ye,we):x.get.JSONP(xi,Gt,Ye,we)}this._requestQueue.push([X,bt,Gt,ee,we])},_createServiceCallback:function(X,bt,Gt,ee,we){return te.Util.bind(function(Ye,xi){!Ye||499!==Ye.code&&498!==Ye.code||(this._authenticating=!0,this._requestQueue.push([X,bt,Gt,ee,we]),this.fire("authenticationrequired",{authenticate:te.Util.bind(this.authenticate,this)},!0),Ye.authenticate=te.Util.bind(this.authenticate,this)),ee.call(we,Ye,xi),Ye?this.fire("requesterror",{url:this.options.url+bt,params:Gt,message:Ye.message,code:Ye.code,method:X},!0):this.fire("requestsuccess",{url:this.options.url+bt,params:Gt,response:xi,method:X},!0),this.fire("requestend",{url:this.options.url+bt,params:Gt,method:X},!0)},this)},_runQueue:function(){for(var X=this._requestQueue.length-1;X>=0;X--){var bt=this._requestQueue[X];this[bt.shift()].apply(this,bt)}this._requestQueue=[]}}),me=Me.extend({identify:function(){return He(this)},find:function(){return se(this)},query:function(){return Wt(this)}});function qt(X){return new me(X)}var Kt=Me.extend({query:function(){return Wt(this)},identify:function(){return pe(this)}});function xe(X){return new Kt(X)}var be=Me.extend({options:{idAttribute:"OBJECTID"},query:function(){return Wt(this)},addFeature:function(X,bt,Gt){this.addFeatures(X,bt,Gt)},addFeatures:function(X,bt,Gt){for(var ee=X.features?X.features:[X],we=ee.length-1;we>=0;we--)delete ee[we].id;return X=M(X),this.post("addFeatures",{features:X=ee.length>1?X:[X]},function(Ye,xi){bt&&bt.call(Gt,Ye||xi.addResults[0].error,xi&&xi.addResults?xi.addResults.length>1?xi.addResults:xi.addResults[0]:void 0)},Gt)},updateFeature:function(X,bt,Gt){this.updateFeatures(X,bt,Gt)},updateFeatures:function(X,bt,Gt){var ee=X.features?X.features:[X];return X=M(X,this.options.idAttribute),this.post("updateFeatures",{features:X=ee.length>1?X:[X]},function(we,Ye){bt&&bt.call(Gt,we||Ye.updateResults[0].error,Ye&&Ye.updateResults?Ye.updateResults.length>1?Ye.updateResults:Ye.updateResults[0]:void 0)},Gt)},deleteFeature:function(X,bt,Gt){this.deleteFeatures(X,bt,Gt)},deleteFeatures:function(X,bt,Gt){return this.post("deleteFeatures",{objectIds:X},function(ee,we){bt&&bt.call(Gt,ee||we.deleteResults[0].error,we&&we.deleteResults?we.deleteResults.length>1?we.deleteResults:we.deleteResults[0]:void 0)},Gt)}});function Te(X){return new be(X)}var ye="https:"!==window.location.protocol?"http:":"https:",oi=te.TileLayer.extend({statics:{TILES:{Streets:{urlTemplate:ye+"//{s}.arcgisonline.com/ArcGIS/rest/services/World_Street_Map/MapServer/tile/{z}/{y}/{x}",options:{minZoom:1,maxZoom:19,subdomains:["server","services"],attribution:"USGS, NOAA",attributionUrl:"https://static.arcgis.com/attribution/World_Street_Map"}},Topographic:{urlTemplate:ye+"//{s}.arcgisonline.com/ArcGIS/rest/services/World_Topo_Map/MapServer/tile/{z}/{y}/{x}",options:{minZoom:1,maxZoom:19,subdomains:["server","services"],attribution:"USGS, NOAA",attributionUrl:"https://static.arcgis.com/attribution/World_Topo_Map"}},Oceans:{urlTemplate:ye+"//{s}.arcgisonline.com/arcgis/rest/services/Ocean/World_Ocean_Base/MapServer/tile/{z}/{y}/{x}",options:{minZoom:1,maxZoom:16,subdomains:["server","services"],attribution:"USGS, NOAA",attributionUrl:"https://static.arcgis.com/attribution/Ocean_Basemap"}},OceansLabels:{urlTemplate:ye+"//{s}.arcgisonline.com/arcgis/rest/services/Ocean/World_Ocean_Reference/MapServer/tile/{z}/{y}/{x}",options:{minZoom:1,maxZoom:16,subdomains:["server","services"],pane:xt?"esri-labels":"tilePane",attribution:""}},NationalGeographic:{urlTemplate:ye+"//{s}.arcgisonline.com/ArcGIS/rest/services/NatGeo_World_Map/MapServer/tile/{z}/{y}/{x}",options:{minZoom:1,maxZoom:16,subdomains:["server","services"],attribution:"National Geographic, DeLorme, HERE, UNEP-WCMC, USGS, NASA, ESA, METI, NRCAN, GEBCO, NOAA, increment P Corp."}},DarkGray:{urlTemplate:ye+"//{s}.arcgisonline.com/ArcGIS/rest/services/Canvas/World_Dark_Gray_Base/MapServer/tile/{z}/{y}/{x}",options:{minZoom:1,maxZoom:16,subdomains:["server","services"],attribution:"HERE, DeLorme, MapmyIndia, &copy; OpenStreetMap contributors"}},DarkGrayLabels:{urlTemplate:ye+"//{s}.arcgisonline.com/ArcGIS/rest/services/Canvas/World_Dark_Gray_Reference/MapServer/tile/{z}/{y}/{x}",options:{minZoom:1,maxZoom:16,subdomains:["server","services"],pane:xt?"esri-labels":"tilePane",attribution:""}},Gray:{urlTemplate:ye+"//{s}.arcgisonline.com/ArcGIS/rest/services/Canvas/World_Light_Gray_Base/MapServer/tile/{z}/{y}/{x}",options:{minZoom:1,maxZoom:16,subdomains:["server","services"],attribution:"HERE, DeLorme, MapmyIndia, &copy; OpenStreetMap contributors"}},GrayLabels:{urlTemplate:ye+"//{s}.arcgisonline.com/ArcGIS/rest/services/Canvas/World_Light_Gray_Reference/MapServer/tile/{z}/{y}/{x}",options:{minZoom:1,maxZoom:16,subdomains:["server","services"],pane:xt?"esri-labels":"tilePane",attribution:""}},Imagery:{urlTemplate:ye+"//{s}.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer/tile/{z}/{y}/{x}",options:{minZoom:1,maxZoom:19,subdomains:["server","services"],attribution:"DigitalGlobe, GeoEye, i-cubed, USDA, USGS, AEX, Getmapping, Aerogrid, IGN, IGP, swisstopo, and the GIS User Community",attributionUrl:"https://static.arcgis.com/attribution/World_Imagery"}},ImageryLabels:{urlTemplate:ye+"//{s}.arcgisonline.com/ArcGIS/rest/services/Reference/World_Boundaries_and_Places/MapServer/tile/{z}/{y}/{x}",options:{minZoom:1,maxZoom:19,subdomains:["server","services"],pane:xt?"esri-labels":"tilePane",attribution:""}},ImageryTransportation:{urlTemplate:ye+"//{s}.arcgisonline.com/ArcGIS/rest/services/Reference/World_Transportation/MapServer/tile/{z}/{y}/{x}",options:{minZoom:1,maxZoom:19,subdomains:["server","services"],pane:xt?"esri-labels":"tilePane",attribution:""}},ShadedRelief:{urlTemplate:ye+"//{s}.arcgisonline.com/ArcGIS/rest/services/World_Shaded_Relief/MapServer/tile/{z}/{y}/{x}",options:{minZoom:1,maxZoom:13,subdomains:["server","services"],attribution:"USGS"}},ShadedReliefLabels:{urlTemplate:ye+"//{s}.arcgisonline.com/ArcGIS/rest/services/Reference/World_Boundaries_and_Places_Alternate/MapServer/tile/{z}/{y}/{x}",options:{minZoom:1,maxZoom:12,subdomains:["server","services"],pane:xt?"esri-labels":"tilePane",attribution:""}},Terrain:{urlTemplate:ye+"//{s}.arcgisonline.com/ArcGIS/rest/services/World_Terrain_Base/MapServer/tile/{z}/{y}/{x}",options:{minZoom:1,maxZoom:13,subdomains:["server","services"],attribution:"USGS, NOAA"}},TerrainLabels:{urlTemplate:ye+"//{s}.arcgisonline.com/ArcGIS/rest/services/Reference/World_Reference_Overlay/MapServer/tile/{z}/{y}/{x}",options:{minZoom:1,maxZoom:13,subdomains:["server","services"],pane:xt?"esri-labels":"tilePane",attribution:""}},USATopo:{urlTemplate:ye+"//{s}.arcgisonline.com/ArcGIS/rest/services/USA_Topo_Maps/MapServer/tile/{z}/{y}/{x}",options:{minZoom:1,maxZoom:15,subdomains:["server","services"],attribution:"USGS, National Geographic Society, i-cubed"}},ImageryClarity:{urlTemplate:ye+"//clarity.maptiles.arcgis.com/arcgis/rest/services/World_Imagery/MapServer/tile/{z}/{y}/{x}",options:{minZoom:1,maxZoom:19,attribution:"Esri, DigitalGlobe, GeoEye, Earthstar Geographics, CNES/Airbus DS, USDA, USGS, AeroGRID, IGN, and the GIS User Community"}},Physical:{urlTemplate:ye+"//{s}.arcgisonline.com/arcgis/rest/services/World_Physical_Map/MapServer/tile/{z}/{y}/{x}",options:{minZoom:1,maxZoom:8,subdomains:["server","services"],attribution:"U.S. National Park Service"}},ImageryFirefly:{urlTemplate:ye+"//fly.maptiles.arcgis.com/arcgis/rest/services/World_Imagery_Firefly/MapServer/tile/{z}/{y}/{x}",options:{minZoom:1,maxZoom:19,attribution:"Esri, DigitalGlobe, GeoEye, Earthstar Geographics, CNES/Airbus DS, USDA, USGS, AeroGRID, IGN, and the GIS User Community",attributionUrl:"https://static.arcgis.com/attribution/World_Imagery"}}}},initialize:function(X,bt){var Gt;if("object"==typeof X&&X.urlTemplate&&X.options)Gt=X;else{if("string"!=typeof X||!oi.TILES[X])throw new Error('L.esri.BasemapLayer: Invalid parameter. Use one of "Streets", "Topographic", "Oceans", "OceansLabels", "NationalGeographic", "Physical", "Gray", "GrayLabels", "DarkGray", "DarkGrayLabels", "Imagery", "ImageryLabels", "ImageryTransportation", "ImageryClarity", "ImageryFirefly", ShadedRelief", "ShadedReliefLabels", "Terrain", "TerrainLabels" or "USATopo"');Gt=oi.TILES[X]}var ee=te.Util.extend(Gt.options,bt);te.Util.setOptions(this,ee),this.options.ignoreDeprecationWarning||console.warn("WARNING: L.esri.BasemapLayer uses data services that are in mature support and are not being updated. Please use L.esri.Vector.vectorBasemapLayer instead. More info: https://esriurl.com/esri-leaflet-basemap"),this.options.token&&-1===Gt.urlTemplate.indexOf("token=")&&(Gt.urlTemplate+="?token="+this.options.token),this.options.proxy&&(Gt.urlTemplate=this.options.proxy+"?"+Gt.urlTemplate),te.TileLayer.prototype.initialize.call(this,Gt.urlTemplate,ee)},onAdd:function(X){mt(X),"esri-labels"===this.options.pane&&this._initPane(),this.options.attributionUrl&&Y((this.options.proxy?this.options.proxy+"?":"")+this.options.attributionUrl,X),X.on("moveend",lt),te.TileLayer.prototype.onAdd.call(this,X)},onRemove:function(X){pt(X),X.off("moveend",lt),te.TileLayer.prototype.onRemove.call(this,X)},_initPane:function(){if(!this._map.getPane(this.options.pane)){var X=this._map.createPane(this.options.pane);X.style.pointerEvents="none",X.style.zIndex=500}},getAttribution:function(){if(this.options.attribution)var X='<span class="esri-dynamic-attribution">'+this.options.attribution+"</span>";return X}}),fi=te.TileLayer.extend({options:{zoomOffsetAllowance:.1,errorTileUrl:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAQAAAAEABAMAAACuXLVVAAAAA1BMVEUzNDVszlHHAAAAAXRSTlMAQObYZgAAAAlwSFlzAAAAAAAAAAAB6mUWpAAAADZJREFUeJztwQEBAAAAgiD/r25IQAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA7waBAAABw08RwAAAAABJRU5ErkJggg=="},statics:{MercatorZoomLevels:{0:156543.033928,1:78271.5169639999,2:39135.7584820001,3:19567.8792409999,4:9783.93962049996,5:4891.96981024998,6:2445.98490512499,7:1222.99245256249,8:611.49622628138,9:305.748113140558,10:152.874056570411,11:76.4370282850732,12:38.2185141425366,13:19.1092570712683,14:9.55462853563415,15:4.77731426794937,16:2.38865713397468,17:1.19432856685505,18:.597164283559817,19:.298582141647617,20:.14929107082381,21:.07464553541191,22:.0373227677059525,23:.0186613838529763}},initialize:function(X){X=ft(X=te.Util.setOptions(this,X)),this.tileUrl=(X.proxy?X.proxy+"?":"")+X.url+"tile/{z}/{y}/{x}"+(X.requestParams&&Object.keys(X.requestParams).length>0?te.Util.getParamString(X.requestParams):""),-1!==X.url.indexOf("{s}")&&X.subdomains&&(X.url=X.url.replace("{s}",X.subdomains[0])),this.service=qt(X),this.service.addEventParent(this),new RegExp(/tiles.arcgis(online)?\.com/g).test(X.url)&&(this.tileUrl=this.tileUrl.replace("://tiles","://tiles{s}"),X.subdomains=["1","2","3","4"]),this.options.token&&(this.tileUrl+="?token="+this.options.token),te.TileLayer.prototype.initialize.call(this,this.tileUrl,X)},getTileUrl:function(X){var bt=this._getZoomForUrl();return te.Util.template(this.tileUrl,te.Util.extend({s:this._getSubdomain(X),x:X.x,y:X.y,z:this._lodMap&&this._lodMap[bt]?this._lodMap[bt]:bt},this.options))},createTile:function(X,bt){var Gt=document.createElement("img");return te.DomEvent.on(Gt,"load",te.Util.bind(this._tileOnLoad,this,bt,Gt)),te.DomEvent.on(Gt,"error",te.Util.bind(this._tileOnError,this,bt,Gt)),this.options.crossOrigin&&(Gt.crossOrigin=""),Gt.alt="",!this._lodMap||this._lodMap&&this._lodMap[this._getZoomForUrl()]?Gt.src=this.getTileUrl(X):this.once("lodmap",function(){Gt.src=this.getTileUrl(X)},this),Gt},onAdd:function(X){mt(X),this._lodMap||this.metadata(function(bt,Gt){if(!bt&&Gt.spatialReference){var ee=Gt.spatialReference.latestWkid||Gt.spatialReference.wkid;if(!this.options.attribution&&X.attributionControl&&Gt.copyrightText&&(this.options.attribution=Gt.copyrightText,X.attributionControl.addAttribution(this.getAttribution())),X.options.crs!==te.CRS.EPSG3857||102100!==ee&&3857!==ee)X.options.crs&&X.options.crs.code&&X.options.crs.code.indexOf(ee)>-1||A("L.esri.TiledMapLayer is using a non-mercator spatial reference. Support may be available through Proj4Leaflet https://developers.arcgis.com/esri-leaflet/samples/non-mercator-projection/");else{this._lodMap={};for(var we=Gt.tileInfo.lods,Ye=fi.MercatorZoomLevels,xi=0;xi<we.length;xi++){var Ui=we[xi];for(var hn in Ye)if(this._withinPercentage(Ui.resolution,Ye[hn],this.options.zoomOffsetAllowance)){this._lodMap[hn]=Ui.level;break}}this.fire("lodmap")}}},this),te.TileLayer.prototype.onAdd.call(this,X)},onRemove:function(X){pt(X),te.TileLayer.prototype.onRemove.call(this,X)},metadata:function(X,bt){return this.service.metadata(X,bt),this},identify:function(){return this.service.identify()},find:function(){return this.service.find()},query:function(){return this.service.query()},authenticate:function(X){var bt="?token="+X;return this.tileUrl=this.options.token?this.tileUrl.replace(/\?token=(.+)/g,bt):this.tileUrl+bt,this.options.token=X,this.service.authenticate(X),this},_withinPercentage:function(X,bt,Gt){return Math.abs(X/bt-1)<Gt}}),tn=te.ImageOverlay.extend({onAdd:function(X){this._topLeft=X.getPixelBounds().min,te.ImageOverlay.prototype.onAdd.call(this,X)},_reset:function(){this._map.options.crs===te.CRS.EPSG3857?te.ImageOverlay.prototype._reset.call(this):te.DomUtil.setPosition(this._image,this._topLeft.subtract(this._map.getPixelOrigin()))}}),Ii=te.Layer.extend({options:{opacity:1,position:"front",f:"image",useCors:wt,attribution:null,interactive:!1,alt:""},onAdd:function(X){mt(X),this.options.zIndex&&(this.options.position=null),this._update=te.Util.throttle(this._update,this.options.updateInterval,this),X.on("moveend",this._update,this),this._currentImage&&this._currentImage._bounds.equals(this._map.getBounds())?X.addLayer(this._currentImage):this._currentImage&&(this._map.removeLayer(this._currentImage),this._currentImage=null),this._update(),this._popup&&(this._map.on("click",this._getPopupData,this),this._map.on("dblclick",this._resetPopupState,this)),this.metadata(function(bt,Gt){!bt&&!this.options.attribution&&X.attributionControl&&Gt.copyrightText&&(this.options.attribution=Gt.copyrightText,X.attributionControl.addAttribution(this.getAttribution()))},this)},onRemove:function(X){pt(X),this._currentImage&&this._map.removeLayer(this._currentImage),this._popup&&(this._map.off("click",this._getPopupData,this),this._map.off("dblclick",this._resetPopupState,this)),this._map.off("moveend",this._update,this)},bindPopup:function(X,bt){return this._shouldRenderPopup=!1,this._lastClick=!1,this._popup=te.popup(bt),this._popupFunction=X,this._map&&(this._map.on("click",this._getPopupData,this),this._map.on("dblclick",this._resetPopupState,this)),this},unbindPopup:function(){return this._map&&(this._map.closePopup(this._popup),this._map.off("click",this._getPopupData,this),this._map.off("dblclick",this._resetPopupState,this)),this._popup=!1,this},bringToFront:function(){return this.options.position="front",this._currentImage&&(this._currentImage.bringToFront(),this._setAutoZIndex(Math.max)),this},bringToBack:function(){return this.options.position="back",this._currentImage&&(this._currentImage.bringToBack(),this._setAutoZIndex(Math.min)),this},setZIndex:function(X){return this.options.zIndex=X,this._currentImage&&this._currentImage.setZIndex(X),this},_setAutoZIndex:function(X){if(this._currentImage){for(var bt,Gt=this._currentImage.getPane().children,ee=-X(-1/0,1/0),we=0,Ye=Gt.length;we<Ye;we++)bt=Gt[we].style.zIndex,Gt[we]!==this._currentImage._image&&bt&&(ee=X(ee,+bt));isFinite(ee)&&(this.options.zIndex=ee+X(-1,1),this.setZIndex(this.options.zIndex))}},getAttribution:function(){return this.options.attribution},getOpacity:function(){return this.options.opacity},setOpacity:function(X){return this.options.opacity=X,this._currentImage&&this._currentImage.setOpacity(X),this},getTimeRange:function(){return[this.options.from,this.options.to]},setTimeRange:function(X,bt){return this.options.from=X,this.options.to=bt,this._update(),this},metadata:function(X,bt){return this.service.metadata(X,bt),this},authenticate:function(X){return this.service.authenticate(X),this},redraw:function(){this._update()},_renderImage:function(X,bt,Gt){if(this._map){if(Gt&&(X="data:"+Gt+";base64,"+X),!X)return;var ee=new tn(X,bt,{opacity:0,crossOrigin:this.options.withCredentials?"use-credentials":this.options.useCors,alt:this.options.alt,pane:this.options.pane||this.getPane(),interactive:this.options.interactive}).addTo(this._map),we=function(){this._map.removeLayer(ee),this.fire("error"),ee.off("load",Ye,this)},Ye=function(xi){if(ee.off("error",we,this),this._map){var Ui=xi.target,hn=this._currentImage;Ui._bounds.equals(bt)&&Ui._bounds.equals(this._map.getBounds())?(this._currentImage=Ui,"front"===this.options.position?this.bringToFront():"back"===this.options.position&&this.bringToBack(),this.options.zIndex&&this.setZIndex(this.options.zIndex),this._map&&this._currentImage._map?this._currentImage.setOpacity(this.options.opacity):this._currentImage._map.removeLayer(this._currentImage),hn&&this._map&&this._map.removeLayer(hn),hn&&hn._map&&hn._map.removeLayer(hn)):this._map.removeLayer(Ui)}this.fire("load",{bounds:bt})};ee.once("error",we,this),ee.once("load",Ye,this)}},_update:function(){if(this._map){var X=this._map.getZoom(),bt=this._map.getBounds();if(!(this._animatingZoom||this._map._panTransition&&this._map._panTransition._inProgress))if(X>this.options.maxZoom||X<this.options.minZoom)this._currentImage&&(this._currentImage._map.removeLayer(this._currentImage),this._currentImage=null);else{var Gt=this._buildExportParams();te.Util.extend(Gt,this.options.requestParams),Gt?(this._requestExport(Gt,bt),this.fire("loading",{bounds:bt})):this._currentImage&&(this._currentImage._map.removeLayer(this._currentImage),this._currentImage=null)}}},_renderPopup:function(X,bt,Gt,ee){if(X=te.latLng(X),this._shouldRenderPopup&&this._lastClick.equals(X)){var we=this._popupFunction(bt,Gt,ee);we&&this._popup.setLatLng(X).setContent(we).openOn(this._map)}},_resetPopupState:function(X){this._shouldRenderPopup=!1,this._lastClick=X.latlng},_calculateBbox:function(){var X=this._map.getPixelBounds(),bt=this._map.unproject(X.getBottomLeft()),Gt=this._map.unproject(X.getTopRight()),ee=this._map.options.crs.project(Gt),we=this._map.options.crs.project(bt),Ye=te.bounds(ee,we);return[Ye.getBottomLeft().x,Ye.getBottomLeft().y,Ye.getTopRight().x,Ye.getTopRight().y].join(",")},_calculateImageSize:function(){var X=this._map.getPixelBounds(),bt=this._map.getSize(),Gt=this._map.unproject(X.getBottomLeft()),ee=this._map.unproject(X.getTopRight()),we=this._map.latLngToLayerPoint(ee).y,Ye=this._map.latLngToLayerPoint(Gt).y;return(we>0||Ye<bt.y)&&(bt.y=Ye-we),bt.x+","+bt.y}}),Pi=Ii.extend({options:{updateInterval:150,format:"jpgpng",transparent:!0,f:"image"},query:function(){return this.service.query()},identify:function(){return this.service.identify()},initialize:function(X){X=ft(X),this.service=xe(X),this.service.addEventParent(this),te.Util.setOptions(this,X)},setPixelType:function(X){return this.options.pixelType=X,this._update(),this},getPixelType:function(){return this.options.pixelType},setBandIds:function(X){return this.options.bandIds=te.Util.isArray(X)?X.join(","):X.toString(),this._update(),this},getBandIds:function(){return this.options.bandIds},setNoData:function(X,bt){return this.options.noData=te.Util.isArray(X)?X.join(","):X.toString(),bt&&(this.options.noDataInterpretation=bt),this._update(),this},getNoData:function(){return this.options.noData},getNoDataInterpretation:function(){return this.options.noDataInterpretation},setRenderingRule:function(X){this.options.renderingRule=X,this._update()},getRenderingRule:function(){return this.options.renderingRule},setMosaicRule:function(X){this.options.mosaicRule=X,this._update()},getMosaicRule:function(){return this.options.mosaicRule},_getPopupData:function(X){var bt=te.Util.bind(function(ee,we,Ye){ee||setTimeout(te.Util.bind(function(){this._renderPopup(X.latlng,ee,we,Ye)},this),300)},this),Gt=this.identify().at(X.latlng);this.options.mosaicRule&&Gt.setMosaicRule(this.options.mosaicRule),Gt.run(bt),this._shouldRenderPopup=!0,this._lastClick=X.latlng},_buildExportParams:function(){var X=parseInt(this._map.options.crs.code.split(":")[1],10),bt={bbox:this._calculateBbox(),size:this._calculateImageSize(),format:this.options.format,transparent:this.options.transparent,bboxSR:X,imageSR:X};return this.options.from&&this.options.to&&(bt.time=this.options.from.valueOf()+","+this.options.to.valueOf()),this.options.pixelType&&(bt.pixelType=this.options.pixelType),this.options.interpolation&&(bt.interpolation=this.options.interpolation),this.options.compressionQuality&&(bt.compressionQuality=this.options.compressionQuality),this.options.bandIds&&(bt.bandIds=this.options.bandIds),(0===this.options.noData||this.options.noData)&&(bt.noData=this.options.noData),this.options.noDataInterpretation&&(bt.noDataInterpretation=this.options.noDataInterpretation),this.service.options.token&&(bt.token=this.service.options.token),this.options.renderingRule&&(bt.renderingRule=JSON.stringify(this.options.renderingRule)),this.options.mosaicRule&&(bt.mosaicRule=JSON.stringify(this.options.mosaicRule)),bt},_requestExport:function(X,bt){if("json"===this.options.f)this.service.request("exportImage",X,function(ee,we){ee||(this.options.token&&(we.href+="?token="+this.options.token),this.options.proxy&&(we.href=this.options.proxy+"?"+we.href),this._renderImage(we.href,bt))},this);else{X.f="image";var Gt=this.options.url+"exportImage"+te.Util.getParamString(X);this.options.proxy&&(Gt=this.options.proxy+"?"+Gt),this._renderImage(Gt,bt)}}}),Ji=Ii.extend({options:{updateInterval:150,layers:!1,layerDefs:!1,timeOptions:!1,format:"png32",transparent:!0,f:"json"},initialize:function(X){X=ft(X),this.service=qt(X),this.service.addEventParent(this),te.Util.setOptions(this,X)},getDynamicLayers:function(){return this.options.dynamicLayers},setDynamicLayers:function(X){return this.options.dynamicLayers=X,this._update(),this},getLayers:function(){return this.options.layers},setLayers:function(X){return this.options.layers=X,this._update(),this},getLayerDefs:function(){return this.options.layerDefs},setLayerDefs:function(X){return this.options.layerDefs=X,this._update(),this},getTimeOptions:function(){return this.options.timeOptions},setTimeOptions:function(X){return this.options.timeOptions=X,this._update(),this},query:function(){return this.service.query()},identify:function(){return this.service.identify()},find:function(){return this.service.find()},_getPopupData:function(X){var bt,Gt=te.Util.bind(function(we,Ye,xi){we||setTimeout(te.Util.bind(function(){this._renderPopup(X.latlng,we,Ye,xi)},this),300)},this);if((bt=this.options.popup?this.options.popup.on(this._map).at(X.latlng):this.identify().on(this._map).at(X.latlng)).params.maxAllowableOffset||bt.simplify(this._map,.5),this.options.popup&&this.options.popup.params&&this.options.popup.params.layers||bt.layers(this.options.layers?"visible:"+this.options.layers.join(","):"visible"),this.options.layerDefs&&"string"!=typeof this.options.layerDefs&&!bt.params.layerDefs)for(var ee in this.options.layerDefs)Object.prototype.hasOwnProperty.call(this.options.layerDefs,ee)&&bt.layerDef(ee,this.options.layerDefs[ee]);bt.run(Gt),this._shouldRenderPopup=!0,this._lastClick=X.latlng},_buildExportParams:function(){var X=parseInt(this._map.options.crs.code.split(":")[1],10),bt={bbox:this._calculateBbox(),size:this._calculateImageSize(),dpi:96,format:this.options.format,transparent:this.options.transparent,bboxSR:X,imageSR:X};if(this.options.dynamicLayers&&(bt.dynamicLayers=this.options.dynamicLayers),this.options.layers){if(0===this.options.layers.length)return;bt.layers="show:"+this.options.layers.join(",")}return this.options.layerDefs&&(bt.layerDefs="string"==typeof this.options.layerDefs?this.options.layerDefs:JSON.stringify(this.options.layerDefs)),this.options.timeOptions&&(bt.timeOptions=JSON.stringify(this.options.timeOptions)),this.options.from&&this.options.to&&(bt.time=this.options.from.valueOf()+","+this.options.to.valueOf()),this.service.options.token&&(bt.token=this.service.options.token),this.options.proxy&&(bt.proxy=this.options.proxy),this.options.disableCache&&(bt._ts=Date.now()),bt},_requestExport:function(X,bt){if("json"===this.options.f)this.service.request("export",X,function(ee,we){ee||(this.options.token&&we.href&&(we.href+="?token="+this.options.token),this.options.proxy&&we.href&&(we.href=this.options.proxy+"?"+we.href),we.href?this._renderImage(we.href,bt):this._renderImage(we.imageData,bt,we.contentType))},this);else{X.f="image";var Gt=this.options.url+"export"+te.Util.getParamString(X);this.options.proxy&&(Gt=this.options.proxy+"?"+Gt),this._renderImage(Gt,bt)}}}),Mi=te.Layer.extend({options:{cellSize:512,updateWhenIdle:te.Browser.mobile,updateInterval:150,noWrap:!1,keepBuffer:1.5},initialize:function(X){te.Util.setOptions(this,X)},onAdd:function(X){this._cells={},this._activeCells={},this._resetView(),this._update()},onRemove:function(X){this._removeAllCells(),this._cellZoom=void 0},isLoading:function(){return this._loading},redraw:function(){return this._map&&(this._removeAllCells(),this._update()),this},getEvents:function(){var X={viewprereset:this._invalidateAll,viewreset:this._resetView,zoom:this._resetView,moveend:this._onMoveEnd};return this.options.updateWhenIdle||(this._onMove||(this._onMove=te.Util.throttle(this._onMoveEnd,this.options.updateInterval,this)),X.move=this._onMove),X},createCell:function(){return document.createElement("div")},removeCell:function(){},reuseCell:function(){},cellLeave:function(){},cellEnter:function(){},getCellSize:function(){var X=this.options.cellSize;return X instanceof te.Point?X:new te.Point(X,X)},_pruneCells:function(){if(this._map){var X,bt;for(X in this._cells)(bt=this._cells[X]).retain=bt.current;for(X in this._cells)if((bt=this._cells[X]).current&&!bt.active){var Gt=bt.coords;this._retainParent(Gt.x,Gt.y,Gt.z,Gt.z-5)||this._retainChildren(Gt.x,Gt.y,Gt.z,Gt.z+2)}for(X in this._cells)this._cells[X].retain||this._removeCell(X)}},_removeAllCells:function(){for(var X in this._cells)this._removeCell(X)},_invalidateAll:function(){this._removeAllCells(),this._cellZoom=void 0},_retainParent:function(X,bt,Gt,ee){var we=Math.floor(X/2),Ye=Math.floor(bt/2),xi=Gt-1,Ui=new te.Point(+we,+Ye);Ui.z=+xi;var hn=this._cellCoordsToKey(Ui),Fn=this._cells[hn];return Fn&&Fn.active?(Fn.retain=!0,!0):(Fn&&Fn.loaded&&(Fn.retain=!0),xi>ee&&this._retainParent(we,Ye,xi,ee))},_retainChildren:function(X,bt,Gt,ee){for(var we=2*X;we<2*X+2;we++)for(var Ye=2*bt;Ye<2*bt+2;Ye++){var xi=new te.Point(we,Ye);xi.z=Gt+1;var Ui=this._cellCoordsToKey(xi),hn=this._cells[Ui];hn&&hn.active?hn.retain=!0:(hn&&hn.loaded&&(hn.retain=!0),Gt+1<ee&&this._retainChildren(we,Ye,Gt+1,ee))}},_resetView:function(X){var bt=X&&(X.pinch||X.flyTo);bt||this._setView(this._map.getCenter(),this._map.getZoom(),bt,bt)},_setView:function(X,bt,Gt,ee){var we=Math.round(bt);ee||(this._cellZoom=we,this._abortLoading&&this._abortLoading(),this._resetGrid(),void 0!==we&&this._update(X),Gt||this._pruneCells(),this._noPrune=!!Gt)},_resetGrid:function(){var X=this._map,bt=X.options.crs,Gt=this._cellSize=this.getCellSize(),ee=this._cellZoom,we=this._map.getPixelWorldBounds(this._cellZoom);we&&(this._globalCellRange=this._pxBoundsToCellRange(we)),this._wrapX=bt.wrapLng&&!this.options.noWrap&&[Math.floor(X.project([0,bt.wrapLng[0]],ee).x/Gt.x),Math.ceil(X.project([0,bt.wrapLng[1]],ee).x/Gt.y)],this._wrapY=bt.wrapLat&&!this.options.noWrap&&[Math.floor(X.project([bt.wrapLat[0],0],ee).y/Gt.x),Math.ceil(X.project([bt.wrapLat[1],0],ee).y/Gt.y)]},_onMoveEnd:function(X){X&&(X.pinch||X.flyTo)||!this._map||this._map._animatingZoom||this._update()},_getCelldPixelBounds:function(X){var bt=this._map,Gt=bt._animatingZoom?Math.max(bt._animateToZoom,bt.getZoom()):bt.getZoom(),ee=bt.getZoomScale(Gt,this._cellZoom),we=bt.project(X,this._cellZoom).floor(),Ye=bt.getSize().divideBy(2*ee);return new te.Bounds(we.subtract(Ye),we.add(Ye))},_update:function(X){var bt=this._map;if(bt){var Gt=Math.round(bt.getZoom());void 0===X&&(X=bt.getCenter());var ee=this._getCelldPixelBounds(X),we=this._pxBoundsToCellRange(ee),Ye=we.getCenter(),xi=[],Ui=this.options.keepBuffer,hn=new te.Bounds(we.getBottomLeft().subtract([Ui,-Ui]),we.getTopRight().add([Ui,-Ui]));if(!(isFinite(we.min.x)&&isFinite(we.min.y)&&isFinite(we.max.x)&&isFinite(we.max.y)))throw new Error("Attempted to load an infinite number of cells");for(var Fn in this._cells){var Mo=this._cells[Fn].coords;Mo.z===this._cellZoom&&hn.contains(new te.Point(Mo.x,Mo.y))||(this._cells[Fn].current=!1)}if(Math.abs(Gt-this._cellZoom)>1)this._setView(X,Gt);else{for(var qo=we.min.y;qo<=we.max.y;qo++)for(var Oo=we.min.x;Oo<=we.max.x;Oo++){var Dr=new te.Point(Oo,qo);if(Dr.z=this._cellZoom,this._isValidCell(Dr)){var No=this._cells[this._cellCoordsToKey(Dr)];No?No.current=!0:xi.push(Dr)}}if(xi.sort(function(Kr,dr){return Kr.distanceTo(Ye)-dr.distanceTo(Ye)}),0!==xi.length)for(this._loading||(this._loading=!0),Oo=0;Oo<xi.length;Oo++){var po=this._cellCoordsToKey(xi[Oo]),ko=this._keyToCellCoords(po);this._activeCells[ko]?this._reuseCell(xi[Oo]):this._createCell(xi[Oo])}}}},_isValidCell:function(X){var bt=this._map.options.crs;if(!bt.infinite){var Gt=this._globalCellRange;if(!bt.wrapLng&&(X.x<Gt.min.x||X.x>Gt.max.x)||!bt.wrapLat&&(X.y<Gt.min.y||X.y>Gt.max.y))return!1}if(!this.options.bounds)return!0;var ee=this._cellCoordsToBounds(X);return te.toLatLngBounds(this.options.bounds).overlaps(ee)},_keyToBounds:function(X){return this._cellCoordsToBounds(this._keyToCellCoords(X))},_cellCoordsToNwSe:function(X){var bt=this._map,Gt=this.getCellSize(),ee=X.scaleBy(Gt),we=ee.add(Gt);return[bt.unproject(ee,X.z),bt.unproject(we,X.z)]},_cellCoordsToBounds:function(X){var bt=this._cellCoordsToNwSe(X),Gt=new te.LatLngBounds(bt[0],bt[1]);return this.options.noWrap||(Gt=this._map.wrapLatLngBounds(Gt)),Gt},_cellCoordsToKey:function(X){return X.x+":"+X.y+":"+X.z},_keyToCellCoords:function(X){var bt=X.split(":"),Gt=new te.Point(+bt[0],+bt[1]);return Gt.z=+bt[2],Gt},_removeCell:function(X){var bt=this._cells[X];if(bt){var Gt=this._keyToCellCoords(X),ee=this._wrapCoords(Gt),we=this._cellCoordsToBounds(this._wrapCoords(Gt));bt.current=!1,delete this._cells[X],this._activeCells[X]=bt,this.cellLeave(we,ee,X),this.fire("cellleave",{key:X,coords:ee,bounds:we})}},_reuseCell:function(X){var bt=this._cellCoordsToKey(X);this._cells[bt]=this._activeCells[bt],this._cells[bt].current=!0;var Gt=this._wrapCoords(X),ee=this._cellCoordsToBounds(this._wrapCoords(X));this.cellEnter(ee,Gt,bt),this.fire("cellenter",{key:bt,coords:Gt,bounds:ee})},_createCell:function(X){var bt=this._cellCoordsToKey(X),Gt=this._wrapCoords(X),ee=this._cellCoordsToBounds(this._wrapCoords(X));this.createCell(ee,Gt,bt),this.fire("cellcreate",{key:bt,coords:Gt,bounds:ee}),this._cells[bt]={coords:X,current:!0},te.Util.requestAnimFrame(this._pruneCells,this)},_cellReady:function(X,bt,Gt){var ee=this._cellCoordsToKey(X);(Gt=this._cells[ee])&&(Gt.loaded=+new Date,Gt.active=!0)},_getCellPos:function(X){return X.scaleBy(this.getCellSize())},_wrapCoords:function(X){var bt=new te.Point(this._wrapX?te.Util.wrapNum(X.x,this._wrapX):X.x,this._wrapY?te.Util.wrapNum(X.y,this._wrapY):X.y);return bt.z=X.z,bt},_pxBoundsToCellRange:function(X){var bt=this.getCellSize();return new te.Bounds(X.min.unscaleBy(bt).floor(),X.max.unscaleBy(bt).ceil().subtract([1,1]))}});function nn(X){this.values=[].concat(X||[])}nn.prototype.query=function(X){var bt=this.getIndex(X);return this.values[bt]},nn.prototype.getIndex=function(X){this.dirty&&this.sort();for(var bt,Gt,ee=0,we=this.values.length-1;ee<=we;)if(bt=(ee+we)/2|0,+(Gt=this.values[Math.round(bt)]).value<+X)ee=bt+1;else{if(!(+Gt.value>+X))return bt;we=bt-1}return Math.abs(~we)},nn.prototype.between=function(X,bt){var Gt=this.getIndex(X),ee=this.getIndex(bt);if(0===Gt&&0===ee)return[];for(;this.values[Gt-1]&&this.values[Gt-1].value===X;)Gt--;for(;this.values[ee+1]&&this.values[ee+1].value===bt;)ee++;return this.values[ee]&&this.values[ee].value===bt&&this.values[ee+1]&&ee++,this.values.slice(Gt,ee)},nn.prototype.insert=function(X){return this.values.splice(this.getIndex(X.value),0,X),this},nn.prototype.bulkAdd=function(X,bt){return this.values=this.values.concat([].concat(X||[])),bt?this.sort():this.dirty=!0,this},nn.prototype.sort=function(){return this.values.sort(function(X,bt){return+bt.value-+X.value}).reverse(),this.dirty=!1,this};var Ti=Mi.extend({options:{attribution:null,where:"1=1",fields:["*"],from:!1,to:!1,timeField:!1,timeFilterMode:"server",simplifyFactor:0,precision:6,fetchAllFeatures:!1},initialize:function(X){if(Mi.prototype.initialize.call(this,X),X=ft(X),X=te.Util.setOptions(this,X),this.service=Te(X),this.service.addEventParent(this),"*"!==this.options.fields[0]){for(var bt=!1,Gt=0;Gt<this.options.fields.length;Gt++)this.options.fields[Gt].match(/^(OBJECTID|FID|OID|ID)$/i)&&(bt=!0);!1===bt&&A("no known esriFieldTypeOID field detected in fields Array.  Please add an attribute field containing unique IDs to ensure the layer can be drawn correctly.")}this.options.timeField.start&&this.options.timeField.end?(this._startTimeIndex=new nn,this._endTimeIndex=new nn):this.options.timeField&&(this._timeIndex=new nn),this._cache={},this._currentSnapshot=[],this._activeRequests=0},onAdd:function(X){return mt(X),this.service.metadata(function(bt,Gt){if(!bt){var ee=Gt.supportedQueryFormats,we=!1;(!1===this.service.options.isModern||this.options.fetchAllFeatures)&&(we=!0),!we&&ee&&-1!==ee.indexOf("geoJSON")&&(this.service.options.isModern=!0),Gt.objectIdField&&(this.service.options.idAttribute=Gt.objectIdField),!this.options.attribution&&X.attributionControl&&Gt.copyrightText&&(this.options.attribution=Gt.copyrightText,X.attributionControl.addAttribution(this.getAttribution()))}},this),X.on("zoomend",this._handleZoomChange,this),Mi.prototype.onAdd.call(this,X)},onRemove:function(X){return pt(X),X.off("zoomend",this._handleZoomChange,this),Mi.prototype.onRemove.call(this,X)},getAttribution:function(){return this.options.attribution},createCell:function(X,bt){this._visibleZoom()&&this._requestFeatures(X,bt)},_requestFeatures:function(X,bt,Gt,ee){this._activeRequests++,ee=ee||0;var we=this.options.where;return 1===this._activeRequests&&this.fire("loading",{bounds:X},!0),this._buildQuery(X,ee).run(function(Ye,xi,Ui){Ui&&Ui.exceededTransferLimit&&this.fire("drawlimitexceeded"),this.options.where===we&&(!Ye&&xi&&xi.features.length&&te.Util.requestAnimFrame(te.Util.bind(function(){this._addFeatures(xi.features,bt),this._postProcessFeatures(X)},this)),Ye||!xi||xi.features.length||this._postProcessFeatures(X),Ye&&this._postProcessFeatures(X),Gt&&Gt.call(this,Ye,xi),Ui&&(Ui.exceededTransferLimit||Ui.properties&&Ui.properties.exceededTransferLimit)&&this.options.fetchAllFeatures&&this._requestFeatures(X,bt,Gt,ee+xi.features.length))},this)},_postProcessFeatures:function(X){this._activeRequests--,this._activeRequests<=0&&this.fire("load",{bounds:X})},_cacheKey:function(X){return X.z+":"+X.x+":"+X.y},_addFeatures:function(X,bt){if(bt){var Gt=this._cacheKey(bt);this._cache[Gt]=this._cache[Gt]||[]}for(var ee=X.length-1;ee>=0;ee--){var we=X[ee].id;-1===this._currentSnapshot.indexOf(we)&&this._currentSnapshot.push(we),void 0!==Gt&&-1===this._cache[Gt].indexOf(we)&&this._cache[Gt].push(we)}this.options.timeField&&this._buildTimeIndexes(X),this.createLayers(X)},_buildQuery:function(X,bt){var Gt=this.service.query().intersects(X).where(this.options.where).fields(this.options.fields).precision(this.options.precision);return this.options.fetchAllFeatures&&!isNaN(parseInt(bt))&&(Gt=Gt.offset(bt)),Gt.params.resultType="tile",this.options.requestParams&&te.Util.extend(Gt.params,this.options.requestParams),this.options.simplifyFactor&&Gt.simplify(this._map,this.options.simplifyFactor),"server"===this.options.timeFilterMode&&this.options.from&&this.options.to&&Gt.between(this.options.from,this.options.to),Gt},setWhere:function(X,bt,Gt){this.options.where=X&&X.length?X:"1=1";for(var ee=[],we=[],Ye=0,xi=null,Ui=te.Util.bind(function(Oo,Dr){if(Oo&&(xi=Oo),Dr)for(var No=Dr.features.length-1;No>=0;No--)we.push(Dr.features[No].id);--Ye<=0&&this._visibleZoom()&&X===this.options.where&&(this._currentSnapshot=we,te.Util.requestAnimFrame(te.Util.bind(function(){this.removeLayers(ee),this.addLayers(we),bt&&bt.call(Gt,xi)},this)))},this),hn=this._currentSnapshot.length-1;hn>=0;hn--)ee.push(this._currentSnapshot[hn]);for(var Fn in this._cache={},this._cells){Ye++;var Mo=this._keyToCellCoords(Fn),qo=this._cellCoordsToBounds(Mo);this._requestFeatures(qo,Mo,Ui)}return this},getWhere:function(){return this.options.where},getTimeRange:function(){return[this.options.from,this.options.to]},setTimeRange:function(X,bt,Gt,ee){var we=this.options.from,Ye=this.options.to,xi=0,Ui=null,hn=te.Util.bind(function(Oo){Oo&&(Ui=Oo),this._filterExistingFeatures(we,Ye,X,bt),xi--,Gt&&xi<=0&&Gt.call(ee,Ui)},this);if(this.options.from=X,this.options.to=bt,this._filterExistingFeatures(we,Ye,X,bt),"server"===this.options.timeFilterMode)for(var Fn in this._cells){xi++;var Mo=this._keyToCellCoords(Fn),qo=this._cellCoordsToBounds(Mo);this._requestFeatures(qo,Mo,hn)}return this},refresh:function(){this.setWhere(this.options.where)},_filterExistingFeatures:function(X,bt,Gt,ee){var we=X&&bt?this._getFeaturesInTimeRange(X,bt):this._currentSnapshot,Ye=this._getFeaturesInTimeRange(Gt,ee);if(Ye.indexOf)for(var xi=0;xi<Ye.length;xi++){var Ui=we.indexOf(Ye[xi]);Ui>=0&&we.splice(Ui,1)}te.Util.requestAnimFrame(te.Util.bind(function(){this.removeLayers(we),this.addLayers(Ye)},this))},_getFeaturesInTimeRange:function(X,bt){var Gt,ee=[];if(this.options.timeField.start&&this.options.timeField.end){var we=this._startTimeIndex.between(X,bt),Ye=this._endTimeIndex.between(X,bt);Gt=we.concat(Ye)}else{if(!this._timeIndex)return A("You must set timeField in the layer constructor in order to manipulate the start and end time filter."),[];Gt=this._timeIndex.between(X,bt)}for(var xi=Gt.length-1;xi>=0;xi--)ee.push(Gt[xi].id);return ee},_buildTimeIndexes:function(X){var bt,Gt;if(this.options.timeField.start&&this.options.timeField.end){var ee=[],we=[];for(bt=X.length-1;bt>=0;bt--)ee.push({id:(Gt=X[bt]).id,value:new Date(Gt.properties[this.options.timeField.start])}),we.push({id:Gt.id,value:new Date(Gt.properties[this.options.timeField.end])});this._startTimeIndex.bulkAdd(ee),this._endTimeIndex.bulkAdd(we)}else{var Ye=[];for(bt=X.length-1;bt>=0;bt--)Ye.push({id:(Gt=X[bt]).id,value:new Date(Gt.properties[this.options.timeField])});this._timeIndex.bulkAdd(Ye)}},_featureWithinTimeRange:function(X){if(!this.options.from||!this.options.to)return!0;var bt=+this.options.from.valueOf(),Gt=+this.options.to.valueOf();if("string"==typeof this.options.timeField){var ee=+X.properties[this.options.timeField];return ee>=bt&&ee<=Gt}if(this.options.timeField.start&&this.options.timeField.end){var we=+X.properties[this.options.timeField.start],Ye=+X.properties[this.options.timeField.end];return we>=bt&&we<=Gt||Ye>=bt&&Ye<=Gt||we<=bt&&Ye>=Gt}},_visibleZoom:function(){if(!this._map)return!1;var X=this._map.getZoom();return!(X>this.options.maxZoom||X<this.options.minZoom)},_handleZoomChange:function(){if(this._visibleZoom())for(var X in this._cells){var Gt=this._cacheKey(this._cells[X].coords);this._cache[Gt]&&this.addLayers(this._cache[Gt])}else this.removeLayers(this._currentSnapshot),this._currentSnapshot=[]},authenticate:function(X){return this.service.authenticate(X),this},metadata:function(X,bt){return this.service.metadata(X,bt),this},query:function(){return this.service.query()},_getMetadata:function(X){this._metadata?X(void 0,this._metadata):this.metadata(te.Util.bind(function(bt,Gt){this._metadata=Gt,X(bt,this._metadata)},this))},addFeature:function(X,bt,Gt){this.addFeatures(X,bt,Gt)},addFeatures:function(X,bt,Gt){this._getMetadata(te.Util.bind(function(ee,we){if(ee)bt&&bt.call(this,ee,null);else{var Ye=X.features?X.features:[X];this.service.addFeatures(X,te.Util.bind(function(xi,Ui){if(!xi){for(var hn=Ye.length-1;hn>=0;hn--)Ye[hn].properties[we.objectIdField]=Ye.length>1?Ui[hn].objectId:Ui.objectId,Ye[hn].id=Ye.length>1?Ui[hn].objectId:Ui.objectId;this._addFeatures(Ye)}bt&&bt.call(Gt,xi,Ui)},this))}},this))},updateFeature:function(X,bt,Gt){this.updateFeatures(X,bt,Gt)},updateFeatures:function(X,bt,Gt){var ee=X.features?X.features:[X];this.service.updateFeatures(X,function(we,Ye){if(!we){for(var xi=ee.length-1;xi>=0;xi--)this.removeLayers([ee[xi].id],!0);this._addFeatures(ee)}bt&&bt.call(Gt,we,Ye)},this)},deleteFeature:function(X,bt,Gt){this.deleteFeatures(X,bt,Gt)},deleteFeatures:function(X,bt,Gt){return this.service.deleteFeatures(X,function(ee,we){var Ye=we.length?we:[we];if(!ee&&Ye.length>0)for(var xi=Ye.length-1;xi>=0;xi--)this.removeLayers([Ye[xi].objectId],!0);bt&&bt.call(Gt,ee,we)},this)}}),Cn=Ti.extend({options:{cacheLayers:!0},initialize:function(X){X.apikey&&(X.token=X.apikey),Ti.prototype.initialize.call(this,X),this._originalStyle=this.options.style,this._layers={}},onRemove:function(X){for(var bt in this._layers)X.removeLayer(this._layers[bt]),this.fire("removefeature",{feature:this._layers[bt].feature,permanent:!1},!0);return Ti.prototype.onRemove.call(this,X)},createNewLayer:function(X){var bt=te.GeoJSON.geometryToLayer(X,this.options);return bt&&(bt.defaultOptions=bt.options),bt},_updateLayer:function(X,bt){var Gt=[],ee=this.options.coordsToLatLng||te.GeoJSON.coordsToLatLng;switch(bt.properties&&(X.feature.properties=bt.properties),bt.geometry.type){case"Point":Gt=te.GeoJSON.coordsToLatLng(bt.geometry.coordinates),X.setLatLng(Gt);break;case"LineString":Gt=te.GeoJSON.coordsToLatLngs(bt.geometry.coordinates,0,ee),X.setLatLngs(Gt);break;case"MultiLineString":case"Polygon":Gt=te.GeoJSON.coordsToLatLngs(bt.geometry.coordinates,1,ee),X.setLatLngs(Gt);break;case"MultiPolygon":Gt=te.GeoJSON.coordsToLatLngs(bt.geometry.coordinates,2,ee),X.setLatLngs(Gt)}this.redraw(X.feature.id)},createLayers:function(X){for(var bt=X.length-1;bt>=0;bt--){var Gt,ee=X[bt],we=this._layers[ee.id];!this._visibleZoom()||!we||this._map.hasLayer(we)||this.options.timeField&&!this._featureWithinTimeRange(ee)||(this._map.addLayer(we),this.fire("addfeature",{feature:we.feature},!0)),we&&(we.setLatLngs||we.setLatLng)&&this._updateLayer(we,ee),we||((Gt=this.createNewLayer(ee))?(Gt.feature=ee,Gt.addEventParent(this),this.options.onEachFeature&&this.options.onEachFeature(Gt.feature,Gt),this._layers[Gt.feature.id]=Gt,this.setFeatureStyle(Gt.feature.id,this.options.style),this.fire("createfeature",{feature:Gt.feature},!0),this._visibleZoom()&&(!this.options.timeField||this.options.timeField&&this._featureWithinTimeRange(ee))&&this._map.addLayer(Gt)):A("invalid GeoJSON encountered"))}},addLayers:function(X){for(var bt=X.length-1;bt>=0;bt--){var Gt=this._layers[X[bt]];!Gt||this.options.timeField&&!this._featureWithinTimeRange(Gt.feature)||(this._map.addLayer(Gt),this.fire("addfeature",{feature:Gt.feature},!0))}},removeLayers:function(X,bt){for(var Gt=X.length-1;Gt>=0;Gt--){var ee=X[Gt],we=this._layers[ee];we&&(this.fire("removefeature",{feature:we.feature,permanent:bt},!0),this._map.removeLayer(we)),we&&bt&&delete this._layers[ee]}},cellEnter:function(X,bt){this._visibleZoom()&&!this._zooming&&this._map&&te.Util.requestAnimFrame(te.Util.bind(function(){var Gt=this._cacheKey(bt),ee=this._cellCoordsToKey(bt),we=this._cache[Gt];this._activeCells[ee]&&we&&this.addLayers(we)},this))},cellLeave:function(X,bt){this._zooming||te.Util.requestAnimFrame(te.Util.bind(function(){if(this._map){var Gt=this._cacheKey(bt),ee=this._cellCoordsToKey(bt),we=this._cache[Gt],Ye=this._map.getBounds();if(!this._activeCells[ee]&&we){for(var xi=!0,Ui=0;Ui<we.length;Ui++){var hn=this._layers[we[Ui]];hn&&hn.getBounds&&Ye.intersects(hn.getBounds())&&(xi=!1)}xi&&this.removeLayers(we,!this.options.cacheLayers),!this.options.cacheLayers&&xi&&(delete this._cache[Gt],delete this._cells[ee],delete this._activeCells[ee])}}},this))},resetStyle:function(){return this.options.style=this._originalStyle,this.eachFeature(function(X){this.resetFeatureStyle(X.feature.id)},this),this},setStyle:function(X){return this.options.style=X,this.eachFeature(function(bt){this.setFeatureStyle(bt.feature.id,X)},this),this},resetFeatureStyle:function(X){var bt=this._layers[X],Gt=this._originalStyle||te.Path.prototype.options;return bt&&(te.Util.extend(bt.options,bt.defaultOptions),this.setFeatureStyle(X,Gt)),this},setFeatureStyle:function(X,bt){var Gt=this._layers[X];return"function"==typeof bt&&(bt=bt(Gt.feature)),Gt.setStyle&&Gt.setStyle(bt),this},eachActiveFeature:function(X,bt){if(this._map){var Gt=this._map.getBounds();for(var ee in this._layers)-1!==this._currentSnapshot.indexOf(this._layers[ee].feature.id)&&("function"==typeof this._layers[ee].getLatLng&&Gt.contains(this._layers[ee].getLatLng())||"function"==typeof this._layers[ee].getBounds&&Gt.intersects(this._layers[ee].getBounds()))&&X.call(bt,this._layers[ee])}return this},eachFeature:function(X,bt){for(var Gt in this._layers)X.call(bt,this._layers[Gt]);return this},getFeature:function(X){return this._layers[X]},bringToBack:function(){this.eachFeature(function(X){X.bringToBack&&X.bringToBack()})},bringToFront:function(){this.eachFeature(function(X){X.bringToFront&&X.bringToFront()})},redraw:function(X){return X&&this._redraw(X),this},_redraw:function(X){var bt=this._layers[X],Gt=bt.feature;if(bt&&bt.setIcon&&this.options.pointToLayer&&this.options.pointToLayer){var ee=this.options.pointToLayer(Gt,te.latLng(Gt.geometry.coordinates[1],Gt.geometry.coordinates[0])).options.icon;bt.setIcon(ee)}if(bt&&bt.setStyle&&this.options.pointToLayer){var we=this.options.pointToLayer(Gt,te.latLng(Gt.geometry.coordinates[1],Gt.geometry.coordinates[0])).options;this.setFeatureStyle(Gt.id,we)}bt&&bt.setStyle&&this.options.style&&this.resetStyle(Gt.id)}});vt.BasemapLayer=oi,vt.DynamicMapLayer=Ji,vt.FeatureLayer=Cn,vt.FeatureLayerService=be,vt.FeatureManager=Ti,vt.Find=Ot,vt.Identify=_e,vt.IdentifyFeatures=We,vt.IdentifyImage=Fe,vt.ImageMapLayer=Pi,vt.ImageService=Kt,vt.MapService=me,vt.Query=At,vt.RasterLayer=Ii,vt.Service=Me,vt.Support=jt,vt.Task=Lt,vt.TiledMapLayer=fi,vt.Util=ht,vt.VERSION="3.0.8",vt.basemapLayer=function(X,bt){return new oi(X,bt)},vt.dynamicMapLayer=function(X,bt){return new Ji(X,bt)},vt.featureLayer=function(X){return new Cn(X)},vt.featureLayerService=Te,vt.find=se,vt.get=I,vt.identify=function(X){return new _e(X)},vt.identifyFeatures=He,vt.identifyImage=pe,vt.imageMapLayer=function(X,bt){return new Pi(X,bt)},vt.imageService=xe,vt.mapService=qt,vt.options=zt,vt.post=K,vt.query=Wt,vt.request=st,vt.service=function(X){return X=ft(X),new Me(X)},vt.task=function(X){return X=ft(X),new Lt(X)},vt.tiledMapLayer=function(X,bt){return new fi(X,bt)},Object.defineProperty(vt,"__esModule",{value:!0})}),function(vt,te){"object"==typeof exports&&typeof module<"u"?te(exports,require("leaflet"),require("esri-leaflet")):"function"==typeof define&&define.amd?define(["exports","leaflet","esri-leaflet"],te):te(((vt=typeof globalThis<"u"?globalThis:vt||self).L=vt.L||{},vt.L.esri=vt.L.esri||{},vt.L.esri.Vector={}),vt.L,vt.L.esri)}(this,function(vt,te,Ct){"use strict";function xt(x,T,j){Ct.request(x,T.token?{token:T.token}:{},j)}function zt(x,T,j){xt(x,T,function(V,nt){V&&console.error(V);var w,l=x;"/"===x.charAt(x.length-1)&&(l=x.slice(0,x.length-1)),Ut(w="/"===nt.defaultStyles.charAt(0)?l+nt.defaultStyles+"/root.json":l+"/"+nt.defaultStyles+"/root.json",T,function(it,N){it&&console.error(it),j(null,N,w,nt,x)})})}function Ut(x,T,j){Ct.request(x,T.token?{token:T.token}:{},j)}function Rt(x,T){Ct.Support.cors&&Ct.request(x,{},function(j,V){if(!j){T._esriAttributions=T._esriAttributions||[];for(var nt=0;nt<V.contributors.length;nt++)for(var w=V.contributors[nt],l=0;l<w.coverageAreas.length;l++){var it=w.coverageAreas[l],N=te.latLng(it.bbox[0],it.bbox[1]),G=te.latLng(it.bbox[2],it.bbox[3]);T._esriAttributions.push({attribution:w.attribution,score:it.score,bounds:te.latLngBounds(N,G),minZoom:it.zoomMin,maxZoom:it.zoomMax})}T._esriAttributions.sort(function(M,b){return b.score-M.score}),Ct.Util._updateMapAttribution({target:T})}})}const It=[3857,102100,102113];typeof globalThis<"u"||typeof window<"u"||typeof global<"u"&&global;var K={exports:{}};K.exports=function(){var j,V,nt;function w(l,it){if(j)if(V){var N="var sharedChunk = {}; ("+j+")(sharedChunk); ("+V+")(sharedChunk);",G={};j(G),nt=it(G),typeof window<"u"&&(nt.workerUrl=window.URL.createObjectURL(new Blob([N],{type:"text/javascript"})))}else V=it;else j=it}return w(0,function(l){function it(t,e){return t(e={exports:{}},e.exports),e.exports}var N=G;function G(t,e,i,c){this.cx=3*t,this.bx=3*(i-t)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*e,this.by=3*(c-e)-this.cy,this.ay=1-this.cy-this.by,this.p1x=t,this.p1y=c,this.p2x=i,this.p2y=c}G.prototype.sampleCurveX=function(t){return((this.ax*t+this.bx)*t+this.cx)*t},G.prototype.sampleCurveY=function(t){return((this.ay*t+this.by)*t+this.cy)*t},G.prototype.sampleCurveDerivativeX=function(t){return(3*this.ax*t+2*this.bx)*t+this.cx},G.prototype.solveCurveX=function(t,e){var i,c,m,S,F;for(void 0===e&&(e=1e-6),m=t,F=0;F<8;F++){if(S=this.sampleCurveX(m)-t,Math.abs(S)<e)return m;var Q=this.sampleCurveDerivativeX(m);if(Math.abs(Q)<1e-6)break;m-=S/Q}if((m=t)<(i=0))return i;if(m>(c=1))return c;for(;i<c;){if(S=this.sampleCurveX(m),Math.abs(S-t)<e)return m;t>S?i=m:c=m,m=.5*(c-i)+i}return m},G.prototype.solve=function(t,e){return this.sampleCurveY(this.solveCurveX(t,e))};var v=M;function M(t,e){this.x=t,this.y=e}M.prototype={clone:function(){return new M(this.x,this.y)},add:function(t){return this.clone()._add(t)},sub:function(t){return this.clone()._sub(t)},multByPoint:function(t){return this.clone()._multByPoint(t)},divByPoint:function(t){return this.clone()._divByPoint(t)},mult:function(t){return this.clone()._mult(t)},div:function(t){return this.clone()._div(t)},rotate:function(t){return this.clone()._rotate(t)},rotateAround:function(t,e){return this.clone()._rotateAround(t,e)},matMult:function(t){return this.clone()._matMult(t)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(t){return this.x===t.x&&this.y===t.y},dist:function(t){return Math.sqrt(this.distSqr(t))},distSqr:function(t){var e=t.x-this.x,i=t.y-this.y;return e*e+i*i},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(t){return Math.atan2(this.y-t.y,this.x-t.x)},angleWith:function(t){return this.angleWithSep(t.x,t.y)},angleWithSep:function(t,e){return Math.atan2(this.x*e-this.y*t,this.x*t+this.y*e)},_matMult:function(t){var e=t[2]*this.x+t[3]*this.y;return this.x=t[0]*this.x+t[1]*this.y,this.y=e,this},_add:function(t){return this.x+=t.x,this.y+=t.y,this},_sub:function(t){return this.x-=t.x,this.y-=t.y,this},_mult:function(t){return this.x*=t,this.y*=t,this},_div:function(t){return this.x/=t,this.y/=t,this},_multByPoint:function(t){return this.x*=t.x,this.y*=t.y,this},_divByPoint:function(t){return this.x/=t.x,this.y/=t.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var t=this.y;return this.y=this.x,this.x=-t,this},_rotate:function(t){var e=Math.cos(t),i=Math.sin(t),c=i*this.x+e*this.y;return this.x=e*this.x-i*this.y,this.y=c,this},_rotateAround:function(t,e){var i=Math.cos(t),c=Math.sin(t),m=e.y+c*(this.x-e.x)+i*(this.y-e.y);return this.x=e.x+i*(this.x-e.x)-c*(this.y-e.y),this.y=m,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},M.convert=function(t){return t instanceof M?t:Array.isArray(t)?new M(t[0],t[1]):t};var b=typeof self<"u"?self:{},k=Math.pow(2,53)-1;function _(t,e,i,c){var m=new N(t,e,i,c);return function(S){return m.solve(S)}}var y=_(.25,.1,.25,1);function O(t,e,i){return Math.min(i,Math.max(e,t))}function B(t,e,i){var c=i-e,m=((t-e)%c+c)%c+e;return m===e?i:m}function H(t){for(var e=[],i=arguments.length-1;i-- >0;)e[i]=arguments[i+1];for(var c=0,m=e;c<m.length;c+=1){var S=m[c];for(var F in S)t[F]=S[F]}return t}var at=1;function ft(){return at++}function rt(){return function t(e){return e?(e^16*Math.random()>>e/4).toString(16):([1e7]+-[1e3]+-4e3+-8e3+-1e11).replace(/[018]/g,t)}()}function z(t){return!!t&&/^[0-9a-f]{8}-[0-9a-f]{4}-[4][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i.test(t)}function q(t,e){t.forEach(function(i){e[i]&&(e[i]=e[i].bind(e))})}function mt(t,e){return-1!==t.indexOf(e,t.length-e.length)}function pt(t,e,i){var c={};for(var m in t)c[m]=e.call(i||this,t[m],m,t);return c}function dt(t,e,i){var c={};for(var m in t)e.call(i||this,t[m],m,t)&&(c[m]=t[m]);return c}function Y(t){return Array.isArray(t)?t.map(Y):"object"==typeof t&&t?pt(t,Y):t}var lt={};function ht(t){lt[t]||(typeof console<"u"&&console.warn(t),lt[t]=!0)}function Lt(t,e,i){return(i.y-t.y)*(e.x-t.x)>(e.y-t.y)*(i.x-t.x)}function At(t){for(var e=0,i=0,c=t.length,m=c-1,S=void 0,F=void 0;i<c;m=i++)e+=((F=t[m]).x-(S=t[i]).x)*(S.y+F.y);return e}function Wt(){return typeof WorkerGlobalScope<"u"&&typeof self<"u"&&self instanceof WorkerGlobalScope}function Ot(t){var e={};if(t.replace(/(?:^|(?:\s*\,\s*))([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)(?:\=(?:([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)|(?:\"((?:[^"\\]|\\.)*)\")))?/g,function(c,m,S,F){var Q=S||F;return e[m]=!Q||Q.toLowerCase(),""}),e["max-age"]){var i=parseInt(e["max-age"],10);isNaN(i)?delete e["max-age"]:e["max-age"]=i}return e}var se=null;function _e(t){if(null==se){var e=t.navigator?t.navigator.userAgent:null;se=!!t.safari||!(!e||!(/\b(iPad|iPhone|iPod)\b/.test(e)||e.match("Safari")&&!e.match("Chrome")))}return se}function We(t){try{var e=b[t];return e.setItem("_mapbox_test_",1),e.removeItem("_mapbox_test_"),!0}catch{return!1}}var He,Fe,pe,Me,me=b.performance&&b.performance.now?b.performance.now.bind(b.performance):Date.now.bind(Date),qt=b.requestAnimationFrame||b.mozRequestAnimationFrame||b.webkitRequestAnimationFrame||b.msRequestAnimationFrame,Kt=b.cancelAnimationFrame||b.mozCancelAnimationFrame||b.webkitCancelAnimationFrame||b.msCancelAnimationFrame,xe={now:me,frame:function(t){var e=qt(t);return{cancel:function(){return Kt(e)}}},getImageData:function(t,e){void 0===e&&(e=0);var i=b.document.createElement("canvas"),c=i.getContext("2d");if(!c)throw new Error("failed to create canvas 2d context");return i.width=t.width,i.height=t.height,c.drawImage(t,0,0,t.width,t.height),c.getImageData(-e,-e,t.width+2*e,t.height+2*e)},resolveURL:function(t){return He||(He=b.document.createElement("a")),He.href=t,He.href},hardwareConcurrency:b.navigator&&b.navigator.hardwareConcurrency||4,get devicePixelRatio(){return b.devicePixelRatio},get prefersReducedMotion(){return!!b.matchMedia&&(null==Fe&&(Fe=b.matchMedia("(prefers-reduced-motion: reduce)")),Fe.matches)}},be={API_URL:"https://api.mapbox.com",get EVENTS_URL(){return this.API_URL?0===this.API_URL.indexOf("https://api.mapbox.cn")?"https://events.mapbox.cn/events/v2":0===this.API_URL.indexOf("https://api.mapbox.com")?"https://events.mapbox.com/events/v2":null:null},FEEDBACK_URL:"https://apps.mapbox.com/feedback",REQUIRE_ACCESS_TOKEN:!0,ACCESS_TOKEN:null,MAX_PARALLEL_IMAGE_REQUESTS:16},Te={supported:!1,testSupport:function(t){!ye&&Me&&(oi?fi(t):pe=t)}},ye=!1,oi=!1;function fi(t){var e=t.createTexture();t.bindTexture(t.TEXTURE_2D,e);try{if(t.texImage2D(t.TEXTURE_2D,0,t.RGBA,t.RGBA,t.UNSIGNED_BYTE,Me),t.isContextLost())return;Te.supported=!0}catch{}t.deleteTexture(e),ye=!0}b.document&&((Me=b.document.createElement("img")).onload=function(){pe&&fi(pe),pe=null,oi=!0},Me.onerror=function(){ye=!0,pe=null},Me.src="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA=");var tn="01",Ii=function(t,e){this._transformRequestFn=t,this._customAccessToken=e,this._createSkuToken()};function Pi(t){return 0===t.indexOf("mapbox:")}Ii.prototype._createSkuToken=function(){var t=function(){for(var e="",i=0;i<10;i++)e+="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ"[Math.floor(62*Math.random())];return{token:["1",tn,e].join(""),tokenExpiresAt:Date.now()+432e5}}();this._skuToken=t.token,this._skuTokenExpiresAt=t.tokenExpiresAt},Ii.prototype._isSkuTokenExpired=function(){return Date.now()>this._skuTokenExpiresAt},Ii.prototype.transformRequest=function(t,e){return this._transformRequestFn&&this._transformRequestFn(t,e)||{url:t}},Ii.prototype.normalizeStyleURL=function(t,e){if(!Pi(t))return t;var i=Ti(t);return i.path="/styles/v1"+i.path,this._makeAPIURL(i,this._customAccessToken||e)},Ii.prototype.normalizeGlyphsURL=function(t,e){if(!Pi(t))return t;var i=Ti(t);return i.path="/fonts/v1"+i.path,this._makeAPIURL(i,this._customAccessToken||e)},Ii.prototype.normalizeSourceURL=function(t,e){if(!Pi(t))return t;var i=Ti(t);return i.path="/v4/"+i.authority+".json",i.params.push("secure"),this._makeAPIURL(i,this._customAccessToken||e)},Ii.prototype.normalizeSpriteURL=function(t,e,i,c){var m=Ti(t);return Pi(t)?(m.path="/styles/v1"+m.path+"/sprite"+e+i,this._makeAPIURL(m,this._customAccessToken||c)):(m.path+=""+e+i,Cn(m))},Ii.prototype.normalizeTileURL=function(t,e){if(this._isSkuTokenExpired()&&this._createSkuToken(),t&&!Pi(t))return t;var i=Ti(t);i.path=i.path.replace(/(\.(png|jpg)\d*)(?=$)/,(xe.devicePixelRatio>=2||512===e?"@2x":"")+(Te.supported?".webp":"$1")),i.path=i.path.replace(/^.+\/v4\//,"/"),i.path="/v4"+i.path;var c=this._customAccessToken||function(m){for(var S=0,F=m;S<F.length;S+=1){var Q=F[S].match(/^access_token=(.*)$/);if(Q)return Q[1]}return null}(i.params)||be.ACCESS_TOKEN;return be.REQUIRE_ACCESS_TOKEN&&c&&this._skuToken&&i.params.push("sku="+this._skuToken),this._makeAPIURL(i,c)},Ii.prototype.canonicalizeTileURL=function(t,e){var i=Ti(t);if(!i.path.match(/(^\/v4\/)/)||!i.path.match(/\.[\w]+$/))return t;var c="mapbox://tiles/";c+=i.path.replace("/v4/","");var m=i.params;return e&&(m=m.filter(function(S){return!S.match(/^access_token=/)})),m.length&&(c+="?"+m.join("&")),c},Ii.prototype.canonicalizeTileset=function(t,e){for(var i=!!e&&Pi(e),c=[],m=0,S=t.tiles||[];m<S.length;m+=1){var F=S[m];Mi(F)?c.push(this.canonicalizeTileURL(F,i)):c.push(F)}return c},Ii.prototype._makeAPIURL=function(t,e){var i="See https://www.mapbox.com/api-documentation/#access-tokens-and-token-scopes",c=Ti(be.API_URL);if(t.protocol=c.protocol,t.authority=c.authority,"http"===t.protocol){var m=t.params.indexOf("secure");m>=0&&t.params.splice(m,1)}if("/"!==c.path&&(t.path=""+c.path+t.path),!be.REQUIRE_ACCESS_TOKEN)return Cn(t);if(!(e=e||be.ACCESS_TOKEN))throw new Error("An API access token is required to use Mapbox GL. "+i);if("s"===e[0])throw new Error("Use a public access token (pk.*) with Mapbox GL, not a secret access token (sk.*). "+i);return t.params=t.params.filter(function(S){return-1===S.indexOf("access_token")}),t.params.push("access_token="+e),Cn(t)};var Ji=/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/|\?|$)/i;function Mi(t){return Ji.test(t)}var nn=/^(\w+):\/\/([^/?]*)(\/[^?]+)?\??(.+)?/;function Ti(t){var e=t.match(nn);if(!e)throw new Error("Unable to parse URL object");return{protocol:e[1],authority:e[2],path:e[3]||"/",params:e[4]?e[4].split("&"):[]}}function Cn(t){var e=t.params.length?"?"+t.params.join("&"):"";return t.protocol+"://"+t.authority+t.path+e}function wn(t){if(!t)return null;var e=t.split(".");if(!e||3!==e.length)return null;try{return JSON.parse(decodeURIComponent(b.atob(e[1]).split("").map(function(i){return"%"+("00"+i.charCodeAt(0).toString(16)).slice(-2)}).join("")))}catch{return null}}var X=function(t){this.type=t,this.anonId=null,this.eventData={},this.queue=[],this.pendingRequest=null};X.prototype.getStorageKey=function(t){var e,i=wn(be.ACCESS_TOKEN);return e=i&&i.u?b.btoa(encodeURIComponent(i.u).replace(/%([0-9A-F]{2})/g,function(c,m){return String.fromCharCode(Number("0x"+m))})):be.ACCESS_TOKEN||"",t?"mapbox.eventData."+t+":"+e:"mapbox.eventData:"+e},X.prototype.fetchEventData=function(){var t=We("localStorage"),e=this.getStorageKey(),i=this.getStorageKey("uuid");if(t)try{var c=b.localStorage.getItem(e);c&&(this.eventData=JSON.parse(c));var m=b.localStorage.getItem(i);m&&(this.anonId=m)}catch{ht("Unable to read from LocalStorage")}},X.prototype.saveEventData=function(){var t=We("localStorage"),e=this.getStorageKey(),i=this.getStorageKey("uuid");if(t)try{b.localStorage.setItem(i,this.anonId),Object.keys(this.eventData).length>=1&&b.localStorage.setItem(e,JSON.stringify(this.eventData))}catch{ht("Unable to write to LocalStorage")}},X.prototype.processRequests=function(t){},X.prototype.postEvent=function(t,e,i,c){var m=this;if(be.EVENTS_URL){var S=Ti(be.EVENTS_URL);S.params.push("access_token="+(c||be.ACCESS_TOKEN||""));var F={event:this.type,created:new Date(t).toISOString(),sdkIdentifier:"mapbox-gl-js",sdkVersion:"1.13.1",skuId:tn,userId:this.anonId},Q=e?H(F,e):F,_t={url:Cn(S),headers:{"Content-Type":"text/plain"},body:JSON.stringify([Q])};this.pendingRequest=En(_t,function(kt){m.pendingRequest=null,i(kt),m.saveEventData(),m.processRequests(c)})}},X.prototype.queueRequest=function(t,e){this.queue.push(t),this.processRequests(e)};var bt,Gt,ee=function(t){function e(){t.call(this,"map.load"),this.success={},this.skuToken=""}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.postMapLoadEvent=function(i,c,m,S){this.skuToken=m,(be.EVENTS_URL&&S||be.ACCESS_TOKEN&&Array.isArray(i)&&i.some(function(F){return Pi(F)||Mi(F)}))&&this.queueRequest({id:c,timestamp:Date.now()},S)},e.prototype.processRequests=function(i){var c=this;if(!this.pendingRequest&&0!==this.queue.length){var m=this.queue.shift(),S=m.id,F=m.timestamp;S&&this.success[S]||(this.anonId||this.fetchEventData(),z(this.anonId)||(this.anonId=rt()),this.postEvent(F,{skuToken:this.skuToken},function(Q){Q||S&&(c.success[S]=!0)},i))}},e}(X),we=new(function(t){function e(i){t.call(this,"appUserTurnstile"),this._customAccessToken=i}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.postTurnstileEvent=function(i,c){be.EVENTS_URL&&be.ACCESS_TOKEN&&Array.isArray(i)&&i.some(function(m){return Pi(m)||Mi(m)})&&this.queueRequest(Date.now(),c)},e.prototype.processRequests=function(i){var c=this;if(!this.pendingRequest&&0!==this.queue.length){this.anonId&&this.eventData.lastSuccess&&this.eventData.tokenU||this.fetchEventData();var m=wn(be.ACCESS_TOKEN),S=m?m.u:be.ACCESS_TOKEN,F=S!==this.eventData.tokenU;z(this.anonId)||(this.anonId=rt(),F=!0);var Q=this.queue.shift();if(this.eventData.lastSuccess){var _t=new Date(this.eventData.lastSuccess),kt=new Date(Q),Bt=(Q-this.eventData.lastSuccess)/864e5;F=F||Bt>=1||Bt<-1||_t.getDate()!==kt.getDate()}else F=!0;if(!F)return this.processRequests();this.postEvent(Q,{"enabled.telemetry":!1},function(Nt){Nt||(c.eventData.lastSuccess=Q,c.eventData.tokenU=S)},i)}},e}(X)),Ye=we.postTurnstileEvent.bind(we),xi=new ee,Ui=xi.postMapLoadEvent.bind(xi),hn=500,Fn=50;function Mo(){b.caches&&!bt&&(bt=b.caches.open("mapbox-tiles"))}function qo(t){var e=t.indexOf("?");return e<0?t:t.slice(0,e)}var Oo,Dr=1/0;function No(){return null==Oo&&(Oo=b.OffscreenCanvas&&new b.OffscreenCanvas(1,1).getContext("2d")&&"function"==typeof b.createImageBitmap),Oo}var po={Unknown:"Unknown",Style:"Style",Source:"Source",Tile:"Tile",Glyphs:"Glyphs",SpriteImage:"SpriteImage",SpriteJSON:"SpriteJSON",Image:"Image"};"function"==typeof Object.freeze&&Object.freeze(po);var ko,Kr,dr=function(t){function e(i,c,m){401===c&&Mi(m)&&(i+=": you may have provided an invalid Mapbox access token. See https://www.mapbox.com/api-documentation/#access-tokens-and-token-scopes"),t.call(this,i),this.status=c,this.url=m,this.name=this.constructor.name,this.message=i}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.toString=function(){return this.name+": "+this.message+" ("+this.status+"): "+this.url},e}(Error),gr=Wt()?function(){return self.worker&&self.worker.referrer}:function(){return("blob:"===b.location.protocol?b.parent:b).location.href},lr=function(t,e){if(!(/^file:/.test(i=t.url)||/^file:/.test(gr())&&!/^\w+:/.test(i))){if(b.fetch&&b.Request&&b.AbortController&&b.Request.prototype.hasOwnProperty("signal"))return function(c,m){var S,F=new b.AbortController,Q=new b.Request(c.url,{method:c.method||"GET",body:c.body,credentials:c.credentials,headers:c.headers,referrer:gr(),signal:F.signal}),_t=!1,kt=!1,Bt=(S=Q.url).indexOf("sku=")>0&&Mi(S);"json"===c.type&&Q.headers.set("Accept","application/json");var Nt=function(ie,ke,Le){if(!kt){if(ie&&"SecurityError"!==ie.message&&ht(ie),ke&&Le)return $t(ke);var Ve=Date.now();b.fetch(Q).then(function(ze){if(ze.ok){var Qe=Bt?ze.clone():null;return $t(ze,Qe,Ve)}return m(new dr(ze.statusText,ze.status,c.url))}).catch(function(ze){20!==ze.code&&m(new Error(ze.message))})}},$t=function(ie,ke,Le){("arrayBuffer"===c.type?ie.arrayBuffer():"json"===c.type?ie.json():ie.text()).then(function(Ve){kt||(ke&&Le&&function(ze,Qe,li){if(Mo(),bt){var gi={status:Qe.status,statusText:Qe.statusText,headers:new b.Headers};Qe.headers.forEach(function(Ai,qi){return gi.headers.set(qi,Ai)});var _i=Ot(Qe.headers.get("Cache-Control")||"");_i["no-store"]||(_i["max-age"]&&gi.headers.set("Expires",new Date(li+1e3*_i["max-age"]).toUTCString()),new Date(gi.headers.get("Expires")).getTime()-li<42e4||function(Ai,qi){if(void 0===Gt)try{new Response(new ReadableStream),Gt=!0}catch{Gt=!1}Gt?qi(Ai.body):Ai.blob().then(qi)}(Qe,function(Ai){var qi=new b.Response(Ai,gi);Mo(),bt&&bt.then(function(on){return on.put(qo(ze.url),qi)}).catch(function(on){return ht(on.message)})}))}}(Q,ke,Le),_t=!0,m(null,Ve,ie.headers.get("Cache-Control"),ie.headers.get("Expires")))}).catch(function(Ve){kt||m(new Error(Ve.message))})};return Bt?function(ie,ke){if(Mo(),!bt)return ke(null);var Le=qo(ie.url);bt.then(function(Ve){Ve.match(Le).then(function(ze){var Qe=function(li){if(!li)return!1;var gi=new Date(li.headers.get("Expires")||0),_i=Ot(li.headers.get("Cache-Control")||"");return gi>Date.now()&&!_i["no-cache"]}(ze);Ve.delete(Le),Qe&&Ve.put(Le,ze.clone()),ke(null,ze,Qe)}).catch(ke)}).catch(ke)}(Q,Nt):Nt(null,null),{cancel:function(){kt=!0,_t||F.abort()}}}(t,e);if(Wt()&&self.worker&&self.worker.actor)return self.worker.actor.send("getResource",t,e,void 0,!0)}var i;return function(c,m){var S=new b.XMLHttpRequest;for(var F in S.open(c.method||"GET",c.url,!0),"arrayBuffer"===c.type&&(S.responseType="arraybuffer"),c.headers)S.setRequestHeader(F,c.headers[F]);return"json"===c.type&&(S.responseType="text",S.setRequestHeader("Accept","application/json")),S.withCredentials="include"===c.credentials,S.onerror=function(){m(new Error(S.statusText))},S.onload=function(){if((S.status>=200&&S.status<300||0===S.status)&&null!==S.response){var Q=S.response;if("json"===c.type)try{Q=JSON.parse(S.response)}catch(_t){return m(_t)}m(null,Q,S.getResponseHeader("Cache-Control"),S.getResponseHeader("Expires"))}else m(new dr(S.statusText,S.status,c.url))},S.send(c.body),{cancel:function(){return S.abort()}}}(t,e)},kn=function(t,e){return lr(H(t,{type:"arrayBuffer"}),e)},En=function(t,e){return lr(H(t,{method:"POST"}),e)},Ft="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII=";ko=[],Kr=0;var Yt=function(t,e){if(Te.supported&&(t.headers||(t.headers={}),t.headers.accept="image/webp,*/*"),Kr>=be.MAX_PARALLEL_IMAGE_REQUESTS){var i={requestParameters:t,callback:e,cancelled:!1,cancel:function(){this.cancelled=!0}};return ko.push(i),i}Kr++;var c=!1,m=function(){if(!c)for(c=!0,Kr--;ko.length&&Kr<be.MAX_PARALLEL_IMAGE_REQUESTS;){var F=ko.shift();F.cancelled||(F.cancel=Yt(F.requestParameters,F.callback).cancel)}},S=kn(t,function(F,Q,_t,kt){var Nt,$t;m(),F?e(F):Q&&(No()?(Nt=e,$t=new b.Blob([new Uint8Array(Q)],{type:"image/png"}),b.createImageBitmap($t).then(function(ie){Nt(null,ie)}).catch(function(ie){Nt(new Error("Could not load image because of "+ie.message+". Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."))})):function(Bt,Nt,$t,ie){var ke=new b.Image,Le=b.URL;ke.onload=function(){Nt(null,ke),Le.revokeObjectURL(ke.src),ke.onload=null,b.requestAnimationFrame(function(){ke.src=Ft})},ke.onerror=function(){return Nt(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."))};var Ve=new b.Blob([new Uint8Array(Bt)],{type:"image/png"});ke.cacheControl=$t,ke.expires=ie,ke.src=Bt.byteLength?Le.createObjectURL(Ve):Ft}(Q,e,_t,kt))});return{cancel:function(){S.cancel(),m()}}};function Jt(t,e,i){i[t]&&-1!==i[t].indexOf(e)||(i[t]=i[t]||[],i[t].push(e))}function he(t,e,i){if(i&&i[t]){var c=i[t].indexOf(e);-1!==c&&i[t].splice(c,1)}}var Ce=function(t,e){void 0===e&&(e={}),H(this,e),this.type=t},De=function(t){function e(i,c){void 0===c&&(c={}),t.call(this,"error",H({error:i},c))}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e}(Ce),Ge=function(){};Ge.prototype.on=function(t,e){return this._listeners=this._listeners||{},Jt(t,e,this._listeners),this},Ge.prototype.off=function(t,e){return he(t,e,this._listeners),he(t,e,this._oneTimeListeners),this},Ge.prototype.once=function(t,e){return this._oneTimeListeners=this._oneTimeListeners||{},Jt(t,e,this._oneTimeListeners),this},Ge.prototype.fire=function(t,e){"string"==typeof t&&(t=new Ce(t,e||{}));var i=t.type;if(this.listens(i)){t.target=this;for(var c=0,m=this._listeners&&this._listeners[i]?this._listeners[i].slice():[];c<m.length;c+=1)m[c].call(this,t);for(var S=0,F=this._oneTimeListeners&&this._oneTimeListeners[i]?this._oneTimeListeners[i].slice():[];S<F.length;S+=1){var Q=F[S];he(i,Q,this._oneTimeListeners),Q.call(this,t)}var _t=this._eventedParent;_t&&(H(t,"function"==typeof this._eventedParentData?this._eventedParentData():this._eventedParentData),_t.fire(t))}else t instanceof De&&console.error(t.error);return this},Ge.prototype.listens=function(t){return this._listeners&&this._listeners[t]&&this._listeners[t].length>0||this._oneTimeListeners&&this._oneTimeListeners[t]&&this._oneTimeListeners[t].length>0||this._eventedParent&&this._eventedParent.listens(t)},Ge.prototype.setEventedParent=function(t,e){return this._eventedParent=t,this._eventedParentData=e,this};var oe={$version:8,$root:{version:{required:!0,type:"enum",values:[8]},name:{type:"string"},metadata:{type:"*"},center:{type:"array",value:"number"},zoom:{type:"number"},bearing:{type:"number",default:0,period:360,units:"degrees"},pitch:{type:"number",default:0,units:"degrees"},light:{type:"light"},sources:{required:!0,type:"sources"},sprite:{type:"string"},glyphs:{type:"string"},transition:{type:"transition"},layers:{required:!0,type:"array",value:"layer"}},sources:{"*":{type:"source"}},source:["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],source_vector:{type:{required:!0,type:"enum",values:{vector:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},attribution:{type:"string"},promoteId:{type:"promoteId"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster:{type:{required:!0,type:"enum",values:{raster:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},attribution:{type:"string"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster_dem:{type:{required:!0,type:"enum",values:{"raster-dem":{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},attribution:{type:"string"},encoding:{type:"enum",values:{terrarium:{},mapbox:{}},default:"mapbox"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_geojson:{type:{required:!0,type:"enum",values:{geojson:{}}},data:{type:"*"},maxzoom:{type:"number",default:18},attribution:{type:"string"},buffer:{type:"number",default:128,maximum:512,minimum:0},filter:{type:"*"},tolerance:{type:"number",default:.375},cluster:{type:"boolean",default:!1},clusterRadius:{type:"number",default:50,minimum:0},clusterMaxZoom:{type:"number"},clusterMinPoints:{type:"number"},clusterProperties:{type:"*"},lineMetrics:{type:"boolean",default:!1},generateId:{type:"boolean",default:!1},promoteId:{type:"promoteId"}},source_video:{type:{required:!0,type:"enum",values:{video:{}}},urls:{required:!0,type:"array",value:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},source_image:{type:{required:!0,type:"enum",values:{image:{}}},url:{required:!0,type:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},layer:{id:{type:"string",required:!0},type:{type:"enum",values:{fill:{},line:{},symbol:{},circle:{},heatmap:{},"fill-extrusion":{},raster:{},hillshade:{},background:{}},required:!0},metadata:{type:"*"},source:{type:"string"},"source-layer":{type:"string"},minzoom:{type:"number",minimum:0,maximum:24},maxzoom:{type:"number",minimum:0,maximum:24},filter:{type:"filter"},layout:{type:"layout"},paint:{type:"paint"}},layout:["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_background"],layout_background:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_fill:{"fill-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_circle:{"circle-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_heatmap:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},"layout_fill-extrusion":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_line:{"line-cap":{type:"enum",values:{butt:{},round:{},square:{}},default:"butt",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-join":{type:"enum",values:{bevel:{},round:{},miter:{}},default:"miter",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{type:"number",default:2,requires:[{"line-join":"miter"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-round-limit":{type:"number",default:1.05,requires:[{"line-join":"round"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_symbol:{"symbol-placement":{type:"enum",values:{point:{},line:{},"line-center":{}},default:"point",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-spacing":{type:"number",default:250,minimum:1,units:"pixels",requires:[{"symbol-placement":"line"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{type:"boolean",default:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{type:"enum",values:{auto:{},"viewport-y":{},source:{}},default:"auto",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-optional":{type:"boolean",default:!1,requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-size":{type:"number",default:1,minimum:0,units:"factor of the original icon size",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{type:"enum",values:{none:{},width:{},height:{},both:{}},default:"none",requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{type:"array",value:"number",length:4,default:[0,0,0,0],units:"pixels",requires:["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-image":{type:"resolvedImage",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-keep-upright":{type:"boolean",default:!1,requires:["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-offset":{type:"array",value:"number",length:2,default:[0,0],requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-field":{type:"formatted",default:"",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-font":{type:"array",value:"string",default:["Open Sans Regular","Arial Unicode MS Regular"],requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-size":{type:"number",default:16,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{type:"number",default:10,minimum:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{type:"number",default:1.2,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-letter-spacing":{type:"number",default:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-justify":{type:"enum",values:{auto:{},left:{},center:{},right:{}},default:"center",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{type:"number",units:"ems",default:0,requires:["text-field"],"property-type":"data-driven",expression:{interpolated:!0,parameters:["zoom","feature"]}},"text-variable-anchor":{type:"array",value:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["text-field",{"!":"text-variable-anchor"}],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{type:"number",default:45,units:"degrees",requires:["text-field",{"symbol-placement":["line","line-center"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-writing-mode":{type:"array",value:"enum",values:{horizontal:{},vertical:{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-keep-upright":{type:"boolean",default:!0,requires:["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-transform":{type:"enum",values:{none:{},uppercase:{},lowercase:{}},default:"none",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-offset":{type:"array",value:"number",units:"ems",length:2,default:[0,0],requires:["text-field",{"!":"text-radial-offset"}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-optional":{type:"boolean",default:!1,requires:["text-field","icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_raster:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_hillshade:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},filter:{type:"array",value:"*"},filter_operator:{type:"enum",values:{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},in:{},"!in":{},all:{},any:{},none:{},has:{},"!has":{},within:{}}},geometry_type:{type:"enum",values:{Point:{},LineString:{},Polygon:{}}},function:{expression:{type:"expression"},stops:{type:"array",value:"function_stop"},base:{type:"number",default:1,minimum:0},property:{type:"string",default:"$zoom"},type:{type:"enum",values:{identity:{},exponential:{},interval:{},categorical:{}},default:"exponential"},colorSpace:{type:"enum",values:{rgb:{},lab:{},hcl:{}},default:"rgb"},default:{type:"*",required:!1}},function_stop:{type:"array",minimum:0,maximum:24,value:["number","color"],length:2},expression:{type:"array",value:"*",minimum:1},light:{anchor:{type:"enum",default:"viewport",values:{map:{},viewport:{}},"property-type":"data-constant",transition:!1,expression:{interpolated:!1,parameters:["zoom"]}},position:{type:"array",default:[1.15,210,30],length:3,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},intensity:{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},paint:["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_background"],paint_fill:{"fill-antialias":{type:"boolean",default:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{type:"color",transition:!0,requires:[{"!":"fill-pattern"},{"fill-antialias":!0}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"}},"paint_fill-extrusion":{"fill-extrusion-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-extrusion-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-extrusion-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"fill-extrusion-height":{type:"number",default:0,minimum:0,units:"meters",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{type:"number",default:0,minimum:0,units:"meters",transition:!0,requires:["fill-extrusion-height"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{type:"boolean",default:!0,transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_line:{"line-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"line-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["line-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-width":{type:"number",default:1,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{type:"number",default:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{type:"array",value:"number",minimum:0,transition:!0,units:"line widths",requires:[{"!":"line-pattern"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"line-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-gradient":{type:"color",transition:!1,requires:[{"!":"line-dasharray"},{"!":"line-pattern"},{source:"geojson",has:{lineMetrics:!0}}],expression:{interpolated:!0,parameters:["line-progress"]},"property-type":"color-ramp"}},paint_circle:{"circle-radius":{type:"number",default:5,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{type:"number",default:0,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["circle-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{type:"enum",values:{map:{},viewport:{}},default:"map",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"}},paint_heatmap:{"heatmap-radius":{type:"number",default:30,minimum:1,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{type:"number",default:1,minimum:0,transition:!1,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{type:"number",default:1,minimum:0,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"heatmap-color":{type:"color",default:["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",.1,"royalblue",.3,"cyan",.5,"lime",.7,"yellow",1,"red"],transition:!1,expression:{interpolated:!0,parameters:["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_symbol:{"icon-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{type:"color",default:"#000000",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["icon-image","icon-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{type:"color",default:"#000000",transition:!0,overridable:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["text-field","text-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_raster:{"raster-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{type:"number",default:0,period:360,transition:!0,units:"degrees",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{type:"number",default:0,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-saturation":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-contrast":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-resampling":{type:"enum",values:{linear:{},nearest:{}},default:"linear",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{type:"number",default:300,minimum:0,transition:!1,units:"milliseconds",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_hillshade:{"hillshade-illumination-direction":{type:"number",default:335,minimum:0,maximum:359,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{type:"number",default:.5,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{type:"color",default:"#FFFFFF",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_background:{"background-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"background-pattern"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"background-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"background-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},transition:{duration:{type:"number",default:300,minimum:0,units:"milliseconds"},delay:{type:"number",default:0,minimum:0,units:"milliseconds"}},"property-type":{"data-driven":{type:"property-type"},"cross-faded":{type:"property-type"},"cross-faded-data-driven":{type:"property-type"},"color-ramp":{type:"property-type"},"data-constant":{type:"property-type"},constant:{type:"property-type"}},promoteId:{"*":{type:"string"}}},Ee=function(t,e,i,c){this.message=(t?t+": ":"")+i,c&&(this.identifier=c),null!=e&&e.__line__&&(this.line=e.__line__)};function ii(t){var e=t.value;return e?[new Ee(t.key,e,"constants have been deprecated as of v8")]:[]}function Si(t){for(var e=[],i=arguments.length-1;i-- >0;)e[i]=arguments[i+1];for(var c=0,m=e;c<m.length;c+=1){var S=m[c];for(var F in S)t[F]=S[F]}return t}function Oi(t){return t instanceof Number||t instanceof String||t instanceof Boolean?t.valueOf():t}function di(t){if(Array.isArray(t))return t.map(di);if(t instanceof Object&&!(t instanceof Number||t instanceof String||t instanceof Boolean)){var e={};for(var i in t)e[i]=di(t[i]);return e}return Oi(t)}var hi=function(t){function e(i,c){t.call(this,c),this.message=c,this.key=i}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e}(Error),sn=function(t,e){void 0===e&&(e=[]),this.parent=t,this.bindings={};for(var i=0,c=e;i<c.length;i+=1){var m=c[i];this.bindings[m[0]]=m[1]}};sn.prototype.concat=function(t){return new sn(this,t)},sn.prototype.get=function(t){if(this.bindings[t])return this.bindings[t];if(this.parent)return this.parent.get(t);throw new Error(t+" not found in scope.")},sn.prototype.has=function(t){return!!this.bindings[t]||!!this.parent&&this.parent.has(t)};var Fi={kind:"null"},yi={kind:"number"},Zi={kind:"string"},Yi={kind:"boolean"},Ki={kind:"color"},Nn={kind:"object"},Vi={kind:"value"},so={kind:"collator"},Hn={kind:"formatted"},Gn={kind:"resolvedImage"};function vo(t,e){return{kind:"array",itemType:t,N:e}}function Jn(t){if("array"===t.kind){var e=Jn(t.itemType);return"number"==typeof t.N?"array<"+e+", "+t.N+">":"value"===t.itemType.kind?"array":"array<"+e+">"}return t.kind}var yr=[Fi,yi,Zi,Yi,Ki,Hn,Nn,vo(Vi),Gn];function Co(t,e){if("error"===e.kind)return null;if("array"===t.kind){if("array"===e.kind&&(0===e.N&&"value"===e.itemType.kind||!Co(t.itemType,e.itemType))&&("number"!=typeof t.N||t.N===e.N))return null}else{if(t.kind===e.kind)return null;if("value"===t.kind)for(var i=0,c=yr;i<c.length;i+=1)if(!Co(c[i],e))return null}return"Expected "+Jn(t)+" but found "+Jn(e)+" instead."}function vr(t,e){return e.some(function(i){return i.kind===t.kind})}function bo(t,e){return e.some(function(i){return"null"===i?null===t:"array"===i?Array.isArray(t):"object"===i?t&&!Array.isArray(t)&&"object"==typeof t:i===typeof t})}var ao=it(function(t,e){var i={transparent:[0,0,0,0],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aqua:[0,255,255,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],black:[0,0,0,1],blanchedalmond:[255,235,205,1],blue:[0,0,255,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],fuchsia:[255,0,255,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],gray:[128,128,128,1],green:[0,128,0,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],lime:[0,255,0,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],maroon:[128,0,0,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],navy:[0,0,128,1],oldlace:[253,245,230,1],olive:[128,128,0,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],purple:[128,0,128,1],rebeccapurple:[102,51,153,1],red:[255,0,0,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],silver:[192,192,192,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],teal:[0,128,128,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],white:[255,255,255,1],whitesmoke:[245,245,245,1],yellow:[255,255,0,1],yellowgreen:[154,205,50,1]};function c(Q){return(Q=Math.round(Q))<0?0:Q>255?255:Q}function m(Q){return c("%"===Q[Q.length-1]?parseFloat(Q)/100*255:parseInt(Q))}function S(Q){return(_t="%"===Q[Q.length-1]?parseFloat(Q)/100:parseFloat(Q))<0?0:_t>1?1:_t;var _t}function F(Q,_t,kt){return kt<0?kt+=1:kt>1&&(kt-=1),6*kt<1?Q+(_t-Q)*kt*6:2*kt<1?_t:3*kt<2?Q+(_t-Q)*(2/3-kt)*6:Q}try{e.parseCSSColor=function(Q){var _t,kt=Q.replace(/ /g,"").toLowerCase();if(kt in i)return i[kt].slice();if("#"===kt[0])return 4===kt.length?(_t=parseInt(kt.substr(1),16))>=0&&_t<=4095?[(3840&_t)>>4|(3840&_t)>>8,240&_t|(240&_t)>>4,15&_t|(15&_t)<<4,1]:null:7===kt.length&&(_t=parseInt(kt.substr(1),16))>=0&&_t<=16777215?[(16711680&_t)>>16,(65280&_t)>>8,255&_t,1]:null;var Bt=kt.indexOf("("),Nt=kt.indexOf(")");if(-1!==Bt&&Nt+1===kt.length){var $t=kt.substr(0,Bt),ie=kt.substr(Bt+1,Nt-(Bt+1)).split(","),ke=1;switch($t){case"rgba":if(4!==ie.length)return null;ke=S(ie.pop());case"rgb":return 3!==ie.length?null:[m(ie[0]),m(ie[1]),m(ie[2]),ke];case"hsla":if(4!==ie.length)return null;ke=S(ie.pop());case"hsl":if(3!==ie.length)return null;var Le=(parseFloat(ie[0])%360+360)%360/360,Ve=S(ie[1]),ze=S(ie[2]),Qe=ze<=.5?ze*(Ve+1):ze+Ve-ze*Ve,li=2*ze-Qe;return[c(255*F(li,Qe,Le+1/3)),c(255*F(li,Qe,Le)),c(255*F(li,Qe,Le-1/3)),ke];default:return null}}return null}}catch{}}).parseCSSColor,gn=function(t,e,i,c){void 0===c&&(c=1),this.r=t,this.g=e,this.b=i,this.a=c};gn.parse=function(t){if(t){if(t instanceof gn)return t;if("string"==typeof t){var e=ao(t);if(e)return new gn(e[0]/255*e[3],e[1]/255*e[3],e[2]/255*e[3],e[3])}}},gn.prototype.toString=function(){var t=this.toArray(),e=t[1],i=t[2],c=t[3];return"rgba("+Math.round(t[0])+","+Math.round(e)+","+Math.round(i)+","+c+")"},gn.prototype.toArray=function(){var t=this.a;return 0===t?[0,0,0,0]:[255*this.r/t,255*this.g/t,255*this.b/t,t]},gn.black=new gn(0,0,0,1),gn.white=new gn(1,1,1,1),gn.transparent=new gn(0,0,0,0),gn.red=new gn(1,0,0,1);var Tr=function(t,e,i){this.sensitivity=t?e?"variant":"case":e?"accent":"base",this.locale=i,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})};Tr.prototype.compare=function(t,e){return this.collator.compare(t,e)},Tr.prototype.resolvedLocale=function(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale};var Vs=function(t,e,i,c,m){this.text=t,this.image=e,this.scale=i,this.fontStack=c,this.textColor=m},Uo=function(t){this.sections=t};Uo.fromString=function(t){return new Uo([new Vs(t,null,null,null,null)])},Uo.prototype.isEmpty=function(){return 0===this.sections.length||!this.sections.some(function(t){return 0!==t.text.length||t.image&&0!==t.image.name.length})},Uo.factory=function(t){return t instanceof Uo?t:Uo.fromString(t)},Uo.prototype.toString=function(){return 0===this.sections.length?"":this.sections.map(function(t){return t.text}).join("")},Uo.prototype.serialize=function(){for(var t=["format"],e=0,i=this.sections;e<i.length;e+=1){var c=i[e];if(c.image)t.push(["image",c.image.name]);else{t.push(c.text);var m={};c.fontStack&&(m["text-font"]=["literal",c.fontStack.split(",")]),c.scale&&(m["font-scale"]=c.scale),c.textColor&&(m["text-color"]=["rgba"].concat(c.textColor.toArray())),t.push(m)}}return t};var zr=function(t){this.name=t.name,this.available=t.available};function $s(t,e,i,c){return"number"==typeof t&&t>=0&&t<=255&&"number"==typeof e&&e>=0&&e<=255&&"number"==typeof i&&i>=0&&i<=255?void 0===c||"number"==typeof c&&c>=0&&c<=1?null:"Invalid rgba value ["+[t,e,i,c].join(", ")+"]: 'a' must be between 0 and 1.":"Invalid rgba value ["+("number"==typeof c?[t,e,i,c]:[t,e,i]).join(", ")+"]: 'r', 'g', and 'b' must be between 0 and 255."}function wa(t){if(null===t||"string"==typeof t||"boolean"==typeof t||"number"==typeof t||t instanceof gn||t instanceof Tr||t instanceof Uo||t instanceof zr)return!0;if(Array.isArray(t)){for(var e=0,i=t;e<i.length;e+=1)if(!wa(i[e]))return!1;return!0}if("object"==typeof t){for(var c in t)if(!wa(t[c]))return!1;return!0}return!1}function Vo(t){if(null===t)return Fi;if("string"==typeof t)return Zi;if("boolean"==typeof t)return Yi;if("number"==typeof t)return yi;if(t instanceof gn)return Ki;if(t instanceof Tr)return so;if(t instanceof Uo)return Hn;if(t instanceof zr)return Gn;if(Array.isArray(t)){for(var e,i=t.length,c=0,m=t;c<m.length;c+=1){var S=Vo(m[c]);if(e){if(e===S)continue;e=Vi;break}e=S}return vo(e||Vi,i)}return Nn}function Hr(t){var e=typeof t;return null===t?"":"string"===e||"number"===e||"boolean"===e?String(t):t instanceof gn||t instanceof Uo||t instanceof zr?t.toString():JSON.stringify(t)}zr.prototype.toString=function(){return this.name},zr.fromString=function(t){return t?new zr({name:t,available:!1}):null},zr.prototype.serialize=function(){return["image",this.name]};var Or=function(t,e){this.type=t,this.value=e};Or.parse=function(t,e){if(2!==t.length)return e.error("'literal' expression requires exactly one argument, but found "+(t.length-1)+" instead.");if(!wa(t[1]))return e.error("invalid value");var i=t[1],c=Vo(i),m=e.expectedType;return"array"!==c.kind||0!==c.N||!m||"array"!==m.kind||"number"==typeof m.N&&0!==m.N||(c=m),new Or(c,i)},Or.prototype.evaluate=function(){return this.value},Or.prototype.eachChild=function(){},Or.prototype.outputDefined=function(){return!0},Or.prototype.serialize=function(){return"array"===this.type.kind||"object"===this.type.kind?["literal",this.value]:this.value instanceof gn?["rgba"].concat(this.value.toArray()):this.value instanceof Uo?this.value.serialize():this.value};var Cr=function(t){this.name="ExpressionEvaluationError",this.message=t};Cr.prototype.toJSON=function(){return this.message};var Br={string:Zi,number:yi,boolean:Yi,object:Nn},Jo=function(t,e){this.type=t,this.args=e};Jo.parse=function(t,e){if(t.length<2)return e.error("Expected at least one argument.");var i,c=1,m=t[0];if("array"===m){var S,F;if(t.length>2){var Q=t[1];if("string"!=typeof Q||!(Q in Br)||"object"===Q)return e.error('The item type argument of "array" must be one of string, number, boolean',1);S=Br[Q],c++}else S=Vi;if(t.length>3){if(null!==t[2]&&("number"!=typeof t[2]||t[2]<0||t[2]!==Math.floor(t[2])))return e.error('The length argument to "array" must be a positive integer literal',2);F=t[2],c++}i=vo(S,F)}else i=Br[m];for(var _t=[];c<t.length;c++){var kt=e.parse(t[c],c,Vi);if(!kt)return null;_t.push(kt)}return new Jo(i,_t)},Jo.prototype.evaluate=function(t){for(var e=0;e<this.args.length;e++){var i=this.args[e].evaluate(t);if(!Co(this.type,Vo(i)))return i;if(e===this.args.length-1)throw new Cr("Expected value to be of type "+Jn(this.type)+", but found "+Jn(Vo(i))+" instead.")}return null},Jo.prototype.eachChild=function(t){this.args.forEach(t)},Jo.prototype.outputDefined=function(){return this.args.every(function(t){return t.outputDefined()})},Jo.prototype.serialize=function(){var t=this.type,e=[t.kind];if("array"===t.kind){var i=t.itemType;if("string"===i.kind||"number"===i.kind||"boolean"===i.kind){e.push(i.kind);var c=t.N;("number"==typeof c||this.args.length>1)&&e.push(c)}}return e.concat(this.args.map(function(m){return m.serialize()}))};var Ps=function(t){this.type=Hn,this.sections=t};Ps.parse=function(t,e){if(t.length<2)return e.error("Expected at least one argument.");var i=t[1];if(!Array.isArray(i)&&"object"==typeof i)return e.error("First argument must be an image or text section.");for(var c=[],m=!1,S=1;S<=t.length-1;++S){var F=t[S];if(m&&"object"==typeof F&&!Array.isArray(F)){m=!1;var Q=null;if(F["font-scale"]&&!(Q=e.parse(F["font-scale"],1,yi)))return null;var _t=null;if(F["text-font"]&&!(_t=e.parse(F["text-font"],1,vo(Zi))))return null;var kt=null;if(F["text-color"]&&!(kt=e.parse(F["text-color"],1,Ki)))return null;var Bt=c[c.length-1];Bt.scale=Q,Bt.font=_t,Bt.textColor=kt}else{var Nt=e.parse(t[S],1,Vi);if(!Nt)return null;var $t=Nt.type.kind;if("string"!==$t&&"value"!==$t&&"null"!==$t&&"resolvedImage"!==$t)return e.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");m=!0,c.push({content:Nt,scale:null,font:null,textColor:null})}}return new Ps(c)},Ps.prototype.evaluate=function(t){return new Uo(this.sections.map(function(e){var i=e.content.evaluate(t);return Vo(i)===Gn?new Vs("",i,null,null,null):new Vs(Hr(i),null,e.scale?e.scale.evaluate(t):null,e.font?e.font.evaluate(t).join(","):null,e.textColor?e.textColor.evaluate(t):null)}))},Ps.prototype.eachChild=function(t){for(var e=0,i=this.sections;e<i.length;e+=1){var c=i[e];t(c.content),c.scale&&t(c.scale),c.font&&t(c.font),c.textColor&&t(c.textColor)}},Ps.prototype.outputDefined=function(){return!1},Ps.prototype.serialize=function(){for(var t=["format"],e=0,i=this.sections;e<i.length;e+=1){var c=i[e];t.push(c.content.serialize());var m={};c.scale&&(m["font-scale"]=c.scale.serialize()),c.font&&(m["text-font"]=c.font.serialize()),c.textColor&&(m["text-color"]=c.textColor.serialize()),t.push(m)}return t};var is=function(t){this.type=Gn,this.input=t};is.parse=function(t,e){if(2!==t.length)return e.error("Expected two arguments.");var i=e.parse(t[1],1,Zi);return i?new is(i):e.error("No image name provided.")},is.prototype.evaluate=function(t){var e=this.input.evaluate(t),i=zr.fromString(e);return i&&t.availableImages&&(i.available=t.availableImages.indexOf(e)>-1),i},is.prototype.eachChild=function(t){t(this.input)},is.prototype.outputDefined=function(){return!1},is.prototype.serialize=function(){return["image",this.input.serialize()]};var oa={"to-boolean":Yi,"to-color":Ki,"to-number":yi,"to-string":Zi},Mr=function(t,e){this.type=t,this.args=e};Mr.parse=function(t,e){if(t.length<2)return e.error("Expected at least one argument.");var i=t[0];if(("to-boolean"===i||"to-string"===i)&&2!==t.length)return e.error("Expected one argument.");for(var c=oa[i],m=[],S=1;S<t.length;S++){var F=e.parse(t[S],S,Vi);if(!F)return null;m.push(F)}return new Mr(c,m)},Mr.prototype.evaluate=function(t){if("boolean"===this.type.kind)return Boolean(this.args[0].evaluate(t));if("color"===this.type.kind){for(var e,i,c=0,m=this.args;c<m.length;c+=1){if(i=null,(e=m[c].evaluate(t))instanceof gn)return e;if("string"==typeof e){var S=t.parseColor(e);if(S)return S}else if(Array.isArray(e)&&!(i=e.length<3||e.length>4?"Invalid rbga value "+JSON.stringify(e)+": expected an array containing either three or four numeric values.":$s(e[0],e[1],e[2],e[3])))return new gn(e[0]/255,e[1]/255,e[2]/255,e[3])}throw new Cr(i||"Could not parse color from value '"+("string"==typeof e?e:String(JSON.stringify(e)))+"'")}if("number"===this.type.kind){for(var F=null,Q=0,_t=this.args;Q<_t.length;Q+=1){if(null===(F=_t[Q].evaluate(t)))return 0;var kt=Number(F);if(!isNaN(kt))return kt}throw new Cr("Could not convert "+JSON.stringify(F)+" to number.")}return"formatted"===this.type.kind?Uo.fromString(Hr(this.args[0].evaluate(t))):"resolvedImage"===this.type.kind?zr.fromString(Hr(this.args[0].evaluate(t))):Hr(this.args[0].evaluate(t))},Mr.prototype.eachChild=function(t){this.args.forEach(t)},Mr.prototype.outputDefined=function(){return this.args.every(function(t){return t.outputDefined()})},Mr.prototype.serialize=function(){if("formatted"===this.type.kind)return new Ps([{content:this.args[0],scale:null,font:null,textColor:null}]).serialize();if("resolvedImage"===this.type.kind)return new is(this.args[0]).serialize();var t=["to-"+this.type.kind];return this.eachChild(function(e){t.push(e.serialize())}),t};var ra=["Unknown","Point","LineString","Polygon"],rr=function(){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache={},this.availableImages=null,this.canonical=null};rr.prototype.id=function(){return this.feature&&"id"in this.feature?this.feature.id:null},rr.prototype.geometryType=function(){return this.feature?"number"==typeof this.feature.type?ra[this.feature.type]:this.feature.type:null},rr.prototype.geometry=function(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null},rr.prototype.canonicalID=function(){return this.canonical},rr.prototype.properties=function(){return this.feature&&this.feature.properties||{}},rr.prototype.parseColor=function(t){var e=this._parseColorCache[t];return e||(e=this._parseColorCache[t]=gn.parse(t)),e};var Lo=function(t,e,i,c){this.name=t,this.type=e,this._evaluate=i,this.args=c};Lo.prototype.evaluate=function(t){return this._evaluate(t,this.args)},Lo.prototype.eachChild=function(t){this.args.forEach(t)},Lo.prototype.outputDefined=function(){return!1},Lo.prototype.serialize=function(){return[this.name].concat(this.args.map(function(t){return t.serialize()}))},Lo.parse=function(t,e){var i,c=t[0],m=Lo.definitions[c];if(!m)return e.error('Unknown expression "'+c+'". If you wanted a literal array, use ["literal", [...]].',0);for(var S=Array.isArray(m)?m[0]:m.type,F=Array.isArray(m)?[[m[1],m[2]]]:m.overloads,Q=F.filter(function(Dn){var mn=Dn[0];return!Array.isArray(mn)||mn.length===t.length-1}),_t=null,kt=0,Bt=Q;kt<Bt.length;kt+=1){var Nt=Bt[kt],$t=Nt[0],ie=Nt[1];_t=new ci(e.registry,e.path,null,e.scope);for(var ke=[],Le=!1,Ve=1;Ve<t.length;Ve++){var ze=t[Ve],Qe=Array.isArray($t)?$t[Ve-1]:$t.type,li=_t.parse(ze,1+ke.length,Qe);if(!li){Le=!0;break}ke.push(li)}if(!Le)if(Array.isArray($t)&&$t.length!==ke.length)_t.error("Expected "+$t.length+" arguments, but found "+ke.length+" instead.");else{for(var gi=0;gi<ke.length;gi++){var _i=Array.isArray($t)?$t[gi]:$t.type,Ai=ke[gi];_t.concat(gi+1).checkSubtype(_i,Ai.type)}if(0===_t.errors.length)return new Lo(c,S,ie,ke)}}if(1===Q.length)(i=e.errors).push.apply(i,_t.errors);else{for(var qi=(Q.length?Q:F).map(function(Dn){var mn;return mn=Dn[0],Array.isArray(mn)?"("+mn.map(Jn).join(", ")+")":"("+Jn(mn.type)+"...)"}).join(" | "),on=[],In=1;In<t.length;In++){var dn=e.parse(t[In],1+on.length);if(!dn)return null;on.push(Jn(dn.type))}e.error("Expected arguments of type "+qi+", but found ("+on.join(", ")+") instead.")}return null},Lo.register=function(t,e){for(var i in Lo.definitions=e,e)t[i]=Lo};var Ro=function(t,e,i){this.type=so,this.locale=i,this.caseSensitive=t,this.diacriticSensitive=e};function Lr(t,e){t[0]=Math.min(t[0],e[0]),t[1]=Math.min(t[1],e[1]),t[2]=Math.max(t[2],e[0]),t[3]=Math.max(t[3],e[1])}function ks(t,e){return!(t[0]<=e[0]||t[2]>=e[2]||t[1]<=e[1]||t[3]>=e[3])}function us(t,e){var i=(180+t[0])/360,c=(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+t[1]*Math.PI/360)))/360,m=Math.pow(2,e.z);return[Math.round(i*m*8192),Math.round(c*m*8192)]}function Js(t,e,i){return e[1]>t[1]!=i[1]>t[1]&&t[0]<(i[0]-e[0])*(t[1]-e[1])/(i[1]-e[1])+e[0]}function ss(t,e){for(var i,c,m,S,F,Q,_t,kt=!1,Bt=0,Nt=e.length;Bt<Nt;Bt++)for(var $t=e[Bt],ie=0,ke=$t.length;ie<ke-1;ie++){if((S=(i=t)[0]-(c=$t[ie])[0])*(_t=i[1]-(m=$t[ie+1])[1])-(Q=i[0]-m[0])*(F=i[1]-c[1])==0&&S*Q<=0&&F*_t<=0)return!1;Js(t,$t[ie],$t[ie+1])&&(kt=!kt)}return kt}function za(t,e){for(var i=0;i<e.length;i++)if(ss(t,e[i]))return!0;return!1}function sa(t,e,i,c){var m=c[0]-i[0],S=c[1]-i[1],F=(t[0]-i[0])*S-m*(t[1]-i[1]),Q=(e[0]-i[0])*S-m*(e[1]-i[1]);return F>0&&Q<0||F<0&&Q>0}function Ya(t,e,i){for(var c=0,m=i;c<m.length;c+=1)for(var S=m[c],F=0;F<S.length-1;++F)if((Nt=[(Bt=S[F+1])[0]-(kt=S[F])[0],Bt[1]-kt[1]])[0]*($t=[(_t=e)[0]-(Q=t)[0],_t[1]-Q[1]])[1]-Nt[1]*$t[0]!=0&&sa(Q,_t,kt,Bt)&&sa(kt,Bt,Q,_t))return!0;var Q,_t,kt,Bt,Nt,$t;return!1}function E(t,e){for(var i=0;i<t.length;++i)if(!ss(t[i],e))return!1;for(var c=0;c<t.length-1;++c)if(Ya(t[c],t[c+1],e))return!1;return!0}function tt(t,e){for(var i=0;i<e.length;i++)if(E(t,e[i]))return!0;return!1}function yt(t,e,i){for(var c=[],m=0;m<t.length;m++){for(var S=[],F=0;F<t[m].length;F++){var Q=us(t[m][F],i);Lr(e,Q),S.push(Q)}c.push(S)}return c}function St(t,e,i){for(var c=[],m=0;m<t.length;m++){var S=yt(t[m],e,i);c.push(S)}return c}function Zt(t,e,i,c){if(t[0]<i[0]||t[0]>i[2]){var m=.5*c,S=t[0]-i[0]>m?-c:i[0]-t[0]>m?c:0;0===S&&(S=t[0]-i[2]>m?-c:i[2]-t[0]>m?c:0),t[0]+=S}Lr(e,t)}function ne(t,e,i,c){for(var m=8192*Math.pow(2,c.z),S=[8192*c.x,8192*c.y],F=[],Q=0,_t=t;Q<_t.length;Q+=1)for(var kt=0,Bt=_t[Q];kt<Bt.length;kt+=1){var Nt=Bt[kt],$t=[Nt.x+S[0],Nt.y+S[1]];Zt($t,e,i,m),F.push($t)}return F}function fe(t,e,i,c){for(var m,S=8192*Math.pow(2,c.z),F=[8192*c.x,8192*c.y],Q=[],_t=0,kt=t;_t<kt.length;_t+=1){for(var Bt=[],Nt=0,$t=kt[_t];Nt<$t.length;Nt+=1){var ie=$t[Nt],ke=[ie.x+F[0],ie.y+F[1]];Lr(e,ke),Bt.push(ke)}Q.push(Bt)}if(e[2]-e[0]<=S/2){(m=e)[0]=m[1]=1/0,m[2]=m[3]=-1/0;for(var Le=0,Ve=Q;Le<Ve.length;Le+=1)for(var ze=0,Qe=Ve[Le];ze<Qe.length;ze+=1)Zt(Qe[ze],e,i,S)}return Q}Ro.parse=function(t,e){if(2!==t.length)return e.error("Expected one argument.");var i=t[1];if("object"!=typeof i||Array.isArray(i))return e.error("Collator options argument must be an object.");var c=e.parse(void 0!==i["case-sensitive"]&&i["case-sensitive"],1,Yi);if(!c)return null;var m=e.parse(void 0!==i["diacritic-sensitive"]&&i["diacritic-sensitive"],1,Yi);if(!m)return null;var S=null;return i.locale&&!(S=e.parse(i.locale,1,Zi))?null:new Ro(c,m,S)},Ro.prototype.evaluate=function(t){return new Tr(this.caseSensitive.evaluate(t),this.diacriticSensitive.evaluate(t),this.locale?this.locale.evaluate(t):null)},Ro.prototype.eachChild=function(t){t(this.caseSensitive),t(this.diacriticSensitive),this.locale&&t(this.locale)},Ro.prototype.outputDefined=function(){return!1},Ro.prototype.serialize=function(){var t={};return t["case-sensitive"]=this.caseSensitive.serialize(),t["diacritic-sensitive"]=this.diacriticSensitive.serialize(),this.locale&&(t.locale=this.locale.serialize()),["collator",t]};var Be=function(t,e){this.type=Yi,this.geojson=t,this.geometries=e};function je(t){if(t instanceof Lo&&("get"===t.name&&1===t.args.length||"feature-state"===t.name||"has"===t.name&&1===t.args.length||"properties"===t.name||"geometry-type"===t.name||"id"===t.name||/^filter-/.test(t.name))||t instanceof Be)return!1;var e=!0;return t.eachChild(function(i){e&&!je(i)&&(e=!1)}),e}function ei(t){if(t instanceof Lo&&"feature-state"===t.name)return!1;var e=!0;return t.eachChild(function(i){e&&!ei(i)&&(e=!1)}),e}function vi(t,e){if(t instanceof Lo&&e.indexOf(t.name)>=0)return!1;var i=!0;return t.eachChild(function(c){i&&!vi(c,e)&&(i=!1)}),i}Be.parse=function(t,e){if(2!==t.length)return e.error("'within' expression requires exactly one argument, but found "+(t.length-1)+" instead.");if(wa(t[1])){var i=t[1];if("FeatureCollection"===i.type)for(var c=0;c<i.features.length;++c){var m=i.features[c].geometry.type;if("Polygon"===m||"MultiPolygon"===m)return new Be(i,i.features[c].geometry)}else if("Feature"===i.type){var S=i.geometry.type;if("Polygon"===S||"MultiPolygon"===S)return new Be(i,i.geometry)}else if("Polygon"===i.type||"MultiPolygon"===i.type)return new Be(i,i)}return e.error("'within' expression requires valid geojson object that contains polygon geometry type.")},Be.prototype.evaluate=function(t){if(null!=t.geometry()&&null!=t.canonicalID()){if("Point"===t.geometryType())return function(e,i){var c=[1/0,1/0,-1/0,-1/0],m=[1/0,1/0,-1/0,-1/0],S=e.canonicalID();if("Polygon"===i.type){var F=yt(i.coordinates,m,S),Q=ne(e.geometry(),c,m,S);if(!ks(c,m))return!1;for(var _t=0,kt=Q;_t<kt.length;_t+=1)if(!ss(kt[_t],F))return!1}if("MultiPolygon"===i.type){var Bt=St(i.coordinates,m,S),Nt=ne(e.geometry(),c,m,S);if(!ks(c,m))return!1;for(var $t=0,ie=Nt;$t<ie.length;$t+=1)if(!za(ie[$t],Bt))return!1}return!0}(t,this.geometries);if("LineString"===t.geometryType())return function(e,i){var c=[1/0,1/0,-1/0,-1/0],m=[1/0,1/0,-1/0,-1/0],S=e.canonicalID();if("Polygon"===i.type){var F=yt(i.coordinates,m,S),Q=fe(e.geometry(),c,m,S);if(!ks(c,m))return!1;for(var _t=0,kt=Q;_t<kt.length;_t+=1)if(!E(kt[_t],F))return!1}if("MultiPolygon"===i.type){var Bt=St(i.coordinates,m,S),Nt=fe(e.geometry(),c,m,S);if(!ks(c,m))return!1;for(var $t=0,ie=Nt;$t<ie.length;$t+=1)if(!tt(ie[$t],Bt))return!1}return!0}(t,this.geometries)}return!1},Be.prototype.eachChild=function(){},Be.prototype.outputDefined=function(){return!0},Be.prototype.serialize=function(){return["within",this.geojson]};var Li=function(t,e){this.type=e.type,this.name=t,this.boundExpression=e};Li.parse=function(t,e){if(2!==t.length||"string"!=typeof t[1])return e.error("'var' expression requires exactly one string literal argument.");var i=t[1];return e.scope.has(i)?new Li(i,e.scope.get(i)):e.error('Unknown variable "'+i+'". Make sure "'+i+'" has been bound in an enclosing "let" expression before using it.',1)},Li.prototype.evaluate=function(t){return this.boundExpression.evaluate(t)},Li.prototype.eachChild=function(){},Li.prototype.outputDefined=function(){return!1},Li.prototype.serialize=function(){return["var",this.name]};var ci=function(t,e,i,c,m){void 0===e&&(e=[]),void 0===c&&(c=new sn),void 0===m&&(m=[]),this.registry=t,this.path=e,this.key=e.map(function(S){return"["+S+"]"}).join(""),this.scope=c,this.errors=m,this.expectedType=i};function ui(t,e){for(var i,c=t.length-1,m=0,S=c,F=0;m<=S;)if((i=t[F=Math.floor((m+S)/2)])<=e){if(F===c||e<t[F+1])return F;m=F+1}else{if(!(i>e))throw new Cr("Input is not a number.");S=F-1}return 0}ci.prototype.parse=function(t,e,i,c,m){return void 0===m&&(m={}),e?this.concat(e,i,c)._parse(t,m):this._parse(t,m)},ci.prototype._parse=function(t,e){function i(kt,Bt,Nt){return"assert"===Nt?new Jo(Bt,[kt]):"coerce"===Nt?new Mr(Bt,[kt]):kt}if(null!==t&&"string"!=typeof t&&"boolean"!=typeof t&&"number"!=typeof t||(t=["literal",t]),Array.isArray(t)){if(0===t.length)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');var c=t[0];if("string"!=typeof c)return this.error("Expression name must be a string, but found "+typeof c+' instead. If you wanted a literal array, use ["literal", [...]].',0),null;var m=this.registry[c];if(m){var S=m.parse(t,this);if(!S)return null;if(this.expectedType){var F=this.expectedType,Q=S.type;if("string"!==F.kind&&"number"!==F.kind&&"boolean"!==F.kind&&"object"!==F.kind&&"array"!==F.kind||"value"!==Q.kind)if("color"!==F.kind&&"formatted"!==F.kind&&"resolvedImage"!==F.kind||"value"!==Q.kind&&"string"!==Q.kind){if(this.checkSubtype(F,Q))return null}else S=i(S,F,e.typeAnnotation||"coerce");else S=i(S,F,e.typeAnnotation||"assert")}if(!(S instanceof Or)&&"resolvedImage"!==S.type.kind&&function kt(Bt){if(Bt instanceof Li)return kt(Bt.boundExpression);if(Bt instanceof Lo&&"error"===Bt.name||Bt instanceof Ro||Bt instanceof Be)return!1;var Nt=Bt instanceof Mr||Bt instanceof Jo,$t=!0;return Bt.eachChild(function(ie){$t=Nt?$t&&kt(ie):$t&&ie instanceof Or}),!!$t&&je(Bt)&&vi(Bt,["zoom","heatmap-density","line-progress","accumulated","is-supported-script"])}(S)){var _t=new rr;try{S=new Or(S.type,S.evaluate(_t))}catch(kt){return this.error(kt.message),null}}return S}return this.error('Unknown expression "'+c+'". If you wanted a literal array, use ["literal", [...]].',0)}return this.error(void 0===t?"'undefined' value invalid. Use null instead.":"object"==typeof t?'Bare objects invalid. Use ["literal", {...}] instead.':"Expected an array, but found "+typeof t+" instead.")},ci.prototype.concat=function(t,e,i){var c="number"==typeof t?this.path.concat(t):this.path,m=i?this.scope.concat(i):this.scope;return new ci(this.registry,c,e||null,m,this.errors)},ci.prototype.error=function(t){for(var e=[],i=arguments.length-1;i-- >0;)e[i]=arguments[i+1];var c=""+this.key+e.map(function(m){return"["+m+"]"}).join("");this.errors.push(new hi(c,t))},ci.prototype.checkSubtype=function(t,e){var i=Co(t,e);return i&&this.error(i),i};var an=function(t,e,i){this.type=t,this.input=e,this.labels=[],this.outputs=[];for(var c=0,m=i;c<m.length;c+=1){var S=m[c],F=S[1];this.labels.push(S[0]),this.outputs.push(F)}};function cn(t,e,i){return t*(1-i)+e*i}an.parse=function(t,e){if(t.length-1<4)return e.error("Expected at least 4 arguments, but found only "+(t.length-1)+".");if((t.length-1)%2!=0)return e.error("Expected an even number of arguments.");var i=e.parse(t[1],1,yi);if(!i)return null;var c=[],m=null;e.expectedType&&"value"!==e.expectedType.kind&&(m=e.expectedType);for(var S=1;S<t.length;S+=2){var F=1===S?-1/0:t[S],Q=t[S+1],_t=S,kt=S+1;if("number"!=typeof F)return e.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',_t);if(c.length&&c[c.length-1][0]>=F)return e.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',_t);var Bt=e.parse(Q,kt,m);if(!Bt)return null;m=m||Bt.type,c.push([F,Bt])}return new an(m,i,c)},an.prototype.evaluate=function(t){var e=this.labels,i=this.outputs;if(1===e.length)return i[0].evaluate(t);var c=this.input.evaluate(t);if(c<=e[0])return i[0].evaluate(t);var m=e.length;return c>=e[m-1]?i[m-1].evaluate(t):i[ui(e,c)].evaluate(t)},an.prototype.eachChild=function(t){t(this.input);for(var e=0,i=this.outputs;e<i.length;e+=1)t(i[e])},an.prototype.outputDefined=function(){return this.outputs.every(function(t){return t.outputDefined()})},an.prototype.serialize=function(){for(var t=["step",this.input.serialize()],e=0;e<this.labels.length;e++)e>0&&t.push(this.labels[e]),t.push(this.outputs[e].serialize());return t};var bn=Object.freeze({__proto__:null,number:cn,color:function(t,e,i){return new gn(cn(t.r,e.r,i),cn(t.g,e.g,i),cn(t.b,e.b,i),cn(t.a,e.a,i))},array:function(t,e,i){return t.map(function(c,m){return cn(c,e[m],i)})}}),Qo=6/29*3*(6/29),wr=Math.PI/180,$r=180/Math.PI;function Io(t){return t>.008856451679035631?Math.pow(t,1/3):t/Qo+4/29}function io(t){return t>6/29?t*t*t:Qo*(t-4/29)}function Ir(t){return 255*(t<=.0031308?12.92*t:1.055*Math.pow(t,1/2.4)-.055)}function Ao(t){return(t/=255)<=.04045?t/12.92:Math.pow((t+.055)/1.055,2.4)}function er(t){var e=Ao(t.r),i=Ao(t.g),c=Ao(t.b),m=Io((.4124564*e+.3575761*i+.1804375*c)/.95047),S=Io((.2126729*e+.7151522*i+.072175*c)/1);return{l:116*S-16,a:500*(m-S),b:200*(S-Io((.0193339*e+.119192*i+.9503041*c)/1.08883)),alpha:t.a}}function aa(t){var e=(t.l+16)/116,i=isNaN(t.a)?e:e+t.a/500,c=isNaN(t.b)?e:e-t.b/200;return e=1*io(e),i=.95047*io(i),c=1.08883*io(c),new gn(Ir(3.2404542*i-1.5371385*e-.4985314*c),Ir(-.969266*i+1.8760108*e+.041556*c),Ir(.0556434*i-.2040259*e+1.0572252*c),t.alpha)}function ga(t,e,i){var c=e-t;return t+i*(c>180||c<-180?c-360*Math.round(c/360):c)}var hr={forward:er,reverse:aa,interpolate:function(t,e,i){return{l:cn(t.l,e.l,i),a:cn(t.a,e.a,i),b:cn(t.b,e.b,i),alpha:cn(t.alpha,e.alpha,i)}}},Jr={forward:function(t){var e=er(t),i=e.l,c=e.a,m=e.b,S=Math.atan2(m,c)*$r;return{h:S<0?S+360:S,c:Math.sqrt(c*c+m*m),l:i,alpha:t.a}},reverse:function(t){var e=t.h*wr,i=t.c;return aa({l:t.l,a:Math.cos(e)*i,b:Math.sin(e)*i,alpha:t.alpha})},interpolate:function(t,e,i){return{h:ga(t.h,e.h,i),c:cn(t.c,e.c,i),l:cn(t.l,e.l,i),alpha:cn(t.alpha,e.alpha,i)}}},js=Object.freeze({__proto__:null,lab:hr,hcl:Jr}),Ho=function(t,e,i,c,m){this.type=t,this.operator=e,this.interpolation=i,this.input=c,this.labels=[],this.outputs=[];for(var S=0,F=m;S<F.length;S+=1){var Q=F[S],_t=Q[1];this.labels.push(Q[0]),this.outputs.push(_t)}};function Qr(t,e,i,c){var m=c-i,S=t-i;return 0===m?0:1===e?S/m:(Math.pow(e,S)-1)/(Math.pow(e,m)-1)}Ho.interpolationFactor=function(t,e,i,c){var m=0;if("exponential"===t.name)m=Qr(e,t.base,i,c);else if("linear"===t.name)m=Qr(e,1,i,c);else if("cubic-bezier"===t.name){var S=t.controlPoints;m=new N(S[0],S[1],S[2],S[3]).solve(Qr(e,1,i,c))}return m},Ho.parse=function(t,e){var i=t[0],c=t[1],m=t[2],S=t.slice(3);if(!Array.isArray(c)||0===c.length)return e.error("Expected an interpolation type expression.",1);if("linear"===c[0])c={name:"linear"};else if("exponential"===c[0]){var F=c[1];if("number"!=typeof F)return e.error("Exponential interpolation requires a numeric base.",1,1);c={name:"exponential",base:F}}else{if("cubic-bezier"!==c[0])return e.error("Unknown interpolation type "+String(c[0]),1,0);var Q=c.slice(1);if(4!==Q.length||Q.some(function(Ve){return"number"!=typeof Ve||Ve<0||Ve>1}))return e.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);c={name:"cubic-bezier",controlPoints:Q}}if(t.length-1<4)return e.error("Expected at least 4 arguments, but found only "+(t.length-1)+".");if((t.length-1)%2!=0)return e.error("Expected an even number of arguments.");if(!(m=e.parse(m,2,yi)))return null;var _t=[],kt=null;"interpolate-hcl"===i||"interpolate-lab"===i?kt=Ki:e.expectedType&&"value"!==e.expectedType.kind&&(kt=e.expectedType);for(var Bt=0;Bt<S.length;Bt+=2){var Nt=S[Bt],$t=S[Bt+1],ie=Bt+3,ke=Bt+4;if("number"!=typeof Nt)return e.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',ie);if(_t.length&&_t[_t.length-1][0]>=Nt)return e.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',ie);var Le=e.parse($t,ke,kt);if(!Le)return null;kt=kt||Le.type,_t.push([Nt,Le])}return"number"===kt.kind||"color"===kt.kind||"array"===kt.kind&&"number"===kt.itemType.kind&&"number"==typeof kt.N?new Ho(kt,i,c,m,_t):e.error("Type "+Jn(kt)+" is not interpolatable.")},Ho.prototype.evaluate=function(t){var e=this.labels,i=this.outputs;if(1===e.length)return i[0].evaluate(t);var c=this.input.evaluate(t);if(c<=e[0])return i[0].evaluate(t);var m=e.length;if(c>=e[m-1])return i[m-1].evaluate(t);var S=ui(e,c),F=Ho.interpolationFactor(this.interpolation,c,e[S],e[S+1]),Q=i[S].evaluate(t),_t=i[S+1].evaluate(t);return"interpolate"===this.operator?bn[this.type.kind.toLowerCase()](Q,_t,F):"interpolate-hcl"===this.operator?Jr.reverse(Jr.interpolate(Jr.forward(Q),Jr.forward(_t),F)):hr.reverse(hr.interpolate(hr.forward(Q),hr.forward(_t),F))},Ho.prototype.eachChild=function(t){t(this.input);for(var e=0,i=this.outputs;e<i.length;e+=1)t(i[e])},Ho.prototype.outputDefined=function(){return this.outputs.every(function(t){return t.outputDefined()})},Ho.prototype.serialize=function(){var t;t="linear"===this.interpolation.name?["linear"]:"exponential"===this.interpolation.name?1===this.interpolation.base?["linear"]:["exponential",this.interpolation.base]:["cubic-bezier"].concat(this.interpolation.controlPoints);for(var e=[this.operator,t,this.input.serialize()],i=0;i<this.labels.length;i++)e.push(this.labels[i],this.outputs[i].serialize());return e};var Xo=function(t,e){this.type=t,this.args=e};Xo.parse=function(t,e){if(t.length<2)return e.error("Expectected at least one argument.");var i=null,c=e.expectedType;c&&"value"!==c.kind&&(i=c);for(var m=[],S=0,F=t.slice(1);S<F.length;S+=1){var Q=e.parse(F[S],1+m.length,i,void 0,{typeAnnotation:"omit"});if(!Q)return null;i=i||Q.type,m.push(Q)}var _t=c&&m.some(function(kt){return Co(c,kt.type)});return new Xo(_t?Vi:i,m)},Xo.prototype.evaluate=function(t){for(var e,i=null,c=0,m=0,S=this.args;m<S.length&&(c++,(i=S[m].evaluate(t))&&i instanceof zr&&!i.available&&(e||(e=i.name),i=null,c===this.args.length&&(i=e)),null===i);m+=1);return i},Xo.prototype.eachChild=function(t){this.args.forEach(t)},Xo.prototype.outputDefined=function(){return this.args.every(function(t){return t.outputDefined()})},Xo.prototype.serialize=function(){var t=["coalesce"];return this.eachChild(function(e){t.push(e.serialize())}),t};var Go=function(t,e){this.type=e.type,this.bindings=[].concat(t),this.result=e};Go.prototype.evaluate=function(t){return this.result.evaluate(t)},Go.prototype.eachChild=function(t){for(var e=0,i=this.bindings;e<i.length;e+=1)t(i[e][1]);t(this.result)},Go.parse=function(t,e){if(t.length<4)return e.error("Expected at least 3 arguments, but found "+(t.length-1)+" instead.");for(var i=[],c=1;c<t.length-1;c+=2){var m=t[c];if("string"!=typeof m)return e.error("Expected string, but found "+typeof m+" instead.",c);if(/[^a-zA-Z0-9_]/.test(m))return e.error("Variable names must contain only alphanumeric characters or '_'.",c);var S=e.parse(t[c+1],c+1);if(!S)return null;i.push([m,S])}var F=e.parse(t[t.length-1],t.length-1,e.expectedType,i);return F?new Go(i,F):null},Go.prototype.outputDefined=function(){return this.result.outputDefined()},Go.prototype.serialize=function(){for(var t=["let"],e=0,i=this.bindings;e<i.length;e+=1){var c=i[e];t.push(c[0],c[1].serialize())}return t.push(this.result.serialize()),t};var Rr=function(t,e,i){this.type=t,this.index=e,this.input=i};Rr.parse=function(t,e){if(3!==t.length)return e.error("Expected 2 arguments, but found "+(t.length-1)+" instead.");var i=e.parse(t[1],1,yi),c=e.parse(t[2],2,vo(e.expectedType||Vi));return i&&c?new Rr(c.type.itemType,i,c):null},Rr.prototype.evaluate=function(t){var e=this.index.evaluate(t),i=this.input.evaluate(t);if(e<0)throw new Cr("Array index out of bounds: "+e+" < 0.");if(e>=i.length)throw new Cr("Array index out of bounds: "+e+" > "+(i.length-1)+".");if(e!==Math.floor(e))throw new Cr("Array index must be an integer, but found "+e+" instead.");return i[e]},Rr.prototype.eachChild=function(t){t(this.index),t(this.input)},Rr.prototype.outputDefined=function(){return!1},Rr.prototype.serialize=function(){return["at",this.index.serialize(),this.input.serialize()]};var sr=function(t,e){this.type=Yi,this.needle=t,this.haystack=e};sr.parse=function(t,e){if(3!==t.length)return e.error("Expected 2 arguments, but found "+(t.length-1)+" instead.");var i=e.parse(t[1],1,Vi),c=e.parse(t[2],2,Vi);return i&&c?vr(i.type,[Yi,Zi,yi,Fi,Vi])?new sr(i,c):e.error("Expected first argument to be of type boolean, string, number or null, but found "+Jn(i.type)+" instead"):null},sr.prototype.evaluate=function(t){var e=this.needle.evaluate(t),i=this.haystack.evaluate(t);if(!i)return!1;if(!bo(e,["boolean","string","number","null"]))throw new Cr("Expected first argument to be of type boolean, string, number or null, but found "+Jn(Vo(e))+" instead.");if(!bo(i,["string","array"]))throw new Cr("Expected second argument to be of type array or string, but found "+Jn(Vo(i))+" instead.");return i.indexOf(e)>=0},sr.prototype.eachChild=function(t){t(this.needle),t(this.haystack)},sr.prototype.outputDefined=function(){return!0},sr.prototype.serialize=function(){return["in",this.needle.serialize(),this.haystack.serialize()]};var ir=function(t,e,i){this.type=yi,this.needle=t,this.haystack=e,this.fromIndex=i};ir.parse=function(t,e){if(t.length<=2||t.length>=5)return e.error("Expected 3 or 4 arguments, but found "+(t.length-1)+" instead.");var i=e.parse(t[1],1,Vi),c=e.parse(t[2],2,Vi);if(!i||!c)return null;if(!vr(i.type,[Yi,Zi,yi,Fi,Vi]))return e.error("Expected first argument to be of type boolean, string, number or null, but found "+Jn(i.type)+" instead");if(4===t.length){var m=e.parse(t[3],3,yi);return m?new ir(i,c,m):null}return new ir(i,c)},ir.prototype.evaluate=function(t){var e=this.needle.evaluate(t),i=this.haystack.evaluate(t);if(!bo(e,["boolean","string","number","null"]))throw new Cr("Expected first argument to be of type boolean, string, number or null, but found "+Jn(Vo(e))+" instead.");if(!bo(i,["string","array"]))throw new Cr("Expected second argument to be of type array or string, but found "+Jn(Vo(i))+" instead.");if(this.fromIndex){var c=this.fromIndex.evaluate(t);return i.indexOf(e,c)}return i.indexOf(e)},ir.prototype.eachChild=function(t){t(this.needle),t(this.haystack),this.fromIndex&&t(this.fromIndex)},ir.prototype.outputDefined=function(){return!1},ir.prototype.serialize=function(){if(null!=this.fromIndex&&void 0!==this.fromIndex){var t=this.fromIndex.serialize();return["index-of",this.needle.serialize(),this.haystack.serialize(),t]}return["index-of",this.needle.serialize(),this.haystack.serialize()]};var Rn=function(t,e,i,c,m,S){this.inputType=t,this.type=e,this.input=i,this.cases=c,this.outputs=m,this.otherwise=S};Rn.parse=function(t,e){if(t.length<5)return e.error("Expected at least 4 arguments, but found only "+(t.length-1)+".");if(t.length%2!=1)return e.error("Expected an even number of arguments.");var i,c;e.expectedType&&"value"!==e.expectedType.kind&&(c=e.expectedType);for(var m={},S=[],F=2;F<t.length-1;F+=2){var Q=t[F],_t=t[F+1];Array.isArray(Q)||(Q=[Q]);var kt=e.concat(F);if(0===Q.length)return kt.error("Expected at least one branch label.");for(var Bt=0,Nt=Q;Bt<Nt.length;Bt+=1){var $t=Nt[Bt];if("number"!=typeof $t&&"string"!=typeof $t)return kt.error("Branch labels must be numbers or strings.");if("number"==typeof $t&&Math.abs($t)>Number.MAX_SAFE_INTEGER)return kt.error("Branch labels must be integers no larger than "+Number.MAX_SAFE_INTEGER+".");if("number"==typeof $t&&Math.floor($t)!==$t)return kt.error("Numeric branch labels must be integer values.");if(i){if(kt.checkSubtype(i,Vo($t)))return null}else i=Vo($t);if(void 0!==m[String($t)])return kt.error("Branch labels must be unique.");m[String($t)]=S.length}var ie=e.parse(_t,F,c);if(!ie)return null;c=c||ie.type,S.push(ie)}var ke=e.parse(t[1],1,Vi);if(!ke)return null;var Le=e.parse(t[t.length-1],t.length-1,c);return Le?"value"!==ke.type.kind&&e.concat(1).checkSubtype(i,ke.type)?null:new Rn(i,c,ke,m,S,Le):null},Rn.prototype.evaluate=function(t){var e=this.input.evaluate(t);return(Vo(e)===this.inputType&&this.outputs[this.cases[e]]||this.otherwise).evaluate(t)},Rn.prototype.eachChild=function(t){t(this.input),this.outputs.forEach(t),t(this.otherwise)},Rn.prototype.outputDefined=function(){return this.outputs.every(function(t){return t.outputDefined()})&&this.otherwise.outputDefined()},Rn.prototype.serialize=function(){for(var t=this,e=["match",this.input.serialize()],i=[],c={},m=0,S=Object.keys(this.cases).sort();m<S.length;m+=1){var F=S[m];void 0===(Nt=c[this.cases[F]])?(c[this.cases[F]]=i.length,i.push([this.cases[F],[F]])):i[Nt][1].push(F)}for(var Q=function(ie){return"number"===t.inputType.kind?Number(ie):ie},_t=0,kt=i;_t<kt.length;_t+=1){var Bt=kt[_t],Nt=Bt[0],$t=Bt[1];e.push(1===$t.length?Q($t[0]):$t.map(Q)),e.push(this.outputs[outputIndex$1].serialize())}return e.push(this.otherwise.serialize()),e};var go=function(t,e,i){this.type=t,this.branches=e,this.otherwise=i};go.parse=function(t,e){if(t.length<4)return e.error("Expected at least 3 arguments, but found only "+(t.length-1)+".");if(t.length%2!=0)return e.error("Expected an odd number of arguments.");var i;e.expectedType&&"value"!==e.expectedType.kind&&(i=e.expectedType);for(var c=[],m=1;m<t.length-1;m+=2){var S=e.parse(t[m],m,Yi);if(!S)return null;var F=e.parse(t[m+1],m+1,i);if(!F)return null;c.push([S,F]),i=i||F.type}var Q=e.parse(t[t.length-1],t.length-1,i);return Q?new go(i,c,Q):null},go.prototype.evaluate=function(t){for(var e=0,i=this.branches;e<i.length;e+=1){var c=i[e],m=c[1];if(c[0].evaluate(t))return m.evaluate(t)}return this.otherwise.evaluate(t)},go.prototype.eachChild=function(t){for(var e=0,i=this.branches;e<i.length;e+=1){var c=i[e],m=c[1];t(c[0]),t(m)}t(this.otherwise)},go.prototype.outputDefined=function(){return this.branches.every(function(t){return t[1].outputDefined()})&&this.otherwise.outputDefined()},go.prototype.serialize=function(){var t=["case"];return this.eachChild(function(e){t.push(e.serialize())}),t};var Zo=function(t,e,i,c){this.type=t,this.input=e,this.beginIndex=i,this.endIndex=c};function Gr(t,e){return"=="===t||"!="===t?"boolean"===e.kind||"string"===e.kind||"number"===e.kind||"null"===e.kind||"value"===e.kind:"string"===e.kind||"number"===e.kind||"value"===e.kind}function cr(t,e,i,c){return 0===c.compare(e,i)}function co(t,e,i){var c="=="!==t&&"!="!==t;return function(){function m(S,F,Q){this.type=Yi,this.lhs=S,this.rhs=F,this.collator=Q,this.hasUntypedArgument="value"===S.type.kind||"value"===F.type.kind}return m.parse=function(S,F){if(3!==S.length&&4!==S.length)return F.error("Expected two or three arguments.");var Q=S[0],_t=F.parse(S[1],1,Vi);if(!_t)return null;if(!Gr(Q,_t.type))return F.concat(1).error('"'+Q+"\" comparisons are not supported for type '"+Jn(_t.type)+"'.");var kt=F.parse(S[2],2,Vi);if(!kt)return null;if(!Gr(Q,kt.type))return F.concat(2).error('"'+Q+"\" comparisons are not supported for type '"+Jn(kt.type)+"'.");if(_t.type.kind!==kt.type.kind&&"value"!==_t.type.kind&&"value"!==kt.type.kind)return F.error("Cannot compare types '"+Jn(_t.type)+"' and '"+Jn(kt.type)+"'.");c&&("value"===_t.type.kind&&"value"!==kt.type.kind?_t=new Jo(kt.type,[_t]):"value"!==_t.type.kind&&"value"===kt.type.kind&&(kt=new Jo(_t.type,[kt])));var Bt=null;if(4===S.length){if("string"!==_t.type.kind&&"string"!==kt.type.kind&&"value"!==_t.type.kind&&"value"!==kt.type.kind)return F.error("Cannot use collator to compare non-string types.");if(!(Bt=F.parse(S[3],3,so)))return null}return new m(_t,kt,Bt)},m.prototype.evaluate=function(S){var F=this.lhs.evaluate(S),Q=this.rhs.evaluate(S);if(c&&this.hasUntypedArgument){var _t=Vo(F),kt=Vo(Q);if(_t.kind!==kt.kind||"string"!==_t.kind&&"number"!==_t.kind)throw new Cr('Expected arguments for "'+t+'" to be (string, string) or (number, number), but found ('+_t.kind+", "+kt.kind+") instead.")}if(this.collator&&!c&&this.hasUntypedArgument){var Bt=Vo(F),Nt=Vo(Q);if("string"!==Bt.kind||"string"!==Nt.kind)return e(S,F,Q)}return this.collator?i(S,F,Q,this.collator.evaluate(S)):e(S,F,Q)},m.prototype.eachChild=function(S){S(this.lhs),S(this.rhs),this.collator&&S(this.collator)},m.prototype.outputDefined=function(){return!0},m.prototype.serialize=function(){var S=[t];return this.eachChild(function(F){S.push(F.serialize())}),S},m}()}Zo.parse=function(t,e){if(t.length<=2||t.length>=5)return e.error("Expected 3 or 4 arguments, but found "+(t.length-1)+" instead.");var i=e.parse(t[1],1,Vi),c=e.parse(t[2],2,yi);if(!i||!c)return null;if(!vr(i.type,[vo(Vi),Zi,Vi]))return e.error("Expected first argument to be of type array or string, but found "+Jn(i.type)+" instead");if(4===t.length){var m=e.parse(t[3],3,yi);return m?new Zo(i.type,i,c,m):null}return new Zo(i.type,i,c)},Zo.prototype.evaluate=function(t){var e=this.input.evaluate(t),i=this.beginIndex.evaluate(t);if(!bo(e,["string","array"]))throw new Cr("Expected first argument to be of type array or string, but found "+Jn(Vo(e))+" instead.");if(this.endIndex){var c=this.endIndex.evaluate(t);return e.slice(i,c)}return e.slice(i)},Zo.prototype.eachChild=function(t){t(this.input),t(this.beginIndex),this.endIndex&&t(this.endIndex)},Zo.prototype.outputDefined=function(){return!1},Zo.prototype.serialize=function(){if(null!=this.endIndex&&void 0!==this.endIndex){var t=this.endIndex.serialize();return["slice",this.input.serialize(),this.beginIndex.serialize(),t]}return["slice",this.input.serialize(),this.beginIndex.serialize()]};var la=co("==",function(t,e,i){return e===i},cr),as=co("!=",function(t,e,i){return e!==i},function(t,e,i,c){return!cr(0,e,i,c)}),_s=co("<",function(t,e,i){return e<i},function(t,e,i,c){return c.compare(e,i)<0}),Qs=co(">",function(t,e,i){return e>i},function(t,e,i,c){return c.compare(e,i)>0}),Oa=co("<=",function(t,e,i){return e<=i},function(t,e,i,c){return c.compare(e,i)<=0}),ya=co(">=",function(t,e,i){return e>=i},function(t,e,i,c){return c.compare(e,i)>=0}),Es=function(t,e,i,c,m){this.type=Zi,this.number=t,this.locale=e,this.currency=i,this.minFractionDigits=c,this.maxFractionDigits=m};Es.parse=function(t,e){if(3!==t.length)return e.error("Expected two arguments.");var i=e.parse(t[1],1,yi);if(!i)return null;var c=t[2];if("object"!=typeof c||Array.isArray(c))return e.error("NumberFormat options argument must be an object.");var m=null;if(c.locale&&!(m=e.parse(c.locale,1,Zi)))return null;var S=null;if(c.currency&&!(S=e.parse(c.currency,1,Zi)))return null;var F=null;if(c["min-fraction-digits"]&&!(F=e.parse(c["min-fraction-digits"],1,yi)))return null;var Q=null;return c["max-fraction-digits"]&&!(Q=e.parse(c["max-fraction-digits"],1,yi))?null:new Es(i,m,S,F,Q)},Es.prototype.evaluate=function(t){return new Intl.NumberFormat(this.locale?this.locale.evaluate(t):[],{style:this.currency?"currency":"decimal",currency:this.currency?this.currency.evaluate(t):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(t):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(t):void 0}).format(this.number.evaluate(t))},Es.prototype.eachChild=function(t){t(this.number),this.locale&&t(this.locale),this.currency&&t(this.currency),this.minFractionDigits&&t(this.minFractionDigits),this.maxFractionDigits&&t(this.maxFractionDigits)},Es.prototype.outputDefined=function(){return!1},Es.prototype.serialize=function(){var t={};return this.locale&&(t.locale=this.locale.serialize()),this.currency&&(t.currency=this.currency.serialize()),this.minFractionDigits&&(t["min-fraction-digits"]=this.minFractionDigits.serialize()),this.maxFractionDigits&&(t["max-fraction-digits"]=this.maxFractionDigits.serialize()),["number-format",this.number.serialize(),t]};var xs=function(t){this.type=yi,this.input=t};xs.parse=function(t,e){if(2!==t.length)return e.error("Expected 1 argument, but found "+(t.length-1)+" instead.");var i=e.parse(t[1],1);return i?"array"!==i.type.kind&&"string"!==i.type.kind&&"value"!==i.type.kind?e.error("Expected argument of type string or array, but found "+Jn(i.type)+" instead."):new xs(i):null},xs.prototype.evaluate=function(t){var e=this.input.evaluate(t);if("string"==typeof e||Array.isArray(e))return e.length;throw new Cr("Expected value to be of type string or array, but found "+Jn(Vo(e))+" instead.")},xs.prototype.eachChild=function(t){t(this.input)},xs.prototype.outputDefined=function(){return!1},xs.prototype.serialize=function(){var t=["length"];return this.eachChild(function(e){t.push(e.serialize())}),t};var Sa={"==":la,"!=":as,">":Qs,"<":_s,">=":ya,"<=":Oa,array:Jo,at:Rr,boolean:Jo,case:go,coalesce:Xo,collator:Ro,format:Ps,image:is,in:sr,"index-of":ir,interpolate:Ho,"interpolate-hcl":Ho,"interpolate-lab":Ho,length:xs,let:Go,literal:Or,match:Rn,number:Jo,"number-format":Es,object:Jo,slice:Zo,step:an,string:Jo,"to-boolean":Mr,"to-color":Mr,"to-number":Mr,"to-string":Mr,var:Li,within:Be};function r(t,e){var i=e[0],c=e[1],m=e[2],S=e[3];i=i.evaluate(t),c=c.evaluate(t),m=m.evaluate(t);var F=S?S.evaluate(t):1,Q=$s(i,c,m,F);if(Q)throw new Cr(Q);return new gn(i/255*F,c/255*F,m/255*F,F)}function f(t,e){return t in e}function U(t,e){var i=e[t];return void 0===i?null:i}function ut(t){return{type:t}}function Et(t){return{result:"success",value:t}}function ae(t){return{result:"error",value:t}}function qe(t){return"data-driven"===t["property-type"]||"cross-faded-data-driven"===t["property-type"]}function Xe(t){return!!t.expression&&t.expression.parameters.indexOf("zoom")>-1}function ki(t){return!!t.expression&&t.expression.interpolated}function Ci(t){return t instanceof Number?"number":t instanceof String?"string":t instanceof Boolean?"boolean":Array.isArray(t)?"array":null===t?"null":typeof t}function Sn(t){return"object"==typeof t&&null!==t&&!Array.isArray(t)}function no(t){return t}function wo(t,e,i){return void 0!==t?t:void 0!==e?e:void 0!==i?i:void 0}function fr(t,e,i,c,m){return wo(typeof i===m?c[i]:void 0,t.default,e.default)}function Fs(t,e,i){if("number"!==Ci(i))return wo(t.default,e.default);var c=t.stops.length;if(1===c||i<=t.stops[0][0])return t.stops[0][1];if(i>=t.stops[c-1][0])return t.stops[c-1][1];var m=ui(t.stops.map(function(S){return S[0]}),i);return t.stops[m][1]}function ns(t,e,i){var c=void 0!==t.base?t.base:1;if("number"!==Ci(i))return wo(t.default,e.default);var m=t.stops.length;if(1===m||i<=t.stops[0][0])return t.stops[0][1];if(i>=t.stops[m-1][0])return t.stops[m-1][1];var $t,ie,Le,Ve,S=ui(t.stops.map(function(Nt){return Nt[0]}),i),F=($t=c,Ve=i-(ie=t.stops[S][0]),0==(Le=t.stops[S+1][0]-ie)?0:1===$t?Ve/Le:(Math.pow($t,Ve)-1)/(Math.pow($t,Le)-1)),Q=t.stops[S][1],_t=t.stops[S+1][1],kt=bn[e.type]||no;if(t.colorSpace&&"rgb"!==t.colorSpace){var Bt=js[t.colorSpace];kt=function(Nt,$t){return Bt.reverse(Bt.interpolate(Bt.forward(Nt),Bt.forward($t),F))}}return"function"==typeof Q.evaluate?{evaluate:function(){for(var Nt=[],$t=arguments.length;$t--;)Nt[$t]=arguments[$t];var ie=Q.evaluate.apply(void 0,Nt),ke=_t.evaluate.apply(void 0,Nt);if(void 0!==ie&&void 0!==ke)return kt(ie,ke,F)}}:kt(Q,_t,F)}function Wr(t,e,i){return"color"===e.type?i=gn.parse(i):"formatted"===e.type?i=Uo.fromString(i.toString()):"resolvedImage"===e.type?i=zr.fromString(i.toString()):Ci(i)===e.type||"enum"===e.type&&e.values[i]||(i=void 0),wo(i,t.default,e.default)}Lo.register(Sa,{error:[{kind:"error"},[Zi],function(t,e){throw new Cr(e[0].evaluate(t))}],typeof:[Zi,[Vi],function(t,e){return Jn(Vo(e[0].evaluate(t)))}],"to-rgba":[vo(yi,4),[Ki],function(t,e){return e[0].evaluate(t).toArray()}],rgb:[Ki,[yi,yi,yi],r],rgba:[Ki,[yi,yi,yi,yi],r],has:{type:Yi,overloads:[[[Zi],function(t,e){return f(e[0].evaluate(t),t.properties())}],[[Zi,Nn],function(t,e){var i=e[1];return f(e[0].evaluate(t),i.evaluate(t))}]]},get:{type:Vi,overloads:[[[Zi],function(t,e){return U(e[0].evaluate(t),t.properties())}],[[Zi,Nn],function(t,e){var i=e[1];return U(e[0].evaluate(t),i.evaluate(t))}]]},"feature-state":[Vi,[Zi],function(t,e){return U(e[0].evaluate(t),t.featureState||{})}],properties:[Nn,[],function(t){return t.properties()}],"geometry-type":[Zi,[],function(t){return t.geometryType()}],id:[Vi,[],function(t){return t.id()}],zoom:[yi,[],function(t){return t.globals.zoom}],"heatmap-density":[yi,[],function(t){return t.globals.heatmapDensity||0}],"line-progress":[yi,[],function(t){return t.globals.lineProgress||0}],accumulated:[Vi,[],function(t){return void 0===t.globals.accumulated?null:t.globals.accumulated}],"+":[yi,ut(yi),function(t,e){for(var i=0,c=0,m=e;c<m.length;c+=1)i+=m[c].evaluate(t);return i}],"*":[yi,ut(yi),function(t,e){for(var i=1,c=0,m=e;c<m.length;c+=1)i*=m[c].evaluate(t);return i}],"-":{type:yi,overloads:[[[yi,yi],function(t,e){var i=e[1];return e[0].evaluate(t)-i.evaluate(t)}],[[yi],function(t,e){return-e[0].evaluate(t)}]]},"/":[yi,[yi,yi],function(t,e){var i=e[1];return e[0].evaluate(t)/i.evaluate(t)}],"%":[yi,[yi,yi],function(t,e){var i=e[1];return e[0].evaluate(t)%i.evaluate(t)}],ln2:[yi,[],function(){return Math.LN2}],pi:[yi,[],function(){return Math.PI}],e:[yi,[],function(){return Math.E}],"^":[yi,[yi,yi],function(t,e){var i=e[1];return Math.pow(e[0].evaluate(t),i.evaluate(t))}],sqrt:[yi,[yi],function(t,e){return Math.sqrt(e[0].evaluate(t))}],log10:[yi,[yi],function(t,e){return Math.log(e[0].evaluate(t))/Math.LN10}],ln:[yi,[yi],function(t,e){return Math.log(e[0].evaluate(t))}],log2:[yi,[yi],function(t,e){return Math.log(e[0].evaluate(t))/Math.LN2}],sin:[yi,[yi],function(t,e){return Math.sin(e[0].evaluate(t))}],cos:[yi,[yi],function(t,e){return Math.cos(e[0].evaluate(t))}],tan:[yi,[yi],function(t,e){return Math.tan(e[0].evaluate(t))}],asin:[yi,[yi],function(t,e){return Math.asin(e[0].evaluate(t))}],acos:[yi,[yi],function(t,e){return Math.acos(e[0].evaluate(t))}],atan:[yi,[yi],function(t,e){return Math.atan(e[0].evaluate(t))}],min:[yi,ut(yi),function(t,e){return Math.min.apply(Math,e.map(function(i){return i.evaluate(t)}))}],max:[yi,ut(yi),function(t,e){return Math.max.apply(Math,e.map(function(i){return i.evaluate(t)}))}],abs:[yi,[yi],function(t,e){return Math.abs(e[0].evaluate(t))}],round:[yi,[yi],function(t,e){var i=e[0].evaluate(t);return i<0?-Math.round(-i):Math.round(i)}],floor:[yi,[yi],function(t,e){return Math.floor(e[0].evaluate(t))}],ceil:[yi,[yi],function(t,e){return Math.ceil(e[0].evaluate(t))}],"filter-==":[Yi,[Zi,Vi],function(t,e){var i=e[0],c=e[1];return t.properties()[i.value]===c.value}],"filter-id-==":[Yi,[Vi],function(t,e){var i=e[0];return t.id()===i.value}],"filter-type-==":[Yi,[Zi],function(t,e){var i=e[0];return t.geometryType()===i.value}],"filter-<":[Yi,[Zi,Vi],function(t,e){var i=e[0],c=e[1],m=t.properties()[i.value],S=c.value;return typeof m==typeof S&&m<S}],"filter-id-<":[Yi,[Vi],function(t,e){var i=e[0],c=t.id(),m=i.value;return typeof c==typeof m&&c<m}],"filter->":[Yi,[Zi,Vi],function(t,e){var i=e[0],c=e[1],m=t.properties()[i.value],S=c.value;return typeof m==typeof S&&m>S}],"filter-id->":[Yi,[Vi],function(t,e){var i=e[0],c=t.id(),m=i.value;return typeof c==typeof m&&c>m}],"filter-<=":[Yi,[Zi,Vi],function(t,e){var i=e[0],c=e[1],m=t.properties()[i.value],S=c.value;return typeof m==typeof S&&m<=S}],"filter-id-<=":[Yi,[Vi],function(t,e){var i=e[0],c=t.id(),m=i.value;return typeof c==typeof m&&c<=m}],"filter->=":[Yi,[Zi,Vi],function(t,e){var i=e[0],c=e[1],m=t.properties()[i.value],S=c.value;return typeof m==typeof S&&m>=S}],"filter-id->=":[Yi,[Vi],function(t,e){var i=e[0],c=t.id(),m=i.value;return typeof c==typeof m&&c>=m}],"filter-has":[Yi,[Vi],function(t,e){return e[0].value in t.properties()}],"filter-has-id":[Yi,[],function(t){return null!==t.id()&&void 0!==t.id()}],"filter-type-in":[Yi,[vo(Zi)],function(t,e){return e[0].value.indexOf(t.geometryType())>=0}],"filter-id-in":[Yi,[vo(Vi)],function(t,e){return e[0].value.indexOf(t.id())>=0}],"filter-in-small":[Yi,[Zi,vo(Vi)],function(t,e){var i=e[0];return e[1].value.indexOf(t.properties()[i.value])>=0}],"filter-in-large":[Yi,[Zi,vo(Vi)],function(t,e){var i=e[0],c=e[1];return function(m,S,F,Q){for(;F<=Q;){var _t=F+Q>>1;if(S[_t]===m)return!0;S[_t]>m?Q=_t-1:F=_t+1}return!1}(t.properties()[i.value],c.value,0,c.value.length-1)}],all:{type:Yi,overloads:[[[Yi,Yi],function(t,e){var i=e[1];return e[0].evaluate(t)&&i.evaluate(t)}],[ut(Yi),function(t,e){for(var i=0,c=e;i<c.length;i+=1)if(!c[i].evaluate(t))return!1;return!0}]]},any:{type:Yi,overloads:[[[Yi,Yi],function(t,e){var i=e[1];return e[0].evaluate(t)||i.evaluate(t)}],[ut(Yi),function(t,e){for(var i=0,c=e;i<c.length;i+=1)if(c[i].evaluate(t))return!0;return!1}]]},"!":[Yi,[Yi],function(t,e){return!e[0].evaluate(t)}],"is-supported-script":[Yi,[Zi],function(t,e){var i=t.globals&&t.globals.isSupportedScript;return!i||i(e[0].evaluate(t))}],upcase:[Zi,[Zi],function(t,e){return e[0].evaluate(t).toUpperCase()}],downcase:[Zi,[Zi],function(t,e){return e[0].evaluate(t).toLowerCase()}],concat:[Zi,ut(Vi),function(t,e){return e.map(function(i){return Hr(i.evaluate(t))}).join("")}],"resolved-locale":[Zi,[so],function(t,e){return e[0].evaluate(t).resolvedLocale()}]});var ha=function(t,e){var i;this.expression=t,this._warningHistory={},this._evaluator=new rr,this._defaultValue=e?"color"===(i=e).type&&Sn(i.default)?new gn(0,0,0,0):"color"===i.type?gn.parse(i.default)||null:void 0===i.default?null:i.default:null,this._enumValues=e&&"enum"===e.type?e.values:null};function ls(t){return Array.isArray(t)&&t.length>0&&"string"==typeof t[0]&&t[0]in Sa}function ca(t,e){var m,S,i=new ci(Sa,[],e?(S={color:Ki,string:Zi,number:yi,enum:Zi,boolean:Yi,formatted:Hn,resolvedImage:Gn},"array"===(m=e).type?vo(S[m.value]||Vi,m.length):S[m.type]):void 0),c=i.parse(t,void 0,void 0,void 0,e&&"string"===e.type?{typeAnnotation:"coerce"}:void 0);return c?Et(new ha(c,e)):ae(i.errors)}ha.prototype.evaluateWithoutErrorHandling=function(t,e,i,c,m,S){return this._evaluator.globals=t,this._evaluator.feature=e,this._evaluator.featureState=i,this._evaluator.canonical=c,this._evaluator.availableImages=m||null,this._evaluator.formattedSection=S,this.expression.evaluate(this._evaluator)},ha.prototype.evaluate=function(t,e,i,c,m,S){this._evaluator.globals=t,this._evaluator.feature=e||null,this._evaluator.featureState=i||null,this._evaluator.canonical=c,this._evaluator.availableImages=m||null,this._evaluator.formattedSection=S||null;try{var F=this.expression.evaluate(this._evaluator);if(null==F||"number"==typeof F&&F!=F)return this._defaultValue;if(this._enumValues&&!(F in this._enumValues))throw new Cr("Expected value to be one of "+Object.keys(this._enumValues).map(function(Q){return JSON.stringify(Q)}).join(", ")+", but found "+JSON.stringify(F)+" instead.");return F}catch(Q){return this._warningHistory[Q.message]||(this._warningHistory[Q.message]=!0,typeof console<"u"&&console.warn(Q.message)),this._defaultValue}};var ur=function(t,e){this.kind=t,this._styleExpression=e,this.isStateDependent="constant"!==t&&!ei(e.expression)};ur.prototype.evaluateWithoutErrorHandling=function(t,e,i,c,m,S){return this._styleExpression.evaluateWithoutErrorHandling(t,e,i,c,m,S)},ur.prototype.evaluate=function(t,e,i,c,m,S){return this._styleExpression.evaluate(t,e,i,c,m,S)};var Ms=function(t,e,i,c){this.kind=t,this.zoomStops=i,this._styleExpression=e,this.isStateDependent="camera"!==t&&!ei(e.expression),this.interpolationType=c};function Hs(t,e){if("error"===(t=ca(t,e)).result)return t;var i=t.value.expression,c=je(i);if(!c&&!qe(e))return ae([new hi("","data expressions not supported")]);var m=vi(i,["zoom"]);if(!m&&!Xe(e))return ae([new hi("","zoom expressions not supported")]);var S=function F(Q){var _t=null;if(Q instanceof Go)_t=F(Q.result);else if(Q instanceof Xo)for(var kt=0,Bt=Q.args;kt<Bt.length&&!(_t=F(Bt[kt]));kt+=1);else(Q instanceof an||Q instanceof Ho)&&Q.input instanceof Lo&&"zoom"===Q.input.name&&(_t=Q);return _t instanceof hi||Q.eachChild(function(Nt){var $t=F(Nt);$t instanceof hi?_t=$t:!_t&&$t?_t=new hi("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):_t&&$t&&_t!==$t&&(_t=new hi("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))}),_t}(i);return S||m?S instanceof hi?ae([S]):S instanceof Ho&&!ki(e)?ae([new hi("",'"interpolate" expressions cannot be used with this property')]):Et(S?new Ms(c?"camera":"composite",t.value,S.labels,S instanceof Ho?S.interpolation:void 0):new ur(c?"constant":"source",t.value)):ae([new hi("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')])}Ms.prototype.evaluateWithoutErrorHandling=function(t,e,i,c,m,S){return this._styleExpression.evaluateWithoutErrorHandling(t,e,i,c,m,S)},Ms.prototype.evaluate=function(t,e,i,c,m,S){return this._styleExpression.evaluate(t,e,i,c,m,S)},Ms.prototype.interpolationFactor=function(t,e,i){return this.interpolationType?Ho.interpolationFactor(this.interpolationType,t,e,i):0};var Ta=function(t,e){this._parameters=t,this._specification=e,Si(this,function i(c,m){var S,F,Q,_t="color"===m.type,kt=c.stops&&"object"==typeof c.stops[0][0],Bt=kt||!(kt||void 0!==c.property),Nt=c.type||(ki(m)?"exponential":"interval");if(_t&&((c=Si({},c)).stops&&(c.stops=c.stops.map(function(dn){return[dn[0],gn.parse(dn[1])]})),c.default=gn.parse(c.default?c.default:m.default)),c.colorSpace&&"rgb"!==c.colorSpace&&!js[c.colorSpace])throw new Error("Unknown color space: "+c.colorSpace);if("exponential"===Nt)S=ns;else if("interval"===Nt)S=Fs;else if("categorical"===Nt){S=fr,F=Object.create(null);for(var $t=0,ie=c.stops;$t<ie.length;$t+=1){var ke=ie[$t];F[ke[0]]=ke[1]}Q=typeof c.stops[0][0]}else{if("identity"!==Nt)throw new Error('Unknown function type "'+Nt+'"');S=Wr}if(kt){for(var Le={},Ve=[],ze=0;ze<c.stops.length;ze++){var Qe=c.stops[ze],li=Qe[0].zoom;void 0===Le[li]&&(Le[li]={zoom:li,type:c.type,property:c.property,default:c.default,stops:[]},Ve.push(li)),Le[li].stops.push([Qe[0].value,Qe[1]])}for(var gi=[],_i=0,Ai=Ve;_i<Ai.length;_i+=1){var qi=Ai[_i];gi.push([Le[qi].zoom,i(Le[qi],m)])}var on={name:"linear"};return{kind:"composite",interpolationType:on,interpolationFactor:Ho.interpolationFactor.bind(void 0,on),zoomStops:gi.map(function(dn){return dn[0]}),evaluate:function(dn,Dn){var mn=dn.zoom;return ns({stops:gi,base:c.base},m,mn).evaluate(mn,Dn)}}}if(Bt){var In="exponential"===Nt?{name:"exponential",base:void 0!==c.base?c.base:1}:null;return{kind:"camera",interpolationType:In,interpolationFactor:Ho.interpolationFactor.bind(void 0,In),zoomStops:c.stops.map(function(dn){return dn[0]}),evaluate:function(dn){return S(c,m,dn.zoom,F,Q)}}}return{kind:"source",evaluate:function(dn,Dn){var mn=Dn&&Dn.properties?Dn.properties[c.property]:void 0;return void 0===mn?wo(c.default,m.default):S(c,m,mn,F,Q)}}}(this._parameters,this._specification))};function Ls(t){var e=t.key,i=t.value,c=t.valueSpec||{},m=t.objectElementValidators||{},S=t.style,F=t.styleSpec,Q=[],_t=Ci(i);if("object"!==_t)return[new Ee(e,i,"object expected, "+_t+" found")];for(var kt in i){var Bt=kt.split(".")[0],Nt=c[Bt]||c["*"],$t=void 0;if(m[Bt])$t=m[Bt];else if(c[Bt])$t=ji;else if(m["*"])$t=m["*"];else{if(!c["*"]){Q.push(new Ee(e,i[kt],'unknown property "'+kt+'"'));continue}$t=ji}Q=Q.concat($t({key:(e&&e+".")+kt,value:i[kt],valueSpec:Nt,style:S,styleSpec:F,object:i,objectKey:kt},i))}for(var ie in c)m[ie]||c[ie].required&&void 0===c[ie].default&&void 0===i[ie]&&Q.push(new Ee(e,i,'missing required property "'+ie+'"'));return Q}function Ka(t){var e=t.value,i=t.valueSpec,c=t.style,m=t.styleSpec,S=t.key,F=t.arrayElementValidator||ji;if("array"!==Ci(e))return[new Ee(S,e,"array expected, "+Ci(e)+" found")];if(i.length&&e.length!==i.length)return[new Ee(S,e,"array length "+i.length+" expected, length "+e.length+" found")];if(i["min-length"]&&e.length<i["min-length"])return[new Ee(S,e,"array length at least "+i["min-length"]+" expected, length "+e.length+" found")];var Q={type:i.value,values:i.values};m.$version<7&&(Q.function=i.function),"object"===Ci(i.value)&&(Q=i.value);for(var _t=[],kt=0;kt<e.length;kt++)_t=_t.concat(F({array:e,arrayIndex:kt,value:e[kt],valueSpec:Q,style:c,styleSpec:m,key:S+"["+kt+"]"}));return _t}function Va(t){var e=t.key,i=t.value,c=t.valueSpec,m=Ci(i);return"number"===m&&i!=i&&(m="NaN"),"number"!==m?[new Ee(e,i,"number expected, "+m+" found")]:"minimum"in c&&i<c.minimum?[new Ee(e,i,i+" is less than the minimum value "+c.minimum)]:"maximum"in c&&i>c.maximum?[new Ee(e,i,i+" is greater than the maximum value "+c.maximum)]:[]}function ve(t){var e,i,c,m=t.valueSpec,S=Oi(t.value.type),F={},Q="categorical"!==S&&void 0===t.value.property,_t=!Q,kt="array"===Ci(t.value.stops)&&"array"===Ci(t.value.stops[0])&&"object"===Ci(t.value.stops[0][0]),Bt=Ls({key:t.key,value:t.value,valueSpec:t.styleSpec.function,style:t.style,styleSpec:t.styleSpec,objectElementValidators:{stops:function(ie){if("identity"===S)return[new Ee(ie.key,ie.value,'identity function may not have a "stops" property')];var ke=[],Le=ie.value;return ke=ke.concat(Ka({key:ie.key,value:Le,valueSpec:ie.valueSpec,style:ie.style,styleSpec:ie.styleSpec,arrayElementValidator:Nt})),"array"===Ci(Le)&&0===Le.length&&ke.push(new Ee(ie.key,Le,"array must have at least one stop")),ke},default:function(ie){return ji({key:ie.key,value:ie.value,valueSpec:m,style:ie.style,styleSpec:ie.styleSpec})}}});return"identity"===S&&Q&&Bt.push(new Ee(t.key,t.value,'missing required property "property"')),"identity"===S||t.value.stops||Bt.push(new Ee(t.key,t.value,'missing required property "stops"')),"exponential"===S&&t.valueSpec.expression&&!ki(t.valueSpec)&&Bt.push(new Ee(t.key,t.value,"exponential functions not supported")),t.styleSpec.$version>=8&&(_t&&!qe(t.valueSpec)?Bt.push(new Ee(t.key,t.value,"property functions not supported")):Q&&!Xe(t.valueSpec)&&Bt.push(new Ee(t.key,t.value,"zoom functions not supported"))),"categorical"!==S&&!kt||void 0!==t.value.property||Bt.push(new Ee(t.key,t.value,'"property" property is required')),Bt;function Nt(ie){var ke=[],Le=ie.value,Ve=ie.key;if("array"!==Ci(Le))return[new Ee(Ve,Le,"array expected, "+Ci(Le)+" found")];if(2!==Le.length)return[new Ee(Ve,Le,"array length 2 expected, length "+Le.length+" found")];if(kt){if("object"!==Ci(Le[0]))return[new Ee(Ve,Le,"object expected, "+Ci(Le[0])+" found")];if(void 0===Le[0].zoom)return[new Ee(Ve,Le,"object stop key must have zoom")];if(void 0===Le[0].value)return[new Ee(Ve,Le,"object stop key must have value")];if(c&&c>Oi(Le[0].zoom))return[new Ee(Ve,Le[0].zoom,"stop zoom values must appear in ascending order")];Oi(Le[0].zoom)!==c&&(c=Oi(Le[0].zoom),i=void 0,F={}),ke=ke.concat(Ls({key:Ve+"[0]",value:Le[0],valueSpec:{zoom:{}},style:ie.style,styleSpec:ie.styleSpec,objectElementValidators:{zoom:Va,value:$t}}))}else ke=ke.concat($t({key:Ve+"[0]",value:Le[0],valueSpec:{},style:ie.style,styleSpec:ie.styleSpec},Le));return ls(di(Le[1]))?ke.concat([new Ee(Ve+"[1]",Le[1],"expressions are not allowed in function stops.")]):ke.concat(ji({key:Ve+"[1]",value:Le[1],valueSpec:m,style:ie.style,styleSpec:ie.styleSpec}))}function $t(ie,ke){var Le=Ci(ie.value),Ve=Oi(ie.value),ze=null!==ie.value?ie.value:ke;if(e){if(Le!==e)return[new Ee(ie.key,ze,Le+" stop domain type must match previous stop domain type "+e)]}else e=Le;if("number"!==Le&&"string"!==Le&&"boolean"!==Le)return[new Ee(ie.key,ze,"stop domain value must be a number, string, or boolean")];if("number"!==Le&&"categorical"!==S){var Qe="number expected, "+Le+" found";return qe(m)&&void 0===S&&(Qe+='\nIf you intended to use a categorical function, specify `"type": "categorical"`.'),[new Ee(ie.key,ze,Qe)]}return"categorical"!==S||"number"!==Le||isFinite(Ve)&&Math.floor(Ve)===Ve?"categorical"!==S&&"number"===Le&&void 0!==i&&Ve<i?[new Ee(ie.key,ze,"stop domain values must appear in ascending order")]:(i=Ve,"categorical"===S&&Ve in F?[new Ee(ie.key,ze,"stop domain values must be unique")]:(F[Ve]=!0,[])):[new Ee(ie.key,ze,"integer expected, found "+Ve)]}}function Ne(t){var e=("property"===t.expressionContext?Hs:ca)(di(t.value),t.valueSpec);if("error"===e.result)return e.value.map(function(c){return new Ee(""+t.key+c.key,t.value,c.message)});var i=e.value.expression||e.value._styleExpression.expression;if("property"===t.expressionContext&&"text-font"===t.propertyKey&&!i.outputDefined())return[new Ee(t.key,t.value,'Invalid data expression for "'+t.propertyKey+'". Output values must be contained as literals within the expression.')];if("property"===t.expressionContext&&"layout"===t.propertyType&&!ei(i))return[new Ee(t.key,t.value,'"feature-state" data expressions are not supported with layout properties.')];if("filter"===t.expressionContext&&!ei(i))return[new Ee(t.key,t.value,'"feature-state" data expressions are not supported with filters.')];if(t.expressionContext&&0===t.expressionContext.indexOf("cluster")){if(!vi(i,["zoom","feature-state"]))return[new Ee(t.key,t.value,'"zoom" and "feature-state" expressions are not supported with cluster properties.')];if("cluster-initial"===t.expressionContext&&!je(i))return[new Ee(t.key,t.value,"Feature data expressions are not supported with initial expression part of cluster properties.")]}return[]}function ni(t){var e=t.key,i=t.value,c=t.valueSpec,m=[];return Array.isArray(c.values)?-1===c.values.indexOf(Oi(i))&&m.push(new Ee(e,i,"expected one of ["+c.values.join(", ")+"], "+JSON.stringify(i)+" found")):-1===Object.keys(c.values).indexOf(Oi(i))&&m.push(new Ee(e,i,"expected one of ["+Object.keys(c.values).join(", ")+"], "+JSON.stringify(i)+" found")),m}function zi(t){if(!0===t||!1===t)return!0;if(!Array.isArray(t)||0===t.length)return!1;switch(t[0]){case"has":return t.length>=2&&"$id"!==t[1]&&"$type"!==t[1];case"in":return t.length>=3&&("string"!=typeof t[1]||Array.isArray(t[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return 3!==t.length||Array.isArray(t[1])||Array.isArray(t[2]);case"any":case"all":for(var e=0,i=t.slice(1);e<i.length;e+=1){var c=i[e];if(!zi(c)&&"boolean"!=typeof c)return!1}return!0;default:return!0}}Ta.deserialize=function(t){return new Ta(t._parameters,t._specification)},Ta.serialize=function(t){return{_parameters:t._parameters,_specification:t._specification}};var ri={type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}};function Di(t){if(null==t)return{filter:function(){return!0},needGeometry:!1};zi(t)||(t=rn(t));var e=ca(t,ri);if("error"===e.result)throw new Error(e.value.map(function(i){return i.key+": "+i.message}).join(", "));return{filter:function(i,c,m){return e.value.evaluate(i,c,{},m)},needGeometry:function i(c){if(!Array.isArray(c))return!1;if("within"===c[0])return!0;for(var m=1;m<c.length;m++)if(i(c[m]))return!0;return!1}(t)}}function Qi(t,e){return t<e?-1:t>e?1:0}function rn(t){if(!t)return!0;var e,i=t[0];return t.length<=1?"any"!==i:"=="===i?xn(t[1],t[2],"=="):"!="===i?Wn(xn(t[1],t[2],"==")):"<"===i||">"===i||"<="===i||">="===i?xn(t[1],t[2],i):"any"===i?(e=t.slice(1),["any"].concat(e.map(rn))):"all"===i?["all"].concat(t.slice(1).map(rn)):"none"===i?["all"].concat(t.slice(1).map(rn).map(Wn)):"in"===i?lo(t[1],t.slice(2)):"!in"===i?Wn(lo(t[1],t.slice(2))):"has"===i?oo(t[1]):"!has"===i?Wn(oo(t[1])):"within"!==i||t}function xn(t,e,i){switch(t){case"$type":return["filter-type-"+i,e];case"$id":return["filter-id-"+i,e];default:return["filter-"+i,t,e]}}function lo(t,e){if(0===e.length)return!1;switch(t){case"$type":return["filter-type-in",["literal",e]];case"$id":return["filter-id-in",["literal",e]];default:return e.length>200&&!e.some(function(i){return typeof i!=typeof e[0]})?["filter-in-large",t,["literal",e.sort(Qi)]]:["filter-in-small",t,["literal",e]]}}function oo(t){switch(t){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",t]}}function Wn(t){return["!",t]}function Xt(t){return zi(di(t.value))?Ne(Si({},t,{expressionContext:"filter",valueSpec:{value:"boolean"}})):function e(i){var c=i.value,m=i.key;if("array"!==Ci(c))return[new Ee(m,c,"array expected, "+Ci(c)+" found")];var S,F=i.styleSpec,Q=[];if(c.length<1)return[new Ee(m,c,"filter array must have at least 1 element")];switch(Q=Q.concat(ni({key:m+"[0]",value:c[0],valueSpec:F.filter_operator,style:i.style,styleSpec:i.styleSpec})),Oi(c[0])){case"<":case"<=":case">":case">=":c.length>=2&&"$type"===Oi(c[1])&&Q.push(new Ee(m,c,'"$type" cannot be use with operator "'+c[0]+'"'));case"==":case"!=":3!==c.length&&Q.push(new Ee(m,c,'filter array for operator "'+c[0]+'" must have 3 elements'));case"in":case"!in":c.length>=2&&"string"!==(S=Ci(c[1]))&&Q.push(new Ee(m+"[1]",c[1],"string expected, "+S+" found"));for(var _t=2;_t<c.length;_t++)S=Ci(c[_t]),"$type"===Oi(c[1])?Q=Q.concat(ni({key:m+"["+_t+"]",value:c[_t],valueSpec:F.geometry_type,style:i.style,styleSpec:i.styleSpec})):"string"!==S&&"number"!==S&&"boolean"!==S&&Q.push(new Ee(m+"["+_t+"]",c[_t],"string, number, or boolean expected, "+S+" found"));break;case"any":case"all":case"none":for(var kt=1;kt<c.length;kt++)Q=Q.concat(e({key:m+"["+kt+"]",value:c[kt],style:i.style,styleSpec:i.styleSpec}));break;case"has":case"!has":S=Ci(c[1]),2!==c.length?Q.push(new Ee(m,c,'filter array for "'+c[0]+'" operator must have 2 elements')):"string"!==S&&Q.push(new Ee(m+"[1]",c[1],"string expected, "+S+" found"));break;case"within":S=Ci(c[1]),2!==c.length?Q.push(new Ee(m,c,'filter array for "'+c[0]+'" operator must have 2 elements')):"object"!==S&&Q.push(new Ee(m+"[1]",c[1],"object expected, "+S+" found"))}return Q}(t)}function Z(t,e){var i=t.key,c=t.style,m=t.styleSpec,S=t.value,F=t.objectKey,Q=m[e+"_"+t.layerType];if(!Q)return[];var _t=F.match(/^(.*)-transition$/);if("paint"===e&&_t&&Q[_t[1]]&&Q[_t[1]].transition)return ji({key:i,value:S,valueSpec:m.transition,style:c,styleSpec:m});var kt,Bt=t.valueSpec||Q[F];if(!Bt)return[new Ee(i,S,'unknown property "'+F+'"')];if("string"===Ci(S)&&qe(Bt)&&!Bt.tokens&&(kt=/^{([^}]+)}$/.exec(S)))return[new Ee(i,S,'"'+F+'" does not support interpolation syntax\nUse an identity property function instead: `{ "type": "identity", "property": '+JSON.stringify(kt[1])+" }`.")];var Nt=[];return"symbol"===t.layerType&&("text-field"===F&&c&&!c.glyphs&&Nt.push(new Ee(i,S,'use of "text-field" requires a style "glyphs" property')),"text-font"===F&&Sn(di(S))&&"identity"===Oi(S.type)&&Nt.push(new Ee(i,S,'"text-font" does not support identity functions'))),Nt.concat(ji({key:t.key,value:S,valueSpec:Bt,style:c,styleSpec:m,expressionContext:"property",propertyType:e,propertyKey:F}))}function Tt(t){return Z(t,"paint")}function ce(t){return Z(t,"layout")}function Ke(t){var e=[],i=t.value,c=t.key,m=t.style,S=t.styleSpec;i.type||i.ref||e.push(new Ee(c,i,'either "type" or "ref" is required'));var F,Q=Oi(i.type),_t=Oi(i.ref);if(i.id)for(var kt=Oi(i.id),Bt=0;Bt<t.arrayIndex;Bt++){var Nt=m.layers[Bt];Oi(Nt.id)===kt&&e.push(new Ee(c,i.id,'duplicate layer id "'+i.id+'", previously used at line '+Nt.id.__line__))}if("ref"in i)["type","source","source-layer","filter","layout"].forEach(function(ke){ke in i&&e.push(new Ee(c,i[ke],'"'+ke+'" is prohibited for ref layers'))}),m.layers.forEach(function(ke){Oi(ke.id)===_t&&(F=ke)}),F?F.ref?e.push(new Ee(c,i.ref,"ref cannot reference another ref layer")):Q=Oi(F.type):e.push(new Ee(c,i.ref,'ref layer "'+_t+'" not found'));else if("background"!==Q)if(i.source){var $t=m.sources&&m.sources[i.source],ie=$t&&Oi($t.type);$t?"vector"===ie&&"raster"===Q?e.push(new Ee(c,i.source,'layer "'+i.id+'" requires a raster source')):"raster"===ie&&"raster"!==Q?e.push(new Ee(c,i.source,'layer "'+i.id+'" requires a vector source')):"vector"!==ie||i["source-layer"]?"raster-dem"===ie&&"hillshade"!==Q?e.push(new Ee(c,i.source,"raster-dem source can only be used with layer type 'hillshade'.")):"line"!==Q||!i.paint||!i.paint["line-gradient"]||"geojson"===ie&&$t.lineMetrics||e.push(new Ee(c,i,'layer "'+i.id+'" specifies a line-gradient, which requires a GeoJSON source with `lineMetrics` enabled.')):e.push(new Ee(c,i,'layer "'+i.id+'" must specify a "source-layer"')):e.push(new Ee(c,i.source,'source "'+i.source+'" not found'))}else e.push(new Ee(c,i,'missing required property "source"'));return e=e.concat(Ls({key:c,value:i,valueSpec:S.layer,style:t.style,styleSpec:t.styleSpec,objectElementValidators:{"*":function(){return[]},type:function(){return ji({key:c+".type",value:i.type,valueSpec:S.layer.type,style:t.style,styleSpec:t.styleSpec,object:i,objectKey:"type"})},filter:Xt,layout:function(ke){return Ls({layer:i,key:ke.key,value:ke.value,style:ke.style,styleSpec:ke.styleSpec,objectElementValidators:{"*":function(Le){return ce(Si({layerType:Q},Le))}}})},paint:function(ke){return Ls({layer:i,key:ke.key,value:ke.value,style:ke.style,styleSpec:ke.styleSpec,objectElementValidators:{"*":function(Le){return Tt(Si({layerType:Q},Le))}}})}}}))}function $e(t){var e=t.value,i=t.key,c=Ci(e);return"string"!==c?[new Ee(i,e,"string expected, "+c+" found")]:[]}var ti={promoteId:function(t){var e=t.key,i=t.value;if("string"===Ci(i))return $e({key:e,value:i});var c=[];for(var m in i)c.push.apply(c,$e({key:e+"."+m,value:i[m]}));return c}};function Bi(t){var e=t.value,i=t.key,c=t.styleSpec,m=t.style;if(!e.type)return[new Ee(i,e,'"type" is required')];var S,F=Oi(e.type);switch(F){case"vector":case"raster":case"raster-dem":return Ls({key:i,value:e,valueSpec:c["source_"+F.replace("-","_")],style:t.style,styleSpec:c,objectElementValidators:ti});case"geojson":if(S=Ls({key:i,value:e,valueSpec:c.source_geojson,style:m,styleSpec:c,objectElementValidators:ti}),e.cluster)for(var Q in e.clusterProperties){var _t=e.clusterProperties[Q],kt=_t[0],Bt="string"==typeof kt?[kt,["accumulated"],["get",Q]]:kt;S.push.apply(S,Ne({key:i+"."+Q+".map",value:_t[1],expressionContext:"cluster-map"})),S.push.apply(S,Ne({key:i+"."+Q+".reduce",value:Bt,expressionContext:"cluster-reduce"}))}return S;case"video":return Ls({key:i,value:e,valueSpec:c.source_video,style:m,styleSpec:c});case"image":return Ls({key:i,value:e,valueSpec:c.source_image,style:m,styleSpec:c});case"canvas":return[new Ee(i,null,"Please use runtime APIs to add canvas sources, rather than including them in stylesheets.","source.canvas")];default:return ni({key:i+".type",value:e.type,valueSpec:{values:["vector","raster","raster-dem","geojson","video","image"]},style:m,styleSpec:c})}}function Wi(t){var e=t.value,i=t.styleSpec,c=i.light,m=t.style,S=[],F=Ci(e);if(void 0===e)return S;if("object"!==F)return S.concat([new Ee("light",e,"object expected, "+F+" found")]);for(var Q in e){var _t=Q.match(/^(.*)-transition$/);S=S.concat(_t&&c[_t[1]]&&c[_t[1]].transition?ji({key:Q,value:e[Q],valueSpec:i.transition,style:m,styleSpec:i}):c[Q]?ji({key:Q,value:e[Q],valueSpec:c[Q],style:m,styleSpec:i}):[new Ee(Q,e[Q],'unknown property "'+Q+'"')])}return S}var en={"*":function(){return[]},array:Ka,boolean:function(t){var e=t.value,i=t.key,c=Ci(e);return"boolean"!==c?[new Ee(i,e,"boolean expected, "+c+" found")]:[]},number:Va,color:function(t){var e=t.key,i=t.value,c=Ci(i);return"string"!==c?[new Ee(e,i,"color expected, "+c+" found")]:null===ao(i)?[new Ee(e,i,'color expected, "'+i+'" found')]:[]},constants:ii,enum:ni,filter:Xt,function:ve,layer:Ke,object:Ls,source:Bi,light:Wi,string:$e,formatted:function(t){return 0===$e(t).length?[]:Ne(t)},resolvedImage:function(t){return 0===$e(t).length?[]:Ne(t)}};function ji(t){var e=t.value,i=t.valueSpec,c=t.styleSpec;return i.expression&&Sn(Oi(e))?ve(t):i.expression&&ls(di(e))?Ne(t):i.type&&en[i.type]?en[i.type](t):Ls(Si({},t,{valueSpec:i.type?c[i.type]:i}))}function Gi(t){var e=t.value,i=t.key,c=$e(t);return c.length||(-1===e.indexOf("{fontstack}")&&c.push(new Ee(i,e,'"glyphs" url must include a "{fontstack}" token')),-1===e.indexOf("{range}")&&c.push(new Ee(i,e,'"glyphs" url must include a "{range}" token'))),c}function Qn(t,e){void 0===e&&(e=oe);var i=[];return i=i.concat(ji({key:"",value:t,valueSpec:e.$root,styleSpec:e,style:t,objectElementValidators:{glyphs:Gi,"*":function(){return[]}}})),t.constants&&(i=i.concat(ii({key:"constants",value:t.constants,style:t,styleSpec:e}))),Zn(i)}function Zn(t){return[].concat(t).sort(function(e,i){return e.line-i.line})}function ho(t){return function(){for(var e=[],i=arguments.length;i--;)e[i]=arguments[i];return Zn(t.apply(this,e))}}Qn.source=ho(Bi),Qn.light=ho(Wi),Qn.layer=ho(Ke),Qn.filter=ho(Xt),Qn.paintProperty=ho(Tt),Qn.layoutProperty=ho(ce);var uo=Qn,_o=uo.light,ar=uo.paintProperty,mr=uo.layoutProperty;function Eo(t,e){var i=!1;if(e&&e.length)for(var c=0,m=e;c<m.length;c+=1)t.fire(new De(new Error(m[c].message))),i=!0;return i}var jo=Un;function Un(t,e,i){var c=this.cells=[];if(t instanceof ArrayBuffer){this.arrayBuffer=t;var m=new Int32Array(this.arrayBuffer);t=m[0],this.d=(e=m[1])+2*(i=m[2]);for(var S=0;S<this.d*this.d;S++){var F=m[3+S],Q=m[3+S+1];c.push(F===Q?null:m.subarray(F,Q))}var _t=m[3+c.length+1];this.keys=m.subarray(m[3+c.length],_t),this.bboxes=m.subarray(_t),this.insert=this._insertReadonly}else{this.d=e+2*i;for(var kt=0;kt<this.d*this.d;kt++)c.push([]);this.keys=[],this.bboxes=[]}this.n=e,this.extent=t,this.padding=i,this.scale=e/t,this.uid=0;var Bt=i/e*t;this.min=-Bt,this.max=t+Bt}Un.prototype.insert=function(t,e,i,c,m){this._forEachCell(e,i,c,m,this._insertCell,this.uid++),this.keys.push(t),this.bboxes.push(e),this.bboxes.push(i),this.bboxes.push(c),this.bboxes.push(m)},Un.prototype._insertReadonly=function(){throw"Cannot insert into a GridIndex created from an ArrayBuffer."},Un.prototype._insertCell=function(t,e,i,c,m,S){this.cells[m].push(S)},Un.prototype.query=function(t,e,i,c,m){var S=this.min,F=this.max;if(t<=S&&e<=S&&F<=i&&F<=c&&!m)return Array.prototype.slice.call(this.keys);var Q=[];return this._forEachCell(t,e,i,c,this._queryCell,Q,{},m),Q},Un.prototype._queryCell=function(t,e,i,c,m,S,F,Q){var _t=this.cells[m];if(null!==_t)for(var kt=this.keys,Bt=this.bboxes,Nt=0;Nt<_t.length;Nt++){var $t=_t[Nt];if(void 0===F[$t]){var ie=4*$t;(Q?Q(Bt[ie+0],Bt[ie+1],Bt[ie+2],Bt[ie+3]):t<=Bt[ie+2]&&e<=Bt[ie+3]&&i>=Bt[ie+0]&&c>=Bt[ie+1])?(F[$t]=!0,S.push(kt[$t])):F[$t]=!1}}},Un.prototype._forEachCell=function(t,e,i,c,m,S,F,Q){for(var _t=this._convertToCellCoord(t),kt=this._convertToCellCoord(e),Bt=this._convertToCellCoord(i),Nt=this._convertToCellCoord(c),$t=_t;$t<=Bt;$t++)for(var ie=kt;ie<=Nt;ie++){var ke=this.d*ie+$t;if((!Q||Q(this._convertFromCellCoord($t),this._convertFromCellCoord(ie),this._convertFromCellCoord($t+1),this._convertFromCellCoord(ie+1)))&&m.call(this,t,e,i,c,ke,S,F,Q))return}},Un.prototype._convertFromCellCoord=function(t){return(t-this.padding)/this.scale},Un.prototype._convertToCellCoord=function(t){return Math.max(0,Math.min(this.d-1,Math.floor(t*this.scale)+this.padding))},Un.prototype.toArrayBuffer=function(){if(this.arrayBuffer)return this.arrayBuffer;for(var t=this.cells,e=3+this.cells.length+1+1,i=0,c=0;c<this.cells.length;c++)i+=this.cells[c].length;var m=new Int32Array(e+i+this.keys.length+this.bboxes.length);m[0]=this.extent,m[1]=this.n,m[2]=this.padding;for(var S=e,F=0;F<t.length;F++){var Q=t[F];m[3+F]=S,m.set(Q,S),S+=Q.length}return m[3+t.length]=S,m.set(this.keys,S),m[3+t.length+1]=S+=this.keys.length,m.set(this.bboxes,S),S+=this.bboxes.length,m.buffer};var Bo=b.ImageData,pr=b.ImageBitmap,fo={};function Hi(t,e,i){void 0===i&&(i={}),Object.defineProperty(e,"_classRegistryKey",{value:t,writeable:!1}),fo[t]={klass:e,omit:i.omit||[],shallow:i.shallow||[]}}for(var tr in Hi("Object",Object),jo.serialize=function(t,e){var i=t.toArrayBuffer();return e&&e.push(i),{buffer:i}},jo.deserialize=function(t){return new jo(t.buffer)},Hi("Grid",jo),Hi("Color",gn),Hi("Error",Error),Hi("ResolvedImage",zr),Hi("StylePropertyFunction",Ta),Hi("StyleExpression",ha,{omit:["_evaluator"]}),Hi("ZoomDependentExpression",Ms),Hi("ZoomConstantExpression",ur),Hi("CompoundExpression",Lo,{omit:["_evaluate"]}),Sa)Sa[tr]._classRegistryKey||Hi("Expression_"+tr,Sa[tr]);function ps(t){return t&&typeof ArrayBuffer<"u"&&(t instanceof ArrayBuffer||t.constructor&&"ArrayBuffer"===t.constructor.name)}function Is(t){return pr&&t instanceof pr}function jr(t,e){if(null==t||"boolean"==typeof t||"number"==typeof t||"string"==typeof t||t instanceof Boolean||t instanceof Number||t instanceof String||t instanceof Date||t instanceof RegExp)return t;if(ps(t)||Is(t))return e&&e.push(t),t;if(ArrayBuffer.isView(t)){var i=t;return e&&e.push(i.buffer),i}if(t instanceof Bo)return e&&e.push(t.data.buffer),t;if(Array.isArray(t)){for(var c=[],m=0,S=t;m<S.length;m+=1)c.push(jr(S[m],e));return c}if("object"==typeof t){var F=t.constructor,Q=F._classRegistryKey;if(!Q)throw new Error("can't serialize object of unregistered class");var _t=F.serialize?F.serialize(t,e):{};if(!F.serialize){for(var kt in t)if(t.hasOwnProperty(kt)&&!(fo[Q].omit.indexOf(kt)>=0)){var Bt=t[kt];_t[kt]=fo[Q].shallow.indexOf(kt)>=0?Bt:jr(Bt,e)}t instanceof Error&&(_t.message=t.message)}if(_t.$name)throw new Error("$name property is reserved for worker serialization logic.");return"Object"!==Q&&(_t.$name=Q),_t}throw new Error("can't serialize object of type "+typeof t)}function So(t){if(null==t||"boolean"==typeof t||"number"==typeof t||"string"==typeof t||t instanceof Boolean||t instanceof Number||t instanceof String||t instanceof Date||t instanceof RegExp||ps(t)||Is(t)||ArrayBuffer.isView(t)||t instanceof Bo)return t;if(Array.isArray(t))return t.map(So);if("object"==typeof t){var e=t.$name||"Object",i=fo[e].klass;if(!i)throw new Error("can't deserialize unregistered class "+e);if(i.deserialize)return i.deserialize(t);for(var c=Object.create(i.prototype),m=0,S=Object.keys(t);m<S.length;m+=1){var F=S[m];if("$name"!==F){var Q=t[F];c[F]=fo[e].shallow.indexOf(F)>=0?Q:So(Q)}}return c}throw new Error("can't deserialize object of type "+typeof t)}var bs=function(){this.first=!0};bs.prototype.update=function(t,e){var i=Math.floor(t);return this.first?(this.first=!1,this.lastIntegerZoom=i,this.lastIntegerZoomTime=0,this.lastZoom=t,this.lastFloorZoom=i,!0):(this.lastFloorZoom>i?(this.lastIntegerZoom=i+1,this.lastIntegerZoomTime=e):this.lastFloorZoom<i&&(this.lastIntegerZoom=i,this.lastIntegerZoomTime=e),t!==this.lastZoom&&(this.lastZoom=t,this.lastFloorZoom=i,!0))};var Ni={"Latin-1 Supplement":function(t){return t>=128&&t<=255},Arabic:function(t){return t>=1536&&t<=1791},"Arabic Supplement":function(t){return t>=1872&&t<=1919},"Arabic Extended-A":function(t){return t>=2208&&t<=2303},"Hangul Jamo":function(t){return t>=4352&&t<=4607},"Unified Canadian Aboriginal Syllabics":function(t){return t>=5120&&t<=5759},Khmer:function(t){return t>=6016&&t<=6143},"Unified Canadian Aboriginal Syllabics Extended":function(t){return t>=6320&&t<=6399},"General Punctuation":function(t){return t>=8192&&t<=8303},"Letterlike Symbols":function(t){return t>=8448&&t<=8527},"Number Forms":function(t){return t>=8528&&t<=8591},"Miscellaneous Technical":function(t){return t>=8960&&t<=9215},"Control Pictures":function(t){return t>=9216&&t<=9279},"Optical Character Recognition":function(t){return t>=9280&&t<=9311},"Enclosed Alphanumerics":function(t){return t>=9312&&t<=9471},"Geometric Shapes":function(t){return t>=9632&&t<=9727},"Miscellaneous Symbols":function(t){return t>=9728&&t<=9983},"Miscellaneous Symbols and Arrows":function(t){return t>=11008&&t<=11263},"CJK Radicals Supplement":function(t){return t>=11904&&t<=12031},"Kangxi Radicals":function(t){return t>=12032&&t<=12255},"Ideographic Description Characters":function(t){return t>=12272&&t<=12287},"CJK Symbols and Punctuation":function(t){return t>=12288&&t<=12351},Hiragana:function(t){return t>=12352&&t<=12447},Katakana:function(t){return t>=12448&&t<=12543},Bopomofo:function(t){return t>=12544&&t<=12591},"Hangul Compatibility Jamo":function(t){return t>=12592&&t<=12687},Kanbun:function(t){return t>=12688&&t<=12703},"Bopomofo Extended":function(t){return t>=12704&&t<=12735},"CJK Strokes":function(t){return t>=12736&&t<=12783},"Katakana Phonetic Extensions":function(t){return t>=12784&&t<=12799},"Enclosed CJK Letters and Months":function(t){return t>=12800&&t<=13055},"CJK Compatibility":function(t){return t>=13056&&t<=13311},"CJK Unified Ideographs Extension A":function(t){return t>=13312&&t<=19903},"Yijing Hexagram Symbols":function(t){return t>=19904&&t<=19967},"CJK Unified Ideographs":function(t){return t>=19968&&t<=40959},"Yi Syllables":function(t){return t>=40960&&t<=42127},"Yi Radicals":function(t){return t>=42128&&t<=42191},"Hangul Jamo Extended-A":function(t){return t>=43360&&t<=43391},"Hangul Syllables":function(t){return t>=44032&&t<=55215},"Hangul Jamo Extended-B":function(t){return t>=55216&&t<=55295},"Private Use Area":function(t){return t>=57344&&t<=63743},"CJK Compatibility Ideographs":function(t){return t>=63744&&t<=64255},"Arabic Presentation Forms-A":function(t){return t>=64336&&t<=65023},"Vertical Forms":function(t){return t>=65040&&t<=65055},"CJK Compatibility Forms":function(t){return t>=65072&&t<=65103},"Small Form Variants":function(t){return t>=65104&&t<=65135},"Arabic Presentation Forms-B":function(t){return t>=65136&&t<=65279},"Halfwidth and Fullwidth Forms":function(t){return t>=65280&&t<=65519}};function ws(t){for(var e=0,i=t;e<i.length;e+=1)if(Gs(i[e].charCodeAt(0)))return!0;return!1}function Gs(t){return!(746!==t&&747!==t&&(t<4352||!(Ni["Bopomofo Extended"](t)||Ni.Bopomofo(t)||Ni["CJK Compatibility Forms"](t)&&!(t>=65097&&t<=65103)||Ni["CJK Compatibility Ideographs"](t)||Ni["CJK Compatibility"](t)||Ni["CJK Radicals Supplement"](t)||Ni["CJK Strokes"](t)||!(!Ni["CJK Symbols and Punctuation"](t)||t>=12296&&t<=12305||t>=12308&&t<=12319||12336===t)||Ni["CJK Unified Ideographs Extension A"](t)||Ni["CJK Unified Ideographs"](t)||Ni["Enclosed CJK Letters and Months"](t)||Ni["Hangul Compatibility Jamo"](t)||Ni["Hangul Jamo Extended-A"](t)||Ni["Hangul Jamo Extended-B"](t)||Ni["Hangul Jamo"](t)||Ni["Hangul Syllables"](t)||Ni.Hiragana(t)||Ni["Ideographic Description Characters"](t)||Ni.Kanbun(t)||Ni["Kangxi Radicals"](t)||Ni["Katakana Phonetic Extensions"](t)||Ni.Katakana(t)&&12540!==t||!(!Ni["Halfwidth and Fullwidth Forms"](t)||65288===t||65289===t||65293===t||t>=65306&&t<=65310||65339===t||65341===t||65343===t||t>=65371&&t<=65503||65507===t||t>=65512&&t<=65519)||!(!Ni["Small Form Variants"](t)||t>=65112&&t<=65118||t>=65123&&t<=65126)||Ni["Unified Canadian Aboriginal Syllabics"](t)||Ni["Unified Canadian Aboriginal Syllabics Extended"](t)||Ni["Vertical Forms"](t)||Ni["Yijing Hexagram Symbols"](t)||Ni["Yi Syllables"](t)||Ni["Yi Radicals"](t))))}function Ba(t){return!(Gs(t)||(e=t,Ni["Latin-1 Supplement"](e)&&(167===e||169===e||174===e||177===e||188===e||189===e||190===e||215===e||247===e)||Ni["General Punctuation"](e)&&(8214===e||8224===e||8225===e||8240===e||8241===e||8251===e||8252===e||8258===e||8263===e||8264===e||8265===e||8273===e)||Ni["Letterlike Symbols"](e)||Ni["Number Forms"](e)||Ni["Miscellaneous Technical"](e)&&(e>=8960&&e<=8967||e>=8972&&e<=8991||e>=8996&&e<=9e3||9003===e||e>=9085&&e<=9114||e>=9150&&e<=9165||9167===e||e>=9169&&e<=9179||e>=9186&&e<=9215)||Ni["Control Pictures"](e)&&9251!==e||Ni["Optical Character Recognition"](e)||Ni["Enclosed Alphanumerics"](e)||Ni["Geometric Shapes"](e)||Ni["Miscellaneous Symbols"](e)&&!(e>=9754&&e<=9759)||Ni["Miscellaneous Symbols and Arrows"](e)&&(e>=11026&&e<=11055||e>=11088&&e<=11097||e>=11192&&e<=11243)||Ni["CJK Symbols and Punctuation"](e)||Ni.Katakana(e)||Ni["Private Use Area"](e)||Ni["CJK Compatibility Forms"](e)||Ni["Small Form Variants"](e)||Ni["Halfwidth and Fullwidth Forms"](e)||8734===e||8756===e||8757===e||e>=9984&&e<=10087||e>=10102&&e<=10131||65532===e||65533===e));var e}function _r(t){return t>=1424&&t<=2303||Ni["Arabic Presentation Forms-A"](t)||Ni["Arabic Presentation Forms-B"](t)}function Do(t,e){return!(!e&&_r(t)||t>=2304&&t<=3583||t>=3840&&t<=4255||Ni.Khmer(t))}function ds(t){for(var e=0,i=t;e<i.length;e+=1)if(_r(i[e].charCodeAt(0)))return!0;return!1}var Ds=null,os="unavailable",ua=null,xl=function(t){t&&"string"==typeof t&&t.indexOf("NetworkError")>-1&&(os="error"),Ds&&Ds(t)};function rl(){Ra.fire(new Ce("pluginStateChange",{pluginStatus:os,pluginURL:ua}))}var Ra=new Ge,sl=function(){return os},Ws=function(){if("deferred"!==os||!ua)throw new Error("rtl-text-plugin cannot be downloaded unless a pluginURL is specified");os="loading",rl(),ua&&kn({url:ua},function(t){t?xl(t):(os="loaded",rl())})},fs={applyArabicShaping:null,processBidirectionalText:null,processStyledBidirectionalText:null,isLoaded:function(){return"loaded"===os||null!=fs.applyArabicShaping},isLoading:function(){return"loading"===os},setState:function(t){os=t.pluginStatus,ua=t.pluginURL},isParsed:function(){return null!=fs.applyArabicShaping&&null!=fs.processBidirectionalText&&null!=fs.processStyledBidirectionalText},getPluginURL:function(){return ua}},To=function(t,e){this.zoom=t,e?(this.now=e.now,this.fadeDuration=e.fadeDuration,this.zoomHistory=e.zoomHistory,this.transition=e.transition):(this.now=0,this.fadeDuration=0,this.zoomHistory=new bs,this.transition={})};To.prototype.isSupportedScript=function(t){return function(e,i){for(var c=0,m=e;c<m.length;c+=1)if(!Do(m[c].charCodeAt(0),i))return!1;return!0}(t,fs.isLoaded())},To.prototype.crossFadingFactor=function(){return 0===this.fadeDuration?1:Math.min((this.now-this.zoomHistory.lastIntegerZoomTime)/this.fadeDuration,1)},To.prototype.getCrossfadeParameters=function(){var t=this.zoom,e=t-Math.floor(t),i=this.crossFadingFactor();return t>this.zoomHistory.lastIntegerZoom?{fromScale:2,toScale:1,t:e+(1-e)*i}:{fromScale:.5,toScale:1,t:1-(1-i)*e}};var pa=function(t,e){this.property=t,this.value=e,this.expression=function(i,c){if(Sn(i))return new Ta(i,c);if(ls(i)){var m=Hs(i,c);if("error"===m.result)throw new Error(m.value.map(function(F){return F.key+": "+F.message}).join(", "));return m.value}var S=i;return"string"==typeof i&&"color"===c.type&&(S=gn.parse(i)),{kind:"constant",evaluate:function(){return S}}}(void 0===e?t.specification.default:e,t.specification)};pa.prototype.isDataDriven=function(){return"source"===this.expression.kind||"composite"===this.expression.kind},pa.prototype.possiblyEvaluate=function(t,e,i){return this.property.possiblyEvaluate(this,t,e,i)};var ta=function(t){this.property=t,this.value=new pa(t,void 0)};ta.prototype.transitioned=function(t,e){return new ja(this.property,this.value,e,H({},t.transition,this.transition),t.now)},ta.prototype.untransitioned=function(){return new ja(this.property,this.value,null,{},0)};var ts=function(t){this._properties=t,this._values=Object.create(t.defaultTransitionablePropertyValues)};ts.prototype.getValue=function(t){return Y(this._values[t].value.value)},ts.prototype.setValue=function(t,e){this._values.hasOwnProperty(t)||(this._values[t]=new ta(this._values[t].property)),this._values[t].value=new pa(this._values[t].property,null===e?void 0:Y(e))},ts.prototype.getTransition=function(t){return Y(this._values[t].transition)},ts.prototype.setTransition=function(t,e){this._values.hasOwnProperty(t)||(this._values[t]=new ta(this._values[t].property)),this._values[t].transition=Y(e)||void 0},ts.prototype.serialize=function(){for(var t={},e=0,i=Object.keys(this._values);e<i.length;e+=1){var c=i[e],m=this.getValue(c);void 0!==m&&(t[c]=m);var S=this.getTransition(c);void 0!==S&&(t[c+"-transition"]=S)}return t},ts.prototype.transitioned=function(t,e){for(var i=new Fa(this._properties),c=0,m=Object.keys(this._values);c<m.length;c+=1){var S=m[c];i._values[S]=this._values[S].transitioned(t,e._values[S])}return i},ts.prototype.untransitioned=function(){for(var t=new Fa(this._properties),e=0,i=Object.keys(this._values);e<i.length;e+=1){var c=i[e];t._values[c]=this._values[c].untransitioned()}return t};var ja=function(t,e,i,c,m){this.property=t,this.value=e,this.begin=m+c.delay||0,this.end=this.begin+c.duration||0,t.specification.transition&&(c.delay||c.duration)&&(this.prior=i)};ja.prototype.possiblyEvaluate=function(t,e,i){var c=t.now||0,m=this.value.possiblyEvaluate(t,e,i),S=this.prior;if(S){if(c>this.end)return this.prior=null,m;if(this.value.isDataDriven())return this.prior=null,m;if(c<this.begin)return S.possiblyEvaluate(t,e,i);var F=(c-this.begin)/(this.end-this.begin);return this.property.interpolate(S.possiblyEvaluate(t,e,i),m,function(Q){if(Q<=0)return 0;if(Q>=1)return 1;var _t=Q*Q,kt=_t*Q;return 4*(Q<.5?kt:3*(Q-_t)+kt-.75)}(F))}return m};var Fa=function(t){this._properties=t,this._values=Object.create(t.defaultTransitioningPropertyValues)};Fa.prototype.possiblyEvaluate=function(t,e,i){for(var c=new La(this._properties),m=0,S=Object.keys(this._values);m<S.length;m+=1){var F=S[m];c._values[F]=this._values[F].possiblyEvaluate(t,e,i)}return c},Fa.prototype.hasTransition=function(){for(var t=0,e=Object.keys(this._values);t<e.length;t+=1)if(this._values[e[t]].prior)return!0;return!1};var Ca=function(t){this._properties=t,this._values=Object.create(t.defaultPropertyValues)};Ca.prototype.getValue=function(t){return Y(this._values[t].value)},Ca.prototype.setValue=function(t,e){this._values[t]=new pa(this._values[t].property,null===e?void 0:Y(e))},Ca.prototype.serialize=function(){for(var t={},e=0,i=Object.keys(this._values);e<i.length;e+=1){var c=i[e],m=this.getValue(c);void 0!==m&&(t[c]=m)}return t},Ca.prototype.possiblyEvaluate=function(t,e,i){for(var c=new La(this._properties),m=0,S=Object.keys(this._values);m<S.length;m+=1){var F=S[m];c._values[F]=this._values[F].possiblyEvaluate(t,e,i)}return c};var Ar=function(t,e,i){this.property=t,this.value=e,this.parameters=i};Ar.prototype.isConstant=function(){return"constant"===this.value.kind},Ar.prototype.constantOr=function(t){return"constant"===this.value.kind?this.value.value:t},Ar.prototype.evaluate=function(t,e,i,c){return this.property.evaluate(this.value,this.parameters,t,e,i,c)};var La=function(t){this._properties=t,this._values=Object.create(t.defaultPossiblyEvaluatedValues)};La.prototype.get=function(t){return this._values[t]};var Pn=function(t){this.specification=t};Pn.prototype.possiblyEvaluate=function(t,e){return t.expression.evaluate(e)},Pn.prototype.interpolate=function(t,e,i){var c=bn[this.specification.type];return c?c(t,e,i):t};var yn=function(t,e){this.specification=t,this.overrides=e};yn.prototype.possiblyEvaluate=function(t,e,i,c){return new Ar(this,"constant"===t.expression.kind||"camera"===t.expression.kind?{kind:"constant",value:t.expression.evaluate(e,null,{},i,c)}:t.expression,e)},yn.prototype.interpolate=function(t,e,i){if("constant"!==t.value.kind||"constant"!==e.value.kind)return t;if(void 0===t.value.value||void 0===e.value.value)return new Ar(this,{kind:"constant",value:void 0},t.parameters);var c=bn[this.specification.type];return c?new Ar(this,{kind:"constant",value:c(t.value.value,e.value.value,i)},t.parameters):t},yn.prototype.evaluate=function(t,e,i,c,m,S){return"constant"===t.kind?t.value:t.evaluate(e,i,c,m,S)};var $a=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.possiblyEvaluate=function(i,c,m,S){if(void 0===i.value)return new Ar(this,{kind:"constant",value:void 0},c);if("constant"===i.expression.kind){var F=i.expression.evaluate(c,null,{},m,S),Q="resolvedImage"===i.property.specification.type&&"string"!=typeof F?F.name:F,_t=this._calculate(Q,Q,Q,c);return new Ar(this,{kind:"constant",value:_t},c)}if("camera"===i.expression.kind){var kt=this._calculate(i.expression.evaluate({zoom:c.zoom-1}),i.expression.evaluate({zoom:c.zoom}),i.expression.evaluate({zoom:c.zoom+1}),c);return new Ar(this,{kind:"constant",value:kt},c)}return new Ar(this,i.expression,c)},e.prototype.evaluate=function(i,c,m,S,F,Q){if("source"===i.kind){var _t=i.evaluate(c,m,S,F,Q);return this._calculate(_t,_t,_t,c)}return"composite"===i.kind?this._calculate(i.evaluate({zoom:Math.floor(c.zoom)-1},m,S),i.evaluate({zoom:Math.floor(c.zoom)},m,S),i.evaluate({zoom:Math.floor(c.zoom)+1},m,S),c):i.value},e.prototype._calculate=function(i,c,m,S){return S.zoom>S.zoomHistory.lastIntegerZoom?{from:i,to:c}:{from:m,to:c}},e.prototype.interpolate=function(i){return i},e}(yn),zs=function(t){this.specification=t};zs.prototype.possiblyEvaluate=function(t,e,i,c){if(void 0!==t.value){if("constant"===t.expression.kind){var m=t.expression.evaluate(e,null,{},i,c);return this._calculate(m,m,m,e)}return this._calculate(t.expression.evaluate(new To(Math.floor(e.zoom-1),e)),t.expression.evaluate(new To(Math.floor(e.zoom),e)),t.expression.evaluate(new To(Math.floor(e.zoom+1),e)),e)}},zs.prototype._calculate=function(t,e,i,c){return c.zoom>c.zoomHistory.lastIntegerZoom?{from:t,to:e}:{from:i,to:e}},zs.prototype.interpolate=function(t){return t};var da=function(t){this.specification=t};da.prototype.possiblyEvaluate=function(t,e,i,c){return!!t.expression.evaluate(e,null,{},i,c)},da.prototype.interpolate=function(){return!1};var ms=function(t){for(var e in this.properties=t,this.defaultPropertyValues={},this.defaultTransitionablePropertyValues={},this.defaultTransitioningPropertyValues={},this.defaultPossiblyEvaluatedValues={},this.overridableProperties=[],t){var i=t[e];i.specification.overridable&&this.overridableProperties.push(e);var c=this.defaultPropertyValues[e]=new pa(i,void 0),m=this.defaultTransitionablePropertyValues[e]=new ta(i);this.defaultTransitioningPropertyValues[e]=m.untransitioned(),this.defaultPossiblyEvaluatedValues[e]=c.possiblyEvaluate({})}};Hi("DataDrivenProperty",yn),Hi("DataConstantProperty",Pn),Hi("CrossFadedDataDrivenProperty",$a),Hi("CrossFadedProperty",zs),Hi("ColorRampProperty",da);var Aa=function(t){function e(i,c){if(t.call(this),this.id=i.id,this.type=i.type,this._featureFilter={filter:function(){return!0},needGeometry:!1},"custom"!==i.type&&(this.metadata=i.metadata,this.minzoom=i.minzoom,this.maxzoom=i.maxzoom,"background"!==i.type&&(this.source=i.source,this.sourceLayer=i["source-layer"],this.filter=i.filter),c.layout&&(this._unevaluatedLayout=new Ca(c.layout)),c.paint)){for(var m in this._transitionablePaint=new ts(c.paint),i.paint)this.setPaintProperty(m,i.paint[m],{validate:!1});for(var S in i.layout)this.setLayoutProperty(S,i.layout[S],{validate:!1});this._transitioningPaint=this._transitionablePaint.untransitioned(),this.paint=new La(c.paint)}}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.getCrossfadeParameters=function(){return this._crossfadeParameters},e.prototype.getLayoutProperty=function(i){return"visibility"===i?this.visibility:this._unevaluatedLayout.getValue(i)},e.prototype.setLayoutProperty=function(i,c,m){void 0===m&&(m={}),null!=c&&this._validate(mr,"layers."+this.id+".layout."+i,i,c,m)||("visibility"!==i?this._unevaluatedLayout.setValue(i,c):this.visibility=c)},e.prototype.getPaintProperty=function(i){return mt(i,"-transition")?this._transitionablePaint.getTransition(i.slice(0,-11)):this._transitionablePaint.getValue(i)},e.prototype.setPaintProperty=function(i,c,m){if(void 0===m&&(m={}),null!=c&&this._validate(ar,"layers."+this.id+".paint."+i,i,c,m))return!1;if(mt(i,"-transition"))return this._transitionablePaint.setTransition(i.slice(0,-11),c||void 0),!1;var S=this._transitionablePaint._values[i],F="cross-faded-data-driven"===S.property.specification["property-type"],Q=S.value.isDataDriven(),_t=S.value;this._transitionablePaint.setValue(i,c),this._handleSpecialPaintPropertyUpdate(i);var kt=this._transitionablePaint._values[i].value;return kt.isDataDriven()||Q||F||this._handleOverridablePaintPropertyUpdate(i,_t,kt)},e.prototype._handleSpecialPaintPropertyUpdate=function(i){},e.prototype._handleOverridablePaintPropertyUpdate=function(i,c,m){return!1},e.prototype.isHidden=function(i){return!!(this.minzoom&&i<this.minzoom)||!!(this.maxzoom&&i>=this.maxzoom)||"none"===this.visibility},e.prototype.updateTransitions=function(i){this._transitioningPaint=this._transitionablePaint.transitioned(i,this._transitioningPaint)},e.prototype.hasTransition=function(){return this._transitioningPaint.hasTransition()},e.prototype.recalculate=function(i,c){i.getCrossfadeParameters&&(this._crossfadeParameters=i.getCrossfadeParameters()),this._unevaluatedLayout&&(this.layout=this._unevaluatedLayout.possiblyEvaluate(i,void 0,c)),this.paint=this._transitioningPaint.possiblyEvaluate(i,void 0,c)},e.prototype.serialize=function(){var i={id:this.id,type:this.type,source:this.source,"source-layer":this.sourceLayer,metadata:this.metadata,minzoom:this.minzoom,maxzoom:this.maxzoom,filter:this.filter,layout:this._unevaluatedLayout&&this._unevaluatedLayout.serialize(),paint:this._transitionablePaint&&this._transitionablePaint.serialize()};return this.visibility&&(i.layout=i.layout||{},i.layout.visibility=this.visibility),dt(i,function(c,m){return!(void 0===c||"layout"===m&&!Object.keys(c).length||"paint"===m&&!Object.keys(c).length)})},e.prototype._validate=function(i,c,m,S,F){return void 0===F&&(F={}),(!F||!1!==F.validate)&&Eo(this,i.call(uo,{key:c,layerType:this.type,objectKey:m,value:S,styleSpec:oe,style:{glyphs:!0,sprite:!0}}))},e.prototype.is3D=function(){return!1},e.prototype.isTileClipped=function(){return!1},e.prototype.hasOffscreenPass=function(){return!1},e.prototype.resize=function(){},e.prototype.isStateDependent=function(){for(var i in this.paint._values){var c=this.paint.get(i);if(c instanceof Ar&&qe(c.property.specification)&&("source"===c.value.kind||"composite"===c.value.kind)&&c.value.isStateDependent)return!0}return!1},e}(Ge),ul={Int8:Int8Array,Uint8:Uint8Array,Int16:Int16Array,Uint16:Uint16Array,Int32:Int32Array,Uint32:Uint32Array,Float32:Float32Array},bl=function(t,e){this._structArray=t,this._pos1=e*this.size,this._pos2=this._pos1/2,this._pos4=this._pos1/4,this._pos8=this._pos1/8},Yo=function(){this.isTransferred=!1,this.capacity=-1,this.resize(0)};function Pr(t,e){void 0===e&&(e=1);var i=0,c=0;return{members:t.map(function(m){var S=ul[m.type].BYTES_PER_ELEMENT,F=i=Gl(i,Math.max(e,S)),Q=m.components||1;return c=Math.max(c,S),i+=S*Q,{name:m.name,type:m.type,components:Q,offset:F}}),size:Gl(i,Math.max(c,e)),alignment:e}}function Gl(t,e){return Math.ceil(t/e)*e}Yo.serialize=function(t,e){return t._trim(),e&&(t.isTransferred=!0,e.push(t.arrayBuffer)),{length:t.length,arrayBuffer:t.arrayBuffer}},Yo.deserialize=function(t){var e=Object.create(this.prototype);return e.arrayBuffer=t.arrayBuffer,e.length=t.length,e.capacity=t.arrayBuffer.byteLength/e.bytesPerElement,e._refreshViews(),e},Yo.prototype._trim=function(){this.length!==this.capacity&&(this.capacity=this.length,this.arrayBuffer=this.arrayBuffer.slice(0,this.length*this.bytesPerElement),this._refreshViews())},Yo.prototype.clear=function(){this.length=0},Yo.prototype.resize=function(t){this.reserve(t),this.length=t},Yo.prototype.reserve=function(t){if(t>this.capacity){this.capacity=Math.max(t,Math.floor(5*this.capacity),128),this.arrayBuffer=new ArrayBuffer(this.capacity*this.bytesPerElement);var e=this.uint8;this._refreshViews(),e&&this.uint8.set(e)}},Yo.prototype._refreshViews=function(){throw new Error("_refreshViews() must be implemented by each concrete StructArray layout")};var Ha=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},e.prototype.emplaceBack=function(i,c){var m=this.length;return this.resize(m+1),this.emplace(m,i,c)},e.prototype.emplace=function(i,c,m){var S=2*i;return this.int16[S+0]=c,this.int16[S+1]=m,i},e}(Yo);Ha.prototype.bytesPerElement=4,Hi("StructArrayLayout2i4",Ha);var Fl=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},e.prototype.emplaceBack=function(i,c,m,S){var F=this.length;return this.resize(F+1),this.emplace(F,i,c,m,S)},e.prototype.emplace=function(i,c,m,S,F){var Q=4*i;return this.int16[Q+0]=c,this.int16[Q+1]=m,this.int16[Q+2]=S,this.int16[Q+3]=F,i},e}(Yo);Fl.prototype.bytesPerElement=8,Hi("StructArrayLayout4i8",Fl);var ea=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},e.prototype.emplaceBack=function(i,c,m,S,F,Q){var _t=this.length;return this.resize(_t+1),this.emplace(_t,i,c,m,S,F,Q)},e.prototype.emplace=function(i,c,m,S,F,Q,_t){var kt=6*i;return this.int16[kt+0]=c,this.int16[kt+1]=m,this.int16[kt+2]=S,this.int16[kt+3]=F,this.int16[kt+4]=Q,this.int16[kt+5]=_t,i},e}(Yo);ea.prototype.bytesPerElement=12,Hi("StructArrayLayout2i4i12",ea);var va=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},e.prototype.emplaceBack=function(i,c,m,S,F,Q){var _t=this.length;return this.resize(_t+1),this.emplace(_t,i,c,m,S,F,Q)},e.prototype.emplace=function(i,c,m,S,F,Q,_t){var kt=4*i,Bt=8*i;return this.int16[kt+0]=c,this.int16[kt+1]=m,this.uint8[Bt+4]=S,this.uint8[Bt+5]=F,this.uint8[Bt+6]=Q,this.uint8[Bt+7]=_t,i},e}(Yo);va.prototype.bytesPerElement=8,Hi("StructArrayLayout2i4ub8",va);var al=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},e.prototype.emplaceBack=function(i,c){var m=this.length;return this.resize(m+1),this.emplace(m,i,c)},e.prototype.emplace=function(i,c,m){var S=2*i;return this.float32[S+0]=c,this.float32[S+1]=m,i},e}(Yo);al.prototype.bytesPerElement=8,Hi("StructArrayLayout2f8",al);var Ga=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},e.prototype.emplaceBack=function(i,c,m,S,F,Q,_t,kt,Bt,Nt){var $t=this.length;return this.resize($t+1),this.emplace($t,i,c,m,S,F,Q,_t,kt,Bt,Nt)},e.prototype.emplace=function(i,c,m,S,F,Q,_t,kt,Bt,Nt,$t){var ie=10*i;return this.uint16[ie+0]=c,this.uint16[ie+1]=m,this.uint16[ie+2]=S,this.uint16[ie+3]=F,this.uint16[ie+4]=Q,this.uint16[ie+5]=_t,this.uint16[ie+6]=kt,this.uint16[ie+7]=Bt,this.uint16[ie+8]=Nt,this.uint16[ie+9]=$t,i},e}(Yo);Ga.prototype.bytesPerElement=20,Hi("StructArrayLayout10ui20",Ga);var wl=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},e.prototype.emplaceBack=function(i,c,m,S,F,Q,_t,kt,Bt,Nt,$t,ie){var ke=this.length;return this.resize(ke+1),this.emplace(ke,i,c,m,S,F,Q,_t,kt,Bt,Nt,$t,ie)},e.prototype.emplace=function(i,c,m,S,F,Q,_t,kt,Bt,Nt,$t,ie,ke){var Le=12*i;return this.int16[Le+0]=c,this.int16[Le+1]=m,this.int16[Le+2]=S,this.int16[Le+3]=F,this.uint16[Le+4]=Q,this.uint16[Le+5]=_t,this.uint16[Le+6]=kt,this.uint16[Le+7]=Bt,this.int16[Le+8]=Nt,this.int16[Le+9]=$t,this.int16[Le+10]=ie,this.int16[Le+11]=ke,i},e}(Yo);wl.prototype.bytesPerElement=24,Hi("StructArrayLayout4i4ui4i24",wl);var Ja=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},e.prototype.emplaceBack=function(i,c,m){var S=this.length;return this.resize(S+1),this.emplace(S,i,c,m)},e.prototype.emplace=function(i,c,m,S){var F=3*i;return this.float32[F+0]=c,this.float32[F+1]=m,this.float32[F+2]=S,i},e}(Yo);Ja.prototype.bytesPerElement=12,Hi("StructArrayLayout3f12",Ja);var pl=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)},e.prototype.emplaceBack=function(i){var c=this.length;return this.resize(c+1),this.emplace(c,i)},e.prototype.emplace=function(i,c){return this.uint32[1*i+0]=c,i},e}(Yo);pl.prototype.bytesPerElement=4,Hi("StructArrayLayout1ul4",pl);var Nl=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},e.prototype.emplaceBack=function(i,c,m,S,F,Q,_t,kt,Bt){var Nt=this.length;return this.resize(Nt+1),this.emplace(Nt,i,c,m,S,F,Q,_t,kt,Bt)},e.prototype.emplace=function(i,c,m,S,F,Q,_t,kt,Bt,Nt){var $t=10*i,ie=5*i;return this.int16[$t+0]=c,this.int16[$t+1]=m,this.int16[$t+2]=S,this.int16[$t+3]=F,this.int16[$t+4]=Q,this.int16[$t+5]=_t,this.uint32[ie+3]=kt,this.uint16[$t+8]=Bt,this.uint16[$t+9]=Nt,i},e}(Yo);Nl.prototype.bytesPerElement=20,Hi("StructArrayLayout6i1ul2ui20",Nl);var dl=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},e.prototype.emplaceBack=function(i,c,m,S,F,Q){var _t=this.length;return this.resize(_t+1),this.emplace(_t,i,c,m,S,F,Q)},e.prototype.emplace=function(i,c,m,S,F,Q,_t){var kt=6*i;return this.int16[kt+0]=c,this.int16[kt+1]=m,this.int16[kt+2]=S,this.int16[kt+3]=F,this.int16[kt+4]=Q,this.int16[kt+5]=_t,i},e}(Yo);dl.prototype.bytesPerElement=12,Hi("StructArrayLayout2i2i2i12",dl);var fl=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},e.prototype.emplaceBack=function(i,c,m,S,F){var Q=this.length;return this.resize(Q+1),this.emplace(Q,i,c,m,S,F)},e.prototype.emplace=function(i,c,m,S,F,Q){var _t=4*i,kt=8*i;return this.float32[_t+0]=c,this.float32[_t+1]=m,this.float32[_t+2]=S,this.int16[kt+6]=F,this.int16[kt+7]=Q,i},e}(Yo);fl.prototype.bytesPerElement=16,Hi("StructArrayLayout2f1f2i16",fl);var Wl=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},e.prototype.emplaceBack=function(i,c,m,S){var F=this.length;return this.resize(F+1),this.emplace(F,i,c,m,S)},e.prototype.emplace=function(i,c,m,S,F){var Q=12*i,_t=3*i;return this.uint8[Q+0]=c,this.uint8[Q+1]=m,this.float32[_t+1]=S,this.float32[_t+2]=F,i},e}(Yo);Wl.prototype.bytesPerElement=12,Hi("StructArrayLayout2ub2f12",Wl);var Qa=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},e.prototype.emplaceBack=function(i,c,m){var S=this.length;return this.resize(S+1),this.emplace(S,i,c,m)},e.prototype.emplace=function(i,c,m,S){var F=3*i;return this.uint16[F+0]=c,this.uint16[F+1]=m,this.uint16[F+2]=S,i},e}(Yo);Qa.prototype.bytesPerElement=6,Hi("StructArrayLayout3ui6",Qa);var ll=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},e.prototype.emplaceBack=function(i,c,m,S,F,Q,_t,kt,Bt,Nt,$t,ie,ke,Le,Ve,ze,Qe){var li=this.length;return this.resize(li+1),this.emplace(li,i,c,m,S,F,Q,_t,kt,Bt,Nt,$t,ie,ke,Le,Ve,ze,Qe)},e.prototype.emplace=function(i,c,m,S,F,Q,_t,kt,Bt,Nt,$t,ie,ke,Le,Ve,ze,Qe,li){var gi=24*i,_i=12*i,Ai=48*i;return this.int16[gi+0]=c,this.int16[gi+1]=m,this.uint16[gi+2]=S,this.uint16[gi+3]=F,this.uint32[_i+2]=Q,this.uint32[_i+3]=_t,this.uint32[_i+4]=kt,this.uint16[gi+10]=Bt,this.uint16[gi+11]=Nt,this.uint16[gi+12]=$t,this.float32[_i+7]=ie,this.float32[_i+8]=ke,this.uint8[Ai+36]=Le,this.uint8[Ai+37]=Ve,this.uint8[Ai+38]=ze,this.uint32[_i+10]=Qe,this.int16[gi+22]=li,i},e}(Yo);ll.prototype.bytesPerElement=48,Hi("StructArrayLayout2i2ui3ul3ui2f3ub1ul1i48",ll);var Sl=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},e.prototype.emplaceBack=function(i,c,m,S,F,Q,_t,kt,Bt,Nt,$t,ie,ke,Le,Ve,ze,Qe,li,gi,_i,Ai,qi,on,In,dn,Dn,mn,Po){var eo=this.length;return this.resize(eo+1),this.emplace(eo,i,c,m,S,F,Q,_t,kt,Bt,Nt,$t,ie,ke,Le,Ve,ze,Qe,li,gi,_i,Ai,qi,on,In,dn,Dn,mn,Po)},e.prototype.emplace=function(i,c,m,S,F,Q,_t,kt,Bt,Nt,$t,ie,ke,Le,Ve,ze,Qe,li,gi,_i,Ai,qi,on,In,dn,Dn,mn,Po,eo){var Tn=34*i,zo=17*i;return this.int16[Tn+0]=c,this.int16[Tn+1]=m,this.int16[Tn+2]=S,this.int16[Tn+3]=F,this.int16[Tn+4]=Q,this.int16[Tn+5]=_t,this.int16[Tn+6]=kt,this.int16[Tn+7]=Bt,this.uint16[Tn+8]=Nt,this.uint16[Tn+9]=$t,this.uint16[Tn+10]=ie,this.uint16[Tn+11]=ke,this.uint16[Tn+12]=Le,this.uint16[Tn+13]=Ve,this.uint16[Tn+14]=ze,this.uint16[Tn+15]=Qe,this.uint16[Tn+16]=li,this.uint16[Tn+17]=gi,this.uint16[Tn+18]=_i,this.uint16[Tn+19]=Ai,this.uint16[Tn+20]=qi,this.uint16[Tn+21]=on,this.uint16[Tn+22]=In,this.uint32[zo+12]=dn,this.float32[zo+13]=Dn,this.float32[zo+14]=mn,this.float32[zo+15]=Po,this.float32[zo+16]=eo,i},e}(Yo);Sl.prototype.bytesPerElement=68,Hi("StructArrayLayout8i15ui1ul4f68",Sl);var hl=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},e.prototype.emplaceBack=function(i){var c=this.length;return this.resize(c+1),this.emplace(c,i)},e.prototype.emplace=function(i,c){return this.float32[1*i+0]=c,i},e}(Yo);hl.prototype.bytesPerElement=4,Hi("StructArrayLayout1f4",hl);var Ia=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},e.prototype.emplaceBack=function(i,c,m){var S=this.length;return this.resize(S+1),this.emplace(S,i,c,m)},e.prototype.emplace=function(i,c,m,S){var F=3*i;return this.int16[F+0]=c,this.int16[F+1]=m,this.int16[F+2]=S,i},e}(Yo);Ia.prototype.bytesPerElement=6,Hi("StructArrayLayout3i6",Ia);var Zl=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},e.prototype.emplaceBack=function(i,c,m){var S=this.length;return this.resize(S+1),this.emplace(S,i,c,m)},e.prototype.emplace=function(i,c,m,S){var F=4*i;return this.uint32[2*i+0]=c,this.uint16[F+2]=m,this.uint16[F+3]=S,i},e}(Yo);Zl.prototype.bytesPerElement=8,Hi("StructArrayLayout1ul2ui8",Zl);var Tl=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},e.prototype.emplaceBack=function(i,c){var m=this.length;return this.resize(m+1),this.emplace(m,i,c)},e.prototype.emplace=function(i,c,m){var S=2*i;return this.uint16[S+0]=c,this.uint16[S+1]=m,i},e}(Yo);Tl.prototype.bytesPerElement=4,Hi("StructArrayLayout2ui4",Tl);var ql=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},e.prototype.emplaceBack=function(i){var c=this.length;return this.resize(c+1),this.emplace(c,i)},e.prototype.emplace=function(i,c){return this.uint16[1*i+0]=c,i},e}(Yo);ql.prototype.bytesPerElement=2,Hi("StructArrayLayout1ui2",ql);var Ll=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},e.prototype.emplaceBack=function(i,c,m,S){var F=this.length;return this.resize(F+1),this.emplace(F,i,c,m,S)},e.prototype.emplace=function(i,c,m,S,F){var Q=4*i;return this.float32[Q+0]=c,this.float32[Q+1]=m,this.float32[Q+2]=S,this.float32[Q+3]=F,i},e}(Yo);Ll.prototype.bytesPerElement=16,Hi("StructArrayLayout4f16",Ll);var o=function(t){function e(){t.apply(this,arguments)}t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e;var i={anchorPointX:{configurable:!0},anchorPointY:{configurable:!0},x1:{configurable:!0},y1:{configurable:!0},x2:{configurable:!0},y2:{configurable:!0},featureIndex:{configurable:!0},sourceLayerIndex:{configurable:!0},bucketIndex:{configurable:!0},anchorPoint:{configurable:!0}};return i.anchorPointX.get=function(){return this._structArray.int16[this._pos2+0]},i.anchorPointY.get=function(){return this._structArray.int16[this._pos2+1]},i.x1.get=function(){return this._structArray.int16[this._pos2+2]},i.y1.get=function(){return this._structArray.int16[this._pos2+3]},i.x2.get=function(){return this._structArray.int16[this._pos2+4]},i.y2.get=function(){return this._structArray.int16[this._pos2+5]},i.featureIndex.get=function(){return this._structArray.uint32[this._pos4+3]},i.sourceLayerIndex.get=function(){return this._structArray.uint16[this._pos2+8]},i.bucketIndex.get=function(){return this._structArray.uint16[this._pos2+9]},i.anchorPoint.get=function(){return new v(this.anchorPointX,this.anchorPointY)},Object.defineProperties(e.prototype,i),e}(bl);o.prototype.size=20;var a=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.get=function(i){return new o(this,i)},e}(Nl);Hi("CollisionBoxArray",a);var s=function(t){function e(){t.apply(this,arguments)}t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e;var i={anchorX:{configurable:!0},anchorY:{configurable:!0},glyphStartIndex:{configurable:!0},numGlyphs:{configurable:!0},vertexStartIndex:{configurable:!0},lineStartIndex:{configurable:!0},lineLength:{configurable:!0},segment:{configurable:!0},lowerSize:{configurable:!0},upperSize:{configurable:!0},lineOffsetX:{configurable:!0},lineOffsetY:{configurable:!0},writingMode:{configurable:!0},placedOrientation:{configurable:!0},hidden:{configurable:!0},crossTileID:{configurable:!0},associatedIconIndex:{configurable:!0}};return i.anchorX.get=function(){return this._structArray.int16[this._pos2+0]},i.anchorY.get=function(){return this._structArray.int16[this._pos2+1]},i.glyphStartIndex.get=function(){return this._structArray.uint16[this._pos2+2]},i.numGlyphs.get=function(){return this._structArray.uint16[this._pos2+3]},i.vertexStartIndex.get=function(){return this._structArray.uint32[this._pos4+2]},i.lineStartIndex.get=function(){return this._structArray.uint32[this._pos4+3]},i.lineLength.get=function(){return this._structArray.uint32[this._pos4+4]},i.segment.get=function(){return this._structArray.uint16[this._pos2+10]},i.lowerSize.get=function(){return this._structArray.uint16[this._pos2+11]},i.upperSize.get=function(){return this._structArray.uint16[this._pos2+12]},i.lineOffsetX.get=function(){return this._structArray.float32[this._pos4+7]},i.lineOffsetY.get=function(){return this._structArray.float32[this._pos4+8]},i.writingMode.get=function(){return this._structArray.uint8[this._pos1+36]},i.placedOrientation.get=function(){return this._structArray.uint8[this._pos1+37]},i.placedOrientation.set=function(c){this._structArray.uint8[this._pos1+37]=c},i.hidden.get=function(){return this._structArray.uint8[this._pos1+38]},i.hidden.set=function(c){this._structArray.uint8[this._pos1+38]=c},i.crossTileID.get=function(){return this._structArray.uint32[this._pos4+10]},i.crossTileID.set=function(c){this._structArray.uint32[this._pos4+10]=c},i.associatedIconIndex.get=function(){return this._structArray.int16[this._pos2+22]},Object.defineProperties(e.prototype,i),e}(bl);s.prototype.size=48;var u=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.get=function(i){return new s(this,i)},e}(ll);Hi("PlacedSymbolArray",u);var P=function(t){function e(){t.apply(this,arguments)}t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e;var i={anchorX:{configurable:!0},anchorY:{configurable:!0},rightJustifiedTextSymbolIndex:{configurable:!0},centerJustifiedTextSymbolIndex:{configurable:!0},leftJustifiedTextSymbolIndex:{configurable:!0},verticalPlacedTextSymbolIndex:{configurable:!0},placedIconSymbolIndex:{configurable:!0},verticalPlacedIconSymbolIndex:{configurable:!0},key:{configurable:!0},textBoxStartIndex:{configurable:!0},textBoxEndIndex:{configurable:!0},verticalTextBoxStartIndex:{configurable:!0},verticalTextBoxEndIndex:{configurable:!0},iconBoxStartIndex:{configurable:!0},iconBoxEndIndex:{configurable:!0},verticalIconBoxStartIndex:{configurable:!0},verticalIconBoxEndIndex:{configurable:!0},featureIndex:{configurable:!0},numHorizontalGlyphVertices:{configurable:!0},numVerticalGlyphVertices:{configurable:!0},numIconVertices:{configurable:!0},numVerticalIconVertices:{configurable:!0},useRuntimeCollisionCircles:{configurable:!0},crossTileID:{configurable:!0},textBoxScale:{configurable:!0},textOffset0:{configurable:!0},textOffset1:{configurable:!0},collisionCircleDiameter:{configurable:!0}};return i.anchorX.get=function(){return this._structArray.int16[this._pos2+0]},i.anchorY.get=function(){return this._structArray.int16[this._pos2+1]},i.rightJustifiedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+2]},i.centerJustifiedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+3]},i.leftJustifiedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+4]},i.verticalPlacedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+5]},i.placedIconSymbolIndex.get=function(){return this._structArray.int16[this._pos2+6]},i.verticalPlacedIconSymbolIndex.get=function(){return this._structArray.int16[this._pos2+7]},i.key.get=function(){return this._structArray.uint16[this._pos2+8]},i.textBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+9]},i.textBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+10]},i.verticalTextBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+11]},i.verticalTextBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+12]},i.iconBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+13]},i.iconBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+14]},i.verticalIconBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+15]},i.verticalIconBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+16]},i.featureIndex.get=function(){return this._structArray.uint16[this._pos2+17]},i.numHorizontalGlyphVertices.get=function(){return this._structArray.uint16[this._pos2+18]},i.numVerticalGlyphVertices.get=function(){return this._structArray.uint16[this._pos2+19]},i.numIconVertices.get=function(){return this._structArray.uint16[this._pos2+20]},i.numVerticalIconVertices.get=function(){return this._structArray.uint16[this._pos2+21]},i.useRuntimeCollisionCircles.get=function(){return this._structArray.uint16[this._pos2+22]},i.crossTileID.get=function(){return this._structArray.uint32[this._pos4+12]},i.crossTileID.set=function(c){this._structArray.uint32[this._pos4+12]=c},i.textBoxScale.get=function(){return this._structArray.float32[this._pos4+13]},i.textOffset0.get=function(){return this._structArray.float32[this._pos4+14]},i.textOffset1.get=function(){return this._structArray.float32[this._pos4+15]},i.collisionCircleDiameter.get=function(){return this._structArray.float32[this._pos4+16]},Object.defineProperties(e.prototype,i),e}(bl);P.prototype.size=68;var W=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.get=function(i){return new P(this,i)},e}(Sl);Hi("SymbolInstanceArray",W);var $=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.getoffsetX=function(i){return this.float32[1*i+0]},e}(hl);Hi("GlyphOffsetArray",$);var gt=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.getx=function(i){return this.int16[3*i+0]},e.prototype.gety=function(i){return this.int16[3*i+1]},e.prototype.gettileUnitDistanceFromAnchor=function(i){return this.int16[3*i+2]},e}(Ia);Hi("SymbolLineVertexArray",gt);var Dt=function(t){function e(){t.apply(this,arguments)}t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e;var i={featureIndex:{configurable:!0},sourceLayerIndex:{configurable:!0},bucketIndex:{configurable:!0}};return i.featureIndex.get=function(){return this._structArray.uint32[this._pos4+0]},i.sourceLayerIndex.get=function(){return this._structArray.uint16[this._pos2+2]},i.bucketIndex.get=function(){return this._structArray.uint16[this._pos2+3]},Object.defineProperties(e.prototype,i),e}(bl);Dt.prototype.size=8;var Ht=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.get=function(i){return new Dt(this,i)},e}(Zl);Hi("FeatureIndexArray",Ht);var re=Pr([{name:"a_pos",components:2,type:"Int16"}],4).members,le=function(t){void 0===t&&(t=[]),this.segments=t};function de(t,e){return 256*(t=O(Math.floor(t),0,255))+O(Math.floor(e),0,255)}le.prototype.prepareSegment=function(t,e,i,c){var m=this.segments[this.segments.length-1];return t>le.MAX_VERTEX_ARRAY_LENGTH&&ht("Max vertices per segment is "+le.MAX_VERTEX_ARRAY_LENGTH+": bucket requested "+t),(!m||m.vertexLength+t>le.MAX_VERTEX_ARRAY_LENGTH||m.sortKey!==c)&&(m={vertexOffset:e.length,primitiveOffset:i.length,vertexLength:0,primitiveLength:0},void 0!==c&&(m.sortKey=c),this.segments.push(m)),m},le.prototype.get=function(){return this.segments},le.prototype.destroy=function(){for(var t=0,e=this.segments;t<e.length;t+=1){var i=e[t];for(var c in i.vaos)i.vaos[c].destroy()}},le.simpleSegment=function(t,e,i,c){return new le([{vertexOffset:t,primitiveOffset:e,vertexLength:i,primitiveLength:c,vaos:{},sortKey:0}])},le.MAX_VERTEX_ARRAY_LENGTH=Math.pow(2,16)-1,Hi("SegmentVector",le);var Ie=Pr([{name:"a_pattern_from",components:4,type:"Uint16"},{name:"a_pattern_to",components:4,type:"Uint16"},{name:"a_pixel_ratio_from",components:1,type:"Uint16"},{name:"a_pixel_ratio_to",components:1,type:"Uint16"}]),Pe=it(function(t){t.exports=function(e,i){var c,m,S,F,Q,_t,kt,Bt;for(m=e.length-(c=3&e.length),S=i,Q=3432918353,_t=461845907,Bt=0;Bt<m;)kt=255&e.charCodeAt(Bt)|(255&e.charCodeAt(++Bt))<<8|(255&e.charCodeAt(++Bt))<<16|(255&e.charCodeAt(++Bt))<<24,++Bt,S=27492+(65535&(F=5*(65535&(S=(S^=kt=(65535&(kt=(kt=(65535&kt)*Q+(((kt>>>16)*Q&65535)<<16)&4294967295)<<15|kt>>>17))*_t+(((kt>>>16)*_t&65535)<<16)&4294967295)<<13|S>>>19))+((5*(S>>>16)&65535)<<16)&4294967295))+((58964+(F>>>16)&65535)<<16);switch(kt=0,c){case 3:kt^=(255&e.charCodeAt(Bt+2))<<16;case 2:kt^=(255&e.charCodeAt(Bt+1))<<8;case 1:S^=kt=(65535&(kt=(kt=(65535&(kt^=255&e.charCodeAt(Bt)))*Q+(((kt>>>16)*Q&65535)<<16)&4294967295)<<15|kt>>>17))*_t+(((kt>>>16)*_t&65535)<<16)&4294967295}return S^=e.length,S=2246822507*(65535&(S^=S>>>16))+((2246822507*(S>>>16)&65535)<<16)&4294967295,S=3266489909*(65535&(S^=S>>>13))+((3266489909*(S>>>16)&65535)<<16)&4294967295,(S^=S>>>16)>>>0}}),Oe=it(function(t){t.exports=function(e,i){for(var c,m=e.length,S=i^m,F=0;m>=4;)c=1540483477*(65535&(c=255&e.charCodeAt(F)|(255&e.charCodeAt(++F))<<8|(255&e.charCodeAt(++F))<<16|(255&e.charCodeAt(++F))<<24))+((1540483477*(c>>>16)&65535)<<16),S=1540483477*(65535&S)+((1540483477*(S>>>16)&65535)<<16)^(c=1540483477*(65535&(c^=c>>>24))+((1540483477*(c>>>16)&65535)<<16)),m-=4,++F;switch(m){case 3:S^=(255&e.charCodeAt(F+2))<<16;case 2:S^=(255&e.charCodeAt(F+1))<<8;case 1:S=1540483477*(65535&(S^=255&e.charCodeAt(F)))+((1540483477*(S>>>16)&65535)<<16)}return S=1540483477*(65535&(S^=S>>>13))+((1540483477*(S>>>16)&65535)<<16),(S^=S>>>15)>>>0}}),Se=Pe,Re=Oe;Se.murmur3=Pe,Se.murmur2=Re;var Ze=function(){this.ids=[],this.positions=[],this.indexed=!1};Ze.prototype.add=function(t,e,i,c){this.ids.push(bi(t)),this.positions.push(e,i,c)},Ze.prototype.getPositions=function(t){for(var e=bi(t),i=0,c=this.ids.length-1;i<c;){var m=i+c>>1;this.ids[m]>=e?c=m:i=m+1}for(var S=[];this.ids[i]===e;)S.push({index:this.positions[3*i],start:this.positions[3*i+1],end:this.positions[3*i+2]}),i++;return S},Ze.serialize=function(t,e){var i=new Float64Array(t.ids),c=new Uint32Array(t.positions);return function m(S,F,Q,_t){for(;Q<_t;){for(var kt=S[Q+_t>>1],Bt=Q-1,Nt=_t+1;;){do{Bt++}while(S[Bt]<kt);do{Nt--}while(S[Nt]>kt);if(Bt>=Nt)break;mi(S,Bt,Nt),mi(F,3*Bt,3*Nt),mi(F,3*Bt+1,3*Nt+1),mi(F,3*Bt+2,3*Nt+2)}Nt-Q<_t-Nt?(m(S,F,Q,Nt),Q=Nt+1):(m(S,F,Nt+1,_t),_t=Nt)}}(i,c,0,i.length-1),e&&e.push(i.buffer,c.buffer),{ids:i,positions:c}},Ze.deserialize=function(t){var e=new Ze;return e.ids=t.ids,e.positions=t.positions,e.indexed=!0,e};var si=Math.pow(2,53)-1;function bi(t){var e=+t;return!isNaN(e)&&e<=si?e:Se(String(t))}function mi(t,e,i){var c=t[e];t[e]=t[i],t[i]=c}Hi("FeaturePositionMap",Ze);var wi=function(t,e){this.gl=t.gl,this.location=e},Ri=function(t){function e(i,c){t.call(this,i,c),this.current=0}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.set=function(i){this.current!==i&&(this.current=i,this.gl.uniform1i(this.location,i))},e}(wi),$i=function(t){function e(i,c){t.call(this,i,c),this.current=0}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.set=function(i){this.current!==i&&(this.current=i,this.gl.uniform1f(this.location,i))},e}(wi),Xi=function(t){function e(i,c){t.call(this,i,c),this.current=[0,0]}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.set=function(i){i[0]===this.current[0]&&i[1]===this.current[1]||(this.current=i,this.gl.uniform2f(this.location,i[0],i[1]))},e}(wi),fn=function(t){function e(i,c){t.call(this,i,c),this.current=[0,0,0]}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.set=function(i){i[0]===this.current[0]&&i[1]===this.current[1]&&i[2]===this.current[2]||(this.current=i,this.gl.uniform3f(this.location,i[0],i[1],i[2]))},e}(wi),Mn=function(t){function e(i,c){t.call(this,i,c),this.current=[0,0,0,0]}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.set=function(i){i[0]===this.current[0]&&i[1]===this.current[1]&&i[2]===this.current[2]&&i[3]===this.current[3]||(this.current=i,this.gl.uniform4f(this.location,i[0],i[1],i[2],i[3]))},e}(wi),zn=function(t){function e(i,c){t.call(this,i,c),this.current=gn.transparent}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.set=function(i){i.r===this.current.r&&i.g===this.current.g&&i.b===this.current.b&&i.a===this.current.a||(this.current=i,this.gl.uniform4f(this.location,i.r,i.g,i.b,i.a))},e}(wi),Ln=new Float32Array(16),Wo=function(t){function e(i,c){t.call(this,i,c),this.current=Ln}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.set=function(i){if(i[12]!==this.current[12]||i[0]!==this.current[0])return this.current=i,void this.gl.uniformMatrix4fv(this.location,!1,i);for(var c=1;c<16;c++)if(i[c]!==this.current[c]){this.current=i,this.gl.uniformMatrix4fv(this.location,!1,i);break}},e}(wi);function un(t){return[de(255*t.r,255*t.g),de(255*t.b,255*t.a)]}var to=function(t,e,i){this.value=t,this.uniformNames=e.map(function(c){return"u_"+c}),this.type=i};to.prototype.setUniform=function(t,e,i){t.set(i.constantOr(this.value))},to.prototype.getBinding=function(t,e,i){return"color"===this.type?new zn(t,e):new $i(t,e)};var yo=function(t,e){this.uniformNames=e.map(function(i){return"u_"+i}),this.patternFrom=null,this.patternTo=null,this.pixelRatioFrom=1,this.pixelRatioTo=1};yo.prototype.setConstantPatternPositions=function(t,e){this.pixelRatioFrom=e.pixelRatio,this.pixelRatioTo=t.pixelRatio,this.patternFrom=e.tlbr,this.patternTo=t.tlbr},yo.prototype.setUniform=function(t,e,i,c){var m="u_pattern_to"===c?this.patternTo:"u_pattern_from"===c?this.patternFrom:"u_pixel_ratio_to"===c?this.pixelRatioTo:"u_pixel_ratio_from"===c?this.pixelRatioFrom:null;m&&t.set(m)},yo.prototype.getBinding=function(t,e,i){return"u_pattern"===i.substr(0,9)?new Mn(t,e):new $i(t,e)};var Kn=function(t,e,i,c){this.expression=t,this.type=i,this.maxValue=0,this.paintVertexAttributes=e.map(function(m){return{name:"a_"+m,type:"Float32",components:"color"===i?2:1,offset:0}}),this.paintVertexArray=new c};Kn.prototype.populatePaintArray=function(t,e,i,c,m){var S=this.paintVertexArray.length,F=this.expression.evaluate(new To(0),e,{},c,[],m);this.paintVertexArray.resize(t),this._setPaintValue(S,t,F)},Kn.prototype.updatePaintArray=function(t,e,i,c){var m=this.expression.evaluate({zoom:0},i,c);this._setPaintValue(t,e,m)},Kn.prototype._setPaintValue=function(t,e,i){if("color"===this.type)for(var c=un(i),m=t;m<e;m++)this.paintVertexArray.emplace(m,c[0],c[1]);else{for(var S=t;S<e;S++)this.paintVertexArray.emplace(S,i);this.maxValue=Math.max(this.maxValue,Math.abs(i))}},Kn.prototype.upload=function(t){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=t.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))},Kn.prototype.destroy=function(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()};var qn=function(t,e,i,c,m,S){this.expression=t,this.uniformNames=e.map(function(F){return"u_"+F+"_t"}),this.type=i,this.useIntegerZoom=c,this.zoom=m,this.maxValue=0,this.paintVertexAttributes=e.map(function(F){return{name:"a_"+F,type:"Float32",components:"color"===i?4:2,offset:0}}),this.paintVertexArray=new S};qn.prototype.populatePaintArray=function(t,e,i,c,m){var S=this.expression.evaluate(new To(this.zoom),e,{},c,[],m),F=this.expression.evaluate(new To(this.zoom+1),e,{},c,[],m),Q=this.paintVertexArray.length;this.paintVertexArray.resize(t),this._setPaintValue(Q,t,S,F)},qn.prototype.updatePaintArray=function(t,e,i,c){var m=this.expression.evaluate({zoom:this.zoom},i,c),S=this.expression.evaluate({zoom:this.zoom+1},i,c);this._setPaintValue(t,e,m,S)},qn.prototype._setPaintValue=function(t,e,i,c){if("color"===this.type)for(var m=un(i),S=un(c),F=t;F<e;F++)this.paintVertexArray.emplace(F,m[0],m[1],S[0],S[1]);else{for(var Q=t;Q<e;Q++)this.paintVertexArray.emplace(Q,i,c);this.maxValue=Math.max(this.maxValue,Math.abs(i),Math.abs(c))}},qn.prototype.upload=function(t){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=t.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))},qn.prototype.destroy=function(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()},qn.prototype.setUniform=function(t,e){var i=this.useIntegerZoom?Math.floor(e.zoom):e.zoom,c=O(this.expression.interpolationFactor(i,this.zoom,this.zoom+1),0,1);t.set(c)},qn.prototype.getBinding=function(t,e,i){return new $i(t,e)};var mo=function(t,e,i,c,m,S){this.expression=t,this.type=e,this.useIntegerZoom=i,this.zoom=c,this.layerId=S,this.zoomInPaintVertexArray=new m,this.zoomOutPaintVertexArray=new m};mo.prototype.populatePaintArray=function(t,e,i){var c=this.zoomInPaintVertexArray.length;this.zoomInPaintVertexArray.resize(t),this.zoomOutPaintVertexArray.resize(t),this._setPaintValues(c,t,e.patterns&&e.patterns[this.layerId],i)},mo.prototype.updatePaintArray=function(t,e,i,c,m){this._setPaintValues(t,e,i.patterns&&i.patterns[this.layerId],m)},mo.prototype._setPaintValues=function(t,e,i,c){if(c&&i){var m=c[i.min],S=c[i.mid],F=c[i.max];if(m&&S&&F)for(var Q=t;Q<e;Q++)this.zoomInPaintVertexArray.emplace(Q,S.tl[0],S.tl[1],S.br[0],S.br[1],m.tl[0],m.tl[1],m.br[0],m.br[1],S.pixelRatio,m.pixelRatio),this.zoomOutPaintVertexArray.emplace(Q,S.tl[0],S.tl[1],S.br[0],S.br[1],F.tl[0],F.tl[1],F.br[0],F.br[1],S.pixelRatio,F.pixelRatio)}},mo.prototype.upload=function(t){this.zoomInPaintVertexArray&&this.zoomInPaintVertexArray.arrayBuffer&&this.zoomOutPaintVertexArray&&this.zoomOutPaintVertexArray.arrayBuffer&&(this.zoomInPaintVertexBuffer=t.createVertexBuffer(this.zoomInPaintVertexArray,Ie.members,this.expression.isStateDependent),this.zoomOutPaintVertexBuffer=t.createVertexBuffer(this.zoomOutPaintVertexArray,Ie.members,this.expression.isStateDependent))},mo.prototype.destroy=function(){this.zoomOutPaintVertexBuffer&&this.zoomOutPaintVertexBuffer.destroy(),this.zoomInPaintVertexBuffer&&this.zoomInPaintVertexBuffer.destroy()};var $n=function(t,e,i){this.binders={},this._buffers=[];var c=[];for(var m in t.paint._values)if(i(m)){var S=t.paint.get(m);if(S instanceof Ar&&qe(S.property.specification)){var F=Ss(m,t.type),Q=S.value,_t=S.property.specification.type,kt=S.property.useIntegerZoom,Bt=S.property.specification["property-type"],Nt="cross-faded"===Bt||"cross-faded-data-driven"===Bt;if("constant"===Q.kind)this.binders[m]=Nt?new yo(Q.value,F):new to(Q.value,F,_t),c.push("/u_"+m);else if("source"===Q.kind||Nt){var $t=es(m,_t,"source");this.binders[m]=Nt?new mo(Q,_t,kt,e,$t,t.id):new Kn(Q,F,_t,$t),c.push("/a_"+m)}else{var ie=es(m,_t,"composite");this.binders[m]=new qn(Q,F,_t,kt,e,ie),c.push("/z_"+m)}}}this.cacheKey=c.sort().join("")};$n.prototype.getMaxValue=function(t){var e=this.binders[t];return e instanceof Kn||e instanceof qn?e.maxValue:0},$n.prototype.populatePaintArrays=function(t,e,i,c,m){for(var S in this.binders){var F=this.binders[S];(F instanceof Kn||F instanceof qn||F instanceof mo)&&F.populatePaintArray(t,e,i,c,m)}},$n.prototype.setConstantPatternPositions=function(t,e){for(var i in this.binders){var c=this.binders[i];c instanceof yo&&c.setConstantPatternPositions(t,e)}},$n.prototype.updatePaintArrays=function(t,e,i,c,m){var S=!1;for(var F in t)for(var Q=0,_t=e.getPositions(F);Q<_t.length;Q+=1){var kt=_t[Q],Bt=i.feature(kt.index);for(var Nt in this.binders){var $t=this.binders[Nt];if(($t instanceof Kn||$t instanceof qn||$t instanceof mo)&&!0===$t.expression.isStateDependent){var ie=c.paint.get(Nt);$t.expression=ie.value,$t.updatePaintArray(kt.start,kt.end,Bt,t[F],m),S=!0}}}return S},$n.prototype.defines=function(){var t=[];for(var e in this.binders){var i=this.binders[e];(i instanceof to||i instanceof yo)&&t.push.apply(t,i.uniformNames.map(function(c){return"#define HAS_UNIFORM_"+c}))}return t},$n.prototype.getBinderAttributes=function(){var t=[];for(var e in this.binders){var i=this.binders[e];if(i instanceof Kn||i instanceof qn)for(var c=0;c<i.paintVertexAttributes.length;c++)t.push(i.paintVertexAttributes[c].name);else if(i instanceof mo)for(var m=0;m<Ie.members.length;m++)t.push(Ie.members[m].name)}return t},$n.prototype.getBinderUniforms=function(){var t=[];for(var e in this.binders){var i=this.binders[e];if(i instanceof to||i instanceof yo||i instanceof qn)for(var c=0,m=i.uniformNames;c<m.length;c+=1)t.push(m[c])}return t},$n.prototype.getPaintVertexBuffers=function(){return this._buffers},$n.prototype.getUniforms=function(t,e){var i=[];for(var c in this.binders){var m=this.binders[c];if(m instanceof to||m instanceof yo||m instanceof qn)for(var S=0,F=m.uniformNames;S<F.length;S+=1){var Q=F[S];if(e[Q]){var _t=m.getBinding(t,e[Q],Q);i.push({name:Q,property:c,binding:_t})}}}return i},$n.prototype.setUniforms=function(t,e,i,c){for(var m=0,S=e;m<S.length;m+=1){var F=S[m],Q=F.name,_t=F.property;this.binders[_t].setUniform(F.binding,c,i.get(_t),Q)}},$n.prototype.updatePaintBuffers=function(t){for(var e in this._buffers=[],this.binders){var i=this.binders[e];if(t&&i instanceof mo){var c=2===t.fromScale?i.zoomInPaintVertexBuffer:i.zoomOutPaintVertexBuffer;c&&this._buffers.push(c)}else(i instanceof Kn||i instanceof qn)&&i.paintVertexBuffer&&this._buffers.push(i.paintVertexBuffer)}},$n.prototype.upload=function(t){for(var e in this.binders){var i=this.binders[e];(i instanceof Kn||i instanceof qn||i instanceof mo)&&i.upload(t)}this.updatePaintBuffers()},$n.prototype.destroy=function(){for(var t in this.binders){var e=this.binders[t];(e instanceof Kn||e instanceof qn||e instanceof mo)&&e.destroy()}};var Vn=function(t,e,i){void 0===i&&(i=function(){return!0}),this.programConfigurations={};for(var c=0,m=t;c<m.length;c+=1){var S=m[c];this.programConfigurations[S.id]=new $n(S,e,i)}this.needsUpload=!1,this._featureMap=new Ze,this._bufferOffset=0};function Ss(t,e){return{"text-opacity":["opacity"],"icon-opacity":["opacity"],"text-color":["fill_color"],"icon-color":["fill_color"],"text-halo-color":["halo_color"],"icon-halo-color":["halo_color"],"text-halo-blur":["halo_blur"],"icon-halo-blur":["halo_blur"],"text-halo-width":["halo_width"],"icon-halo-width":["halo_width"],"line-gap-width":["gapwidth"],"line-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-extrusion-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"]}[t]||[t.replace(e+"-","").replace(/-/g,"_")]}function es(t,e,i){var m={"line-pattern":{source:Ga,composite:Ga},"fill-pattern":{source:Ga,composite:Ga},"fill-extrusion-pattern":{source:Ga,composite:Ga}}[t];return m&&m[i]||{color:{source:al,composite:Ll},number:{source:hl,composite:al}}[e][i]}Vn.prototype.populatePaintArrays=function(t,e,i,c,m,S){for(var F in this.programConfigurations)this.programConfigurations[F].populatePaintArrays(t,e,c,m,S);void 0!==e.id&&this._featureMap.add(e.id,i,this._bufferOffset,t),this._bufferOffset=t,this.needsUpload=!0},Vn.prototype.updatePaintArrays=function(t,e,i,c){for(var m=0,S=i;m<S.length;m+=1){var F=S[m];this.needsUpload=this.programConfigurations[F.id].updatePaintArrays(t,this._featureMap,e,F,c)||this.needsUpload}},Vn.prototype.get=function(t){return this.programConfigurations[t]},Vn.prototype.upload=function(t){if(this.needsUpload){for(var e in this.programConfigurations)this.programConfigurations[e].upload(t);this.needsUpload=!1}},Vn.prototype.destroy=function(){for(var t in this.programConfigurations)this.programConfigurations[t].destroy()},Hi("ConstantBinder",to),Hi("CrossFadedConstantBinder",yo),Hi("SourceExpressionBinder",Kn),Hi("CrossFadedCompositeBinder",mo),Hi("CompositeExpressionBinder",qn),Hi("ProgramConfiguration",$n,{omit:["_buffers"]}),Hi("ProgramConfigurationSet",Vn);var Zs=Math.pow(2,14)-1,Ts=-Zs-1;function kr(t){for(var e=8192/t.extent,i=t.loadGeometry(),c=0;c<i.length;c++)for(var m=i[c],S=0;S<m.length;S++){var F=m[S],Q=Math.round(F.x*e),_t=Math.round(F.y*e);F.x=O(Q,Ts,Zs),F.y=O(_t,Ts,Zs),(Q<F.x||Q>F.x+1||_t<F.y||_t>F.y+1)&&ht("Geometry exceeds allowed extent, reduce your vector tile buffer size")}return i}function Ur(t,e){return{type:t.type,id:t.id,properties:t.properties,geometry:e?kr(t):[]}}function Fr(t,e,i,c,m){t.emplaceBack(2*e+(c+1)/2,2*i+(m+1)/2)}var ia=function(t){this.zoom=t.zoom,this.overscaling=t.overscaling,this.layers=t.layers,this.layerIds=this.layers.map(function(e){return e.id}),this.index=t.index,this.hasPattern=!1,this.layoutVertexArray=new Ha,this.indexArray=new Qa,this.segments=new le,this.programConfigurations=new Vn(t.layers,t.zoom),this.stateDependentLayerIds=this.layers.filter(function(e){return e.isStateDependent()}).map(function(e){return e.id})};function tl(t,e){for(var i=0;i<t.length;i++)if(n(e,t[i]))return!0;for(var c=0;c<e.length;c++)if(n(t,e[c]))return!0;return!!el(t,e)}function na(t,e,i){return!!n(t,e)||!!Wa(e,t,i)}function Da(t,e){if(1===t.length)return p(e,t[0]);for(var i=0;i<e.length;i++)for(var c=e[i],m=0;m<c.length;m++)if(n(t,c[m]))return!0;for(var S=0;S<t.length;S++)if(p(e,t[S]))return!0;for(var F=0;F<e.length;F++)if(el(t,e[F]))return!0;return!1}function Pa(t,e,i){if(t.length>1){if(el(t,e))return!0;for(var c=0;c<e.length;c++)if(Wa(e[c],t,i))return!0}for(var m=0;m<t.length;m++)if(Wa(t[m],e,i))return!0;return!1}function el(t,e){if(0===t.length||0===e.length)return!1;for(var i=0;i<t.length-1;i++)for(var c=t[i],m=t[i+1],S=0;S<e.length-1;S++)if(il(c,m,e[S],e[S+1]))return!0;return!1}function il(t,e,i,c){return Lt(t,i,c)!==Lt(e,i,c)&&Lt(t,e,i)!==Lt(t,e,c)}function Wa(t,e,i){var c=i*i;if(1===e.length)return t.distSqr(e[0])<c;for(var m=1;m<e.length;m++)if(ml(t,e[m-1],e[m])<c)return!0;return!1}function ml(t,e,i){var c=e.distSqr(i);if(0===c)return t.distSqr(e);var m=((t.x-e.x)*(i.x-e.x)+(t.y-e.y)*(i.y-e.y))/c;return t.distSqr(m<0?e:m>1?i:i.sub(e)._mult(m)._add(e))}function p(t,e){for(var i,c,m,S=!1,F=0;F<t.length;F++)for(var Q=0,_t=(i=t[F]).length-1;Q<i.length;_t=Q++)(c=i[Q]).y>e.y!=(m=i[_t]).y>e.y&&e.x<(m.x-c.x)*(e.y-c.y)/(m.y-c.y)+c.x&&(S=!S);return S}function n(t,e){for(var i=!1,c=0,m=t.length-1;c<t.length;m=c++){var S=t[c],F=t[m];S.y>e.y!=F.y>e.y&&e.x<(F.x-S.x)*(e.y-S.y)/(F.y-S.y)+S.x&&(i=!i)}return i}function h(t,e,i){var c=i[0],m=i[2];if(t.x<c.x&&e.x<c.x||t.x>m.x&&e.x>m.x||t.y<c.y&&e.y<c.y||t.y>m.y&&e.y>m.y)return!1;var S=Lt(t,e,i[0]);return S!==Lt(t,e,i[1])||S!==Lt(t,e,i[2])||S!==Lt(t,e,i[3])}function d(t,e,i){var c=e.paint.get(t).value;return"constant"===c.kind?c.value:i.programConfigurations.get(e.id).getMaxValue(t)}function g(t){return Math.sqrt(t[0]*t[0]+t[1]*t[1])}function C(t,e,i,c,m){if(!e[0]&&!e[1])return t;var S=v.convert(e)._mult(m);"viewport"===i&&S._rotate(-c);for(var F=[],Q=0;Q<t.length;Q++)F.push(t[Q].sub(S));return F}ia.prototype.populate=function(t,e,i){var c=this.layers[0],m=[],S=null;"circle"===c.type&&(S=c.layout.get("circle-sort-key"));for(var F=0,Q=t;F<Q.length;F+=1){var _t=Q[F],kt=_t.feature,Bt=_t.id,Nt=_t.index,$t=_t.sourceLayerIndex,ie=this.layers[0]._featureFilter.needGeometry,ke=Ur(kt,ie);if(this.layers[0]._featureFilter.filter(new To(this.zoom),ke,i)){var Le=S?S.evaluate(ke,{},i):void 0,Ve={id:Bt,properties:kt.properties,type:kt.type,sourceLayerIndex:$t,index:Nt,geometry:ie?ke.geometry:kr(kt),patterns:{},sortKey:Le};m.push(Ve)}}S&&m.sort(function(on,In){return on.sortKey-In.sortKey});for(var ze=0,Qe=m;ze<Qe.length;ze+=1){var li=Qe[ze],gi=li.geometry,_i=li.index,Ai=li.sourceLayerIndex,qi=t[_i].feature;this.addFeature(li,gi,_i,i),e.featureIndex.insert(qi,gi,_i,Ai,this.index)}},ia.prototype.update=function(t,e,i){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(t,e,this.stateDependentLayers,i)},ia.prototype.isEmpty=function(){return 0===this.layoutVertexArray.length},ia.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},ia.prototype.upload=function(t){this.uploaded||(this.layoutVertexBuffer=t.createVertexBuffer(this.layoutVertexArray,re),this.indexBuffer=t.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(t),this.uploaded=!0},ia.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())},ia.prototype.addFeature=function(t,e,i,c){for(var m=0,S=e;m<S.length;m+=1)for(var F=0,Q=S[m];F<Q.length;F+=1){var _t=Q[F],kt=_t.x,Bt=_t.y;if(!(kt<0||kt>=8192||Bt<0||Bt>=8192)){var Nt=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray,t.sortKey),$t=Nt.vertexLength;Fr(this.layoutVertexArray,kt,Bt,-1,-1),Fr(this.layoutVertexArray,kt,Bt,1,-1),Fr(this.layoutVertexArray,kt,Bt,1,1),Fr(this.layoutVertexArray,kt,Bt,-1,1),this.indexArray.emplaceBack($t,$t+1,$t+2),this.indexArray.emplaceBack($t,$t+3,$t+2),Nt.vertexLength+=4,Nt.primitiveLength+=2}}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,t,i,{},c)},Hi("CircleBucket",ia,{omit:["layers"]});var D=new ms({"circle-sort-key":new yn(oe.layout_circle["circle-sort-key"])}),J={paint:new ms({"circle-radius":new yn(oe.paint_circle["circle-radius"]),"circle-color":new yn(oe.paint_circle["circle-color"]),"circle-blur":new yn(oe.paint_circle["circle-blur"]),"circle-opacity":new yn(oe.paint_circle["circle-opacity"]),"circle-translate":new Pn(oe.paint_circle["circle-translate"]),"circle-translate-anchor":new Pn(oe.paint_circle["circle-translate-anchor"]),"circle-pitch-scale":new Pn(oe.paint_circle["circle-pitch-scale"]),"circle-pitch-alignment":new Pn(oe.paint_circle["circle-pitch-alignment"]),"circle-stroke-width":new yn(oe.paint_circle["circle-stroke-width"]),"circle-stroke-color":new yn(oe.paint_circle["circle-stroke-color"]),"circle-stroke-opacity":new yn(oe.paint_circle["circle-stroke-opacity"])}),layout:D},ot=typeof Float32Array<"u"?Float32Array:Array;function ct(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function Pt(t,e,i){var c=e[0],m=e[1],S=e[2],F=e[3],Q=e[4],_t=e[5],kt=e[6],Bt=e[7],Nt=e[8],$t=e[9],ie=e[10],ke=e[11],Le=e[12],Ve=e[13],ze=e[14],Qe=e[15],li=i[0],gi=i[1],_i=i[2],Ai=i[3];return t[0]=li*c+gi*Q+_i*Nt+Ai*Le,t[1]=li*m+gi*_t+_i*$t+Ai*Ve,t[2]=li*S+gi*kt+_i*ie+Ai*ze,t[3]=li*F+gi*Bt+_i*ke+Ai*Qe,t[4]=(li=i[4])*c+(gi=i[5])*Q+(_i=i[6])*Nt+(Ai=i[7])*Le,t[5]=li*m+gi*_t+_i*$t+Ai*Ve,t[6]=li*S+gi*kt+_i*ie+Ai*ze,t[7]=li*F+gi*Bt+_i*ke+Ai*Qe,t[8]=(li=i[8])*c+(gi=i[9])*Q+(_i=i[10])*Nt+(Ai=i[11])*Le,t[9]=li*m+gi*_t+_i*$t+Ai*Ve,t[10]=li*S+gi*kt+_i*ie+Ai*ze,t[11]=li*F+gi*Bt+_i*ke+Ai*Qe,t[12]=(li=i[12])*c+(gi=i[13])*Q+(_i=i[14])*Nt+(Ai=i[15])*Le,t[13]=li*m+gi*_t+_i*$t+Ai*Ve,t[14]=li*S+gi*kt+_i*ie+Ai*ze,t[15]=li*F+gi*Bt+_i*ke+Ai*Qe,t}Math.hypot||(Math.hypot=function(){for(var t=arguments,e=0,i=arguments.length;i--;)e+=t[i]*t[i];return Math.sqrt(e)});var Mt,t,Vt=Pt;function Qt(t,e,i){var c=e[0],m=e[1],S=e[2],F=e[3];return t[0]=i[0]*c+i[4]*m+i[8]*S+i[12]*F,t[1]=i[1]*c+i[5]*m+i[9]*S+i[13]*F,t[2]=i[2]*c+i[6]*m+i[10]*S+i[14]*F,t[3]=i[3]*c+i[7]*m+i[11]*S+i[15]*F,t}Mt=new ot(3),ot!=Float32Array&&(Mt[0]=0,Mt[1]=0,Mt[2]=0),t=new ot(4),ot!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0,t[3]=0);var ue=(function(){var t=new ot(2);ot!=Float32Array&&(t[0]=0,t[1]=0)}(),function(t){function e(i){t.call(this,i,J)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.createBucket=function(i){return new ia(i)},e.prototype.queryRadius=function(i){var c=i;return d("circle-radius",this,c)+d("circle-stroke-width",this,c)+g(this.paint.get("circle-translate"))},e.prototype.queryIntersectsFeature=function(i,c,m,S,F,Q,_t,kt){for(var Bt=C(i,this.paint.get("circle-translate"),this.paint.get("circle-translate-anchor"),Q.angle,_t),Nt=this.paint.get("circle-radius").evaluate(c,m)+this.paint.get("circle-stroke-width").evaluate(c,m),$t="map"===this.paint.get("circle-pitch-alignment"),ie=$t?Bt:function(qi,on){return qi.map(function(In){return ge(In,on)})}(Bt,kt),ke=$t?Nt*_t:Nt,Le=0,Ve=S;Le<Ve.length;Le+=1)for(var ze=0,Qe=Ve[Le];ze<Qe.length;ze+=1){var li=Qe[ze],gi=$t?li:ge(li,kt),_i=ke,Ai=Qt([],[li.x,li.y,0,1],kt);if("viewport"===this.paint.get("circle-pitch-scale")&&"map"===this.paint.get("circle-pitch-alignment")?_i*=Ai[3]/Q.cameraToCenterDistance:"map"===this.paint.get("circle-pitch-scale")&&"viewport"===this.paint.get("circle-pitch-alignment")&&(_i*=Q.cameraToCenterDistance/Ai[3]),na(ie,gi,_i))return!0}return!1},e}(Aa));function ge(t,e){var i=Qt([],[t.x,t.y,0,1],e);return new v(i[0]/i[3],i[1]/i[3])}var Ae=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e}(ia);function Ue(t,e,i,c){var m=e.width,S=e.height;if(c){if(c instanceof Uint8ClampedArray)c=new Uint8Array(c.buffer);else if(c.length!==m*S*i)throw new RangeError("mismatched image size")}else c=new Uint8Array(m*S*i);return t.width=m,t.height=S,t.data=c,t}function Je(t,e,i){var c=e.width,m=e.height;if(c!==t.width||m!==t.height){var S=Ue({},{width:c,height:m},i);ai(t,S,{x:0,y:0},{x:0,y:0},{width:Math.min(t.width,c),height:Math.min(t.height,m)},i),t.width=c,t.height=m,t.data=S.data}}function ai(t,e,i,c,m,S){if(0===m.width||0===m.height)return e;if(m.width>t.width||m.height>t.height||i.x>t.width-m.width||i.y>t.height-m.height)throw new RangeError("out of range source coordinates for image copy");if(m.width>e.width||m.height>e.height||c.x>e.width-m.width||c.y>e.height-m.height)throw new RangeError("out of range destination coordinates for image copy");for(var F=t.data,Q=e.data,_t=0;_t<m.height;_t++)for(var kt=((i.y+_t)*t.width+i.x)*S,Bt=((c.y+_t)*e.width+c.x)*S,Nt=0;Nt<m.width*S;Nt++)Q[Bt+Nt]=F[kt+Nt];return e}Hi("HeatmapBucket",Ae,{omit:["layers"]});var pi=function(t,e){Ue(this,t,1,e)};pi.prototype.resize=function(t){Je(this,t,1)},pi.prototype.clone=function(){return new pi({width:this.width,height:this.height},new Uint8Array(this.data))},pi.copy=function(t,e,i,c,m){ai(t,e,i,c,m,1)};var Ei=function(t,e){Ue(this,t,4,e)};Ei.prototype.resize=function(t){Je(this,t,4)},Ei.prototype.replace=function(t,e){e?this.data.set(t):this.data=t instanceof Uint8ClampedArray?new Uint8Array(t.buffer):t},Ei.prototype.clone=function(){return new Ei({width:this.width,height:this.height},new Uint8Array(this.data))},Ei.copy=function(t,e,i,c,m){ai(t,e,i,c,m,4)},Hi("AlphaImage",pi),Hi("RGBAImage",Ei);var ln={paint:new ms({"heatmap-radius":new yn(oe.paint_heatmap["heatmap-radius"]),"heatmap-weight":new yn(oe.paint_heatmap["heatmap-weight"]),"heatmap-intensity":new Pn(oe.paint_heatmap["heatmap-intensity"]),"heatmap-color":new da(oe.paint_heatmap["heatmap-color"]),"heatmap-opacity":new Pn(oe.paint_heatmap["heatmap-opacity"])})};function pn(t){var e={},i=t.resolution||256,c=t.clips?t.clips.length:1,m=t.image||new Ei({width:i,height:c}),S=function(ke,Le,Ve){e[t.evaluationKey]=Ve;var ze=t.expression.evaluate(e);m.data[ke+Le+0]=Math.floor(255*ze.r/ze.a),m.data[ke+Le+1]=Math.floor(255*ze.g/ze.a),m.data[ke+Le+2]=Math.floor(255*ze.b/ze.a),m.data[ke+Le+3]=Math.floor(255*ze.a)};if(t.clips)for(var F=0,Q=0;F<c;++F,Q+=4*i)for(var _t=0,kt=0;_t<i;_t++,kt+=4){var Bt=_t/(i-1),Nt=t.clips[F];S(Q,kt,Nt.start*(1-Bt)+Nt.end*Bt)}else for(var $t=0,ie=0;$t<i;$t++,ie+=4)S(0,ie,$t/(i-1));return m}var On=function(t){function e(i){t.call(this,i,ln),this._updateColorRamp()}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.createBucket=function(i){return new Ae(i)},e.prototype._handleSpecialPaintPropertyUpdate=function(i){"heatmap-color"===i&&this._updateColorRamp()},e.prototype._updateColorRamp=function(){this.colorRamp=pn({expression:this._transitionablePaint._values["heatmap-color"].value.expression,evaluationKey:"heatmapDensity",image:this.colorRamp}),this.colorRampTexture=null},e.prototype.resize=function(){this.heatmapFbo&&(this.heatmapFbo.destroy(),this.heatmapFbo=null)},e.prototype.queryRadius=function(){return 0},e.prototype.queryIntersectsFeature=function(){return!1},e.prototype.hasOffscreenPass=function(){return 0!==this.paint.get("heatmap-opacity")&&"none"!==this.visibility},e}(Aa),jn={paint:new ms({"hillshade-illumination-direction":new Pn(oe.paint_hillshade["hillshade-illumination-direction"]),"hillshade-illumination-anchor":new Pn(oe.paint_hillshade["hillshade-illumination-anchor"]),"hillshade-exaggeration":new Pn(oe.paint_hillshade["hillshade-exaggeration"]),"hillshade-shadow-color":new Pn(oe.paint_hillshade["hillshade-shadow-color"]),"hillshade-highlight-color":new Pn(oe.paint_hillshade["hillshade-highlight-color"]),"hillshade-accent-color":new Pn(oe.paint_hillshade["hillshade-accent-color"])})},vn=function(t){function e(i){t.call(this,i,jn)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.hasOffscreenPass=function(){return 0!==this.paint.get("hillshade-exaggeration")&&"none"!==this.visibility},e}(Aa),Xn=Pr([{name:"a_pos",components:2,type:"Int16"}],4).members,Yn=_n,ro=_n;function _n(t,e,i){i=i||2;var c,m,S,F,Q,_t,kt,Bt=e&&e.length,Nt=Bt?e[0]*i:t.length,$t=An(t,0,Nt,i,!0),ie=[];if(!$t||$t.next===$t.prev)return ie;if(Bt&&($t=function(Le,Ve,ze,Qe){var li,gi,_i,Ai=[];for(li=0,gi=Ve.length;li<gi;li++)(_i=An(Le,Ve[li]*Qe,li<gi-1?Ve[li+1]*Qe:Le.length,Qe,!1))===_i.next&&(_i.steiner=!0),Ai.push(Xl(_i));for(Ai.sort(nl),li=0;li<Ai.length;li++)gl(Ai[li],ze),ze=xr(ze,ze.next);return ze}(t,e,$t,i)),t.length>80*i){c=S=t[0],m=F=t[1];for(var ke=i;ke<Nt;ke+=i)(Q=t[ke])<c&&(c=Q),(_t=t[ke+1])<m&&(m=_t),Q>S&&(S=Q),_t>F&&(F=_t);kt=0!==(kt=Math.max(S-c,F-m))?1/kt:0}return Zr($t,ie,i,c,m,kt),ie}function An(t,e,i,c,m){var S,F;if(m===Ec(t,e,i,c)>0)for(S=e;S<i;S+=c)F=nu(S,t[S],t[S+1],F);else for(S=i-c;S>=e;S-=c)F=nu(S,t[S],t[S+1],F);return F&&$h(F,F.next)&&(kh(F),F=F.next),F}function xr(t,e){if(!t)return t;e||(e=t);var i,c=t;do{if(i=!1,c.steiner||!$h(c,c.next)&&0!==Os(c.prev,c,c.next))c=c.next;else{if(kh(c),(c=e=c.prev)===c.next)break;i=!0}}while(i||c!==e);return e}function Zr(t,e,i,c,m,S,F){if(t){!F&&S&&function(Bt,Nt,$t,ie){var ke=Bt;do{null===ke.z&&(ke.z=ol(ke.x,ke.y,Nt,$t,ie)),ke.prevZ=ke.prev,ke.nextZ=ke.next,ke=ke.next}while(ke!==Bt);ke.prevZ.nextZ=null,ke.prevZ=null,function(Le){var Ve,ze,Qe,li,gi,_i,Ai,qi,on=1;do{for(ze=Le,Le=null,gi=null,_i=0;ze;){for(_i++,Qe=ze,Ai=0,Ve=0;Ve<on&&(Ai++,Qe=Qe.nextZ);Ve++);for(qi=on;Ai>0||qi>0&&Qe;)0!==Ai&&(0===qi||!Qe||ze.z<=Qe.z)?(li=ze,ze=ze.nextZ,Ai--):(li=Qe,Qe=Qe.nextZ,qi--),gi?gi.nextZ=li:Le=li,li.prevZ=gi,gi=li;ze=Qe}gi.nextZ=null,on*=2}while(_i>1)}(ke)}(t,c,m,S);for(var Q,_t,kt=t;t.prev!==t.next;)if(Q=t.prev,_t=t.next,S?qs(t,c,m,S):Cs(t))e.push(Q.i/i),e.push(t.i/i),e.push(_t.i/i),kh(t),t=_t.next,kt=_t.next;else if((t=_t)===kt){F?1===F?Zr(t=Na(xr(t),e,i),e,i,c,m,S,2):2===F&&ka(t,e,i,c,m,S):Zr(xr(t),e,i,c,m,S,1);break}}}function Cs(t){var e=t.prev,i=t,c=t.next;if(Os(e,i,c)>=0)return!1;for(var m=t.next.next;m!==t.prev;){if(eh(e.x,e.y,i.x,i.y,c.x,c.y,m.x,m.y)&&Os(m.prev,m,m.next)>=0)return!1;m=m.next}return!0}function qs(t,e,i,c){var m=t.prev,S=t,F=t.next;if(Os(m,S,F)>=0)return!1;for(var Q=m.x>S.x?m.x>F.x?m.x:F.x:S.x>F.x?S.x:F.x,_t=m.y>S.y?m.y>F.y?m.y:F.y:S.y>F.y?S.y:F.y,kt=ol(m.x<S.x?m.x<F.x?m.x:F.x:S.x<F.x?S.x:F.x,m.y<S.y?m.y<F.y?m.y:F.y:S.y<F.y?S.y:F.y,e,i,c),Bt=ol(Q,_t,e,i,c),Nt=t.prevZ,$t=t.nextZ;Nt&&Nt.z>=kt&&$t&&$t.z<=Bt;){if(Nt!==t.prev&&Nt!==t.next&&eh(m.x,m.y,S.x,S.y,F.x,F.y,Nt.x,Nt.y)&&Os(Nt.prev,Nt,Nt.next)>=0||(Nt=Nt.prevZ,$t!==t.prev&&$t!==t.next&&eh(m.x,m.y,S.x,S.y,F.x,F.y,$t.x,$t.y)&&Os($t.prev,$t,$t.next)>=0))return!1;$t=$t.nextZ}for(;Nt&&Nt.z>=kt;){if(Nt!==t.prev&&Nt!==t.next&&eh(m.x,m.y,S.x,S.y,F.x,F.y,Nt.x,Nt.y)&&Os(Nt.prev,Nt,Nt.next)>=0)return!1;Nt=Nt.prevZ}for(;$t&&$t.z<=Bt;){if($t!==t.prev&&$t!==t.next&&eh(m.x,m.y,S.x,S.y,F.x,F.y,$t.x,$t.y)&&Os($t.prev,$t,$t.next)>=0)return!1;$t=$t.nextZ}return!0}function Na(t,e,i){var c=t;do{var m=c.prev,S=c.next.next;!$h(m,S)&&eu(m,c,c.next,S)&&Ph(m,S)&&Ph(S,m)&&(e.push(m.i/i),e.push(c.i/i),e.push(S.i/i),kh(c),kh(c.next),c=t=S),c=c.next}while(c!==t);return xr(c)}function ka(t,e,i,c,m,S){var F=t;do{for(var Q=F.next.next;Q!==F.prev;){if(F.i!==Q.i&&_p(F,Q)){var _t=iu(F,Q);return F=xr(F,F.next),_t=xr(_t,_t.next),Zr(F,e,i,c,m,S),void Zr(_t,e,i,c,m,S)}Q=Q.next}F=F.next}while(F!==t)}function nl(t,e){return t.x-e.x}function gl(t,e){if(e=function(c,m){var S,F=m,Q=c.x,_t=c.y,kt=-1/0;do{if(_t<=F.y&&_t>=F.next.y&&F.next.y!==F.y){var Bt=F.x+(_t-F.y)*(F.next.x-F.x)/(F.next.y-F.y);if(Bt<=Q&&Bt>kt){if(kt=Bt,Bt===Q){if(_t===F.y)return F;if(_t===F.next.y)return F.next}S=F.x<F.next.x?F:F.next}}F=F.next}while(F!==m);if(!S)return null;if(Q===kt)return S;var Nt,$t=S,ie=S.x,ke=S.y,Le=1/0;F=S;do{Q>=F.x&&F.x>=ie&&Q!==F.x&&eh(_t<ke?Q:kt,_t,ie,ke,_t<ke?kt:Q,_t,F.x,F.y)&&(Nt=Math.abs(_t-F.y)/(Q-F.x),Ph(F,c)&&(Nt<Le||Nt===Le&&(F.x>S.x||F.x===S.x&&Il(S,F)))&&(S=F,Le=Nt)),F=F.next}while(F!==$t);return S}(t,e)){var i=iu(e,t);xr(e,e.next),xr(i,i.next)}}function Il(t,e){return Os(t.prev,t,e.prev)<0&&Os(e.next,t,t.next)<0}function ol(t,e,i,c,m){return(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=32767*(t-i)*m)|t<<8))|t<<4))|t<<2))|t<<1))|(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=32767*(e-c)*m)|e<<8))|e<<4))|e<<2))|e<<1))<<1}function Xl(t){var e=t,i=t;do{(e.x<i.x||e.x===i.x&&e.y<i.y)&&(i=e),e=e.next}while(e!==t);return i}function eh(t,e,i,c,m,S,F,Q){return(m-F)*(e-Q)-(t-F)*(S-Q)>=0&&(t-F)*(c-Q)-(i-F)*(e-Q)>=0&&(i-F)*(S-Q)-(m-F)*(c-Q)>=0}function _p(t,e){return t.next.i!==e.i&&t.prev.i!==e.i&&!function(i,c){var m=i;do{if(m.i!==i.i&&m.next.i!==i.i&&m.i!==c.i&&m.next.i!==c.i&&eu(m,m.next,i,c))return!0;m=m.next}while(m!==i);return!1}(t,e)&&(Ph(t,e)&&Ph(e,t)&&function(i,c){var m=i,S=!1,F=(i.x+c.x)/2,Q=(i.y+c.y)/2;do{m.y>Q!=m.next.y>Q&&m.next.y!==m.y&&F<(m.next.x-m.x)*(Q-m.y)/(m.next.y-m.y)+m.x&&(S=!S),m=m.next}while(m!==i);return S}(t,e)&&(Os(t.prev,t,e.prev)||Os(t,e.prev,e))||$h(t,e)&&Os(t.prev,t,t.next)>0&&Os(e.prev,e,e.next)>0)}function Os(t,e,i){return(e.y-t.y)*(i.x-e.x)-(e.x-t.x)*(i.y-e.y)}function $h(t,e){return t.x===e.x&&t.y===e.y}function eu(t,e,i,c){var m=Qh(Os(t,e,i)),S=Qh(Os(t,e,c)),F=Qh(Os(i,c,t)),Q=Qh(Os(i,c,e));return m!==S&&F!==Q||!(0!==m||!Jh(t,i,e))||!(0!==S||!Jh(t,c,e))||!(0!==F||!Jh(i,t,c))||!(0!==Q||!Jh(i,e,c))}function Jh(t,e,i){return e.x<=Math.max(t.x,i.x)&&e.x>=Math.min(t.x,i.x)&&e.y<=Math.max(t.y,i.y)&&e.y>=Math.min(t.y,i.y)}function Qh(t){return t>0?1:t<0?-1:0}function Ph(t,e){return Os(t.prev,t,t.next)<0?Os(t,e,t.next)>=0&&Os(t,t.prev,e)>=0:Os(t,e,t.prev)<0||Os(t,t.next,e)<0}function iu(t,e){var i=new kc(t.i,t.x,t.y),c=new kc(e.i,e.x,e.y),m=t.next,S=e.prev;return t.next=e,e.prev=t,i.next=m,m.prev=i,c.next=i,i.prev=c,S.next=c,c.prev=S,c}function nu(t,e,i,c){var m=new kc(t,e,i);return c?(m.next=c.next,m.prev=c,c.next.prev=m,c.next=m):(m.prev=m,m.next=m),m}function kh(t){t.next.prev=t.prev,t.prev.next=t.next,t.prevZ&&(t.prevZ.nextZ=t.nextZ),t.nextZ&&(t.nextZ.prevZ=t.prevZ)}function kc(t,e,i){this.i=t,this.x=e,this.y=i,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function Ec(t,e,i,c){for(var m=0,S=e,F=i-c;S<i;S+=c)m+=(t[F]-t[S])*(t[S+1]+t[F+1]),F=S;return m}function xp(t,e,i,c,m){!function S(F,Q,_t,kt,Bt){for(;kt>_t;){if(kt-_t>600){var Nt=kt-_t+1,$t=Q-_t+1,ie=Math.log(Nt),ke=.5*Math.exp(2*ie/3),Le=.5*Math.sqrt(ie*ke*(Nt-ke)/Nt)*($t-Nt/2<0?-1:1);S(F,Q,Math.max(_t,Math.floor(Q-$t*ke/Nt+Le)),Math.min(kt,Math.floor(Q+(Nt-$t)*ke/Nt+Le)),Bt)}var Ve=F[Q],ze=_t,Qe=kt;for(Eh(F,_t,Q),Bt(F[kt],Ve)>0&&Eh(F,_t,kt);ze<Qe;){for(Eh(F,ze,Qe),ze++,Qe--;Bt(F[ze],Ve)<0;)ze++;for(;Bt(F[Qe],Ve)>0;)Qe--}0===Bt(F[_t],Ve)?Eh(F,_t,Qe):Eh(F,++Qe,kt),Qe<=Q&&(_t=Qe+1),Q<=Qe&&(kt=Qe-1)}}(t,e,i||0,c||t.length-1,m||bp)}function Eh(t,e,i){var c=t[e];t[e]=t[i],t[i]=c}function bp(t,e){return t<e?-1:t>e?1:0}function Mc(t,e){var i=t.length;if(i<=1)return[t];for(var c,m,S=[],F=0;F<i;F++){var Q=At(t[F]);0!==Q&&(t[F].area=Math.abs(Q),void 0===m&&(m=Q<0),m===Q<0?(c&&S.push(c),c=[t[F]]):c.push(t[F]))}if(c&&S.push(c),e>1)for(var _t=0;_t<S.length;_t++)S[_t].length<=e||(xp(S[_t],e,1,S[_t].length-1,wp),S[_t]=S[_t].slice(0,e));return S}function wp(t,e){return e.area-t.area}function Lc(t,e,i){for(var c=i.patternDependencies,m=!1,S=0,F=e;S<F.length;S+=1){var Q=F[S].paint.get(t+"-pattern");Q.isConstant()||(m=!0);var _t=Q.constantOr(null);_t&&(m=!0,c[_t.to]=!0,c[_t.from]=!0)}return m}function Ic(t,e,i,c,m){for(var S=m.patternDependencies,F=0,Q=e;F<Q.length;F+=1){var _t=Q[F],kt=_t.paint.get(t+"-pattern").value;if("constant"!==kt.kind){var Bt=kt.evaluate({zoom:c-1},i,{},m.availableImages),Nt=kt.evaluate({zoom:c},i,{},m.availableImages),$t=kt.evaluate({zoom:c+1},i,{},m.availableImages);Nt=Nt&&Nt.name?Nt.name:Nt,$t=$t&&$t.name?$t.name:$t,S[Bt=Bt&&Bt.name?Bt.name:Bt]=!0,S[Nt]=!0,S[$t]=!0,i.patterns[_t.id]={min:Bt,mid:Nt,max:$t}}}return i}_n.deviation=function(t,e,i,c){var m=e&&e.length,S=Math.abs(Ec(t,0,m?e[0]*i:t.length,i));if(m)for(var F=0,Q=e.length;F<Q;F++)S-=Math.abs(Ec(t,e[F]*i,F<Q-1?e[F+1]*i:t.length,i));var _t=0;for(F=0;F<c.length;F+=3){var kt=c[F]*i,Bt=c[F+1]*i,Nt=c[F+2]*i;_t+=Math.abs((t[kt]-t[Nt])*(t[Bt+1]-t[kt+1])-(t[kt]-t[Bt])*(t[Nt+1]-t[kt+1]))}return 0===S&&0===_t?0:Math.abs((_t-S)/S)},_n.flatten=function(t){for(var e=t[0][0].length,i={vertices:[],holes:[],dimensions:e},c=0,m=0;m<t.length;m++){for(var S=0;S<t[m].length;S++)for(var F=0;F<e;F++)i.vertices.push(t[m][S][F]);m>0&&i.holes.push(c+=t[m-1].length)}return i},Yn.default=ro;var yl=function(t){this.zoom=t.zoom,this.overscaling=t.overscaling,this.layers=t.layers,this.layerIds=this.layers.map(function(e){return e.id}),this.index=t.index,this.hasPattern=!1,this.patternFeatures=[],this.layoutVertexArray=new Ha,this.indexArray=new Qa,this.indexArray2=new Tl,this.programConfigurations=new Vn(t.layers,t.zoom),this.segments=new le,this.segments2=new le,this.stateDependentLayerIds=this.layers.filter(function(e){return e.isStateDependent()}).map(function(e){return e.id})};yl.prototype.populate=function(t,e,i){this.hasPattern=Lc("fill",this.layers,e);for(var c=this.layers[0].layout.get("fill-sort-key"),m=[],S=0,F=t;S<F.length;S+=1){var Q=F[S],_t=Q.feature,kt=Q.id,Bt=Q.index,Nt=Q.sourceLayerIndex,$t=this.layers[0]._featureFilter.needGeometry,ie=Ur(_t,$t);if(this.layers[0]._featureFilter.filter(new To(this.zoom),ie,i)){var ke=c?c.evaluate(ie,{},i,e.availableImages):void 0,Le={id:kt,properties:_t.properties,type:_t.type,sourceLayerIndex:Nt,index:Bt,geometry:$t?ie.geometry:kr(_t),patterns:{},sortKey:ke};m.push(Le)}}c&&m.sort(function(qi,on){return qi.sortKey-on.sortKey});for(var Ve=0,ze=m;Ve<ze.length;Ve+=1){var Qe=ze[Ve],li=Qe.geometry,gi=Qe.index,_i=Qe.sourceLayerIndex;if(this.hasPattern){var Ai=Ic("fill",this.layers,Qe,this.zoom,e);this.patternFeatures.push(Ai)}else this.addFeature(Qe,li,gi,i,{});e.featureIndex.insert(t[gi].feature,li,gi,_i,this.index)}},yl.prototype.update=function(t,e,i){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(t,e,this.stateDependentLayers,i)},yl.prototype.addFeatures=function(t,e,i){for(var c=0,m=this.patternFeatures;c<m.length;c+=1){var S=m[c];this.addFeature(S,S.geometry,S.index,e,i)}},yl.prototype.isEmpty=function(){return 0===this.layoutVertexArray.length},yl.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},yl.prototype.upload=function(t){this.uploaded||(this.layoutVertexBuffer=t.createVertexBuffer(this.layoutVertexArray,Xn),this.indexBuffer=t.createIndexBuffer(this.indexArray),this.indexBuffer2=t.createIndexBuffer(this.indexArray2)),this.programConfigurations.upload(t),this.uploaded=!0},yl.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.indexBuffer2.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.segments2.destroy())},yl.prototype.addFeature=function(t,e,i,c,m){for(var S=0,F=Mc(e,500);S<F.length;S+=1){for(var Q=F[S],_t=0,kt=0,Bt=Q;kt<Bt.length;kt+=1)_t+=Bt[kt].length;for(var Nt=this.segments.prepareSegment(_t,this.layoutVertexArray,this.indexArray),$t=Nt.vertexLength,ie=[],ke=[],Le=0,Ve=Q;Le<Ve.length;Le+=1){var ze=Ve[Le];if(0!==ze.length){ze!==Q[0]&&ke.push(ie.length/2);var Qe=this.segments2.prepareSegment(ze.length,this.layoutVertexArray,this.indexArray2),li=Qe.vertexLength;this.layoutVertexArray.emplaceBack(ze[0].x,ze[0].y),this.indexArray2.emplaceBack(li+ze.length-1,li),ie.push(ze[0].x),ie.push(ze[0].y);for(var gi=1;gi<ze.length;gi++)this.layoutVertexArray.emplaceBack(ze[gi].x,ze[gi].y),this.indexArray2.emplaceBack(li+gi-1,li+gi),ie.push(ze[gi].x),ie.push(ze[gi].y);Qe.vertexLength+=ze.length,Qe.primitiveLength+=ze.length}}for(var _i=Yn(ie,ke),Ai=0;Ai<_i.length;Ai+=3)this.indexArray.emplaceBack($t+_i[Ai],$t+_i[Ai+1],$t+_i[Ai+2]);Nt.vertexLength+=_t,Nt.primitiveLength+=_i.length/3}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,t,i,m,c)},Hi("FillBucket",yl,{omit:["layers","patternFeatures"]});var Sp=new ms({"fill-sort-key":new yn(oe.layout_fill["fill-sort-key"])}),Tp={paint:new ms({"fill-antialias":new Pn(oe.paint_fill["fill-antialias"]),"fill-opacity":new yn(oe.paint_fill["fill-opacity"]),"fill-color":new yn(oe.paint_fill["fill-color"]),"fill-outline-color":new yn(oe.paint_fill["fill-outline-color"]),"fill-translate":new Pn(oe.paint_fill["fill-translate"]),"fill-translate-anchor":new Pn(oe.paint_fill["fill-translate-anchor"]),"fill-pattern":new $a(oe.paint_fill["fill-pattern"])}),layout:Sp},Cp=function(t){function e(i){t.call(this,i,Tp)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.recalculate=function(i,c){t.prototype.recalculate.call(this,i,c);var m=this.paint._values["fill-outline-color"];"constant"===m.value.kind&&void 0===m.value.value&&(this.paint._values["fill-outline-color"]=this.paint._values["fill-color"])},e.prototype.createBucket=function(i){return new yl(i)},e.prototype.queryRadius=function(){return g(this.paint.get("fill-translate"))},e.prototype.queryIntersectsFeature=function(i,c,m,S,F,Q,_t){return Da(C(i,this.paint.get("fill-translate"),this.paint.get("fill-translate-anchor"),Q.angle,_t),S)},e.prototype.isTileClipped=function(){return!0},e}(Aa),Ap=Pr([{name:"a_pos",components:2,type:"Int16"},{name:"a_normal_ed",components:4,type:"Int16"}],4).members,ou=ih;function ih(t,e,i,c,m){this.properties={},this.extent=i,this.type=0,this._pbf=t,this._geometry=-1,this._keys=c,this._values=m,t.readFields(Pp,this,e)}function Pp(t,e,i){1==t?e.id=i.readVarint():2==t?function(c,m){for(var S=c.readVarint()+c.pos;c.pos<S;){var F=m._keys[c.readVarint()],Q=m._values[c.readVarint()];m.properties[F]=Q}}(i,e):3==t?e.type=i.readVarint():4==t&&(e._geometry=i.pos)}function kp(t){for(var e,i,c=0,m=0,S=t.length,F=S-1;m<S;F=m++)c+=((i=t[F]).x-(e=t[m]).x)*(e.y+i.y);return c}ih.types=["Unknown","Point","LineString","Polygon"],ih.prototype.loadGeometry=function(){var t=this._pbf;t.pos=this._geometry;for(var e,i=t.readVarint()+t.pos,c=1,m=0,S=0,F=0,Q=[];t.pos<i;){if(m<=0){var _t=t.readVarint();c=7&_t,m=_t>>3}if(m--,1===c||2===c)S+=t.readSVarint(),F+=t.readSVarint(),1===c&&(e&&Q.push(e),e=[]),e.push(new v(S,F));else{if(7!==c)throw new Error("unknown command "+c);e&&e.push(e[0].clone())}}return e&&Q.push(e),Q},ih.prototype.bbox=function(){var t=this._pbf;t.pos=this._geometry;for(var e=t.readVarint()+t.pos,i=1,c=0,m=0,S=0,F=1/0,Q=-1/0,_t=1/0,kt=-1/0;t.pos<e;){if(c<=0){var Bt=t.readVarint();i=7&Bt,c=Bt>>3}if(c--,1===i||2===i)(m+=t.readSVarint())<F&&(F=m),m>Q&&(Q=m),(S+=t.readSVarint())<_t&&(_t=S),S>kt&&(kt=S);else if(7!==i)throw new Error("unknown command "+i)}return[F,_t,Q,kt]},ih.prototype.toGeoJSON=function(t,e,i){var c,m,S=this.extent*Math.pow(2,i),F=this.extent*t,Q=this.extent*e,_t=this.loadGeometry(),kt=ih.types[this.type];function Bt(ie){for(var ke=0;ke<ie.length;ke++){var Le=ie[ke];ie[ke]=[360*(Le.x+F)/S-180,360/Math.PI*Math.atan(Math.exp((180-360*(Le.y+Q)/S)*Math.PI/180))-90]}}switch(this.type){case 1:var Nt=[];for(c=0;c<_t.length;c++)Nt[c]=_t[c][0];Bt(_t=Nt);break;case 2:for(c=0;c<_t.length;c++)Bt(_t[c]);break;case 3:for(_t=function(ie){var ke=ie.length;if(ke<=1)return[ie];for(var Le,Ve,ze=[],Qe=0;Qe<ke;Qe++){var li=kp(ie[Qe]);0!==li&&(void 0===Ve&&(Ve=li<0),Ve===li<0?(Le&&ze.push(Le),Le=[ie[Qe]]):Le.push(ie[Qe]))}return Le&&ze.push(Le),ze}(_t),c=0;c<_t.length;c++)for(m=0;m<_t[c].length;m++)Bt(_t[c][m])}1===_t.length?_t=_t[0]:kt="Multi"+kt;var $t={type:"Feature",geometry:{type:kt,coordinates:_t},properties:this.properties};return"id"in this&&($t.id=this.id),$t};var ru=su;function su(t,e){this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=t,this._keys=[],this._values=[],this._features=[],t.readFields(Ep,this,e),this.length=this._features.length}function Ep(t,e,i){15===t?e.version=i.readVarint():1===t?e.name=i.readString():5===t?e.extent=i.readVarint():2===t?e._features.push(i.pos):3===t?e._keys.push(i.readString()):4===t&&e._values.push(function(c){for(var m=null,S=c.readVarint()+c.pos;c.pos<S;){var F=c.readVarint()>>3;m=1===F?c.readString():2===F?c.readFloat():3===F?c.readDouble():4===F?c.readVarint64():5===F?c.readVarint():6===F?c.readSVarint():7===F?c.readBoolean():null}return m}(i))}function Mp(t,e,i){if(3===t){var c=new ru(i,i.readVarint()+i.pos);c.length&&(e[c.name]=c)}}su.prototype.feature=function(t){if(t<0||t>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[t];var e=this._pbf.readVarint()+this._pbf.pos;return new ou(this._pbf,e,this.extent,this._keys,this._values)};var nh={VectorTile:function(t,e){this.layers=t.readFields(Mp,{},e)},VectorTileFeature:ou,VectorTileLayer:ru},Lp=nh.VectorTileFeature.types,Dc=Math.pow(2,13);function Mh(t,e,i,c,m,S,F,Q){t.emplaceBack(e,i,2*Math.floor(c*Dc)+F,m*Dc*2,S*Dc*2,Math.round(Q))}var vl=function(t){this.zoom=t.zoom,this.overscaling=t.overscaling,this.layers=t.layers,this.layerIds=this.layers.map(function(e){return e.id}),this.index=t.index,this.hasPattern=!1,this.layoutVertexArray=new ea,this.indexArray=new Qa,this.programConfigurations=new Vn(t.layers,t.zoom),this.segments=new le,this.stateDependentLayerIds=this.layers.filter(function(e){return e.isStateDependent()}).map(function(e){return e.id})};function Ip(t,e){return t.x===e.x&&(t.x<0||t.x>8192)||t.y===e.y&&(t.y<0||t.y>8192)}vl.prototype.populate=function(t,e,i){this.features=[],this.hasPattern=Lc("fill-extrusion",this.layers,e);for(var c=0,m=t;c<m.length;c+=1){var S=m[c],F=S.feature,Q=S.id,_t=S.index,kt=S.sourceLayerIndex,Bt=this.layers[0]._featureFilter.needGeometry,Nt=Ur(F,Bt);if(this.layers[0]._featureFilter.filter(new To(this.zoom),Nt,i)){var $t={id:Q,sourceLayerIndex:kt,index:_t,geometry:Bt?Nt.geometry:kr(F),properties:F.properties,type:F.type,patterns:{}};this.hasPattern?this.features.push(Ic("fill-extrusion",this.layers,$t,this.zoom,e)):this.addFeature($t,$t.geometry,_t,i,{}),e.featureIndex.insert(F,$t.geometry,_t,kt,this.index,!0)}}},vl.prototype.addFeatures=function(t,e,i){for(var c=0,m=this.features;c<m.length;c+=1){var S=m[c];this.addFeature(S,S.geometry,S.index,e,i)}},vl.prototype.update=function(t,e,i){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(t,e,this.stateDependentLayers,i)},vl.prototype.isEmpty=function(){return 0===this.layoutVertexArray.length},vl.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},vl.prototype.upload=function(t){this.uploaded||(this.layoutVertexBuffer=t.createVertexBuffer(this.layoutVertexArray,Ap),this.indexBuffer=t.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(t),this.uploaded=!0},vl.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())},vl.prototype.addFeature=function(t,e,i,c,m){for(var S=0,F=Mc(e,500);S<F.length;S+=1){for(var Q=F[S],_t=0,kt=0,Bt=Q;kt<Bt.length;kt+=1)_t+=Bt[kt].length;for(var Nt=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray),$t=0,ie=Q;$t<ie.length;$t+=1){var ke=ie[$t];if(0!==ke.length&&!((zo=ke).every(function(xo){return xo.x<0})||zo.every(function(xo){return xo.x>8192})||zo.every(function(xo){return xo.y<0})||zo.every(function(xo){return xo.y>8192})))for(var Le=0,Ve=0;Ve<ke.length;Ve++){var ze=ke[Ve];if(Ve>=1){var Qe=ke[Ve-1];if(!Ip(ze,Qe)){Nt.vertexLength+4>le.MAX_VERTEX_ARRAY_LENGTH&&(Nt=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray));var li=ze.sub(Qe)._perp()._unit(),gi=Qe.dist(ze);Le+gi>32768&&(Le=0),Mh(this.layoutVertexArray,ze.x,ze.y,li.x,li.y,0,0,Le),Mh(this.layoutVertexArray,ze.x,ze.y,li.x,li.y,0,1,Le),Mh(this.layoutVertexArray,Qe.x,Qe.y,li.x,li.y,0,0,Le+=gi),Mh(this.layoutVertexArray,Qe.x,Qe.y,li.x,li.y,0,1,Le);var _i=Nt.vertexLength;this.indexArray.emplaceBack(_i,_i+2,_i+1),this.indexArray.emplaceBack(_i+1,_i+2,_i+3),Nt.vertexLength+=4,Nt.primitiveLength+=2}}}}if(Nt.vertexLength+_t>le.MAX_VERTEX_ARRAY_LENGTH&&(Nt=this.segments.prepareSegment(_t,this.layoutVertexArray,this.indexArray)),"Polygon"===Lp[t.type]){for(var Ai=[],qi=[],on=Nt.vertexLength,In=0,dn=Q;In<dn.length;In+=1){var Dn=dn[In];if(0!==Dn.length){Dn!==Q[0]&&qi.push(Ai.length/2);for(var mn=0;mn<Dn.length;mn++){var Po=Dn[mn];Mh(this.layoutVertexArray,Po.x,Po.y,0,0,1,1,0),Ai.push(Po.x),Ai.push(Po.y)}}}for(var eo=Yn(Ai,qi),Tn=0;Tn<eo.length;Tn+=3)this.indexArray.emplaceBack(on+eo[Tn],on+eo[Tn+2],on+eo[Tn+1]);Nt.primitiveLength+=eo.length/3,Nt.vertexLength+=_t}}var zo;this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,t,i,m,c)},Hi("FillExtrusionBucket",vl,{omit:["layers","features"]});var Dp={paint:new ms({"fill-extrusion-opacity":new Pn(oe["paint_fill-extrusion"]["fill-extrusion-opacity"]),"fill-extrusion-color":new yn(oe["paint_fill-extrusion"]["fill-extrusion-color"]),"fill-extrusion-translate":new Pn(oe["paint_fill-extrusion"]["fill-extrusion-translate"]),"fill-extrusion-translate-anchor":new Pn(oe["paint_fill-extrusion"]["fill-extrusion-translate-anchor"]),"fill-extrusion-pattern":new $a(oe["paint_fill-extrusion"]["fill-extrusion-pattern"]),"fill-extrusion-height":new yn(oe["paint_fill-extrusion"]["fill-extrusion-height"]),"fill-extrusion-base":new yn(oe["paint_fill-extrusion"]["fill-extrusion-base"]),"fill-extrusion-vertical-gradient":new Pn(oe["paint_fill-extrusion"]["fill-extrusion-vertical-gradient"])})},zp=function(t){function e(i){t.call(this,i,Dp)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.createBucket=function(i){return new vl(i)},e.prototype.queryRadius=function(){return g(this.paint.get("fill-extrusion-translate"))},e.prototype.is3D=function(){return!0},e.prototype.queryIntersectsFeature=function(i,c,m,S,F,Q,_t,kt){var Bt=C(i,this.paint.get("fill-extrusion-translate"),this.paint.get("fill-extrusion-translate-anchor"),Q.angle,_t),Nt=this.paint.get("fill-extrusion-height").evaluate(c,m),$t=this.paint.get("fill-extrusion-base").evaluate(c,m),ie=function(Le,Ve,ze,Qe){for(var li=[],gi=0,_i=Le;gi<_i.length;gi+=1){var Ai=_i[gi],qi=[Ai.x,Ai.y,0,1];Qt(qi,qi,Ve),li.push(new v(qi[0]/qi[3],qi[1]/qi[3]))}return li}(Bt,kt),ke=function(Le,Ve,ze,Qe){for(var li=[],gi=[],_i=Qe[8]*Ve,Ai=Qe[9]*Ve,qi=Qe[10]*Ve,on=Qe[11]*Ve,In=Qe[8]*ze,dn=Qe[9]*ze,Dn=Qe[10]*ze,mn=Qe[11]*ze,Po=0,eo=Le;Po<eo.length;Po+=1){for(var Tn=[],zo=[],xo=0,Ko=eo[Po];xo<Ko.length;xo+=1){var Bn=Ko[xo],nr=Bn.x,Xr=Bn.y,hs=Qe[0]*nr+Qe[4]*Xr+Qe[12],rs=Qe[1]*nr+Qe[5]*Xr+Qe[13],Yr=Qe[2]*nr+Qe[6]*Xr+Qe[14],cs=Qe[3]*nr+Qe[7]*Xr+Qe[15],Ns=Yr+qi,Us=cs+on,xa=hs+In,Ys=rs+dn,ba=Yr+Dn,gs=cs+mn,Ks=new v((hs+_i)/Us,(rs+Ai)/Us);Ks.z=Ns/Us,Tn.push(Ks);var Fo=new v(xa/gs,Ys/gs);Fo.z=ba/gs,zo.push(Fo)}li.push(Tn),gi.push(zo)}return[li,gi]}(S,$t,Nt,kt);return function(Le,Ve,ze){var Qe=1/0;Da(ze,Ve)&&(Qe=au(ze,Ve[0]));for(var li=0;li<Ve.length;li++)for(var gi=Ve[li],_i=Le[li],Ai=0;Ai<gi.length-1;Ai++){var qi=gi[Ai],on=[qi,gi[Ai+1],_i[Ai+1],_i[Ai],qi];tl(ze,on)&&(Qe=Math.min(Qe,au(ze,on)))}return Qe!==1/0&&Qe}(ke[0],ke[1],ie)},e}(Aa);function Lh(t,e){return t.x*e.x+t.y*e.y}function au(t,e){if(1===t.length){for(var i,c=0,m=e[c++];!i||m.equals(i);)if(!(i=e[c++]))return 1/0;for(;c<e.length;c++){var S=e[c],F=t[0],Q=i.sub(m),_t=S.sub(m),kt=F.sub(m),Bt=Lh(Q,Q),Nt=Lh(Q,_t),$t=Lh(_t,_t),ie=Lh(kt,Q),ke=Lh(kt,_t),Le=Bt*$t-Nt*Nt,Ve=($t*ie-Nt*ke)/Le,ze=(Bt*ke-Nt*ie)/Le,Qe=m.z*(1-Ve-ze)+i.z*Ve+S.z*ze;if(isFinite(Qe))return Qe}return 1/0}for(var li=1/0,gi=0,_i=e;gi<_i.length;gi+=1)li=Math.min(li,_i[gi].z);return li}var Op=Pr([{name:"a_pos_normal",components:2,type:"Int16"},{name:"a_data",components:4,type:"Uint8"}],4).members,Bp=Pr([{name:"a_uv_x",components:1,type:"Float32"},{name:"a_split_index",components:1,type:"Float32"}]).members,Rp=nh.VectorTileFeature.types,jp=Math.cos(Math.PI/180*37.5),lu=Math.pow(2,14)/.5,Ea=function(t){var e=this;this.zoom=t.zoom,this.overscaling=t.overscaling,this.layers=t.layers,this.layerIds=this.layers.map(function(i){return i.id}),this.index=t.index,this.hasPattern=!1,this.patternFeatures=[],this.lineClipsArray=[],this.gradients={},this.layers.forEach(function(i){e.gradients[i.id]={}}),this.layoutVertexArray=new va,this.layoutVertexArray2=new al,this.indexArray=new Qa,this.programConfigurations=new Vn(t.layers,t.zoom),this.segments=new le,this.maxLineLength=0,this.stateDependentLayerIds=this.layers.filter(function(i){return i.isStateDependent()}).map(function(i){return i.id})};Ea.prototype.populate=function(t,e,i){this.hasPattern=Lc("line",this.layers,e);for(var c=this.layers[0].layout.get("line-sort-key"),m=[],S=0,F=t;S<F.length;S+=1){var Q=F[S],_t=Q.feature,kt=Q.id,Bt=Q.index,Nt=Q.sourceLayerIndex,$t=this.layers[0]._featureFilter.needGeometry,ie=Ur(_t,$t);if(this.layers[0]._featureFilter.filter(new To(this.zoom),ie,i)){var ke=c?c.evaluate(ie,{},i):void 0,Le={id:kt,properties:_t.properties,type:_t.type,sourceLayerIndex:Nt,index:Bt,geometry:$t?ie.geometry:kr(_t),patterns:{},sortKey:ke};m.push(Le)}}c&&m.sort(function(qi,on){return qi.sortKey-on.sortKey});for(var Ve=0,ze=m;Ve<ze.length;Ve+=1){var Qe=ze[Ve],li=Qe.geometry,gi=Qe.index,_i=Qe.sourceLayerIndex;if(this.hasPattern){var Ai=Ic("line",this.layers,Qe,this.zoom,e);this.patternFeatures.push(Ai)}else this.addFeature(Qe,li,gi,i,{});e.featureIndex.insert(t[gi].feature,li,gi,_i,this.index)}},Ea.prototype.update=function(t,e,i){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(t,e,this.stateDependentLayers,i)},Ea.prototype.addFeatures=function(t,e,i){for(var c=0,m=this.patternFeatures;c<m.length;c+=1){var S=m[c];this.addFeature(S,S.geometry,S.index,e,i)}},Ea.prototype.isEmpty=function(){return 0===this.layoutVertexArray.length},Ea.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},Ea.prototype.upload=function(t){this.uploaded||(0!==this.layoutVertexArray2.length&&(this.layoutVertexBuffer2=t.createVertexBuffer(this.layoutVertexArray2,Bp)),this.layoutVertexBuffer=t.createVertexBuffer(this.layoutVertexArray,Op),this.indexBuffer=t.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(t),this.uploaded=!0},Ea.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())},Ea.prototype.lineFeatureClips=function(t){if(t.properties&&t.properties.hasOwnProperty("mapbox_clip_start")&&t.properties.hasOwnProperty("mapbox_clip_end"))return{start:+t.properties.mapbox_clip_start,end:+t.properties.mapbox_clip_end}},Ea.prototype.addFeature=function(t,e,i,c,m){var S=this.layers[0].layout,F=S.get("line-join").evaluate(t,{}),Q=S.get("line-cap"),_t=S.get("line-miter-limit"),kt=S.get("line-round-limit");this.lineClips=this.lineFeatureClips(t);for(var Bt=0,Nt=e;Bt<Nt.length;Bt+=1)this.addLine(Nt[Bt],t,F,Q,_t,kt);this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,t,i,m,c)},Ea.prototype.addLine=function(t,e,i,c,m,S){if(this.distance=0,this.scaledDistance=0,this.totalDistance=0,this.lineClips){this.lineClipsArray.push(this.lineClips);for(var F=0;F<t.length-1;F++)this.totalDistance+=t[F].dist(t[F+1]);this.updateScaledDistance(),this.maxLineLength=Math.max(this.maxLineLength,this.totalDistance)}for(var Q="Polygon"===Rp[e.type],_t=t.length;_t>=2&&t[_t-1].equals(t[_t-2]);)_t--;for(var kt=0;kt<_t-1&&t[kt].equals(t[kt+1]);)kt++;if(!(_t<(Q?3:2))){"bevel"===i&&(m=1.05);var Bt,Nt=this.overscaling<=16?122880/(512*this.overscaling):0,$t=this.segments.prepareSegment(10*_t,this.layoutVertexArray,this.indexArray),ie=void 0,ke=void 0,Le=void 0,Ve=void 0;this.e1=this.e2=-1,Q&&(Ve=t[kt].sub(Bt=t[_t-2])._unit()._perp());for(var ze=kt;ze<_t;ze++)if(!(ke=ze===_t-1?Q?t[kt+1]:void 0:t[ze+1])||!t[ze].equals(ke)){Ve&&(Le=Ve),Bt&&(ie=Bt),Bt=t[ze],Ve=ke?ke.sub(Bt)._unit()._perp():Le;var Qe=(Le=Le||Ve).add(Ve);0===Qe.x&&0===Qe.y||Qe._unit();var li=Le.x*Ve.x+Le.y*Ve.y,gi=Qe.x*Ve.x+Qe.y*Ve.y,_i=0!==gi?1/gi:1/0,Ai=2*Math.sqrt(2-2*gi),qi=gi<jp&&ie&&ke,on=Le.x*Ve.y-Le.y*Ve.x>0;if(qi&&ze>kt){var In=Bt.dist(ie);if(In>2*Nt){var dn=Bt.sub(Bt.sub(ie)._mult(Nt/In)._round());this.updateDistance(ie,dn),this.addCurrentVertex(dn,Le,0,0,$t),ie=dn}}var Dn=ie&&ke,mn=Dn?i:Q?"butt":c;if(Dn&&"round"===mn&&(_i<S?mn="miter":_i<=2&&(mn="fakeround")),"miter"===mn&&_i>m&&(mn="bevel"),"bevel"===mn&&(_i>2&&(mn="flipbevel"),_i<m&&(mn="miter")),ie&&this.updateDistance(ie,Bt),"miter"===mn)Qe._mult(_i),this.addCurrentVertex(Bt,Qe,0,0,$t);else if("flipbevel"===mn){if(_i>100)Qe=Ve.mult(-1);else{var Po=_i*Le.add(Ve).mag()/Le.sub(Ve).mag();Qe._perp()._mult(Po*(on?-1:1))}this.addCurrentVertex(Bt,Qe,0,0,$t),this.addCurrentVertex(Bt,Qe.mult(-1),0,0,$t)}else if("bevel"===mn||"fakeround"===mn){var eo=-Math.sqrt(_i*_i-1),Tn=on?eo:0,zo=on?0:eo;if(ie&&this.addCurrentVertex(Bt,Le,Tn,zo,$t),"fakeround"===mn)for(var xo=Math.round(180*Ai/Math.PI/20),Ko=1;Ko<xo;Ko++){var Bn=Ko/xo;if(.5!==Bn){var nr=Bn-.5;Bn+=Bn*nr*(Bn-1)*((1.0904+li*(li*(3.55645-1.43519*li)-3.2452))*nr*nr+(.848013+li*(.215638*li-1.06021)))}var Xr=Ve.sub(Le)._mult(Bn)._add(Le)._unit()._mult(on?-1:1);this.addHalfVertex(Bt,Xr.x,Xr.y,!1,on,0,$t)}ke&&this.addCurrentVertex(Bt,Ve,-Tn,-zo,$t)}else if("butt"===mn)this.addCurrentVertex(Bt,Qe,0,0,$t);else if("square"===mn){var hs=ie?1:-1;this.addCurrentVertex(Bt,Qe,hs,hs,$t)}else"round"===mn&&(ie&&(this.addCurrentVertex(Bt,Le,0,0,$t),this.addCurrentVertex(Bt,Le,1,1,$t,!0)),ke&&(this.addCurrentVertex(Bt,Ve,-1,-1,$t,!0),this.addCurrentVertex(Bt,Ve,0,0,$t)));if(qi&&ze<_t-1){var rs=Bt.dist(ke);if(rs>2*Nt){var Yr=Bt.add(ke.sub(Bt)._mult(Nt/rs)._round());this.updateDistance(Bt,Yr),this.addCurrentVertex(Yr,Ve,0,0,$t),Bt=Yr}}}}},Ea.prototype.addCurrentVertex=function(t,e,i,c,m,S){void 0===S&&(S=!1);var F=e.y*c-e.x,Q=-e.y-e.x*c;this.addHalfVertex(t,e.x+e.y*i,e.y-e.x*i,S,!1,i,m),this.addHalfVertex(t,F,Q,S,!0,-c,m),this.distance>lu/2&&0===this.totalDistance&&(this.distance=0,this.addCurrentVertex(t,e,i,c,m,S))},Ea.prototype.addHalfVertex=function(t,e,i,c,m,S,F){var Q=.5*(this.lineClips?this.scaledDistance*(lu-1):this.scaledDistance);this.layoutVertexArray.emplaceBack((t.x<<1)+(c?1:0),(t.y<<1)+(m?1:0),Math.round(63*e)+128,Math.round(63*i)+128,1+(0===S?0:S<0?-1:1)|(63&Q)<<2,Q>>6),this.lineClips&&this.layoutVertexArray2.emplaceBack((this.scaledDistance-this.lineClips.start)/(this.lineClips.end-this.lineClips.start),this.lineClipsArray.length);var _t=F.vertexLength++;this.e1>=0&&this.e2>=0&&(this.indexArray.emplaceBack(this.e1,this.e2,_t),F.primitiveLength++),m?this.e2=_t:this.e1=_t},Ea.prototype.updateScaledDistance=function(){this.scaledDistance=this.lineClips?this.lineClips.start+(this.lineClips.end-this.lineClips.start)*this.distance/this.totalDistance:this.distance},Ea.prototype.updateDistance=function(t,e){this.distance+=t.dist(e),this.updateScaledDistance()},Hi("LineBucket",Ea,{omit:["layers","patternFeatures"]});var Fp=new ms({"line-cap":new Pn(oe.layout_line["line-cap"]),"line-join":new yn(oe.layout_line["line-join"]),"line-miter-limit":new Pn(oe.layout_line["line-miter-limit"]),"line-round-limit":new Pn(oe.layout_line["line-round-limit"]),"line-sort-key":new yn(oe.layout_line["line-sort-key"])}),hu={paint:new ms({"line-opacity":new yn(oe.paint_line["line-opacity"]),"line-color":new yn(oe.paint_line["line-color"]),"line-translate":new Pn(oe.paint_line["line-translate"]),"line-translate-anchor":new Pn(oe.paint_line["line-translate-anchor"]),"line-width":new yn(oe.paint_line["line-width"]),"line-gap-width":new yn(oe.paint_line["line-gap-width"]),"line-offset":new yn(oe.paint_line["line-offset"]),"line-blur":new yn(oe.paint_line["line-blur"]),"line-dasharray":new zs(oe.paint_line["line-dasharray"]),"line-pattern":new $a(oe.paint_line["line-pattern"]),"line-gradient":new da(oe.paint_line["line-gradient"])}),layout:Fp},cu=new(function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.possiblyEvaluate=function(i,c){return c=new To(Math.floor(c.zoom),{now:c.now,fadeDuration:c.fadeDuration,zoomHistory:c.zoomHistory,transition:c.transition}),t.prototype.possiblyEvaluate.call(this,i,c)},e.prototype.evaluate=function(i,c,m,S){return c=H({},c,{zoom:Math.floor(c.zoom)}),t.prototype.evaluate.call(this,i,c,m,S)},e}(yn))(hu.paint.properties["line-width"].specification);cu.useIntegerZoom=!0;var Np=function(t){function e(i){t.call(this,i,hu),this.gradientVersion=0}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype._handleSpecialPaintPropertyUpdate=function(i){"line-gradient"===i&&(this.stepInterpolant=this._transitionablePaint._values["line-gradient"].value.expression._styleExpression.expression instanceof an,this.gradientVersion=(this.gradientVersion+1)%k)},e.prototype.gradientExpression=function(){return this._transitionablePaint._values["line-gradient"].value.expression},e.prototype.recalculate=function(i,c){t.prototype.recalculate.call(this,i,c),this.paint._values["line-floorwidth"]=cu.possiblyEvaluate(this._transitioningPaint._values["line-width"].value,i)},e.prototype.createBucket=function(i){return new Ea(i)},e.prototype.queryRadius=function(i){var c=i,m=uu(d("line-width",this,c),d("line-gap-width",this,c)),S=d("line-offset",this,c);return m/2+Math.abs(S)+g(this.paint.get("line-translate"))},e.prototype.queryIntersectsFeature=function(i,c,m,S,F,Q,_t){var kt=C(i,this.paint.get("line-translate"),this.paint.get("line-translate-anchor"),Q.angle,_t),Bt=_t/2*uu(this.paint.get("line-width").evaluate(c,m),this.paint.get("line-gap-width").evaluate(c,m)),Nt=this.paint.get("line-offset").evaluate(c,m);return Nt&&(S=function($t,ie){for(var ke=[],Le=new v(0,0),Ve=0;Ve<$t.length;Ve++){for(var ze=$t[Ve],Qe=[],li=0;li<ze.length;li++){var gi=ze[li],_i=ze[li+1],Ai=0===li?Le:gi.sub(ze[li-1])._unit()._perp(),qi=li===ze.length-1?Le:_i.sub(gi)._unit()._perp(),on=Ai._add(qi)._unit();on._mult(1/(on.x*qi.x+on.y*qi.y)),Qe.push(on._mult(ie)._add(gi))}ke.push(Qe)}return ke}(S,Nt*_t)),function($t,ie,ke){for(var Le=0;Le<ie.length;Le++){var Ve=ie[Le];if($t.length>=3)for(var ze=0;ze<Ve.length;ze++)if(n($t,Ve[ze]))return!0;if(Pa($t,Ve,ke))return!0}return!1}(kt,S,Bt)},e.prototype.isTileClipped=function(){return!0},e}(Aa);function uu(t,e){return e>0?e+2*t:t}var Up=Pr([{name:"a_pos_offset",components:4,type:"Int16"},{name:"a_data",components:4,type:"Uint16"},{name:"a_pixeloffset",components:4,type:"Int16"}],4),Vp=Pr([{name:"a_projected_pos",components:3,type:"Float32"}],4),Hp=(Pr([{name:"a_fade_opacity",components:1,type:"Uint32"}],4),Pr([{name:"a_placed",components:2,type:"Uint8"},{name:"a_shift",components:2,type:"Float32"}])),pu=(Pr([{type:"Int16",name:"anchorPointX"},{type:"Int16",name:"anchorPointY"},{type:"Int16",name:"x1"},{type:"Int16",name:"y1"},{type:"Int16",name:"x2"},{type:"Int16",name:"y2"},{type:"Uint32",name:"featureIndex"},{type:"Uint16",name:"sourceLayerIndex"},{type:"Uint16",name:"bucketIndex"}]),Pr([{name:"a_pos",components:2,type:"Int16"},{name:"a_anchor_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],4)),Gp=Pr([{name:"a_pos",components:2,type:"Float32"},{name:"a_radius",components:1,type:"Float32"},{name:"a_flags",components:2,type:"Int16"}],4);function Wp(t,e,i){return t.sections.forEach(function(c){var m,F,Q;c.text=(m=c.text,F=i,"uppercase"===(Q=e.layout.get("text-transform").evaluate(F,{}))?m=m.toLocaleUpperCase():"lowercase"===Q&&(m=m.toLocaleLowerCase()),fs.applyArabicShaping&&(m=fs.applyArabicShaping(m)),m)}),t}Pr([{name:"triangle",components:3,type:"Uint16"}]),Pr([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Uint16",name:"glyphStartIndex"},{type:"Uint16",name:"numGlyphs"},{type:"Uint32",name:"vertexStartIndex"},{type:"Uint32",name:"lineStartIndex"},{type:"Uint32",name:"lineLength"},{type:"Uint16",name:"segment"},{type:"Uint16",name:"lowerSize"},{type:"Uint16",name:"upperSize"},{type:"Float32",name:"lineOffsetX"},{type:"Float32",name:"lineOffsetY"},{type:"Uint8",name:"writingMode"},{type:"Uint8",name:"placedOrientation"},{type:"Uint8",name:"hidden"},{type:"Uint32",name:"crossTileID"},{type:"Int16",name:"associatedIconIndex"}]),Pr([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Int16",name:"rightJustifiedTextSymbolIndex"},{type:"Int16",name:"centerJustifiedTextSymbolIndex"},{type:"Int16",name:"leftJustifiedTextSymbolIndex"},{type:"Int16",name:"verticalPlacedTextSymbolIndex"},{type:"Int16",name:"placedIconSymbolIndex"},{type:"Int16",name:"verticalPlacedIconSymbolIndex"},{type:"Uint16",name:"key"},{type:"Uint16",name:"textBoxStartIndex"},{type:"Uint16",name:"textBoxEndIndex"},{type:"Uint16",name:"verticalTextBoxStartIndex"},{type:"Uint16",name:"verticalTextBoxEndIndex"},{type:"Uint16",name:"iconBoxStartIndex"},{type:"Uint16",name:"iconBoxEndIndex"},{type:"Uint16",name:"verticalIconBoxStartIndex"},{type:"Uint16",name:"verticalIconBoxEndIndex"},{type:"Uint16",name:"featureIndex"},{type:"Uint16",name:"numHorizontalGlyphVertices"},{type:"Uint16",name:"numVerticalGlyphVertices"},{type:"Uint16",name:"numIconVertices"},{type:"Uint16",name:"numVerticalIconVertices"},{type:"Uint16",name:"useRuntimeCollisionCircles"},{type:"Uint32",name:"crossTileID"},{type:"Float32",name:"textBoxScale"},{type:"Float32",components:2,name:"textOffset"},{type:"Float32",name:"collisionCircleDiameter"}]),Pr([{type:"Float32",name:"offsetX"}]),Pr([{type:"Int16",name:"x"},{type:"Int16",name:"y"},{type:"Int16",name:"tileUnitDistanceFromAnchor"}]);var Ih={"!":"\ufe15","#":"\uff03",$:"\uff04","%":"\uff05","&":"\uff06","(":"\ufe35",")":"\ufe36","*":"\uff0a","+":"\uff0b",",":"\ufe10","-":"\ufe32",".":"\u30fb","/":"\uff0f",":":"\ufe13",";":"\ufe14","<":"\ufe3f","=":"\uff1d",">":"\ufe40","?":"\ufe16","@":"\uff20","[":"\ufe47","\\":"\uff3c","]":"\ufe48","^":"\uff3e",_:"\ufe33","`":"\uff40","{":"\ufe37","|":"\u2015","}":"\ufe38","~":"\uff5e","\xa2":"\uffe0","\xa3":"\uffe1","\xa5":"\uffe5","\xa6":"\uffe4","\xac":"\uffe2","\xaf":"\uffe3","\u2013":"\ufe32","\u2014":"\ufe31","\u2018":"\ufe43","\u2019":"\ufe44","\u201c":"\ufe41","\u201d":"\ufe42","\u2026":"\ufe19","\u2027":"\u30fb","\u20a9":"\uffe6","\u3001":"\ufe11","\u3002":"\ufe12","\u3008":"\ufe3f","\u3009":"\ufe40","\u300a":"\ufe3d","\u300b":"\ufe3e","\u300c":"\ufe41","\u300d":"\ufe42","\u300e":"\ufe43","\u300f":"\ufe44","\u3010":"\ufe3b","\u3011":"\ufe3c","\u3014":"\ufe39","\u3015":"\ufe3a","\u3016":"\ufe17","\u3017":"\ufe18","\uff01":"\ufe15","\uff08":"\ufe35","\uff09":"\ufe36","\uff0c":"\ufe10","\uff0d":"\ufe32","\uff0e":"\u30fb","\uff1a":"\ufe13","\uff1b":"\ufe14","\uff1c":"\ufe3f","\uff1e":"\ufe40","\uff1f":"\ufe16","\uff3b":"\ufe47","\uff3d":"\ufe48","\uff3f":"\ufe33","\uff5b":"\ufe37","\uff5c":"\u2015","\uff5d":"\ufe38","\uff5f":"\ufe35","\uff60":"\ufe36","\uff61":"\ufe12","\uff62":"\ufe41","\uff63":"\ufe42"},du=function(t,e,i,c,m){var S,F,Q=8*m-c-1,_t=(1<<Q)-1,kt=_t>>1,Bt=-7,Nt=i?m-1:0,$t=i?-1:1,ie=t[e+Nt];for(Nt+=$t,S=ie&(1<<-Bt)-1,ie>>=-Bt,Bt+=Q;Bt>0;S=256*S+t[e+Nt],Nt+=$t,Bt-=8);for(F=S&(1<<-Bt)-1,S>>=-Bt,Bt+=c;Bt>0;F=256*F+t[e+Nt],Nt+=$t,Bt-=8);if(0===S)S=1-kt;else{if(S===_t)return F?NaN:1/0*(ie?-1:1);F+=Math.pow(2,c),S-=kt}return(ie?-1:1)*F*Math.pow(2,S-c)},fu=function(t,e,i,c,m,S){var F,Q,_t,kt=8*S-m-1,Bt=(1<<kt)-1,Nt=Bt>>1,$t=23===m?Math.pow(2,-24)-Math.pow(2,-77):0,ie=c?0:S-1,ke=c?1:-1,Le=e<0||0===e&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(Q=isNaN(e)?1:0,F=Bt):(F=Math.floor(Math.log(e)/Math.LN2),e*(_t=Math.pow(2,-F))<1&&(F--,_t*=2),(e+=F+Nt>=1?$t/_t:$t*Math.pow(2,1-Nt))*_t>=2&&(F++,_t/=2),F+Nt>=Bt?(Q=0,F=Bt):F+Nt>=1?(Q=(e*_t-1)*Math.pow(2,m),F+=Nt):(Q=e*Math.pow(2,Nt-1)*Math.pow(2,m),F=0));m>=8;t[i+ie]=255&Q,ie+=ke,Q/=256,m-=8);for(F=F<<m|Q,kt+=m;kt>0;t[i+ie]=255&F,ie+=ke,F/=256,kt-=8);t[i+ie-ke]|=128*Le},tc=Nr;function Nr(t){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(t)?t:new Uint8Array(t||0),this.pos=0,this.type=0,this.length=this.buf.length}Nr.Varint=0,Nr.Fixed64=1,Nr.Bytes=2,Nr.Fixed32=5;var mu=typeof TextDecoder>"u"?null:new TextDecoder("utf8");function Dl(t){return t.type===Nr.Bytes?t.readVarint()+t.pos:t.pos+1}function gu(t,e,i){var c=e<=16383?1:e<=2097151?2:e<=268435455?3:Math.floor(Math.log(e)/(7*Math.LN2));i.realloc(c);for(var m=i.pos-1;m>=t;m--)i.buf[m+c]=i.buf[m]}function Zp(t,e){for(var i=0;i<t.length;i++)e.writeVarint(t[i])}function qp(t,e){for(var i=0;i<t.length;i++)e.writeSVarint(t[i])}function Xp(t,e){for(var i=0;i<t.length;i++)e.writeFloat(t[i])}function Yp(t,e){for(var i=0;i<t.length;i++)e.writeDouble(t[i])}function Kp(t,e){for(var i=0;i<t.length;i++)e.writeBoolean(t[i])}function $p(t,e){for(var i=0;i<t.length;i++)e.writeFixed32(t[i])}function Jp(t,e){for(var i=0;i<t.length;i++)e.writeSFixed32(t[i])}function Qp(t,e){for(var i=0;i<t.length;i++)e.writeFixed64(t[i])}function td(t,e){for(var i=0;i<t.length;i++)e.writeSFixed64(t[i])}function ec(t,e){return(t[e]|t[e+1]<<8|t[e+2]<<16)+16777216*t[e+3]}function rh(t,e,i){t[i]=e,t[i+1]=e>>>8,t[i+2]=e>>>16,t[i+3]=e>>>24}function yu(t,e){return(t[e]|t[e+1]<<8|t[e+2]<<16)+(t[e+3]<<24)}function ed(t,e,i){1===t&&i.readMessage(id,e)}function id(t,e,i){if(3===t){var c=i.readMessage(nd,{}),m=c.width,S=c.height,F=c.left,Q=c.top,_t=c.advance;e.push({id:c.id,bitmap:new pi({width:m+6,height:S+6},c.bitmap),metrics:{width:m,height:S,left:F,top:Q,advance:_t}})}}function nd(t,e,i){1===t?e.id=i.readVarint():2===t?e.bitmap=i.readBytes():3===t?e.width=i.readVarint():4===t?e.height=i.readVarint():5===t?e.left=i.readSVarint():6===t?e.top=i.readSVarint():7===t&&(e.advance=i.readVarint())}function vu(t){for(var e=0,i=0,c=0,m=t;c<m.length;c+=1){var S=m[c];e+=S.w*S.h,i=Math.max(i,S.w)}t.sort(function(Le,Ve){return Ve.h-Le.h});for(var F=[{x:0,y:0,w:Math.max(Math.ceil(Math.sqrt(e/.95)),i),h:1/0}],Q=0,_t=0,kt=0,Bt=t;kt<Bt.length;kt+=1)for(var Nt=Bt[kt],$t=F.length-1;$t>=0;$t--){var ie=F[$t];if(!(Nt.w>ie.w||Nt.h>ie.h)){if(Nt.x=ie.x,Nt.y=ie.y,_t=Math.max(_t,Nt.y+Nt.h),Q=Math.max(Q,Nt.x+Nt.w),Nt.w===ie.w&&Nt.h===ie.h){var ke=F.pop();$t<F.length&&(F[$t]=ke)}else Nt.h===ie.h?(ie.x+=Nt.w,ie.w-=Nt.w):Nt.w===ie.w?(ie.y+=Nt.h,ie.h-=Nt.h):(F.push({x:ie.x+Nt.w,y:ie.y,w:ie.w-Nt.w,h:Nt.h}),ie.y+=Nt.h,ie.h-=Nt.h);break}}return{w:Q,h:_t,fill:e/(Q*_t)||0}}Nr.prototype={destroy:function(){this.buf=null},readFields:function(t,e,i){for(i=i||this.length;this.pos<i;){var c=this.readVarint(),m=c>>3,S=this.pos;this.type=7&c,t(m,e,this),this.pos===S&&this.skip(c)}return e},readMessage:function(t,e){return this.readFields(t,e,this.readVarint()+this.pos)},readFixed32:function(){var t=ec(this.buf,this.pos);return this.pos+=4,t},readSFixed32:function(){var t=yu(this.buf,this.pos);return this.pos+=4,t},readFixed64:function(){var t=ec(this.buf,this.pos)+4294967296*ec(this.buf,this.pos+4);return this.pos+=8,t},readSFixed64:function(){var t=ec(this.buf,this.pos)+4294967296*yu(this.buf,this.pos+4);return this.pos+=8,t},readFloat:function(){var t=du(this.buf,this.pos,!0,23,4);return this.pos+=4,t},readDouble:function(){var t=du(this.buf,this.pos,!0,52,8);return this.pos+=8,t},readVarint:function(t){var e,i,c=this.buf;return e=127&(i=c[this.pos++]),i<128?e:(e|=(127&(i=c[this.pos++]))<<7,i<128?e:(e|=(127&(i=c[this.pos++]))<<14,i<128?e:(e|=(127&(i=c[this.pos++]))<<21,i<128?e:function(m,S,F){var Q,_t,kt=F.buf;if(Q=(112&(_t=kt[F.pos++]))>>4,_t<128||(Q|=(127&(_t=kt[F.pos++]))<<3,_t<128)||(Q|=(127&(_t=kt[F.pos++]))<<10,_t<128)||(Q|=(127&(_t=kt[F.pos++]))<<17,_t<128)||(Q|=(127&(_t=kt[F.pos++]))<<24,_t<128)||(Q|=(1&(_t=kt[F.pos++]))<<31,_t<128))return function oh(t,e,i){return i?4294967296*e+(t>>>0):4294967296*(e>>>0)+(t>>>0)}(m,Q,S);throw new Error("Expected varint not more than 10 bytes")}(e|=(15&(i=c[this.pos]))<<28,t,this))))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var t=this.readVarint();return t%2==1?(t+1)/-2:t/2},readBoolean:function(){return Boolean(this.readVarint())},readString:function(){var t=this.readVarint()+this.pos,e=this.pos;return this.pos=t,t-e>=12&&mu?mu.decode(this.buf.subarray(e,t)):function(i,c,m){for(var S="",F=c;F<m;){var Q,_t,kt,Bt=i[F],Nt=null,$t=Bt>239?4:Bt>223?3:Bt>191?2:1;if(F+$t>m)break;1===$t?Bt<128&&(Nt=Bt):2===$t?128==(192&(Q=i[F+1]))&&(Nt=(31&Bt)<<6|63&Q)<=127&&(Nt=null):3===$t?(_t=i[F+2],128==(192&(Q=i[F+1]))&&128==(192&_t)&&((Nt=(15&Bt)<<12|(63&Q)<<6|63&_t)<=2047||Nt>=55296&&Nt<=57343)&&(Nt=null)):4===$t&&(_t=i[F+2],kt=i[F+3],128==(192&(Q=i[F+1]))&&128==(192&_t)&&128==(192&kt)&&((Nt=(15&Bt)<<18|(63&Q)<<12|(63&_t)<<6|63&kt)<=65535||Nt>=1114112)&&(Nt=null)),null===Nt?(Nt=65533,$t=1):Nt>65535&&(Nt-=65536,S+=String.fromCharCode(Nt>>>10&1023|55296),Nt=56320|1023&Nt),S+=String.fromCharCode(Nt),F+=$t}return S}(this.buf,e,t)},readBytes:function(){var t=this.readVarint()+this.pos,e=this.buf.subarray(this.pos,t);return this.pos=t,e},readPackedVarint:function(t,e){if(this.type!==Nr.Bytes)return t.push(this.readVarint(e));var i=Dl(this);for(t=t||[];this.pos<i;)t.push(this.readVarint(e));return t},readPackedSVarint:function(t){if(this.type!==Nr.Bytes)return t.push(this.readSVarint());var e=Dl(this);for(t=t||[];this.pos<e;)t.push(this.readSVarint());return t},readPackedBoolean:function(t){if(this.type!==Nr.Bytes)return t.push(this.readBoolean());var e=Dl(this);for(t=t||[];this.pos<e;)t.push(this.readBoolean());return t},readPackedFloat:function(t){if(this.type!==Nr.Bytes)return t.push(this.readFloat());var e=Dl(this);for(t=t||[];this.pos<e;)t.push(this.readFloat());return t},readPackedDouble:function(t){if(this.type!==Nr.Bytes)return t.push(this.readDouble());var e=Dl(this);for(t=t||[];this.pos<e;)t.push(this.readDouble());return t},readPackedFixed32:function(t){if(this.type!==Nr.Bytes)return t.push(this.readFixed32());var e=Dl(this);for(t=t||[];this.pos<e;)t.push(this.readFixed32());return t},readPackedSFixed32:function(t){if(this.type!==Nr.Bytes)return t.push(this.readSFixed32());var e=Dl(this);for(t=t||[];this.pos<e;)t.push(this.readSFixed32());return t},readPackedFixed64:function(t){if(this.type!==Nr.Bytes)return t.push(this.readFixed64());var e=Dl(this);for(t=t||[];this.pos<e;)t.push(this.readFixed64());return t},readPackedSFixed64:function(t){if(this.type!==Nr.Bytes)return t.push(this.readSFixed64());var e=Dl(this);for(t=t||[];this.pos<e;)t.push(this.readSFixed64());return t},skip:function(t){var e=7&t;if(e===Nr.Varint)for(;this.buf[this.pos++]>127;);else if(e===Nr.Bytes)this.pos=this.readVarint()+this.pos;else if(e===Nr.Fixed32)this.pos+=4;else{if(e!==Nr.Fixed64)throw new Error("Unimplemented type: "+e);this.pos+=8}},writeTag:function(t,e){this.writeVarint(t<<3|e)},realloc:function(t){for(var e=this.length||16;e<this.pos+t;)e*=2;if(e!==this.length){var i=new Uint8Array(e);i.set(this.buf),this.buf=i,this.length=e}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(t){this.realloc(4),rh(this.buf,t,this.pos),this.pos+=4},writeSFixed32:function(t){this.realloc(4),rh(this.buf,t,this.pos),this.pos+=4},writeFixed64:function(t){this.realloc(8),rh(this.buf,-1&t,this.pos),rh(this.buf,Math.floor(t*(1/4294967296)),this.pos+4),this.pos+=8},writeSFixed64:function(t){this.realloc(8),rh(this.buf,-1&t,this.pos),rh(this.buf,Math.floor(t*(1/4294967296)),this.pos+4),this.pos+=8},writeVarint:function(t){(t=+t||0)>268435455||t<0?function(e,i){var c,m,S,Q;if(e>=0?(c=e%4294967296|0,m=e/4294967296|0):(m=~(-e/4294967296),4294967295^(c=~(-e%4294967296))?c=c+1|0:(c=0,m=m+1|0)),e>=0x10000000000000000||e<-0x10000000000000000)throw new Error("Given varint doesn't fit into 10 bytes");i.realloc(10),S=c,(Q=i).buf[Q.pos++]=127&S|128,S>>>=7,Q.buf[Q.pos++]=127&S|128,S>>>=7,Q.buf[Q.pos++]=127&S|128,S>>>=7,Q.buf[Q.pos++]=127&S|128,Q.buf[Q.pos]=127&(S>>>=7),function(S,F){var Q=(7&S)<<4;F.buf[F.pos++]|=Q|((S>>>=3)?128:0),S&&(F.buf[F.pos++]=127&S|((S>>>=7)?128:0),S&&(F.buf[F.pos++]=127&S|((S>>>=7)?128:0),S&&(F.buf[F.pos++]=127&S|((S>>>=7)?128:0),S&&(F.buf[F.pos++]=127&S|((S>>>=7)?128:0),S&&(F.buf[F.pos++]=127&S)))))}(m,i)}(t,this):(this.realloc(4),this.buf[this.pos++]=127&t|(t>127?128:0),t<=127||(this.buf[this.pos++]=127&(t>>>=7)|(t>127?128:0),t<=127||(this.buf[this.pos++]=127&(t>>>=7)|(t>127?128:0),t<=127||(this.buf[this.pos++]=t>>>7&127))))},writeSVarint:function(t){this.writeVarint(t<0?2*-t-1:2*t)},writeBoolean:function(t){this.writeVarint(Boolean(t))},writeString:function(t){t=String(t),this.realloc(4*t.length),this.pos++;var e=this.pos;this.pos=function(c,m,S){for(var F,Q,_t=0;_t<m.length;_t++){if((F=m.charCodeAt(_t))>55295&&F<57344){if(!Q){F>56319||_t+1===m.length?(c[S++]=239,c[S++]=191,c[S++]=189):Q=F;continue}if(F<56320){c[S++]=239,c[S++]=191,c[S++]=189,Q=F;continue}F=Q-55296<<10|F-56320|65536,Q=null}else Q&&(c[S++]=239,c[S++]=191,c[S++]=189,Q=null);F<128?c[S++]=F:(F<2048?c[S++]=F>>6|192:(F<65536?c[S++]=F>>12|224:(c[S++]=F>>18|240,c[S++]=F>>12&63|128),c[S++]=F>>6&63|128),c[S++]=63&F|128)}return S}(this.buf,t,this.pos);var i=this.pos-e;i>=128&&gu(e,i,this),this.pos=e-1,this.writeVarint(i),this.pos+=i},writeFloat:function(t){this.realloc(4),fu(this.buf,t,this.pos,!0,23,4),this.pos+=4},writeDouble:function(t){this.realloc(8),fu(this.buf,t,this.pos,!0,52,8),this.pos+=8},writeBytes:function(t){var e=t.length;this.writeVarint(e),this.realloc(e);for(var i=0;i<e;i++)this.buf[this.pos++]=t[i]},writeRawMessage:function(t,e){this.pos++;var i=this.pos;t(e,this);var c=this.pos-i;c>=128&&gu(i,c,this),this.pos=i-1,this.writeVarint(c),this.pos+=c},writeMessage:function(t,e,i){this.writeTag(t,Nr.Bytes),this.writeRawMessage(e,i)},writePackedVarint:function(t,e){e.length&&this.writeMessage(t,Zp,e)},writePackedSVarint:function(t,e){e.length&&this.writeMessage(t,qp,e)},writePackedBoolean:function(t,e){e.length&&this.writeMessage(t,Kp,e)},writePackedFloat:function(t,e){e.length&&this.writeMessage(t,Xp,e)},writePackedDouble:function(t,e){e.length&&this.writeMessage(t,Yp,e)},writePackedFixed32:function(t,e){e.length&&this.writeMessage(t,$p,e)},writePackedSFixed32:function(t,e){e.length&&this.writeMessage(t,Jp,e)},writePackedFixed64:function(t,e){e.length&&this.writeMessage(t,Qp,e)},writePackedSFixed64:function(t,e){e.length&&this.writeMessage(t,td,e)},writeBytesField:function(t,e){this.writeTag(t,Nr.Bytes),this.writeBytes(e)},writeFixed32Field:function(t,e){this.writeTag(t,Nr.Fixed32),this.writeFixed32(e)},writeSFixed32Field:function(t,e){this.writeTag(t,Nr.Fixed32),this.writeSFixed32(e)},writeFixed64Field:function(t,e){this.writeTag(t,Nr.Fixed64),this.writeFixed64(e)},writeSFixed64Field:function(t,e){this.writeTag(t,Nr.Fixed64),this.writeSFixed64(e)},writeVarintField:function(t,e){this.writeTag(t,Nr.Varint),this.writeVarint(e)},writeSVarintField:function(t,e){this.writeTag(t,Nr.Varint),this.writeSVarint(e)},writeStringField:function(t,e){this.writeTag(t,Nr.Bytes),this.writeString(e)},writeFloatField:function(t,e){this.writeTag(t,Nr.Fixed32),this.writeFloat(e)},writeDoubleField:function(t,e){this.writeTag(t,Nr.Fixed64),this.writeDouble(e)},writeBooleanField:function(t,e){this.writeVarintField(t,Boolean(e))}};var ic=function(t,e){var i=e.pixelRatio,c=e.version,m=e.stretchX,S=e.stretchY,F=e.content;this.paddedRect=t,this.pixelRatio=i,this.stretchX=m,this.stretchY=S,this.content=F,this.version=c},Dh={tl:{configurable:!0},br:{configurable:!0},tlbr:{configurable:!0},displaySize:{configurable:!0}};Dh.tl.get=function(){return[this.paddedRect.x+1,this.paddedRect.y+1]},Dh.br.get=function(){return[this.paddedRect.x+this.paddedRect.w-1,this.paddedRect.y+this.paddedRect.h-1]},Dh.tlbr.get=function(){return this.tl.concat(this.br)},Dh.displaySize.get=function(){return[(this.paddedRect.w-2)/this.pixelRatio,(this.paddedRect.h-2)/this.pixelRatio]},Object.defineProperties(ic.prototype,Dh);var zh=function(t,e){var i={},c={};this.haveRenderCallbacks=[];var m=[];this.addImages(t,i,m),this.addImages(e,c,m);var S=vu(m),F=new Ei({width:S.w||1,height:S.h||1});for(var Q in t){var _t=t[Q],kt=i[Q].paddedRect;Ei.copy(_t.data,F,{x:0,y:0},{x:kt.x+1,y:kt.y+1},_t.data)}for(var Bt in e){var Nt=e[Bt],$t=c[Bt].paddedRect,ie=$t.x+1,ke=$t.y+1,Le=Nt.data.width,Ve=Nt.data.height;Ei.copy(Nt.data,F,{x:0,y:0},{x:ie,y:ke},Nt.data),Ei.copy(Nt.data,F,{x:0,y:Ve-1},{x:ie,y:ke-1},{width:Le,height:1}),Ei.copy(Nt.data,F,{x:0,y:0},{x:ie,y:ke+Ve},{width:Le,height:1}),Ei.copy(Nt.data,F,{x:Le-1,y:0},{x:ie-1,y:ke},{width:1,height:Ve}),Ei.copy(Nt.data,F,{x:0,y:0},{x:ie+Le,y:ke},{width:1,height:Ve})}this.image=F,this.iconPositions=i,this.patternPositions=c};zh.prototype.addImages=function(t,e,i){for(var c in t){var m=t[c],S={x:0,y:0,w:m.data.width+2,h:m.data.height+2};i.push(S),e[c]=new ic(S,m),m.hasRenderCallback&&this.haveRenderCallbacks.push(c)}},zh.prototype.patchUpdatedImages=function(t,e){for(var i in t.dispatchRenderCallbacks(this.haveRenderCallbacks),t.updatedImages)this.patchUpdatedImage(this.iconPositions[i],t.getImage(i),e),this.patchUpdatedImage(this.patternPositions[i],t.getImage(i),e)},zh.prototype.patchUpdatedImage=function(t,e,i){if(t&&e&&t.version!==e.version){t.version=e.version;var c=t.tl;i.update(e.data,void 0,{x:c[0],y:c[1]})}},Hi("ImagePosition",ic),Hi("ImageAtlas",zh);var Za={horizontal:1,vertical:2,horizontalOnly:3},sh=function(){this.scale=1,this.fontStack="",this.imageName=null};sh.forText=function(t,e){var i=new sh;return i.scale=t||1,i.fontStack=e,i},sh.forImage=function(t){var e=new sh;return e.imageName=t,e};var _a=function(){this.text="",this.sectionIndex=[],this.sections=[],this.imageSectionID=null};function nc(t,e,i,c,m,S,F,Q,_t,kt,Bt,Nt,$t,ie,ke,Le){var Ve,ze=_a.fromFeature(t,m);Nt===Za.vertical&&ze.verticalizePunctuation();var Qe=fs.processBidirectionalText,li=fs.processStyledBidirectionalText;if(Qe&&1===ze.sections.length){Ve=[];for(var gi=0,_i=Qe(ze.toString(),zc(ze,kt,S,e,c,ie,ke));gi<_i.length;gi+=1){var Ai=_i[gi],qi=new _a;qi.text=Ai,qi.sections=ze.sections;for(var on=0;on<Ai.length;on++)qi.sectionIndex.push(0);Ve.push(qi)}}else if(li){Ve=[];for(var In=0,dn=li(ze.text,ze.sectionIndex,zc(ze,kt,S,e,c,ie,ke));In<dn.length;In+=1){var Dn=dn[In],mn=new _a;mn.text=Dn[0],mn.sectionIndex=Dn[1],mn.sections=ze.sections,Ve.push(mn)}}else Ve=function(Tn,zo){for(var xo=[],Ko=Tn.text,Bn=0,nr=0,Xr=zo;nr<Xr.length;nr+=1){var hs=Xr[nr];xo.push(Tn.substring(Bn,hs)),Bn=hs}return Bn<Ko.length&&xo.push(Tn.substring(Bn,Ko.length)),xo}(ze,zc(ze,kt,S,e,c,ie,ke));var Po=[],eo={positionedLines:Po,text:ze.toString(),top:Bt[1],bottom:Bt[1],left:Bt[0],right:Bt[0],writingMode:Nt,iconsInText:!1,verticalizable:!1};return function(Tn,zo,xo,Ko,Bn,nr,Xr,hs,rs,Yr,cs,Ns){for(var Us=0,xa=-17,Ys=0,ba=0,gs="right"===hs?1:"left"===hs?0:.5,Ks=0,Fo=0,Er=Bn;Fo<Er.length;Fo+=1){var br=Er[Fo];br.trim();var $o=br.getMaxScale(),Ma=24*($o-1),fa={positionedGlyphs:[],lineOffset:0};Tn.positionedLines[Ks]=fa;var Vr=fa.positionedGlyphs,As=0;if(br.length()){for(var ma=0;ma<br.length();ma++){var or=br.getSection(ma),Cl=br.getSectionIndex(ma),qa=br.getCharCode(ma),Al=0,ys=null,Pl=null,cl=null,fh=24,Jl=!(rs===Za.horizontal||!cs&&!Gs(qa)||cs&&(oc[qa]||(Rl=qa,Ni.Arabic(Rl)||Ni["Arabic Supplement"](Rl)||Ni["Arabic Extended-A"](Rl)||Ni["Arabic Presentation Forms-A"](Rl)||Ni["Arabic Presentation Forms-B"](Rl))));if(or.imageName){var mh=Ko[or.imageName];if(!mh)continue;cl=or.imageName,Tn.iconsInText=Tn.iconsInText||!0,Pl=mh.paddedRect;var Bl=mh.displaySize;or.scale=24*or.scale/Ns,Al=Ma+(24-Bl[1]*or.scale),fh=(ys={width:Bl[0],height:Bl[1],left:1,top:-3,advance:Jl?Bl[1]:Bl[0]}).advance;var gh=Jl?Bl[0]*or.scale-24*$o:Bl[1]*or.scale-24*$o;gh>0&&gh>As&&(As=gh)}else{var dc=xo[or.fontStack],yh=dc&&dc[qa];if(yh&&yh.rect)Pl=yh.rect,ys=yh.metrics;else{var Rh=zo[or.fontStack],fc=Rh&&Rh[qa];if(!fc)continue;ys=fc.metrics}Al=24*($o-or.scale)}Jl?(Tn.verticalizable=!0,Vr.push({glyph:qa,imageName:cl,x:Us,y:xa+Al,vertical:Jl,scale:or.scale,fontStack:or.fontStack,sectionIndex:Cl,metrics:ys,rect:Pl}),Us+=fh*or.scale+Yr):(Vr.push({glyph:qa,imageName:cl,x:Us,y:xa+Al,vertical:Jl,scale:or.scale,fontStack:or.fontStack,sectionIndex:Cl,metrics:ys,rect:Pl}),Us+=ys.advance*or.scale+Yr)}0!==Vr.length&&(Ys=Math.max(Us-Yr,Ys),rd(Vr,0,Vr.length-1,gs,As)),Us=0;var mc=nr*$o+As;fa.lineOffset=Math.max(As,Ma),xa+=mc,ba=Math.max(mc,ba),++Ks}else xa+=nr,++Ks}var Rl,jh=xa- -17,vh=Oc(Xr),Vl=vh.horizontalAlign,_h=vh.verticalAlign;(function(gc,yc,Fh,Nh,vc,Uh,Vh,Hh,_c){var xh,xc=(yc-Fh)*vc;xh=Uh!==Vh?-Hh*Nh- -17:(-Nh*_c+.5)*Vh;for(var bh=0,Gh=gc;bh<Gh.length;bh+=1)for(var Ql=0,Wh=Gh[bh].positionedGlyphs;Ql<Wh.length;Ql+=1){var wh=Wh[Ql];wh.x+=xc,wh.y+=xh}})(Tn.positionedLines,gs,Vl,_h,Ys,ba,nr,jh,Bn.length),Tn.top+=-_h*jh,Tn.bottom=Tn.top+jh,Tn.left+=-Vl*Ys,Tn.right=Tn.left+Ys}(eo,e,i,c,Ve,F,Q,_t,Nt,kt,$t,Le),!function(Tn){for(var zo=0,xo=Tn;zo<xo.length;zo+=1)if(0!==xo[zo].positionedGlyphs.length)return!1;return!0}(Po)&&eo}_a.fromFeature=function(t,e){for(var i=new _a,c=0;c<t.sections.length;c++){var m=t.sections[c];m.image?i.addImageSection(m):i.addTextSection(m,e)}return i},_a.prototype.length=function(){return this.text.length},_a.prototype.getSection=function(t){return this.sections[this.sectionIndex[t]]},_a.prototype.getSectionIndex=function(t){return this.sectionIndex[t]},_a.prototype.getCharCode=function(t){return this.text.charCodeAt(t)},_a.prototype.verticalizePunctuation=function(){this.text=function(t){for(var e="",i=0;i<t.length;i++){var c=t.charCodeAt(i+1)||null,m=t.charCodeAt(i-1)||null;e+=c&&Ba(c)&&!Ih[t[i+1]]||m&&Ba(m)&&!Ih[t[i-1]]||!Ih[t[i]]?t[i]:Ih[t[i]]}return e}(this.text)},_a.prototype.trim=function(){for(var t=0,e=0;e<this.text.length&&oc[this.text.charCodeAt(e)];e++)t++;for(var i=this.text.length,c=this.text.length-1;c>=0&&c>=t&&oc[this.text.charCodeAt(c)];c--)i--;this.text=this.text.substring(t,i),this.sectionIndex=this.sectionIndex.slice(t,i)},_a.prototype.substring=function(t,e){var i=new _a;return i.text=this.text.substring(t,e),i.sectionIndex=this.sectionIndex.slice(t,e),i.sections=this.sections,i},_a.prototype.toString=function(){return this.text},_a.prototype.getMaxScale=function(){var t=this;return this.sectionIndex.reduce(function(e,i){return Math.max(e,t.sections[i].scale)},0)},_a.prototype.addTextSection=function(t,e){this.text+=t.text,this.sections.push(sh.forText(t.scale,t.fontStack||e));for(var i=this.sections.length-1,c=0;c<t.text.length;++c)this.sectionIndex.push(i)},_a.prototype.addImageSection=function(t){var e=t.image?t.image.name:"";if(0!==e.length){var i=this.getNextImageSectionCharCode();i?(this.text+=String.fromCharCode(i),this.sections.push(sh.forImage(e)),this.sectionIndex.push(this.sections.length-1)):ht("Reached maximum number of images 6401")}else ht("Can't add FormattedSection with an empty image.")},_a.prototype.getNextImageSectionCharCode=function(){return this.imageSectionID?this.imageSectionID>=63743?null:++this.imageSectionID:(this.imageSectionID=57344,this.imageSectionID)};var oc={9:!0,10:!0,11:!0,12:!0,13:!0,32:!0},Ua={};function _u(t,e,i,c,m,S){if(e.imageName){var F=c[e.imageName];return F?F.displaySize[0]*e.scale*24/S+m:0}var Q=i[e.fontStack],_t=Q&&Q[t];return _t?_t.metrics.advance*e.scale+m:0}function xu(t,e,i,c){var m=Math.pow(t-e,2);return c?t<e?m/2:2*m:m+Math.abs(i)*i}function od(t,e,i){var c=0;return 10===t&&(c-=1e4),i&&(c+=150),40!==t&&65288!==t||(c+=50),41!==e&&65289!==e||(c+=50),c}function bu(t,e,i,c,m,S){for(var F=null,Q=xu(e,i,m,S),_t=0,kt=c;_t<kt.length;_t+=1){var Bt=kt[_t],Nt=xu(e-Bt.x,i,m,S)+Bt.badness;Nt<=Q&&(F=Bt,Q=Nt)}return{index:t,x:e,priorBreak:F,badness:Q}}function zc(t,e,i,c,m,S,F){if("point"!==S)return[];if(!t)return[];for(var Q,_t=[],kt=function(Ve,ze,Qe,li,gi,_i){for(var Ai=0,qi=0;qi<Ve.length();qi++){var on=Ve.getSection(qi);Ai+=_u(Ve.getCharCode(qi),on,li,gi,ze,_i)}return Ai/Math.max(1,Math.ceil(Ai/Qe))}(t,e,i,c,m,F),Bt=t.text.indexOf("\u200b")>=0,Nt=0,$t=0;$t<t.length();$t++){var ie=t.getSection($t),ke=t.getCharCode($t);if(oc[ke]||(Nt+=_u(ke,ie,c,m,e,F)),$t<t.length()-1){var Le=!((Q=ke)<11904||!(Ni["Bopomofo Extended"](Q)||Ni.Bopomofo(Q)||Ni["CJK Compatibility Forms"](Q)||Ni["CJK Compatibility Ideographs"](Q)||Ni["CJK Compatibility"](Q)||Ni["CJK Radicals Supplement"](Q)||Ni["CJK Strokes"](Q)||Ni["CJK Symbols and Punctuation"](Q)||Ni["CJK Unified Ideographs Extension A"](Q)||Ni["CJK Unified Ideographs"](Q)||Ni["Enclosed CJK Letters and Months"](Q)||Ni["Halfwidth and Fullwidth Forms"](Q)||Ni.Hiragana(Q)||Ni["Ideographic Description Characters"](Q)||Ni["Kangxi Radicals"](Q)||Ni["Katakana Phonetic Extensions"](Q)||Ni.Katakana(Q)||Ni["Vertical Forms"](Q)||Ni["Yi Radicals"](Q)||Ni["Yi Syllables"](Q)));(Ua[ke]||Le||ie.imageName)&&_t.push(bu($t+1,Nt,kt,_t,od(ke,t.getCharCode($t+1),Le&&Bt),!1))}}return function Ve(ze){return ze?Ve(ze.priorBreak).concat(ze.index):[]}(bu(t.length(),Nt,kt,_t,0,!0))}function Oc(t){var e=.5,i=.5;switch(t){case"right":case"top-right":case"bottom-right":e=1;break;case"left":case"top-left":case"bottom-left":e=0}switch(t){case"bottom":case"bottom-right":case"bottom-left":i=1;break;case"top":case"top-right":case"top-left":i=0}return{horizontalAlign:e,verticalAlign:i}}function rd(t,e,i,c,m){if(c||m)for(var S=t[i],F=(t[i].x+S.metrics.advance*S.scale)*c,Q=e;Q<=i;Q++)t[Q].x-=F,t[Q].y+=m}function wu(t,e,i,c,m,S){var F,Q=t.image;if(Q.content){var _t=Q.content,kt=Q.pixelRatio||1;F=[_t[0]/kt,_t[1]/kt,Q.displaySize[0]-_t[2]/kt,Q.displaySize[1]-_t[3]/kt]}var Bt,Nt,$t,ie,ke=e.left*S,Le=e.right*S;"width"===i||"both"===i?(ie=m[0]+ke-c[3],Nt=m[0]+Le+c[1]):Nt=(ie=m[0]+(ke+Le-Q.displaySize[0])/2)+Q.displaySize[0];var Ve=e.top*S,ze=e.bottom*S;return"height"===i||"both"===i?(Bt=m[1]+Ve-c[0],$t=m[1]+ze+c[2]):$t=(Bt=m[1]+(Ve+ze-Q.displaySize[1])/2)+Q.displaySize[1],{image:Q,top:Bt,right:Nt,bottom:$t,left:ie,collisionPadding:F}}Ua[10]=!0,Ua[32]=!0,Ua[38]=!0,Ua[40]=!0,Ua[41]=!0,Ua[43]=!0,Ua[45]=!0,Ua[47]=!0,Ua[173]=!0,Ua[183]=!0,Ua[8203]=!0,Ua[8208]=!0,Ua[8211]=!0,Ua[8231]=!0;var ah=function(t){function e(i,c,m,S){t.call(this,i,c),this.angle=m,void 0!==S&&(this.segment=S)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.clone=function(){return new e(this.x,this.y,this.angle,this.segment)},e}(v);function Bc(t,e){var i=e.expression;if("constant"===i.kind)return{kind:"constant",layoutSize:i.evaluate(new To(t+1))};if("source"===i.kind)return{kind:"source"};for(var c=i.zoomStops,m=i.interpolationType,S=0;S<c.length&&c[S]<=t;)S++;for(var F=S=Math.max(0,S-1);F<c.length&&c[F]<t+1;)F++;F=Math.min(c.length-1,F);var Q=c[S],_t=c[F];return"composite"===i.kind?{kind:"composite",minZoom:Q,maxZoom:_t,interpolationType:m}:{kind:"camera",minZoom:Q,maxZoom:_t,minSize:i.evaluate(new To(Q)),maxSize:i.evaluate(new To(_t)),interpolationType:m}}function Su(t,e,i){var c=e.uSize,m=i.lowerSize;return"source"===t.kind?m/128:"composite"===t.kind?cn(m/128,i.upperSize/128,e.uSizeT):c}function Tu(t,e){var i=0,c=0;if("constant"===t.kind)c=t.layoutSize;else if("source"!==t.kind){var m=t.interpolationType,S=m?O(Ho.interpolationFactor(m,e,t.minZoom,t.maxZoom),0,1):0;"camera"===t.kind?c=cn(t.minSize,t.maxSize,S):i=S}return{uSizeT:i,uSize:c}}Hi("Anchor",ah);var sd=Object.freeze({__proto__:null,getSizeData:Bc,evaluateSizeForFeature:Su,evaluateSizeForZoom:Tu,SIZE_PACK_FACTOR:128});function Cu(t,e,i,c,m){if(void 0===e.segment)return!0;for(var S=e,F=e.segment+1,Q=0;Q>-i/2;){if(--F<0)return!1;Q-=t[F].dist(S),S=t[F]}Q+=t[F].dist(t[F+1]),F++;for(var _t=[],kt=0;Q<i/2;){var Bt=t[F],Nt=t[F+1];if(!Nt)return!1;var $t=t[F-1].angleTo(Bt)-Bt.angleTo(Nt);for($t=Math.abs(($t+3*Math.PI)%(2*Math.PI)-Math.PI),_t.push({distance:Q,angleDelta:$t}),kt+=$t;Q-_t[0].distance>c;)kt-=_t.shift().angleDelta;if(kt>m)return!1;F++,Q+=Bt.dist(Nt)}return!0}function Au(t){for(var e=0,i=0;i<t.length-1;i++)e+=t[i].dist(t[i+1]);return e}function Pu(t,e,i){return t?.6*e*i:0}function ku(t,e){return Math.max(t?t.right-t.left:0,e?e.right-e.left:0)}function ad(t,e,i,c,m,S){for(var F=Pu(i,m,S),Q=ku(i,c)*S,_t=0,kt=Au(t)/2,Bt=0;Bt<t.length-1;Bt++){var Nt=t[Bt],$t=t[Bt+1],ie=Nt.dist($t);if(_t+ie>kt){var ke=(kt-_t)/ie,Le=cn(Nt.x,$t.x,ke),Ve=cn(Nt.y,$t.y,ke),ze=new ah(Le,Ve,$t.angleTo(Nt),Bt);return ze._round(),!F||Cu(t,ze,Q,F,e)?ze:void 0}_t+=ie}}function ld(t,e,i,c,m,S,F,Q,_t){var kt=Pu(c,S,F),Bt=ku(c,m),Nt=Bt*F,$t=0===t[0].x||t[0].x===_t||0===t[0].y||t[0].y===_t;return e-Nt<e/4&&(e=Nt+e/4),function ie(ke,Le,Ve,ze,Qe,li,gi,_i,Ai){for(var qi=li/2,on=Au(ke),In=0,dn=Le-Ve,Dn=[],mn=0;mn<ke.length-1;mn++){for(var Po=ke[mn],eo=ke[mn+1],Tn=Po.dist(eo),zo=eo.angleTo(Po);dn+Ve<In+Tn;){var xo=((dn+=Ve)-In)/Tn,Ko=cn(Po.x,eo.x,xo),Bn=cn(Po.y,eo.y,xo);if(Ko>=0&&Ko<Ai&&Bn>=0&&Bn<Ai&&dn-qi>=0&&dn+qi<=on){var nr=new ah(Ko,Bn,zo,mn);nr._round(),ze&&!Cu(ke,nr,li,ze,Qe)||Dn.push(nr)}}In+=Tn}return _i||Dn.length||gi||(Dn=ie(ke,In/2,Ve,ze,Qe,li,gi,!0,Ai)),Dn}(t,$t?e/2*Q%e:(Bt/2+2*S)*F*Q%e,e,kt,i,Nt,$t,!1,_t)}function Eu(t,e,i,c,m){for(var S=[],F=0;F<t.length;F++)for(var Q=t[F],_t=void 0,kt=0;kt<Q.length-1;kt++){var Bt=Q[kt],Nt=Q[kt+1];Bt.x<e&&Nt.x<e||(Bt.x<e?Bt=new v(e,Bt.y+(e-Bt.x)/(Nt.x-Bt.x)*(Nt.y-Bt.y))._round():Nt.x<e&&(Nt=new v(e,Bt.y+(e-Bt.x)/(Nt.x-Bt.x)*(Nt.y-Bt.y))._round()),Bt.y<i&&Nt.y<i||(Bt.y<i?Bt=new v(Bt.x+(i-Bt.y)/(Nt.y-Bt.y)*(Nt.x-Bt.x),i)._round():Nt.y<i&&(Nt=new v(Bt.x+(i-Bt.y)/(Nt.y-Bt.y)*(Nt.x-Bt.x),i)._round()),Bt.x>=c&&Nt.x>=c||(Bt.x>=c?Bt=new v(c,Bt.y+(c-Bt.x)/(Nt.x-Bt.x)*(Nt.y-Bt.y))._round():Nt.x>=c&&(Nt=new v(c,Bt.y+(c-Bt.x)/(Nt.x-Bt.x)*(Nt.y-Bt.y))._round()),Bt.y>=m&&Nt.y>=m||(Bt.y>=m?Bt=new v(Bt.x+(m-Bt.y)/(Nt.y-Bt.y)*(Nt.x-Bt.x),m)._round():Nt.y>=m&&(Nt=new v(Bt.x+(m-Bt.y)/(Nt.y-Bt.y)*(Nt.x-Bt.x),m)._round()),_t&&Bt.equals(_t[_t.length-1])||S.push(_t=[Bt]),_t.push(Nt)))))}return S}function Mu(t,e,i,c){var m=[],S=t.image,F=S.pixelRatio,Q=S.paddedRect.w-2,_t=S.paddedRect.h-2,kt=t.right-t.left,Bt=t.bottom-t.top,Nt=S.stretchX||[[0,Q]],$t=S.stretchY||[[0,_t]],ie=function(Ko,Bn){return Ko+Bn[1]-Bn[0]},ke=Nt.reduce(ie,0),Le=$t.reduce(ie,0),Ve=Q-ke,ze=_t-Le,Qe=0,li=ke,gi=0,_i=Le,Ai=0,qi=Ve,on=0,In=ze;if(S.content&&c){var dn=S.content;Qe=rc(Nt,0,dn[0]),gi=rc($t,0,dn[1]),li=rc(Nt,dn[0],dn[2]),_i=rc($t,dn[1],dn[3]),Ai=dn[0]-Qe,on=dn[1]-gi,qi=dn[2]-dn[0]-li,In=dn[3]-dn[1]-_i}var Dn=function(Ko,Bn,nr,Xr){var hs=sc(Ko.stretch-Qe,li,kt,t.left),rs=ac(Ko.fixed-Ai,qi,Ko.stretch,ke),Yr=sc(Bn.stretch-gi,_i,Bt,t.top),cs=ac(Bn.fixed-on,In,Bn.stretch,Le),Ns=sc(nr.stretch-Qe,li,kt,t.left),Us=ac(nr.fixed-Ai,qi,nr.stretch,ke),xa=sc(Xr.stretch-gi,_i,Bt,t.top),Ys=ac(Xr.fixed-on,In,Xr.stretch,Le),ba=new v(hs,Yr),gs=new v(Ns,Yr),Ks=new v(Ns,xa),Fo=new v(hs,xa),Er=new v(rs/F,cs/F),br=new v(Us/F,Ys/F),$o=e*Math.PI/180;if($o){var Ma=Math.sin($o),fa=Math.cos($o),Vr=[fa,-Ma,Ma,fa];ba._matMult(Vr),gs._matMult(Vr),Fo._matMult(Vr),Ks._matMult(Vr)}var As=Ko.stretch+Ko.fixed,ma=Bn.stretch+Bn.fixed;return{tl:ba,tr:gs,bl:Fo,br:Ks,tex:{x:S.paddedRect.x+1+As,y:S.paddedRect.y+1+ma,w:nr.stretch+nr.fixed-As,h:Xr.stretch+Xr.fixed-ma},writingMode:void 0,glyphOffset:[0,0],sectionIndex:0,pixelOffsetTL:Er,pixelOffsetBR:br,minFontScaleX:qi/F/kt,minFontScaleY:In/F/Bt,isSDF:i}};if(c&&(S.stretchX||S.stretchY))for(var mn=Lu(Nt,Ve,ke),Po=Lu($t,ze,Le),eo=0;eo<mn.length-1;eo++)for(var Tn=mn[eo],zo=mn[eo+1],xo=0;xo<Po.length-1;xo++)m.push(Dn(Tn,Po[xo],zo,Po[xo+1]));else m.push(Dn({fixed:0,stretch:-1},{fixed:0,stretch:-1},{fixed:0,stretch:Q+1},{fixed:0,stretch:_t+1}));return m}function rc(t,e,i){for(var c=0,m=0,S=t;m<S.length;m+=1){var F=S[m];c+=Math.max(e,Math.min(i,F[1]))-Math.max(e,Math.min(i,F[0]))}return c}function Lu(t,e,i){for(var c=[{fixed:-1,stretch:0}],m=0,S=t;m<S.length;m+=1){var F=S[m],Q=F[0],_t=F[1],kt=c[c.length-1];c.push({fixed:Q-kt.stretch,stretch:kt.stretch}),c.push({fixed:Q-kt.stretch,stretch:kt.stretch+(_t-Q)})}return c.push({fixed:e+1,stretch:i}),c}function sc(t,e,i,c){return t/e*i+c}function ac(t,e,i,c){return t-e*i/c}var lc=function(t,e,i,c,m,S,F,Q,_t,kt){if(this.boxStartIndex=t.length,_t){var Bt=S.top,Nt=S.bottom,$t=S.collisionPadding;$t&&(Bt-=$t[1],Nt+=$t[3]);var ie=Nt-Bt;ie>0&&(ie=Math.max(10,ie),this.circleDiameter=ie)}else{var ke=S.top*F-Q,Le=S.bottom*F+Q,Ve=S.left*F-Q,ze=S.right*F+Q,Qe=S.collisionPadding;if(Qe&&(Ve-=Qe[0]*F,ke-=Qe[1]*F,ze+=Qe[2]*F,Le+=Qe[3]*F),kt){var li=new v(Ve,ke),gi=new v(ze,ke),_i=new v(Ve,Le),Ai=new v(ze,Le),qi=kt*Math.PI/180;li._rotate(qi),gi._rotate(qi),_i._rotate(qi),Ai._rotate(qi),Ve=Math.min(li.x,gi.x,_i.x,Ai.x),ze=Math.max(li.x,gi.x,_i.x,Ai.x),ke=Math.min(li.y,gi.y,_i.y,Ai.y),Le=Math.max(li.y,gi.y,_i.y,Ai.y)}t.emplaceBack(e.x,e.y,Ve,ke,ze,Le,i,c,m)}this.boxEndIndex=t.length},lh=function(t,e){if(void 0===t&&(t=[]),void 0===e&&(e=hd),this.data=t,this.length=this.data.length,this.compare=e,this.length>0)for(var i=(this.length>>1)-1;i>=0;i--)this._down(i)};function hd(t,e){return t<e?-1:t>e?1:0}function cd(t,e,i){void 0===e&&(e=1),void 0===i&&(i=!1);for(var c=1/0,m=1/0,S=-1/0,F=-1/0,Q=t[0],_t=0;_t<Q.length;_t++){var kt=Q[_t];(!_t||kt.x<c)&&(c=kt.x),(!_t||kt.y<m)&&(m=kt.y),(!_t||kt.x>S)&&(S=kt.x),(!_t||kt.y>F)&&(F=kt.y)}var Bt=Math.min(S-c,F-m),Nt=Bt/2,$t=new lh([],ud);if(0===Bt)return new v(c,m);for(var ie=c;ie<S;ie+=Bt)for(var ke=m;ke<F;ke+=Bt)$t.push(new hh(ie+Nt,ke+Nt,Nt,t));for(var Le=function(Qe){for(var li=0,gi=0,_i=0,Ai=Qe[0],qi=0,on=Ai.length,In=on-1;qi<on;In=qi++){var dn=Ai[qi],Dn=Ai[In],mn=dn.x*Dn.y-Dn.x*dn.y;gi+=(dn.x+Dn.x)*mn,_i+=(dn.y+Dn.y)*mn,li+=3*mn}return new hh(gi/li,_i/li,0,Qe)}(t),Ve=$t.length;$t.length;){var ze=$t.pop();(ze.d>Le.d||!Le.d)&&(Le=ze,i&&console.log("found best %d after %d probes",Math.round(1e4*ze.d)/1e4,Ve)),ze.max-Le.d<=e||($t.push(new hh(ze.p.x-(Nt=ze.h/2),ze.p.y-Nt,Nt,t)),$t.push(new hh(ze.p.x+Nt,ze.p.y-Nt,Nt,t)),$t.push(new hh(ze.p.x-Nt,ze.p.y+Nt,Nt,t)),$t.push(new hh(ze.p.x+Nt,ze.p.y+Nt,Nt,t)),Ve+=4)}return i&&(console.log("num probes: "+Ve),console.log("best distance: "+Le.d)),Le.p}function ud(t,e){return e.max-t.max}function hh(t,e,i,c){this.p=new v(t,e),this.h=i,this.d=function(m,S){for(var F=!1,Q=1/0,_t=0;_t<S.length;_t++)for(var kt=S[_t],Bt=0,Nt=kt.length,$t=Nt-1;Bt<Nt;$t=Bt++){var ie=kt[Bt],ke=kt[$t];ie.y>m.y!=ke.y>m.y&&m.x<(ke.x-ie.x)*(m.y-ie.y)/(ke.y-ie.y)+ie.x&&(F=!F),Q=Math.min(Q,ml(m,ie,ke))}return(F?1:-1)*Math.sqrt(Q)}(this.p,c),this.max=this.d+this.h*Math.SQRT2}lh.prototype.push=function(t){this.data.push(t),this.length++,this._up(this.length-1)},lh.prototype.pop=function(){if(0!==this.length){var t=this.data[0],e=this.data.pop();return this.length--,this.length>0&&(this.data[0]=e,this._down(0)),t}},lh.prototype.peek=function(){return this.data[0]},lh.prototype._up=function(t){for(var e=this.data,i=this.compare,c=e[t];t>0;){var m=t-1>>1,S=e[m];if(i(c,S)>=0)break;e[t]=S,t=m}e[t]=c},lh.prototype._down=function(t){for(var e=this.data,i=this.compare,c=this.length>>1,m=e[t];t<c;){var S=1+(t<<1),F=e[S],Q=S+1;if(Q<this.length&&i(e[Q],F)<0&&(S=Q,F=e[Q]),i(F,m)>=0)break;e[t]=F,t=S}e[t]=m};var Rc=Number.POSITIVE_INFINITY;function Iu(t,e){return e[1]!==Rc?function(i,c,m){var S=0,F=0;switch(c=Math.abs(c),m=Math.abs(m),i){case"top-right":case"top-left":case"top":F=m-7;break;case"bottom-right":case"bottom-left":case"bottom":F=7-m}switch(i){case"top-right":case"bottom-right":case"right":S=-c;break;case"top-left":case"bottom-left":case"left":S=c}return[S,F]}(t,e[0],e[1]):function(i,c){var m=0,S=0;c<0&&(c=0);var F=c/Math.sqrt(2);switch(i){case"top-right":case"top-left":S=F-7;break;case"bottom-right":case"bottom-left":S=7-F;break;case"bottom":S=7-c;break;case"top":S=c-7}switch(i){case"top-right":case"bottom-right":m=-F;break;case"top-left":case"bottom-left":m=F;break;case"left":m=c;break;case"right":m=-c}return[m,S]}(t,e[0])}function jc(t){switch(t){case"right":case"top-right":case"bottom-right":return"right";case"left":case"top-left":case"bottom-left":return"left"}return"center"}function Du(t,e,i,c,m,S,F,Q,_t,kt,Bt,Nt,$t,ie,ke){var Le=function(gi,_i,Ai,qi,on,In,dn,Dn){for(var mn=qi.layout.get("text-rotate").evaluate(In,{})*Math.PI/180,Po=[],eo=0,Tn=_i.positionedLines;eo<Tn.length;eo+=1)for(var zo=Tn[eo],xo=0,Ko=zo.positionedGlyphs;xo<Ko.length;xo+=1){var Bn=Ko[xo];if(Bn.rect){var nr=Bn.rect||{},Xr=4,hs=!0,rs=1,Yr=0,cs=(on||Dn)&&Bn.vertical,Ns=Bn.metrics.advance*Bn.scale/2;if(Dn&&_i.verticalizable&&(Yr=zo.lineOffset/2-(Bn.imageName?-(24-Bn.metrics.width*Bn.scale)/2:24*(Bn.scale-1))),Bn.imageName){var Us=dn[Bn.imageName];hs=Us.sdf,Xr=1/(rs=Us.pixelRatio)}var xa=on?[Bn.x+Ns,Bn.y]:[0,0],Ys=on?[0,0]:[Bn.x+Ns+Ai[0],Bn.y+Ai[1]-Yr],ba=[0,0];cs&&(ba=Ys,Ys=[0,0]);var gs=(Bn.metrics.left-Xr)*Bn.scale-Ns+Ys[0],Ks=(-Bn.metrics.top-Xr)*Bn.scale+Ys[1],Fo=gs+nr.w*Bn.scale/rs,Er=Ks+nr.h*Bn.scale/rs,br=new v(gs,Ks),$o=new v(Fo,Ks),Ma=new v(gs,Er),fa=new v(Fo,Er);if(cs){var Vr=new v(-Ns,Ns- -17),As=-Math.PI/2,ma=12-Ns,or=new v(22-ma,-(Bn.imageName?ma:0)),Cl=new(Function.prototype.bind.apply(v,[null].concat(ba)));br._rotateAround(As,Vr)._add(or)._add(Cl),$o._rotateAround(As,Vr)._add(or)._add(Cl),Ma._rotateAround(As,Vr)._add(or)._add(Cl),fa._rotateAround(As,Vr)._add(or)._add(Cl)}if(mn){var qa=Math.sin(mn),Al=Math.cos(mn),ys=[Al,-qa,qa,Al];br._matMult(ys),$o._matMult(ys),Ma._matMult(ys),fa._matMult(ys)}var Pl=new v(0,0),cl=new v(0,0);Po.push({tl:br,tr:$o,bl:Ma,br:fa,tex:nr,writingMode:_i.writingMode,glyphOffset:xa,sectionIndex:Bn.sectionIndex,isSDF:hs,pixelOffsetTL:Pl,pixelOffsetBR:cl,minFontScaleX:0,minFontScaleY:0})}}return Po}(0,i,Q,m,S,F,c,t.allowVerticalPlacement),Ve=t.textSizeData,ze=null;"source"===Ve.kind?(ze=[128*m.layout.get("text-size").evaluate(F,{})])[0]>32640&&ht(t.layerIds[0]+': Value for "text-size" is >= 255. Reduce your "text-size".'):"composite"===Ve.kind&&((ze=[128*ie.compositeTextSizes[0].evaluate(F,{},ke),128*ie.compositeTextSizes[1].evaluate(F,{},ke)])[0]>32640||ze[1]>32640)&&ht(t.layerIds[0]+': Value for "text-size" is >= 255. Reduce your "text-size".'),t.addSymbols(t.text,Le,ze,Q,S,F,kt,e,_t.lineStartIndex,_t.lineLength,$t,ke);for(var Qe=0,li=Bt;Qe<li.length;Qe+=1)Nt[li[Qe]]=t.text.placedSymbolArray.length-1;return 4*Le.length}function zu(t){for(var e in t)return t[e];return null}function pd(t,e,i,c){var m=t.compareText;if(e in m){for(var S=m[e],F=S.length-1;F>=0;F--)if(c.dist(S[F])<i)return!0}else m[e]=[];return m[e].push(c),!1}var dd=nh.VectorTileFeature.types,fd=[{name:"a_fade_opacity",components:1,type:"Uint8",offset:0}];function hc(t,e,i,c,m,S,F,Q,_t,kt,Bt,Nt,$t){var ie=Q?Math.min(32640,Math.round(Q[0])):0,ke=Q?Math.min(32640,Math.round(Q[1])):0;t.emplaceBack(e,i,Math.round(32*c),Math.round(32*m),S,F,(ie<<1)+(_t?1:0),ke,16*kt,16*Bt,256*Nt,256*$t)}function Fc(t,e,i){t.emplaceBack(e.x,e.y,i),t.emplaceBack(e.x,e.y,i),t.emplaceBack(e.x,e.y,i),t.emplaceBack(e.x,e.y,i)}function md(t){for(var e=0,i=t.sections;e<i.length;e+=1)if(ds(i[e].text))return!0;return!1}var ch=function(t){this.layoutVertexArray=new wl,this.indexArray=new Qa,this.programConfigurations=t,this.segments=new le,this.dynamicLayoutVertexArray=new Ja,this.opacityVertexArray=new pl,this.placedSymbolArray=new u};ch.prototype.isEmpty=function(){return 0===this.layoutVertexArray.length&&0===this.indexArray.length&&0===this.dynamicLayoutVertexArray.length&&0===this.opacityVertexArray.length},ch.prototype.upload=function(t,e,i,c){this.isEmpty()||(i&&(this.layoutVertexBuffer=t.createVertexBuffer(this.layoutVertexArray,Up.members),this.indexBuffer=t.createIndexBuffer(this.indexArray,e),this.dynamicLayoutVertexBuffer=t.createVertexBuffer(this.dynamicLayoutVertexArray,Vp.members,!0),this.opacityVertexBuffer=t.createVertexBuffer(this.opacityVertexArray,fd,!0),this.opacityVertexBuffer.itemSize=1),(i||c)&&this.programConfigurations.upload(t))},ch.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.dynamicLayoutVertexBuffer.destroy(),this.opacityVertexBuffer.destroy())},Hi("SymbolBuffers",ch);var Oh=function(t,e,i){this.layoutVertexArray=new t,this.layoutAttributes=e,this.indexArray=new i,this.segments=new le,this.collisionVertexArray=new Wl};Oh.prototype.upload=function(t){this.layoutVertexBuffer=t.createVertexBuffer(this.layoutVertexArray,this.layoutAttributes),this.indexBuffer=t.createIndexBuffer(this.indexArray),this.collisionVertexBuffer=t.createVertexBuffer(this.collisionVertexArray,Hp.members,!0)},Oh.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.collisionVertexBuffer.destroy())},Hi("CollisionBuffers",Oh);var Sr=function(t){this.collisionBoxArray=t.collisionBoxArray,this.zoom=t.zoom,this.overscaling=t.overscaling,this.layers=t.layers,this.layerIds=this.layers.map(function(S){return S.id}),this.index=t.index,this.pixelRatio=t.pixelRatio,this.sourceLayerIndex=t.sourceLayerIndex,this.hasPattern=!1,this.hasRTLText=!1,this.sortKeyRanges=[],this.collisionCircleArray=[],this.placementInvProjMatrix=ct([]),this.placementViewportMatrix=ct([]);var e=this.layers[0]._unevaluatedLayout._values;this.textSizeData=Bc(this.zoom,e["text-size"]),this.iconSizeData=Bc(this.zoom,e["icon-size"]);var i=this.layers[0].layout,c=i.get("symbol-sort-key"),m=i.get("symbol-z-order");this.canOverlap=i.get("text-allow-overlap")||i.get("icon-allow-overlap")||i.get("text-ignore-placement")||i.get("icon-ignore-placement"),this.sortFeaturesByKey="viewport-y"!==m&&void 0!==c.constantOr(1),this.sortFeaturesByY=("viewport-y"===m||"auto"===m&&!this.sortFeaturesByKey)&&this.canOverlap,"point"===i.get("symbol-placement")&&(this.writingModes=i.get("text-writing-mode").map(function(S){return Za[S]})),this.stateDependentLayerIds=this.layers.filter(function(S){return S.isStateDependent()}).map(function(S){return S.id}),this.sourceID=t.sourceID};Sr.prototype.createArrays=function(){this.text=new ch(new Vn(this.layers,this.zoom,function(t){return/^text/.test(t)})),this.icon=new ch(new Vn(this.layers,this.zoom,function(t){return/^icon/.test(t)})),this.glyphOffsetArray=new $,this.lineVertexArray=new gt,this.symbolInstances=new W},Sr.prototype.calculateGlyphDependencies=function(t,e,i,c,m){for(var S=0;S<t.length;S++)if(e[t.charCodeAt(S)]=!0,(i||c)&&m){var F=Ih[t.charAt(S)];F&&(e[F.charCodeAt(0)]=!0)}},Sr.prototype.populate=function(t,e,i){var c=this.layers[0],m=c.layout,S=m.get("text-font"),F=m.get("text-field"),Q=m.get("icon-image"),_t=("constant"!==F.value.kind||F.value.value instanceof Uo&&!F.value.value.isEmpty()||F.value.value.toString().length>0)&&("constant"!==S.value.kind||S.value.value.length>0),kt="constant"!==Q.value.kind||!!Q.value.value||Object.keys(Q.parameters).length>0,Bt=m.get("symbol-sort-key");if(this.features=[],_t||kt){for(var Nt=e.iconDependencies,$t=e.glyphDependencies,ie=e.availableImages,ke=new To(this.zoom),Le=0,Ve=t;Le<Ve.length;Le+=1){var ze=Ve[Le],Qe=ze.feature,li=ze.id,gi=ze.index,_i=ze.sourceLayerIndex,Ai=c._featureFilter.needGeometry,qi=Ur(Qe,Ai);if(c._featureFilter.filter(ke,qi,i)){Ai||(qi.geometry=kr(Qe));var on=void 0;if(_t){var In=c.getValueAndResolveTokens("text-field",qi,i,ie),dn=Uo.factory(In);md(dn)&&(this.hasRTLText=!0),(!this.hasRTLText||"unavailable"===sl()||this.hasRTLText&&fs.isParsed())&&(on=Wp(dn,c,qi))}var Dn=void 0;if(kt){var mn=c.getValueAndResolveTokens("icon-image",qi,i,ie);Dn=mn instanceof zr?mn:zr.fromString(mn)}if(on||Dn){var Po=this.sortFeaturesByKey?Bt.evaluate(qi,{},i):void 0;if(this.features.push({id:li,text:on,icon:Dn,index:gi,sourceLayerIndex:_i,geometry:qi.geometry,properties:Qe.properties,type:dd[Qe.type],sortKey:Po}),Dn&&(Nt[Dn.name]=!0),on){var eo=S.evaluate(qi,{},i).join(","),Tn="map"===m.get("text-rotation-alignment")&&"point"!==m.get("symbol-placement");this.allowVerticalPlacement=this.writingModes&&this.writingModes.indexOf(Za.vertical)>=0;for(var zo=0,xo=on.sections;zo<xo.length;zo+=1){var Ko=xo[zo];if(Ko.image)Nt[Ko.image.name]=!0;else{var Bn=ws(on.toString()),nr=Ko.fontStack||eo,Xr=$t[nr]=$t[nr]||{};this.calculateGlyphDependencies(Ko.text,Xr,Tn,this.allowVerticalPlacement,Bn)}}}}}}"line"===m.get("symbol-placement")&&(this.features=function(hs){var rs={},Yr={},cs=[],Ns=0;function Us(Vr){cs.push(hs[Vr]),Ns++}function xa(Vr,As,ma){var or=Yr[Vr];return delete Yr[Vr],Yr[As]=or,cs[or].geometry[0].pop(),cs[or].geometry[0]=cs[or].geometry[0].concat(ma[0]),or}function Ys(Vr,As,ma){var or=rs[As];return delete rs[As],rs[Vr]=or,cs[or].geometry[0].shift(),cs[or].geometry[0]=ma[0].concat(cs[or].geometry[0]),or}function ba(Vr,As,ma){var or=ma?As[0][As[0].length-1]:As[0][0];return Vr+":"+or.x+":"+or.y}for(var gs=0;gs<hs.length;gs++){var Ks=hs[gs],Fo=Ks.geometry,Er=Ks.text?Ks.text.toString():null;if(Er){var br=ba(Er,Fo),$o=ba(Er,Fo,!0);if(br in Yr&&$o in rs&&Yr[br]!==rs[$o]){var Ma=Ys(br,$o,Fo),fa=xa(br,$o,cs[Ma].geometry);delete rs[br],delete Yr[$o],Yr[ba(Er,cs[fa].geometry,!0)]=fa,cs[Ma].geometry=null}else br in Yr?xa(br,$o,Fo):$o in rs?Ys(br,$o,Fo):(Us(gs),rs[br]=Ns-1,Yr[$o]=Ns-1)}else Us(gs)}return cs.filter(function(Vr){return Vr.geometry})}(this.features)),this.sortFeaturesByKey&&this.features.sort(function(hs,rs){return hs.sortKey-rs.sortKey})}},Sr.prototype.update=function(t,e,i){this.stateDependentLayers.length&&(this.text.programConfigurations.updatePaintArrays(t,e,this.layers,i),this.icon.programConfigurations.updatePaintArrays(t,e,this.layers,i))},Sr.prototype.isEmpty=function(){return 0===this.symbolInstances.length&&!this.hasRTLText},Sr.prototype.uploadPending=function(){return!this.uploaded||this.text.programConfigurations.needsUpload||this.icon.programConfigurations.needsUpload},Sr.prototype.upload=function(t){!this.uploaded&&this.hasDebugData()&&(this.textCollisionBox.upload(t),this.iconCollisionBox.upload(t)),this.text.upload(t,this.sortFeaturesByY,!this.uploaded,this.text.programConfigurations.needsUpload),this.icon.upload(t,this.sortFeaturesByY,!this.uploaded,this.icon.programConfigurations.needsUpload),this.uploaded=!0},Sr.prototype.destroyDebugData=function(){this.textCollisionBox.destroy(),this.iconCollisionBox.destroy()},Sr.prototype.destroy=function(){this.text.destroy(),this.icon.destroy(),this.hasDebugData()&&this.destroyDebugData()},Sr.prototype.addToLineVertexArray=function(t,e){var i=this.lineVertexArray.length;if(void 0!==t.segment){for(var c=t.dist(e[t.segment+1]),m=t.dist(e[t.segment]),S={},F=t.segment+1;F<e.length;F++)S[F]={x:e[F].x,y:e[F].y,tileUnitDistanceFromAnchor:c},F<e.length-1&&(c+=e[F+1].dist(e[F]));for(var Q=t.segment||0;Q>=0;Q--)S[Q]={x:e[Q].x,y:e[Q].y,tileUnitDistanceFromAnchor:m},Q>0&&(m+=e[Q-1].dist(e[Q]));for(var _t=0;_t<e.length;_t++){var kt=S[_t];this.lineVertexArray.emplaceBack(kt.x,kt.y,kt.tileUnitDistanceFromAnchor)}}return{lineStartIndex:i,lineLength:this.lineVertexArray.length-i}},Sr.prototype.addSymbols=function(t,e,i,c,m,S,F,Q,_t,kt,Bt,Nt){for(var $t=t.indexArray,ie=t.layoutVertexArray,ke=t.segments.prepareSegment(4*e.length,ie,$t,this.canOverlap?S.sortKey:void 0),Le=this.glyphOffsetArray.length,Ve=ke.vertexLength,ze=this.allowVerticalPlacement&&F===Za.vertical?Math.PI/2:0,Qe=S.text&&S.text.sections,li=0;li<e.length;li++){var gi=e[li],_i=gi.tl,Ai=gi.tr,qi=gi.bl,on=gi.br,In=gi.tex,dn=gi.pixelOffsetTL,Dn=gi.pixelOffsetBR,mn=gi.minFontScaleX,Po=gi.minFontScaleY,eo=gi.glyphOffset,Tn=gi.isSDF,zo=gi.sectionIndex,xo=ke.vertexLength,Ko=eo[1];hc(ie,Q.x,Q.y,_i.x,Ko+_i.y,In.x,In.y,i,Tn,dn.x,dn.y,mn,Po),hc(ie,Q.x,Q.y,Ai.x,Ko+Ai.y,In.x+In.w,In.y,i,Tn,Dn.x,dn.y,mn,Po),hc(ie,Q.x,Q.y,qi.x,Ko+qi.y,In.x,In.y+In.h,i,Tn,dn.x,Dn.y,mn,Po),hc(ie,Q.x,Q.y,on.x,Ko+on.y,In.x+In.w,In.y+In.h,i,Tn,Dn.x,Dn.y,mn,Po),Fc(t.dynamicLayoutVertexArray,Q,ze),$t.emplaceBack(xo,xo+1,xo+2),$t.emplaceBack(xo+1,xo+2,xo+3),ke.vertexLength+=4,ke.primitiveLength+=2,this.glyphOffsetArray.emplaceBack(eo[0]),li!==e.length-1&&zo===e[li+1].sectionIndex||t.programConfigurations.populatePaintArrays(ie.length,S,S.index,{},Nt,Qe&&Qe[zo])}t.placedSymbolArray.emplaceBack(Q.x,Q.y,Le,this.glyphOffsetArray.length-Le,Ve,_t,kt,Q.segment,i?i[0]:0,i?i[1]:0,c[0],c[1],F,0,!1,0,Bt)},Sr.prototype._addCollisionDebugVertex=function(t,e,i,c,m,S){return e.emplaceBack(0,0),t.emplaceBack(i.x,i.y,c,m,Math.round(S.x),Math.round(S.y))},Sr.prototype.addCollisionDebugVertices=function(t,e,i,c,m,S,F){var Q=m.segments.prepareSegment(4,m.layoutVertexArray,m.indexArray),_t=Q.vertexLength,kt=m.layoutVertexArray,Bt=m.collisionVertexArray,Nt=F.anchorX,$t=F.anchorY;this._addCollisionDebugVertex(kt,Bt,S,Nt,$t,new v(t,e)),this._addCollisionDebugVertex(kt,Bt,S,Nt,$t,new v(i,e)),this._addCollisionDebugVertex(kt,Bt,S,Nt,$t,new v(i,c)),this._addCollisionDebugVertex(kt,Bt,S,Nt,$t,new v(t,c)),Q.vertexLength+=4;var ie=m.indexArray;ie.emplaceBack(_t,_t+1),ie.emplaceBack(_t+1,_t+2),ie.emplaceBack(_t+2,_t+3),ie.emplaceBack(_t+3,_t),Q.primitiveLength+=4},Sr.prototype.addDebugCollisionBoxes=function(t,e,i,c){for(var m=t;m<e;m++){var S=this.collisionBoxArray.get(m);this.addCollisionDebugVertices(S.x1,S.y1,S.x2,S.y2,c?this.textCollisionBox:this.iconCollisionBox,S.anchorPoint,i)}},Sr.prototype.generateCollisionDebugBuffers=function(){this.hasDebugData()&&this.destroyDebugData(),this.textCollisionBox=new Oh(dl,pu.members,Tl),this.iconCollisionBox=new Oh(dl,pu.members,Tl);for(var t=0;t<this.symbolInstances.length;t++){var e=this.symbolInstances.get(t);this.addDebugCollisionBoxes(e.textBoxStartIndex,e.textBoxEndIndex,e,!0),this.addDebugCollisionBoxes(e.verticalTextBoxStartIndex,e.verticalTextBoxEndIndex,e,!0),this.addDebugCollisionBoxes(e.iconBoxStartIndex,e.iconBoxEndIndex,e,!1),this.addDebugCollisionBoxes(e.verticalIconBoxStartIndex,e.verticalIconBoxEndIndex,e,!1)}},Sr.prototype._deserializeCollisionBoxesForSymbol=function(t,e,i,c,m,S,F,Q,_t){for(var kt={},Bt=e;Bt<i;Bt++){var Nt=t.get(Bt);kt.textBox={x1:Nt.x1,y1:Nt.y1,x2:Nt.x2,y2:Nt.y2,anchorPointX:Nt.anchorPointX,anchorPointY:Nt.anchorPointY},kt.textFeatureIndex=Nt.featureIndex;break}for(var $t=c;$t<m;$t++){var ie=t.get($t);kt.verticalTextBox={x1:ie.x1,y1:ie.y1,x2:ie.x2,y2:ie.y2,anchorPointX:ie.anchorPointX,anchorPointY:ie.anchorPointY},kt.verticalTextFeatureIndex=ie.featureIndex;break}for(var ke=S;ke<F;ke++){var Le=t.get(ke);kt.iconBox={x1:Le.x1,y1:Le.y1,x2:Le.x2,y2:Le.y2,anchorPointX:Le.anchorPointX,anchorPointY:Le.anchorPointY},kt.iconFeatureIndex=Le.featureIndex;break}for(var Ve=Q;Ve<_t;Ve++){var ze=t.get(Ve);kt.verticalIconBox={x1:ze.x1,y1:ze.y1,x2:ze.x2,y2:ze.y2,anchorPointX:ze.anchorPointX,anchorPointY:ze.anchorPointY},kt.verticalIconFeatureIndex=ze.featureIndex;break}return kt},Sr.prototype.deserializeCollisionBoxes=function(t){this.collisionArrays=[];for(var e=0;e<this.symbolInstances.length;e++){var i=this.symbolInstances.get(e);this.collisionArrays.push(this._deserializeCollisionBoxesForSymbol(t,i.textBoxStartIndex,i.textBoxEndIndex,i.verticalTextBoxStartIndex,i.verticalTextBoxEndIndex,i.iconBoxStartIndex,i.iconBoxEndIndex,i.verticalIconBoxStartIndex,i.verticalIconBoxEndIndex))}},Sr.prototype.hasTextData=function(){return this.text.segments.get().length>0},Sr.prototype.hasIconData=function(){return this.icon.segments.get().length>0},Sr.prototype.hasDebugData=function(){return this.textCollisionBox&&this.iconCollisionBox},Sr.prototype.hasTextCollisionBoxData=function(){return this.hasDebugData()&&this.textCollisionBox.segments.get().length>0},Sr.prototype.hasIconCollisionBoxData=function(){return this.hasDebugData()&&this.iconCollisionBox.segments.get().length>0},Sr.prototype.addIndicesForPlacedSymbol=function(t,e){for(var i=t.placedSymbolArray.get(e),c=i.vertexStartIndex+4*i.numGlyphs,m=i.vertexStartIndex;m<c;m+=4)t.indexArray.emplaceBack(m,m+1,m+2),t.indexArray.emplaceBack(m+1,m+2,m+3)},Sr.prototype.getSortedSymbolIndexes=function(t){if(this.sortedAngle===t&&void 0!==this.symbolInstanceIndexes)return this.symbolInstanceIndexes;for(var e=Math.sin(t),i=Math.cos(t),c=[],m=[],S=[],F=0;F<this.symbolInstances.length;++F){S.push(F);var Q=this.symbolInstances.get(F);c.push(0|Math.round(e*Q.anchorX+i*Q.anchorY)),m.push(Q.featureIndex)}return S.sort(function(_t,kt){return c[_t]-c[kt]||m[kt]-m[_t]}),S},Sr.prototype.addToSortKeyRanges=function(t,e){var i=this.sortKeyRanges[this.sortKeyRanges.length-1];i&&i.sortKey===e?i.symbolInstanceEnd=t+1:this.sortKeyRanges.push({sortKey:e,symbolInstanceStart:t,symbolInstanceEnd:t+1})},Sr.prototype.sortFeatures=function(t){var e=this;if(this.sortFeaturesByY&&this.sortedAngle!==t&&!(this.text.segments.get().length>1||this.icon.segments.get().length>1)){this.symbolInstanceIndexes=this.getSortedSymbolIndexes(t),this.sortedAngle=t,this.text.indexArray.clear(),this.icon.indexArray.clear(),this.featureSortOrder=[];for(var i=0,c=this.symbolInstanceIndexes;i<c.length;i+=1){var m=this.symbolInstances.get(c[i]);this.featureSortOrder.push(m.featureIndex),[m.rightJustifiedTextSymbolIndex,m.centerJustifiedTextSymbolIndex,m.leftJustifiedTextSymbolIndex].forEach(function(S,F,Q){S>=0&&Q.indexOf(S)===F&&e.addIndicesForPlacedSymbol(e.text,S)}),m.verticalPlacedTextSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.text,m.verticalPlacedTextSymbolIndex),m.placedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,m.placedIconSymbolIndex),m.verticalPlacedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,m.verticalPlacedIconSymbolIndex)}this.text.indexBuffer&&this.text.indexBuffer.updateData(this.text.indexArray),this.icon.indexBuffer&&this.icon.indexBuffer.updateData(this.icon.indexArray)}},Hi("SymbolBucket",Sr,{omit:["layers","collisionBoxArray","features","compareText"]}),Sr.MAX_GLYPHS=65535,Sr.addDynamicAttributes=Fc;var gd=new ms({"symbol-placement":new Pn(oe.layout_symbol["symbol-placement"]),"symbol-spacing":new Pn(oe.layout_symbol["symbol-spacing"]),"symbol-avoid-edges":new Pn(oe.layout_symbol["symbol-avoid-edges"]),"symbol-sort-key":new yn(oe.layout_symbol["symbol-sort-key"]),"symbol-z-order":new Pn(oe.layout_symbol["symbol-z-order"]),"icon-allow-overlap":new Pn(oe.layout_symbol["icon-allow-overlap"]),"icon-ignore-placement":new Pn(oe.layout_symbol["icon-ignore-placement"]),"icon-optional":new Pn(oe.layout_symbol["icon-optional"]),"icon-rotation-alignment":new Pn(oe.layout_symbol["icon-rotation-alignment"]),"icon-size":new yn(oe.layout_symbol["icon-size"]),"icon-text-fit":new Pn(oe.layout_symbol["icon-text-fit"]),"icon-text-fit-padding":new Pn(oe.layout_symbol["icon-text-fit-padding"]),"icon-image":new yn(oe.layout_symbol["icon-image"]),"icon-rotate":new yn(oe.layout_symbol["icon-rotate"]),"icon-padding":new Pn(oe.layout_symbol["icon-padding"]),"icon-keep-upright":new Pn(oe.layout_symbol["icon-keep-upright"]),"icon-offset":new yn(oe.layout_symbol["icon-offset"]),"icon-anchor":new yn(oe.layout_symbol["icon-anchor"]),"icon-pitch-alignment":new Pn(oe.layout_symbol["icon-pitch-alignment"]),"text-pitch-alignment":new Pn(oe.layout_symbol["text-pitch-alignment"]),"text-rotation-alignment":new Pn(oe.layout_symbol["text-rotation-alignment"]),"text-field":new yn(oe.layout_symbol["text-field"]),"text-font":new yn(oe.layout_symbol["text-font"]),"text-size":new yn(oe.layout_symbol["text-size"]),"text-max-width":new yn(oe.layout_symbol["text-max-width"]),"text-line-height":new Pn(oe.layout_symbol["text-line-height"]),"text-letter-spacing":new yn(oe.layout_symbol["text-letter-spacing"]),"text-justify":new yn(oe.layout_symbol["text-justify"]),"text-radial-offset":new yn(oe.layout_symbol["text-radial-offset"]),"text-variable-anchor":new Pn(oe.layout_symbol["text-variable-anchor"]),"text-anchor":new yn(oe.layout_symbol["text-anchor"]),"text-max-angle":new Pn(oe.layout_symbol["text-max-angle"]),"text-writing-mode":new Pn(oe.layout_symbol["text-writing-mode"]),"text-rotate":new yn(oe.layout_symbol["text-rotate"]),"text-padding":new Pn(oe.layout_symbol["text-padding"]),"text-keep-upright":new Pn(oe.layout_symbol["text-keep-upright"]),"text-transform":new yn(oe.layout_symbol["text-transform"]),"text-offset":new yn(oe.layout_symbol["text-offset"]),"text-allow-overlap":new Pn(oe.layout_symbol["text-allow-overlap"]),"text-ignore-placement":new Pn(oe.layout_symbol["text-ignore-placement"]),"text-optional":new Pn(oe.layout_symbol["text-optional"])}),Nc={paint:new ms({"icon-opacity":new yn(oe.paint_symbol["icon-opacity"]),"icon-color":new yn(oe.paint_symbol["icon-color"]),"icon-halo-color":new yn(oe.paint_symbol["icon-halo-color"]),"icon-halo-width":new yn(oe.paint_symbol["icon-halo-width"]),"icon-halo-blur":new yn(oe.paint_symbol["icon-halo-blur"]),"icon-translate":new Pn(oe.paint_symbol["icon-translate"]),"icon-translate-anchor":new Pn(oe.paint_symbol["icon-translate-anchor"]),"text-opacity":new yn(oe.paint_symbol["text-opacity"]),"text-color":new yn(oe.paint_symbol["text-color"],{runtimeType:Ki,getOverride:function(t){return t.textColor},hasOverride:function(t){return!!t.textColor}}),"text-halo-color":new yn(oe.paint_symbol["text-halo-color"]),"text-halo-width":new yn(oe.paint_symbol["text-halo-width"]),"text-halo-blur":new yn(oe.paint_symbol["text-halo-blur"]),"text-translate":new Pn(oe.paint_symbol["text-translate"]),"text-translate-anchor":new Pn(oe.paint_symbol["text-translate-anchor"])}),layout:gd},uh=function(t){this.type=t.property.overrides?t.property.overrides.runtimeType:Fi,this.defaultValue=t};uh.prototype.evaluate=function(t){if(t.formattedSection){var e=this.defaultValue.property.overrides;if(e&&e.hasOverride(t.formattedSection))return e.getOverride(t.formattedSection)}return t.feature&&t.featureState?this.defaultValue.evaluate(t.feature,t.featureState):this.defaultValue.property.specification.default},uh.prototype.eachChild=function(t){this.defaultValue.isConstant()||t(this.defaultValue.value._styleExpression.expression)},uh.prototype.outputDefined=function(){return!1},uh.prototype.serialize=function(){return null},Hi("FormatSectionOverride",uh,{omit:["defaultValue"]});var yd=function(t){function e(i){t.call(this,i,Nc)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.recalculate=function(i,c){if(t.prototype.recalculate.call(this,i,c),"auto"===this.layout.get("icon-rotation-alignment")&&(this.layout._values["icon-rotation-alignment"]="point"!==this.layout.get("symbol-placement")?"map":"viewport"),"auto"===this.layout.get("text-rotation-alignment")&&(this.layout._values["text-rotation-alignment"]="point"!==this.layout.get("symbol-placement")?"map":"viewport"),"auto"===this.layout.get("text-pitch-alignment")&&(this.layout._values["text-pitch-alignment"]=this.layout.get("text-rotation-alignment")),"auto"===this.layout.get("icon-pitch-alignment")&&(this.layout._values["icon-pitch-alignment"]=this.layout.get("icon-rotation-alignment")),"point"===this.layout.get("symbol-placement")){var m=this.layout.get("text-writing-mode");if(m){for(var S=[],F=0,Q=m;F<Q.length;F+=1){var _t=Q[F];S.indexOf(_t)<0&&S.push(_t)}this.layout._values["text-writing-mode"]=S}else this.layout._values["text-writing-mode"]=["horizontal"]}this._setPaintOverrides()},e.prototype.getValueAndResolveTokens=function(i,c,m,S){var _t,F=this.layout.get(i).evaluate(c,{},m,S),Q=this._unevaluatedLayout._values[i];return Q.isDataDriven()||ls(Q.value)||!F?F:(_t=c.properties,F.replace(/{([^{}]+)}/g,function(Bt,Nt){return Nt in _t?String(_t[Nt]):""}))},e.prototype.createBucket=function(i){return new Sr(i)},e.prototype.queryRadius=function(){return 0},e.prototype.queryIntersectsFeature=function(){return!1},e.prototype._setPaintOverrides=function(){for(var i=0,c=Nc.paint.overridableProperties;i<c.length;i+=1){var m=c[i];if(e.hasPaintOverride(this.layout,m)){var S,F=this.paint.get(m),Q=new uh(F),_t=new ha(Q,F.property.specification);S="constant"===F.value.kind||"source"===F.value.kind?new ur("source",_t):new Ms("composite",_t,F.value.zoomStops,F.value._interpolationType),this.paint._values[m]=new Ar(F.property,S,F.parameters)}}},e.prototype._handleOverridablePaintPropertyUpdate=function(i,c,m){return!(!this.layout||c.isDataDriven()||m.isDataDriven())&&e.hasPaintOverride(this.layout,i)},e.hasPaintOverride=function(i,c){var m=i.get("text-field"),S=Nc.paint.properties[c],F=!1,Q=function(Bt){for(var Nt=0,$t=Bt;Nt<$t.length;Nt+=1)if(S.overrides&&S.overrides.hasOverride($t[Nt]))return void(F=!0)};if("constant"===m.value.kind&&m.value.value instanceof Uo)Q(m.value.value.sections);else if("source"===m.value.kind){var _t=function(Bt){F||(Bt instanceof Or&&Vo(Bt.value)===Hn?Q(Bt.value.sections):Bt instanceof Ps?Q(Bt.sections):Bt.eachChild(_t))},kt=m.value;kt._styleExpression&&_t(kt._styleExpression.expression)}return F},e}(Aa),vd={paint:new ms({"background-color":new Pn(oe.paint_background["background-color"]),"background-pattern":new zs(oe.paint_background["background-pattern"]),"background-opacity":new Pn(oe.paint_background["background-opacity"])})},_d=function(t){function e(i){t.call(this,i,vd)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e}(Aa),xd={paint:new ms({"raster-opacity":new Pn(oe.paint_raster["raster-opacity"]),"raster-hue-rotate":new Pn(oe.paint_raster["raster-hue-rotate"]),"raster-brightness-min":new Pn(oe.paint_raster["raster-brightness-min"]),"raster-brightness-max":new Pn(oe.paint_raster["raster-brightness-max"]),"raster-saturation":new Pn(oe.paint_raster["raster-saturation"]),"raster-contrast":new Pn(oe.paint_raster["raster-contrast"]),"raster-resampling":new Pn(oe.paint_raster["raster-resampling"]),"raster-fade-duration":new Pn(oe.paint_raster["raster-fade-duration"])})},bd=function(t){function e(i){t.call(this,i,xd)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e}(Aa),wd=function(t){function e(i){t.call(this,i,{}),this.implementation=i}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.is3D=function(){return"3d"===this.implementation.renderingMode},e.prototype.hasOffscreenPass=function(){return void 0!==this.implementation.prerender},e.prototype.recalculate=function(){},e.prototype.updateTransitions=function(){},e.prototype.hasTransition=function(){},e.prototype.serialize=function(){},e.prototype.onAdd=function(i){this.implementation.onAdd&&this.implementation.onAdd(i,i.painter.context.gl)},e.prototype.onRemove=function(i){this.implementation.onRemove&&this.implementation.onRemove(i,i.painter.context.gl)},e}(Aa),Sd={circle:ue,heatmap:On,hillshade:vn,fill:Cp,"fill-extrusion":zp,line:Np,symbol:yd,background:_d,raster:bd},Ou=b.HTMLImageElement,Bu=b.HTMLCanvasElement,Ru=b.HTMLVideoElement,ju=b.ImageData,cc=b.ImageBitmap,Yl=function(t,e,i,c){this.context=t,this.format=i,this.texture=t.gl.createTexture(),this.update(e,c)};Yl.prototype.update=function(t,e,i){var c=t.width,m=t.height,S=!(this.size&&this.size[0]===c&&this.size[1]===m||i),F=this.context,Q=F.gl;if(this.useMipmap=Boolean(e&&e.useMipmap),Q.bindTexture(Q.TEXTURE_2D,this.texture),F.pixelStoreUnpackFlipY.set(!1),F.pixelStoreUnpack.set(1),F.pixelStoreUnpackPremultiplyAlpha.set(this.format===Q.RGBA&&(!e||!1!==e.premultiply)),S)this.size=[c,m],t instanceof Ou||t instanceof Bu||t instanceof Ru||t instanceof ju||cc&&t instanceof cc?Q.texImage2D(Q.TEXTURE_2D,0,this.format,this.format,Q.UNSIGNED_BYTE,t):Q.texImage2D(Q.TEXTURE_2D,0,this.format,c,m,0,this.format,Q.UNSIGNED_BYTE,t.data);else{var _t=i||{x:0,y:0},kt=_t.x,Bt=_t.y;t instanceof Ou||t instanceof Bu||t instanceof Ru||t instanceof ju||cc&&t instanceof cc?Q.texSubImage2D(Q.TEXTURE_2D,0,kt,Bt,Q.RGBA,Q.UNSIGNED_BYTE,t):Q.texSubImage2D(Q.TEXTURE_2D,0,kt,Bt,c,m,Q.RGBA,Q.UNSIGNED_BYTE,t.data)}this.useMipmap&&this.isSizePowerOfTwo()&&Q.generateMipmap(Q.TEXTURE_2D)},Yl.prototype.bind=function(t,e,i){var c=this.context.gl;c.bindTexture(c.TEXTURE_2D,this.texture),i!==c.LINEAR_MIPMAP_NEAREST||this.isSizePowerOfTwo()||(i=c.LINEAR),t!==this.filter&&(c.texParameteri(c.TEXTURE_2D,c.TEXTURE_MAG_FILTER,t),c.texParameteri(c.TEXTURE_2D,c.TEXTURE_MIN_FILTER,i||t),this.filter=t),e!==this.wrap&&(c.texParameteri(c.TEXTURE_2D,c.TEXTURE_WRAP_S,e),c.texParameteri(c.TEXTURE_2D,c.TEXTURE_WRAP_T,e),this.wrap=e)},Yl.prototype.isSizePowerOfTwo=function(){return this.size[0]===this.size[1]&&Math.log(this.size[0])/Math.LN2%1==0},Yl.prototype.destroy=function(){this.context.gl.deleteTexture(this.texture),this.texture=null};var Uc=function(t){var e=this;this._callback=t,this._triggered=!1,typeof MessageChannel<"u"&&(this._channel=new MessageChannel,this._channel.port2.onmessage=function(){e._triggered=!1,e._callback()})};Uc.prototype.trigger=function(){var t=this;this._triggered||(this._triggered=!0,this._channel?this._channel.port1.postMessage(!0):setTimeout(function(){t._triggered=!1,t._callback()},0))},Uc.prototype.remove=function(){delete this._channel,this._callback=function(){}};var ph=function(t,e,i){this.target=t,this.parent=e,this.mapId=i,this.callbacks={},this.tasks={},this.taskQueue=[],this.cancelCallbacks={},q(["receive","process"],this),this.invoker=new Uc(this.process),this.target.addEventListener("message",this.receive,!1),this.globalScope=Wt()?t:b};function Fu(t,e,i){var c=2*Math.PI*6378137/256/Math.pow(2,i);return[t*c-2*Math.PI*6378137/2,e*c-2*Math.PI*6378137/2]}ph.prototype.send=function(t,e,i,c,m){var S=this;void 0===m&&(m=!1);var F=Math.round(1e18*Math.random()).toString(36).substring(0,10);i&&(this.callbacks[F]=i);var Q=_e(this.globalScope)?void 0:[];return this.target.postMessage({id:F,type:t,hasCallback:!!i,targetMapId:c,mustQueue:m,sourceMapId:this.mapId,data:jr(e,Q)},Q),{cancel:function(){i&&delete S.callbacks[F],S.target.postMessage({id:F,type:"<cancel>",targetMapId:c,sourceMapId:S.mapId})}}},ph.prototype.receive=function(t){var e=t.data,i=e.id;if(i&&(!e.targetMapId||this.mapId===e.targetMapId))if("<cancel>"===e.type){delete this.tasks[i];var c=this.cancelCallbacks[i];delete this.cancelCallbacks[i],c&&c()}else Wt()||e.mustQueue?(this.tasks[i]=e,this.taskQueue.push(i),this.invoker.trigger()):this.processTask(i,e)},ph.prototype.process=function(){if(this.taskQueue.length){var t=this.taskQueue.shift(),e=this.tasks[t];delete this.tasks[t],this.taskQueue.length&&this.invoker.trigger(),e&&this.processTask(t,e)}},ph.prototype.processTask=function(t,e){var i=this;if("<response>"===e.type){var c=this.callbacks[t];delete this.callbacks[t],c&&(e.error?c(So(e.error)):c(null,So(e.data)))}else{var m=!1,S=_e(this.globalScope)?void 0:[],F=e.hasCallback?function(Bt,Nt){m=!0,delete i.cancelCallbacks[t],i.target.postMessage({id:t,type:"<response>",sourceMapId:i.mapId,error:Bt?jr(Bt):null,data:jr(Nt,S)},S)}:function(Bt){m=!0},Q=null,_t=So(e.data);if(this.parent[e.type])Q=this.parent[e.type](e.sourceMapId,_t,F);else if(this.parent.getWorkerSource){var kt=e.type.split(".");Q=this.parent.getWorkerSource(e.sourceMapId,kt[0],_t.source)[kt[1]](_t,F)}else F(new Error("Could not find function "+e.type));!m&&Q&&Q.cancel&&(this.cancelCallbacks[t]=Q.cancel)}},ph.prototype.remove=function(){this.invoker.remove(),this.target.removeEventListener("message",this.receive,!1)};var Bs=function(t,e){t&&(e?this.setSouthWest(t).setNorthEast(e):4===t.length?this.setSouthWest([t[0],t[1]]).setNorthEast([t[2],t[3]]):this.setSouthWest(t[0]).setNorthEast(t[1]))};Bs.prototype.setNorthEast=function(t){return this._ne=t instanceof qr?new qr(t.lng,t.lat):qr.convert(t),this},Bs.prototype.setSouthWest=function(t){return this._sw=t instanceof qr?new qr(t.lng,t.lat):qr.convert(t),this},Bs.prototype.extend=function(t){var e,i,c=this._sw,m=this._ne;if(t instanceof qr)e=t,i=t;else{if(!(t instanceof Bs))return Array.isArray(t)?4===t.length||t.every(Array.isArray)?this.extend(Bs.convert(t)):this.extend(qr.convert(t)):this;if(i=t._ne,!(e=t._sw)||!i)return this}return c||m?(c.lng=Math.min(e.lng,c.lng),c.lat=Math.min(e.lat,c.lat),m.lng=Math.max(i.lng,m.lng),m.lat=Math.max(i.lat,m.lat)):(this._sw=new qr(e.lng,e.lat),this._ne=new qr(i.lng,i.lat)),this},Bs.prototype.getCenter=function(){return new qr((this._sw.lng+this._ne.lng)/2,(this._sw.lat+this._ne.lat)/2)},Bs.prototype.getSouthWest=function(){return this._sw},Bs.prototype.getNorthEast=function(){return this._ne},Bs.prototype.getNorthWest=function(){return new qr(this.getWest(),this.getNorth())},Bs.prototype.getSouthEast=function(){return new qr(this.getEast(),this.getSouth())},Bs.prototype.getWest=function(){return this._sw.lng},Bs.prototype.getSouth=function(){return this._sw.lat},Bs.prototype.getEast=function(){return this._ne.lng},Bs.prototype.getNorth=function(){return this._ne.lat},Bs.prototype.toArray=function(){return[this._sw.toArray(),this._ne.toArray()]},Bs.prototype.toString=function(){return"LngLatBounds("+this._sw.toString()+", "+this._ne.toString()+")"},Bs.prototype.isEmpty=function(){return!(this._sw&&this._ne)},Bs.prototype.contains=function(t){var e=qr.convert(t),i=e.lng,c=e.lat,m=this._sw.lng<=i&&i<=this._ne.lng;return this._sw.lng>this._ne.lng&&(m=this._sw.lng>=i&&i>=this._ne.lng),this._sw.lat<=c&&c<=this._ne.lat&&m},Bs.convert=function(t){return!t||t instanceof Bs?t:new Bs(t)};var qr=function(t,e){if(isNaN(t)||isNaN(e))throw new Error("Invalid LngLat object: ("+t+", "+e+")");if(this.lng=+t,this.lat=+e,this.lat>90||this.lat<-90)throw new Error("Invalid LngLat latitude value: must be between -90 and 90")};qr.prototype.wrap=function(){return new qr(B(this.lng,-180,180),this.lat)},qr.prototype.toArray=function(){return[this.lng,this.lat]},qr.prototype.toString=function(){return"LngLat("+this.lng+", "+this.lat+")"},qr.prototype.distanceTo=function(t){var e=Math.PI/180,i=this.lat*e,c=t.lat*e,m=Math.sin(i)*Math.sin(c)+Math.cos(i)*Math.cos(c)*Math.cos((t.lng-this.lng)*e);return 6371008.8*Math.acos(Math.min(m,1))},qr.prototype.toBounds=function(t){void 0===t&&(t=0);var e=360*t/40075017,i=e/Math.cos(Math.PI/180*this.lat);return new Bs(new qr(this.lng-i,this.lat-e),new qr(this.lng+i,this.lat+e))},qr.convert=function(t){if(t instanceof qr)return t;if(Array.isArray(t)&&(2===t.length||3===t.length))return new qr(Number(t[0]),Number(t[1]));if(!Array.isArray(t)&&"object"==typeof t&&null!==t)return new qr(Number("lng"in t?t.lng:t.lon),Number(t.lat));throw new Error("`LngLatLike` argument must be specified as a LngLat instance, an object {lng: <lng>, lat: <lat>}, an object {lon: <lng>, lat: <lat>}, or an array of [<lng>, <lat>]")};var Nu=2*Math.PI*6371008.8;function Uu(t){return Nu*Math.cos(t*Math.PI/180)}function Vu(t){return(180+t)/360}function Hu(t){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+t*Math.PI/360)))/360}function Gu(t,e){return t/Uu(e)}function Vc(t){return 360/Math.PI*Math.atan(Math.exp((180-360*t)*Math.PI/180))-90}var Kl=function(t,e,i){void 0===i&&(i=0),this.x=+t,this.y=+e,this.z=+i};Kl.fromLngLat=function(t,e){void 0===e&&(e=0);var i=qr.convert(t);return new Kl(Vu(i.lng),Hu(i.lat),Gu(e,i.lat))},Kl.prototype.toLngLat=function(){return new qr(360*this.x-180,Vc(this.y))},Kl.prototype.toAltitude=function(){return this.z*Uu(Vc(this.y))},Kl.prototype.meterInMercatorCoordinateUnits=function(){return 1/Nu*(t=Vc(this.y),1/Math.cos(t*Math.PI/180));var t};var $l=function(t,e,i){this.z=t,this.x=e,this.y=i,this.key=Bh(0,t,t,e,i)};$l.prototype.equals=function(t){return this.z===t.z&&this.x===t.x&&this.y===t.y},$l.prototype.url=function(t,e){var i,c,m,S,F,Q=(c=this.y,m=this.z,S=Fu(256*(i=this.x),256*(c=Math.pow(2,m)-c-1),m),F=Fu(256*(i+1),256*(c+1),m),S[0]+","+S[1]+","+F[0]+","+F[1]),_t=function(kt,Bt,Nt){for(var $t,ie="",ke=kt;ke>0;ke--)ie+=(Bt&($t=1<<ke-1)?1:0)+(Nt&$t?2:0);return ie}(this.z,this.x,this.y);return t[(this.x+this.y)%t.length].replace("{prefix}",(this.x%16).toString(16)+(this.y%16).toString(16)).replace("{z}",String(this.z)).replace("{x}",String(this.x)).replace("{y}",String("tms"===e?Math.pow(2,this.z)-this.y-1:this.y)).replace("{quadkey}",_t).replace("{bbox-epsg-3857}",Q)},$l.prototype.getTilePoint=function(t){var e=Math.pow(2,this.z);return new v(8192*(t.x*e-this.x),8192*(t.y*e-this.y))},$l.prototype.toString=function(){return this.z+"/"+this.x+"/"+this.y};var Wu=function(t,e){this.wrap=t,this.canonical=e,this.key=Bh(t,e.z,e.z,e.x,e.y)},Rs=function(t,e,i,c,m){this.overscaledZ=t,this.wrap=e,this.canonical=new $l(i,+c,+m),this.key=Bh(e,t,i,c,m)};function Bh(t,e,i,c,m){(t*=2)<0&&(t=-1*t-1);var S=1<<i;return(S*S*t+S*m+c).toString(36)+i.toString(36)+e.toString(36)}Rs.prototype.equals=function(t){return this.overscaledZ===t.overscaledZ&&this.wrap===t.wrap&&this.canonical.equals(t.canonical)},Rs.prototype.scaledTo=function(t){var e=this.canonical.z-t;return t>this.canonical.z?new Rs(t,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y):new Rs(t,this.wrap,t,this.canonical.x>>e,this.canonical.y>>e)},Rs.prototype.calculateScaledKey=function(t,e){var i=this.canonical.z-t;return t>this.canonical.z?Bh(this.wrap*+e,t,this.canonical.z,this.canonical.x,this.canonical.y):Bh(this.wrap*+e,t,t,this.canonical.x>>i,this.canonical.y>>i)},Rs.prototype.isChildOf=function(t){if(t.wrap!==this.wrap)return!1;var e=this.canonical.z-t.canonical.z;return 0===t.overscaledZ||t.overscaledZ<this.overscaledZ&&t.canonical.x===this.canonical.x>>e&&t.canonical.y===this.canonical.y>>e},Rs.prototype.children=function(t){if(this.overscaledZ>=t)return[new Rs(this.overscaledZ+1,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)];var e=this.canonical.z+1,i=2*this.canonical.x,c=2*this.canonical.y;return[new Rs(e,this.wrap,e,i,c),new Rs(e,this.wrap,e,i+1,c),new Rs(e,this.wrap,e,i,c+1),new Rs(e,this.wrap,e,i+1,c+1)]},Rs.prototype.isLessThan=function(t){return this.wrap<t.wrap||!(this.wrap>t.wrap)&&(this.overscaledZ<t.overscaledZ||!(this.overscaledZ>t.overscaledZ)&&(this.canonical.x<t.canonical.x||!(this.canonical.x>t.canonical.x)&&this.canonical.y<t.canonical.y))},Rs.prototype.wrapped=function(){return new Rs(this.overscaledZ,0,this.canonical.z,this.canonical.x,this.canonical.y)},Rs.prototype.unwrapTo=function(t){return new Rs(this.overscaledZ,t,this.canonical.z,this.canonical.x,this.canonical.y)},Rs.prototype.overscaleFactor=function(){return Math.pow(2,this.overscaledZ-this.canonical.z)},Rs.prototype.toUnwrapped=function(){return new Wu(this.wrap,this.canonical)},Rs.prototype.toString=function(){return this.overscaledZ+"/"+this.canonical.x+"/"+this.canonical.y},Rs.prototype.getTilePoint=function(t){return this.canonical.getTilePoint(new Kl(t.x-this.wrap,t.y))},Hi("CanonicalTileID",$l),Hi("OverscaledTileID",Rs,{omit:["posMatrix"]});var zl=function(t,e,i){if(this.uid=t,e.height!==e.width)throw new RangeError("DEM tiles must be square");if(i&&"mapbox"!==i&&"terrarium"!==i)return ht('"'+i+'" is not a valid encoding type. Valid types include "mapbox" and "terrarium".');this.stride=e.height;var c=this.dim=e.height-2;this.data=new Uint32Array(e.data.buffer),this.encoding=i||"mapbox";for(var m=0;m<c;m++)this.data[this._idx(-1,m)]=this.data[this._idx(0,m)],this.data[this._idx(c,m)]=this.data[this._idx(c-1,m)],this.data[this._idx(m,-1)]=this.data[this._idx(m,0)],this.data[this._idx(m,c)]=this.data[this._idx(m,c-1)];this.data[this._idx(-1,-1)]=this.data[this._idx(0,0)],this.data[this._idx(c,-1)]=this.data[this._idx(c-1,0)],this.data[this._idx(-1,c)]=this.data[this._idx(0,c-1)],this.data[this._idx(c,c)]=this.data[this._idx(c-1,c-1)]};zl.prototype.get=function(t,e){var i=new Uint8Array(this.data.buffer),c=4*this._idx(t,e);return("terrarium"===this.encoding?this._unpackTerrarium:this._unpackMapbox)(i[c],i[c+1],i[c+2])},zl.prototype.getUnpackVector=function(){return"terrarium"===this.encoding?[256,1,1/256,32768]:[6553.6,25.6,.1,1e4]},zl.prototype._idx=function(t,e){if(t<-1||t>=this.dim+1||e<-1||e>=this.dim+1)throw new RangeError("out of range source coordinates for DEM data");return(e+1)*this.stride+(t+1)},zl.prototype._unpackMapbox=function(t,e,i){return(256*t*256+256*e+i)/10-1e4},zl.prototype._unpackTerrarium=function(t,e,i){return 256*t+e+i/256-32768},zl.prototype.getPixels=function(){return new Ei({width:this.stride,height:this.stride},new Uint8Array(this.data.buffer))},zl.prototype.backfillBorder=function(t,e,i){if(this.dim!==t.dim)throw new Error("dem dimension mismatch");var c=e*this.dim,m=e*this.dim+this.dim,S=i*this.dim,F=i*this.dim+this.dim;switch(e){case-1:c=m-1;break;case 1:m=c+1}switch(i){case-1:S=F-1;break;case 1:F=S+1}for(var Q=-e*this.dim,_t=-i*this.dim,kt=S;kt<F;kt++)for(var Bt=c;Bt<m;Bt++)this.data[this._idx(Bt,kt)]=t.data[this._idx(Bt+Q,kt+_t)]},Hi("DEMData",zl);var uc=function(t){this._stringToNumber={},this._numberToString=[];for(var e=0;e<t.length;e++){var i=t[e];this._stringToNumber[i]=e,this._numberToString[e]=i}};uc.prototype.encode=function(t){return this._stringToNumber[t]},uc.prototype.decode=function(t){return this._numberToString[t]};var pc=function(t,e,i,c,m){this.type="Feature",this._vectorTileFeature=t,t._z=e,t._x=i,t._y=c,this.properties=t.properties,this.id=m},Hc={geometry:{configurable:!0}};Hc.geometry.get=function(){return void 0===this._geometry&&(this._geometry=this._vectorTileFeature.toGeoJSON(this._vectorTileFeature._x,this._vectorTileFeature._y,this._vectorTileFeature._z).geometry),this._geometry},Hc.geometry.set=function(t){this._geometry=t},pc.prototype.toJSON=function(){var t={geometry:this.geometry};for(var e in this)"_geometry"!==e&&"_vectorTileFeature"!==e&&(t[e]=this[e]);return t},Object.defineProperties(pc.prototype,Hc);var dh=function(){this.state={},this.stateChanges={},this.deletedStates={}};dh.prototype.updateState=function(t,e,i){var c=String(e);if(this.stateChanges[t]=this.stateChanges[t]||{},this.stateChanges[t][c]=this.stateChanges[t][c]||{},H(this.stateChanges[t][c],i),null===this.deletedStates[t])for(var m in this.deletedStates[t]={},this.state[t])m!==c&&(this.deletedStates[t][m]=null);else if(this.deletedStates[t]&&null===this.deletedStates[t][c])for(var S in this.deletedStates[t][c]={},this.state[t][c])i[S]||(this.deletedStates[t][c][S]=null);else for(var F in i)this.deletedStates[t]&&this.deletedStates[t][c]&&null===this.deletedStates[t][c][F]&&delete this.deletedStates[t][c][F]},dh.prototype.removeFeatureState=function(t,e,i){if(null!==this.deletedStates[t]){var c=String(e);if(this.deletedStates[t]=this.deletedStates[t]||{},i&&void 0!==e)null!==this.deletedStates[t][c]&&(this.deletedStates[t][c]=this.deletedStates[t][c]||{},this.deletedStates[t][c][i]=null);else if(void 0!==e)if(this.stateChanges[t]&&this.stateChanges[t][c])for(i in this.deletedStates[t][c]={},this.stateChanges[t][c])this.deletedStates[t][c][i]=null;else this.deletedStates[t][c]=null;else this.deletedStates[t]=null}},dh.prototype.getState=function(t,e){var i=String(e),c=H({},(this.state[t]||{})[i],(this.stateChanges[t]||{})[i]);if(null===this.deletedStates[t])return{};if(this.deletedStates[t]){var m=this.deletedStates[t][e];if(null===m)return{};for(var S in m)delete c[S]}return c},dh.prototype.initializeTileState=function(t,e){t.setFeatureState(this.state,e)},dh.prototype.coalesceChanges=function(t,e){var i={};for(var c in this.stateChanges){this.state[c]=this.state[c]||{};var m={};for(var S in this.stateChanges[c])this.state[c][S]||(this.state[c][S]={}),H(this.state[c][S],this.stateChanges[c][S]),m[S]=this.state[c][S];i[c]=m}for(var F in this.deletedStates){this.state[F]=this.state[F]||{};var Q={};if(null===this.deletedStates[F])for(var _t in this.state[F])Q[_t]={},this.state[F][_t]={};else for(var kt in this.deletedStates[F]){if(null===this.deletedStates[F][kt])this.state[F][kt]={};else for(var Bt=0,Nt=Object.keys(this.deletedStates[F][kt]);Bt<Nt.length;Bt+=1)delete this.state[F][kt][Nt[Bt]];Q[kt]=this.state[F][kt]}i[F]=i[F]||{},H(i[F],Q)}if(this.stateChanges={},this.deletedStates={},0!==Object.keys(i).length)for(var $t in t)t[$t].setFeatureState(i,e)};var Ol=function(t,e){this.tileID=t,this.x=t.canonical.x,this.y=t.canonical.y,this.z=t.canonical.z,this.grid=new jo(8192,16,0),this.grid3D=new jo(8192,16,0),this.featureIndexArray=new Ht,this.promoteId=e};function Zu(t,e,i,c,m){return pt(t,function(S,F){var Q=e instanceof La?e.get(F):null;return Q&&Q.evaluate?Q.evaluate(i,c,m):Q})}function qu(t){for(var e=1/0,i=1/0,c=-1/0,m=-1/0,S=0,F=t;S<F.length;S+=1){var Q=F[S];e=Math.min(e,Q.x),i=Math.min(i,Q.y),c=Math.max(c,Q.x),m=Math.max(m,Q.y)}return{minX:e,minY:i,maxX:c,maxY:m}}function Td(t,e){return e-t}Ol.prototype.insert=function(t,e,i,c,m,S){var F=this.featureIndexArray.length;this.featureIndexArray.emplaceBack(i,c,m);for(var Q=S?this.grid3D:this.grid,_t=0;_t<e.length;_t++){for(var kt=e[_t],Bt=[1/0,1/0,-1/0,-1/0],Nt=0;Nt<kt.length;Nt++){var $t=kt[Nt];Bt[0]=Math.min(Bt[0],$t.x),Bt[1]=Math.min(Bt[1],$t.y),Bt[2]=Math.max(Bt[2],$t.x),Bt[3]=Math.max(Bt[3],$t.y)}Bt[0]<8192&&Bt[1]<8192&&Bt[2]>=0&&Bt[3]>=0&&Q.insert(F,Bt[0],Bt[1],Bt[2],Bt[3])}},Ol.prototype.loadVTLayers=function(){return this.vtLayers||(this.vtLayers=new nh.VectorTile(new tc(this.rawTileData)).layers,this.sourceLayerCoder=new uc(this.vtLayers?Object.keys(this.vtLayers).sort():["_geojsonTileLayer"])),this.vtLayers},Ol.prototype.query=function(t,e,i,c){var m=this;this.loadVTLayers();for(var S=t.params||{},F=8192/t.tileSize/t.scale,Q=Di(S.filter),_t=t.queryGeometry,kt=t.queryPadding*F,Bt=qu(_t),Nt=this.grid.query(Bt.minX-kt,Bt.minY-kt,Bt.maxX+kt,Bt.maxY+kt),$t=qu(t.cameraQueryGeometry),ke=0,Le=this.grid3D.query($t.minX-kt,$t.minY-kt,$t.maxX+kt,$t.maxY+kt,function(gi,_i,Ai,qi){return function(on,In,dn,Dn,mn){for(var Po=0,eo=on;Po<eo.length;Po+=1){var Tn=eo[Po];if(In<=Tn.x&&dn<=Tn.y&&Dn>=Tn.x&&mn>=Tn.y)return!0}var zo=[new v(In,dn),new v(In,mn),new v(Dn,mn),new v(Dn,dn)];if(on.length>2)for(var xo=0,Ko=zo;xo<Ko.length;xo+=1)if(n(on,Ko[xo]))return!0;for(var Bn=0;Bn<on.length-1;Bn++)if(h(on[Bn],on[Bn+1],zo))return!0;return!1}(t.cameraQueryGeometry,gi-kt,_i-kt,Ai+kt,qi+kt)});ke<Le.length;ke+=1)Nt.push(Le[ke]);Nt.sort(Td);for(var Ve,ze={},Qe=function(gi){var _i=Nt[gi];if(_i!==Ve){Ve=_i;var Ai=m.featureIndexArray.get(_i),qi=null;m.loadMatchingFeature(ze,Ai.bucketIndex,Ai.sourceLayerIndex,Ai.featureIndex,Q,S.layers,S.availableImages,e,i,c,function(on,In,dn){return qi||(qi=kr(on)),In.queryIntersectsFeature(_t,on,dn,qi,m.z,t.transform,F,t.pixelPosMatrix)})}},li=0;li<Nt.length;li++)Qe(li);return ze},Ol.prototype.loadMatchingFeature=function(t,e,i,c,m,S,F,Q,_t,kt,Bt){var Nt=this.bucketLayerIDs[e];if(!S||function(on,In){for(var dn=0;dn<on.length;dn++)if(In.indexOf(on[dn])>=0)return!0;return!1}(S,Nt)){var $t=this.sourceLayerCoder.decode(i),ie=this.vtLayers[$t].feature(c);if(m.needGeometry){var ke=Ur(ie,!0);if(!m.filter(new To(this.tileID.overscaledZ),ke,this.tileID.canonical))return}else if(!m.filter(new To(this.tileID.overscaledZ),ie))return;for(var Le=this.getId(ie,$t),Ve=0;Ve<Nt.length;Ve++){var ze=Nt[Ve];if(!(S&&S.indexOf(ze)<0)){var Qe=Q[ze];if(Qe){var li={};void 0!==Le&&kt&&(li=kt.getState(Qe.sourceLayer||"_geojsonTileLayer",Le));var gi=H({},_t[ze]);gi.paint=Zu(gi.paint,Qe.paint,ie,li,F),gi.layout=Zu(gi.layout,Qe.layout,ie,li,F);var _i=!Bt||Bt(ie,Qe,li);if(_i){var Ai=new pc(ie,this.z,this.x,this.y,Le);Ai.layer=gi;var qi=t[ze];void 0===qi&&(qi=t[ze]=[]),qi.push({featureIndex:c,feature:Ai,intersectionZ:_i})}}}}}},Ol.prototype.lookupSymbolFeatures=function(t,e,i,c,m,S,F,Q){var _t={};this.loadVTLayers();for(var kt=Di(m),Bt=0,Nt=t;Bt<Nt.length;Bt+=1)this.loadMatchingFeature(_t,i,c,Nt[Bt],kt,S,F,Q,e);return _t},Ol.prototype.hasLayer=function(t){for(var e=0,i=this.bucketLayerIDs;e<i.length;e+=1)for(var c=0,m=i[e];c<m.length;c+=1)if(t===m[c])return!0;return!1},Ol.prototype.getId=function(t,e){var i=t.id;return this.promoteId&&"boolean"==typeof(i=t.properties["string"==typeof this.promoteId?this.promoteId:this.promoteId[e]])&&(i=Number(i)),i},Hi("FeatureIndex",Ol,{omit:["rawTileData","sourceLayerCoder"]});var Xs=function(t,e){this.tileID=t,this.uid=ft(),this.uses=0,this.tileSize=e,this.buckets={},this.expirationTime=null,this.queryPadding=0,this.hasSymbolBuckets=!1,this.hasRTLText=!1,this.dependencies={},this.expiredRequestCount=0,this.state="loading"};Xs.prototype.registerFadeDuration=function(t){var e=t+this.timeAdded;e<xe.now()||this.fadeEndTime&&e<this.fadeEndTime||(this.fadeEndTime=e)},Xs.prototype.wasRequested=function(){return"errored"===this.state||"loaded"===this.state||"reloading"===this.state},Xs.prototype.loadVectorData=function(t,e,i){if(this.hasData()&&this.unloadVectorData(),this.state="loaded",t){for(var c in t.featureIndex&&(this.latestFeatureIndex=t.featureIndex,t.rawTileData?(this.latestRawTileData=t.rawTileData,this.latestFeatureIndex.rawTileData=t.rawTileData):this.latestRawTileData&&(this.latestFeatureIndex.rawTileData=this.latestRawTileData)),this.collisionBoxArray=t.collisionBoxArray,this.buckets=function(kt,Bt){var Nt={};if(!Bt)return Nt;for(var $t=function(){var Le=ke[ie],Ve=Le.layerIds.map(function(li){return Bt.getLayer(li)}).filter(Boolean);if(0!==Ve.length){Le.layers=Ve,Le.stateDependentLayerIds&&(Le.stateDependentLayers=Le.stateDependentLayerIds.map(function(li){return Ve.filter(function(gi){return gi.id===li})[0]}));for(var ze=0,Qe=Ve;ze<Qe.length;ze+=1)Nt[Qe[ze].id]=Le}},ie=0,ke=kt;ie<ke.length;ie+=1)$t();return Nt}(t.buckets,e.style),this.hasSymbolBuckets=!1,this.buckets){var m=this.buckets[c];if(m instanceof Sr){if(this.hasSymbolBuckets=!0,!i)break;m.justReloaded=!0}}if(this.hasRTLText=!1,this.hasSymbolBuckets)for(var S in this.buckets){var F=this.buckets[S];if(F instanceof Sr&&F.hasRTLText){this.hasRTLText=!0,fs.isLoading()||fs.isLoaded()||"deferred"!==sl()||Ws();break}}for(var Q in this.queryPadding=0,this.buckets){var _t=this.buckets[Q];this.queryPadding=Math.max(this.queryPadding,e.style.getLayer(Q).queryRadius(_t))}t.imageAtlas&&(this.imageAtlas=t.imageAtlas),t.glyphAtlasImage&&(this.glyphAtlasImage=t.glyphAtlasImage)}else this.collisionBoxArray=new a},Xs.prototype.unloadVectorData=function(){for(var t in this.buckets)this.buckets[t].destroy();this.buckets={},this.imageAtlasTexture&&this.imageAtlasTexture.destroy(),this.imageAtlas&&(this.imageAtlas=null),this.glyphAtlasTexture&&this.glyphAtlasTexture.destroy(),this.latestFeatureIndex=null,this.state="unloaded"},Xs.prototype.getBucket=function(t){return this.buckets[t.id]},Xs.prototype.upload=function(t){for(var e in this.buckets){var i=this.buckets[e];i.uploadPending()&&i.upload(t)}var c=t.gl;this.imageAtlas&&!this.imageAtlas.uploaded&&(this.imageAtlasTexture=new Yl(t,this.imageAtlas.image,c.RGBA),this.imageAtlas.uploaded=!0),this.glyphAtlasImage&&(this.glyphAtlasTexture=new Yl(t,this.glyphAtlasImage,c.ALPHA),this.glyphAtlasImage=null)},Xs.prototype.prepare=function(t){this.imageAtlas&&this.imageAtlas.patchUpdatedImages(t,this.imageAtlasTexture)},Xs.prototype.queryRenderedFeatures=function(t,e,i,c,m,S,F,Q,_t,kt){return this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData?this.latestFeatureIndex.query({queryGeometry:c,cameraQueryGeometry:m,scale:S,tileSize:this.tileSize,pixelPosMatrix:kt,transform:Q,params:F,queryPadding:this.queryPadding*_t},t,e,i):{}},Xs.prototype.querySourceFeatures=function(t,e){var i=this.latestFeatureIndex;if(i&&i.rawTileData){var c=i.loadVTLayers(),m=e?e.sourceLayer:"",S=c._geojsonTileLayer||c[m];if(S)for(var F=Di(e&&e.filter),Q=this.tileID.canonical,_t=Q.z,kt=Q.x,Bt=Q.y,Nt={z:_t,x:kt,y:Bt},$t=0;$t<S.length;$t++){var ie=S.feature($t);if(F.needGeometry){var ke=Ur(ie,!0);if(!F.filter(new To(this.tileID.overscaledZ),ke,this.tileID.canonical))continue}else if(!F.filter(new To(this.tileID.overscaledZ),ie))continue;var Le=i.getId(ie,m),Ve=new pc(ie,_t,kt,Bt,Le);Ve.tile=Nt,t.push(Ve)}}},Xs.prototype.hasData=function(){return"loaded"===this.state||"reloading"===this.state||"expired"===this.state},Xs.prototype.patternsLoaded=function(){return this.imageAtlas&&!!Object.keys(this.imageAtlas.patternPositions).length},Xs.prototype.setExpiryData=function(t){var e=this.expirationTime;if(t.cacheControl){var i=Ot(t.cacheControl);i["max-age"]&&(this.expirationTime=Date.now()+1e3*i["max-age"])}else t.expires&&(this.expirationTime=new Date(t.expires).getTime());if(this.expirationTime){var c=Date.now(),m=!1;if(this.expirationTime>c)m=!1;else if(e)if(this.expirationTime<e)m=!0;else{var S=this.expirationTime-e;S?this.expirationTime=c+Math.max(S,3e4):m=!0}else m=!0;m?(this.expiredRequestCount++,this.state="expired"):this.expiredRequestCount=0}},Xs.prototype.getExpiryTimeout=function(){if(this.expirationTime)return this.expiredRequestCount?1e3*(1<<Math.min(this.expiredRequestCount-1,31)):Math.min(this.expirationTime-(new Date).getTime(),Math.pow(2,31)-1)},Xs.prototype.setFeatureState=function(t,e){if(this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData&&0!==Object.keys(t).length){var i=this.latestFeatureIndex.loadVTLayers();for(var c in this.buckets)if(e.style.hasLayer(c)){var m=this.buckets[c],S=m.layers[0].sourceLayer||"_geojsonTileLayer",F=i[S],Q=t[S];if(F&&Q&&0!==Object.keys(Q).length){m.update(Q,F,this.imageAtlas&&this.imageAtlas.patternPositions||{});var _t=e&&e.style&&e.style.getLayer(c);_t&&(this.queryPadding=Math.max(this.queryPadding,_t.queryRadius(m)))}}}},Xs.prototype.holdingForFade=function(){return void 0!==this.symbolFadeHoldUntil},Xs.prototype.symbolFadeFinished=function(){return!this.symbolFadeHoldUntil||this.symbolFadeHoldUntil<xe.now()},Xs.prototype.clearFadeHold=function(){this.symbolFadeHoldUntil=void 0},Xs.prototype.setHoldDuration=function(t){this.symbolFadeHoldUntil=xe.now()+t},Xs.prototype.setDependencies=function(t,e){for(var i={},c=0,m=e;c<m.length;c+=1)i[m[c]]=!0;this.dependencies[t]=i},Xs.prototype.hasDependency=function(t,e){for(var i=0,c=t;i<c.length;i+=1){var m=this.dependencies[c[i]];if(m)for(var S=0,F=e;S<F.length;S+=1)if(m[F[S]])return!0}return!1};var Ul=b.performance,Xu=function(t){this._marks={start:[t.url,"start"].join("#"),end:[t.url,"end"].join("#"),measure:t.url.toString()},Ul.mark(this._marks.start)};Xu.prototype.finish=function(){Ul.mark(this._marks.end);var t=Ul.getEntriesByName(this._marks.measure);return 0===t.length&&(Ul.measure(this._marks.measure,this._marks.start,this._marks.end),t=Ul.getEntriesByName(this._marks.measure),Ul.clearMarks(this._marks.start),Ul.clearMarks(this._marks.end),Ul.clearMeasures(this._marks.measure)),t},l.Actor=ph,l.AlphaImage=pi,l.CanonicalTileID=$l,l.CollisionBoxArray=a,l.Color=gn,l.DEMData=zl,l.DataConstantProperty=Pn,l.DictionaryCoder=uc,l.EXTENT=8192,l.ErrorEvent=De,l.EvaluationParameters=To,l.Event=Ce,l.Evented=Ge,l.FeatureIndex=Ol,l.FillBucket=yl,l.FillExtrusionBucket=vl,l.ImageAtlas=zh,l.ImagePosition=ic,l.LineBucket=Ea,l.LngLat=qr,l.LngLatBounds=Bs,l.MercatorCoordinate=Kl,l.ONE_EM=24,l.OverscaledTileID=Rs,l.Point=v,l.Point$1=v,l.Properties=ms,l.Protobuf=tc,l.RGBAImage=Ei,l.RequestManager=Ii,l.RequestPerformance=Xu,l.ResourceType=po,l.SegmentVector=le,l.SourceFeatureState=dh,l.StructArrayLayout1ui2=ql,l.StructArrayLayout2f1f2i16=fl,l.StructArrayLayout2i4=Ha,l.StructArrayLayout3ui6=Qa,l.StructArrayLayout4i8=Fl,l.SymbolBucket=Sr,l.Texture=Yl,l.Tile=Xs,l.Transitionable=ts,l.Uniform1f=$i,l.Uniform1i=Ri,l.Uniform2f=Xi,l.Uniform3f=fn,l.Uniform4f=Mn,l.UniformColor=zn,l.UniformMatrix4f=Wo,l.UnwrappedTileID=Wu,l.ValidationError=Ee,l.WritingMode=Za,l.ZoomHistory=bs,l.add=function(t,e,i){return t[0]=e[0]+i[0],t[1]=e[1]+i[1],t[2]=e[2]+i[2],t},l.addDynamicAttributes=Fc,l.asyncAll=function(t,e,i){if(!t.length)return i(null,[]);var c=t.length,m=new Array(t.length),S=null;t.forEach(function(F,Q){e(F,function(_t,kt){_t&&(S=_t),m[Q]=kt,0==--c&&i(S,m)})})},l.bezier=_,l.bindAll=q,l.browser=xe,l.cacheEntryPossiblyAdded=function(t){++Dr>Fn&&(t.getActor().send("enforceCacheSizeLimit",hn),Dr=0)},l.clamp=O,l.clearTileCache=function(t){var e=b.caches.delete("mapbox-tiles");t&&e.catch(t).then(function(){return t()})},l.clipLine=Eu,l.clone=function(t){var e=new ot(16);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e},l.clone$1=Y,l.clone$2=function(t){var e=new ot(3);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e},l.collisionCircleLayout=Gp,l.config=be,l.create=function(){var t=new ot(16);return ot!=Float32Array&&(t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0),t[0]=1,t[5]=1,t[10]=1,t[15]=1,t},l.create$1=function(){var t=new ot(9);return ot!=Float32Array&&(t[1]=0,t[2]=0,t[3]=0,t[5]=0,t[6]=0,t[7]=0),t[0]=1,t[4]=1,t[8]=1,t},l.create$2=function(){var t=new ot(4);return ot!=Float32Array&&(t[1]=0,t[2]=0),t[0]=1,t[3]=1,t},l.createCommonjsModule=it,l.createExpression=ca,l.createLayout=Pr,l.createStyleLayer=function(t){return"custom"===t.type?new wd(t):new Sd[t.type](t)},l.cross=function(t,e,i){var c=e[0],m=e[1],S=e[2],F=i[0],Q=i[1],_t=i[2];return t[0]=m*_t-S*Q,t[1]=S*F-c*_t,t[2]=c*Q-m*F,t},l.deepEqual=function t(e,i){if(Array.isArray(e)){if(!Array.isArray(i)||e.length!==i.length)return!1;for(var c=0;c<e.length;c++)if(!t(e[c],i[c]))return!1;return!0}if("object"==typeof e&&null!==e&&null!==i){if("object"!=typeof i||Object.keys(e).length!==Object.keys(i).length)return!1;for(var m in e)if(!t(e[m],i[m]))return!1;return!0}return e===i},l.dot=function(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]},l.dot$1=function(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]+t[3]*e[3]},l.ease=y,l.emitValidationErrors=Eo,l.endsWith=mt,l.enforceCacheSizeLimit=function(t){Mo(),bt&&bt.then(function(e){e.keys().then(function(i){for(var c=0;c<i.length-t;c++)e.delete(i[c])})})},l.evaluateSizeForFeature=Su,l.evaluateSizeForZoom=Tu,l.evaluateVariableOffset=Iu,l.evented=Ra,l.extend=H,l.featureFilter=Di,l.filterObject=dt,l.fromRotation=function(t,e){var i=Math.sin(e),c=Math.cos(e);return t[0]=c,t[1]=i,t[2]=0,t[3]=-i,t[4]=c,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t},l.getAnchorAlignment=Oc,l.getAnchorJustification=jc,l.getArrayBuffer=kn,l.getImage=Yt,l.getJSON=function(t,e){return lr(H(t,{type:"json"}),e)},l.getRTLTextPluginStatus=sl,l.getReferrer=gr,l.getVideo=function(t,e){var i,c,m=b.document.createElement("video");m.muted=!0,m.onloadstart=function(){e(null,m)};for(var S=0;S<t.length;S++){var F=b.document.createElement("source");i=t[S],c=void 0,(c=b.document.createElement("a")).href=i,(c.protocol!==b.document.location.protocol||c.host!==b.document.location.host)&&(m.crossOrigin="Anonymous"),F.src=t[S],m.appendChild(F)}return{cancel:function(){}}},l.identity=ct,l.invert=function(t,e){var i=e[0],c=e[1],m=e[2],S=e[3],F=e[4],Q=e[5],_t=e[6],kt=e[7],Bt=e[8],Nt=e[9],$t=e[10],ie=e[11],ke=e[12],Le=e[13],Ve=e[14],ze=e[15],Qe=i*Q-c*F,li=i*_t-m*F,gi=i*kt-S*F,_i=c*_t-m*Q,Ai=c*kt-S*Q,qi=m*kt-S*_t,on=Bt*Le-Nt*ke,In=Bt*Ve-$t*ke,dn=Bt*ze-ie*ke,Dn=Nt*Ve-$t*Le,mn=Nt*ze-ie*Le,Po=$t*ze-ie*Ve,eo=Qe*Po-li*mn+gi*Dn+_i*dn-Ai*In+qi*on;return eo?(t[0]=(Q*Po-_t*mn+kt*Dn)*(eo=1/eo),t[1]=(m*mn-c*Po-S*Dn)*eo,t[2]=(Le*qi-Ve*Ai+ze*_i)*eo,t[3]=($t*Ai-Nt*qi-ie*_i)*eo,t[4]=(_t*dn-F*Po-kt*In)*eo,t[5]=(i*Po-m*dn+S*In)*eo,t[6]=(Ve*gi-ke*qi-ze*li)*eo,t[7]=(Bt*qi-$t*gi+ie*li)*eo,t[8]=(F*mn-Q*dn+kt*on)*eo,t[9]=(c*dn-i*mn-S*on)*eo,t[10]=(ke*Ai-Le*gi+ze*Qe)*eo,t[11]=(Nt*gi-Bt*Ai-ie*Qe)*eo,t[12]=(Q*In-F*Dn-_t*on)*eo,t[13]=(i*Dn-c*In+m*on)*eo,t[14]=(Le*li-ke*_i-Ve*Qe)*eo,t[15]=(Bt*_i-Nt*li+$t*Qe)*eo,t):null},l.isChar=Ni,l.isMapboxURL=Pi,l.keysDifference=function(t,e){var i=[];for(var c in t)c in e||i.push(c);return i},l.makeRequest=lr,l.mapObject=pt,l.mercatorXfromLng=Vu,l.mercatorYfromLat=Hu,l.mercatorZfromAltitude=Gu,l.mul=Vt,l.multiply=Pt,l.mvt=nh,l.nextPowerOfTwo=function(t){return t<=1?1:Math.pow(2,Math.ceil(Math.log(t)/Math.LN2))},l.normalize=function(t,e){var i=e[0],c=e[1],m=e[2],S=i*i+c*c+m*m;return S>0&&(S=1/Math.sqrt(S)),t[0]=e[0]*S,t[1]=e[1]*S,t[2]=e[2]*S,t},l.number=cn,l.offscreenCanvasSupported=No,l.ortho=function(t,e,i,c,m,S,F){var Q=1/(e-i),_t=1/(c-m),kt=1/(S-F);return t[0]=-2*Q,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=-2*_t,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=2*kt,t[11]=0,t[12]=(e+i)*Q,t[13]=(m+c)*_t,t[14]=(F+S)*kt,t[15]=1,t},l.parseGlyphPBF=function(t){return new tc(t).readFields(ed,[])},l.pbf=tc,l.performSymbolLayout=function(t,e,i,c,m,S,F){t.createArrays(),t.tilePixelRatio=8192/(512*t.overscaling),t.compareText={},t.iconsNeedLinear=!1;var Q=t.layers[0].layout,_t=t.layers[0]._unevaluatedLayout._values,kt={};if("composite"===t.textSizeData.kind){var Bt=t.textSizeData,Nt=Bt.maxZoom;kt.compositeTextSizes=[_t["text-size"].possiblyEvaluate(new To(Bt.minZoom),F),_t["text-size"].possiblyEvaluate(new To(Nt),F)]}if("composite"===t.iconSizeData.kind){var $t=t.iconSizeData,ie=$t.maxZoom;kt.compositeIconSizes=[_t["icon-size"].possiblyEvaluate(new To($t.minZoom),F),_t["icon-size"].possiblyEvaluate(new To(ie),F)]}kt.layoutTextSize=_t["text-size"].possiblyEvaluate(new To(t.zoom+1),F),kt.layoutIconSize=_t["icon-size"].possiblyEvaluate(new To(t.zoom+1),F),kt.textMaxSize=_t["text-size"].possiblyEvaluate(new To(18));for(var ke=24*Q.get("text-line-height"),Le="map"===Q.get("text-rotation-alignment")&&"point"!==Q.get("symbol-placement"),Ve=Q.get("text-keep-upright"),ze=Q.get("text-size"),Qe=function(){var _i=gi[li],Ai=Q.get("text-font").evaluate(_i,{},F).join(","),qi=ze.evaluate(_i,{},F),on=kt.layoutTextSize.evaluate(_i,{},F),In=kt.layoutIconSize.evaluate(_i,{},F),dn={horizontal:{},vertical:void 0},Dn=_i.text,mn=[0,0];if(Dn){var Po=Dn.toString(),eo=24*Q.get("text-letter-spacing").evaluate(_i,{},F),Tn=function(Fo){for(var Er=0,br=Fo;Er<br.length;Er+=1)if($o=br[Er].charCodeAt(0),Ni.Arabic($o)||Ni["Arabic Supplement"]($o)||Ni["Arabic Extended-A"]($o)||Ni["Arabic Presentation Forms-A"]($o)||Ni["Arabic Presentation Forms-B"]($o))return!1;var $o;return!0}(Po)?eo:0,zo=Q.get("text-anchor").evaluate(_i,{},F),xo=Q.get("text-variable-anchor");if(!xo){var Ko=Q.get("text-radial-offset").evaluate(_i,{},F);mn=Ko?Iu(zo,[24*Ko,Rc]):Q.get("text-offset").evaluate(_i,{},F).map(function(Fo){return 24*Fo})}var Bn=Le?"center":Q.get("text-justify").evaluate(_i,{},F),nr=Q.get("symbol-placement"),Xr="point"===nr?24*Q.get("text-max-width").evaluate(_i,{},F):0,hs=function(){t.allowVerticalPlacement&&ws(Po)&&(dn.vertical=nc(Dn,e,i,m,Ai,Xr,ke,zo,"left",Tn,mn,Za.vertical,!0,nr,on,qi))};if(!Le&&xo){for(var rs="auto"===Bn?xo.map(function(Fo){return jc(Fo)}):[Bn],Yr=!1,cs=0;cs<rs.length;cs++){var Ns=rs[cs];if(!dn.horizontal[Ns])if(Yr)dn.horizontal[Ns]=dn.horizontal[0];else{var Us=nc(Dn,e,i,m,Ai,Xr,ke,"center",Ns,Tn,mn,Za.horizontal,!1,nr,on,qi);Us&&(dn.horizontal[Ns]=Us,Yr=1===Us.positionedLines.length)}}hs()}else{"auto"===Bn&&(Bn=jc(zo));var xa=nc(Dn,e,i,m,Ai,Xr,ke,zo,Bn,Tn,mn,Za.horizontal,!1,nr,on,qi);xa&&(dn.horizontal[Bn]=xa),hs(),ws(Po)&&Le&&Ve&&(dn.vertical=nc(Dn,e,i,m,Ai,Xr,ke,zo,Bn,Tn,mn,Za.vertical,!1,nr,on,qi))}}var Fo,Er,$o,Ma,fa,Ys=void 0,ba=!1;if(_i.icon&&_i.icon.name){var gs=c[_i.icon.name];gs&&(Fo=m[_i.icon.name],Er=Q.get("icon-offset").evaluate(_i,{},F),$o=Oc(Q.get("icon-anchor").evaluate(_i,{},F)),Ys={image:Fo,top:fa=Er[1]-Fo.displaySize[1]*$o.verticalAlign,bottom:fa+Fo.displaySize[1],left:Ma=Er[0]-Fo.displaySize[0]*$o.horizontalAlign,right:Ma+Fo.displaySize[0]},ba=gs.sdf,void 0===t.sdfIcons?t.sdfIcons=gs.sdf:t.sdfIcons!==gs.sdf&&ht("Style sheet warning: Cannot mix SDF and non-SDF icons in one buffer"),(gs.pixelRatio!==t.pixelRatio||0!==Q.get("icon-rotate").constantOr(1))&&(t.iconsNeedLinear=!0))}var Ks=zu(dn.horizontal)||dn.vertical;t.iconsInText=!!Ks&&Ks.iconsInText,(Ks||Ys)&&function(Fo,Er,br,$o,Ma,fa,Vr,As,ma,or,Cl){var qa=fa.textMaxSize.evaluate(Er,{});void 0===qa&&(qa=Vr);var Al,ys=Fo.layers[0].layout,Pl=ys.get("icon-offset").evaluate(Er,{},Cl),cl=zu(br.horizontal),fh=Vr/24,Jl=Fo.tilePixelRatio*fh,mh=Fo.tilePixelRatio*qa/24,Bl=Fo.tilePixelRatio*As,gh=Fo.tilePixelRatio*ys.get("symbol-spacing"),dc=ys.get("text-padding")*Fo.tilePixelRatio,yh=ys.get("icon-padding")*Fo.tilePixelRatio,Rh=ys.get("text-max-angle")/180*Math.PI,fc="map"===ys.get("text-rotation-alignment")&&"point"!==ys.get("symbol-placement"),mc="map"===ys.get("icon-rotation-alignment")&&"point"!==ys.get("symbol-placement"),Rl=ys.get("symbol-placement"),jh=gh/2,vh=ys.get("icon-text-fit");$o&&"none"!==vh&&(Fo.allowVerticalPlacement&&br.vertical&&(Al=wu($o,br.vertical,vh,ys.get("icon-text-fit-padding"),Pl,fh)),cl&&($o=wu($o,cl,vh,ys.get("icon-text-fit-padding"),Pl,fh)));var Vl=function(Cd,Zh){Zh.x<0||Zh.x>=8192||Zh.y<0||Zh.y>=8192||function(vs,_l,Ad,Hl,qc,$u,bc,kl,wc,qh,Sc,Tc,Xc,Ju,Xh,Qu,tp,ep,ip,np,Xa,Cc,op,El,Pd){var rp,th,Sh,Th,Ch,Ah=vs.addToLineVertexArray(_l,Ad),sp=0,ap=0,lp=0,hp=0,Yc=-1,Kc=-1,jl={},cp=Se(""),$c=0,Jc=0;if(void 0===kl._unevaluatedLayout.getValue("text-radial-offset")?($c=(rp=kl.layout.get("text-offset").evaluate(Xa,{},El).map(function(Kh){return 24*Kh}))[0],Jc=rp[1]):($c=24*kl.layout.get("text-radial-offset").evaluate(Xa,{},El),Jc=Rc),vs.allowVerticalPlacement&&Hl.vertical){var up=kl.layout.get("text-rotate").evaluate(Xa,{},El)+90;Th=new lc(wc,_l,qh,Sc,Tc,Hl.vertical,Xc,Ju,Xh,up),bc&&(Ch=new lc(wc,_l,qh,Sc,Tc,bc,tp,ep,Xh,up))}if(qc){var Qc=kl.layout.get("icon-rotate").evaluate(Xa,{}),pp="none"!==kl.layout.get("icon-text-fit"),dp=Mu(qc,Qc,op,pp),tu=bc?Mu(bc,Qc,op,pp):void 0;Sh=new lc(wc,_l,qh,Sc,Tc,qc,tp,ep,!1,Qc),sp=4*dp.length;var fp=vs.iconSizeData,Yh=null;"source"===fp.kind?(Yh=[128*kl.layout.get("icon-size").evaluate(Xa,{})])[0]>32640&&ht(vs.layerIds[0]+': Value for "icon-size" is >= 255. Reduce your "icon-size".'):"composite"===fp.kind&&((Yh=[128*Cc.compositeIconSizes[0].evaluate(Xa,{},El),128*Cc.compositeIconSizes[1].evaluate(Xa,{},El)])[0]>32640||Yh[1]>32640)&&ht(vs.layerIds[0]+': Value for "icon-size" is >= 255. Reduce your "icon-size".'),vs.addSymbols(vs.icon,dp,Yh,np,ip,Xa,!1,_l,Ah.lineStartIndex,Ah.lineLength,-1,El),Yc=vs.icon.placedSymbolArray.length-1,tu&&(ap=4*tu.length,vs.addSymbols(vs.icon,tu,Yh,np,ip,Xa,Za.vertical,_l,Ah.lineStartIndex,Ah.lineLength,-1,El),Kc=vs.icon.placedSymbolArray.length-1)}for(var mp in Hl.horizontal){var Ac=Hl.horizontal[mp];if(!th){cp=Se(Ac.text);var kd=kl.layout.get("text-rotate").evaluate(Xa,{},El);th=new lc(wc,_l,qh,Sc,Tc,Ac,Xc,Ju,Xh,kd)}var gp=1===Ac.positionedLines.length;if(lp+=Du(vs,_l,Ac,$u,kl,Xh,Xa,Qu,Ah,Hl.vertical?Za.horizontal:Za.horizontalOnly,gp?Object.keys(Hl.horizontal):[mp],jl,Yc,Cc,El),gp)break}Hl.vertical&&(hp+=Du(vs,_l,Hl.vertical,$u,kl,Xh,Xa,Qu,Ah,Za.vertical,["vertical"],jl,Kc,Cc,El));var Ed=th?th.boxStartIndex:vs.collisionBoxArray.length,Md=th?th.boxEndIndex:vs.collisionBoxArray.length,Ld=Th?Th.boxStartIndex:vs.collisionBoxArray.length,Id=Th?Th.boxEndIndex:vs.collisionBoxArray.length,Dd=Sh?Sh.boxStartIndex:vs.collisionBoxArray.length,zd=Sh?Sh.boxEndIndex:vs.collisionBoxArray.length,Od=Ch?Ch.boxStartIndex:vs.collisionBoxArray.length,Bd=Ch?Ch.boxEndIndex:vs.collisionBoxArray.length,Ml=-1,Pc=function(Kh,vp){return Kh&&Kh.circleDiameter?Math.max(Kh.circleDiameter,vp):vp};Ml=Pc(th,Ml),Ml=Pc(Th,Ml),Ml=Pc(Sh,Ml);var yp=(Ml=Pc(Ch,Ml))>-1?1:0;yp&&(Ml*=Pd/24),vs.glyphOffsetArray.length>=Sr.MAX_GLYPHS&&ht("Too many glyphs being rendered in a tile. See https://github.com/mapbox/mapbox-gl-js/issues/2907"),void 0!==Xa.sortKey&&vs.addToSortKeyRanges(vs.symbolInstances.length,Xa.sortKey),vs.symbolInstances.emplaceBack(_l.x,_l.y,jl.right>=0?jl.right:-1,jl.center>=0?jl.center:-1,jl.left>=0?jl.left:-1,jl.vertical||-1,Yc,Kc,cp,Ed,Md,Ld,Id,Dd,zd,Od,Bd,qh,lp,hp,sp,ap,yp,0,Xc,$c,Jc,Ml)}(Fo,Zh,Cd,br,$o,Ma,Al,Fo.layers[0],Fo.collisionBoxArray,Er.index,Er.sourceLayerIndex,Fo.index,Jl,dc,fc,ma,Bl,yh,mc,Pl,Er,fa,or,Cl,Vr)};if("line"===Rl)for(var _h=0,gc=Eu(Er.geometry,0,0,8192,8192);_h<gc.length;_h+=1)for(var yc=gc[_h],Fh=0,Nh=ld(yc,gh,Rh,br.vertical||cl,$o,24,mh,Fo.overscaling,8192);Fh<Nh.length;Fh+=1){var vc=Nh[Fh];cl&&pd(Fo,cl.text,jh,vc)||Vl(yc,vc)}else if("line-center"===Rl)for(var Uh=0,Vh=Er.geometry;Uh<Vh.length;Uh+=1){var Hh=Vh[Uh];if(Hh.length>1){var _c=ad(Hh,Rh,br.vertical||cl,$o,24,mh);_c&&Vl(Hh,_c)}}else if("Polygon"===Er.type)for(var xh=0,xc=Mc(Er.geometry,0);xh<xc.length;xh+=1){var bh=xc[xh],Gh=cd(bh,16);Vl(bh[0],new ah(Gh.x,Gh.y,0))}else if("LineString"===Er.type)for(var Ql=0,Wh=Er.geometry;Ql<Wh.length;Ql+=1){var wh=Wh[Ql];Vl(wh,new ah(wh[0].x,wh[0].y,0))}else if("Point"===Er.type)for(var Gc=0,Yu=Er.geometry;Gc<Yu.length;Gc+=1)for(var Wc=0,Ku=Yu[Gc];Wc<Ku.length;Wc+=1){var Zc=Ku[Wc];Vl([Zc],new ah(Zc.x,Zc.y,0))}}(t,_i,dn,Ys,c,kt,on,In,mn,ba,F)},li=0,gi=t.features;li<gi.length;li+=1)Qe();S&&t.generateCollisionDebugBuffers()},l.perspective=function(t,e,i,c,m){var S,F=1/Math.tan(e/2);return t[0]=F/i,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=F,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=-1,t[12]=0,t[13]=0,t[15]=0,null!=m&&m!==1/0?(t[10]=(m+c)*(S=1/(c-m)),t[14]=2*m*c*S):(t[10]=-1,t[14]=-2*c),t},l.pick=function(t,e){for(var i={},c=0;c<e.length;c++){var m=e[c];m in t&&(i[m]=t[m])}return i},l.plugin=fs,l.polygonIntersectsPolygon=tl,l.postMapLoadEvent=Ui,l.postTurnstileEvent=Ye,l.potpack=vu,l.refProperties=["type","source","source-layer","minzoom","maxzoom","filter","layout"],l.register=Hi,l.registerForPluginStateChange=function(t){return t({pluginStatus:os,pluginURL:ua}),Ra.on("pluginStateChange",t),t},l.renderColorRamp=pn,l.rotate=function(t,e,i){var c=e[0],m=e[1],S=e[2],F=e[3],Q=Math.sin(i),_t=Math.cos(i);return t[0]=c*_t+S*Q,t[1]=m*_t+F*Q,t[2]=c*-Q+S*_t,t[3]=m*-Q+F*_t,t},l.rotateX=function(t,e,i){var c=Math.sin(i),m=Math.cos(i),S=e[4],F=e[5],Q=e[6],_t=e[7],kt=e[8],Bt=e[9],Nt=e[10],$t=e[11];return e!==t&&(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[4]=S*m+kt*c,t[5]=F*m+Bt*c,t[6]=Q*m+Nt*c,t[7]=_t*m+$t*c,t[8]=kt*m-S*c,t[9]=Bt*m-F*c,t[10]=Nt*m-Q*c,t[11]=$t*m-_t*c,t},l.rotateZ=function(t,e,i){var c=Math.sin(i),m=Math.cos(i),S=e[0],F=e[1],Q=e[2],_t=e[3],kt=e[4],Bt=e[5],Nt=e[6],$t=e[7];return e!==t&&(t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[0]=S*m+kt*c,t[1]=F*m+Bt*c,t[2]=Q*m+Nt*c,t[3]=_t*m+$t*c,t[4]=kt*m-S*c,t[5]=Bt*m-F*c,t[6]=Nt*m-Q*c,t[7]=$t*m-_t*c,t},l.scale=function(t,e,i){var c=i[0],m=i[1],S=i[2];return t[0]=e[0]*c,t[1]=e[1]*c,t[2]=e[2]*c,t[3]=e[3]*c,t[4]=e[4]*m,t[5]=e[5]*m,t[6]=e[6]*m,t[7]=e[7]*m,t[8]=e[8]*S,t[9]=e[9]*S,t[10]=e[10]*S,t[11]=e[11]*S,t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t},l.scale$1=function(t,e,i){return t[0]=e[0]*i,t[1]=e[1]*i,t[2]=e[2]*i,t[3]=e[3]*i,t},l.scale$2=function(t,e,i){return t[0]=e[0]*i,t[1]=e[1]*i,t[2]=e[2]*i,t},l.setCacheLimits=function(t,e){hn=t,Fn=e},l.setRTLTextPlugin=function(t,e,i){if(void 0===i&&(i=!1),"deferred"===os||"loading"===os||"loaded"===os)throw new Error("setRTLTextPlugin cannot be called multiple times.");ua=xe.resolveURL(t),os="deferred",Ds=e,rl(),i||Ws()},l.sphericalToCartesian=function(t){var e=t[0],i=t[1],c=t[2];return i+=90,i*=Math.PI/180,c*=Math.PI/180,{x:e*Math.cos(i)*Math.sin(c),y:e*Math.sin(i)*Math.sin(c),z:e*Math.cos(c)}},l.sqrLen=function(t){var e=t[0],i=t[1];return e*e+i*i},l.styleSpec=oe,l.sub=function(t,e,i){return t[0]=e[0]-i[0],t[1]=e[1]-i[1],t[2]=e[2]-i[2],t},l.symbolSize=sd,l.transformMat3=function(t,e,i){var c=e[0],m=e[1],S=e[2];return t[0]=c*i[0]+m*i[3]+S*i[6],t[1]=c*i[1]+m*i[4]+S*i[7],t[2]=c*i[2]+m*i[5]+S*i[8],t},l.transformMat4=Qt,l.translate=function(t,e,i){var c,m,S,F,Q,_t,kt,Bt,Nt,$t,ie,ke,Le=i[0],Ve=i[1],ze=i[2];return e===t?(t[12]=e[0]*Le+e[4]*Ve+e[8]*ze+e[12],t[13]=e[1]*Le+e[5]*Ve+e[9]*ze+e[13],t[14]=e[2]*Le+e[6]*Ve+e[10]*ze+e[14],t[15]=e[3]*Le+e[7]*Ve+e[11]*ze+e[15]):(m=e[1],S=e[2],F=e[3],Q=e[4],_t=e[5],kt=e[6],Bt=e[7],Nt=e[8],$t=e[9],ie=e[10],ke=e[11],t[0]=c=e[0],t[1]=m,t[2]=S,t[3]=F,t[4]=Q,t[5]=_t,t[6]=kt,t[7]=Bt,t[8]=Nt,t[9]=$t,t[10]=ie,t[11]=ke,t[12]=c*Le+Q*Ve+Nt*ze+e[12],t[13]=m*Le+_t*Ve+$t*ze+e[13],t[14]=S*Le+kt*Ve+ie*ze+e[14],t[15]=F*Le+Bt*Ve+ke*ze+e[15]),t},l.triggerPluginCompletionEvent=xl,l.uniqueId=ft,l.validateCustomStyleLayer=function(t){var e=[],i=t.id;return void 0===i&&e.push({message:"layers."+i+': missing required property "id"'}),void 0===t.render&&e.push({message:"layers."+i+': missing required method "render"'}),t.renderingMode&&"2d"!==t.renderingMode&&"3d"!==t.renderingMode&&e.push({message:"layers."+i+': property "renderingMode" must be either "2d" or "3d"'}),e},l.validateLight=_o,l.validateStyle=uo,l.values=function(t){var e=[];for(var i in t)e.push(t[i]);return e},l.vectorTile=nh,l.version="1.13.1",l.warnOnce=ht,l.webpSupported=Te,l.window=b,l.wrap=B}),w(0,function(l){function it(Ft){var Yt=typeof Ft;if("number"===Yt||"boolean"===Yt||"string"===Yt||null==Ft)return JSON.stringify(Ft);if(Array.isArray(Ft)){for(var Jt="[",he=0,Ce=Ft;he<Ce.length;he+=1)Jt+=it(Ce[he])+",";return Jt+"]"}for(var De=Object.keys(Ft).sort(),Ge="{",oe=0;oe<De.length;oe++)Ge+=JSON.stringify(De[oe])+":"+it(Ft[De[oe]])+",";return Ge+"}"}function N(Ft){for(var Yt="",Jt=0,he=l.refProperties;Jt<he.length;Jt+=1)Yt+="/"+it(Ft[he[Jt]]);return Yt}var G=function(Ft){this.keyCache={},Ft&&this.replace(Ft)};G.prototype.replace=function(Ft){this._layerConfigs={},this._layers={},this.update(Ft,[])},G.prototype.update=function(Ft,Yt){for(var Jt=this,he=0,Ce=Ft;he<Ce.length;he+=1){var De=Ce[he];this._layerConfigs[De.id]=De;var Ge=this._layers[De.id]=l.createStyleLayer(De);Ge._featureFilter=l.featureFilter(Ge.filter),this.keyCache[De.id]&&delete this.keyCache[De.id]}for(var oe=0,Ee=Yt;oe<Ee.length;oe+=1){var ii=Ee[oe];delete this.keyCache[ii],delete this._layerConfigs[ii],delete this._layers[ii]}this.familiesBySource={};for(var Si=0,Oi=function(Yi,Ki){for(var Nn={},Vi=0;Vi<Yi.length;Vi++){var so=Ki&&Ki[Yi[Vi].id]||N(Yi[Vi]);Ki&&(Ki[Yi[Vi].id]=so);var Hn=Nn[so];Hn||(Hn=Nn[so]=[]),Hn.push(Yi[Vi])}var Gn=[];for(var vo in Nn)Gn.push(Nn[vo]);return Gn}(l.values(this._layerConfigs),this.keyCache);Si<Oi.length;Si+=1){var di=Oi[Si].map(function(Yi){return Jt._layers[Yi.id]}),hi=di[0];if("none"!==hi.visibility){var sn=hi.source||"",Fi=this.familiesBySource[sn];Fi||(Fi=this.familiesBySource[sn]={});var yi=hi.sourceLayer||"_geojsonTileLayer",Zi=Fi[yi];Zi||(Zi=Fi[yi]=[]),Zi.push(di)}}};var v=function(Ft){var Yt={},Jt=[];for(var he in Ft){var Ce=Ft[he],De=Yt[he]={};for(var Ge in Ce){var oe=Ce[+Ge];if(oe&&0!==oe.bitmap.width&&0!==oe.bitmap.height){var Ee={x:0,y:0,w:oe.bitmap.width+2,h:oe.bitmap.height+2};Jt.push(Ee),De[Ge]={rect:Ee,metrics:oe.metrics}}}}var ii=l.potpack(Jt),Si=new l.AlphaImage({width:ii.w||1,height:ii.h||1});for(var Oi in Ft){var di=Ft[Oi];for(var hi in di){var sn=di[+hi];if(sn&&0!==sn.bitmap.width&&0!==sn.bitmap.height){var Fi=Yt[Oi][hi].rect;l.AlphaImage.copy(sn.bitmap,Si,{x:0,y:0},{x:Fi.x+1,y:Fi.y+1},sn.bitmap)}}}this.image=Si,this.positions=Yt};l.register("GlyphAtlas",v);var M=function(Ft){this.tileID=new l.OverscaledTileID(Ft.tileID.overscaledZ,Ft.tileID.wrap,Ft.tileID.canonical.z,Ft.tileID.canonical.x,Ft.tileID.canonical.y),this.uid=Ft.uid,this.zoom=Ft.zoom,this.pixelRatio=Ft.pixelRatio,this.tileSize=Ft.tileSize,this.source=Ft.source,this.overscaling=this.tileID.overscaleFactor(),this.showCollisionBoxes=Ft.showCollisionBoxes,this.collectResourceTiming=!!Ft.collectResourceTiming,this.returnDependencies=!!Ft.returnDependencies,this.promoteId=Ft.promoteId};function b(Ft,Yt,Jt){for(var he=new l.EvaluationParameters(Yt),Ce=0,De=Ft;Ce<De.length;Ce+=1)De[Ce].recalculate(he,Jt)}function k(Ft,Yt){var Jt=l.getArrayBuffer(Ft.request,function(he,Ce,De,Ge){he?Yt(he):Ce&&Yt(null,{vectorTile:new l.vectorTile.VectorTile(new l.pbf(Ce)),rawData:Ce,cacheControl:De,expires:Ge})});return function(){Jt.cancel(),Yt()}}M.prototype.parse=function(Ft,Yt,Jt,he,Ce){var De=this;this.status="parsing",this.data=Ft,this.collisionBoxArray=new l.CollisionBoxArray;var Ge=new l.DictionaryCoder(Object.keys(Ft.layers).sort()),oe=new l.FeatureIndex(this.tileID,this.promoteId);oe.bucketLayerIDs=[];var Ee,ii,Si,Oi,di={},hi={featureIndex:oe,iconDependencies:{},patternDependencies:{},glyphDependencies:{},availableImages:Jt},sn=Yt.familiesBySource[this.source];for(var Fi in sn){var yi=Ft.layers[Fi];if(yi){1===yi.version&&l.warnOnce('Vector tile source "'+this.source+'" layer "'+Fi+'" does not use vector tile spec v2 and therefore may have some rendering errors.');for(var Zi=Ge.encode(Fi),Yi=[],Ki=0;Ki<yi.length;Ki++){var Nn=yi.feature(Ki),Vi=oe.getId(Nn,Fi);Yi.push({feature:Nn,id:Vi,index:Ki,sourceLayerIndex:Zi})}for(var so=0,Hn=sn[Fi];so<Hn.length;so+=1){var Gn=Hn[so],vo=Gn[0];vo.minzoom&&this.zoom<Math.floor(vo.minzoom)||vo.maxzoom&&this.zoom>=vo.maxzoom||"none"!==vo.visibility&&(b(Gn,this.zoom,Jt),(di[vo.id]=vo.createBucket({index:oe.bucketLayerIDs.length,layers:Gn,zoom:this.zoom,pixelRatio:this.pixelRatio,overscaling:this.overscaling,collisionBoxArray:this.collisionBoxArray,sourceLayerIndex:Zi,sourceID:this.source})).populate(Yi,hi,this.tileID.canonical),oe.bucketLayerIDs.push(Gn.map(function(bo){return bo.id})))}}}var Jn=l.mapObject(hi.glyphDependencies,function(bo){return Object.keys(bo).map(Number)});Object.keys(Jn).length?he.send("getGlyphs",{uid:this.uid,stacks:Jn},function(bo,ao){Ee||(Ee=bo,ii=ao,vr.call(De))}):ii={};var yr=Object.keys(hi.iconDependencies);yr.length?he.send("getImages",{icons:yr,source:this.source,tileID:this.tileID,type:"icons"},function(bo,ao){Ee||(Ee=bo,Si=ao,vr.call(De))}):Si={};var Co=Object.keys(hi.patternDependencies);function vr(){if(Ee)return Ce(Ee);if(ii&&Si&&Oi){var bo=new v(ii),ao=new l.ImageAtlas(Si,Oi);for(var gn in di){var Tr=di[gn];Tr instanceof l.SymbolBucket?(b(Tr.layers,this.zoom,Jt),l.performSymbolLayout(Tr,ii,bo.positions,Si,ao.iconPositions,this.showCollisionBoxes,this.tileID.canonical)):Tr.hasPattern&&(Tr instanceof l.LineBucket||Tr instanceof l.FillBucket||Tr instanceof l.FillExtrusionBucket)&&(b(Tr.layers,this.zoom,Jt),Tr.addFeatures(hi,this.tileID.canonical,ao.patternPositions))}this.status="done",Ce(null,{buckets:l.values(di).filter(function(Vs){return!Vs.isEmpty()}),featureIndex:oe,collisionBoxArray:this.collisionBoxArray,glyphAtlasImage:bo.image,imageAtlas:ao,glyphMap:this.returnDependencies?ii:null,iconMap:this.returnDependencies?Si:null,glyphPositions:this.returnDependencies?bo.positions:null})}}Co.length?he.send("getImages",{icons:Co,source:this.source,tileID:this.tileID,type:"patterns"},function(bo,ao){Ee||(Ee=bo,Oi=ao,vr.call(De))}):Oi={},vr.call(this)};var _=function(Ft,Yt,Jt,he){this.actor=Ft,this.layerIndex=Yt,this.availableImages=Jt,this.loadVectorData=he||k,this.loading={},this.loaded={}};_.prototype.loadTile=function(Ft,Yt){var Jt=this,he=Ft.uid;this.loading||(this.loading={});var Ce=!!(Ft&&Ft.request&&Ft.request.collectResourceTiming)&&new l.RequestPerformance(Ft.request),De=this.loading[he]=new M(Ft);De.abort=this.loadVectorData(Ft,function(Ge,oe){if(delete Jt.loading[he],Ge||!oe)return De.status="done",Jt.loaded[he]=De,Yt(Ge);var Ee=oe.rawData,ii={};oe.expires&&(ii.expires=oe.expires),oe.cacheControl&&(ii.cacheControl=oe.cacheControl);var Si={};if(Ce){var Oi=Ce.finish();Oi&&(Si.resourceTiming=JSON.parse(JSON.stringify(Oi)))}De.vectorTile=oe.vectorTile,De.parse(oe.vectorTile,Jt.layerIndex,Jt.availableImages,Jt.actor,function(di,hi){if(di||!hi)return Yt(di);Yt(null,l.extend({rawTileData:Ee.slice(0)},hi,ii,Si))}),Jt.loaded=Jt.loaded||{},Jt.loaded[he]=De})},_.prototype.reloadTile=function(Ft,Yt){var Jt=this,he=this.loaded,Ce=Ft.uid,De=this;if(he&&he[Ce]){var Ge=he[Ce];Ge.showCollisionBoxes=Ft.showCollisionBoxes;var oe=function(Ee,ii){var Si=Ge.reloadCallback;Si&&(delete Ge.reloadCallback,Ge.parse(Ge.vectorTile,De.layerIndex,Jt.availableImages,De.actor,Si)),Yt(Ee,ii)};"parsing"===Ge.status?Ge.reloadCallback=oe:"done"===Ge.status&&(Ge.vectorTile?Ge.parse(Ge.vectorTile,this.layerIndex,this.availableImages,this.actor,oe):oe())}},_.prototype.abortTile=function(Ft,Yt){var Jt=this.loading,he=Ft.uid;Jt&&Jt[he]&&Jt[he].abort&&(Jt[he].abort(),delete Jt[he]),Yt()},_.prototype.removeTile=function(Ft,Yt){var Jt=this.loaded,he=Ft.uid;Jt&&Jt[he]&&delete Jt[he],Yt()};var y=l.window.ImageBitmap,O=function(){this.loaded={}};function B(Ft,Yt){if(0!==Ft.length){H(Ft[0],Yt);for(var Jt=1;Jt<Ft.length;Jt++)H(Ft[Jt],!Yt)}}function H(Ft,Yt){for(var Jt=0,he=0,Ce=Ft.length,De=Ce-1;he<Ce;De=he++)Jt+=(Ft[he][0]-Ft[De][0])*(Ft[De][1]+Ft[he][1]);Jt>=0!=!!Yt&&Ft.reverse()}O.prototype.loadTile=function(Ft,Yt){var Jt=Ft.uid,he=Ft.encoding,Ce=Ft.rawImageData,De=y&&Ce instanceof y?this.getImageData(Ce):Ce,Ge=new l.DEMData(Jt,De,he);this.loaded=this.loaded||{},this.loaded[Jt]=Ge,Yt(null,Ge)},O.prototype.getImageData=function(Ft){this.offscreenCanvas&&this.offscreenCanvasContext||(this.offscreenCanvas=new OffscreenCanvas(Ft.width,Ft.height),this.offscreenCanvasContext=this.offscreenCanvas.getContext("2d")),this.offscreenCanvas.width=Ft.width,this.offscreenCanvas.height=Ft.height,this.offscreenCanvasContext.drawImage(Ft,0,0,Ft.width,Ft.height);var Yt=this.offscreenCanvasContext.getImageData(-1,-1,Ft.width+2,Ft.height+2);return this.offscreenCanvasContext.clearRect(0,0,this.offscreenCanvas.width,this.offscreenCanvas.height),new l.RGBAImage({width:Yt.width,height:Yt.height},Yt.data)},O.prototype.removeTile=function(Ft){var Yt=this.loaded,Jt=Ft.uid;Yt&&Yt[Jt]&&delete Yt[Jt]};var at=l.vectorTile.VectorTileFeature.prototype.toGeoJSON,ft=function(Ft){this._feature=Ft,this.extent=l.EXTENT,this.type=Ft.type,this.properties=Ft.tags,"id"in Ft&&!isNaN(Ft.id)&&(this.id=parseInt(Ft.id,10))};ft.prototype.loadGeometry=function(){if(1===this._feature.type){for(var Ft=[],Yt=0,Jt=this._feature.geometry;Yt<Jt.length;Yt+=1){var he=Jt[Yt];Ft.push([new l.Point$1(he[0],he[1])])}return Ft}for(var Ce=[],De=0,Ge=this._feature.geometry;De<Ge.length;De+=1){for(var oe=[],Ee=0,ii=Ge[De];Ee<ii.length;Ee+=1){var Si=ii[Ee];oe.push(new l.Point$1(Si[0],Si[1]))}Ce.push(oe)}return Ce},ft.prototype.toGeoJSON=function(Ft,Yt,Jt){return at.call(this,Ft,Yt,Jt)};var rt=function(Ft){this.layers={_geojsonTileLayer:this},this.name="_geojsonTileLayer",this.extent=l.EXTENT,this.length=Ft.length,this._features=Ft};rt.prototype.feature=function(Ft){return new ft(this._features[Ft])};var z=l.vectorTile.VectorTileFeature,q=mt;function mt(Ft,Yt){this.options=Yt||{},this.features=Ft,this.length=Ft.length}function pt(Ft,Yt){this.id="number"==typeof Ft.id?Ft.id:void 0,this.type=Ft.type,this.rawGeometry=1===Ft.type?[Ft.geometry]:Ft.geometry,this.properties=Ft.tags,this.extent=Yt||4096}mt.prototype.feature=function(Ft){return new pt(this.features[Ft],this.options.extent)},pt.prototype.loadGeometry=function(){var Ft=this.rawGeometry;this.geometry=[];for(var Yt=0;Yt<Ft.length;Yt++){for(var Jt=Ft[Yt],he=[],Ce=0;Ce<Jt.length;Ce++)he.push(new l.Point$1(Jt[Ce][0],Jt[Ce][1]));this.geometry.push(he)}return this.geometry},pt.prototype.bbox=function(){this.geometry||this.loadGeometry();for(var Ft=this.geometry,Yt=1/0,Jt=-1/0,he=1/0,Ce=-1/0,De=0;De<Ft.length;De++)for(var Ge=Ft[De],oe=0;oe<Ge.length;oe++){var Ee=Ge[oe];Yt=Math.min(Yt,Ee.x),Jt=Math.max(Jt,Ee.x),he=Math.min(he,Ee.y),Ce=Math.max(Ce,Ee.y)}return[Yt,he,Jt,Ce]},pt.prototype.toGeoJSON=z.prototype.toGeoJSON;var dt=lt,Y=q;function lt(Ft){var Yt=new l.pbf;return function(Jt,he){for(var Ce in Jt.layers)he.writeMessage(3,ht,Jt.layers[Ce])}(Ft,Yt),Yt.finish()}function ht(Ft,Yt){var Jt;Yt.writeVarintField(15,Ft.version||1),Yt.writeStringField(1,Ft.name||""),Yt.writeVarintField(5,Ft.extent||4096);var he={keys:[],values:[],keycache:{},valuecache:{}};for(Jt=0;Jt<Ft.length;Jt++)he.feature=Ft.feature(Jt),Yt.writeMessage(2,Lt,he);var Ce=he.keys;for(Jt=0;Jt<Ce.length;Jt++)Yt.writeStringField(3,Ce[Jt]);var De=he.values;for(Jt=0;Jt<De.length;Jt++)Yt.writeMessage(4,_e,De[Jt])}function Lt(Ft,Yt){var Jt=Ft.feature;void 0!==Jt.id&&Yt.writeVarintField(1,Jt.id),Yt.writeMessage(2,At,Ft),Yt.writeVarintField(3,Jt.type),Yt.writeMessage(4,se,Jt)}function At(Ft,Yt){var Jt=Ft.feature,he=Ft.keys,Ce=Ft.values,De=Ft.keycache,Ge=Ft.valuecache;for(var oe in Jt.properties){var Ee=De[oe];void 0===Ee&&(he.push(oe),De[oe]=Ee=he.length-1),Yt.writeVarint(Ee);var ii=Jt.properties[oe],Si=typeof ii;"string"!==Si&&"boolean"!==Si&&"number"!==Si&&(ii=JSON.stringify(ii));var Oi=Si+":"+ii,di=Ge[Oi];void 0===di&&(Ce.push(ii),Ge[Oi]=di=Ce.length-1),Yt.writeVarint(di)}}function Wt(Ft,Yt){return(Yt<<3)+(7&Ft)}function Ot(Ft){return Ft<<1^Ft>>31}function se(Ft,Yt){for(var Jt=Ft.loadGeometry(),he=Ft.type,Ce=0,De=0,Ge=Jt.length,oe=0;oe<Ge;oe++){var Ee=Jt[oe],ii=1;1===he&&(ii=Ee.length),Yt.writeVarint(Wt(1,ii));for(var Si=3===he?Ee.length-1:Ee.length,Oi=0;Oi<Si;Oi++){1===Oi&&1!==he&&Yt.writeVarint(Wt(2,Si-1));var di=Ee[Oi].x-Ce,hi=Ee[Oi].y-De;Yt.writeVarint(Ot(di)),Yt.writeVarint(Ot(hi)),Ce+=di,De+=hi}3===he&&Yt.writeVarint(Wt(7,1))}}function _e(Ft,Yt){var Jt=typeof Ft;"string"===Jt?Yt.writeStringField(1,Ft):"boolean"===Jt?Yt.writeBooleanField(7,Ft):"number"===Jt&&(Ft%1!=0?Yt.writeDoubleField(3,Ft):Ft<0?Yt.writeSVarintField(6,Ft):Yt.writeVarintField(5,Ft))}function We(Ft,Yt,Jt,he){He(Ft,Jt,he),He(Yt,2*Jt,2*he),He(Yt,2*Jt+1,2*he+1)}function He(Ft,Yt,Jt){var he=Ft[Yt];Ft[Yt]=Ft[Jt],Ft[Jt]=he}function Fe(Ft,Yt,Jt,he){var Ce=Ft-Jt,De=Yt-he;return Ce*Ce+De*De}dt.fromVectorTileJs=lt,dt.fromGeojsonVt=function(Ft,Yt){Yt=Yt||{};var Jt={};for(var he in Ft)Jt[he]=new q(Ft[he].features,Yt),Jt[he].name=he,Jt[he].version=Yt.version,Jt[he].extent=Yt.extent;return lt({layers:Jt})},dt.GeoJSONWrapper=Y;var pe=function(Ft){return Ft[0]},Me=function(Ft){return Ft[1]},me=function(Ft,Yt,Jt,he,Ce){void 0===Yt&&(Yt=pe),void 0===Jt&&(Jt=Me),void 0===he&&(he=64),void 0===Ce&&(Ce=Float64Array),this.nodeSize=he,this.points=Ft;for(var De=Ft.length<65536?Uint16Array:Uint32Array,Ge=this.ids=new De(Ft.length),oe=this.coords=new Ce(2*Ft.length),Ee=0;Ee<Ft.length;Ee++)Ge[Ee]=Ee,oe[2*Ee]=Yt(Ft[Ee]),oe[2*Ee+1]=Jt(Ft[Ee]);!function ii(Si,Oi,di,hi,sn,Fi){if(!(sn-hi<=di)){var yi=hi+sn>>1;(function Zi(Yi,Ki,Nn,Vi,so,Hn){for(;so>Vi;){if(so-Vi>600){var Gn=so-Vi+1,vo=Nn-Vi+1,Jn=Math.log(Gn),yr=.5*Math.exp(2*Jn/3),Co=.5*Math.sqrt(Jn*yr*(Gn-yr)/Gn)*(vo-Gn/2<0?-1:1);Zi(Yi,Ki,Nn,Math.max(Vi,Math.floor(Nn-vo*yr/Gn+Co)),Math.min(so,Math.floor(Nn+(Gn-vo)*yr/Gn+Co)),Hn)}var vr=Ki[2*Nn+Hn],bo=Vi,ao=so;for(We(Yi,Ki,Vi,Nn),Ki[2*so+Hn]>vr&&We(Yi,Ki,Vi,so);bo<ao;){for(We(Yi,Ki,bo,ao),bo++,ao--;Ki[2*bo+Hn]<vr;)bo++;for(;Ki[2*ao+Hn]>vr;)ao--}Ki[2*Vi+Hn]===vr?We(Yi,Ki,Vi,ao):We(Yi,Ki,++ao,so),ao<=Nn&&(Vi=ao+1),Nn<=ao&&(so=ao-1)}})(Si,Oi,yi,hi,sn,Fi%2),ii(Si,Oi,di,hi,yi-1,Fi+1),ii(Si,Oi,di,yi+1,sn,Fi+1)}}(Ge,oe,he,0,Ge.length-1,0)};me.prototype.range=function(Ft,Yt,Jt,he){return function(Ce,De,Ge,oe,Ee,ii,Si){for(var Oi,di,hi=[0,Ce.length-1,0],sn=[];hi.length;){var Fi=hi.pop(),yi=hi.pop(),Zi=hi.pop();if(yi-Zi<=Si)for(var Yi=Zi;Yi<=yi;Yi++)di=De[2*Yi+1],(Oi=De[2*Yi])>=Ge&&Oi<=Ee&&di>=oe&&di<=ii&&sn.push(Ce[Yi]);else{var Ki=Math.floor((Zi+yi)/2);di=De[2*Ki+1],(Oi=De[2*Ki])>=Ge&&Oi<=Ee&&di>=oe&&di<=ii&&sn.push(Ce[Ki]);var Nn=(Fi+1)%2;(0===Fi?Ge<=Oi:oe<=di)&&(hi.push(Zi),hi.push(Ki-1),hi.push(Nn)),(0===Fi?Ee>=Oi:ii>=di)&&(hi.push(Ki+1),hi.push(yi),hi.push(Nn))}}return sn}(this.ids,this.coords,Ft,Yt,Jt,he,this.nodeSize)},me.prototype.within=function(Ft,Yt,Jt){return function(he,Ce,De,Ge,oe,Ee){for(var ii=[0,he.length-1,0],Si=[],Oi=oe*oe;ii.length;){var di=ii.pop(),hi=ii.pop(),sn=ii.pop();if(hi-sn<=Ee)for(var Fi=sn;Fi<=hi;Fi++)Fe(Ce[2*Fi],Ce[2*Fi+1],De,Ge)<=Oi&&Si.push(he[Fi]);else{var yi=Math.floor((sn+hi)/2),Zi=Ce[2*yi],Yi=Ce[2*yi+1];Fe(Zi,Yi,De,Ge)<=Oi&&Si.push(he[yi]);var Ki=(di+1)%2;(0===di?De-oe<=Zi:Ge-oe<=Yi)&&(ii.push(sn),ii.push(yi-1),ii.push(Ki)),(0===di?De+oe>=Zi:Ge+oe>=Yi)&&(ii.push(yi+1),ii.push(hi),ii.push(Ki))}}return Si}(this.ids,this.coords,Ft,Yt,Jt,this.nodeSize)};var qt={minZoom:0,maxZoom:16,minPoints:2,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:function(Ft){return Ft}},Kt=function(Ft){this.options=tn(Object.create(qt),Ft),this.trees=new Array(this.options.maxZoom+1)};function xe(Ft,Yt,Jt,he,Ce){return{x:Ft,y:Yt,zoom:1/0,id:Jt,parentId:-1,numPoints:he,properties:Ce}}function be(Ft,Yt){var Jt=Ft.geometry.coordinates,he=Jt[1];return{x:oi(Jt[0]),y:fi(he),zoom:1/0,index:Yt,parentId:-1}}function Te(Ft){return{type:"Feature",id:Ft.id,properties:ye(Ft),geometry:{type:"Point",coordinates:[(he=Ft.x,360*(he-.5)),(Yt=Ft.y,Jt=(180-360*Yt)*Math.PI/180,360*Math.atan(Math.exp(Jt))/Math.PI-90)]}};var Yt,Jt,he}function ye(Ft){var Yt=Ft.numPoints,Jt=Yt>=1e4?Math.round(Yt/1e3)+"k":Yt>=1e3?Math.round(Yt/100)/10+"k":Yt;return tn(tn({},Ft.properties),{cluster:!0,cluster_id:Ft.id,point_count:Yt,point_count_abbreviated:Jt})}function oi(Ft){return Ft/360+.5}function fi(Ft){var Yt=Math.sin(Ft*Math.PI/180),Jt=.5-.25*Math.log((1+Yt)/(1-Yt))/Math.PI;return Jt<0?0:Jt>1?1:Jt}function tn(Ft,Yt){for(var Jt in Yt)Ft[Jt]=Yt[Jt];return Ft}function Ii(Ft){return Ft.x}function Pi(Ft){return Ft.y}function Ji(Ft,Yt,Jt,he,Ce,De){var Ge=Ce-Jt,oe=De-he;if(0!==Ge||0!==oe){var Ee=((Ft-Jt)*Ge+(Yt-he)*oe)/(Ge*Ge+oe*oe);Ee>1?(Jt=Ce,he=De):Ee>0&&(Jt+=Ge*Ee,he+=oe*Ee)}return(Ge=Ft-Jt)*Ge+(oe=Yt-he)*oe}function Mi(Ft,Yt,Jt,he){var Ce={id:void 0===Ft?null:Ft,type:Yt,geometry:Jt,tags:he,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};return function(De){var Ge=De.geometry,oe=De.type;if("Point"===oe||"MultiPoint"===oe||"LineString"===oe)nn(De,Ge);else if("Polygon"===oe||"MultiLineString"===oe)for(var Ee=0;Ee<Ge.length;Ee++)nn(De,Ge[Ee]);else if("MultiPolygon"===oe)for(Ee=0;Ee<Ge.length;Ee++)for(var ii=0;ii<Ge[Ee].length;ii++)nn(De,Ge[Ee][ii])}(Ce),Ce}function nn(Ft,Yt){for(var Jt=0;Jt<Yt.length;Jt+=3)Ft.minX=Math.min(Ft.minX,Yt[Jt]),Ft.minY=Math.min(Ft.minY,Yt[Jt+1]),Ft.maxX=Math.max(Ft.maxX,Yt[Jt]),Ft.maxY=Math.max(Ft.maxY,Yt[Jt+1])}function Ti(Ft,Yt,Jt,he){if(Yt.geometry){var Ce=Yt.geometry.coordinates,De=Yt.geometry.type,Ge=Math.pow(Jt.tolerance/((1<<Jt.maxZoom)*Jt.extent),2),oe=[],Ee=Yt.id;if(Jt.promoteId?Ee=Yt.properties[Jt.promoteId]:Jt.generateId&&(Ee=he||0),"Point"===De)Cn(Ce,oe);else if("MultiPoint"===De)for(var ii=0;ii<Ce.length;ii++)Cn(Ce[ii],oe);else if("LineString"===De)wn(Ce,oe,Ge,!1);else if("MultiLineString"===De){if(Jt.lineMetrics){for(ii=0;ii<Ce.length;ii++)wn(Ce[ii],oe=[],Ge,!1),Ft.push(Mi(Ee,"LineString",oe,Yt.properties));return}X(Ce,oe,Ge,!1)}else if("Polygon"===De)X(Ce,oe,Ge,!0);else{if("MultiPolygon"!==De){if("GeometryCollection"===De){for(ii=0;ii<Yt.geometry.geometries.length;ii++)Ti(Ft,{id:Ee,geometry:Yt.geometry.geometries[ii],properties:Yt.properties},Jt,he);return}throw new Error("Input data is not a valid GeoJSON object.")}for(ii=0;ii<Ce.length;ii++){var Si=[];X(Ce[ii],Si,Ge,!0),oe.push(Si)}}Ft.push(Mi(Ee,De,oe,Yt.properties))}}function Cn(Ft,Yt){Yt.push(bt(Ft[0])),Yt.push(Gt(Ft[1])),Yt.push(0)}function wn(Ft,Yt,Jt,he){for(var Ce,De,Ge=0,oe=0;oe<Ft.length;oe++){var Ee=bt(Ft[oe][0]),ii=Gt(Ft[oe][1]);Yt.push(Ee),Yt.push(ii),Yt.push(0),oe>0&&(Ge+=he?(Ce*ii-Ee*De)/2:Math.sqrt(Math.pow(Ee-Ce,2)+Math.pow(ii-De,2))),Ce=Ee,De=ii}var Si=Yt.length-3;Yt[2]=1,function Oi(di,hi,sn,Fi){for(var yi,Zi=Fi,Yi=sn-hi>>1,Ki=sn-hi,Nn=di[hi],Vi=di[hi+1],so=di[sn],Hn=di[sn+1],Gn=hi+3;Gn<sn;Gn+=3){var vo=Ji(di[Gn],di[Gn+1],Nn,Vi,so,Hn);if(vo>Zi)yi=Gn,Zi=vo;else if(vo===Zi){var Jn=Math.abs(Gn-Yi);Jn<Ki&&(yi=Gn,Ki=Jn)}}Zi>Fi&&(yi-hi>3&&Oi(di,hi,yi,Fi),di[yi+2]=Zi,sn-yi>3&&Oi(di,yi,sn,Fi))}(Yt,0,Si,Jt),Yt[Si+2]=1,Yt.size=Math.abs(Ge),Yt.start=0,Yt.end=Yt.size}function X(Ft,Yt,Jt,he){for(var Ce=0;Ce<Ft.length;Ce++){var De=[];wn(Ft[Ce],De,Jt,he),Yt.push(De)}}function bt(Ft){return Ft/360+.5}function Gt(Ft){var Yt=Math.sin(Ft*Math.PI/180),Jt=.5-.25*Math.log((1+Yt)/(1-Yt))/Math.PI;return Jt<0?0:Jt>1?1:Jt}function ee(Ft,Yt,Jt,he,Ce,De,Ge,oe){if(he/=Yt,De>=(Jt/=Yt)&&Ge<he)return Ft;if(Ge<Jt||De>=he)return null;for(var Ee=[],ii=0;ii<Ft.length;ii++){var Si=Ft[ii],Oi=Si.geometry,di=Si.type,hi=0===Ce?Si.minX:Si.minY,sn=0===Ce?Si.maxX:Si.maxY;if(hi>=Jt&&sn<he)Ee.push(Si);else if(!(sn<Jt||hi>=he)){var Fi=[];if("Point"===di||"MultiPoint"===di)we(Oi,Fi,Jt,he,Ce);else if("LineString"===di)Ye(Oi,Fi,Jt,he,Ce,!1,oe.lineMetrics);else if("MultiLineString"===di)Ui(Oi,Fi,Jt,he,Ce,!1);else if("Polygon"===di)Ui(Oi,Fi,Jt,he,Ce,!0);else if("MultiPolygon"===di)for(var yi=0;yi<Oi.length;yi++){var Zi=[];Ui(Oi[yi],Zi,Jt,he,Ce,!0),Zi.length&&Fi.push(Zi)}if(Fi.length){if(oe.lineMetrics&&"LineString"===di){for(yi=0;yi<Fi.length;yi++)Ee.push(Mi(Si.id,di,Fi[yi],Si.tags));continue}"LineString"!==di&&"MultiLineString"!==di||(1===Fi.length?(di="LineString",Fi=Fi[0]):di="MultiLineString"),"Point"!==di&&"MultiPoint"!==di||(di=3===Fi.length?"Point":"MultiPoint"),Ee.push(Mi(Si.id,di,Fi,Si.tags))}}}return Ee.length?Ee:null}function we(Ft,Yt,Jt,he,Ce){for(var De=0;De<Ft.length;De+=3){var Ge=Ft[De+Ce];Ge>=Jt&&Ge<=he&&(Yt.push(Ft[De]),Yt.push(Ft[De+1]),Yt.push(Ft[De+2]))}}function Ye(Ft,Yt,Jt,he,Ce,De,Ge){for(var oe,Ee,ii=xi(Ft),Si=0===Ce?Fn:Mo,Oi=Ft.start,di=0;di<Ft.length-3;di+=3){var hi=Ft[di],sn=Ft[di+1],Fi=Ft[di+2],yi=Ft[di+3],Zi=Ft[di+4],Yi=0===Ce?hi:sn,Ki=0===Ce?yi:Zi,Nn=!1;Ge&&(oe=Math.sqrt(Math.pow(hi-yi,2)+Math.pow(sn-Zi,2))),Yi<Jt?Ki>Jt&&(Ee=Si(ii,hi,sn,yi,Zi,Jt),Ge&&(ii.start=Oi+oe*Ee)):Yi>he?Ki<he&&(Ee=Si(ii,hi,sn,yi,Zi,he),Ge&&(ii.start=Oi+oe*Ee)):hn(ii,hi,sn,Fi),Ki<Jt&&Yi>=Jt&&(Ee=Si(ii,hi,sn,yi,Zi,Jt),Nn=!0),Ki>he&&Yi<=he&&(Ee=Si(ii,hi,sn,yi,Zi,he),Nn=!0),!De&&Nn&&(Ge&&(ii.end=Oi+oe*Ee),Yt.push(ii),ii=xi(Ft)),Ge&&(Oi+=oe)}var Vi=Ft.length-3;hi=Ft[Vi],sn=Ft[Vi+1],Fi=Ft[Vi+2],(Yi=0===Ce?hi:sn)>=Jt&&Yi<=he&&hn(ii,hi,sn,Fi),Vi=ii.length-3,De&&Vi>=3&&(ii[Vi]!==ii[0]||ii[Vi+1]!==ii[1])&&hn(ii,ii[0],ii[1],ii[2]),ii.length&&Yt.push(ii)}function xi(Ft){var Yt=[];return Yt.size=Ft.size,Yt.start=Ft.start,Yt.end=Ft.end,Yt}function Ui(Ft,Yt,Jt,he,Ce,De){for(var Ge=0;Ge<Ft.length;Ge++)Ye(Ft[Ge],Yt,Jt,he,Ce,De,!1)}function hn(Ft,Yt,Jt,he){Ft.push(Yt),Ft.push(Jt),Ft.push(he)}function Fn(Ft,Yt,Jt,he,Ce,De){var Ge=(De-Yt)/(he-Yt);return Ft.push(De),Ft.push(Jt+(Ce-Jt)*Ge),Ft.push(1),Ge}function Mo(Ft,Yt,Jt,he,Ce,De){var Ge=(De-Jt)/(Ce-Jt);return Ft.push(Yt+(he-Yt)*Ge),Ft.push(De),Ft.push(1),Ge}function qo(Ft,Yt){for(var Jt=[],he=0;he<Ft.length;he++){var Ce,De=Ft[he],Ge=De.type;if("Point"===Ge||"MultiPoint"===Ge||"LineString"===Ge)Ce=Oo(De.geometry,Yt);else if("MultiLineString"===Ge||"Polygon"===Ge){Ce=[];for(var oe=0;oe<De.geometry.length;oe++)Ce.push(Oo(De.geometry[oe],Yt))}else if("MultiPolygon"===Ge)for(Ce=[],oe=0;oe<De.geometry.length;oe++){for(var Ee=[],ii=0;ii<De.geometry[oe].length;ii++)Ee.push(Oo(De.geometry[oe][ii],Yt));Ce.push(Ee)}Jt.push(Mi(De.id,Ge,Ce,De.tags))}return Jt}function Oo(Ft,Yt){var Jt=[];Jt.size=Ft.size,void 0!==Ft.start&&(Jt.start=Ft.start,Jt.end=Ft.end);for(var he=0;he<Ft.length;he+=3)Jt.push(Ft[he]+Yt,Ft[he+1],Ft[he+2]);return Jt}function Dr(Ft,Yt){if(Ft.transformed)return Ft;var Jt,he,Ce,De=1<<Ft.z,Ge=Ft.x,oe=Ft.y;for(Jt=0;Jt<Ft.features.length;Jt++){var Ee=Ft.features[Jt],ii=Ee.geometry,Si=Ee.type;if(Ee.geometry=[],1===Si)for(he=0;he<ii.length;he+=2)Ee.geometry.push(No(ii[he],ii[he+1],Yt,De,Ge,oe));else for(he=0;he<ii.length;he++){var Oi=[];for(Ce=0;Ce<ii[he].length;Ce+=2)Oi.push(No(ii[he][Ce],ii[he][Ce+1],Yt,De,Ge,oe));Ee.geometry.push(Oi)}}return Ft.transformed=!0,Ft}function No(Ft,Yt,Jt,he,Ce,De){return[Math.round(Jt*(Ft*he-Ce)),Math.round(Jt*(Yt*he-De))]}function po(Ft,Yt,Jt,he,Ce){for(var De=Yt===Ce.maxZoom?0:Ce.tolerance/((1<<Yt)*Ce.extent),Ge={features:[],numPoints:0,numSimplified:0,numFeatures:0,source:null,x:Jt,y:he,z:Yt,transformed:!1,minX:2,minY:1,maxX:-1,maxY:0},oe=0;oe<Ft.length;oe++){Ge.numFeatures++,ko(Ge,Ft[oe],De,Ce);var Ee=Ft[oe].minX,ii=Ft[oe].minY,Si=Ft[oe].maxX,Oi=Ft[oe].maxY;Ee<Ge.minX&&(Ge.minX=Ee),ii<Ge.minY&&(Ge.minY=ii),Si>Ge.maxX&&(Ge.maxX=Si),Oi>Ge.maxY&&(Ge.maxY=Oi)}return Ge}function ko(Ft,Yt,Jt,he){var Ce=Yt.geometry,De=Yt.type,Ge=[];if("Point"===De||"MultiPoint"===De)for(var oe=0;oe<Ce.length;oe+=3)Ge.push(Ce[oe]),Ge.push(Ce[oe+1]),Ft.numPoints++,Ft.numSimplified++;else if("LineString"===De)Kr(Ge,Ce,Ft,Jt,!1,!1);else if("MultiLineString"===De||"Polygon"===De)for(oe=0;oe<Ce.length;oe++)Kr(Ge,Ce[oe],Ft,Jt,"Polygon"===De,0===oe);else if("MultiPolygon"===De)for(var Ee=0;Ee<Ce.length;Ee++){var ii=Ce[Ee];for(oe=0;oe<ii.length;oe++)Kr(Ge,ii[oe],Ft,Jt,!0,0===oe)}if(Ge.length){var Si=Yt.tags||null;if("LineString"===De&&he.lineMetrics){for(var Oi in Si={},Yt.tags)Si[Oi]=Yt.tags[Oi];Si.mapbox_clip_start=Ce.start/Ce.size,Si.mapbox_clip_end=Ce.end/Ce.size}var di={geometry:Ge,type:"Polygon"===De||"MultiPolygon"===De?3:"LineString"===De||"MultiLineString"===De?2:1,tags:Si};null!==Yt.id&&(di.id=Yt.id),Ft.features.push(di)}}function Kr(Ft,Yt,Jt,he,Ce,De){var Ge=he*he;if(he>0&&Yt.size<(Ce?Ge:he))Jt.numPoints+=Yt.length/3;else{for(var oe=[],Ee=0;Ee<Yt.length;Ee+=3)(0===he||Yt[Ee+2]>Ge)&&(Jt.numSimplified++,oe.push(Yt[Ee]),oe.push(Yt[Ee+1])),Jt.numPoints++;Ce&&function(ii,Si){for(var Oi=0,di=0,hi=ii.length,sn=hi-2;di<hi;sn=di,di+=2)Oi+=(ii[di]-ii[sn])*(ii[di+1]+ii[sn+1]);if(Oi>0===Si)for(di=0,hi=ii.length;di<hi/2;di+=2){var Fi=ii[di],yi=ii[di+1];ii[di]=ii[hi-2-di],ii[di+1]=ii[hi-1-di],ii[hi-2-di]=Fi,ii[hi-1-di]=yi}}(oe,De),Ft.push(oe)}}function dr(Ft,Yt){var Jt=(Yt=this.options=function(Ce,De){for(var Ge in De)Ce[Ge]=De[Ge];return Ce}(Object.create(this.options),Yt)).debug;if(Jt&&console.time("preprocess data"),Yt.maxZoom<0||Yt.maxZoom>24)throw new Error("maxZoom should be in the 0-24 range");if(Yt.promoteId&&Yt.generateId)throw new Error("promoteId and generateId cannot be used together.");var Ce,De,Ge,oe,Ee,ii,he=function(Ce,De){var Ge=[];if("FeatureCollection"===Ce.type)for(var oe=0;oe<Ce.features.length;oe++)Ti(Ge,Ce.features[oe],De,oe);else Ti(Ge,"Feature"===Ce.type?Ce:{geometry:Ce},De);return Ge}(Ft,Yt);this.tiles={},this.tileCoords=[],Jt&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",Yt.indexMaxZoom,Yt.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0),(Ce=he,De=Yt,Ge=De.buffer/De.extent,oe=Ce,Ee=ee(Ce,1,-1-Ge,Ge,0,-1,2,De),ii=ee(Ce,1,1-Ge,2+Ge,0,-1,2,De),(Ee||ii)&&(oe=ee(Ce,1,-Ge,1+Ge,0,-1,2,De)||[],Ee&&(oe=qo(Ee,1).concat(oe)),ii&&(oe=oe.concat(qo(ii,-1)))),he=oe).length&&this.splitTile(he,0,0,0),Jt&&(he.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}function gr(Ft,Yt,Jt){return 32*((1<<Ft)*Jt+Yt)+Ft}function lr(Ft,Yt){var Jt=Ft.tileID.canonical;if(!this._geoJSONIndex)return Yt(null,null);var he=this._geoJSONIndex.getTile(Jt.z,Jt.x,Jt.y);if(!he)return Yt(null,null);var Ce=new rt(he.features),De=dt(Ce);0===De.byteOffset&&De.byteLength===De.buffer.byteLength||(De=new Uint8Array(De)),Yt(null,{vectorTile:Ce,rawData:De.buffer})}Kt.prototype.load=function(Ft){var Yt=this.options,Jt=Yt.log,he=Yt.minZoom,Ce=Yt.maxZoom,De=Yt.nodeSize;Jt&&console.time("total time");var Ge="prepare "+Ft.length+" points";Jt&&console.time(Ge),this.points=Ft;for(var oe=[],Ee=0;Ee<Ft.length;Ee++)Ft[Ee].geometry&&oe.push(be(Ft[Ee],Ee));this.trees[Ce+1]=new me(oe,Ii,Pi,De,Float32Array),Jt&&console.timeEnd(Ge);for(var ii=Ce;ii>=he;ii--){var Si=+Date.now();oe=this._cluster(oe,ii),this.trees[ii]=new me(oe,Ii,Pi,De,Float32Array),Jt&&console.log("z%d: %d clusters in %dms",ii,oe.length,+Date.now()-Si)}return Jt&&console.timeEnd("total time"),this},Kt.prototype.getClusters=function(Ft,Yt){var Jt=((Ft[0]+180)%360+360)%360-180,he=Math.max(-90,Math.min(90,Ft[1])),Ce=180===Ft[2]?180:((Ft[2]+180)%360+360)%360-180,De=Math.max(-90,Math.min(90,Ft[3]));if(Ft[2]-Ft[0]>=360)Jt=-180,Ce=180;else if(Jt>Ce){var Ge=this.getClusters([Jt,he,180,De],Yt),oe=this.getClusters([-180,he,Ce,De],Yt);return Ge.concat(oe)}for(var Ee=this.trees[this._limitZoom(Yt)],ii=[],Si=0,Oi=Ee.range(oi(Jt),fi(De),oi(Ce),fi(he));Si<Oi.length;Si+=1){var di=Ee.points[Oi[Si]];ii.push(di.numPoints?Te(di):this.points[di.index])}return ii},Kt.prototype.getChildren=function(Ft){var Yt=this._getOriginId(Ft),Jt=this._getOriginZoom(Ft),he="No cluster with the specified id.",Ce=this.trees[Jt];if(!Ce)throw new Error(he);var De=Ce.points[Yt];if(!De)throw new Error(he);for(var Ge=this.options.radius/(this.options.extent*Math.pow(2,Jt-1)),oe=[],Ee=0,ii=Ce.within(De.x,De.y,Ge);Ee<ii.length;Ee+=1){var Si=Ce.points[ii[Ee]];Si.parentId===Ft&&oe.push(Si.numPoints?Te(Si):this.points[Si.index])}if(0===oe.length)throw new Error(he);return oe},Kt.prototype.getLeaves=function(Ft,Yt,Jt){var he=[];return this._appendLeaves(he,Ft,Yt=Yt||10,Jt=Jt||0,0),he},Kt.prototype.getTile=function(Ft,Yt,Jt){var he=this.trees[this._limitZoom(Ft)],Ce=Math.pow(2,Ft),De=this.options,Ge=De.radius/De.extent,oe=(Jt-Ge)/Ce,Ee=(Jt+1+Ge)/Ce,ii={features:[]};return this._addTileFeatures(he.range((Yt-Ge)/Ce,oe,(Yt+1+Ge)/Ce,Ee),he.points,Yt,Jt,Ce,ii),0===Yt&&this._addTileFeatures(he.range(1-Ge/Ce,oe,1,Ee),he.points,Ce,Jt,Ce,ii),Yt===Ce-1&&this._addTileFeatures(he.range(0,oe,Ge/Ce,Ee),he.points,-1,Jt,Ce,ii),ii.features.length?ii:null},Kt.prototype.getClusterExpansionZoom=function(Ft){for(var Yt=this._getOriginZoom(Ft)-1;Yt<=this.options.maxZoom;){var Jt=this.getChildren(Ft);if(Yt++,1!==Jt.length)break;Ft=Jt[0].properties.cluster_id}return Yt},Kt.prototype._appendLeaves=function(Ft,Yt,Jt,he,Ce){for(var De=0,Ge=this.getChildren(Yt);De<Ge.length;De+=1){var oe=Ge[De],Ee=oe.properties;if(Ee&&Ee.cluster?Ce+Ee.point_count<=he?Ce+=Ee.point_count:Ce=this._appendLeaves(Ft,Ee.cluster_id,Jt,he,Ce):Ce<he?Ce++:Ft.push(oe),Ft.length===Jt)break}return Ce},Kt.prototype._addTileFeatures=function(Ft,Yt,Jt,he,Ce,De){for(var Ge=0,oe=Ft;Ge<oe.length;Ge+=1){var Ee=Yt[oe[Ge]],ii=Ee.numPoints,Si={type:1,geometry:[[Math.round(this.options.extent*(Ee.x*Ce-Jt)),Math.round(this.options.extent*(Ee.y*Ce-he))]],tags:ii?ye(Ee):this.points[Ee.index].properties},Oi=void 0;ii?Oi=Ee.id:this.options.generateId?Oi=Ee.index:this.points[Ee.index].id&&(Oi=this.points[Ee.index].id),void 0!==Oi&&(Si.id=Oi),De.features.push(Si)}},Kt.prototype._limitZoom=function(Ft){return Math.max(this.options.minZoom,Math.min(+Ft,this.options.maxZoom+1))},Kt.prototype._cluster=function(Ft,Yt){for(var Jt=[],he=this.options,Ce=he.reduce,De=he.minPoints,Ge=he.radius/(he.extent*Math.pow(2,Yt)),oe=0;oe<Ft.length;oe++){var Ee=Ft[oe];if(!(Ee.zoom<=Yt)){Ee.zoom=Yt;for(var ii=this.trees[Yt+1],Si=ii.within(Ee.x,Ee.y,Ge),Oi=Ee.numPoints||1,di=Oi,hi=0,sn=Si;hi<sn.length;hi+=1){var Fi=ii.points[sn[hi]];Fi.zoom>Yt&&(di+=Fi.numPoints||1)}if(di>=De){for(var yi=Ee.x*Oi,Zi=Ee.y*Oi,Yi=Ce&&Oi>1?this._map(Ee,!0):null,Ki=(oe<<5)+(Yt+1)+this.points.length,Nn=0,Vi=Si;Nn<Vi.length;Nn+=1){var so=ii.points[Vi[Nn]];if(!(so.zoom<=Yt)){so.zoom=Yt;var Hn=so.numPoints||1;yi+=so.x*Hn,Zi+=so.y*Hn,so.parentId=Ki,Ce&&(Yi||(Yi=this._map(Ee,!0)),Ce(Yi,this._map(so)))}}Ee.parentId=Ki,Jt.push(xe(yi/di,Zi/di,Ki,di,Yi))}else if(Jt.push(Ee),di>1)for(var Gn=0,vo=Si;Gn<vo.length;Gn+=1){var Jn=ii.points[vo[Gn]];Jn.zoom<=Yt||(Jn.zoom=Yt,Jt.push(Jn))}}}return Jt},Kt.prototype._getOriginId=function(Ft){return Ft-this.points.length>>5},Kt.prototype._getOriginZoom=function(Ft){return(Ft-this.points.length)%32},Kt.prototype._map=function(Ft,Yt){if(Ft.numPoints)return Yt?tn({},Ft.properties):Ft.properties;var Jt=this.points[Ft.index].properties,he=this.options.map(Jt);return Yt&&he===Jt?tn({},he):he},dr.prototype.options={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!1,debug:0},dr.prototype.splitTile=function(Ft,Yt,Jt,he,Ce,De,Ge){for(var oe=[Ft,Yt,Jt,he],Ee=this.options,ii=Ee.debug;oe.length;){he=oe.pop(),Jt=oe.pop(),Yt=oe.pop(),Ft=oe.pop();var Si=1<<Yt,Oi=gr(Yt,Jt,he),di=this.tiles[Oi];if(!di&&(ii>1&&console.time("creation"),di=this.tiles[Oi]=po(Ft,Yt,Jt,he,Ee),this.tileCoords.push({z:Yt,x:Jt,y:he}),ii)){ii>1&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",Yt,Jt,he,di.numFeatures,di.numPoints,di.numSimplified),console.timeEnd("creation"));var hi="z"+Yt;this.stats[hi]=(this.stats[hi]||0)+1,this.total++}if(di.source=Ft,Ce){if(Yt===Ee.maxZoom||Yt===Ce)continue;var sn=1<<Ce-Yt;if(Jt!==Math.floor(De/sn)||he!==Math.floor(Ge/sn))continue}else if(Yt===Ee.indexMaxZoom||di.numPoints<=Ee.indexMaxPoints)continue;if(di.source=null,0!==Ft.length){ii>1&&console.time("clipping");var Fi,yi,Zi,Yi,Ki,Nn,Vi=.5*Ee.buffer/Ee.extent,so=.5-Vi,Hn=.5+Vi,Gn=1+Vi;Fi=yi=Zi=Yi=null,Ki=ee(Ft,Si,Jt-Vi,Jt+Hn,0,di.minX,di.maxX,Ee),Nn=ee(Ft,Si,Jt+so,Jt+Gn,0,di.minX,di.maxX,Ee),Ft=null,Ki&&(Fi=ee(Ki,Si,he-Vi,he+Hn,1,di.minY,di.maxY,Ee),yi=ee(Ki,Si,he+so,he+Gn,1,di.minY,di.maxY,Ee),Ki=null),Nn&&(Zi=ee(Nn,Si,he-Vi,he+Hn,1,di.minY,di.maxY,Ee),Yi=ee(Nn,Si,he+so,he+Gn,1,di.minY,di.maxY,Ee),Nn=null),ii>1&&console.timeEnd("clipping"),oe.push(Fi||[],Yt+1,2*Jt,2*he),oe.push(yi||[],Yt+1,2*Jt,2*he+1),oe.push(Zi||[],Yt+1,2*Jt+1,2*he),oe.push(Yi||[],Yt+1,2*Jt+1,2*he+1)}}},dr.prototype.getTile=function(Ft,Yt,Jt){var he=this.options,Ce=he.extent,De=he.debug;if(Ft<0||Ft>24)return null;var Ge=1<<Ft,oe=gr(Ft,Yt=(Yt%Ge+Ge)%Ge,Jt);if(this.tiles[oe])return Dr(this.tiles[oe],Ce);De>1&&console.log("drilling down to z%d-%d-%d",Ft,Yt,Jt);for(var Ee,ii=Ft,Si=Yt,Oi=Jt;!Ee&&ii>0;)ii--,Si=Math.floor(Si/2),Oi=Math.floor(Oi/2),Ee=this.tiles[gr(ii,Si,Oi)];return Ee&&Ee.source?(De>1&&console.log("found parent tile z%d-%d-%d",ii,Si,Oi),De>1&&console.time("drilling down"),this.splitTile(Ee.source,ii,Si,Oi,Ft,Yt,Jt),De>1&&console.timeEnd("drilling down"),this.tiles[oe]?Dr(this.tiles[oe],Ce):null):null};var kn=function(Ft){function Yt(Jt,he,Ce,De){Ft.call(this,Jt,he,Ce,lr),De&&(this.loadGeoJSON=De)}return Ft&&(Yt.__proto__=Ft),(Yt.prototype=Object.create(Ft&&Ft.prototype)).constructor=Yt,Yt.prototype.loadData=function(Jt,he){this._pendingCallback&&this._pendingCallback(null,{abandoned:!0}),this._pendingCallback=he,this._pendingLoadDataParams=Jt,this._state&&"Idle"!==this._state?this._state="NeedsLoadData":(this._state="Coalescing",this._loadData())},Yt.prototype._loadData=function(){var Jt=this;if(this._pendingCallback&&this._pendingLoadDataParams){var he=this._pendingCallback,Ce=this._pendingLoadDataParams;delete this._pendingCallback,delete this._pendingLoadDataParams;var De=!!(Ce&&Ce.request&&Ce.request.collectResourceTiming)&&new l.RequestPerformance(Ce.request);this.loadGeoJSON(Ce,function(Ge,oe){if(Ge||!oe)return he(Ge);if("object"!=typeof oe)return he(new Error("Input data given to '"+Ce.source+"' is not a valid GeoJSON object."));!function di(hi,sn){var Fi,yi=hi&&hi.type;if("FeatureCollection"===yi)for(Fi=0;Fi<hi.features.length;Fi++)di(hi.features[Fi],sn);else if("GeometryCollection"===yi)for(Fi=0;Fi<hi.geometries.length;Fi++)di(hi.geometries[Fi],sn);else if("Feature"===yi)di(hi.geometry,sn);else if("Polygon"===yi)B(hi.coordinates,sn);else if("MultiPolygon"===yi)for(Fi=0;Fi<hi.coordinates.length;Fi++)B(hi.coordinates[Fi],sn);return hi}(oe,!0);try{if(Ce.filter){var Ee=l.createExpression(Ce.filter,{type:"boolean","property-type":"data-driven",overridable:!1,transition:!1});if("error"===Ee.result)throw new Error(Ee.value.map(function(di){return di.key+": "+di.message}).join(", "));var ii=oe.features.filter(function(di){return Ee.value.evaluate({zoom:0},di)});oe={type:"FeatureCollection",features:ii}}Jt._geoJSONIndex=Ce.cluster?new Kt(function(di){var hi=di.superclusterOptions,sn=di.clusterProperties;if(!sn||!hi)return hi;for(var Fi={},yi={},Zi={accumulated:null,zoom:0},Yi={properties:null},Ki=Object.keys(sn),Nn=0,Vi=Ki;Nn<Vi.length;Nn+=1){var so=Vi[Nn],Hn=sn[so],Gn=Hn[0],vo=l.createExpression(Hn[1]),Jn=l.createExpression("string"==typeof Gn?[Gn,["accumulated"],["get",so]]:Gn);Fi[so]=vo.value,yi[so]=Jn.value}return hi.map=function(yr){Yi.properties=yr;for(var Co={},vr=0,bo=Ki;vr<bo.length;vr+=1){var ao=bo[vr];Co[ao]=Fi[ao].evaluate(Zi,Yi)}return Co},hi.reduce=function(yr,Co){Yi.properties=Co;for(var vr=0,bo=Ki;vr<bo.length;vr+=1){var ao=bo[vr];Zi.accumulated=yr[ao],yr[ao]=yi[ao].evaluate(Zi,Yi)}},hi}(Ce)).load(oe.features):new dr(di=oe,Ce.geojsonVtOptions)}catch(di){return he(di)}var di;Jt.loaded={};var Si={};if(De){var Oi=De.finish();Oi&&(Si.resourceTiming={},Si.resourceTiming[Ce.source]=JSON.parse(JSON.stringify(Oi)))}he(null,Si)})}},Yt.prototype.coalesce=function(){"Coalescing"===this._state?this._state="Idle":"NeedsLoadData"===this._state&&(this._state="Coalescing",this._loadData())},Yt.prototype.reloadTile=function(Jt,he){var Ce=this.loaded;return Ce&&Ce[Jt.uid]?Ft.prototype.reloadTile.call(this,Jt,he):this.loadTile(Jt,he)},Yt.prototype.loadGeoJSON=function(Jt,he){if(Jt.request)l.getJSON(Jt.request,he);else{if("string"!=typeof Jt.data)return he(new Error("Input data given to '"+Jt.source+"' is not a valid GeoJSON object."));try{return he(null,JSON.parse(Jt.data))}catch{return he(new Error("Input data given to '"+Jt.source+"' is not a valid GeoJSON object."))}}},Yt.prototype.removeSource=function(Jt,he){this._pendingCallback&&this._pendingCallback(null,{abandoned:!0}),he()},Yt.prototype.getClusterExpansionZoom=function(Jt,he){try{he(null,this._geoJSONIndex.getClusterExpansionZoom(Jt.clusterId))}catch(Ce){he(Ce)}},Yt.prototype.getClusterChildren=function(Jt,he){try{he(null,this._geoJSONIndex.getChildren(Jt.clusterId))}catch(Ce){he(Ce)}},Yt.prototype.getClusterLeaves=function(Jt,he){try{he(null,this._geoJSONIndex.getLeaves(Jt.clusterId,Jt.limit,Jt.offset))}catch(Ce){he(Ce)}},Yt}(_),En=function(Ft){var Yt=this;this.self=Ft,this.actor=new l.Actor(Ft,this),this.layerIndexes={},this.availableImages={},this.workerSourceTypes={vector:_,geojson:kn},this.workerSources={},this.demWorkerSources={},this.self.registerWorkerSource=function(Jt,he){if(Yt.workerSourceTypes[Jt])throw new Error('Worker source with name "'+Jt+'" already registered.');Yt.workerSourceTypes[Jt]=he},this.self.registerRTLTextPlugin=function(Jt){if(l.plugin.isParsed())throw new Error("RTL text plugin already registered.");l.plugin.applyArabicShaping=Jt.applyArabicShaping,l.plugin.processBidirectionalText=Jt.processBidirectionalText,l.plugin.processStyledBidirectionalText=Jt.processStyledBidirectionalText}};return En.prototype.setReferrer=function(Ft,Yt){this.referrer=Yt},En.prototype.setImages=function(Ft,Yt,Jt){for(var he in this.availableImages[Ft]=Yt,this.workerSources[Ft]){var Ce=this.workerSources[Ft][he];for(var De in Ce)Ce[De].availableImages=Yt}Jt()},En.prototype.setLayers=function(Ft,Yt,Jt){this.getLayerIndex(Ft).replace(Yt),Jt()},En.prototype.updateLayers=function(Ft,Yt,Jt){this.getLayerIndex(Ft).update(Yt.layers,Yt.removedIds),Jt()},En.prototype.loadTile=function(Ft,Yt,Jt){this.getWorkerSource(Ft,Yt.type,Yt.source).loadTile(Yt,Jt)},En.prototype.loadDEMTile=function(Ft,Yt,Jt){this.getDEMWorkerSource(Ft,Yt.source).loadTile(Yt,Jt)},En.prototype.reloadTile=function(Ft,Yt,Jt){this.getWorkerSource(Ft,Yt.type,Yt.source).reloadTile(Yt,Jt)},En.prototype.abortTile=function(Ft,Yt,Jt){this.getWorkerSource(Ft,Yt.type,Yt.source).abortTile(Yt,Jt)},En.prototype.removeTile=function(Ft,Yt,Jt){this.getWorkerSource(Ft,Yt.type,Yt.source).removeTile(Yt,Jt)},En.prototype.removeDEMTile=function(Ft,Yt){this.getDEMWorkerSource(Ft,Yt.source).removeTile(Yt)},En.prototype.removeSource=function(Ft,Yt,Jt){if(this.workerSources[Ft]&&this.workerSources[Ft][Yt.type]&&this.workerSources[Ft][Yt.type][Yt.source]){var he=this.workerSources[Ft][Yt.type][Yt.source];delete this.workerSources[Ft][Yt.type][Yt.source],void 0!==he.removeSource?he.removeSource(Yt,Jt):Jt()}},En.prototype.loadWorkerSource=function(Ft,Yt,Jt){try{this.self.importScripts(Yt.url),Jt()}catch(he){Jt(he.toString())}},En.prototype.syncRTLPluginState=function(Ft,Yt,Jt){try{l.plugin.setState(Yt);var he=l.plugin.getPluginURL();if(l.plugin.isLoaded()&&!l.plugin.isParsed()&&null!=he){this.self.importScripts(he);var Ce=l.plugin.isParsed();Jt(Ce?void 0:new Error("RTL Text Plugin failed to import scripts from "+he),Ce)}}catch(De){Jt(De.toString())}},En.prototype.getAvailableImages=function(Ft){var Yt=this.availableImages[Ft];return Yt||(Yt=[]),Yt},En.prototype.getLayerIndex=function(Ft){var Yt=this.layerIndexes[Ft];return Yt||(Yt=this.layerIndexes[Ft]=new G),Yt},En.prototype.getWorkerSource=function(Ft,Yt,Jt){var he=this;return this.workerSources[Ft]||(this.workerSources[Ft]={}),this.workerSources[Ft][Yt]||(this.workerSources[Ft][Yt]={}),this.workerSources[Ft][Yt][Jt]||(this.workerSources[Ft][Yt][Jt]=new this.workerSourceTypes[Yt]({send:function(Ce,De,Ge){he.actor.send(Ce,De,Ge,Ft)}},this.getLayerIndex(Ft),this.getAvailableImages(Ft))),this.workerSources[Ft][Yt][Jt]},En.prototype.getDEMWorkerSource=function(Ft,Yt){return this.demWorkerSources[Ft]||(this.demWorkerSources[Ft]={}),this.demWorkerSources[Ft][Yt]||(this.demWorkerSources[Ft][Yt]=new O),this.demWorkerSources[Ft][Yt]},En.prototype.enforceCacheSizeLimit=function(Ft,Yt){l.enforceCacheSizeLimit(Yt)},typeof WorkerGlobalScope<"u"&&typeof self<"u"&&self instanceof WorkerGlobalScope&&(self.worker=new En(self)),En}),w(0,function(l){var it=l.createCommonjsModule(function(o){function a(P){return!s(P)}function s(P){return typeof window>"u"||typeof document>"u"?"not a browser":Array.prototype&&Array.prototype.every&&Array.prototype.filter&&Array.prototype.forEach&&Array.prototype.indexOf&&Array.prototype.lastIndexOf&&Array.prototype.map&&Array.prototype.some&&Array.prototype.reduce&&Array.prototype.reduceRight&&Array.isArray?Function.prototype&&Function.prototype.bind?Object.keys&&Object.create&&Object.getPrototypeOf&&Object.getOwnPropertyNames&&Object.isSealed&&Object.isFrozen&&Object.isExtensible&&Object.getOwnPropertyDescriptor&&Object.defineProperty&&Object.defineProperties&&Object.seal&&Object.freeze&&Object.preventExtensions?"JSON"in window&&"parse"in JSON&&"stringify"in JSON?function(){if(!("Worker"in window&&"Blob"in window&&"URL"in window))return!1;var $,gt,Dt=new Blob([""],{type:"text/javascript"}),Ht=URL.createObjectURL(Dt);try{gt=new Worker(Ht),$=!0}catch{$=!1}return gt&&gt.terminate(),URL.revokeObjectURL(Ht),$}()?"Uint8ClampedArray"in window?ArrayBuffer.isView?function(){var $=document.createElement("canvas");$.width=$.height=1;var gt=$.getContext("2d");if(!gt)return!1;var Dt=gt.getImageData(0,0,1,1);return Dt&&Dt.width===$.width}()?(void 0===u[W=P&&P.failIfMajorPerformanceCaveat]&&(u[W]=function($){var Ht,re,le,gt=(Ht=$,re=document.createElement("canvas"),(le=Object.create(a.webGLContextAttributes)).failIfMajorPerformanceCaveat=Ht,re.probablySupportsContext?re.probablySupportsContext("webgl",le)||re.probablySupportsContext("experimental-webgl",le):re.supportsContext?re.supportsContext("webgl",le)||re.supportsContext("experimental-webgl",le):re.getContext("webgl",le)||re.getContext("experimental-webgl",le));if(!gt)return!1;var Dt=gt.createShader(gt.VERTEX_SHADER);return!(!Dt||gt.isContextLost())&&(gt.shaderSource(Dt,"void main() {}"),gt.compileShader(Dt),!0===gt.getShaderParameter(Dt,gt.COMPILE_STATUS))}(W)),u[W]?void 0:"insufficient WebGL support"):"insufficient Canvas/getImageData support":"insufficient ArrayBuffer support":"insufficient Uint8ClampedArray support":"insufficient worker support":"insufficient JSON support":"insufficient Object support":"insufficient Function support":"insufficent Array support";var W}o.exports?o.exports=a:window&&(window.mapboxgl=window.mapboxgl||{},window.mapboxgl.supported=a,window.mapboxgl.notSupportedReason=s);var u={};a.webGLContextAttributes={antialias:!1,alpha:!0,stencil:!0,depth:!0}}),N={create:function(o,a,s){var u=l.window.document.createElement(o);return void 0!==a&&(u.className=a),s&&s.appendChild(u),u},createNS:function(o,a){return l.window.document.createElementNS(o,a)}},G=l.window.document&&l.window.document.documentElement.style;function v(o){if(!G)return o[0];for(var a=0;a<o.length;a++)if(o[a]in G)return o[a];return o[0]}var M,b=v(["userSelect","MozUserSelect","WebkitUserSelect","msUserSelect"]);N.disableDrag=function(){G&&b&&(M=G[b],G[b]="none")},N.enableDrag=function(){G&&b&&(G[b]=M)};var k=v(["transform","WebkitTransform"]);N.setTransform=function(o,a){o.style[k]=a};var _=!1;try{var y=Object.defineProperty({},"passive",{get:function(){_=!0}});l.window.addEventListener("test",y,y),l.window.removeEventListener("test",y,y)}catch{_=!1}N.addEventListener=function(o,a,s,u){void 0===u&&(u={}),o.addEventListener(a,s,"passive"in u&&_?u:u.capture)},N.removeEventListener=function(o,a,s,u){void 0===u&&(u={}),o.removeEventListener(a,s,"passive"in u&&_?u:u.capture)};var O=function(o){o.preventDefault(),o.stopPropagation(),l.window.removeEventListener("click",O,!0)};function B(o){var a=o.userImage;return!!(a&&a.render&&a.render())&&(o.data.replace(new Uint8Array(a.data.buffer)),!0)}N.suppressClick=function(){l.window.addEventListener("click",O,!0),l.window.setTimeout(function(){l.window.removeEventListener("click",O,!0)},0)},N.mousePos=function(o,a){var s=o.getBoundingClientRect();return new l.Point(a.clientX-s.left-o.clientLeft,a.clientY-s.top-o.clientTop)},N.touchPos=function(o,a){for(var s=o.getBoundingClientRect(),u=[],P=0;P<a.length;P++)u.push(new l.Point(a[P].clientX-s.left-o.clientLeft,a[P].clientY-s.top-o.clientTop));return u},N.mouseButton=function(o){return void 0!==l.window.InstallTrigger&&2===o.button&&o.ctrlKey&&l.window.navigator.platform.toUpperCase().indexOf("MAC")>=0?0:o.button},N.remove=function(o){o.parentNode&&o.parentNode.removeChild(o)};var H=function(o){function a(){o.call(this),this.images={},this.updatedImages={},this.callbackDispatchedThisFrame={},this.loaded=!1,this.requestors=[],this.patterns={},this.atlasImage=new l.RGBAImage({width:1,height:1}),this.dirty=!0}return o&&(a.__proto__=o),(a.prototype=Object.create(o&&o.prototype)).constructor=a,a.prototype.isLoaded=function(){return this.loaded},a.prototype.setLoaded=function(s){if(this.loaded!==s&&(this.loaded=s,s)){for(var u=0,P=this.requestors;u<P.length;u+=1){var W=P[u];this._notify(W.ids,W.callback)}this.requestors=[]}},a.prototype.getImage=function(s){return this.images[s]},a.prototype.addImage=function(s,u){this._validate(s,u)&&(this.images[s]=u)},a.prototype._validate=function(s,u){var P=!0;return this._validateStretch(u.stretchX,u.data&&u.data.width)||(this.fire(new l.ErrorEvent(new Error('Image "'+s+'" has invalid "stretchX" value'))),P=!1),this._validateStretch(u.stretchY,u.data&&u.data.height)||(this.fire(new l.ErrorEvent(new Error('Image "'+s+'" has invalid "stretchY" value'))),P=!1),this._validateContent(u.content,u)||(this.fire(new l.ErrorEvent(new Error('Image "'+s+'" has invalid "content" value'))),P=!1),P},a.prototype._validateStretch=function(s,u){if(!s)return!0;for(var P=0,W=0,$=s;W<$.length;W+=1){var gt=$[W];if(gt[0]<P||gt[1]<gt[0]||u<gt[1])return!1;P=gt[1]}return!0},a.prototype._validateContent=function(s,u){return!(s&&(4!==s.length||s[0]<0||u.data.width<s[0]||s[1]<0||u.data.height<s[1]||s[2]<0||u.data.width<s[2]||s[3]<0||u.data.height<s[3]||s[2]<s[0]||s[3]<s[1]))},a.prototype.updateImage=function(s,u){u.version=this.images[s].version+1,this.images[s]=u,this.updatedImages[s]=!0},a.prototype.removeImage=function(s){var u=this.images[s];delete this.images[s],delete this.patterns[s],u.userImage&&u.userImage.onRemove&&u.userImage.onRemove()},a.prototype.listImages=function(){return Object.keys(this.images)},a.prototype.getImages=function(s,u){var P=!0;if(!this.isLoaded())for(var W=0,$=s;W<$.length;W+=1)this.images[$[W]]||(P=!1);this.isLoaded()||P?this._notify(s,u):this.requestors.push({ids:s,callback:u})},a.prototype._notify=function(s,u){for(var P={},W=0,$=s;W<$.length;W+=1){var gt=$[W];this.images[gt]||this.fire(new l.Event("styleimagemissing",{id:gt}));var Dt=this.images[gt];Dt?P[gt]={data:Dt.data.clone(),pixelRatio:Dt.pixelRatio,sdf:Dt.sdf,version:Dt.version,stretchX:Dt.stretchX,stretchY:Dt.stretchY,content:Dt.content,hasRenderCallback:Boolean(Dt.userImage&&Dt.userImage.render)}:l.warnOnce('Image "'+gt+'" could not be loaded. Please make sure you have added the image with map.addImage() or a "sprite" property in your style. You can provide missing images by listening for the "styleimagemissing" map event.')}u(null,P)},a.prototype.getPixelSize=function(){var s=this.atlasImage;return{width:s.width,height:s.height}},a.prototype.getPattern=function(s){var u=this.patterns[s],P=this.getImage(s);if(!P)return null;if(u&&u.position.version===P.version)return u.position;if(u)u.position.version=P.version;else{var W={w:P.data.width+2,h:P.data.height+2,x:0,y:0},$=new l.ImagePosition(W,P);this.patterns[s]={bin:W,position:$}}return this._updatePatternAtlas(),this.patterns[s].position},a.prototype.bind=function(s){var u=s.gl;this.atlasTexture?this.dirty&&(this.atlasTexture.update(this.atlasImage),this.dirty=!1):this.atlasTexture=new l.Texture(s,this.atlasImage,u.RGBA),this.atlasTexture.bind(u.LINEAR,u.CLAMP_TO_EDGE)},a.prototype._updatePatternAtlas=function(){var s=[];for(var u in this.patterns)s.push(this.patterns[u].bin);var P=l.potpack(s),W=P.w,$=P.h,gt=this.atlasImage;for(var Dt in gt.resize({width:W||1,height:$||1}),this.patterns){var Ht=this.patterns[Dt].bin,re=Ht.x+1,le=Ht.y+1,de=this.images[Dt].data,Ie=de.width,Pe=de.height;l.RGBAImage.copy(de,gt,{x:0,y:0},{x:re,y:le},{width:Ie,height:Pe}),l.RGBAImage.copy(de,gt,{x:0,y:Pe-1},{x:re,y:le-1},{width:Ie,height:1}),l.RGBAImage.copy(de,gt,{x:0,y:0},{x:re,y:le+Pe},{width:Ie,height:1}),l.RGBAImage.copy(de,gt,{x:Ie-1,y:0},{x:re-1,y:le},{width:1,height:Pe}),l.RGBAImage.copy(de,gt,{x:0,y:0},{x:re+Ie,y:le},{width:1,height:Pe})}this.dirty=!0},a.prototype.beginFrame=function(){this.callbackDispatchedThisFrame={}},a.prototype.dispatchRenderCallbacks=function(s){for(var u=0,P=s;u<P.length;u+=1){var W=P[u];if(!this.callbackDispatchedThisFrame[W]){this.callbackDispatchedThisFrame[W]=!0;var $=this.images[W];B($)&&this.updateImage(W,$)}}},a}(l.Evented),at=z,ft=z,rt=1e20;function z(o,a,s,u,P,W){this.fontSize=o||24,this.buffer=void 0===a?3:a,this.cutoff=u||.25,this.fontFamily=P||"sans-serif",this.fontWeight=W||"normal",this.radius=s||8;var $=this.size=this.fontSize+2*this.buffer;this.canvas=document.createElement("canvas"),this.canvas.width=this.canvas.height=$,this.ctx=this.canvas.getContext("2d"),this.ctx.font=this.fontWeight+" "+this.fontSize+"px "+this.fontFamily,this.ctx.textBaseline="middle",this.ctx.fillStyle="black",this.gridOuter=new Float64Array($*$),this.gridInner=new Float64Array($*$),this.f=new Float64Array($),this.d=new Float64Array($),this.z=new Float64Array($+1),this.v=new Int16Array($),this.middle=Math.round($/2*(navigator.userAgent.indexOf("Gecko/")>=0?1.2:1))}function q(o,a,s,u,P,W,$){for(var gt=0;gt<a;gt++){for(var Dt=0;Dt<s;Dt++)u[Dt]=o[Dt*a+gt];for(mt(u,P,W,$,s),Dt=0;Dt<s;Dt++)o[Dt*a+gt]=P[Dt]}for(Dt=0;Dt<s;Dt++){for(gt=0;gt<a;gt++)u[gt]=o[Dt*a+gt];for(mt(u,P,W,$,a),gt=0;gt<a;gt++)o[Dt*a+gt]=Math.sqrt(P[gt])}}function mt(o,a,s,u,P){s[0]=0,u[0]=-rt,u[1]=+rt;for(var W=1,$=0;W<P;W++){for(var gt=(o[W]+W*W-(o[s[$]]+s[$]*s[$]))/(2*W-2*s[$]);gt<=u[$];)$--,gt=(o[W]+W*W-(o[s[$]]+s[$]*s[$]))/(2*W-2*s[$]);s[++$]=W,u[$]=gt,u[$+1]=+rt}for(W=0,$=0;W<P;W++){for(;u[$+1]<W;)$++;a[W]=(W-s[$])*(W-s[$])+o[s[$]]}}z.prototype.draw=function(o){this.ctx.clearRect(0,0,this.size,this.size),this.ctx.fillText(o,this.buffer,this.middle);for(var a=this.ctx.getImageData(0,0,this.size,this.size),s=new Uint8ClampedArray(this.size*this.size),u=0;u<this.size*this.size;u++){var P=a.data[4*u+3]/255;this.gridOuter[u]=1===P?0:0===P?rt:Math.pow(Math.max(0,.5-P),2),this.gridInner[u]=1===P?rt:0===P?0:Math.pow(Math.max(0,P-.5),2)}for(q(this.gridOuter,this.size,this.size,this.f,this.d,this.v,this.z),q(this.gridInner,this.size,this.size,this.f,this.d,this.v,this.z),u=0;u<this.size*this.size;u++)s[u]=Math.max(0,Math.min(255,Math.round(255-255*((this.gridOuter[u]-this.gridInner[u])/this.radius+this.cutoff))));return s},at.default=ft;var pt=function(o,a){this.requestManager=o,this.localIdeographFontFamily=a,this.entries={}};pt.prototype.setURL=function(o){this.url=o},pt.prototype.getGlyphs=function(o,a){var s=this,u=[];for(var P in o)for(var W=0,$=o[P];W<$.length;W+=1)u.push({stack:P,id:$[W]});l.asyncAll(u,function(gt,Dt){var Ht=gt.stack,re=gt.id,le=s.entries[Ht];le||(le=s.entries[Ht]={glyphs:{},requests:{},ranges:{}});var de=le.glyphs[re];if(void 0===de){if(de=s._tinySDF(le,Ht,re))return le.glyphs[re]=de,void Dt(null,{stack:Ht,id:re,glyph:de});var Ie=Math.floor(re/256);if(256*Ie>65535)Dt(new Error("glyphs > 65535 not supported"));else if(le.ranges[Ie])Dt(null,{stack:Ht,id:re,glyph:de});else{var Pe=le.requests[Ie];Pe||(Pe=le.requests[Ie]=[],pt.loadGlyphRange(Ht,Ie,s.url,s.requestManager,function(Oe,Se){if(Se){for(var Re in Se)s._doesCharSupportLocalGlyph(+Re)||(le.glyphs[+Re]=Se[+Re]);le.ranges[Ie]=!0}for(var Ze=0,si=Pe;Ze<si.length;Ze+=1)(0,si[Ze])(Oe,Se);delete le.requests[Ie]})),Pe.push(function(Oe,Se){Oe?Dt(Oe):Se&&Dt(null,{stack:Ht,id:re,glyph:Se[re]||null})})}}else Dt(null,{stack:Ht,id:re,glyph:de})},function(gt,Dt){if(gt)a(gt);else if(Dt){for(var Ht={},re=0,le=Dt;re<le.length;re+=1){var de=le[re],Ie=de.stack,Pe=de.id,Oe=de.glyph;(Ht[Ie]||(Ht[Ie]={}))[Pe]=Oe&&{id:Oe.id,bitmap:Oe.bitmap.clone(),metrics:Oe.metrics}}a(null,Ht)}})},pt.prototype._doesCharSupportLocalGlyph=function(o){return!!this.localIdeographFontFamily&&(l.isChar["CJK Unified Ideographs"](o)||l.isChar["Hangul Syllables"](o)||l.isChar.Hiragana(o)||l.isChar.Katakana(o))},pt.prototype._tinySDF=function(o,a,s){var u=this.localIdeographFontFamily;if(u&&this._doesCharSupportLocalGlyph(s)){var P=o.tinySDF;if(!P){var W="400";/bold/i.test(a)?W="900":/medium/i.test(a)?W="500":/light/i.test(a)&&(W="200"),P=o.tinySDF=new pt.TinySDF(24,3,8,.25,u,W)}return{id:s,bitmap:new l.AlphaImage({width:30,height:30},P.draw(String.fromCharCode(s))),metrics:{width:24,height:24,left:0,top:-8,advance:24}}}},pt.loadGlyphRange=function(o,a,s,u,P){var W=256*a,$=W+255,gt=u.transformRequest(u.normalizeGlyphsURL(s).replace("{fontstack}",o).replace("{range}",W+"-"+$),l.ResourceType.Glyphs);l.getArrayBuffer(gt,function(Dt,Ht){if(Dt)P(Dt);else if(Ht){for(var re={},le=0,de=l.parseGlyphPBF(Ht);le<de.length;le+=1){var Ie=de[le];re[Ie.id]=Ie}P(null,re)}})},pt.TinySDF=at;var dt=function(){this.specification=l.styleSpec.light.position};dt.prototype.possiblyEvaluate=function(o,a){return l.sphericalToCartesian(o.expression.evaluate(a))},dt.prototype.interpolate=function(o,a,s){return{x:l.number(o.x,a.x,s),y:l.number(o.y,a.y,s),z:l.number(o.z,a.z,s)}};var Y=new l.Properties({anchor:new l.DataConstantProperty(l.styleSpec.light.anchor),position:new dt,color:new l.DataConstantProperty(l.styleSpec.light.color),intensity:new l.DataConstantProperty(l.styleSpec.light.intensity)}),lt=function(o){function a(s){o.call(this),this._transitionable=new l.Transitionable(Y),this.setLight(s),this._transitioning=this._transitionable.untransitioned()}return o&&(a.__proto__=o),(a.prototype=Object.create(o&&o.prototype)).constructor=a,a.prototype.getLight=function(){return this._transitionable.serialize()},a.prototype.setLight=function(s,u){if(void 0===u&&(u={}),!this._validate(l.validateLight,s,u))for(var P in s){var W=s[P];l.endsWith(P,"-transition")?this._transitionable.setTransition(P.slice(0,-11),W):this._transitionable.setValue(P,W)}},a.prototype.updateTransitions=function(s){this._transitioning=this._transitionable.transitioned(s,this._transitioning)},a.prototype.hasTransition=function(){return this._transitioning.hasTransition()},a.prototype.recalculate=function(s){this.properties=this._transitioning.possiblyEvaluate(s)},a.prototype._validate=function(s,u,P){return(!P||!1!==P.validate)&&l.emitValidationErrors(this,s.call(l.validateStyle,l.extend({value:u,style:{glyphs:!0,sprite:!0},styleSpec:l.styleSpec})))},a}(l.Evented),ht=function(o,a){this.width=o,this.height=a,this.nextRow=0,this.data=new Uint8Array(this.width*this.height),this.dashEntry={}};ht.prototype.getDash=function(o,a){var s=o.join(",")+String(a);return this.dashEntry[s]||(this.dashEntry[s]=this.addDash(o,a)),this.dashEntry[s]},ht.prototype.getDashRanges=function(o,a,s){var u=[],P=o.length%2==1?-o[o.length-1]*s:0,W=o[0]*s,$=!0;u.push({left:P,right:W,isDash:$,zeroLength:0===o[0]});for(var gt=o[0],Dt=1;Dt<o.length;Dt++){var Ht=o[Dt];u.push({left:P=gt*s,right:W=(gt+=Ht)*s,isDash:$=!$,zeroLength:0===Ht})}return u},ht.prototype.addRoundDash=function(o,a,s){for(var u=a/2,P=-s;P<=s;P++)for(var W=this.width*(this.nextRow+s+P),$=0,gt=o[$],Dt=0;Dt<this.width;Dt++){Dt/gt.right>1&&(gt=o[++$]);var Ht=Math.abs(Dt-gt.left),re=Math.abs(Dt-gt.right),le=Math.min(Ht,re),de=void 0,Ie=P/s*(u+1);if(gt.isDash){var Pe=u-Math.abs(Ie);de=Math.sqrt(le*le+Pe*Pe)}else de=u-Math.sqrt(le*le+Ie*Ie);this.data[W+Dt]=Math.max(0,Math.min(255,de+128))}},ht.prototype.addRegularDash=function(o){for(var a=o.length-1;a>=0;--a){var s=o[a],u=o[a+1];s.zeroLength?o.splice(a,1):u&&u.isDash===s.isDash&&(u.left=s.left,o.splice(a,1))}var P=o[0],W=o[o.length-1];P.isDash===W.isDash&&(P.left=W.left-this.width,W.right=P.right+this.width);for(var $=this.width*this.nextRow,gt=0,Dt=o[gt],Ht=0;Ht<this.width;Ht++){Ht/Dt.right>1&&(Dt=o[++gt]);var re=Math.abs(Ht-Dt.left),le=Math.abs(Ht-Dt.right),de=Math.min(re,le);this.data[$+Ht]=Math.max(0,Math.min(255,(Dt.isDash?de:-de)+128))}},ht.prototype.addDash=function(o,a){var s=a?7:0,u=2*s+1;if(this.nextRow+u>this.height)return l.warnOnce("LineAtlas out of space"),null;for(var P=0,W=0;W<o.length;W++)P+=o[W];if(0!==P){var $=this.width/P,gt=this.getDashRanges(o,this.width,$);a?this.addRoundDash(gt,$,s):this.addRegularDash(gt)}var Dt={y:(this.nextRow+s+.5)/this.height,height:2*s/this.height,width:P};return this.nextRow+=u,this.dirty=!0,Dt},ht.prototype.bind=function(o){var a=o.gl;this.texture?(a.bindTexture(a.TEXTURE_2D,this.texture),this.dirty&&(this.dirty=!1,a.texSubImage2D(a.TEXTURE_2D,0,0,0,this.width,this.height,a.ALPHA,a.UNSIGNED_BYTE,this.data))):(this.texture=a.createTexture(),a.bindTexture(a.TEXTURE_2D,this.texture),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_WRAP_S,a.REPEAT),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_WRAP_T,a.REPEAT),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_MIN_FILTER,a.LINEAR),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_MAG_FILTER,a.LINEAR),a.texImage2D(a.TEXTURE_2D,0,a.ALPHA,this.width,this.height,0,a.ALPHA,a.UNSIGNED_BYTE,this.data))};var Lt=function o(a,s){this.workerPool=a,this.actors=[],this.currentActor=0,this.id=l.uniqueId();for(var u=this.workerPool.acquire(this.id),P=0;P<u.length;P++){var W=new o.Actor(u[P],s,this.id);W.name="Worker "+P,this.actors.push(W)}};function At(o,a,s){var u=function(P,W){if(P)return s(P);if(W){var $=l.pick(l.extend(W,o),["tiles","minzoom","maxzoom","attribution","mapbox_logo","bounds","scheme","tileSize","encoding"]);W.vector_layers&&($.vectorLayers=W.vector_layers,$.vectorLayerIds=$.vectorLayers.map(function(gt){return gt.id})),$.tiles=a.canonicalizeTileset($,o.url),s(null,$)}};return o.url?l.getJSON(a.transformRequest(a.normalizeSourceURL(o.url),l.ResourceType.Source),u):l.browser.frame(function(){return u(null,o)})}Lt.prototype.broadcast=function(o,a,s){l.asyncAll(this.actors,function(u,P){u.send(o,a,P)},s=s||function(){})},Lt.prototype.getActor=function(){return this.currentActor=(this.currentActor+1)%this.actors.length,this.actors[this.currentActor]},Lt.prototype.remove=function(){this.actors.forEach(function(o){o.remove()}),this.actors=[],this.workerPool.release(this.id)},Lt.Actor=l.Actor;var Wt=function(o,a,s){this.bounds=l.LngLatBounds.convert(this.validateBounds(o)),this.minzoom=a||0,this.maxzoom=s||24};Wt.prototype.validateBounds=function(o){return Array.isArray(o)&&4===o.length?[Math.max(-180,o[0]),Math.max(-90,o[1]),Math.min(180,o[2]),Math.min(90,o[3])]:[-180,-90,180,90]},Wt.prototype.contains=function(o){var a=Math.pow(2,o.z),s=Math.floor(l.mercatorXfromLng(this.bounds.getWest())*a),u=Math.floor(l.mercatorYfromLat(this.bounds.getNorth())*a),P=Math.ceil(l.mercatorXfromLng(this.bounds.getEast())*a),W=Math.ceil(l.mercatorYfromLat(this.bounds.getSouth())*a);return o.x>=s&&o.x<P&&o.y>=u&&o.y<W};var Ot=function(o){function a(s,u,P,W){if(o.call(this),this.id=s,this.dispatcher=P,this.type="vector",this.minzoom=0,this.maxzoom=22,this.scheme="xyz",this.tileSize=512,this.reparseOverscaled=!0,this.isTileClipped=!0,this._loaded=!1,l.extend(this,l.pick(u,["url","scheme","tileSize","promoteId"])),this._options=l.extend({type:"vector"},u),this._collectResourceTiming=u.collectResourceTiming,512!==this.tileSize)throw new Error("vector tile sources must have a tileSize of 512");this.setEventedParent(W)}return o&&(a.__proto__=o),(a.prototype=Object.create(o&&o.prototype)).constructor=a,a.prototype.load=function(){var s=this;this._loaded=!1,this.fire(new l.Event("dataloading",{dataType:"source"})),this._tileJSONRequest=At(this._options,this.map._requestManager,function(u,P){s._tileJSONRequest=null,s._loaded=!0,u?s.fire(new l.ErrorEvent(u)):P&&(l.extend(s,P),P.bounds&&(s.tileBounds=new Wt(P.bounds,s.minzoom,s.maxzoom)),l.postTurnstileEvent(P.tiles,s.map._requestManager._customAccessToken),l.postMapLoadEvent(P.tiles,s.map._getMapId(),s.map._requestManager._skuToken,s.map._requestManager._customAccessToken),s.fire(new l.Event("data",{dataType:"source",sourceDataType:"metadata"})),s.fire(new l.Event("data",{dataType:"source",sourceDataType:"content"})))})},a.prototype.loaded=function(){return this._loaded},a.prototype.hasTile=function(s){return!this.tileBounds||this.tileBounds.contains(s.canonical)},a.prototype.onAdd=function(s){this.map=s,this.load()},a.prototype.setSourceProperty=function(s){this._tileJSONRequest&&this._tileJSONRequest.cancel(),s(),this.map.style.sourceCaches[this.id].clearTiles(),this.load()},a.prototype.setTiles=function(s){var u=this;return this.setSourceProperty(function(){u._options.tiles=s}),this},a.prototype.setUrl=function(s){var u=this;return this.setSourceProperty(function(){u.url=s,u._options.url=s}),this},a.prototype.onRemove=function(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)},a.prototype.serialize=function(){return l.extend({},this._options)},a.prototype.loadTile=function(s,u){var P=this.map._requestManager.normalizeTileURL(s.tileID.canonical.url(this.tiles,this.scheme)),W={request:this.map._requestManager.transformRequest(P,l.ResourceType.Tile),uid:s.uid,tileID:s.tileID,zoom:s.tileID.overscaledZ,tileSize:this.tileSize*s.tileID.overscaleFactor(),type:this.type,source:this.id,pixelRatio:l.browser.devicePixelRatio,showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId};function $(gt,Dt){return delete s.request,s.aborted?u(null):gt&&404!==gt.status?u(gt):(Dt&&Dt.resourceTiming&&(s.resourceTiming=Dt.resourceTiming),this.map._refreshExpiredTiles&&Dt&&s.setExpiryData(Dt),s.loadVectorData(Dt,this.map.painter),l.cacheEntryPossiblyAdded(this.dispatcher),u(null),void(s.reloadCallback&&(this.loadTile(s,s.reloadCallback),s.reloadCallback=null)))}W.request.collectResourceTiming=this._collectResourceTiming,s.actor&&"expired"!==s.state?"loading"===s.state?s.reloadCallback=u:s.request=s.actor.send("reloadTile",W,$.bind(this)):(s.actor=this.dispatcher.getActor(),s.request=s.actor.send("loadTile",W,$.bind(this)))},a.prototype.abortTile=function(s){s.request&&(s.request.cancel(),delete s.request),s.actor&&s.actor.send("abortTile",{uid:s.uid,type:this.type,source:this.id},void 0)},a.prototype.unloadTile=function(s){s.unloadVectorData(),s.actor&&s.actor.send("removeTile",{uid:s.uid,type:this.type,source:this.id},void 0)},a.prototype.hasTransition=function(){return!1},a}(l.Evented),se=function(o){function a(s,u,P,W){o.call(this),this.id=s,this.dispatcher=P,this.setEventedParent(W),this.type="raster",this.minzoom=0,this.maxzoom=22,this.roundZoom=!0,this.scheme="xyz",this.tileSize=512,this._loaded=!1,this._options=l.extend({type:"raster"},u),l.extend(this,l.pick(u,["url","scheme","tileSize"]))}return o&&(a.__proto__=o),(a.prototype=Object.create(o&&o.prototype)).constructor=a,a.prototype.load=function(){var s=this;this._loaded=!1,this.fire(new l.Event("dataloading",{dataType:"source"})),this._tileJSONRequest=At(this._options,this.map._requestManager,function(u,P){s._tileJSONRequest=null,s._loaded=!0,u?s.fire(new l.ErrorEvent(u)):P&&(l.extend(s,P),P.bounds&&(s.tileBounds=new Wt(P.bounds,s.minzoom,s.maxzoom)),l.postTurnstileEvent(P.tiles),l.postMapLoadEvent(P.tiles,s.map._getMapId(),s.map._requestManager._skuToken),s.fire(new l.Event("data",{dataType:"source",sourceDataType:"metadata"})),s.fire(new l.Event("data",{dataType:"source",sourceDataType:"content"})))})},a.prototype.loaded=function(){return this._loaded},a.prototype.onAdd=function(s){this.map=s,this.load()},a.prototype.onRemove=function(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)},a.prototype.serialize=function(){return l.extend({},this._options)},a.prototype.hasTile=function(s){return!this.tileBounds||this.tileBounds.contains(s.canonical)},a.prototype.loadTile=function(s,u){var P=this,W=this.map._requestManager.normalizeTileURL(s.tileID.canonical.url(this.tiles,this.scheme),this.tileSize);s.request=l.getImage(this.map._requestManager.transformRequest(W,l.ResourceType.Tile),function($,gt){if(delete s.request,s.aborted)s.state="unloaded",u(null);else if($)s.state="errored",u($);else if(gt){P.map._refreshExpiredTiles&&s.setExpiryData(gt),delete gt.cacheControl,delete gt.expires;var Dt=P.map.painter.context,Ht=Dt.gl;s.texture=P.map.painter.getTileTexture(gt.width),s.texture?s.texture.update(gt,{useMipmap:!0}):(s.texture=new l.Texture(Dt,gt,Ht.RGBA,{useMipmap:!0}),s.texture.bind(Ht.LINEAR,Ht.CLAMP_TO_EDGE,Ht.LINEAR_MIPMAP_NEAREST),Dt.extTextureFilterAnisotropic&&Ht.texParameterf(Ht.TEXTURE_2D,Dt.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,Dt.extTextureFilterAnisotropicMax)),s.state="loaded",l.cacheEntryPossiblyAdded(P.dispatcher),u(null)}})},a.prototype.abortTile=function(s,u){s.request&&(s.request.cancel(),delete s.request),u()},a.prototype.unloadTile=function(s,u){s.texture&&this.map.painter.saveTileTexture(s.texture),u()},a.prototype.hasTransition=function(){return!1},a}(l.Evented),_e=function(o){function a(s,u,P,W){o.call(this,s,u,P,W),this.type="raster-dem",this.maxzoom=22,this._options=l.extend({type:"raster-dem"},u),this.encoding=u.encoding||"mapbox"}return o&&(a.__proto__=o),(a.prototype=Object.create(o&&o.prototype)).constructor=a,a.prototype.serialize=function(){return{type:"raster-dem",url:this.url,tileSize:this.tileSize,tiles:this.tiles,bounds:this.bounds,encoding:this.encoding}},a.prototype.loadTile=function(s,u){var P=this.map._requestManager.normalizeTileURL(s.tileID.canonical.url(this.tiles,this.scheme),this.tileSize);function W($,gt){$&&(s.state="errored",u($)),gt&&(s.dem=gt,s.needsHillshadePrepare=!0,s.state="loaded",u(null))}s.request=l.getImage(this.map._requestManager.transformRequest(P,l.ResourceType.Tile),function($,gt){if(delete s.request,s.aborted)s.state="unloaded",u(null);else if($)s.state="errored",u($);else if(gt){this.map._refreshExpiredTiles&&s.setExpiryData(gt),delete gt.cacheControl,delete gt.expires;var Dt=l.window.ImageBitmap&&gt instanceof l.window.ImageBitmap&&l.offscreenCanvasSupported()?gt:l.browser.getImageData(gt,1),Ht={uid:s.uid,coord:s.tileID,source:this.id,rawImageData:Dt,encoding:this.encoding};s.actor&&"expired"!==s.state||(s.actor=this.dispatcher.getActor(),s.actor.send("loadDEMTile",Ht,W.bind(this)))}}.bind(this)),s.neighboringTiles=this._getNeighboringTiles(s.tileID)},a.prototype._getNeighboringTiles=function(s){var u=s.canonical,P=Math.pow(2,u.z),W=(u.x-1+P)%P,$=0===u.x?s.wrap-1:s.wrap,gt=(u.x+1+P)%P,Dt=u.x+1===P?s.wrap+1:s.wrap,Ht={};return Ht[new l.OverscaledTileID(s.overscaledZ,$,u.z,W,u.y).key]={backfilled:!1},Ht[new l.OverscaledTileID(s.overscaledZ,Dt,u.z,gt,u.y).key]={backfilled:!1},u.y>0&&(Ht[new l.OverscaledTileID(s.overscaledZ,$,u.z,W,u.y-1).key]={backfilled:!1},Ht[new l.OverscaledTileID(s.overscaledZ,s.wrap,u.z,u.x,u.y-1).key]={backfilled:!1},Ht[new l.OverscaledTileID(s.overscaledZ,Dt,u.z,gt,u.y-1).key]={backfilled:!1}),u.y+1<P&&(Ht[new l.OverscaledTileID(s.overscaledZ,$,u.z,W,u.y+1).key]={backfilled:!1},Ht[new l.OverscaledTileID(s.overscaledZ,s.wrap,u.z,u.x,u.y+1).key]={backfilled:!1},Ht[new l.OverscaledTileID(s.overscaledZ,Dt,u.z,gt,u.y+1).key]={backfilled:!1}),Ht},a.prototype.unloadTile=function(s){s.demTexture&&this.map.painter.saveTileTexture(s.demTexture),s.fbo&&(s.fbo.destroy(),delete s.fbo),s.dem&&delete s.dem,delete s.neighboringTiles,s.state="unloaded",s.actor&&s.actor.send("removeDEMTile",{uid:s.uid,source:this.id})},a}(se),We=function(o){function a(s,u,P,W){o.call(this),this.id=s,this.type="geojson",this.minzoom=0,this.maxzoom=18,this.tileSize=512,this.isTileClipped=!0,this.reparseOverscaled=!0,this._removed=!1,this._loaded=!1,this.actor=P.getActor(),this.setEventedParent(W),this._data=u.data,this._options=l.extend({},u),this._collectResourceTiming=u.collectResourceTiming,this._resourceTiming=[],void 0!==u.maxzoom&&(this.maxzoom=u.maxzoom),u.type&&(this.type=u.type),u.attribution&&(this.attribution=u.attribution),this.promoteId=u.promoteId;var $=l.EXTENT/this.tileSize;this.workerOptions=l.extend({source:this.id,cluster:u.cluster||!1,geojsonVtOptions:{buffer:(void 0!==u.buffer?u.buffer:128)*$,tolerance:(void 0!==u.tolerance?u.tolerance:.375)*$,extent:l.EXTENT,maxZoom:this.maxzoom,lineMetrics:u.lineMetrics||!1,generateId:u.generateId||!1},superclusterOptions:{maxZoom:void 0!==u.clusterMaxZoom?Math.min(u.clusterMaxZoom,this.maxzoom-1):this.maxzoom-1,minPoints:Math.max(2,u.clusterMinPoints||2),extent:l.EXTENT,radius:(u.clusterRadius||50)*$,log:!1,generateId:u.generateId||!1},clusterProperties:u.clusterProperties,filter:u.filter},u.workerOptions)}return o&&(a.__proto__=o),(a.prototype=Object.create(o&&o.prototype)).constructor=a,a.prototype.load=function(){var s=this;this.fire(new l.Event("dataloading",{dataType:"source"})),this._updateWorkerData(function(u){if(u)s.fire(new l.ErrorEvent(u));else{var P={dataType:"source",sourceDataType:"metadata"};s._collectResourceTiming&&s._resourceTiming&&s._resourceTiming.length>0&&(P.resourceTiming=s._resourceTiming,s._resourceTiming=[]),s.fire(new l.Event("data",P))}})},a.prototype.onAdd=function(s){this.map=s,this.load()},a.prototype.setData=function(s){var u=this;return this._data=s,this.fire(new l.Event("dataloading",{dataType:"source"})),this._updateWorkerData(function(P){if(P)u.fire(new l.ErrorEvent(P));else{var W={dataType:"source",sourceDataType:"content"};u._collectResourceTiming&&u._resourceTiming&&u._resourceTiming.length>0&&(W.resourceTiming=u._resourceTiming,u._resourceTiming=[]),u.fire(new l.Event("data",W))}}),this},a.prototype.getClusterExpansionZoom=function(s,u){return this.actor.send("geojson.getClusterExpansionZoom",{clusterId:s,source:this.id},u),this},a.prototype.getClusterChildren=function(s,u){return this.actor.send("geojson.getClusterChildren",{clusterId:s,source:this.id},u),this},a.prototype.getClusterLeaves=function(s,u,P,W){return this.actor.send("geojson.getClusterLeaves",{source:this.id,clusterId:s,limit:u,offset:P},W),this},a.prototype._updateWorkerData=function(s){var u=this;this._loaded=!1;var P=l.extend({},this.workerOptions),W=this._data;"string"==typeof W?(P.request=this.map._requestManager.transformRequest(l.browser.resolveURL(W),l.ResourceType.Source),P.request.collectResourceTiming=this._collectResourceTiming):P.data=JSON.stringify(W),this.actor.send(this.type+".loadData",P,function($,gt){u._removed||gt&&gt.abandoned||(u._loaded=!0,gt&&gt.resourceTiming&&gt.resourceTiming[u.id]&&(u._resourceTiming=gt.resourceTiming[u.id].slice(0)),u.actor.send(u.type+".coalesce",{source:P.source},null),s($))})},a.prototype.loaded=function(){return this._loaded},a.prototype.loadTile=function(s,u){var P=this,W=s.actor?"reloadTile":"loadTile";s.actor=this.actor,s.request=this.actor.send(W,{type:this.type,uid:s.uid,tileID:s.tileID,zoom:s.tileID.overscaledZ,maxZoom:this.maxzoom,tileSize:this.tileSize,source:this.id,pixelRatio:l.browser.devicePixelRatio,showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId},function($,gt){return delete s.request,s.unloadVectorData(),s.aborted?u(null):$?u($):(s.loadVectorData(gt,P.map.painter,"reloadTile"===W),u(null))})},a.prototype.abortTile=function(s){s.request&&(s.request.cancel(),delete s.request),s.aborted=!0},a.prototype.unloadTile=function(s){s.unloadVectorData(),this.actor.send("removeTile",{uid:s.uid,type:this.type,source:this.id})},a.prototype.onRemove=function(){this._removed=!0,this.actor.send("removeSource",{type:this.type,source:this.id})},a.prototype.serialize=function(){return l.extend({},this._options,{type:this.type,data:this._data})},a.prototype.hasTransition=function(){return!1},a}(l.Evented),He=l.createLayout([{name:"a_pos",type:"Int16",components:2},{name:"a_texture_pos",type:"Int16",components:2}]),Fe=function(o){function a(s,u,P,W){o.call(this),this.id=s,this.dispatcher=P,this.coordinates=u.coordinates,this.type="image",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.tiles={},this._loaded=!1,this.setEventedParent(W),this.options=u}return o&&(a.__proto__=o),(a.prototype=Object.create(o&&o.prototype)).constructor=a,a.prototype.load=function(s,u){var P=this;this._loaded=!1,this.fire(new l.Event("dataloading",{dataType:"source"})),this.url=this.options.url,l.getImage(this.map._requestManager.transformRequest(this.url,l.ResourceType.Image),function(W,$){P._loaded=!0,W?P.fire(new l.ErrorEvent(W)):$&&(P.image=$,s&&(P.coordinates=s),u&&u(),P._finishLoading())})},a.prototype.loaded=function(){return this._loaded},a.prototype.updateImage=function(s){var u=this;return this.image&&s.url?(this.options.url=s.url,this.load(s.coordinates,function(){u.texture=null}),this):this},a.prototype._finishLoading=function(){this.map&&(this.setCoordinates(this.coordinates),this.fire(new l.Event("data",{dataType:"source",sourceDataType:"metadata"})))},a.prototype.onAdd=function(s){this.map=s,this.load()},a.prototype.setCoordinates=function(s){var u=this;this.coordinates=s;var P=s.map(l.MercatorCoordinate.fromLngLat);this.tileID=function($){for(var gt=1/0,Dt=1/0,Ht=-1/0,re=-1/0,le=0,de=$;le<de.length;le+=1){var Ie=de[le];gt=Math.min(gt,Ie.x),Dt=Math.min(Dt,Ie.y),Ht=Math.max(Ht,Ie.x),re=Math.max(re,Ie.y)}var Pe=Math.max(Ht-gt,re-Dt),Oe=Math.max(0,Math.floor(-Math.log(Pe)/Math.LN2)),Se=Math.pow(2,Oe);return new l.CanonicalTileID(Oe,Math.floor((gt+Ht)/2*Se),Math.floor((Dt+re)/2*Se))}(P),this.minzoom=this.maxzoom=this.tileID.z;var W=P.map(function($){return u.tileID.getTilePoint($)._round()});return this._boundsArray=new l.StructArrayLayout4i8,this._boundsArray.emplaceBack(W[0].x,W[0].y,0,0),this._boundsArray.emplaceBack(W[1].x,W[1].y,l.EXTENT,0),this._boundsArray.emplaceBack(W[3].x,W[3].y,0,l.EXTENT),this._boundsArray.emplaceBack(W[2].x,W[2].y,l.EXTENT,l.EXTENT),this.boundsBuffer&&(this.boundsBuffer.destroy(),delete this.boundsBuffer),this.fire(new l.Event("data",{dataType:"source",sourceDataType:"content"})),this},a.prototype.prepare=function(){if(0!==Object.keys(this.tiles).length&&this.image){var s=this.map.painter.context,u=s.gl;for(var P in this.boundsBuffer||(this.boundsBuffer=s.createVertexBuffer(this._boundsArray,He.members)),this.boundsSegments||(this.boundsSegments=l.SegmentVector.simpleSegment(0,0,4,2)),this.texture||(this.texture=new l.Texture(s,this.image,u.RGBA),this.texture.bind(u.LINEAR,u.CLAMP_TO_EDGE)),this.tiles){var W=this.tiles[P];"loaded"!==W.state&&(W.state="loaded",W.texture=this.texture)}}},a.prototype.loadTile=function(s,u){this.tileID&&this.tileID.equals(s.tileID.canonical)?(this.tiles[String(s.tileID.wrap)]=s,s.buckets={},u(null)):(s.state="errored",u(null))},a.prototype.serialize=function(){return{type:"image",url:this.options.url,coordinates:this.coordinates}},a.prototype.hasTransition=function(){return!1},a}(l.Evented),pe=function(o){function a(s,u,P,W){o.call(this,s,u,P,W),this.roundZoom=!0,this.type="video",this.options=u}return o&&(a.__proto__=o),(a.prototype=Object.create(o&&o.prototype)).constructor=a,a.prototype.load=function(){var s=this;this._loaded=!1;var u=this.options;this.urls=[];for(var P=0,W=u.urls;P<W.length;P+=1)this.urls.push(this.map._requestManager.transformRequest(W[P],l.ResourceType.Source).url);l.getVideo(this.urls,function($,gt){s._loaded=!0,$?s.fire(new l.ErrorEvent($)):gt&&(s.video=gt,s.video.loop=!0,s.video.addEventListener("playing",function(){s.map.triggerRepaint()}),s.map&&s.video.play(),s._finishLoading())})},a.prototype.pause=function(){this.video&&this.video.pause()},a.prototype.play=function(){this.video&&this.video.play()},a.prototype.seek=function(s){if(this.video){var u=this.video.seekable;s<u.start(0)||s>u.end(0)?this.fire(new l.ErrorEvent(new l.ValidationError("sources."+this.id,null,"Playback for this video can be set only between the "+u.start(0)+" and "+u.end(0)+"-second mark."))):this.video.currentTime=s}},a.prototype.getVideo=function(){return this.video},a.prototype.onAdd=function(s){this.map||(this.map=s,this.load(),this.video&&(this.video.play(),this.setCoordinates(this.coordinates)))},a.prototype.prepare=function(){if(!(0===Object.keys(this.tiles).length||this.video.readyState<2)){var s=this.map.painter.context,u=s.gl;for(var P in this.boundsBuffer||(this.boundsBuffer=s.createVertexBuffer(this._boundsArray,He.members)),this.boundsSegments||(this.boundsSegments=l.SegmentVector.simpleSegment(0,0,4,2)),this.texture?this.video.paused||(this.texture.bind(u.LINEAR,u.CLAMP_TO_EDGE),u.texSubImage2D(u.TEXTURE_2D,0,0,0,u.RGBA,u.UNSIGNED_BYTE,this.video)):(this.texture=new l.Texture(s,this.video,u.RGBA),this.texture.bind(u.LINEAR,u.CLAMP_TO_EDGE)),this.tiles){var W=this.tiles[P];"loaded"!==W.state&&(W.state="loaded",W.texture=this.texture)}}},a.prototype.serialize=function(){return{type:"video",urls:this.urls,coordinates:this.coordinates}},a.prototype.hasTransition=function(){return this.video&&!this.video.paused},a}(Fe),Me=function(o){function a(s,u,P,W){o.call(this,s,u,P,W),u.coordinates?Array.isArray(u.coordinates)&&4===u.coordinates.length&&!u.coordinates.some(function($){return!Array.isArray($)||2!==$.length||$.some(function(gt){return"number"!=typeof gt})})||this.fire(new l.ErrorEvent(new l.ValidationError("sources."+s,null,'"coordinates" property must be an array of 4 longitude/latitude array pairs'))):this.fire(new l.ErrorEvent(new l.ValidationError("sources."+s,null,'missing required property "coordinates"'))),u.animate&&"boolean"!=typeof u.animate&&this.fire(new l.ErrorEvent(new l.ValidationError("sources."+s,null,'optional "animate" property must be a boolean value'))),u.canvas?"string"==typeof u.canvas||u.canvas instanceof l.window.HTMLCanvasElement||this.fire(new l.ErrorEvent(new l.ValidationError("sources."+s,null,'"canvas" must be either a string representing the ID of the canvas element from which to read, or an HTMLCanvasElement instance'))):this.fire(new l.ErrorEvent(new l.ValidationError("sources."+s,null,'missing required property "canvas"'))),this.options=u,this.animate=void 0===u.animate||u.animate}return o&&(a.__proto__=o),(a.prototype=Object.create(o&&o.prototype)).constructor=a,a.prototype.load=function(){this._loaded=!0,this.canvas||(this.canvas=this.options.canvas instanceof l.window.HTMLCanvasElement?this.options.canvas:l.window.document.getElementById(this.options.canvas)),this.width=this.canvas.width,this.height=this.canvas.height,this._hasInvalidDimensions()?this.fire(new l.ErrorEvent(new Error("Canvas dimensions cannot be less than or equal to zero."))):(this.play=function(){this._playing=!0,this.map.triggerRepaint()},this.pause=function(){this._playing&&(this.prepare(),this._playing=!1)},this._finishLoading())},a.prototype.getCanvas=function(){return this.canvas},a.prototype.onAdd=function(s){this.map=s,this.load(),this.canvas&&this.animate&&this.play()},a.prototype.onRemove=function(){this.pause()},a.prototype.prepare=function(){var s=!1;if(this.canvas.width!==this.width&&(this.width=this.canvas.width,s=!0),this.canvas.height!==this.height&&(this.height=this.canvas.height,s=!0),!this._hasInvalidDimensions()&&0!==Object.keys(this.tiles).length){var u=this.map.painter.context,P=u.gl;for(var W in this.boundsBuffer||(this.boundsBuffer=u.createVertexBuffer(this._boundsArray,He.members)),this.boundsSegments||(this.boundsSegments=l.SegmentVector.simpleSegment(0,0,4,2)),this.texture?(s||this._playing)&&this.texture.update(this.canvas,{premultiply:!0}):this.texture=new l.Texture(u,this.canvas,P.RGBA,{premultiply:!0}),this.tiles){var $=this.tiles[W];"loaded"!==$.state&&($.state="loaded",$.texture=this.texture)}}},a.prototype.serialize=function(){return{type:"canvas",coordinates:this.coordinates}},a.prototype.hasTransition=function(){return this._playing},a.prototype._hasInvalidDimensions=function(){for(var s=0,u=[this.canvas.width,this.canvas.height];s<u.length;s+=1){var P=u[s];if(isNaN(P)||P<=0)return!0}return!1},a}(Fe),me={vector:Ot,raster:se,"raster-dem":_e,geojson:We,video:pe,image:Fe,canvas:Me};function qt(o,a){var s=l.identity([]);return l.translate(s,s,[1,1,0]),l.scale(s,s,[.5*o.width,.5*o.height,1]),l.multiply(s,s,o.calculatePosMatrix(a.toUnwrapped()))}function Kt(o,a,s,u,P,W){var $=function(Oe,Se,Re){if(Oe)for(var Ze=0,si=Oe;Ze<si.length;Ze+=1){var bi=Se[si[Ze]];if(bi&&bi.source===Re&&"fill-extrusion"===bi.type)return!0}else for(var mi in Se){var wi=Se[mi];if(wi.source===Re&&"fill-extrusion"===wi.type)return!0}return!1}(P&&P.layers,a,o.id),gt=W.maxPitchScaleFactor(),Dt=o.tilesIn(u,gt,$);Dt.sort(xe);for(var Ht=[],re=0,le=Dt;re<le.length;re+=1){var de=le[re];Ht.push({wrappedTileID:de.tileID.wrapped().key,queryResults:de.tile.queryRenderedFeatures(a,s,o._state,de.queryGeometry,de.cameraQueryGeometry,de.scale,P,W,gt,qt(o.transform,de.tileID))})}var Ie=function(Oe){for(var Se={},Re={},Ze=0,si=Oe;Ze<si.length;Ze+=1){var bi=si[Ze],mi=bi.queryResults,wi=bi.wrappedTileID,Ri=Re[wi]=Re[wi]||{};for(var $i in mi)for(var Xi=mi[$i],fn=Ri[$i]=Ri[$i]||{},Mn=Se[$i]=Se[$i]||[],zn=0,Ln=Xi;zn<Ln.length;zn+=1){var Wo=Ln[zn];fn[Wo.featureIndex]||(fn[Wo.featureIndex]=!0,Mn.push(Wo))}}return Se}(Ht);for(var Pe in Ie)Ie[Pe].forEach(function(Oe){var Se=Oe.feature,Re=o.getFeatureState(Se.layer["source-layer"],Se.id);Se.source=Se.layer.source,Se.layer["source-layer"]&&(Se.sourceLayer=Se.layer["source-layer"]),Se.state=Re});return Ie}function xe(o,a){var s=o.tileID,u=a.tileID;return s.overscaledZ-u.overscaledZ||s.canonical.y-u.canonical.y||s.wrap-u.wrap||s.canonical.x-u.canonical.x}var be=function(o,a){this.max=o,this.onRemove=a,this.reset()};be.prototype.reset=function(){for(var o in this.data)for(var a=0,s=this.data[o];a<s.length;a+=1){var u=s[a];u.timeout&&clearTimeout(u.timeout),this.onRemove(u.value)}return this.data={},this.order=[],this},be.prototype.add=function(o,a,s){var u=this,P=o.wrapped().key;void 0===this.data[P]&&(this.data[P]=[]);var W={value:a,timeout:void 0};if(void 0!==s&&(W.timeout=setTimeout(function(){u.remove(o,W)},s)),this.data[P].push(W),this.order.push(P),this.order.length>this.max){var $=this._getAndRemoveByKey(this.order[0]);$&&this.onRemove($)}return this},be.prototype.has=function(o){return o.wrapped().key in this.data},be.prototype.getAndRemove=function(o){return this.has(o)?this._getAndRemoveByKey(o.wrapped().key):null},be.prototype._getAndRemoveByKey=function(o){var a=this.data[o].shift();return a.timeout&&clearTimeout(a.timeout),0===this.data[o].length&&delete this.data[o],this.order.splice(this.order.indexOf(o),1),a.value},be.prototype.getByKey=function(o){var a=this.data[o];return a?a[0].value:null},be.prototype.get=function(o){return this.has(o)?this.data[o.wrapped().key][0].value:null},be.prototype.remove=function(o,a){if(!this.has(o))return this;var s=o.wrapped().key,u=void 0===a?0:this.data[s].indexOf(a),P=this.data[s][u];return this.data[s].splice(u,1),P.timeout&&clearTimeout(P.timeout),0===this.data[s].length&&delete this.data[s],this.onRemove(P.value),this.order.splice(this.order.indexOf(s),1),this},be.prototype.setMaxSize=function(o){for(this.max=o;this.order.length>this.max;){var a=this._getAndRemoveByKey(this.order[0]);a&&this.onRemove(a)}return this},be.prototype.filter=function(o){var a=[];for(var s in this.data)for(var u=0,P=this.data[s];u<P.length;u+=1){var W=P[u];o(W.value)||a.push(W)}for(var $=0,gt=a;$<gt.length;$+=1){var Dt=gt[$];this.remove(Dt.value.tileID,Dt)}};var Te=function(o,a,s){this.context=o;var u=o.gl;this.buffer=u.createBuffer(),this.dynamicDraw=Boolean(s),this.context.unbindVAO(),o.bindElementBuffer.set(this.buffer),u.bufferData(u.ELEMENT_ARRAY_BUFFER,a.arrayBuffer,this.dynamicDraw?u.DYNAMIC_DRAW:u.STATIC_DRAW),this.dynamicDraw||delete a.arrayBuffer};Te.prototype.bind=function(){this.context.bindElementBuffer.set(this.buffer)},Te.prototype.updateData=function(o){var a=this.context.gl;this.context.unbindVAO(),this.bind(),a.bufferSubData(a.ELEMENT_ARRAY_BUFFER,0,o.arrayBuffer)},Te.prototype.destroy=function(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)};var ye={Int8:"BYTE",Uint8:"UNSIGNED_BYTE",Int16:"SHORT",Uint16:"UNSIGNED_SHORT",Int32:"INT",Uint32:"UNSIGNED_INT",Float32:"FLOAT"},oi=function(o,a,s,u){this.length=a.length,this.attributes=s,this.itemSize=a.bytesPerElement,this.dynamicDraw=u,this.context=o;var P=o.gl;this.buffer=P.createBuffer(),o.bindVertexBuffer.set(this.buffer),P.bufferData(P.ARRAY_BUFFER,a.arrayBuffer,this.dynamicDraw?P.DYNAMIC_DRAW:P.STATIC_DRAW),this.dynamicDraw||delete a.arrayBuffer};oi.prototype.bind=function(){this.context.bindVertexBuffer.set(this.buffer)},oi.prototype.updateData=function(o){var a=this.context.gl;this.bind(),a.bufferSubData(a.ARRAY_BUFFER,0,o.arrayBuffer)},oi.prototype.enableAttributes=function(o,a){for(var s=0;s<this.attributes.length;s++){var u=a.attributes[this.attributes[s].name];void 0!==u&&o.enableVertexAttribArray(u)}},oi.prototype.setVertexAttribPointers=function(o,a,s){for(var u=0;u<this.attributes.length;u++){var P=this.attributes[u],W=a.attributes[P.name];void 0!==W&&o.vertexAttribPointer(W,P.components,o[ye[P.type]],!1,this.itemSize,P.offset+this.itemSize*(s||0))}},oi.prototype.destroy=function(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)};var fi=function(o){this.gl=o.gl,this.default=this.getDefault(),this.current=this.default,this.dirty=!1};fi.prototype.get=function(){return this.current},fi.prototype.set=function(o){},fi.prototype.getDefault=function(){return this.default},fi.prototype.setDefault=function(){this.set(this.default)};var tn=function(o){function a(){o.apply(this,arguments)}return o&&(a.__proto__=o),(a.prototype=Object.create(o&&o.prototype)).constructor=a,a.prototype.getDefault=function(){return l.Color.transparent},a.prototype.set=function(s){var u=this.current;(s.r!==u.r||s.g!==u.g||s.b!==u.b||s.a!==u.a||this.dirty)&&(this.gl.clearColor(s.r,s.g,s.b,s.a),this.current=s,this.dirty=!1)},a}(fi),Ii=function(o){function a(){o.apply(this,arguments)}return o&&(a.__proto__=o),(a.prototype=Object.create(o&&o.prototype)).constructor=a,a.prototype.getDefault=function(){return 1},a.prototype.set=function(s){(s!==this.current||this.dirty)&&(this.gl.clearDepth(s),this.current=s,this.dirty=!1)},a}(fi),Pi=function(o){function a(){o.apply(this,arguments)}return o&&(a.__proto__=o),(a.prototype=Object.create(o&&o.prototype)).constructor=a,a.prototype.getDefault=function(){return 0},a.prototype.set=function(s){(s!==this.current||this.dirty)&&(this.gl.clearStencil(s),this.current=s,this.dirty=!1)},a}(fi),Ji=function(o){function a(){o.apply(this,arguments)}return o&&(a.__proto__=o),(a.prototype=Object.create(o&&o.prototype)).constructor=a,a.prototype.getDefault=function(){return[!0,!0,!0,!0]},a.prototype.set=function(s){var u=this.current;(s[0]!==u[0]||s[1]!==u[1]||s[2]!==u[2]||s[3]!==u[3]||this.dirty)&&(this.gl.colorMask(s[0],s[1],s[2],s[3]),this.current=s,this.dirty=!1)},a}(fi),Mi=function(o){function a(){o.apply(this,arguments)}return o&&(a.__proto__=o),(a.prototype=Object.create(o&&o.prototype)).constructor=a,a.prototype.getDefault=function(){return!0},a.prototype.set=function(s){(s!==this.current||this.dirty)&&(this.gl.depthMask(s),this.current=s,this.dirty=!1)},a}(fi),nn=function(o){function a(){o.apply(this,arguments)}return o&&(a.__proto__=o),(a.prototype=Object.create(o&&o.prototype)).constructor=a,a.prototype.getDefault=function(){return 255},a.prototype.set=function(s){(s!==this.current||this.dirty)&&(this.gl.stencilMask(s),this.current=s,this.dirty=!1)},a}(fi),Ti=function(o){function a(){o.apply(this,arguments)}return o&&(a.__proto__=o),(a.prototype=Object.create(o&&o.prototype)).constructor=a,a.prototype.getDefault=function(){return{func:this.gl.ALWAYS,ref:0,mask:255}},a.prototype.set=function(s){var u=this.current;(s.func!==u.func||s.ref!==u.ref||s.mask!==u.mask||this.dirty)&&(this.gl.stencilFunc(s.func,s.ref,s.mask),this.current=s,this.dirty=!1)},a}(fi),Cn=function(o){function a(){o.apply(this,arguments)}return o&&(a.__proto__=o),(a.prototype=Object.create(o&&o.prototype)).constructor=a,a.prototype.getDefault=function(){var s=this.gl;return[s.KEEP,s.KEEP,s.KEEP]},a.prototype.set=function(s){var u=this.current;(s[0]!==u[0]||s[1]!==u[1]||s[2]!==u[2]||this.dirty)&&(this.gl.stencilOp(s[0],s[1],s[2]),this.current=s,this.dirty=!1)},a}(fi),wn=function(o){function a(){o.apply(this,arguments)}return o&&(a.__proto__=o),(a.prototype=Object.create(o&&o.prototype)).constructor=a,a.prototype.getDefault=function(){return!1},a.prototype.set=function(s){if(s!==this.current||this.dirty){var u=this.gl;s?u.enable(u.STENCIL_TEST):u.disable(u.STENCIL_TEST),this.current=s,this.dirty=!1}},a}(fi),X=function(o){function a(){o.apply(this,arguments)}return o&&(a.__proto__=o),(a.prototype=Object.create(o&&o.prototype)).constructor=a,a.prototype.getDefault=function(){return[0,1]},a.prototype.set=function(s){var u=this.current;(s[0]!==u[0]||s[1]!==u[1]||this.dirty)&&(this.gl.depthRange(s[0],s[1]),this.current=s,this.dirty=!1)},a}(fi),bt=function(o){function a(){o.apply(this,arguments)}return o&&(a.__proto__=o),(a.prototype=Object.create(o&&o.prototype)).constructor=a,a.prototype.getDefault=function(){return!1},a.prototype.set=function(s){if(s!==this.current||this.dirty){var u=this.gl;s?u.enable(u.DEPTH_TEST):u.disable(u.DEPTH_TEST),this.current=s,this.dirty=!1}},a}(fi),Gt=function(o){function a(){o.apply(this,arguments)}return o&&(a.__proto__=o),(a.prototype=Object.create(o&&o.prototype)).constructor=a,a.prototype.getDefault=function(){return this.gl.LESS},a.prototype.set=function(s){(s!==this.current||this.dirty)&&(this.gl.depthFunc(s),this.current=s,this.dirty=!1)},a}(fi),ee=function(o){function a(){o.apply(this,arguments)}return o&&(a.__proto__=o),(a.prototype=Object.create(o&&o.prototype)).constructor=a,a.prototype.getDefault=function(){return!1},a.prototype.set=function(s){if(s!==this.current||this.dirty){var u=this.gl;s?u.enable(u.BLEND):u.disable(u.BLEND),this.current=s,this.dirty=!1}},a}(fi),we=function(o){function a(){o.apply(this,arguments)}return o&&(a.__proto__=o),(a.prototype=Object.create(o&&o.prototype)).constructor=a,a.prototype.getDefault=function(){var s=this.gl;return[s.ONE,s.ZERO]},a.prototype.set=function(s){var u=this.current;(s[0]!==u[0]||s[1]!==u[1]||this.dirty)&&(this.gl.blendFunc(s[0],s[1]),this.current=s,this.dirty=!1)},a}(fi),Ye=function(o){function a(){o.apply(this,arguments)}return o&&(a.__proto__=o),(a.prototype=Object.create(o&&o.prototype)).constructor=a,a.prototype.getDefault=function(){return l.Color.transparent},a.prototype.set=function(s){var u=this.current;(s.r!==u.r||s.g!==u.g||s.b!==u.b||s.a!==u.a||this.dirty)&&(this.gl.blendColor(s.r,s.g,s.b,s.a),this.current=s,this.dirty=!1)},a}(fi),xi=function(o){function a(){o.apply(this,arguments)}return o&&(a.__proto__=o),(a.prototype=Object.create(o&&o.prototype)).constructor=a,a.prototype.getDefault=function(){return this.gl.FUNC_ADD},a.prototype.set=function(s){(s!==this.current||this.dirty)&&(this.gl.blendEquation(s),this.current=s,this.dirty=!1)},a}(fi),Ui=function(o){function a(){o.apply(this,arguments)}return o&&(a.__proto__=o),(a.prototype=Object.create(o&&o.prototype)).constructor=a,a.prototype.getDefault=function(){return!1},a.prototype.set=function(s){if(s!==this.current||this.dirty){var u=this.gl;s?u.enable(u.CULL_FACE):u.disable(u.CULL_FACE),this.current=s,this.dirty=!1}},a}(fi),hn=function(o){function a(){o.apply(this,arguments)}return o&&(a.__proto__=o),(a.prototype=Object.create(o&&o.prototype)).constructor=a,a.prototype.getDefault=function(){return this.gl.BACK},a.prototype.set=function(s){(s!==this.current||this.dirty)&&(this.gl.cullFace(s),this.current=s,this.dirty=!1)},a}(fi),Fn=function(o){function a(){o.apply(this,arguments)}return o&&(a.__proto__=o),(a.prototype=Object.create(o&&o.prototype)).constructor=a,a.prototype.getDefault=function(){return this.gl.CCW},a.prototype.set=function(s){(s!==this.current||this.dirty)&&(this.gl.frontFace(s),this.current=s,this.dirty=!1)},a}(fi),Mo=function(o){function a(){o.apply(this,arguments)}return o&&(a.__proto__=o),(a.prototype=Object.create(o&&o.prototype)).constructor=a,a.prototype.getDefault=function(){return null},a.prototype.set=function(s){(s!==this.current||this.dirty)&&(this.gl.useProgram(s),this.current=s,this.dirty=!1)},a}(fi),qo=function(o){function a(){o.apply(this,arguments)}return o&&(a.__proto__=o),(a.prototype=Object.create(o&&o.prototype)).constructor=a,a.prototype.getDefault=function(){return this.gl.TEXTURE0},a.prototype.set=function(s){(s!==this.current||this.dirty)&&(this.gl.activeTexture(s),this.current=s,this.dirty=!1)},a}(fi),Oo=function(o){function a(){o.apply(this,arguments)}return o&&(a.__proto__=o),(a.prototype=Object.create(o&&o.prototype)).constructor=a,a.prototype.getDefault=function(){var s=this.gl;return[0,0,s.drawingBufferWidth,s.drawingBufferHeight]},a.prototype.set=function(s){var u=this.current;(s[0]!==u[0]||s[1]!==u[1]||s[2]!==u[2]||s[3]!==u[3]||this.dirty)&&(this.gl.viewport(s[0],s[1],s[2],s[3]),this.current=s,this.dirty=!1)},a}(fi),Dr=function(o){function a(){o.apply(this,arguments)}return o&&(a.__proto__=o),(a.prototype=Object.create(o&&o.prototype)).constructor=a,a.prototype.getDefault=function(){return null},a.prototype.set=function(s){if(s!==this.current||this.dirty){var u=this.gl;u.bindFramebuffer(u.FRAMEBUFFER,s),this.current=s,this.dirty=!1}},a}(fi),No=function(o){function a(){o.apply(this,arguments)}return o&&(a.__proto__=o),(a.prototype=Object.create(o&&o.prototype)).constructor=a,a.prototype.getDefault=function(){return null},a.prototype.set=function(s){if(s!==this.current||this.dirty){var u=this.gl;u.bindRenderbuffer(u.RENDERBUFFER,s),this.current=s,this.dirty=!1}},a}(fi),po=function(o){function a(){o.apply(this,arguments)}return o&&(a.__proto__=o),(a.prototype=Object.create(o&&o.prototype)).constructor=a,a.prototype.getDefault=function(){return null},a.prototype.set=function(s){if(s!==this.current||this.dirty){var u=this.gl;u.bindTexture(u.TEXTURE_2D,s),this.current=s,this.dirty=!1}},a}(fi),ko=function(o){function a(){o.apply(this,arguments)}return o&&(a.__proto__=o),(a.prototype=Object.create(o&&o.prototype)).constructor=a,a.prototype.getDefault=function(){return null},a.prototype.set=function(s){if(s!==this.current||this.dirty){var u=this.gl;u.bindBuffer(u.ARRAY_BUFFER,s),this.current=s,this.dirty=!1}},a}(fi),Kr=function(o){function a(){o.apply(this,arguments)}return o&&(a.__proto__=o),(a.prototype=Object.create(o&&o.prototype)).constructor=a,a.prototype.getDefault=function(){return null},a.prototype.set=function(s){var u=this.gl;u.bindBuffer(u.ELEMENT_ARRAY_BUFFER,s),this.current=s,this.dirty=!1},a}(fi),dr=function(o){function a(s){o.call(this,s),this.vao=s.extVertexArrayObject}return o&&(a.__proto__=o),(a.prototype=Object.create(o&&o.prototype)).constructor=a,a.prototype.getDefault=function(){return null},a.prototype.set=function(s){this.vao&&(s!==this.current||this.dirty)&&(this.vao.bindVertexArrayOES(s),this.current=s,this.dirty=!1)},a}(fi),gr=function(o){function a(){o.apply(this,arguments)}return o&&(a.__proto__=o),(a.prototype=Object.create(o&&o.prototype)).constructor=a,a.prototype.getDefault=function(){return 4},a.prototype.set=function(s){if(s!==this.current||this.dirty){var u=this.gl;u.pixelStorei(u.UNPACK_ALIGNMENT,s),this.current=s,this.dirty=!1}},a}(fi),lr=function(o){function a(){o.apply(this,arguments)}return o&&(a.__proto__=o),(a.prototype=Object.create(o&&o.prototype)).constructor=a,a.prototype.getDefault=function(){return!1},a.prototype.set=function(s){if(s!==this.current||this.dirty){var u=this.gl;u.pixelStorei(u.UNPACK_PREMULTIPLY_ALPHA_WEBGL,s),this.current=s,this.dirty=!1}},a}(fi),kn=function(o){function a(){o.apply(this,arguments)}return o&&(a.__proto__=o),(a.prototype=Object.create(o&&o.prototype)).constructor=a,a.prototype.getDefault=function(){return!1},a.prototype.set=function(s){if(s!==this.current||this.dirty){var u=this.gl;u.pixelStorei(u.UNPACK_FLIP_Y_WEBGL,s),this.current=s,this.dirty=!1}},a}(fi),En=function(o){function a(s,u){o.call(this,s),this.context=s,this.parent=u}return o&&(a.__proto__=o),(a.prototype=Object.create(o&&o.prototype)).constructor=a,a.prototype.getDefault=function(){return null},a}(fi),Ft=function(o){function a(){o.apply(this,arguments)}return o&&(a.__proto__=o),(a.prototype=Object.create(o&&o.prototype)).constructor=a,a.prototype.setDirty=function(){this.dirty=!0},a.prototype.set=function(s){if(s!==this.current||this.dirty){this.context.bindFramebuffer.set(this.parent);var u=this.gl;u.framebufferTexture2D(u.FRAMEBUFFER,u.COLOR_ATTACHMENT0,u.TEXTURE_2D,s,0),this.current=s,this.dirty=!1}},a}(En),Yt=function(o){function a(){o.apply(this,arguments)}return o&&(a.__proto__=o),(a.prototype=Object.create(o&&o.prototype)).constructor=a,a.prototype.set=function(s){if(s!==this.current||this.dirty){this.context.bindFramebuffer.set(this.parent);var u=this.gl;u.framebufferRenderbuffer(u.FRAMEBUFFER,u.DEPTH_ATTACHMENT,u.RENDERBUFFER,s),this.current=s,this.dirty=!1}},a}(En),Jt=function(o,a,s,u){this.context=o,this.width=a,this.height=s;var P=this.framebuffer=o.gl.createFramebuffer();this.colorAttachment=new Ft(o,P),u&&(this.depthAttachment=new Yt(o,P))};Jt.prototype.destroy=function(){var o=this.context.gl,a=this.colorAttachment.get();if(a&&o.deleteTexture(a),this.depthAttachment){var s=this.depthAttachment.get();s&&o.deleteRenderbuffer(s)}o.deleteFramebuffer(this.framebuffer)};var he=function(o,a,s){this.func=o,this.mask=a,this.range=s};he.ReadOnly=!1,he.ReadWrite=!0,he.disabled=new he(519,he.ReadOnly,[0,1]);var Ce=function(o,a,s,u,P,W){this.test=o,this.ref=a,this.mask=s,this.fail=u,this.depthFail=P,this.pass=W};Ce.disabled=new Ce({func:519,mask:0},0,0,7680,7680,7680);var De=function(o,a,s){this.blendFunction=o,this.blendColor=a,this.mask=s};De.disabled=new De(De.Replace=[1,0],l.Color.transparent,[!1,!1,!1,!1]),De.unblended=new De(De.Replace,l.Color.transparent,[!0,!0,!0,!0]),De.alphaBlended=new De([1,771],l.Color.transparent,[!0,!0,!0,!0]);var Ge=function(o,a,s){this.enable=o,this.mode=a,this.frontFace=s};Ge.disabled=new Ge(!1,1029,2305),Ge.backCCW=new Ge(!0,1029,2305);var oe=function(o){this.gl=o,this.extVertexArrayObject=this.gl.getExtension("OES_vertex_array_object"),this.clearColor=new tn(this),this.clearDepth=new Ii(this),this.clearStencil=new Pi(this),this.colorMask=new Ji(this),this.depthMask=new Mi(this),this.stencilMask=new nn(this),this.stencilFunc=new Ti(this),this.stencilOp=new Cn(this),this.stencilTest=new wn(this),this.depthRange=new X(this),this.depthTest=new bt(this),this.depthFunc=new Gt(this),this.blend=new ee(this),this.blendFunc=new we(this),this.blendColor=new Ye(this),this.blendEquation=new xi(this),this.cullFace=new Ui(this),this.cullFaceSide=new hn(this),this.frontFace=new Fn(this),this.program=new Mo(this),this.activeTexture=new qo(this),this.viewport=new Oo(this),this.bindFramebuffer=new Dr(this),this.bindRenderbuffer=new No(this),this.bindTexture=new po(this),this.bindVertexBuffer=new ko(this),this.bindElementBuffer=new Kr(this),this.bindVertexArrayOES=this.extVertexArrayObject&&new dr(this),this.pixelStoreUnpack=new gr(this),this.pixelStoreUnpackPremultiplyAlpha=new lr(this),this.pixelStoreUnpackFlipY=new kn(this),this.extTextureFilterAnisotropic=o.getExtension("EXT_texture_filter_anisotropic")||o.getExtension("MOZ_EXT_texture_filter_anisotropic")||o.getExtension("WEBKIT_EXT_texture_filter_anisotropic"),this.extTextureFilterAnisotropic&&(this.extTextureFilterAnisotropicMax=o.getParameter(this.extTextureFilterAnisotropic.MAX_TEXTURE_MAX_ANISOTROPY_EXT)),this.extTextureHalfFloat=o.getExtension("OES_texture_half_float"),this.extTextureHalfFloat&&(o.getExtension("OES_texture_half_float_linear"),this.extRenderToTextureHalfFloat=o.getExtension("EXT_color_buffer_half_float")),this.extTimerQuery=o.getExtension("EXT_disjoint_timer_query"),this.maxTextureSize=o.getParameter(o.MAX_TEXTURE_SIZE)};oe.prototype.setDefault=function(){this.unbindVAO(),this.clearColor.setDefault(),this.clearDepth.setDefault(),this.clearStencil.setDefault(),this.colorMask.setDefault(),this.depthMask.setDefault(),this.stencilMask.setDefault(),this.stencilFunc.setDefault(),this.stencilOp.setDefault(),this.stencilTest.setDefault(),this.depthRange.setDefault(),this.depthTest.setDefault(),this.depthFunc.setDefault(),this.blend.setDefault(),this.blendFunc.setDefault(),this.blendColor.setDefault(),this.blendEquation.setDefault(),this.cullFace.setDefault(),this.cullFaceSide.setDefault(),this.frontFace.setDefault(),this.program.setDefault(),this.activeTexture.setDefault(),this.bindFramebuffer.setDefault(),this.pixelStoreUnpack.setDefault(),this.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.pixelStoreUnpackFlipY.setDefault()},oe.prototype.setDirty=function(){this.clearColor.dirty=!0,this.clearDepth.dirty=!0,this.clearStencil.dirty=!0,this.colorMask.dirty=!0,this.depthMask.dirty=!0,this.stencilMask.dirty=!0,this.stencilFunc.dirty=!0,this.stencilOp.dirty=!0,this.stencilTest.dirty=!0,this.depthRange.dirty=!0,this.depthTest.dirty=!0,this.depthFunc.dirty=!0,this.blend.dirty=!0,this.blendFunc.dirty=!0,this.blendColor.dirty=!0,this.blendEquation.dirty=!0,this.cullFace.dirty=!0,this.cullFaceSide.dirty=!0,this.frontFace.dirty=!0,this.program.dirty=!0,this.activeTexture.dirty=!0,this.viewport.dirty=!0,this.bindFramebuffer.dirty=!0,this.bindRenderbuffer.dirty=!0,this.bindTexture.dirty=!0,this.bindVertexBuffer.dirty=!0,this.bindElementBuffer.dirty=!0,this.extVertexArrayObject&&(this.bindVertexArrayOES.dirty=!0),this.pixelStoreUnpack.dirty=!0,this.pixelStoreUnpackPremultiplyAlpha.dirty=!0,this.pixelStoreUnpackFlipY.dirty=!0},oe.prototype.createIndexBuffer=function(o,a){return new Te(this,o,a)},oe.prototype.createVertexBuffer=function(o,a,s){return new oi(this,o,a,s)},oe.prototype.createRenderbuffer=function(o,a,s){var u=this.gl,P=u.createRenderbuffer();return this.bindRenderbuffer.set(P),u.renderbufferStorage(u.RENDERBUFFER,o,a,s),this.bindRenderbuffer.set(null),P},oe.prototype.createFramebuffer=function(o,a,s){return new Jt(this,o,a,s)},oe.prototype.clear=function(o){var a=o.color,s=o.depth,u=this.gl,P=0;a&&(P|=u.COLOR_BUFFER_BIT,this.clearColor.set(a),this.colorMask.set([!0,!0,!0,!0])),void 0!==s&&(P|=u.DEPTH_BUFFER_BIT,this.depthRange.set([0,1]),this.clearDepth.set(s),this.depthMask.set(!0)),u.clear(P)},oe.prototype.setCullFace=function(o){!1===o.enable?this.cullFace.set(!1):(this.cullFace.set(!0),this.cullFaceSide.set(o.mode),this.frontFace.set(o.frontFace))},oe.prototype.setDepthMode=function(o){o.func!==this.gl.ALWAYS||o.mask?(this.depthTest.set(!0),this.depthFunc.set(o.func),this.depthMask.set(o.mask),this.depthRange.set(o.range)):this.depthTest.set(!1)},oe.prototype.setStencilMode=function(o){o.test.func!==this.gl.ALWAYS||o.mask?(this.stencilTest.set(!0),this.stencilMask.set(o.mask),this.stencilOp.set([o.fail,o.depthFail,o.pass]),this.stencilFunc.set({func:o.test.func,ref:o.ref,mask:o.test.mask})):this.stencilTest.set(!1)},oe.prototype.setColorMode=function(o){l.deepEqual(o.blendFunction,De.Replace)?this.blend.set(!1):(this.blend.set(!0),this.blendFunc.set(o.blendFunction),this.blendColor.set(o.blendColor)),this.colorMask.set(o.mask)},oe.prototype.unbindVAO=function(){this.extVertexArrayObject&&this.bindVertexArrayOES.set(null)};var Ee=function(o){function a(s,u,P){var W=this;o.call(this),this.id=s,this.dispatcher=P,this.on("data",function($){"source"===$.dataType&&"metadata"===$.sourceDataType&&(W._sourceLoaded=!0),W._sourceLoaded&&!W._paused&&"source"===$.dataType&&"content"===$.sourceDataType&&(W.reload(),W.transform&&W.update(W.transform))}),this.on("error",function(){W._sourceErrored=!0}),this._source=function($,gt,Dt,Ht){var re=new me[gt.type]($,gt,Dt,Ht);if(re.id!==$)throw new Error("Expected Source id to be "+$+" instead of "+re.id);return l.bindAll(["load","abort","unload","serialize","prepare"],re),re}(s,u,P,this),this._tiles={},this._cache=new be(0,this._unloadTile.bind(this)),this._timers={},this._cacheTimers={},this._maxTileCacheSize=null,this._loadedParentTiles={},this._coveredTiles={},this._state=new l.SourceFeatureState}return o&&(a.__proto__=o),(a.prototype=Object.create(o&&o.prototype)).constructor=a,a.prototype.onAdd=function(s){this.map=s,this._maxTileCacheSize=s?s._maxTileCacheSize:null,this._source&&this._source.onAdd&&this._source.onAdd(s)},a.prototype.onRemove=function(s){this._source&&this._source.onRemove&&this._source.onRemove(s)},a.prototype.loaded=function(){if(this._sourceErrored)return!0;if(!this._sourceLoaded||!this._source.loaded())return!1;for(var s in this._tiles){var u=this._tiles[s];if("loaded"!==u.state&&"errored"!==u.state)return!1}return!0},a.prototype.getSource=function(){return this._source},a.prototype.pause=function(){this._paused=!0},a.prototype.resume=function(){if(this._paused){var s=this._shouldReloadOnResume;this._paused=!1,this._shouldReloadOnResume=!1,s&&this.reload(),this.transform&&this.update(this.transform)}},a.prototype._loadTile=function(s,u){return this._source.loadTile(s,u)},a.prototype._unloadTile=function(s){if(this._source.unloadTile)return this._source.unloadTile(s,function(){})},a.prototype._abortTile=function(s){if(this._source.abortTile)return this._source.abortTile(s,function(){})},a.prototype.serialize=function(){return this._source.serialize()},a.prototype.prepare=function(s){for(var u in this._source.prepare&&this._source.prepare(),this._state.coalesceChanges(this._tiles,this.map?this.map.painter:null),this._tiles){var P=this._tiles[u];P.upload(s),P.prepare(this.map.style.imageManager)}},a.prototype.getIds=function(){return l.values(this._tiles).map(function(s){return s.tileID}).sort(ii).map(function(s){return s.key})},a.prototype.getRenderableIds=function(s){var u=this,P=[];for(var W in this._tiles)this._isIdRenderable(W,s)&&P.push(this._tiles[W]);return s?P.sort(function($,gt){var Dt=$.tileID,Ht=gt.tileID,re=new l.Point(Dt.canonical.x,Dt.canonical.y)._rotate(u.transform.angle),le=new l.Point(Ht.canonical.x,Ht.canonical.y)._rotate(u.transform.angle);return Dt.overscaledZ-Ht.overscaledZ||le.y-re.y||le.x-re.x}).map(function($){return $.tileID.key}):P.map(function($){return $.tileID}).sort(ii).map(function($){return $.key})},a.prototype.hasRenderableParent=function(s){var u=this.findLoadedParent(s,0);return!!u&&this._isIdRenderable(u.tileID.key)},a.prototype._isIdRenderable=function(s,u){return this._tiles[s]&&this._tiles[s].hasData()&&!this._coveredTiles[s]&&(u||!this._tiles[s].holdingForFade())},a.prototype.reload=function(){if(this._paused)this._shouldReloadOnResume=!0;else for(var s in this._cache.reset(),this._tiles)"errored"!==this._tiles[s].state&&this._reloadTile(s,"reloading")},a.prototype._reloadTile=function(s,u){var P=this._tiles[s];P&&("loading"!==P.state&&(P.state=u),this._loadTile(P,this._tileLoaded.bind(this,P,s,u)))},a.prototype._tileLoaded=function(s,u,P,W){if(W)return s.state="errored",void(404!==W.status?this._source.fire(new l.ErrorEvent(W,{tile:s})):this.update(this.transform));s.timeAdded=l.browser.now(),"expired"===P&&(s.refreshedUponExpiration=!0),this._setTileReloadTimer(u,s),"raster-dem"===this.getSource().type&&s.dem&&this._backfillDEM(s),this._state.initializeTileState(s,this.map?this.map.painter:null),this._source.fire(new l.Event("data",{dataType:"source",tile:s,coord:s.tileID}))},a.prototype._backfillDEM=function(s){for(var u=this.getRenderableIds(),P=0;P<u.length;P++){var W=u[P];if(s.neighboringTiles&&s.neighboringTiles[W]){var $=this.getTileByID(W);gt(s,$),gt($,s)}}function gt(Dt,Ht){Dt.needsHillshadePrepare=!0;var re=Ht.tileID.canonical.x-Dt.tileID.canonical.x,le=Ht.tileID.canonical.y-Dt.tileID.canonical.y,de=Math.pow(2,Dt.tileID.canonical.z),Ie=Ht.tileID.key;0===re&&0===le||Math.abs(le)>1||(Math.abs(re)>1&&(1===Math.abs(re+de)?re+=de:1===Math.abs(re-de)&&(re-=de)),Ht.dem&&Dt.dem&&(Dt.dem.backfillBorder(Ht.dem,re,le),Dt.neighboringTiles&&Dt.neighboringTiles[Ie]&&(Dt.neighboringTiles[Ie].backfilled=!0)))}},a.prototype.getTile=function(s){return this.getTileByID(s.key)},a.prototype.getTileByID=function(s){return this._tiles[s]},a.prototype._retainLoadedChildren=function(s,u,P,W){for(var $ in this._tiles){var gt=this._tiles[$];if(!(W[$]||!gt.hasData()||gt.tileID.overscaledZ<=u||gt.tileID.overscaledZ>P)){for(var Dt=gt.tileID;gt&&gt.tileID.overscaledZ>u+1;){var Ht=gt.tileID.scaledTo(gt.tileID.overscaledZ-1);(gt=this._tiles[Ht.key])&&gt.hasData()&&(Dt=Ht)}for(var re=Dt;re.overscaledZ>u;)if(s[(re=re.scaledTo(re.overscaledZ-1)).key]){W[Dt.key]=Dt;break}}}},a.prototype.findLoadedParent=function(s,u){if(s.key in this._loadedParentTiles){var P=this._loadedParentTiles[s.key];return P&&P.tileID.overscaledZ>=u?P:null}for(var W=s.overscaledZ-1;W>=u;W--){var $=s.scaledTo(W),gt=this._getLoadedTile($);if(gt)return gt}},a.prototype._getLoadedTile=function(s){var u=this._tiles[s.key];return u&&u.hasData()?u:this._cache.getByKey(s.wrapped().key)},a.prototype.updateCacheSize=function(s){var u=Math.ceil(s.width/this._source.tileSize)+1,P=Math.ceil(s.height/this._source.tileSize)+1,W=Math.floor(u*P*5),$="number"==typeof this._maxTileCacheSize?Math.min(this._maxTileCacheSize,W):W;this._cache.setMaxSize($)},a.prototype.handleWrapJump=function(s){var u=Math.round((s-(void 0===this._prevLng?s:this._prevLng))/360);if(this._prevLng=s,u){var P={};for(var W in this._tiles){var $=this._tiles[W];$.tileID=$.tileID.unwrapTo($.tileID.wrap+u),P[$.tileID.key]=$}for(var gt in this._tiles=P,this._timers)clearTimeout(this._timers[gt]),delete this._timers[gt];for(var Dt in this._tiles)this._setTileReloadTimer(Dt,this._tiles[Dt])}},a.prototype.update=function(s){var u=this;if(this.transform=s,this._sourceLoaded&&!this._paused){var P;this.updateCacheSize(s),this.handleWrapJump(this.transform.center.lng),this._coveredTiles={},this.used?this._source.tileID?P=s.getVisibleUnwrappedCoordinates(this._source.tileID).map(function(Ri){return new l.OverscaledTileID(Ri.canonical.z,Ri.wrap,Ri.canonical.z,Ri.canonical.x,Ri.canonical.y)}):(P=s.coveringTiles({tileSize:this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:this._source.roundZoom,reparseOverscaled:this._source.reparseOverscaled}),this._source.hasTile&&(P=P.filter(function(Ri){return u._source.hasTile(Ri)}))):P=[];var W=s.coveringZoomLevel(this._source),$=Math.max(W-a.maxOverzooming,this._source.minzoom),gt=Math.max(W+a.maxUnderzooming,this._source.minzoom),Dt=this._updateRetainedTiles(P,W);if(Si(this._source.type)){for(var Ht={},re={},le=0,de=Object.keys(Dt);le<de.length;le+=1){var Ie=de[le],Pe=Dt[Ie],Oe=this._tiles[Ie];if(Oe&&!(Oe.fadeEndTime&&Oe.fadeEndTime<=l.browser.now())){var Se=this.findLoadedParent(Pe,$);Se&&(this._addTile(Se.tileID),Ht[Se.tileID.key]=Se.tileID),re[Ie]=Pe}}for(var Re in this._retainLoadedChildren(re,W,gt,Dt),Ht)Dt[Re]||(this._coveredTiles[Re]=!0,Dt[Re]=Ht[Re])}for(var Ze in Dt)this._tiles[Ze].clearFadeHold();for(var si=0,bi=l.keysDifference(this._tiles,Dt);si<bi.length;si+=1){var mi=bi[si],wi=this._tiles[mi];wi.hasSymbolBuckets&&!wi.holdingForFade()?wi.setHoldDuration(this.map._fadeDuration):wi.hasSymbolBuckets&&!wi.symbolFadeFinished()||this._removeTile(mi)}this._updateLoadedParentTileCache()}},a.prototype.releaseSymbolFadeTiles=function(){for(var s in this._tiles)this._tiles[s].holdingForFade()&&this._removeTile(s)},a.prototype._updateRetainedTiles=function(s,u){for(var P={},W={},$=Math.max(u-a.maxOverzooming,this._source.minzoom),gt=Math.max(u+a.maxUnderzooming,this._source.minzoom),Dt={},Ht=0,re=s;Ht<re.length;Ht+=1){var le=re[Ht],de=this._addTile(le);P[le.key]=le,de.hasData()||u<this._source.maxzoom&&(Dt[le.key]=le)}this._retainLoadedChildren(Dt,u,gt,P);for(var Ie=0,Pe=s;Ie<Pe.length;Ie+=1){var Oe=Pe[Ie],Se=this._tiles[Oe.key];if(!Se.hasData()){if(u+1>this._source.maxzoom){var Re=Oe.children(this._source.maxzoom)[0],Ze=this.getTile(Re);if(Ze&&Ze.hasData()){P[Re.key]=Re;continue}}else{var si=Oe.children(this._source.maxzoom);if(P[si[0].key]&&P[si[1].key]&&P[si[2].key]&&P[si[3].key])continue}for(var bi=Se.wasRequested(),mi=Oe.overscaledZ-1;mi>=$;--mi){var wi=Oe.scaledTo(mi);if(W[wi.key]||(W[wi.key]=!0,!(Se=this.getTile(wi))&&bi&&(Se=this._addTile(wi)),Se&&(P[wi.key]=wi,bi=Se.wasRequested(),Se.hasData())))break}}}return P},a.prototype._updateLoadedParentTileCache=function(){for(var s in this._loadedParentTiles={},this._tiles){for(var u=[],P=void 0,W=this._tiles[s].tileID;W.overscaledZ>0;){if(W.key in this._loadedParentTiles){P=this._loadedParentTiles[W.key];break}u.push(W.key);var $=W.scaledTo(W.overscaledZ-1);if(P=this._getLoadedTile($))break;W=$}for(var gt=0,Dt=u;gt<Dt.length;gt+=1)this._loadedParentTiles[Dt[gt]]=P}},a.prototype._addTile=function(s){var u=this._tiles[s.key];if(u)return u;(u=this._cache.getAndRemove(s))&&(this._setTileReloadTimer(s.key,u),u.tileID=s,this._state.initializeTileState(u,this.map?this.map.painter:null),this._cacheTimers[s.key]&&(clearTimeout(this._cacheTimers[s.key]),delete this._cacheTimers[s.key],this._setTileReloadTimer(s.key,u)));var P=Boolean(u);return P||(u=new l.Tile(s,this._source.tileSize*s.overscaleFactor()),this._loadTile(u,this._tileLoaded.bind(this,u,s.key,u.state))),u?(u.uses++,this._tiles[s.key]=u,P||this._source.fire(new l.Event("dataloading",{tile:u,coord:u.tileID,dataType:"source"})),u):null},a.prototype._setTileReloadTimer=function(s,u){var P=this;s in this._timers&&(clearTimeout(this._timers[s]),delete this._timers[s]);var W=u.getExpiryTimeout();W&&(this._timers[s]=setTimeout(function(){P._reloadTile(s,"expired"),delete P._timers[s]},W))},a.prototype._removeTile=function(s){var u=this._tiles[s];u&&(u.uses--,delete this._tiles[s],this._timers[s]&&(clearTimeout(this._timers[s]),delete this._timers[s]),u.uses>0||(u.hasData()&&"reloading"!==u.state?this._cache.add(u.tileID,u,u.getExpiryTimeout()):(u.aborted=!0,this._abortTile(u),this._unloadTile(u))))},a.prototype.clearTiles=function(){for(var s in this._shouldReloadOnResume=!1,this._paused=!1,this._tiles)this._removeTile(s);this._cache.reset()},a.prototype.tilesIn=function(s,u,P){var W=this,$=[],gt=this.transform;if(!gt)return $;for(var Dt=P?gt.getCameraQueryGeometry(s):s,Ht=s.map(function(mi){return gt.pointCoordinate(mi)}),re=Dt.map(function(mi){return gt.pointCoordinate(mi)}),le=this.getIds(),de=1/0,Ie=1/0,Pe=-1/0,Oe=-1/0,Se=0,Re=re;Se<Re.length;Se+=1){var Ze=Re[Se];de=Math.min(de,Ze.x),Ie=Math.min(Ie,Ze.y),Pe=Math.max(Pe,Ze.x),Oe=Math.max(Oe,Ze.y)}for(var si=function(mi){var wi=W._tiles[le[mi]];if(!wi.holdingForFade()){var Ri=wi.tileID,$i=Math.pow(2,gt.zoom-wi.tileID.overscaledZ),Xi=u*wi.queryPadding*l.EXTENT/wi.tileSize/$i,fn=[Ri.getTilePoint(new l.MercatorCoordinate(de,Ie)),Ri.getTilePoint(new l.MercatorCoordinate(Pe,Oe))];if(fn[0].x-Xi<l.EXTENT&&fn[0].y-Xi<l.EXTENT&&fn[1].x+Xi>=0&&fn[1].y+Xi>=0){var Mn=Ht.map(function(Ln){return Ri.getTilePoint(Ln)}),zn=re.map(function(Ln){return Ri.getTilePoint(Ln)});$.push({tile:wi,tileID:Ri,queryGeometry:Mn,cameraQueryGeometry:zn,scale:$i})}}},bi=0;bi<le.length;bi++)si(bi);return $},a.prototype.getVisibleCoordinates=function(s){for(var u=this,P=this.getRenderableIds(s).map(function(Dt){return u._tiles[Dt].tileID}),W=0,$=P;W<$.length;W+=1){var gt=$[W];gt.posMatrix=this.transform.calculatePosMatrix(gt.toUnwrapped())}return P},a.prototype.hasTransition=function(){if(this._source.hasTransition())return!0;if(Si(this._source.type))for(var s in this._tiles){var u=this._tiles[s];if(void 0!==u.fadeEndTime&&u.fadeEndTime>=l.browser.now())return!0}return!1},a.prototype.setFeatureState=function(s,u,P){this._state.updateState(s=s||"_geojsonTileLayer",u,P)},a.prototype.removeFeatureState=function(s,u,P){this._state.removeFeatureState(s=s||"_geojsonTileLayer",u,P)},a.prototype.getFeatureState=function(s,u){return this._state.getState(s=s||"_geojsonTileLayer",u)},a.prototype.setDependencies=function(s,u,P){var W=this._tiles[s];W&&W.setDependencies(u,P)},a.prototype.reloadTilesForDependencies=function(s,u){for(var P in this._tiles)this._tiles[P].hasDependency(s,u)&&this._reloadTile(P,"reloading");this._cache.filter(function(W){return!W.hasDependency(s,u)})},a}(l.Evented);function ii(o,a){var s=Math.abs(2*o.wrap)-+(o.wrap<0),u=Math.abs(2*a.wrap)-+(a.wrap<0);return o.overscaledZ-a.overscaledZ||u-s||a.canonical.y-o.canonical.y||a.canonical.x-o.canonical.x}function Si(o){return"raster"===o||"image"===o||"video"===o}function Oi(){return new l.window.Worker(Ll.workerUrl)}Ee.maxOverzooming=10,Ee.maxUnderzooming=3;var di="mapboxgl_preloaded_worker_pool",hi=function(){this.active={}};hi.prototype.acquire=function(o){if(!this.workers)for(this.workers=[];this.workers.length<hi.workerCount;)this.workers.push(new Oi);return this.active[o]=!0,this.workers.slice()},hi.prototype.release=function(o){delete this.active[o],0===this.numActive()&&(this.workers.forEach(function(a){a.terminate()}),this.workers=null)},hi.prototype.isPreloaded=function(){return!!this.active[di]},hi.prototype.numActive=function(){return Object.keys(this.active).length};var sn,Fi=Math.floor(l.browser.hardwareConcurrency/2);function yi(){return sn||(sn=new hi),sn}function Zi(o,a){var s={};for(var u in o)"ref"!==u&&(s[u]=o[u]);return l.refProperties.forEach(function(P){P in a&&(s[P]=a[P])}),s}function Yi(o){o=o.slice();for(var a=Object.create(null),s=0;s<o.length;s++)a[o[s].id]=o[s];for(var u=0;u<o.length;u++)"ref"in o[u]&&(o[u]=Zi(o[u],a[o[u].ref]));return o}hi.workerCount=Math.max(Math.min(Fi,6),1);var Ki={setStyle:"setStyle",addLayer:"addLayer",removeLayer:"removeLayer",setPaintProperty:"setPaintProperty",setLayoutProperty:"setLayoutProperty",setFilter:"setFilter",addSource:"addSource",removeSource:"removeSource",setGeoJSONSourceData:"setGeoJSONSourceData",setLayerZoomRange:"setLayerZoomRange",setLayerProperty:"setLayerProperty",setCenter:"setCenter",setZoom:"setZoom",setBearing:"setBearing",setPitch:"setPitch",setSprite:"setSprite",setGlyphs:"setGlyphs",setTransition:"setTransition",setLight:"setLight"};function Nn(o,a,s){s.push({command:Ki.addSource,args:[o,a[o]]})}function Vi(o,a,s){a.push({command:Ki.removeSource,args:[o]}),s[o]=!0}function so(o,a,s,u){Vi(o,s,u),Nn(o,a,s)}function Hn(o,a,s){var u;for(u in o[s])if(o[s].hasOwnProperty(u)&&"data"!==u&&!l.deepEqual(o[s][u],a[s][u]))return!1;for(u in a[s])if(a[s].hasOwnProperty(u)&&"data"!==u&&!l.deepEqual(o[s][u],a[s][u]))return!1;return!0}function Gn(o,a,s,u,P,W){var $;for($ in a=a||{},o=o||{})o.hasOwnProperty($)&&(l.deepEqual(o[$],a[$])||s.push({command:W,args:[u,$,a[$],P]}));for($ in a)a.hasOwnProperty($)&&!o.hasOwnProperty($)&&(l.deepEqual(o[$],a[$])||s.push({command:W,args:[u,$,a[$],P]}))}function vo(o){return o.id}function Jn(o,a){return o[a.id]=a,o}var yr=function(o,a){this.reset(o,a)};yr.prototype.reset=function(o,a){this.points=o||[],this._distances=[0];for(var s=1;s<this.points.length;s++)this._distances[s]=this._distances[s-1]+this.points[s].dist(this.points[s-1]);this.length=this._distances[this._distances.length-1],this.padding=Math.min(a||0,.5*this.length),this.paddedLength=this.length-2*this.padding},yr.prototype.lerp=function(o){if(1===this.points.length)return this.points[0];o=l.clamp(o,0,1);for(var a=1,s=this._distances[a],u=o*this.paddedLength+this.padding;s<u&&a<this._distances.length;)s=this._distances[++a];var P=a-1,W=this._distances[P],$=s-W,gt=$>0?(u-W)/$:0;return this.points[P].mult(1-gt).add(this.points[a].mult(gt))};var Co=function(o,a,s){var u=this.boxCells=[],P=this.circleCells=[];this.xCellCount=Math.ceil(o/s),this.yCellCount=Math.ceil(a/s);for(var W=0;W<this.xCellCount*this.yCellCount;W++)u.push([]),P.push([]);this.circleKeys=[],this.boxKeys=[],this.bboxes=[],this.circles=[],this.width=o,this.height=a,this.xScale=this.xCellCount/o,this.yScale=this.yCellCount/a,this.boxUid=0,this.circleUid=0};function vr(o,a,s,u,P){var W=l.create();return a?(l.scale(W,W,[1/P,1/P,1]),s||l.rotateZ(W,W,u.angle)):l.multiply(W,u.labelPlaneMatrix,o),W}function bo(o,a,s,u,P){if(a){var W=l.clone(o);return l.scale(W,W,[P,P,1]),s||l.rotateZ(W,W,-u.angle),W}return u.glCoordMatrix}function ao(o,a){var s=[o.x,o.y,0,1];Cr(s,s,a);var u=s[3];return{point:new l.Point(s[0]/u,s[1]/u),signedDistanceFromCamera:u}}function gn(o,a){return.5+o/a*.5}function Tr(o,a){var s=o[0]/o[3],u=o[1]/o[3];return s>=-a[0]&&s<=a[0]&&u>=-a[1]&&u<=a[1]}function Vs(o,a,s,u,P,W,$,gt){var Dt=u?o.textSizeData:o.iconSizeData,Ht=l.evaluateSizeForZoom(Dt,s.transform.zoom),re=[256/s.width*2+1,256/s.height*2+1],le=u?o.text.dynamicLayoutVertexArray:o.icon.dynamicLayoutVertexArray;le.clear();for(var de=o.lineVertexArray,Ie=u?o.text.placedSymbolArray:o.icon.placedSymbolArray,Pe=s.transform.width/s.transform.height,Oe=!1,Se=0;Se<Ie.length;Se++){var Re=Ie.get(Se);if(Re.hidden||Re.writingMode===l.WritingMode.vertical&&!Oe)Or(Re.numGlyphs,le);else{Oe=!1;var Ze=[Re.anchorX,Re.anchorY,0,1];if(l.transformMat4(Ze,Ze,a),Tr(Ze,re)){var si=gn(s.transform.cameraToCenterDistance,Ze[3]),bi=l.evaluateSizeForFeature(Dt,Ht,Re),mi=$?bi/si:bi*si,wi=new l.Point(Re.anchorX,Re.anchorY),Ri=ao(wi,P).point,$i={},Xi=$s(Re,mi,!1,gt,a,P,W,o.glyphOffsetArray,de,le,Ri,wi,$i,Pe);Oe=Xi.useVertical,(Xi.notEnoughRoom||Oe||Xi.needsFlipping&&$s(Re,mi,!0,gt,a,P,W,o.glyphOffsetArray,de,le,Ri,wi,$i,Pe).notEnoughRoom)&&Or(Re.numGlyphs,le)}else Or(Re.numGlyphs,le)}}u?o.text.dynamicLayoutVertexBuffer.updateData(le):o.icon.dynamicLayoutVertexBuffer.updateData(le)}function Uo(o,a,s,u,P,W,$,gt,Dt,Ht,re){var le=gt.glyphStartIndex+gt.numGlyphs,de=gt.lineStartIndex,Ie=gt.lineStartIndex+gt.lineLength,Pe=a.getoffsetX(gt.glyphStartIndex),Oe=a.getoffsetX(le-1),Se=Vo(o*Pe,s,u,P,W,$,gt.segment,de,Ie,Dt,Ht,re);if(!Se)return null;var Re=Vo(o*Oe,s,u,P,W,$,gt.segment,de,Ie,Dt,Ht,re);return Re?{first:Se,last:Re}:null}function zr(o,a,s,u){return o===l.WritingMode.horizontal&&Math.abs(s.y-a.y)>Math.abs(s.x-a.x)*u?{useVertical:!0}:(o===l.WritingMode.vertical?a.y<s.y:a.x>s.x)?{needsFlipping:!0}:null}function $s(o,a,s,u,P,W,$,gt,Dt,Ht,re,le,de,Ie){var Pe,Oe=a/24,Se=o.lineOffsetX*Oe,Re=o.lineOffsetY*Oe;if(o.numGlyphs>1){var Ze=o.glyphStartIndex+o.numGlyphs,si=o.lineStartIndex,bi=o.lineStartIndex+o.lineLength,mi=Uo(Oe,gt,Se,Re,s,re,le,o,Dt,W,de);if(!mi)return{notEnoughRoom:!0};var wi=ao(mi.first.point,$).point,Ri=ao(mi.last.point,$).point;if(u&&!s){var $i=zr(o.writingMode,wi,Ri,Ie);if($i)return $i}Pe=[mi.first];for(var Xi=o.glyphStartIndex+1;Xi<Ze-1;Xi++)Pe.push(Vo(Oe*gt.getoffsetX(Xi),Se,Re,s,re,le,o.segment,si,bi,Dt,W,de));Pe.push(mi.last)}else{if(u&&!s){var fn=ao(le,P).point,Mn=o.lineStartIndex+o.segment+1,zn=new l.Point(Dt.getx(Mn),Dt.gety(Mn)),Ln=ao(zn,P),Wo=Ln.signedDistanceFromCamera>0?Ln.point:wa(le,zn,fn,1,P),un=zr(o.writingMode,fn,Wo,Ie);if(un)return un}var to=Vo(Oe*gt.getoffsetX(o.glyphStartIndex),Se,Re,s,re,le,o.segment,o.lineStartIndex,o.lineStartIndex+o.lineLength,Dt,W,de);if(!to)return{notEnoughRoom:!0};Pe=[to]}for(var yo=0,Kn=Pe;yo<Kn.length;yo+=1){var qn=Kn[yo];l.addDynamicAttributes(Ht,qn.point,qn.angle)}return{}}function wa(o,a,s,u,P){var W=ao(o.add(o.sub(a)._unit()),P).point,$=s.sub(W);return s.add($._mult(u/$.mag()))}function Vo(o,a,s,u,P,W,$,gt,Dt,Ht,re,le){var de=u?o-a:o+a,Ie=de>0?1:-1,Pe=0;u&&(Ie*=-1,Pe=Math.PI),Ie<0&&(Pe+=Math.PI);for(var Oe=Ie>0?gt+$:gt+$+1,Se=P,Re=P,Ze=0,si=0,bi=Math.abs(de),mi=[];Ze+si<=bi;){if((Oe+=Ie)<gt||Oe>=Dt)return null;if(Re=Se,mi.push(Se),void 0===(Se=le[Oe])){var wi=new l.Point(Ht.getx(Oe),Ht.gety(Oe)),Ri=ao(wi,re);if(Ri.signedDistanceFromCamera>0)Se=le[Oe]=Ri.point;else{var $i=Oe-Ie;Se=wa(0===Ze?W:new l.Point(Ht.getx($i),Ht.gety($i)),wi,Re,bi-Ze+1,re)}}Ze+=si,si=Re.dist(Se)}var Xi=(bi-Ze)/si,fn=Se.sub(Re),Mn=fn.mult(Xi)._add(Re);Mn._add(fn._unit()._perp()._mult(s*Ie));var zn=Pe+Math.atan2(Se.y-Re.y,Se.x-Re.x);return mi.push(Mn),{point:Mn,angle:zn,path:mi}}Co.prototype.keysLength=function(){return this.boxKeys.length+this.circleKeys.length},Co.prototype.insert=function(o,a,s,u,P){this._forEachCell(a,s,u,P,this._insertBoxCell,this.boxUid++),this.boxKeys.push(o),this.bboxes.push(a),this.bboxes.push(s),this.bboxes.push(u),this.bboxes.push(P)},Co.prototype.insertCircle=function(o,a,s,u){this._forEachCell(a-u,s-u,a+u,s+u,this._insertCircleCell,this.circleUid++),this.circleKeys.push(o),this.circles.push(a),this.circles.push(s),this.circles.push(u)},Co.prototype._insertBoxCell=function(o,a,s,u,P,W){this.boxCells[P].push(W)},Co.prototype._insertCircleCell=function(o,a,s,u,P,W){this.circleCells[P].push(W)},Co.prototype._query=function(o,a,s,u,P,W){if(s<0||o>this.width||u<0||a>this.height)return!P&&[];var $=[];if(o<=0&&a<=0&&this.width<=s&&this.height<=u){if(P)return!0;for(var gt=0;gt<this.boxKeys.length;gt++)$.push({key:this.boxKeys[gt],x1:this.bboxes[4*gt],y1:this.bboxes[4*gt+1],x2:this.bboxes[4*gt+2],y2:this.bboxes[4*gt+3]});for(var Dt=0;Dt<this.circleKeys.length;Dt++){var Ht=this.circles[3*Dt],re=this.circles[3*Dt+1],le=this.circles[3*Dt+2];$.push({key:this.circleKeys[Dt],x1:Ht-le,y1:re-le,x2:Ht+le,y2:re+le})}return W?$.filter(W):$}return this._forEachCell(o,a,s,u,this._queryCell,$,{hitTest:P,seenUids:{box:{},circle:{}}},W),P?$.length>0:$},Co.prototype._queryCircle=function(o,a,s,u,P){var W=o-s,$=o+s,gt=a-s,Dt=a+s;if($<0||W>this.width||Dt<0||gt>this.height)return!u&&[];var Ht=[];return this._forEachCell(W,gt,$,Dt,this._queryCellCircle,Ht,{hitTest:u,circle:{x:o,y:a,radius:s},seenUids:{box:{},circle:{}}},P),u?Ht.length>0:Ht},Co.prototype.query=function(o,a,s,u,P){return this._query(o,a,s,u,!1,P)},Co.prototype.hitTest=function(o,a,s,u,P){return this._query(o,a,s,u,!0,P)},Co.prototype.hitTestCircle=function(o,a,s,u){return this._queryCircle(o,a,s,!0,u)},Co.prototype._queryCell=function(o,a,s,u,P,W,$,gt){var Dt=$.seenUids,Ht=this.boxCells[P];if(null!==Ht)for(var re=this.bboxes,le=0,de=Ht;le<de.length;le+=1){var Ie=de[le];if(!Dt.box[Ie]){Dt.box[Ie]=!0;var Pe=4*Ie;if(o<=re[Pe+2]&&a<=re[Pe+3]&&s>=re[Pe+0]&&u>=re[Pe+1]&&(!gt||gt(this.boxKeys[Ie]))){if($.hitTest)return W.push(!0),!0;W.push({key:this.boxKeys[Ie],x1:re[Pe],y1:re[Pe+1],x2:re[Pe+2],y2:re[Pe+3]})}}}var Oe=this.circleCells[P];if(null!==Oe)for(var Se=this.circles,Re=0,Ze=Oe;Re<Ze.length;Re+=1){var si=Ze[Re];if(!Dt.circle[si]){Dt.circle[si]=!0;var bi=3*si;if(this._circleAndRectCollide(Se[bi],Se[bi+1],Se[bi+2],o,a,s,u)&&(!gt||gt(this.circleKeys[si]))){if($.hitTest)return W.push(!0),!0;var mi=Se[bi],wi=Se[bi+1],Ri=Se[bi+2];W.push({key:this.circleKeys[si],x1:mi-Ri,y1:wi-Ri,x2:mi+Ri,y2:wi+Ri})}}}},Co.prototype._queryCellCircle=function(o,a,s,u,P,W,$,gt){var Dt=$.circle,Ht=$.seenUids,re=this.boxCells[P];if(null!==re)for(var le=this.bboxes,de=0,Ie=re;de<Ie.length;de+=1){var Pe=Ie[de];if(!Ht.box[Pe]){Ht.box[Pe]=!0;var Oe=4*Pe;if(this._circleAndRectCollide(Dt.x,Dt.y,Dt.radius,le[Oe+0],le[Oe+1],le[Oe+2],le[Oe+3])&&(!gt||gt(this.boxKeys[Pe])))return W.push(!0),!0}}var Se=this.circleCells[P];if(null!==Se)for(var Re=this.circles,Ze=0,si=Se;Ze<si.length;Ze+=1){var bi=si[Ze];if(!Ht.circle[bi]){Ht.circle[bi]=!0;var mi=3*bi;if(this._circlesCollide(Re[mi],Re[mi+1],Re[mi+2],Dt.x,Dt.y,Dt.radius)&&(!gt||gt(this.circleKeys[bi])))return W.push(!0),!0}}},Co.prototype._forEachCell=function(o,a,s,u,P,W,$,gt){for(var Dt=this._convertToXCellCoord(o),Ht=this._convertToYCellCoord(a),re=this._convertToXCellCoord(s),le=this._convertToYCellCoord(u),de=Dt;de<=re;de++)for(var Ie=Ht;Ie<=le;Ie++)if(P.call(this,o,a,s,u,this.xCellCount*Ie+de,W,$,gt))return},Co.prototype._convertToXCellCoord=function(o){return Math.max(0,Math.min(this.xCellCount-1,Math.floor(o*this.xScale)))},Co.prototype._convertToYCellCoord=function(o){return Math.max(0,Math.min(this.yCellCount-1,Math.floor(o*this.yScale)))},Co.prototype._circlesCollide=function(o,a,s,u,P,W){var $=u-o,gt=P-a,Dt=s+W;return Dt*Dt>$*$+gt*gt},Co.prototype._circleAndRectCollide=function(o,a,s,u,P,W,$){var gt=(W-u)/2,Dt=Math.abs(o-(u+gt));if(Dt>gt+s)return!1;var Ht=($-P)/2,re=Math.abs(a-(P+Ht));if(re>Ht+s)return!1;if(Dt<=gt||re<=Ht)return!0;var le=Dt-gt,de=re-Ht;return le*le+de*de<=s*s};var Hr=new Float32Array([-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0]);function Or(o,a){for(var s=0;s<o;s++){var u=a.length;a.resize(u+4),a.float32.set(Hr,3*u)}}function Cr(o,a,s){var u=a[0],P=a[1];return o[0]=s[0]*u+s[4]*P+s[12],o[1]=s[1]*u+s[5]*P+s[13],o[3]=s[3]*u+s[7]*P+s[15],o}var Br=function(o,a,s){void 0===a&&(a=new Co(o.width+200,o.height+200,25)),void 0===s&&(s=new Co(o.width+200,o.height+200,25)),this.transform=o,this.grid=a,this.ignoredGrid=s,this.pitchfactor=Math.cos(o._pitch)*o.cameraToCenterDistance,this.screenRightBoundary=o.width+100,this.screenBottomBoundary=o.height+100,this.gridRightBoundary=o.width+200,this.gridBottomBoundary=o.height+200};function Jo(o,a,s){return a*(l.EXTENT/(o.tileSize*Math.pow(2,s-o.tileID.overscaledZ)))}Br.prototype.placeCollisionBox=function(o,a,s,u,P){var W=this.projectAndGetPerspectiveRatio(u,o.anchorPointX,o.anchorPointY),$=s*W.perspectiveRatio,gt=o.x1*$+W.point.x,Dt=o.y1*$+W.point.y,Ht=o.x2*$+W.point.x,re=o.y2*$+W.point.y;return!this.isInsideGrid(gt,Dt,Ht,re)||!a&&this.grid.hitTest(gt,Dt,Ht,re,P)?{box:[],offscreen:!1}:{box:[gt,Dt,Ht,re],offscreen:this.isOffscreen(gt,Dt,Ht,re)}},Br.prototype.placeCollisionCircles=function(o,a,s,u,P,W,$,gt,Dt,Ht,re,le,de){var Ie=[],Pe=new l.Point(a.anchorX,a.anchorY),Oe=ao(Pe,W),Se=gn(this.transform.cameraToCenterDistance,Oe.signedDistanceFromCamera),Re=(Ht?P/Se:P*Se)/l.ONE_EM,Ze=ao(Pe,$).point,si=Uo(Re,u,a.lineOffsetX*Re,a.lineOffsetY*Re,!1,Ze,Pe,a,s,$,{}),bi=!1,mi=!1,wi=!0;if(si){for(var Ri=.5*le*Se+de,$i=new l.Point(-100,-100),Xi=new l.Point(this.screenRightBoundary,this.screenBottomBoundary),fn=new yr,Mn=si.first,zn=si.last,Ln=[],Wo=Mn.path.length-1;Wo>=1;Wo--)Ln.push(Mn.path[Wo]);for(var un=1;un<zn.path.length;un++)Ln.push(zn.path[un]);var to=2.5*Ri;if(gt){var yo=Ln.map(function(Pa){return ao(Pa,gt)});Ln=yo.some(function(Pa){return Pa.signedDistanceFromCamera<=0})?[]:yo.map(function(Pa){return Pa.point})}var Kn=[];if(Ln.length>0){for(var qn=Ln[0].clone(),mo=Ln[0].clone(),$n=1;$n<Ln.length;$n++)qn.x=Math.min(qn.x,Ln[$n].x),qn.y=Math.min(qn.y,Ln[$n].y),mo.x=Math.max(mo.x,Ln[$n].x),mo.y=Math.max(mo.y,Ln[$n].y);Kn=qn.x>=$i.x&&mo.x<=Xi.x&&qn.y>=$i.y&&mo.y<=Xi.y?[Ln]:mo.x<$i.x||qn.x>Xi.x||mo.y<$i.y||qn.y>Xi.y?[]:l.clipLine([Ln],$i.x,$i.y,Xi.x,Xi.y)}for(var Vn=0,Ss=Kn;Vn<Ss.length;Vn+=1){var es;fn.reset(Ss[Vn],.25*Ri),es=fn.length<=.5*Ri?1:Math.ceil(fn.paddedLength/to)+1;for(var Zs=0;Zs<es;Zs++){var Ts=Zs/Math.max(es-1,1),kr=fn.lerp(Ts),Ur=kr.x+100,Fr=kr.y+100;Ie.push(Ur,Fr,Ri,0);var ia=Ur-Ri,tl=Fr-Ri,na=Ur+Ri,Da=Fr+Ri;if(wi=wi&&this.isOffscreen(ia,tl,na,Da),mi=mi||this.isInsideGrid(ia,tl,na,Da),!o&&this.grid.hitTestCircle(Ur,Fr,Ri,re)&&(bi=!0,!Dt))return{circles:[],offscreen:!1,collisionDetected:bi}}}}return{circles:!Dt&&bi||!mi?[]:Ie,offscreen:wi,collisionDetected:bi}},Br.prototype.queryRenderedSymbols=function(o){if(0===o.length||0===this.grid.keysLength()&&0===this.ignoredGrid.keysLength())return{};for(var a=[],s=1/0,u=1/0,P=-1/0,W=-1/0,$=0,gt=o;$<gt.length;$+=1){var Dt=gt[$],Ht=new l.Point(Dt.x+100,Dt.y+100);s=Math.min(s,Ht.x),u=Math.min(u,Ht.y),P=Math.max(P,Ht.x),W=Math.max(W,Ht.y),a.push(Ht)}for(var re={},le={},de=0,Ie=this.grid.query(s,u,P,W).concat(this.ignoredGrid.query(s,u,P,W));de<Ie.length;de+=1){var Pe=Ie[de],Oe=Pe.key;if(void 0===re[Oe.bucketInstanceId]&&(re[Oe.bucketInstanceId]={}),!re[Oe.bucketInstanceId][Oe.featureIndex]){var Se=[new l.Point(Pe.x1,Pe.y1),new l.Point(Pe.x2,Pe.y1),new l.Point(Pe.x2,Pe.y2),new l.Point(Pe.x1,Pe.y2)];l.polygonIntersectsPolygon(a,Se)&&(re[Oe.bucketInstanceId][Oe.featureIndex]=!0,void 0===le[Oe.bucketInstanceId]&&(le[Oe.bucketInstanceId]=[]),le[Oe.bucketInstanceId].push(Oe.featureIndex))}}return le},Br.prototype.insertCollisionBox=function(o,a,s,u,P){(a?this.ignoredGrid:this.grid).insert({bucketInstanceId:s,featureIndex:u,collisionGroupID:P},o[0],o[1],o[2],o[3])},Br.prototype.insertCollisionCircles=function(o,a,s,u,P){for(var W=a?this.ignoredGrid:this.grid,$={bucketInstanceId:s,featureIndex:u,collisionGroupID:P},gt=0;gt<o.length;gt+=4)W.insertCircle($,o[gt],o[gt+1],o[gt+2])},Br.prototype.projectAndGetPerspectiveRatio=function(o,a,s){var u=[a,s,0,1];return Cr(u,u,o),{point:new l.Point((u[0]/u[3]+1)/2*this.transform.width+100,(-u[1]/u[3]+1)/2*this.transform.height+100),perspectiveRatio:.5+this.transform.cameraToCenterDistance/u[3]*.5}},Br.prototype.isOffscreen=function(o,a,s,u){return s<100||o>=this.screenRightBoundary||u<100||a>this.screenBottomBoundary},Br.prototype.isInsideGrid=function(o,a,s,u){return s>=0&&o<this.gridRightBoundary&&u>=0&&a<this.gridBottomBoundary},Br.prototype.getViewportMatrix=function(){var o=l.identity([]);return l.translate(o,o,[-100,-100,0]),o};var Ps=function(o,a,s,u){this.opacity=o?Math.max(0,Math.min(1,o.opacity+(o.placed?a:-a))):u&&s?1:0,this.placed=s};Ps.prototype.isHidden=function(){return 0===this.opacity&&!this.placed};var is=function(o,a,s,u,P){this.text=new Ps(o?o.text:null,a,s,P),this.icon=new Ps(o?o.icon:null,a,u,P)};is.prototype.isHidden=function(){return this.text.isHidden()&&this.icon.isHidden()};var oa=function(o,a,s){this.text=o,this.icon=a,this.skipFade=s},Mr=function(){this.invProjMatrix=l.create(),this.viewportMatrix=l.create(),this.circles=[]},ra=function(o,a,s,u,P){this.bucketInstanceId=o,this.featureIndex=a,this.sourceLayerIndex=s,this.bucketIndex=u,this.tileID=P},rr=function(o){this.crossSourceCollisions=o,this.maxGroupID=0,this.collisionGroups={}};function Lo(o,a,s,u,P){var W=l.getAnchorAlignment(o),$=-(W.horizontalAlign-.5)*a,gt=-(W.verticalAlign-.5)*s,Dt=l.evaluateVariableOffset(o,u);return new l.Point($+Dt[0]*P,gt+Dt[1]*P)}function Ro(o,a,s,u,P,W){var $=o.x1,gt=o.x2,Dt=o.y1,Ht=o.y2,re=o.anchorPointX,le=o.anchorPointY,de=new l.Point(a,s);return u&&de._rotate(P?W:-W),{x1:$+de.x,y1:Dt+de.y,x2:gt+de.x,y2:Ht+de.y,anchorPointX:re,anchorPointY:le}}rr.prototype.get=function(o){if(this.crossSourceCollisions)return{ID:0,predicate:null};if(!this.collisionGroups[o]){var a=++this.maxGroupID;this.collisionGroups[o]={ID:a,predicate:function(s){return s.collisionGroupID===a}}}return this.collisionGroups[o]};var Lr=function(o,a,s,u){this.transform=o.clone(),this.collisionIndex=new Br(this.transform),this.placements={},this.opacities={},this.variableOffsets={},this.stale=!1,this.commitTime=0,this.fadeDuration=a,this.retainedQueryData={},this.collisionGroups=new rr(s),this.collisionCircleArrays={},this.prevPlacement=u,u&&(u.prevPlacement=void 0),this.placedOrientations={}};function ks(o,a,s,u,P){o.emplaceBack(a?1:0,s?1:0,u||0,P||0),o.emplaceBack(a?1:0,s?1:0,u||0,P||0),o.emplaceBack(a?1:0,s?1:0,u||0,P||0),o.emplaceBack(a?1:0,s?1:0,u||0,P||0)}Lr.prototype.getBucketParts=function(o,a,s,u){var P=s.getBucket(a),W=s.latestFeatureIndex;if(P&&W&&a.id===P.layerIds[0]){var $=s.collisionBoxArray,gt=P.layers[0].layout,Dt=Math.pow(2,this.transform.zoom-s.tileID.overscaledZ),Ht=s.tileSize/l.EXTENT,re=this.transform.calculatePosMatrix(s.tileID.toUnwrapped()),le="map"===gt.get("text-pitch-alignment"),de="map"===gt.get("text-rotation-alignment"),Ie=Jo(s,1,this.transform.zoom),Pe=vr(re,le,de,this.transform,Ie),Oe=null;if(le){var Se=bo(re,le,de,this.transform,Ie);Oe=l.multiply([],this.transform.labelPlaneMatrix,Se)}this.retainedQueryData[P.bucketInstanceId]=new ra(P.bucketInstanceId,W,P.sourceLayerIndex,P.index,s.tileID);var Re={bucket:P,layout:gt,posMatrix:re,textLabelPlaneMatrix:Pe,labelToScreenMatrix:Oe,scale:Dt,textPixelRatio:Ht,holdingForFade:s.holdingForFade(),collisionBoxArray:$,partiallyEvaluatedTextSize:l.evaluateSizeForZoom(P.textSizeData,this.transform.zoom),collisionGroup:this.collisionGroups.get(P.sourceID)};if(u)for(var Ze=0,si=P.sortKeyRanges;Ze<si.length;Ze+=1){var bi=si[Ze];o.push({sortKey:bi.sortKey,symbolInstanceStart:bi.symbolInstanceStart,symbolInstanceEnd:bi.symbolInstanceEnd,parameters:Re})}else o.push({symbolInstanceStart:0,symbolInstanceEnd:P.symbolInstances.length,parameters:Re})}},Lr.prototype.attemptAnchorPlacement=function(o,a,s,u,P,W,$,gt,Dt,Ht,re,le,de,Ie,Pe){var Oe,Se=[le.textOffset0,le.textOffset1],Re=Lo(o,s,u,Se,P),Ze=this.collisionIndex.placeCollisionBox(Ro(a,Re.x,Re.y,W,$,this.transform.angle),re,gt,Dt,Ht.predicate);if(!Pe||0!==this.collisionIndex.placeCollisionBox(Ro(Pe,Re.x,Re.y,W,$,this.transform.angle),re,gt,Dt,Ht.predicate).box.length)return Ze.box.length>0?(this.prevPlacement&&this.prevPlacement.variableOffsets[le.crossTileID]&&this.prevPlacement.placements[le.crossTileID]&&this.prevPlacement.placements[le.crossTileID].text&&(Oe=this.prevPlacement.variableOffsets[le.crossTileID].anchor),this.variableOffsets[le.crossTileID]={textOffset:Se,width:s,height:u,anchor:o,textBoxScale:P,prevAnchor:Oe},this.markUsedJustification(de,o,le,Ie),de.allowVerticalPlacement&&(this.markUsedOrientation(de,Ie,le),this.placedOrientations[le.crossTileID]=Ie),{shift:Re,placedGlyphBoxes:Ze}):void 0},Lr.prototype.placeLayerBucketPart=function(o,a,s){var u=this,P=o.parameters,W=P.bucket,$=P.layout,gt=P.posMatrix,Dt=P.textLabelPlaneMatrix,Ht=P.labelToScreenMatrix,re=P.textPixelRatio,le=P.holdingForFade,de=P.collisionBoxArray,Ie=P.partiallyEvaluatedTextSize,Pe=P.collisionGroup,Oe=$.get("text-optional"),Se=$.get("icon-optional"),Re=$.get("text-allow-overlap"),Ze=$.get("icon-allow-overlap"),si="map"===$.get("text-rotation-alignment"),bi="map"===$.get("text-pitch-alignment"),mi="none"!==$.get("icon-text-fit"),wi="viewport-y"===$.get("symbol-z-order"),Ri=Re&&(Ze||!W.hasIconData()||Se),$i=Ze&&(Re||!W.hasTextData()||Oe);!W.collisionArrays&&de&&W.deserializeCollisionBoxes(de);var Xi=function(un,to){if(!a[un.crossTileID])if(le)u.placements[un.crossTileID]=new oa(!1,!1,!1);else{var yo,Kn=!1,qn=!1,mo=!0,$n=null,Vn={box:null,offscreen:null},Ss={box:null,offscreen:null},es=null,Zs=null,Ts=0,kr=0,Ur=0;to.textFeatureIndex?Ts=to.textFeatureIndex:un.useRuntimeCollisionCircles&&(Ts=un.featureIndex),to.verticalTextFeatureIndex&&(kr=to.verticalTextFeatureIndex);var Fr=to.textBox;if(Fr){var ia=function(ot){var ct=l.WritingMode.horizontal;if(W.allowVerticalPlacement&&!ot&&u.prevPlacement){var Pt=u.prevPlacement.placedOrientations[un.crossTileID];Pt&&(u.placedOrientations[un.crossTileID]=Pt,u.markUsedOrientation(W,ct=Pt,un))}return ct},tl=function(ot,ct){if(W.allowVerticalPlacement&&un.numVerticalGlyphVertices>0&&to.verticalTextBox)for(var Pt=0,Mt=W.writingModes;Pt<Mt.length&&(Mt[Pt]===l.WritingMode.vertical?(Vn=ct(),Ss=Vn):Vn=ot(),!(Vn&&Vn.box&&Vn.box.length));Pt+=1);else Vn=ot()};if($.get("text-variable-anchor")){var na=$.get("text-variable-anchor");if(u.prevPlacement&&u.prevPlacement.variableOffsets[un.crossTileID]){var Da=u.prevPlacement.variableOffsets[un.crossTileID];na.indexOf(Da.anchor)>0&&(na=na.filter(function(ot){return ot!==Da.anchor})).unshift(Da.anchor)}var Pa=function(ot,ct,Pt){for(var Mt=ot.x2-ot.x1,Vt=ot.y2-ot.y1,Qt=un.textBoxScale,ue=mi&&!Ze?ct:null,ge={box:[],offscreen:!1},Ae=Re?2*na.length:na.length,Ue=0;Ue<Ae;++Ue){var Je=u.attemptAnchorPlacement(na[Ue%na.length],ot,Mt,Vt,Qt,si,bi,re,gt,Pe,Ue>=na.length,un,W,Pt,ue);if(Je&&(ge=Je.placedGlyphBoxes)&&ge.box&&ge.box.length){Kn=!0,$n=Je.shift;break}}return ge};tl(function(){return Pa(Fr,to.iconBox,l.WritingMode.horizontal)},function(){var ot=to.verticalTextBox;return W.allowVerticalPlacement&&!(Vn&&Vn.box&&Vn.box.length)&&un.numVerticalGlyphVertices>0&&ot?Pa(ot,to.verticalIconBox,l.WritingMode.vertical):{box:null,offscreen:null}}),Vn&&(Kn=Vn.box,mo=Vn.offscreen);var el=ia(Vn&&Vn.box);if(!Kn&&u.prevPlacement){var il=u.prevPlacement.variableOffsets[un.crossTileID];il&&(u.variableOffsets[un.crossTileID]=il,u.markUsedJustification(W,il.anchor,un,el))}}else{var Wa=function(ot,ct){var Pt=u.collisionIndex.placeCollisionBox(ot,Re,re,gt,Pe.predicate);return Pt&&Pt.box&&Pt.box.length&&(u.markUsedOrientation(W,ct,un),u.placedOrientations[un.crossTileID]=ct),Pt};tl(function(){return Wa(Fr,l.WritingMode.horizontal)},function(){var ot=to.verticalTextBox;return W.allowVerticalPlacement&&un.numVerticalGlyphVertices>0&&ot?Wa(ot,l.WritingMode.vertical):{box:null,offscreen:null}}),ia(Vn&&Vn.box&&Vn.box.length)}}if(Kn=(yo=Vn)&&yo.box&&yo.box.length>0,mo=yo&&yo.offscreen,un.useRuntimeCollisionCircles){var ml=W.text.placedSymbolArray.get(un.centerJustifiedTextSymbolIndex),p=l.evaluateSizeForFeature(W.textSizeData,Ie,ml),n=$.get("text-padding");es=u.collisionIndex.placeCollisionCircles(Re,ml,W.lineVertexArray,W.glyphOffsetArray,p,gt,Dt,Ht,s,bi,Pe.predicate,un.collisionCircleDiameter,n),Kn=Re||es.circles.length>0&&!es.collisionDetected,mo=mo&&es.offscreen}if(to.iconFeatureIndex&&(Ur=to.iconFeatureIndex),to.iconBox){var h=function(ot){var ct=mi&&$n?Ro(ot,$n.x,$n.y,si,bi,u.transform.angle):ot;return u.collisionIndex.placeCollisionBox(ct,Ze,re,gt,Pe.predicate)};qn=Ss&&Ss.box&&Ss.box.length&&to.verticalIconBox?(Zs=h(to.verticalIconBox)).box.length>0:(Zs=h(to.iconBox)).box.length>0,mo=mo&&Zs.offscreen}var d=Oe||0===un.numHorizontalGlyphVertices&&0===un.numVerticalGlyphVertices,g=Se||0===un.numIconVertices;if(d||g?g?d||(qn=qn&&Kn):Kn=qn&&Kn:qn=Kn=qn&&Kn,Kn&&yo&&yo.box&&u.collisionIndex.insertCollisionBox(yo.box,$.get("text-ignore-placement"),W.bucketInstanceId,Ss&&Ss.box&&kr?kr:Ts,Pe.ID),qn&&Zs&&u.collisionIndex.insertCollisionBox(Zs.box,$.get("icon-ignore-placement"),W.bucketInstanceId,Ur,Pe.ID),es&&(Kn&&u.collisionIndex.insertCollisionCircles(es.circles,$.get("text-ignore-placement"),W.bucketInstanceId,Ts,Pe.ID),s)){var C=W.bucketInstanceId,D=u.collisionCircleArrays[C];void 0===D&&(D=u.collisionCircleArrays[C]=new Mr);for(var J=0;J<es.circles.length;J+=4)D.circles.push(es.circles[J+0]),D.circles.push(es.circles[J+1]),D.circles.push(es.circles[J+2]),D.circles.push(es.collisionDetected?1:0)}u.placements[un.crossTileID]=new oa(Kn||Ri,qn||$i,mo||W.justReloaded),a[un.crossTileID]=!0}};if(wi)for(var fn=W.getSortedSymbolIndexes(this.transform.angle),Mn=fn.length-1;Mn>=0;--Mn){var zn=fn[Mn];Xi(W.symbolInstances.get(zn),W.collisionArrays[zn])}else for(var Ln=o.symbolInstanceStart;Ln<o.symbolInstanceEnd;Ln++)Xi(W.symbolInstances.get(Ln),W.collisionArrays[Ln]);if(s&&W.bucketInstanceId in this.collisionCircleArrays){var Wo=this.collisionCircleArrays[W.bucketInstanceId];l.invert(Wo.invProjMatrix,gt),Wo.viewportMatrix=this.collisionIndex.getViewportMatrix()}W.justReloaded=!1},Lr.prototype.markUsedJustification=function(o,a,s,u){var P;P=u===l.WritingMode.vertical?s.verticalPlacedTextSymbolIndex:{left:s.leftJustifiedTextSymbolIndex,center:s.centerJustifiedTextSymbolIndex,right:s.rightJustifiedTextSymbolIndex}[l.getAnchorJustification(a)];for(var W=0,$=[s.leftJustifiedTextSymbolIndex,s.centerJustifiedTextSymbolIndex,s.rightJustifiedTextSymbolIndex,s.verticalPlacedTextSymbolIndex];W<$.length;W+=1){var gt=$[W];gt>=0&&(o.text.placedSymbolArray.get(gt).crossTileID=P>=0&&gt!==P?0:s.crossTileID)}},Lr.prototype.markUsedOrientation=function(o,a,s){for(var u=a===l.WritingMode.horizontal||a===l.WritingMode.horizontalOnly?a:0,P=a===l.WritingMode.vertical?a:0,W=0,$=[s.leftJustifiedTextSymbolIndex,s.centerJustifiedTextSymbolIndex,s.rightJustifiedTextSymbolIndex];W<$.length;W+=1)o.text.placedSymbolArray.get($[W]).placedOrientation=u;s.verticalPlacedTextSymbolIndex&&(o.text.placedSymbolArray.get(s.verticalPlacedTextSymbolIndex).placedOrientation=P)},Lr.prototype.commit=function(o){this.commitTime=o,this.zoomAtLastRecencyCheck=this.transform.zoom;var a=this.prevPlacement,s=!1;this.prevZoomAdjustment=a?a.zoomAdjustment(this.transform.zoom):0;var u=a?a.symbolFadeChange(o):1,P=a?a.opacities:{},W=a?a.variableOffsets:{},$=a?a.placedOrientations:{};for(var gt in this.placements){var Dt=this.placements[gt],Ht=P[gt];Ht?(this.opacities[gt]=new is(Ht,u,Dt.text,Dt.icon),s=s||Dt.text!==Ht.text.placed||Dt.icon!==Ht.icon.placed):(this.opacities[gt]=new is(null,u,Dt.text,Dt.icon,Dt.skipFade),s=s||Dt.text||Dt.icon)}for(var re in P){var le=P[re];if(!this.opacities[re]){var de=new is(le,u,!1,!1);de.isHidden()||(this.opacities[re]=de,s=s||le.text.placed||le.icon.placed)}}for(var Ie in W)this.variableOffsets[Ie]||!this.opacities[Ie]||this.opacities[Ie].isHidden()||(this.variableOffsets[Ie]=W[Ie]);for(var Pe in $)this.placedOrientations[Pe]||!this.opacities[Pe]||this.opacities[Pe].isHidden()||(this.placedOrientations[Pe]=$[Pe]);s?this.lastPlacementChangeTime=o:"number"!=typeof this.lastPlacementChangeTime&&(this.lastPlacementChangeTime=a?a.lastPlacementChangeTime:o)},Lr.prototype.updateLayerOpacities=function(o,a){for(var s={},u=0,P=a;u<P.length;u+=1){var W=P[u],$=W.getBucket(o);$&&W.latestFeatureIndex&&o.id===$.layerIds[0]&&this.updateBucketOpacities($,s,W.collisionBoxArray)}},Lr.prototype.updateBucketOpacities=function(o,a,s){var u=this;o.hasTextData()&&o.text.opacityVertexArray.clear(),o.hasIconData()&&o.icon.opacityVertexArray.clear(),o.hasIconCollisionBoxData()&&o.iconCollisionBox.collisionVertexArray.clear(),o.hasTextCollisionBoxData()&&o.textCollisionBox.collisionVertexArray.clear();var P=o.layers[0].layout,W=new is(null,0,!1,!1,!0),$=P.get("text-allow-overlap"),gt=P.get("icon-allow-overlap"),Dt=P.get("text-variable-anchor"),Ht="map"===P.get("text-rotation-alignment"),re="map"===P.get("text-pitch-alignment"),le="none"!==P.get("icon-text-fit"),de=new is(null,0,$&&(gt||!o.hasIconData()||P.get("icon-optional")),gt&&($||!o.hasTextData()||P.get("text-optional")),!0);!o.collisionArrays&&s&&(o.hasIconCollisionBoxData()||o.hasTextCollisionBoxData())&&o.deserializeCollisionBoxes(s);for(var Ie=function(Re,Ze,si){for(var bi=0;bi<Ze/4;bi++)Re.opacityVertexArray.emplaceBack(si)},Pe=function(Re){var Ze=o.symbolInstances.get(Re),si=Ze.numHorizontalGlyphVertices,bi=Ze.numVerticalGlyphVertices,mi=Ze.crossTileID,wi=u.opacities[mi];a[mi]?wi=W:wi||(u.opacities[mi]=wi=de),a[mi]=!0;var Ri=Ze.numIconVertices>0,$i=u.placedOrientations[Ze.crossTileID],Xi=$i===l.WritingMode.vertical,fn=$i===l.WritingMode.horizontal||$i===l.WritingMode.horizontalOnly;if(si>0||bi>0){var Mn=tt(wi.text);Ie(o.text,si,Xi?yt:Mn),Ie(o.text,bi,fn?yt:Mn);var zn=wi.text.isHidden();[Ze.rightJustifiedTextSymbolIndex,Ze.centerJustifiedTextSymbolIndex,Ze.leftJustifiedTextSymbolIndex].forEach(function(Vn){Vn>=0&&(o.text.placedSymbolArray.get(Vn).hidden=zn||Xi?1:0)}),Ze.verticalPlacedTextSymbolIndex>=0&&(o.text.placedSymbolArray.get(Ze.verticalPlacedTextSymbolIndex).hidden=zn||fn?1:0);var Ln=u.variableOffsets[Ze.crossTileID];Ln&&u.markUsedJustification(o,Ln.anchor,Ze,$i);var Wo=u.placedOrientations[Ze.crossTileID];Wo&&(u.markUsedJustification(o,"left",Ze,Wo),u.markUsedOrientation(o,Wo,Ze))}if(Ri){var un=tt(wi.icon),to=!(le&&Ze.verticalPlacedIconSymbolIndex&&Xi);Ze.placedIconSymbolIndex>=0&&(Ie(o.icon,Ze.numIconVertices,to?un:yt),o.icon.placedSymbolArray.get(Ze.placedIconSymbolIndex).hidden=wi.icon.isHidden()),Ze.verticalPlacedIconSymbolIndex>=0&&(Ie(o.icon,Ze.numVerticalIconVertices,to?yt:un),o.icon.placedSymbolArray.get(Ze.verticalPlacedIconSymbolIndex).hidden=wi.icon.isHidden())}if(o.hasIconCollisionBoxData()||o.hasTextCollisionBoxData()){var yo=o.collisionArrays[Re];if(yo){var Kn=new l.Point(0,0);if(yo.textBox||yo.verticalTextBox){var qn=!0;if(Dt){var mo=u.variableOffsets[mi];mo?(Kn=Lo(mo.anchor,mo.width,mo.height,mo.textOffset,mo.textBoxScale),Ht&&Kn._rotate(re?u.transform.angle:-u.transform.angle)):qn=!1}yo.textBox&&ks(o.textCollisionBox.collisionVertexArray,wi.text.placed,!qn||Xi,Kn.x,Kn.y),yo.verticalTextBox&&ks(o.textCollisionBox.collisionVertexArray,wi.text.placed,!qn||fn,Kn.x,Kn.y)}var $n=Boolean(!fn&&yo.verticalIconBox);yo.iconBox&&ks(o.iconCollisionBox.collisionVertexArray,wi.icon.placed,$n,le?Kn.x:0,le?Kn.y:0),yo.verticalIconBox&&ks(o.iconCollisionBox.collisionVertexArray,wi.icon.placed,!$n,le?Kn.x:0,le?Kn.y:0)}}},Oe=0;Oe<o.symbolInstances.length;Oe++)Pe(Oe);if(o.sortFeatures(this.transform.angle),this.retainedQueryData[o.bucketInstanceId]&&(this.retainedQueryData[o.bucketInstanceId].featureSortOrder=o.featureSortOrder),o.hasTextData()&&o.text.opacityVertexBuffer&&o.text.opacityVertexBuffer.updateData(o.text.opacityVertexArray),o.hasIconData()&&o.icon.opacityVertexBuffer&&o.icon.opacityVertexBuffer.updateData(o.icon.opacityVertexArray),o.hasIconCollisionBoxData()&&o.iconCollisionBox.collisionVertexBuffer&&o.iconCollisionBox.collisionVertexBuffer.updateData(o.iconCollisionBox.collisionVertexArray),o.hasTextCollisionBoxData()&&o.textCollisionBox.collisionVertexBuffer&&o.textCollisionBox.collisionVertexBuffer.updateData(o.textCollisionBox.collisionVertexArray),o.bucketInstanceId in this.collisionCircleArrays){var Se=this.collisionCircleArrays[o.bucketInstanceId];o.placementInvProjMatrix=Se.invProjMatrix,o.placementViewportMatrix=Se.viewportMatrix,o.collisionCircleArray=Se.circles,delete this.collisionCircleArrays[o.bucketInstanceId]}},Lr.prototype.symbolFadeChange=function(o){return 0===this.fadeDuration?1:(o-this.commitTime)/this.fadeDuration+this.prevZoomAdjustment},Lr.prototype.zoomAdjustment=function(o){return Math.max(0,(this.transform.zoom-o)/1.5)},Lr.prototype.hasTransitions=function(o){return this.stale||o-this.lastPlacementChangeTime<this.fadeDuration},Lr.prototype.stillRecent=function(o,a){var s=this.zoomAtLastRecencyCheck===a?1-this.zoomAdjustment(a):1;return this.zoomAtLastRecencyCheck=a,this.commitTime+this.fadeDuration*s>o},Lr.prototype.setStale=function(){this.stale=!0};var us=Math.pow(2,25),Js=Math.pow(2,24),ss=Math.pow(2,17),za=Math.pow(2,16),sa=Math.pow(2,9),Ya=Math.pow(2,8),E=Math.pow(2,1);function tt(o){if(0===o.opacity&&!o.placed)return 0;if(1===o.opacity&&o.placed)return 4294967295;var a=o.placed?1:0,s=Math.floor(127*o.opacity);return s*us+a*Js+s*ss+a*za+s*sa+a*Ya+s*E+a}var yt=0,St=function(o){this._sortAcrossTiles="viewport-y"!==o.layout.get("symbol-z-order")&&void 0!==o.layout.get("symbol-sort-key").constantOr(1),this._currentTileIndex=0,this._currentPartIndex=0,this._seenCrossTileIDs={},this._bucketParts=[]};St.prototype.continuePlacement=function(o,a,s,u,P){for(var W=this._bucketParts;this._currentTileIndex<o.length;)if(a.getBucketParts(W,u,o[this._currentTileIndex],this._sortAcrossTiles),this._currentTileIndex++,P())return!0;for(this._sortAcrossTiles&&(this._sortAcrossTiles=!1,W.sort(function($,gt){return $.sortKey-gt.sortKey}));this._currentPartIndex<W.length;)if(a.placeLayerBucketPart(W[this._currentPartIndex],this._seenCrossTileIDs,s),this._currentPartIndex++,P())return!0;return!1};var Zt=function(o,a,s,u,P,W,$){this.placement=new Lr(o,P,W,$),this._currentPlacementIndex=a.length-1,this._forceFullPlacement=s,this._showCollisionBoxes=u,this._done=!1};Zt.prototype.isDone=function(){return this._done},Zt.prototype.continuePlacement=function(o,a,s){for(var u=this,P=l.browser.now(),W=function(){var Dt=l.browser.now()-P;return!u._forceFullPlacement&&Dt>2};this._currentPlacementIndex>=0;){var $=a[o[this._currentPlacementIndex]],gt=this.placement.collisionIndex.transform.zoom;if("symbol"===$.type&&(!$.minzoom||$.minzoom<=gt)&&(!$.maxzoom||$.maxzoom>gt)){if(this._inProgressLayer||(this._inProgressLayer=new St($)),this._inProgressLayer.continuePlacement(s[$.source],this.placement,this._showCollisionBoxes,$,W))return;delete this._inProgressLayer}this._currentPlacementIndex--}this._done=!0},Zt.prototype.commit=function(o){return this.placement.commit(o),this.placement};var ne=512/l.EXTENT/2,fe=function(o,a,s){this.tileID=o,this.indexedSymbolInstances={},this.bucketInstanceId=s;for(var u=0;u<a.length;u++){var P=a.get(u),W=P.key;this.indexedSymbolInstances[W]||(this.indexedSymbolInstances[W]=[]),this.indexedSymbolInstances[W].push({crossTileID:P.crossTileID,coord:this.getScaledCoordinates(P,o)})}};fe.prototype.getScaledCoordinates=function(o,a){var s=ne/Math.pow(2,a.canonical.z-this.tileID.canonical.z);return{x:Math.floor((a.canonical.x*l.EXTENT+o.anchorX)*s),y:Math.floor((a.canonical.y*l.EXTENT+o.anchorY)*s)}},fe.prototype.findMatches=function(o,a,s){for(var u=this.tileID.canonical.z<a.canonical.z?1:Math.pow(2,this.tileID.canonical.z-a.canonical.z),P=0;P<o.length;P++){var W=o.get(P);if(!W.crossTileID){var $=this.indexedSymbolInstances[W.key];if($)for(var gt=this.getScaledCoordinates(W,a),Dt=0,Ht=$;Dt<Ht.length;Dt+=1){var re=Ht[Dt];if(Math.abs(re.coord.x-gt.x)<=u&&Math.abs(re.coord.y-gt.y)<=u&&!s[re.crossTileID]){s[re.crossTileID]=!0,W.crossTileID=re.crossTileID;break}}}}};var Be=function(){this.maxCrossTileID=0};Be.prototype.generate=function(){return++this.maxCrossTileID};var je=function(){this.indexes={},this.usedCrossTileIDs={},this.lng=0};je.prototype.handleWrapJump=function(o){var a=Math.round((o-this.lng)/360);if(0!==a)for(var s in this.indexes){var u=this.indexes[s],P={};for(var W in u){var $=u[W];$.tileID=$.tileID.unwrapTo($.tileID.wrap+a),P[$.tileID.key]=$}this.indexes[s]=P}this.lng=o},je.prototype.addBucket=function(o,a,s){if(this.indexes[o.overscaledZ]&&this.indexes[o.overscaledZ][o.key]){if(this.indexes[o.overscaledZ][o.key].bucketInstanceId===a.bucketInstanceId)return!1;this.removeBucketCrossTileIDs(o.overscaledZ,this.indexes[o.overscaledZ][o.key])}for(var u=0;u<a.symbolInstances.length;u++)a.symbolInstances.get(u).crossTileID=0;this.usedCrossTileIDs[o.overscaledZ]||(this.usedCrossTileIDs[o.overscaledZ]={});var P=this.usedCrossTileIDs[o.overscaledZ];for(var W in this.indexes){var $=this.indexes[W];if(Number(W)>o.overscaledZ)for(var gt in $){var Dt=$[gt];Dt.tileID.isChildOf(o)&&Dt.findMatches(a.symbolInstances,o,P)}else{var Ht=$[o.scaledTo(Number(W)).key];Ht&&Ht.findMatches(a.symbolInstances,o,P)}}for(var re=0;re<a.symbolInstances.length;re++){var le=a.symbolInstances.get(re);le.crossTileID||(le.crossTileID=s.generate(),P[le.crossTileID]=!0)}return void 0===this.indexes[o.overscaledZ]&&(this.indexes[o.overscaledZ]={}),this.indexes[o.overscaledZ][o.key]=new fe(o,a.symbolInstances,a.bucketInstanceId),!0},je.prototype.removeBucketCrossTileIDs=function(o,a){for(var s in a.indexedSymbolInstances)for(var u=0,P=a.indexedSymbolInstances[s];u<P.length;u+=1)delete this.usedCrossTileIDs[o][P[u].crossTileID]},je.prototype.removeStaleBuckets=function(o){var a=!1;for(var s in this.indexes){var u=this.indexes[s];for(var P in u)o[u[P].bucketInstanceId]||(this.removeBucketCrossTileIDs(s,u[P]),delete u[P],a=!0)}return a};var ei=function(){this.layerIndexes={},this.crossTileIDs=new Be,this.maxBucketInstanceId=0,this.bucketsInCurrentPlacement={}};ei.prototype.addLayer=function(o,a,s){var u=this.layerIndexes[o.id];void 0===u&&(u=this.layerIndexes[o.id]=new je);var P=!1,W={};u.handleWrapJump(s);for(var $=0,gt=a;$<gt.length;$+=1){var Dt=gt[$],Ht=Dt.getBucket(o);Ht&&o.id===Ht.layerIds[0]&&(Ht.bucketInstanceId||(Ht.bucketInstanceId=++this.maxBucketInstanceId),u.addBucket(Dt.tileID,Ht,this.crossTileIDs)&&(P=!0),W[Ht.bucketInstanceId]=!0)}return u.removeStaleBuckets(W)&&(P=!0),P},ei.prototype.pruneUnusedLayers=function(o){var a={};for(var s in o.forEach(function(u){a[u]=!0}),this.layerIndexes)a[s]||delete this.layerIndexes[s]};var vi=function(o,a){return l.emitValidationErrors(o,a&&a.filter(function(s){return"source.canvas"!==s.identifier}))},Li=l.pick(Ki,["addLayer","removeLayer","setPaintProperty","setLayoutProperty","setFilter","addSource","removeSource","setLayerZoomRange","setLight","setTransition","setGeoJSONSourceData"]),ci=l.pick(Ki,["setCenter","setZoom","setBearing","setPitch"]),ui=function(){var o={},a=l.styleSpec.$version;for(var s in l.styleSpec.$root){var u,P=l.styleSpec.$root[s];P.required&&null!=(u="version"===s?a:"array"===P.type?[]:{})&&(o[s]=u)}return o}(),an=function(o){function a(s,u){var P=this;void 0===u&&(u={}),o.call(this),this.map=s,this.dispatcher=new Lt(yi(),this),this.imageManager=new H,this.imageManager.setEventedParent(this),this.glyphManager=new pt(s._requestManager,u.localIdeographFontFamily),this.lineAtlas=new ht(256,512),this.crossTileSymbolIndex=new ei,this._layers={},this._serializedLayers={},this._order=[],this.sourceCaches={},this.zoomHistory=new l.ZoomHistory,this._loaded=!1,this._availableImages=[],this._resetUpdates(),this.dispatcher.broadcast("setReferrer",l.getReferrer());var W=this;this._rtlTextPluginCallback=a.registerForPluginStateChange(function($){W.dispatcher.broadcast("syncRTLPluginState",{pluginStatus:$.pluginStatus,pluginURL:$.pluginURL},function(gt,Dt){if(l.triggerPluginCompletionEvent(gt),Dt&&Dt.every(function(re){return re}))for(var Ht in W.sourceCaches)W.sourceCaches[Ht].reload()})}),this.on("data",function($){if("source"===$.dataType&&"metadata"===$.sourceDataType){var gt=P.sourceCaches[$.sourceId];if(gt){var Dt=gt.getSource();if(Dt&&Dt.vectorLayerIds)for(var Ht in P._layers){var re=P._layers[Ht];re.source===Dt.id&&P._validateLayer(re)}}}})}return o&&(a.__proto__=o),(a.prototype=Object.create(o&&o.prototype)).constructor=a,a.prototype.loadURL=function(s,u){var P=this;void 0===u&&(u={}),this.fire(new l.Event("dataloading",{dataType:"style"}));var W="boolean"==typeof u.validate?u.validate:!l.isMapboxURL(s);s=this.map._requestManager.normalizeStyleURL(s,u.accessToken);var $=this.map._requestManager.transformRequest(s,l.ResourceType.Style);this._request=l.getJSON($,function(gt,Dt){P._request=null,gt?P.fire(new l.ErrorEvent(gt)):Dt&&P._load(Dt,W)})},a.prototype.loadJSON=function(s,u){var P=this;void 0===u&&(u={}),this.fire(new l.Event("dataloading",{dataType:"style"})),this._request=l.browser.frame(function(){P._request=null,P._load(s,!1!==u.validate)})},a.prototype.loadEmpty=function(){this.fire(new l.Event("dataloading",{dataType:"style"})),this._load(ui,!1)},a.prototype._load=function(s,u){if(!u||!vi(this,l.validateStyle(s))){for(var P in this._loaded=!0,this.stylesheet=s,s.sources)this.addSource(P,s.sources[P],{validate:!1});s.sprite?this._loadSprite(s.sprite):this.imageManager.setLoaded(!0),this.glyphManager.setURL(s.glyphs);var W=Yi(this.stylesheet.layers);this._order=W.map(function(Ht){return Ht.id}),this._layers={},this._serializedLayers={};for(var $=0,gt=W;$<gt.length;$+=1){var Dt=gt[$];(Dt=l.createStyleLayer(Dt)).setEventedParent(this,{layer:{id:Dt.id}}),this._layers[Dt.id]=Dt,this._serializedLayers[Dt.id]=Dt.serialize()}this.dispatcher.broadcast("setLayers",this._serializeLayers(this._order)),this.light=new lt(this.stylesheet.light),this.fire(new l.Event("data",{dataType:"style"})),this.fire(new l.Event("style.load"))}},a.prototype._loadSprite=function(s){var u=this;this._spriteRequest=function(P,W,$){var gt,Dt,Ht,re=l.browser.devicePixelRatio>1?"@2x":"",le=l.getJSON(W.transformRequest(W.normalizeSpriteURL(P,re,".json"),l.ResourceType.SpriteJSON),function(Pe,Oe){le=null,Ht||(Ht=Pe,gt=Oe,Ie())}),de=l.getImage(W.transformRequest(W.normalizeSpriteURL(P,re,".png"),l.ResourceType.SpriteImage),function(Pe,Oe){de=null,Ht||(Ht=Pe,Dt=Oe,Ie())});function Ie(){if(Ht)$(Ht);else if(gt&&Dt){var Pe=l.browser.getImageData(Dt),Oe={};for(var Se in gt){var Re=gt[Se],Ze=Re.width,si=Re.height,bi=Re.x,mi=Re.y,wi=Re.sdf,Ri=Re.pixelRatio,$i=Re.stretchX,Xi=Re.stretchY,fn=Re.content,Mn=new l.RGBAImage({width:Ze,height:si});l.RGBAImage.copy(Pe,Mn,{x:bi,y:mi},{x:0,y:0},{width:Ze,height:si}),Oe[Se]={data:Mn,pixelRatio:Ri,sdf:wi,stretchX:$i,stretchY:Xi,content:fn}}$(null,Oe)}}return{cancel:function(){le&&(le.cancel(),le=null),de&&(de.cancel(),de=null)}}}(s,this.map._requestManager,function(P,W){if(u._spriteRequest=null,P)u.fire(new l.ErrorEvent(P));else if(W)for(var $ in W)u.imageManager.addImage($,W[$]);u.imageManager.setLoaded(!0),u._availableImages=u.imageManager.listImages(),u.dispatcher.broadcast("setImages",u._availableImages),u.fire(new l.Event("data",{dataType:"style"}))})},a.prototype._validateLayer=function(s){var u=this.sourceCaches[s.source];if(u){var P=s.sourceLayer;if(P){var W=u.getSource();("geojson"===W.type||W.vectorLayerIds&&-1===W.vectorLayerIds.indexOf(P))&&this.fire(new l.ErrorEvent(new Error('Source layer "'+P+'" does not exist on source "'+W.id+'" as specified by style layer "'+s.id+'"')))}}},a.prototype.loaded=function(){if(!this._loaded||Object.keys(this._updatedSources).length)return!1;for(var s in this.sourceCaches)if(!this.sourceCaches[s].loaded())return!1;return!!this.imageManager.isLoaded()},a.prototype._serializeLayers=function(s){for(var u=[],P=0,W=s;P<W.length;P+=1){var $=this._layers[W[P]];"custom"!==$.type&&u.push($.serialize())}return u},a.prototype.hasTransitions=function(){if(this.light&&this.light.hasTransition())return!0;for(var s in this.sourceCaches)if(this.sourceCaches[s].hasTransition())return!0;for(var u in this._layers)if(this._layers[u].hasTransition())return!0;return!1},a.prototype._checkLoaded=function(){if(!this._loaded)throw new Error("Style is not done loading")},a.prototype.update=function(s){if(this._loaded){var u=this._changed;if(this._changed){var P=Object.keys(this._updatedLayers),W=Object.keys(this._removedLayers);for(var $ in(P.length||W.length)&&this._updateWorkerLayers(P,W),this._updatedSources){var gt=this._updatedSources[$];"reload"===gt?this._reloadSource($):"clear"===gt&&this._clearSource($)}for(var Dt in this._updateTilesForChangedImages(),this._updatedPaintProps)this._layers[Dt].updateTransitions(s);this.light.updateTransitions(s),this._resetUpdates()}var Ht={};for(var re in this.sourceCaches){var le=this.sourceCaches[re];Ht[re]=le.used,le.used=!1}for(var de=0,Ie=this._order;de<Ie.length;de+=1){var Pe=this._layers[Ie[de]];Pe.recalculate(s,this._availableImages),!Pe.isHidden(s.zoom)&&Pe.source&&(this.sourceCaches[Pe.source].used=!0)}for(var Oe in Ht){var Se=this.sourceCaches[Oe];Ht[Oe]!==Se.used&&Se.fire(new l.Event("data",{sourceDataType:"visibility",dataType:"source",sourceId:Oe}))}this.light.recalculate(s),this.z=s.zoom,u&&this.fire(new l.Event("data",{dataType:"style"}))}},a.prototype._updateTilesForChangedImages=function(){var s=Object.keys(this._changedImages);if(s.length){for(var u in this.sourceCaches)this.sourceCaches[u].reloadTilesForDependencies(["icons","patterns"],s);this._changedImages={}}},a.prototype._updateWorkerLayers=function(s,u){this.dispatcher.broadcast("updateLayers",{layers:this._serializeLayers(s),removedIds:u})},a.prototype._resetUpdates=function(){this._changed=!1,this._updatedLayers={},this._removedLayers={},this._updatedSources={},this._updatedPaintProps={},this._changedImages={}},a.prototype.setState=function(s){var u=this;if(this._checkLoaded(),vi(this,l.validateStyle(s)))return!1;(s=l.clone$1(s)).layers=Yi(s.layers);var P=function($,gt){if(!$)return[{command:Ki.setStyle,args:[gt]}];var Dt=[];try{if(!l.deepEqual($.version,gt.version))return[{command:Ki.setStyle,args:[gt]}];l.deepEqual($.center,gt.center)||Dt.push({command:Ki.setCenter,args:[gt.center]}),l.deepEqual($.zoom,gt.zoom)||Dt.push({command:Ki.setZoom,args:[gt.zoom]}),l.deepEqual($.bearing,gt.bearing)||Dt.push({command:Ki.setBearing,args:[gt.bearing]}),l.deepEqual($.pitch,gt.pitch)||Dt.push({command:Ki.setPitch,args:[gt.pitch]}),l.deepEqual($.sprite,gt.sprite)||Dt.push({command:Ki.setSprite,args:[gt.sprite]}),l.deepEqual($.glyphs,gt.glyphs)||Dt.push({command:Ki.setGlyphs,args:[gt.glyphs]}),l.deepEqual($.transition,gt.transition)||Dt.push({command:Ki.setTransition,args:[gt.transition]}),l.deepEqual($.light,gt.light)||Dt.push({command:Ki.setLight,args:[gt.light]});var Ht={},re=[];!function(de,Ie,Pe,Oe){var Se;for(Se in Ie=Ie||{},de=de||{})de.hasOwnProperty(Se)&&(Ie.hasOwnProperty(Se)||Vi(Se,Pe,Oe));for(Se in Ie)Ie.hasOwnProperty(Se)&&(de.hasOwnProperty(Se)?l.deepEqual(de[Se],Ie[Se])||("geojson"===de[Se].type&&"geojson"===Ie[Se].type&&Hn(de,Ie,Se)?Pe.push({command:Ki.setGeoJSONSourceData,args:[Se,Ie[Se].data]}):so(Se,Ie,Pe,Oe)):Nn(Se,Ie,Pe))}($.sources,gt.sources,re,Ht);var le=[];$.layers&&$.layers.forEach(function(de){Ht[de.source]?Dt.push({command:Ki.removeLayer,args:[de.id]}):le.push(de)}),Dt=Dt.concat(re),function(de,Ie,Pe){Ie=Ie||[];var Oe,Se,Re,Ze,si,bi,mi,wi=(de=de||[]).map(vo),Ri=Ie.map(vo),$i=de.reduce(Jn,{}),Xi=Ie.reduce(Jn,{}),fn=wi.slice(),Mn=Object.create(null);for(Oe=0,Se=0;Oe<wi.length;Oe++)Xi.hasOwnProperty(Re=wi[Oe])?Se++:(Pe.push({command:Ki.removeLayer,args:[Re]}),fn.splice(fn.indexOf(Re,Se),1));for(Oe=0,Se=0;Oe<Ri.length;Oe++)fn[fn.length-1-Oe]!==(Re=Ri[Ri.length-1-Oe])&&($i.hasOwnProperty(Re)?(Pe.push({command:Ki.removeLayer,args:[Re]}),fn.splice(fn.lastIndexOf(Re,fn.length-Se),1)):Se++,Pe.push({command:Ki.addLayer,args:[Xi[Re],bi=fn[fn.length-Oe]]}),fn.splice(fn.length-Oe,0,Re),Mn[Re]=!0);for(Oe=0;Oe<Ri.length;Oe++)if(Ze=$i[Re=Ri[Oe]],si=Xi[Re],!Mn[Re]&&!l.deepEqual(Ze,si))if(l.deepEqual(Ze.source,si.source)&&l.deepEqual(Ze["source-layer"],si["source-layer"])&&l.deepEqual(Ze.type,si.type)){for(mi in Gn(Ze.layout,si.layout,Pe,Re,null,Ki.setLayoutProperty),Gn(Ze.paint,si.paint,Pe,Re,null,Ki.setPaintProperty),l.deepEqual(Ze.filter,si.filter)||Pe.push({command:Ki.setFilter,args:[Re,si.filter]}),l.deepEqual(Ze.minzoom,si.minzoom)&&l.deepEqual(Ze.maxzoom,si.maxzoom)||Pe.push({command:Ki.setLayerZoomRange,args:[Re,si.minzoom,si.maxzoom]}),Ze)Ze.hasOwnProperty(mi)&&"layout"!==mi&&"paint"!==mi&&"filter"!==mi&&"metadata"!==mi&&"minzoom"!==mi&&"maxzoom"!==mi&&(0===mi.indexOf("paint.")?Gn(Ze[mi],si[mi],Pe,Re,mi.slice(6),Ki.setPaintProperty):l.deepEqual(Ze[mi],si[mi])||Pe.push({command:Ki.setLayerProperty,args:[Re,mi,si[mi]]}));for(mi in si)si.hasOwnProperty(mi)&&!Ze.hasOwnProperty(mi)&&"layout"!==mi&&"paint"!==mi&&"filter"!==mi&&"metadata"!==mi&&"minzoom"!==mi&&"maxzoom"!==mi&&(0===mi.indexOf("paint.")?Gn(Ze[mi],si[mi],Pe,Re,mi.slice(6),Ki.setPaintProperty):l.deepEqual(Ze[mi],si[mi])||Pe.push({command:Ki.setLayerProperty,args:[Re,mi,si[mi]]}))}else Pe.push({command:Ki.removeLayer,args:[Re]}),bi=fn[fn.lastIndexOf(Re)+1],Pe.push({command:Ki.addLayer,args:[si,bi]})}(le,gt.layers,Dt)}catch(de){console.warn("Unable to compute style diff:",de),Dt=[{command:Ki.setStyle,args:[gt]}]}return Dt}(this.serialize(),s).filter(function($){return!($.command in ci)});if(0===P.length)return!1;var W=P.filter(function($){return!($.command in Li)});if(W.length>0)throw new Error("Unimplemented: "+W.map(function($){return $.command}).join(", ")+".");return P.forEach(function($){"setTransition"!==$.command&&u[$.command].apply(u,$.args)}),this.stylesheet=s,!0},a.prototype.addImage=function(s,u){if(this.getImage(s))return this.fire(new l.ErrorEvent(new Error("An image with this name already exists.")));this.imageManager.addImage(s,u),this._afterImageUpdated(s)},a.prototype.updateImage=function(s,u){this.imageManager.updateImage(s,u)},a.prototype.getImage=function(s){return this.imageManager.getImage(s)},a.prototype.removeImage=function(s){if(!this.getImage(s))return this.fire(new l.ErrorEvent(new Error("No image with this name exists.")));this.imageManager.removeImage(s),this._afterImageUpdated(s)},a.prototype._afterImageUpdated=function(s){this._availableImages=this.imageManager.listImages(),this._changedImages[s]=!0,this._changed=!0,this.dispatcher.broadcast("setImages",this._availableImages),this.fire(new l.Event("data",{dataType:"style"}))},a.prototype.listImages=function(){return this._checkLoaded(),this.imageManager.listImages()},a.prototype.addSource=function(s,u,P){var W=this;if(void 0===P&&(P={}),this._checkLoaded(),void 0!==this.sourceCaches[s])throw new Error("There is already a source with this ID");if(!u.type)throw new Error("The type property must be defined, but only the following properties were given: "+Object.keys(u).join(", ")+".");if(!(["vector","raster","geojson","video","image"].indexOf(u.type)>=0&&this._validate(l.validateStyle.source,"sources."+s,u,null,P))){this.map&&this.map._collectResourceTiming&&(u.collectResourceTiming=!0);var $=this.sourceCaches[s]=new Ee(s,u,this.dispatcher);$.style=this,$.setEventedParent(this,function(){return{isSourceLoaded:W.loaded(),source:$.serialize(),sourceId:s}}),$.onAdd(this.map),this._changed=!0}},a.prototype.removeSource=function(s){if(this._checkLoaded(),void 0===this.sourceCaches[s])throw new Error("There is no source with this ID");for(var u in this._layers)if(this._layers[u].source===s)return this.fire(new l.ErrorEvent(new Error('Source "'+s+'" cannot be removed while layer "'+u+'" is using it.')));var P=this.sourceCaches[s];delete this.sourceCaches[s],delete this._updatedSources[s],P.fire(new l.Event("data",{sourceDataType:"metadata",dataType:"source",sourceId:s})),P.setEventedParent(null),P.clearTiles(),P.onRemove&&P.onRemove(this.map),this._changed=!0},a.prototype.setGeoJSONSourceData=function(s,u){this._checkLoaded(),this.sourceCaches[s].getSource().setData(u),this._changed=!0},a.prototype.getSource=function(s){return this.sourceCaches[s]&&this.sourceCaches[s].getSource()},a.prototype.addLayer=function(s,u,P){void 0===P&&(P={}),this._checkLoaded();var W=s.id;if(this.getLayer(W))this.fire(new l.ErrorEvent(new Error('Layer with id "'+W+'" already exists on this map')));else{var $;if("custom"===s.type){if(vi(this,l.validateCustomStyleLayer(s)))return;$=l.createStyleLayer(s)}else{if("object"==typeof s.source&&(this.addSource(W,s.source),s=l.clone$1(s),s=l.extend(s,{source:W})),this._validate(l.validateStyle.layer,"layers."+W,s,{arrayIndex:-1},P))return;$=l.createStyleLayer(s),this._validateLayer($),$.setEventedParent(this,{layer:{id:W}}),this._serializedLayers[$.id]=$.serialize()}var gt=u?this._order.indexOf(u):this._order.length;if(u&&-1===gt)this.fire(new l.ErrorEvent(new Error('Layer with id "'+u+'" does not exist on this map.')));else{if(this._order.splice(gt,0,W),this._layerOrderChanged=!0,this._layers[W]=$,this._removedLayers[W]&&$.source&&"custom"!==$.type){var Dt=this._removedLayers[W];delete this._removedLayers[W],Dt.type!==$.type?this._updatedSources[$.source]="clear":(this._updatedSources[$.source]="reload",this.sourceCaches[$.source].pause())}this._updateLayer($),$.onAdd&&$.onAdd(this.map)}}},a.prototype.moveLayer=function(s,u){if(this._checkLoaded(),this._changed=!0,this._layers[s]){if(s!==u){var P=this._order.indexOf(s);this._order.splice(P,1);var W=u?this._order.indexOf(u):this._order.length;u&&-1===W?this.fire(new l.ErrorEvent(new Error('Layer with id "'+u+'" does not exist on this map.'))):(this._order.splice(W,0,s),this._layerOrderChanged=!0)}}else this.fire(new l.ErrorEvent(new Error("The layer '"+s+"' does not exist in the map's style and cannot be moved.")))},a.prototype.removeLayer=function(s){this._checkLoaded();var u=this._layers[s];if(u){u.setEventedParent(null);var P=this._order.indexOf(s);this._order.splice(P,1),this._layerOrderChanged=!0,this._changed=!0,this._removedLayers[s]=u,delete this._layers[s],delete this._serializedLayers[s],delete this._updatedLayers[s],delete this._updatedPaintProps[s],u.onRemove&&u.onRemove(this.map)}else this.fire(new l.ErrorEvent(new Error("The layer '"+s+"' does not exist in the map's style and cannot be removed.")))},a.prototype.getLayer=function(s){return this._layers[s]},a.prototype.hasLayer=function(s){return s in this._layers},a.prototype.setLayerZoomRange=function(s,u,P){this._checkLoaded();var W=this.getLayer(s);W?W.minzoom===u&&W.maxzoom===P||(null!=u&&(W.minzoom=u),null!=P&&(W.maxzoom=P),this._updateLayer(W)):this.fire(new l.ErrorEvent(new Error("The layer '"+s+"' does not exist in the map's style and cannot have zoom extent.")))},a.prototype.setFilter=function(s,u,P){void 0===P&&(P={}),this._checkLoaded();var W=this.getLayer(s);if(W){if(!l.deepEqual(W.filter,u))return null==u?(W.filter=void 0,void this._updateLayer(W)):void(this._validate(l.validateStyle.filter,"layers."+W.id+".filter",u,null,P)||(W.filter=l.clone$1(u),this._updateLayer(W)))}else this.fire(new l.ErrorEvent(new Error("The layer '"+s+"' does not exist in the map's style and cannot be filtered.")))},a.prototype.getFilter=function(s){return l.clone$1(this.getLayer(s).filter)},a.prototype.setLayoutProperty=function(s,u,P,W){void 0===W&&(W={}),this._checkLoaded();var $=this.getLayer(s);$?l.deepEqual($.getLayoutProperty(u),P)||($.setLayoutProperty(u,P,W),this._updateLayer($)):this.fire(new l.ErrorEvent(new Error("The layer '"+s+"' does not exist in the map's style and cannot be styled.")))},a.prototype.getLayoutProperty=function(s,u){var P=this.getLayer(s);if(P)return P.getLayoutProperty(u);this.fire(new l.ErrorEvent(new Error("The layer '"+s+"' does not exist in the map's style.")))},a.prototype.setPaintProperty=function(s,u,P,W){void 0===W&&(W={}),this._checkLoaded();var $=this.getLayer(s);$?l.deepEqual($.getPaintProperty(u),P)||($.setPaintProperty(u,P,W)&&this._updateLayer($),this._changed=!0,this._updatedPaintProps[s]=!0):this.fire(new l.ErrorEvent(new Error("The layer '"+s+"' does not exist in the map's style and cannot be styled.")))},a.prototype.getPaintProperty=function(s,u){return this.getLayer(s).getPaintProperty(u)},a.prototype.setFeatureState=function(s,u){this._checkLoaded();var P=s.source,W=s.sourceLayer,$=this.sourceCaches[P];if(void 0!==$){var gt=$.getSource().type;"geojson"===gt&&W?this.fire(new l.ErrorEvent(new Error("GeoJSON sources cannot have a sourceLayer parameter."))):"vector"!==gt||W?(void 0===s.id&&this.fire(new l.ErrorEvent(new Error("The feature id parameter must be provided."))),$.setFeatureState(W,s.id,u)):this.fire(new l.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")))}else this.fire(new l.ErrorEvent(new Error("The source '"+P+"' does not exist in the map's style.")))},a.prototype.removeFeatureState=function(s,u){this._checkLoaded();var P=s.source,W=this.sourceCaches[P];if(void 0!==W){var $=W.getSource().type,gt="vector"===$?s.sourceLayer:void 0;"vector"!==$||gt?u&&"string"!=typeof s.id&&"number"!=typeof s.id?this.fire(new l.ErrorEvent(new Error("A feature id is required to remove its specific state property."))):W.removeFeatureState(gt,s.id,u):this.fire(new l.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")))}else this.fire(new l.ErrorEvent(new Error("The source '"+P+"' does not exist in the map's style.")))},a.prototype.getFeatureState=function(s){this._checkLoaded();var u=s.source,P=s.sourceLayer,W=this.sourceCaches[u];if(void 0!==W){if("vector"!==W.getSource().type||P)return void 0===s.id&&this.fire(new l.ErrorEvent(new Error("The feature id parameter must be provided."))),W.getFeatureState(P,s.id);this.fire(new l.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")))}else this.fire(new l.ErrorEvent(new Error("The source '"+u+"' does not exist in the map's style.")))},a.prototype.getTransition=function(){return l.extend({duration:300,delay:0},this.stylesheet&&this.stylesheet.transition)},a.prototype.serialize=function(){return l.filterObject({version:this.stylesheet.version,name:this.stylesheet.name,metadata:this.stylesheet.metadata,light:this.stylesheet.light,center:this.stylesheet.center,zoom:this.stylesheet.zoom,bearing:this.stylesheet.bearing,pitch:this.stylesheet.pitch,sprite:this.stylesheet.sprite,glyphs:this.stylesheet.glyphs,transition:this.stylesheet.transition,sources:l.mapObject(this.sourceCaches,function(s){return s.serialize()}),layers:this._serializeLayers(this._order)},function(s){return void 0!==s})},a.prototype._updateLayer=function(s){this._updatedLayers[s.id]=!0,s.source&&!this._updatedSources[s.source]&&"raster"!==this.sourceCaches[s.source].getSource().type&&(this._updatedSources[s.source]="reload",this.sourceCaches[s.source].pause()),this._changed=!0},a.prototype._flattenAndSortRenderedFeatures=function(s){for(var u=this,P=function($i){return"fill-extrusion"===u._layers[$i].type},W={},$=[],gt=this._order.length-1;gt>=0;gt--){var Dt=this._order[gt];if(P(Dt)){W[Dt]=gt;for(var Ht=0,re=s;Ht<re.length;Ht+=1){var le=re[Ht][Dt];if(le)for(var de=0,Ie=le;de<Ie.length;de+=1)$.push(Ie[de])}}}$.sort(function($i,Xi){return Xi.intersectionZ-$i.intersectionZ});for(var Pe=[],Oe=this._order.length-1;Oe>=0;Oe--){var Se=this._order[Oe];if(P(Se))for(var Re=$.length-1;Re>=0;Re--){var Ze=$[Re].feature;if(W[Ze.layer.id]<Oe)break;Pe.push(Ze),$.pop()}else for(var si=0,bi=s;si<bi.length;si+=1){var mi=bi[si][Se];if(mi)for(var wi=0,Ri=mi;wi<Ri.length;wi+=1)Pe.push(Ri[wi].feature)}}return Pe},a.prototype.queryRenderedFeatures=function(s,u,P){u&&u.filter&&this._validate(l.validateStyle.filter,"queryRenderedFeatures.filter",u.filter,null,u);var W={};if(u&&u.layers){if(!Array.isArray(u.layers))return this.fire(new l.ErrorEvent(new Error("parameters.layers must be an Array."))),[];for(var $=0,gt=u.layers;$<gt.length;$+=1){var Dt=gt[$],Ht=this._layers[Dt];if(!Ht)return this.fire(new l.ErrorEvent(new Error("The layer '"+Dt+"' does not exist in the map's style and cannot be queried for features."))),[];W[Ht.source]=!0}}var re=[];for(var le in u.availableImages=this._availableImages,this.sourceCaches)u.layers&&!W[le]||re.push(Kt(this.sourceCaches[le],this._layers,this._serializedLayers,s,u,P));return this.placement&&re.push(function(de,Ie,Pe,Oe,Se,Re,Ze){for(var si={},bi=Re.queryRenderedSymbols(Oe),mi=[],wi=0,Ri=Object.keys(bi).map(Number);wi<Ri.length;wi+=1)mi.push(Ze[Ri[wi]]);mi.sort(xe);for(var $i=function(){var Ln=fn[Xi],Wo=Ln.featureIndex.lookupSymbolFeatures(bi[Ln.bucketInstanceId],Ie,Ln.bucketIndex,Ln.sourceLayerIndex,Se.filter,Se.layers,Se.availableImages,de);for(var un in Wo){var to=si[un]=si[un]||[],yo=Wo[un];yo.sort(function(mo,$n){var Vn=Ln.featureSortOrder;if(Vn){var Ss=Vn.indexOf(mo.featureIndex);return Vn.indexOf($n.featureIndex)-Ss}return $n.featureIndex-mo.featureIndex});for(var Kn=0,qn=yo;Kn<qn.length;Kn+=1)to.push(qn[Kn])}},Xi=0,fn=mi;Xi<fn.length;Xi+=1)$i();var Mn=function(Ln){si[Ln].forEach(function(Wo){var un=Wo.feature,to=Pe[de[Ln].source].getFeatureState(un.layer["source-layer"],un.id);un.source=un.layer.source,un.layer["source-layer"]&&(un.sourceLayer=un.layer["source-layer"]),un.state=to})};for(var zn in si)Mn(zn);return si}(this._layers,this._serializedLayers,this.sourceCaches,s,u,this.placement.collisionIndex,this.placement.retainedQueryData)),this._flattenAndSortRenderedFeatures(re)},a.prototype.querySourceFeatures=function(s,u){u&&u.filter&&this._validate(l.validateStyle.filter,"querySourceFeatures.filter",u.filter,null,u);var P=this.sourceCaches[s];return P?function(W,$){for(var gt=W.getRenderableIds().map(function(Ie){return W.getTileByID(Ie)}),Dt=[],Ht={},re=0;re<gt.length;re++){var le=gt[re],de=le.tileID.canonical.key;Ht[de]||(Ht[de]=!0,le.querySourceFeatures(Dt,$))}return Dt}(P,u):[]},a.prototype.addSourceType=function(s,u,P){return a.getSourceType(s)?P(new Error('A source type called "'+s+'" already exists.')):(a.setSourceType(s,u),u.workerSourceURL?void this.dispatcher.broadcast("loadWorkerSource",{name:s,url:u.workerSourceURL},P):P(null,null))},a.prototype.getLight=function(){return this.light.getLight()},a.prototype.setLight=function(s,u){void 0===u&&(u={}),this._checkLoaded();var P=this.light.getLight(),W=!1;for(var $ in s)if(!l.deepEqual(s[$],P[$])){W=!0;break}if(W){var gt={now:l.browser.now(),transition:l.extend({duration:300,delay:0},this.stylesheet.transition)};this.light.setLight(s,u),this.light.updateTransitions(gt)}},a.prototype._validate=function(s,u,P,W,$){return void 0===$&&($={}),(!$||!1!==$.validate)&&vi(this,s.call(l.validateStyle,l.extend({key:u,style:this.serialize(),value:P,styleSpec:l.styleSpec},W)))},a.prototype._remove=function(){for(var s in this._request&&(this._request.cancel(),this._request=null),this._spriteRequest&&(this._spriteRequest.cancel(),this._spriteRequest=null),l.evented.off("pluginStateChange",this._rtlTextPluginCallback),this._layers)this._layers[s].setEventedParent(null);for(var u in this.sourceCaches)this.sourceCaches[u].clearTiles(),this.sourceCaches[u].setEventedParent(null);this.imageManager.setEventedParent(null),this.setEventedParent(null),this.dispatcher.remove()},a.prototype._clearSource=function(s){this.sourceCaches[s].clearTiles()},a.prototype._reloadSource=function(s){this.sourceCaches[s].resume(),this.sourceCaches[s].reload()},a.prototype._updateSources=function(s){for(var u in this.sourceCaches)this.sourceCaches[u].update(s)},a.prototype._generateCollisionBoxes=function(){for(var s in this.sourceCaches)this._reloadSource(s)},a.prototype._updatePlacement=function(s,u,P,W,$){void 0===$&&($=!1);for(var gt=!1,Dt=!1,Ht={},re=0,le=this._order;re<le.length;re+=1){var de=this._layers[le[re]];if("symbol"===de.type){if(!Ht[de.source]){var Ie=this.sourceCaches[de.source];Ht[de.source]=Ie.getRenderableIds(!0).map(function(Ze){return Ie.getTileByID(Ze)}).sort(function(Ze,si){return si.tileID.overscaledZ-Ze.tileID.overscaledZ||(Ze.tileID.isLessThan(si.tileID)?-1:1)})}var Pe=this.crossTileSymbolIndex.addLayer(de,Ht[de.source],s.center.lng);gt=gt||Pe}}if(this.crossTileSymbolIndex.pruneUnusedLayers(this._order),(($=$||this._layerOrderChanged||0===P)||!this.pauseablePlacement||this.pauseablePlacement.isDone()&&!this.placement.stillRecent(l.browser.now(),s.zoom))&&(this.pauseablePlacement=new Zt(s,this._order,$,u,P,W,this.placement),this._layerOrderChanged=!1),this.pauseablePlacement.isDone()?this.placement.setStale():(this.pauseablePlacement.continuePlacement(this._order,this._layers,Ht),this.pauseablePlacement.isDone()&&(this.placement=this.pauseablePlacement.commit(l.browser.now()),Dt=!0),gt&&this.pauseablePlacement.placement.setStale()),Dt||gt)for(var Oe=0,Se=this._order;Oe<Se.length;Oe+=1){var Re=this._layers[Se[Oe]];"symbol"===Re.type&&this.placement.updateLayerOpacities(Re,Ht[Re.source])}return!this.pauseablePlacement.isDone()||this.placement.hasTransitions(l.browser.now())},a.prototype._releaseSymbolFadeTiles=function(){for(var s in this.sourceCaches)this.sourceCaches[s].releaseSymbolFadeTiles()},a.prototype.getImages=function(s,u,P){this.imageManager.getImages(u.icons,P),this._updateTilesForChangedImages();var W=this.sourceCaches[u.source];W&&W.setDependencies(u.tileID.key,u.type,u.icons)},a.prototype.getGlyphs=function(s,u,P){this.glyphManager.getGlyphs(u.stacks,P)},a.prototype.getResource=function(s,u,P){return l.makeRequest(u,P)},a}(l.Evented);an.getSourceType=function(o){return me[o]},an.setSourceType=function(o,a){me[o]=a},an.registerForPluginStateChange=l.registerForPluginStateChange;var cn=l.createLayout([{name:"a_pos",type:"Int16",components:2}]),bn=co("#ifdef GL_ES\nprecision mediump float;\n#else\n#if !defined(lowp)\n#define lowp\n#endif\n#if !defined(mediump)\n#define mediump\n#endif\n#if !defined(highp)\n#define highp\n#endif\n#endif","#ifdef GL_ES\nprecision highp float;\n#else\n#if !defined(lowp)\n#define lowp\n#endif\n#if !defined(mediump)\n#define mediump\n#endif\n#if !defined(highp)\n#define highp\n#endif\n#endif\nvec2 unpack_float(const float packedValue) {int packedIntValue=int(packedValue);int v0=packedIntValue/256;return vec2(v0,packedIntValue-v0*256);}vec2 unpack_opacity(const float packedOpacity) {int intOpacity=int(packedOpacity)/2;return vec2(float(intOpacity)/127.0,mod(packedOpacity,2.0));}vec4 decode_color(const vec2 encodedColor) {return vec4(unpack_float(encodedColor[0])/255.0,unpack_float(encodedColor[1])/255.0\n);}float unpack_mix_vec2(const vec2 packedValue,const float t) {return mix(packedValue[0],packedValue[1],t);}vec4 unpack_mix_color(const vec4 packedColors,const float t) {vec4 minColor=decode_color(vec2(packedColors[0],packedColors[1]));vec4 maxColor=decode_color(vec2(packedColors[2],packedColors[3]));return mix(minColor,maxColor,t);}vec2 get_pattern_pos(const vec2 pixel_coord_upper,const vec2 pixel_coord_lower,const vec2 pattern_size,const float tile_units_to_pixels,const vec2 pos) {vec2 offset=mod(mod(mod(pixel_coord_upper,pattern_size)*256.0,pattern_size)*256.0+pixel_coord_lower,pattern_size);return (tile_units_to_pixels*pos+offset)/pattern_size;}"),Qo=co("uniform vec4 u_color;uniform float u_opacity;void main() {gl_FragColor=u_color*u_opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),wr=co("uniform vec2 u_pattern_tl_a;uniform vec2 u_pattern_br_a;uniform vec2 u_pattern_tl_b;uniform vec2 u_pattern_br_b;uniform vec2 u_texsize;uniform float u_mix;uniform float u_opacity;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(u_pattern_tl_a/u_texsize,u_pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(u_pattern_tl_b/u_texsize,u_pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_mix)*u_opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_pattern_size_a;uniform vec2 u_pattern_size_b;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_scale_a;uniform float u_scale_b;uniform float u_tile_units_to_pixels;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_a*u_pattern_size_a,u_tile_units_to_pixels,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_b*u_pattern_size_b,u_tile_units_to_pixels,a_pos);}"),$r=co("varying vec3 v_data;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define mediump float radius\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define highp vec4 stroke_color\n#pragma mapbox: define mediump float stroke_width\n#pragma mapbox: define lowp float stroke_opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize mediump float radius\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize highp vec4 stroke_color\n#pragma mapbox: initialize mediump float stroke_width\n#pragma mapbox: initialize lowp float stroke_opacity\nvec2 extrude=v_data.xy;float extrude_length=length(extrude);lowp float antialiasblur=v_data.z;float antialiased_blur=-max(blur,antialiasblur);float opacity_t=smoothstep(0.0,antialiased_blur,extrude_length-1.0);float color_t=stroke_width < 0.01 ? 0.0 : smoothstep(antialiased_blur,0.0,extrude_length-radius/(radius+stroke_width));gl_FragColor=opacity_t*mix(color*opacity,stroke_color*stroke_opacity,color_t);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform bool u_scale_with_map;uniform bool u_pitch_with_map;uniform vec2 u_extrude_scale;uniform lowp float u_device_pixel_ratio;uniform highp float u_camera_to_center_distance;attribute vec2 a_pos;varying vec3 v_data;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define mediump float radius\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define highp vec4 stroke_color\n#pragma mapbox: define mediump float stroke_width\n#pragma mapbox: define lowp float stroke_opacity\nvoid main(void) {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize mediump float radius\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize highp vec4 stroke_color\n#pragma mapbox: initialize mediump float stroke_width\n#pragma mapbox: initialize lowp float stroke_opacity\nvec2 extrude=vec2(mod(a_pos,2.0)*2.0-1.0);vec2 circle_center=floor(a_pos*0.5);if (u_pitch_with_map) {vec2 corner_position=circle_center;if (u_scale_with_map) {corner_position+=extrude*(radius+stroke_width)*u_extrude_scale;} else {vec4 projected_center=u_matrix*vec4(circle_center,0,1);corner_position+=extrude*(radius+stroke_width)*u_extrude_scale*(projected_center.w/u_camera_to_center_distance);}gl_Position=u_matrix*vec4(corner_position,0,1);} else {gl_Position=u_matrix*vec4(circle_center,0,1);if (u_scale_with_map) {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*u_camera_to_center_distance;} else {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*gl_Position.w;}}lowp float antialiasblur=1.0/u_device_pixel_ratio/(radius+stroke_width);v_data=vec3(extrude.x,extrude.y,antialiasblur);}"),Io=co("void main() {gl_FragColor=vec4(1.0);}","attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),io=co("uniform highp float u_intensity;varying vec2 v_extrude;\n#pragma mapbox: define highp float weight\n#define GAUSS_COEF 0.3989422804014327\nvoid main() {\n#pragma mapbox: initialize highp float weight\nfloat d=-0.5*3.0*3.0*dot(v_extrude,v_extrude);float val=weight*u_intensity*GAUSS_COEF*exp(d);gl_FragColor=vec4(val,1.0,1.0,1.0);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform float u_extrude_scale;uniform float u_opacity;uniform float u_intensity;attribute vec2 a_pos;varying vec2 v_extrude;\n#pragma mapbox: define highp float weight\n#pragma mapbox: define mediump float radius\nconst highp float ZERO=1.0/255.0/16.0;\n#define GAUSS_COEF 0.3989422804014327\nvoid main(void) {\n#pragma mapbox: initialize highp float weight\n#pragma mapbox: initialize mediump float radius\nvec2 unscaled_extrude=vec2(mod(a_pos,2.0)*2.0-1.0);float S=sqrt(-2.0*log(ZERO/weight/u_intensity/GAUSS_COEF))/3.0;v_extrude=S*unscaled_extrude;vec2 extrude=v_extrude*radius*u_extrude_scale;vec4 pos=vec4(floor(a_pos*0.5)+extrude,0,1);gl_Position=u_matrix*pos;}"),Ir=co("uniform sampler2D u_image;uniform sampler2D u_color_ramp;uniform float u_opacity;varying vec2 v_pos;void main() {float t=texture2D(u_image,v_pos).r;vec4 color=texture2D(u_color_ramp,vec2(t,0.5));gl_FragColor=color*u_opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(0.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_world;attribute vec2 a_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos*u_world,0,1);v_pos.x=a_pos.x;v_pos.y=1.0-a_pos.y;}"),Ao=co("varying float v_placed;varying float v_notUsed;void main() {float alpha=0.5;gl_FragColor=vec4(1.0,0.0,0.0,1.0)*alpha;if (v_placed > 0.5) {gl_FragColor=vec4(0.0,0.0,1.0,0.5)*alpha;}if (v_notUsed > 0.5) {gl_FragColor*=.1;}}","attribute vec2 a_pos;attribute vec2 a_anchor_pos;attribute vec2 a_extrude;attribute vec2 a_placed;attribute vec2 a_shift;uniform mat4 u_matrix;uniform vec2 u_extrude_scale;uniform float u_camera_to_center_distance;varying float v_placed;varying float v_notUsed;void main() {vec4 projectedPoint=u_matrix*vec4(a_anchor_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);gl_Position=u_matrix*vec4(a_pos,0.0,1.0);gl_Position.xy+=(a_extrude+a_shift)*u_extrude_scale*gl_Position.w*collision_perspective_ratio;v_placed=a_placed.x;v_notUsed=a_placed.y;}"),er=co("varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;void main() {float alpha=0.5*min(v_perspective_ratio,1.0);float stroke_radius=0.9*max(v_perspective_ratio,1.0);float distance_to_center=length(v_extrude);float distance_to_edge=abs(distance_to_center-v_radius);float opacity_t=smoothstep(-stroke_radius,0.0,-distance_to_edge);vec4 color=mix(vec4(0.0,0.0,1.0,0.5),vec4(1.0,0.0,0.0,1.0),v_collision);gl_FragColor=color*alpha*opacity_t;}","attribute vec2 a_pos;attribute float a_radius;attribute vec2 a_flags;uniform mat4 u_matrix;uniform mat4 u_inv_matrix;uniform vec2 u_viewport_size;uniform float u_camera_to_center_distance;varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;vec3 toTilePosition(vec2 screenPos) {vec4 rayStart=u_inv_matrix*vec4(screenPos,-1.0,1.0);vec4 rayEnd  =u_inv_matrix*vec4(screenPos, 1.0,1.0);rayStart.xyz/=rayStart.w;rayEnd.xyz  /=rayEnd.w;highp float t=(0.0-rayStart.z)/(rayEnd.z-rayStart.z);return mix(rayStart.xyz,rayEnd.xyz,t);}void main() {vec2 quadCenterPos=a_pos;float radius=a_radius;float collision=a_flags.x;float vertexIdx=a_flags.y;vec2 quadVertexOffset=vec2(mix(-1.0,1.0,float(vertexIdx >=2.0)),mix(-1.0,1.0,float(vertexIdx >=1.0 && vertexIdx <=2.0)));vec2 quadVertexExtent=quadVertexOffset*radius;vec3 tilePos=toTilePosition(quadCenterPos);vec4 clipPos=u_matrix*vec4(tilePos,1.0);highp float camera_to_anchor_distance=clipPos.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);float padding_factor=1.2;v_radius=radius;v_extrude=quadVertexExtent*padding_factor;v_perspective_ratio=collision_perspective_ratio;v_collision=collision;gl_Position=vec4(clipPos.xyz/clipPos.w,1.0)+vec4(quadVertexExtent*padding_factor/u_viewport_size*2.0,0.0,0.0);}"),aa=co("uniform highp vec4 u_color;uniform sampler2D u_overlay;varying vec2 v_uv;void main() {vec4 overlay_color=texture2D(u_overlay,v_uv);gl_FragColor=mix(u_color,overlay_color,overlay_color.a);}","attribute vec2 a_pos;varying vec2 v_uv;uniform mat4 u_matrix;uniform float u_overlay_scale;void main() {v_uv=a_pos/8192.0;gl_Position=u_matrix*vec4(a_pos*u_overlay_scale,0,1);}"),ga=co("#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float opacity\ngl_FragColor=color*opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","attribute vec2 a_pos;uniform mat4 u_matrix;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float opacity\ngl_Position=u_matrix*vec4(a_pos,0,1);}"),hr=co("varying vec2 v_pos;\n#pragma mapbox: define highp vec4 outline_color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 outline_color\n#pragma mapbox: initialize lowp float opacity\nfloat dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=outline_color*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","attribute vec2 a_pos;uniform mat4 u_matrix;uniform vec2 u_world;varying vec2 v_pos;\n#pragma mapbox: define highp vec4 outline_color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 outline_color\n#pragma mapbox: initialize lowp float opacity\ngl_Position=u_matrix*vec4(a_pos,0,1);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}"),Jr=co("uniform vec2 u_texsize;uniform sampler2D u_image;uniform float u_fade;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=mix(color1,color2,u_fade)*alpha*opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_world;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;gl_Position=u_matrix*vec4(a_pos,0,1);vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,a_pos);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}"),js=co("uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_fade)*opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileZoomRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileZoomRatio,a_pos);}"),Ho=co("varying vec4 v_color;void main() {gl_FragColor=v_color;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;uniform float u_vertical_gradient;uniform lowp float u_opacity;attribute vec2 a_pos;attribute vec4 a_normal_ed;varying vec4 v_color;\n#pragma mapbox: define highp float base\n#pragma mapbox: define highp float height\n#pragma mapbox: define highp vec4 color\nvoid main() {\n#pragma mapbox: initialize highp float base\n#pragma mapbox: initialize highp float height\n#pragma mapbox: initialize highp vec4 color\nvec3 normal=a_normal_ed.xyz;base=max(0.0,base);height=max(0.0,height);float t=mod(normal.x,2.0);gl_Position=u_matrix*vec4(a_pos,t > 0.0 ? height : base,1);float colorvalue=color.r*0.2126+color.g*0.7152+color.b*0.0722;v_color=vec4(0.0,0.0,0.0,1.0);vec4 ambientlight=vec4(0.03,0.03,0.03,1.0);color+=ambientlight;float directional=clamp(dot(normal/16384.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_color.r+=clamp(color.r*directional*u_lightcolor.r,mix(0.0,0.3,1.0-u_lightcolor.r),1.0);v_color.g+=clamp(color.g*directional*u_lightcolor.g,mix(0.0,0.3,1.0-u_lightcolor.g),1.0);v_color.b+=clamp(color.b*directional*u_lightcolor.b,mix(0.0,0.3,1.0-u_lightcolor.b),1.0);v_color*=u_opacity;}"),Qr=co("uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;\n#pragma mapbox: define lowp float base\n#pragma mapbox: define lowp float height\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\nvoid main() {\n#pragma mapbox: initialize lowp float base\n#pragma mapbox: initialize lowp float height\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);vec4 mixedColor=mix(color1,color2,u_fade);gl_FragColor=mixedColor*v_lighting;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_height_factor;uniform vec3 u_scale;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;attribute vec2 a_pos;attribute vec4 a_normal_ed;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;\n#pragma mapbox: define lowp float base\n#pragma mapbox: define lowp float height\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\nvoid main() {\n#pragma mapbox: initialize lowp float base\n#pragma mapbox: initialize lowp float height\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec3 normal=a_normal_ed.xyz;float edgedistance=a_normal_ed.w;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;base=max(0.0,base);height=max(0.0,height);float t=mod(normal.x,2.0);float z=t > 0.0 ? height : base;gl_Position=u_matrix*vec4(a_pos,z,1);vec2 pos=normal.x==1.0 && normal.y==0.0 && normal.z==16384.0\n? a_pos\n: vec2(edgedistance,z*u_height_factor);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,pos);v_lighting=vec4(0.0,0.0,0.0,1.0);float directional=clamp(dot(normal/16383.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((0.5+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_lighting.rgb+=clamp(directional*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_lighting*=u_opacity;}"),Xo=co("#ifdef GL_ES\nprecision highp float;\n#endif\nuniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_dimension;uniform float u_zoom;uniform vec4 u_unpack;float getElevation(vec2 coord,float bias) {vec4 data=texture2D(u_image,coord)*255.0;data.a=-1.0;return dot(data,u_unpack)/4.0;}void main() {vec2 epsilon=1.0/u_dimension;float a=getElevation(v_pos+vec2(-epsilon.x,-epsilon.y),0.0);float b=getElevation(v_pos+vec2(0,-epsilon.y),0.0);float c=getElevation(v_pos+vec2(epsilon.x,-epsilon.y),0.0);float d=getElevation(v_pos+vec2(-epsilon.x,0),0.0);float e=getElevation(v_pos,0.0);float f=getElevation(v_pos+vec2(epsilon.x,0),0.0);float g=getElevation(v_pos+vec2(-epsilon.x,epsilon.y),0.0);float h=getElevation(v_pos+vec2(0,epsilon.y),0.0);float i=getElevation(v_pos+vec2(epsilon.x,epsilon.y),0.0);float exaggerationFactor=u_zoom < 2.0 ? 0.4 : u_zoom < 4.5 ? 0.35 : 0.3;float exaggeration=u_zoom < 15.0 ? (u_zoom-15.0)*exaggerationFactor : 0.0;vec2 deriv=vec2((c+f+f+i)-(a+d+d+g),(g+h+h+i)-(a+b+b+c))/pow(2.0,exaggeration+(19.2562-u_zoom));gl_FragColor=clamp(vec4(deriv.x/2.0+0.5,deriv.y/2.0+0.5,1.0,1.0),0.0,1.0);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_dimension;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_texture_pos/8192.0)*scale+epsilon;}"),Go=co("uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_latrange;uniform vec2 u_light;uniform vec4 u_shadow;uniform vec4 u_highlight;uniform vec4 u_accent;\n#define PI 3.141592653589793\nvoid main() {vec4 pixel=texture2D(u_image,v_pos);vec2 deriv=((pixel.rg*2.0)-1.0);float scaleFactor=cos(radians((u_latrange[0]-u_latrange[1])*(1.0-v_pos.y)+u_latrange[1]));float slope=atan(1.25*length(deriv)/scaleFactor);float aspect=deriv.x !=0.0 ? atan(deriv.y,-deriv.x) : PI/2.0*(deriv.y > 0.0 ? 1.0 :-1.0);float intensity=u_light.x;float azimuth=u_light.y+PI;float base=1.875-intensity*1.75;float maxValue=0.5*PI;float scaledSlope=intensity !=0.5 ? ((pow(base,slope)-1.0)/(pow(base,maxValue)-1.0))*maxValue : slope;float accent=cos(scaledSlope);vec4 accent_color=(1.0-accent)*u_accent*clamp(intensity*2.0,0.0,1.0);float shade=abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);vec4 shade_color=mix(u_shadow,u_highlight,shade)*sin(scaledSlope)*clamp(intensity*2.0,0.0,1.0);gl_FragColor=accent_color*(1.0-shade_color.a)+shade_color;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=a_texture_pos/8192.0;}"),Rr=co("uniform lowp float u_device_pixel_ratio;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\nfloat dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);gl_FragColor=color*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","\n#define scale 0.015873016\nattribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform vec2 u_units_to_pixels;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp float v_linesofar;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float width\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump float gapwidth\n#pragma mapbox: initialize lowp float offset\n#pragma mapbox: initialize mediump float width\nfloat ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;v_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*2.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_width2=vec2(outset,inset);}"),sr=co("uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;varying highp vec2 v_uv;\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\nfloat dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);vec4 color=texture2D(u_image,v_uv);gl_FragColor=color*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","\n#define scale 0.015873016\nattribute vec2 a_pos_normal;attribute vec4 a_data;attribute float a_uv_x;attribute float a_split_index;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_units_to_pixels;uniform float u_image_height;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp vec2 v_uv;\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float width\nvoid main() {\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump float gapwidth\n#pragma mapbox: initialize lowp float offset\n#pragma mapbox: initialize mediump float width\nfloat ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;highp float texel_height=1.0/u_image_height;highp float half_texel_height=0.5*texel_height;v_uv=vec2(a_uv_x,a_split_index*texel_height-half_texel_height);vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_width2=vec2(outset,inset);}"),ir=co("uniform lowp float u_device_pixel_ratio;uniform vec2 u_texsize;uniform float u_fade;uniform mediump vec3 u_scale;uniform sampler2D u_image;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;vec2 pattern_size_a=vec2(display_size_a.x*fromScale/tileZoomRatio,display_size_a.y);vec2 pattern_size_b=vec2(display_size_b.x*toScale/tileZoomRatio,display_size_b.y);float aspect_a=display_size_a.y/v_width;float aspect_b=display_size_b.y/v_width;float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float x_a=mod(v_linesofar/pattern_size_a.x*aspect_a,1.0);float x_b=mod(v_linesofar/pattern_size_b.x*aspect_b,1.0);float y=0.5*v_normal.y+0.5;vec2 texel_size=1.0/u_texsize;vec2 pos_a=mix(pattern_tl_a*texel_size-texel_size,pattern_br_a*texel_size+texel_size,vec2(x_a,y));vec2 pos_b=mix(pattern_tl_b*texel_size-texel_size,pattern_br_b*texel_size+texel_size,vec2(x_b,y));vec4 color=mix(texture2D(u_image,pos_a),texture2D(u_image,pos_b),u_fade);gl_FragColor=color*alpha*opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","\n#define scale 0.015873016\n#define LINE_DISTANCE_SCALE 2.0\nattribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform vec2 u_units_to_pixels;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define mediump float width\n#pragma mapbox: define lowp float floorwidth\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\nvoid main() {\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float offset\n#pragma mapbox: initialize mediump float gapwidth\n#pragma mapbox: initialize mediump float width\n#pragma mapbox: initialize lowp float floorwidth\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\nfloat ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_linesofar=a_linesofar;v_width2=vec2(outset,inset);v_width=floorwidth;}"),Rn=co("uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;uniform float u_sdfgamma;uniform float u_mix;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float width\n#pragma mapbox: define lowp float floorwidth\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump float width\n#pragma mapbox: initialize lowp float floorwidth\nfloat dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float sdfdist_a=texture2D(u_image,v_tex_a).a;float sdfdist_b=texture2D(u_image,v_tex_b).a;float sdfdist=mix(sdfdist_a,sdfdist_b,u_mix);alpha*=smoothstep(0.5-u_sdfgamma/floorwidth,0.5+u_sdfgamma/floorwidth,sdfdist);gl_FragColor=color*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","\n#define scale 0.015873016\n#define LINE_DISTANCE_SCALE 2.0\nattribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_patternscale_a;uniform float u_tex_y_a;uniform vec2 u_patternscale_b;uniform float u_tex_y_b;uniform vec2 u_units_to_pixels;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float width\n#pragma mapbox: define lowp float floorwidth\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump float gapwidth\n#pragma mapbox: initialize lowp float offset\n#pragma mapbox: initialize mediump float width\n#pragma mapbox: initialize lowp float floorwidth\nfloat ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_tex_a=vec2(a_linesofar*u_patternscale_a.x/floorwidth,normal.y*u_patternscale_a.y+u_tex_y_a);v_tex_b=vec2(a_linesofar*u_patternscale_b.x/floorwidth,normal.y*u_patternscale_b.y+u_tex_y_b);v_width2=vec2(outset,inset);}"),go=co("uniform float u_fade_t;uniform float u_opacity;uniform sampler2D u_image0;uniform sampler2D u_image1;varying vec2 v_pos0;varying vec2 v_pos1;uniform float u_brightness_low;uniform float u_brightness_high;uniform float u_saturation_factor;uniform float u_contrast_factor;uniform vec3 u_spin_weights;void main() {vec4 color0=texture2D(u_image0,v_pos0);vec4 color1=texture2D(u_image1,v_pos1);if (color0.a > 0.0) {color0.rgb=color0.rgb/color0.a;}if (color1.a > 0.0) {color1.rgb=color1.rgb/color1.a;}vec4 color=mix(color0,color1,u_fade_t);color.a*=u_opacity;vec3 rgb=color.rgb;rgb=vec3(dot(rgb,u_spin_weights.xyz),dot(rgb,u_spin_weights.zxy),dot(rgb,u_spin_weights.yzx));float average=(color.r+color.g+color.b)/3.0;rgb+=(average-rgb)*u_saturation_factor;rgb=(rgb-0.5)*u_contrast_factor+0.5;vec3 u_high_vec=vec3(u_brightness_low,u_brightness_low,u_brightness_low);vec3 u_low_vec=vec3(u_brightness_high,u_brightness_high,u_brightness_high);gl_FragColor=vec4(mix(u_high_vec,u_low_vec,rgb)*color.a,color.a);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_tl_parent;uniform float u_scale_parent;uniform float u_buffer_scale;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos0;varying vec2 v_pos1;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos0=(((a_texture_pos/8192.0)-0.5)/u_buffer_scale )+0.5;v_pos1=(v_pos0*u_scale_parent)+u_tl_parent;}"),Zo=co("uniform sampler2D u_texture;varying vec2 v_tex;varying float v_fade_opacity;\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\nlowp float alpha=opacity*v_fade_opacity;gl_FragColor=texture2D(u_texture,v_tex)*alpha;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform highp float u_camera_to_center_distance;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform float u_fade_change;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform vec2 u_texsize;varying vec2 v_tex;varying float v_fade_opacity;\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\nvec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;vec2 a_minFontScale=a_pixeloffset.zw/256.0;highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?\ncamera_to_anchor_distance/u_camera_to_center_distance :\nu_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),0,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,0.0,1.0);gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*max(a_minFontScale,fontScale)+a_pxoffset/16.0),0.0,1.0);v_tex=a_tex/u_texsize;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;v_fade_opacity=max(0.0,min(1.0,fade_opacity[0]+fade_change));}"),Gr=co("#define SDF_PX 8.0\nuniform bool u_is_halo;uniform sampler2D u_texture;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;uniform bool u_is_text;varying vec2 v_data0;varying vec3 v_data1;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\nvoid main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\nfloat EDGE_GAMMA=0.105/u_device_pixel_ratio;vec2 tex=v_data0.xy;float gamma_scale=v_data1.x;float size=v_data1.y;float fade_opacity=v_data1[2];float fontScale=u_is_text ? size/24.0 : size;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;varying vec2 v_data0;varying vec3 v_data1;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\nvoid main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\nvec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?\ncamera_to_anchor_distance/u_camera_to_center_distance :\nu_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),0,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,0.0,1.0);gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale+a_pxoffset),0.0,1.0);float gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(1.0,fade_opacity[0]+fade_change));v_data0=a_tex/u_texsize;v_data1=vec3(gamma_scale,size,interpolated_fade_opacity);}"),cr=co("#define SDF_PX 8.0\n#define SDF 1.0\n#define ICON 0.0\nuniform bool u_is_halo;uniform sampler2D u_texture;uniform sampler2D u_texture_icon;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;varying vec4 v_data0;varying vec4 v_data1;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\nvoid main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\nfloat fade_opacity=v_data1[2];if (v_data1.w==ICON) {vec2 tex_icon=v_data0.zw;lowp float alpha=opacity*fade_opacity;gl_FragColor=texture2D(u_texture_icon,tex_icon)*alpha;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\nreturn;}vec2 tex=v_data0.xy;float EDGE_GAMMA=0.105/u_device_pixel_ratio;float gamma_scale=v_data1.x;float size=v_data1.y;float fontScale=size/24.0;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec2 u_texsize_icon;varying vec4 v_data0;varying vec4 v_data1;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\nvoid main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\nvec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);float is_sdf=a_size[0]-2.0*a_size_min;highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?\ncamera_to_anchor_distance/u_camera_to_center_distance :\nu_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=size/24.0;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),0,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,0.0,1.0);gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale),0.0,1.0);float gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(1.0,fade_opacity[0]+fade_change));v_data0.xy=a_tex/u_texsize;v_data0.zw=a_tex/u_texsize_icon;v_data1=vec4(gamma_scale,size,interpolated_fade_opacity,is_sdf);}");function co(o,a){var s=/#pragma mapbox: ([\w]+) ([\w]+) ([\w]+) ([\w]+)/g,u=a.match(/attribute ([\w]+) ([\w]+)/g),P=o.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),W=a.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),$=W?W.concat(P):P,gt={};return{fragmentSource:o=o.replace(s,function(Dt,Ht,re,le,de){return gt[de]=!0,"define"===Ht?"\n#ifndef HAS_UNIFORM_u_"+de+"\nvarying "+re+" "+le+" "+de+";\n#else\nuniform "+re+" "+le+" u_"+de+";\n#endif\n":"\n#ifdef HAS_UNIFORM_u_"+de+"\n    "+re+" "+le+" "+de+" = u_"+de+";\n#endif\n"}),vertexSource:a=a.replace(s,function(Dt,Ht,re,le,de){var Ie="float"===le?"vec2":"vec4",Pe=de.match(/color/)?"color":Ie;return gt[de]?"define"===Ht?"\n#ifndef HAS_UNIFORM_u_"+de+"\nuniform lowp float u_"+de+"_t;\nattribute "+re+" "+Ie+" a_"+de+";\nvarying "+re+" "+le+" "+de+";\n#else\nuniform "+re+" "+le+" u_"+de+";\n#endif\n":"vec4"===Pe?"\n#ifndef HAS_UNIFORM_u_"+de+"\n    "+de+" = a_"+de+";\n#else\n    "+re+" "+le+" "+de+" = u_"+de+";\n#endif\n":"\n#ifndef HAS_UNIFORM_u_"+de+"\n    "+de+" = unpack_mix_"+Pe+"(a_"+de+", u_"+de+"_t);\n#else\n    "+re+" "+le+" "+de+" = u_"+de+";\n#endif\n":"define"===Ht?"\n#ifndef HAS_UNIFORM_u_"+de+"\nuniform lowp float u_"+de+"_t;\nattribute "+re+" "+Ie+" a_"+de+";\n#else\nuniform "+re+" "+le+" u_"+de+";\n#endif\n":"vec4"===Pe?"\n#ifndef HAS_UNIFORM_u_"+de+"\n    "+re+" "+le+" "+de+" = a_"+de+";\n#else\n    "+re+" "+le+" "+de+" = u_"+de+";\n#endif\n":"\n#ifndef HAS_UNIFORM_u_"+de+"\n    "+re+" "+le+" "+de+" = unpack_mix_"+Pe+"(a_"+de+", u_"+de+"_t);\n#else\n    "+re+" "+le+" "+de+" = u_"+de+";\n#endif\n"}),staticAttributes:u,staticUniforms:$}}var la=Object.freeze({__proto__:null,prelude:bn,background:Qo,backgroundPattern:wr,circle:$r,clippingMask:Io,heatmap:io,heatmapTexture:Ir,collisionBox:Ao,collisionCircle:er,debug:aa,fill:ga,fillOutline:hr,fillOutlinePattern:Jr,fillPattern:js,fillExtrusion:Ho,fillExtrusionPattern:Qr,hillshadePrepare:Xo,hillshade:Go,line:Rr,lineGradient:sr,linePattern:ir,lineSDF:Rn,raster:go,symbolIcon:Zo,symbolSDF:Gr,symbolTextAndIcon:cr}),as=function(){this.boundProgram=null,this.boundLayoutVertexBuffer=null,this.boundPaintVertexBuffers=[],this.boundIndexBuffer=null,this.boundVertexOffset=null,this.boundDynamicVertexBuffer=null,this.vao=null};function _s(o){for(var a=[],s=0;s<o.length;s++)if(null!==o[s]){var u=o[s].split(" ");a.push(u.pop())}return a}as.prototype.bind=function(o,a,s,u,P,W,$,gt){this.context=o;for(var Dt=this.boundPaintVertexBuffers.length!==u.length,Ht=0;!Dt&&Ht<u.length;Ht++)this.boundPaintVertexBuffers[Ht]!==u[Ht]&&(Dt=!0);o.extVertexArrayObject&&this.vao&&this.boundProgram===a&&this.boundLayoutVertexBuffer===s&&!Dt&&this.boundIndexBuffer===P&&this.boundVertexOffset===W&&this.boundDynamicVertexBuffer===$&&this.boundDynamicVertexBuffer2===gt?(o.bindVertexArrayOES.set(this.vao),$&&$.bind(),P&&P.dynamicDraw&&P.bind(),gt&&gt.bind()):this.freshBind(a,s,u,P,W,$,gt)},as.prototype.freshBind=function(o,a,s,u,P,W,$){var gt,Dt=o.numAttributes,Ht=this.context,re=Ht.gl;if(Ht.extVertexArrayObject)this.vao&&this.destroy(),this.vao=Ht.extVertexArrayObject.createVertexArrayOES(),Ht.bindVertexArrayOES.set(this.vao),gt=0,this.boundProgram=o,this.boundLayoutVertexBuffer=a,this.boundPaintVertexBuffers=s,this.boundIndexBuffer=u,this.boundVertexOffset=P,this.boundDynamicVertexBuffer=W,this.boundDynamicVertexBuffer2=$;else{gt=Ht.currentNumAttributes||0;for(var le=Dt;le<gt;le++)re.disableVertexAttribArray(le)}a.enableAttributes(re,o);for(var de=0,Ie=s;de<Ie.length;de+=1)Ie[de].enableAttributes(re,o);W&&W.enableAttributes(re,o),$&&$.enableAttributes(re,o),a.bind(),a.setVertexAttribPointers(re,o,P);for(var Pe=0,Oe=s;Pe<Oe.length;Pe+=1){var Se=Oe[Pe];Se.bind(),Se.setVertexAttribPointers(re,o,P)}W&&(W.bind(),W.setVertexAttribPointers(re,o,P)),u&&u.bind(),$&&($.bind(),$.setVertexAttribPointers(re,o,P)),Ht.currentNumAttributes=Dt},as.prototype.destroy=function(){this.vao&&(this.context.extVertexArrayObject.deleteVertexArrayOES(this.vao),this.vao=null)};var Qs=function(o,a,s,u,P,W){var $=o.gl;this.program=$.createProgram();for(var gt=_s(s.staticAttributes),Dt=u?u.getBinderAttributes():[],Ht=gt.concat(Dt),re=s.staticUniforms?_s(s.staticUniforms):[],le=u?u.getBinderUniforms():[],de=[],Ie=0,Pe=re.concat(le);Ie<Pe.length;Ie+=1){var Oe=Pe[Ie];de.indexOf(Oe)<0&&de.push(Oe)}var Se=u?u.defines():[];W&&Se.push("#define OVERDRAW_INSPECTOR;");var Re=Se.concat(bn.fragmentSource,s.fragmentSource).join("\n"),Ze=Se.concat(bn.vertexSource,s.vertexSource).join("\n"),si=$.createShader($.FRAGMENT_SHADER);if($.isContextLost())this.failedToCreate=!0;else{$.shaderSource(si,Re),$.compileShader(si),$.attachShader(this.program,si);var bi=$.createShader($.VERTEX_SHADER);if($.isContextLost())this.failedToCreate=!0;else{$.shaderSource(bi,Ze),$.compileShader(bi),$.attachShader(this.program,bi),this.attributes={};var mi={};this.numAttributes=Ht.length;for(var wi=0;wi<this.numAttributes;wi++)Ht[wi]&&($.bindAttribLocation(this.program,wi,Ht[wi]),this.attributes[Ht[wi]]=wi);$.linkProgram(this.program),$.deleteShader(bi),$.deleteShader(si);for(var Ri=0;Ri<de.length;Ri++){var $i=de[Ri];if($i&&!mi[$i]){var Xi=$.getUniformLocation(this.program,$i);Xi&&(mi[$i]=Xi)}}this.fixedUniforms=P(o,mi),this.binderUniforms=u?u.getUniforms(o,mi):[]}}};function Oa(o,a,s){var u=1/Jo(s,1,a.transform.tileZoom),P=Math.pow(2,s.tileID.overscaledZ),W=s.tileSize*Math.pow(2,a.transform.tileZoom)/P,$=W*(s.tileID.canonical.x+s.tileID.wrap*P),gt=W*s.tileID.canonical.y;return{u_image:0,u_texsize:s.imageAtlasTexture.size,u_scale:[u,o.fromScale,o.toScale],u_fade:o.t,u_pixel_coord_upper:[$>>16,gt>>16],u_pixel_coord_lower:[65535&$,65535&gt]}}Qs.prototype.draw=function(o,a,s,u,P,W,$,gt,Dt,Ht,re,le,de,Ie,Pe,Oe){var Se,Re=o.gl;if(!this.failedToCreate){for(var Ze in o.program.set(this.program),o.setDepthMode(s),o.setStencilMode(u),o.setColorMode(P),o.setCullFace(W),this.fixedUniforms)this.fixedUniforms[Ze].set($[Ze]);Ie&&Ie.setUniforms(o,this.binderUniforms,le,{zoom:de});for(var si=(Se={},Se[Re.LINES]=2,Se[Re.TRIANGLES]=3,Se[Re.LINE_STRIP]=1,Se)[a],bi=0,mi=re.get();bi<mi.length;bi+=1){var wi=mi[bi],Ri=wi.vaos||(wi.vaos={});(Ri[gt]||(Ri[gt]=new as)).bind(o,this,Dt,Ie?Ie.getPaintVertexBuffers():[],Ht,wi.vertexOffset,Pe,Oe),Re.drawElements(a,wi.primitiveLength*si,Re.UNSIGNED_SHORT,wi.primitiveOffset*si*2)}}};var ya=function(o,a,s,u){var P=a.style.light,W=P.properties.get("position"),$=[W.x,W.y,W.z],gt=l.create$1();"viewport"===P.properties.get("anchor")&&l.fromRotation(gt,-a.transform.angle),l.transformMat3($,$,gt);var Dt=P.properties.get("color");return{u_matrix:o,u_lightpos:$,u_lightintensity:P.properties.get("intensity"),u_lightcolor:[Dt.r,Dt.g,Dt.b],u_vertical_gradient:+s,u_opacity:u}},Es=function(o,a,s,u,P,W,$){return l.extend(ya(o,a,s,u),Oa(W,a,$),{u_height_factor:-Math.pow(2,P.overscaledZ)/$.tileSize/8})},xs=function(o){return{u_matrix:o}},Sa=function(o,a,s,u){return l.extend(xs(o),Oa(s,a,u))},r=function(o,a){return{u_matrix:o,u_world:a}},f=function(o,a,s,u,P){return l.extend(Sa(o,a,s,u),{u_world:P})},U=function(o,a,s,u){var P,W,$=o.transform;if("map"===u.paint.get("circle-pitch-alignment")){var gt=Jo(s,1,$.zoom);P=!0,W=[gt,gt]}else P=!1,W=$.pixelsToGLUnits;return{u_camera_to_center_distance:$.cameraToCenterDistance,u_scale_with_map:+("map"===u.paint.get("circle-pitch-scale")),u_matrix:o.translatePosMatrix(a.posMatrix,s,u.paint.get("circle-translate"),u.paint.get("circle-translate-anchor")),u_pitch_with_map:+P,u_device_pixel_ratio:l.browser.devicePixelRatio,u_extrude_scale:W}},ut=function(o,a,s){var u=Jo(s,1,a.zoom),P=Math.pow(2,a.zoom-s.tileID.overscaledZ),W=s.tileID.overscaleFactor();return{u_matrix:o,u_camera_to_center_distance:a.cameraToCenterDistance,u_pixels_to_tile_units:u,u_extrude_scale:[a.pixelsToGLUnits[0]/(u*P),a.pixelsToGLUnits[1]/(u*P)],u_overscale_factor:W}},Et=function(o,a,s){return{u_matrix:o,u_inv_matrix:a,u_camera_to_center_distance:s.cameraToCenterDistance,u_viewport_size:[s.width,s.height]}},ae=function(o,a,s){return void 0===s&&(s=1),{u_matrix:o,u_color:a,u_overlay:0,u_overlay_scale:s}},qe=function(o){return{u_matrix:o}},Xe=function(o,a,s,u){return{u_matrix:o,u_extrude_scale:Jo(a,1,s),u_intensity:u}},ki=function(o,a,s){var u=o.transform;return{u_matrix:fr(o,a,s),u_ratio:1/Jo(a,1,u.zoom),u_device_pixel_ratio:l.browser.devicePixelRatio,u_units_to_pixels:[1/u.pixelsToGLUnits[0],1/u.pixelsToGLUnits[1]]}},Ci=function(o,a,s,u){return l.extend(ki(o,a,s),{u_image:0,u_image_height:u})},Sn=function(o,a,s,u){var P=o.transform,W=wo(a,P);return{u_matrix:fr(o,a,s),u_texsize:a.imageAtlasTexture.size,u_ratio:1/Jo(a,1,P.zoom),u_device_pixel_ratio:l.browser.devicePixelRatio,u_image:0,u_scale:[W,u.fromScale,u.toScale],u_fade:u.t,u_units_to_pixels:[1/P.pixelsToGLUnits[0],1/P.pixelsToGLUnits[1]]}},no=function(o,a,s,u,P){var W=o.lineAtlas,$=wo(a,o.transform),gt="round"===s.layout.get("line-cap"),Dt=W.getDash(u.from,gt),Ht=W.getDash(u.to,gt),re=Dt.width*P.fromScale,le=Ht.width*P.toScale;return l.extend(ki(o,a,s),{u_patternscale_a:[$/re,-Dt.height/2],u_patternscale_b:[$/le,-Ht.height/2],u_sdfgamma:W.width/(256*Math.min(re,le)*l.browser.devicePixelRatio)/2,u_image:0,u_tex_y_a:Dt.y,u_tex_y_b:Ht.y,u_mix:P.t})};function wo(o,a){return 1/Jo(o,1,a.tileZoom)}function fr(o,a,s){return o.translatePosMatrix(a.tileID.posMatrix,a,s.paint.get("line-translate"),s.paint.get("line-translate-anchor"))}var Fs=function(o,a,s,u,P){return{u_matrix:o,u_tl_parent:a,u_scale_parent:s,u_buffer_scale:1,u_fade_t:u.mix,u_opacity:u.opacity*P.paint.get("raster-opacity"),u_image0:0,u_image1:1,u_brightness_low:P.paint.get("raster-brightness-min"),u_brightness_high:P.paint.get("raster-brightness-max"),u_saturation_factor:($=P.paint.get("raster-saturation"),$>0?1-1/(1.001-$):-$),u_contrast_factor:(W=P.paint.get("raster-contrast"),W>0?1/(1-W):1+W),u_spin_weights:ns(P.paint.get("raster-hue-rotate"))};var W,$};function ns(o){o*=Math.PI/180;var a=Math.sin(o),s=Math.cos(o);return[(2*s+1)/3,(-Math.sqrt(3)*a-s+1)/3,(Math.sqrt(3)*a-s+1)/3]}var Wr,ha=function(o,a,s,u,P,W,$,gt,Dt,Ht){var re=P.transform;return{u_is_size_zoom_constant:+("constant"===o||"source"===o),u_is_size_feature_constant:+("constant"===o||"camera"===o),u_size_t:a?a.uSizeT:0,u_size:a?a.uSize:0,u_camera_to_center_distance:re.cameraToCenterDistance,u_pitch:re.pitch/360*2*Math.PI,u_rotate_symbol:+s,u_aspect_ratio:re.width/re.height,u_fade_change:P.options.fadeDuration?P.symbolFadeChange:1,u_matrix:W,u_label_plane_matrix:$,u_coord_matrix:gt,u_is_text:+Dt,u_pitch_with_map:+u,u_texsize:Ht,u_texture:0}},ls=function(o,a,s,u,P,W,$,gt,Dt,Ht,re){var le=P.transform;return l.extend(ha(o,a,s,u,P,W,$,gt,Dt,Ht),{u_gamma_scale:u?Math.cos(le._pitch)*le.cameraToCenterDistance:1,u_device_pixel_ratio:l.browser.devicePixelRatio,u_is_halo:+re})},ca=function(o,a,s,u,P,W,$,gt,Dt,Ht){return l.extend(ls(o,a,s,u,P,W,$,gt,!0,Dt,!0),{u_texsize_icon:Ht,u_texture_icon:1})},ur=function(o,a,s){return{u_matrix:o,u_opacity:a,u_color:s}},Ms=function(o,a,s,u,P,W){return l.extend((gt=W,Ht=P,re=(Dt=s).imageManager.getPattern(($=u).from.toString()),le=Dt.imageManager.getPattern($.to.toString()),Ie=(de=Dt.imageManager.getPixelSize()).width,Pe=de.height,Oe=Math.pow(2,Ht.tileID.overscaledZ),Re=(Se=Ht.tileSize*Math.pow(2,Dt.transform.tileZoom)/Oe)*(Ht.tileID.canonical.x+Ht.tileID.wrap*Oe),Ze=Se*Ht.tileID.canonical.y,{u_image:0,u_pattern_tl_a:re.tl,u_pattern_br_a:re.br,u_pattern_tl_b:le.tl,u_pattern_br_b:le.br,u_texsize:[Ie,Pe],u_mix:gt.t,u_pattern_size_a:re.displaySize,u_pattern_size_b:le.displaySize,u_scale_a:gt.fromScale,u_scale_b:gt.toScale,u_tile_units_to_pixels:1/Jo(Ht,1,Dt.transform.tileZoom),u_pixel_coord_upper:[Re>>16,Ze>>16],u_pixel_coord_lower:[65535&Re,65535&Ze]}),{u_matrix:o,u_opacity:a});var $,gt,Dt,Ht,re,le,de,Ie,Pe,Oe,Se,Re,Ze},Hs={fillExtrusion:function(o,a){return{u_matrix:new l.UniformMatrix4f(o,a.u_matrix),u_lightpos:new l.Uniform3f(o,a.u_lightpos),u_lightintensity:new l.Uniform1f(o,a.u_lightintensity),u_lightcolor:new l.Uniform3f(o,a.u_lightcolor),u_vertical_gradient:new l.Uniform1f(o,a.u_vertical_gradient),u_opacity:new l.Uniform1f(o,a.u_opacity)}},fillExtrusionPattern:function(o,a){return{u_matrix:new l.UniformMatrix4f(o,a.u_matrix),u_lightpos:new l.Uniform3f(o,a.u_lightpos),u_lightintensity:new l.Uniform1f(o,a.u_lightintensity),u_lightcolor:new l.Uniform3f(o,a.u_lightcolor),u_vertical_gradient:new l.Uniform1f(o,a.u_vertical_gradient),u_height_factor:new l.Uniform1f(o,a.u_height_factor),u_image:new l.Uniform1i(o,a.u_image),u_texsize:new l.Uniform2f(o,a.u_texsize),u_pixel_coord_upper:new l.Uniform2f(o,a.u_pixel_coord_upper),u_pixel_coord_lower:new l.Uniform2f(o,a.u_pixel_coord_lower),u_scale:new l.Uniform3f(o,a.u_scale),u_fade:new l.Uniform1f(o,a.u_fade),u_opacity:new l.Uniform1f(o,a.u_opacity)}},fill:function(o,a){return{u_matrix:new l.UniformMatrix4f(o,a.u_matrix)}},fillPattern:function(o,a){return{u_matrix:new l.UniformMatrix4f(o,a.u_matrix),u_image:new l.Uniform1i(o,a.u_image),u_texsize:new l.Uniform2f(o,a.u_texsize),u_pixel_coord_upper:new l.Uniform2f(o,a.u_pixel_coord_upper),u_pixel_coord_lower:new l.Uniform2f(o,a.u_pixel_coord_lower),u_scale:new l.Uniform3f(o,a.u_scale),u_fade:new l.Uniform1f(o,a.u_fade)}},fillOutline:function(o,a){return{u_matrix:new l.UniformMatrix4f(o,a.u_matrix),u_world:new l.Uniform2f(o,a.u_world)}},fillOutlinePattern:function(o,a){return{u_matrix:new l.UniformMatrix4f(o,a.u_matrix),u_world:new l.Uniform2f(o,a.u_world),u_image:new l.Uniform1i(o,a.u_image),u_texsize:new l.Uniform2f(o,a.u_texsize),u_pixel_coord_upper:new l.Uniform2f(o,a.u_pixel_coord_upper),u_pixel_coord_lower:new l.Uniform2f(o,a.u_pixel_coord_lower),u_scale:new l.Uniform3f(o,a.u_scale),u_fade:new l.Uniform1f(o,a.u_fade)}},circle:function(o,a){return{u_camera_to_center_distance:new l.Uniform1f(o,a.u_camera_to_center_distance),u_scale_with_map:new l.Uniform1i(o,a.u_scale_with_map),u_pitch_with_map:new l.Uniform1i(o,a.u_pitch_with_map),u_extrude_scale:new l.Uniform2f(o,a.u_extrude_scale),u_device_pixel_ratio:new l.Uniform1f(o,a.u_device_pixel_ratio),u_matrix:new l.UniformMatrix4f(o,a.u_matrix)}},collisionBox:function(o,a){return{u_matrix:new l.UniformMatrix4f(o,a.u_matrix),u_camera_to_center_distance:new l.Uniform1f(o,a.u_camera_to_center_distance),u_pixels_to_tile_units:new l.Uniform1f(o,a.u_pixels_to_tile_units),u_extrude_scale:new l.Uniform2f(o,a.u_extrude_scale),u_overscale_factor:new l.Uniform1f(o,a.u_overscale_factor)}},collisionCircle:function(o,a){return{u_matrix:new l.UniformMatrix4f(o,a.u_matrix),u_inv_matrix:new l.UniformMatrix4f(o,a.u_inv_matrix),u_camera_to_center_distance:new l.Uniform1f(o,a.u_camera_to_center_distance),u_viewport_size:new l.Uniform2f(o,a.u_viewport_size)}},debug:function(o,a){return{u_color:new l.UniformColor(o,a.u_color),u_matrix:new l.UniformMatrix4f(o,a.u_matrix),u_overlay:new l.Uniform1i(o,a.u_overlay),u_overlay_scale:new l.Uniform1f(o,a.u_overlay_scale)}},clippingMask:function(o,a){return{u_matrix:new l.UniformMatrix4f(o,a.u_matrix)}},heatmap:function(o,a){return{u_extrude_scale:new l.Uniform1f(o,a.u_extrude_scale),u_intensity:new l.Uniform1f(o,a.u_intensity),u_matrix:new l.UniformMatrix4f(o,a.u_matrix)}},heatmapTexture:function(o,a){return{u_matrix:new l.UniformMatrix4f(o,a.u_matrix),u_world:new l.Uniform2f(o,a.u_world),u_image:new l.Uniform1i(o,a.u_image),u_color_ramp:new l.Uniform1i(o,a.u_color_ramp),u_opacity:new l.Uniform1f(o,a.u_opacity)}},hillshade:function(o,a){return{u_matrix:new l.UniformMatrix4f(o,a.u_matrix),u_image:new l.Uniform1i(o,a.u_image),u_latrange:new l.Uniform2f(o,a.u_latrange),u_light:new l.Uniform2f(o,a.u_light),u_shadow:new l.UniformColor(o,a.u_shadow),u_highlight:new l.UniformColor(o,a.u_highlight),u_accent:new l.UniformColor(o,a.u_accent)}},hillshadePrepare:function(o,a){return{u_matrix:new l.UniformMatrix4f(o,a.u_matrix),u_image:new l.Uniform1i(o,a.u_image),u_dimension:new l.Uniform2f(o,a.u_dimension),u_zoom:new l.Uniform1f(o,a.u_zoom),u_unpack:new l.Uniform4f(o,a.u_unpack)}},line:function(o,a){return{u_matrix:new l.UniformMatrix4f(o,a.u_matrix),u_ratio:new l.Uniform1f(o,a.u_ratio),u_device_pixel_ratio:new l.Uniform1f(o,a.u_device_pixel_ratio),u_units_to_pixels:new l.Uniform2f(o,a.u_units_to_pixels)}},lineGradient:function(o,a){return{u_matrix:new l.UniformMatrix4f(o,a.u_matrix),u_ratio:new l.Uniform1f(o,a.u_ratio),u_device_pixel_ratio:new l.Uniform1f(o,a.u_device_pixel_ratio),u_units_to_pixels:new l.Uniform2f(o,a.u_units_to_pixels),u_image:new l.Uniform1i(o,a.u_image),u_image_height:new l.Uniform1f(o,a.u_image_height)}},linePattern:function(o,a){return{u_matrix:new l.UniformMatrix4f(o,a.u_matrix),u_texsize:new l.Uniform2f(o,a.u_texsize),u_ratio:new l.Uniform1f(o,a.u_ratio),u_device_pixel_ratio:new l.Uniform1f(o,a.u_device_pixel_ratio),u_image:new l.Uniform1i(o,a.u_image),u_units_to_pixels:new l.Uniform2f(o,a.u_units_to_pixels),u_scale:new l.Uniform3f(o,a.u_scale),u_fade:new l.Uniform1f(o,a.u_fade)}},lineSDF:function(o,a){return{u_matrix:new l.UniformMatrix4f(o,a.u_matrix),u_ratio:new l.Uniform1f(o,a.u_ratio),u_device_pixel_ratio:new l.Uniform1f(o,a.u_device_pixel_ratio),u_units_to_pixels:new l.Uniform2f(o,a.u_units_to_pixels),u_patternscale_a:new l.Uniform2f(o,a.u_patternscale_a),u_patternscale_b:new l.Uniform2f(o,a.u_patternscale_b),u_sdfgamma:new l.Uniform1f(o,a.u_sdfgamma),u_image:new l.Uniform1i(o,a.u_image),u_tex_y_a:new l.Uniform1f(o,a.u_tex_y_a),u_tex_y_b:new l.Uniform1f(o,a.u_tex_y_b),u_mix:new l.Uniform1f(o,a.u_mix)}},raster:function(o,a){return{u_matrix:new l.UniformMatrix4f(o,a.u_matrix),u_tl_parent:new l.Uniform2f(o,a.u_tl_parent),u_scale_parent:new l.Uniform1f(o,a.u_scale_parent),u_buffer_scale:new l.Uniform1f(o,a.u_buffer_scale),u_fade_t:new l.Uniform1f(o,a.u_fade_t),u_opacity:new l.Uniform1f(o,a.u_opacity),u_image0:new l.Uniform1i(o,a.u_image0),u_image1:new l.Uniform1i(o,a.u_image1),u_brightness_low:new l.Uniform1f(o,a.u_brightness_low),u_brightness_high:new l.Uniform1f(o,a.u_brightness_high),u_saturation_factor:new l.Uniform1f(o,a.u_saturation_factor),u_contrast_factor:new l.Uniform1f(o,a.u_contrast_factor),u_spin_weights:new l.Uniform3f(o,a.u_spin_weights)}},symbolIcon:function(o,a){return{u_is_size_zoom_constant:new l.Uniform1i(o,a.u_is_size_zoom_constant),u_is_size_feature_constant:new l.Uniform1i(o,a.u_is_size_feature_constant),u_size_t:new l.Uniform1f(o,a.u_size_t),u_size:new l.Uniform1f(o,a.u_size),u_camera_to_center_distance:new l.Uniform1f(o,a.u_camera_to_center_distance),u_pitch:new l.Uniform1f(o,a.u_pitch),u_rotate_symbol:new l.Uniform1i(o,a.u_rotate_symbol),u_aspect_ratio:new l.Uniform1f(o,a.u_aspect_ratio),u_fade_change:new l.Uniform1f(o,a.u_fade_change),u_matrix:new l.UniformMatrix4f(o,a.u_matrix),u_label_plane_matrix:new l.UniformMatrix4f(o,a.u_label_plane_matrix),u_coord_matrix:new l.UniformMatrix4f(o,a.u_coord_matrix),u_is_text:new l.Uniform1i(o,a.u_is_text),u_pitch_with_map:new l.Uniform1i(o,a.u_pitch_with_map),u_texsize:new l.Uniform2f(o,a.u_texsize),u_texture:new l.Uniform1i(o,a.u_texture)}},symbolSDF:function(o,a){return{u_is_size_zoom_constant:new l.Uniform1i(o,a.u_is_size_zoom_constant),u_is_size_feature_constant:new l.Uniform1i(o,a.u_is_size_feature_constant),u_size_t:new l.Uniform1f(o,a.u_size_t),u_size:new l.Uniform1f(o,a.u_size),u_camera_to_center_distance:new l.Uniform1f(o,a.u_camera_to_center_distance),u_pitch:new l.Uniform1f(o,a.u_pitch),u_rotate_symbol:new l.Uniform1i(o,a.u_rotate_symbol),u_aspect_ratio:new l.Uniform1f(o,a.u_aspect_ratio),u_fade_change:new l.Uniform1f(o,a.u_fade_change),u_matrix:new l.UniformMatrix4f(o,a.u_matrix),u_label_plane_matrix:new l.UniformMatrix4f(o,a.u_label_plane_matrix),u_coord_matrix:new l.UniformMatrix4f(o,a.u_coord_matrix),u_is_text:new l.Uniform1i(o,a.u_is_text),u_pitch_with_map:new l.Uniform1i(o,a.u_pitch_with_map),u_texsize:new l.Uniform2f(o,a.u_texsize),u_texture:new l.Uniform1i(o,a.u_texture),u_gamma_scale:new l.Uniform1f(o,a.u_gamma_scale),u_device_pixel_ratio:new l.Uniform1f(o,a.u_device_pixel_ratio),u_is_halo:new l.Uniform1i(o,a.u_is_halo)}},symbolTextAndIcon:function(o,a){return{u_is_size_zoom_constant:new l.Uniform1i(o,a.u_is_size_zoom_constant),u_is_size_feature_constant:new l.Uniform1i(o,a.u_is_size_feature_constant),u_size_t:new l.Uniform1f(o,a.u_size_t),u_size:new l.Uniform1f(o,a.u_size),u_camera_to_center_distance:new l.Uniform1f(o,a.u_camera_to_center_distance),u_pitch:new l.Uniform1f(o,a.u_pitch),u_rotate_symbol:new l.Uniform1i(o,a.u_rotate_symbol),u_aspect_ratio:new l.Uniform1f(o,a.u_aspect_ratio),u_fade_change:new l.Uniform1f(o,a.u_fade_change),u_matrix:new l.UniformMatrix4f(o,a.u_matrix),u_label_plane_matrix:new l.UniformMatrix4f(o,a.u_label_plane_matrix),u_coord_matrix:new l.UniformMatrix4f(o,a.u_coord_matrix),u_is_text:new l.Uniform1i(o,a.u_is_text),u_pitch_with_map:new l.Uniform1i(o,a.u_pitch_with_map),u_texsize:new l.Uniform2f(o,a.u_texsize),u_texsize_icon:new l.Uniform2f(o,a.u_texsize_icon),u_texture:new l.Uniform1i(o,a.u_texture),u_texture_icon:new l.Uniform1i(o,a.u_texture_icon),u_gamma_scale:new l.Uniform1f(o,a.u_gamma_scale),u_device_pixel_ratio:new l.Uniform1f(o,a.u_device_pixel_ratio),u_is_halo:new l.Uniform1i(o,a.u_is_halo)}},background:function(o,a){return{u_matrix:new l.UniformMatrix4f(o,a.u_matrix),u_opacity:new l.Uniform1f(o,a.u_opacity),u_color:new l.UniformColor(o,a.u_color)}},backgroundPattern:function(o,a){return{u_matrix:new l.UniformMatrix4f(o,a.u_matrix),u_opacity:new l.Uniform1f(o,a.u_opacity),u_image:new l.Uniform1i(o,a.u_image),u_pattern_tl_a:new l.Uniform2f(o,a.u_pattern_tl_a),u_pattern_br_a:new l.Uniform2f(o,a.u_pattern_br_a),u_pattern_tl_b:new l.Uniform2f(o,a.u_pattern_tl_b),u_pattern_br_b:new l.Uniform2f(o,a.u_pattern_br_b),u_texsize:new l.Uniform2f(o,a.u_texsize),u_mix:new l.Uniform1f(o,a.u_mix),u_pattern_size_a:new l.Uniform2f(o,a.u_pattern_size_a),u_pattern_size_b:new l.Uniform2f(o,a.u_pattern_size_b),u_scale_a:new l.Uniform1f(o,a.u_scale_a),u_scale_b:new l.Uniform1f(o,a.u_scale_b),u_pixel_coord_upper:new l.Uniform2f(o,a.u_pixel_coord_upper),u_pixel_coord_lower:new l.Uniform2f(o,a.u_pixel_coord_lower),u_tile_units_to_pixels:new l.Uniform1f(o,a.u_tile_units_to_pixels)}}};function Ta(o,a,s,u,P,W,$){for(var gt=o.context,Dt=gt.gl,Ht=o.useProgram("collisionBox"),re=[],le=0,de=0,Ie=0;Ie<u.length;Ie++){var Pe=u[Ie],Oe=a.getTile(Pe),Se=Oe.getBucket(s);if(Se){var Re=Pe.posMatrix;0===P[0]&&0===P[1]||(Re=o.translatePosMatrix(Pe.posMatrix,Oe,P,W));var Ze=$?Se.textCollisionBox:Se.iconCollisionBox,si=Se.collisionCircleArray;if(si.length>0){var bi=l.create(),mi=Re;l.mul(bi,Se.placementInvProjMatrix,o.transform.glCoordMatrix),l.mul(bi,bi,Se.placementViewportMatrix),re.push({circleArray:si,circleOffset:de,transform:mi,invTransform:bi}),de=le+=si.length/4}Ze&&Ht.draw(gt,Dt.LINES,he.disabled,Ce.disabled,o.colorModeForRenderPass(),Ge.disabled,ut(Re,o.transform,Oe),s.id,Ze.layoutVertexBuffer,Ze.indexBuffer,Ze.segments,null,o.transform.zoom,null,null,Ze.collisionVertexBuffer)}}if($&&re.length){var wi=o.useProgram("collisionCircle"),Ri=new l.StructArrayLayout2f1f2i16;Ri.resize(4*le),Ri._trim();for(var $i=0,Xi=0,fn=re;Xi<fn.length;Xi+=1)for(var Mn=fn[Xi],zn=0;zn<Mn.circleArray.length/4;zn++){var Ln=4*zn,Wo=Mn.circleArray[Ln+0],un=Mn.circleArray[Ln+1],to=Mn.circleArray[Ln+2],yo=Mn.circleArray[Ln+3];Ri.emplace($i++,Wo,un,to,yo,0),Ri.emplace($i++,Wo,un,to,yo,1),Ri.emplace($i++,Wo,un,to,yo,2),Ri.emplace($i++,Wo,un,to,yo,3)}(!Wr||Wr.length<2*le)&&(Wr=function(es){var Zs=2*es,Ts=new l.StructArrayLayout3ui6;Ts.resize(Zs),Ts._trim();for(var kr=0;kr<Zs;kr++){var Ur=6*kr;Ts.uint16[Ur+0]=4*kr+0,Ts.uint16[Ur+1]=4*kr+1,Ts.uint16[Ur+2]=4*kr+2,Ts.uint16[Ur+3]=4*kr+2,Ts.uint16[Ur+4]=4*kr+3,Ts.uint16[Ur+5]=4*kr+0}return Ts}(le));for(var Kn=gt.createIndexBuffer(Wr,!0),qn=gt.createVertexBuffer(Ri,l.collisionCircleLayout.members,!0),mo=0,$n=re;mo<$n.length;mo+=1){var Vn=$n[mo],Ss=Et(Vn.transform,Vn.invTransform,o.transform);wi.draw(gt,Dt.TRIANGLES,he.disabled,Ce.disabled,o.colorModeForRenderPass(),Ge.disabled,Ss,s.id,qn,Kn,l.SegmentVector.simpleSegment(0,2*Vn.circleOffset,Vn.circleArray.length,Vn.circleArray.length/2),null,o.transform.zoom,null,null,null)}qn.destroy(),Kn.destroy()}}var Ls=l.identity(new Float32Array(16));function Ka(o,a,s,u,P,W){var $=l.getAnchorAlignment(o),gt=-($.horizontalAlign-.5)*a,Dt=-($.verticalAlign-.5)*s,Ht=l.evaluateVariableOffset(o,u);return new l.Point((gt/P+Ht[0])*W,(Dt/P+Ht[1])*W)}function Va(o,a,s,u,P,W,$,gt,Dt,Ht,re){var le=o.text.placedSymbolArray,de=o.text.dynamicLayoutVertexArray,Ie=o.icon.dynamicLayoutVertexArray,Pe={};de.clear();for(var Oe=0;Oe<le.length;Oe++){var Se=le.get(Oe),Re=Se.hidden||!Se.crossTileID||o.allowVerticalPlacement&&!Se.placedOrientation?null:u[Se.crossTileID];if(Re){var Ze=new l.Point(Se.anchorX,Se.anchorY),si=ao(Ze,s?gt:$),bi=gn(W.cameraToCenterDistance,si.signedDistanceFromCamera),mi=P.evaluateSizeForFeature(o.textSizeData,Ht,Se)*bi/l.ONE_EM;s&&(mi*=o.tilePixelRatio/Dt);for(var wi=Ka(Re.anchor,Re.width,Re.height,Re.textOffset,Re.textBoxScale,mi),Ri=s?ao(Ze.add(wi),$).point:si.point.add(a?wi.rotate(-W.angle):wi),$i=o.allowVerticalPlacement&&Se.placedOrientation===l.WritingMode.vertical?Math.PI/2:0,Xi=0;Xi<Se.numGlyphs;Xi++)l.addDynamicAttributes(de,Ri,$i);re&&Se.associatedIconIndex>=0&&(Pe[Se.associatedIconIndex]={shiftedAnchor:Ri,angle:$i})}else Or(Se.numGlyphs,de)}if(re){Ie.clear();for(var fn=o.icon.placedSymbolArray,Mn=0;Mn<fn.length;Mn++){var zn=fn.get(Mn);if(zn.hidden)Or(zn.numGlyphs,Ie);else{var Ln=Pe[Mn];if(Ln)for(var Wo=0;Wo<zn.numGlyphs;Wo++)l.addDynamicAttributes(Ie,Ln.shiftedAnchor,Ln.angle);else Or(zn.numGlyphs,Ie)}}o.icon.dynamicLayoutVertexBuffer.updateData(Ie)}o.text.dynamicLayoutVertexBuffer.updateData(de)}function ve(o,a,s){return s.iconsInText&&a?"symbolTextAndIcon":o?"symbolSDF":"symbolIcon"}function Ne(o,a,s,u,P,W,$,gt,Dt,Ht,re,le){for(var de=o.context,Ie=de.gl,Pe=o.transform,Oe="map"===gt,Se="map"===Dt,Re=Oe&&"point"!==s.layout.get("symbol-placement"),Ze=Oe&&!Se&&!Re,si=void 0!==s.layout.get("symbol-sort-key").constantOr(1),bi=!1,mi=o.depthModeForSublayer(0,he.ReadOnly),wi=s.layout.get("text-variable-anchor"),Ri=[],$i=0,Xi=u;$i<Xi.length;$i+=1){var fn=Xi[$i],Mn=a.getTile(fn),zn=Mn.getBucket(s);if(zn){var Ln=P?zn.text:zn.icon;if(Ln&&Ln.segments.get().length){var Wo=Ln.programConfigurations.get(s.id),un=P||zn.sdfIcons,to=P?zn.textSizeData:zn.iconSizeData,yo=Se||0!==Pe.pitch,Kn=o.useProgram(ve(un,P,zn),Wo),qn=l.evaluateSizeForZoom(to,Pe.zoom),mo=void 0,$n=[0,0],Vn=void 0,Ss=void 0,es=null,Zs=void 0;if(P)Vn=Mn.glyphAtlasTexture,Ss=Ie.LINEAR,mo=Mn.glyphAtlasTexture.size,zn.iconsInText&&($n=Mn.imageAtlasTexture.size,es=Mn.imageAtlasTexture,Zs=yo||o.options.rotating||o.options.zooming||"composite"===to.kind||"camera"===to.kind?Ie.LINEAR:Ie.NEAREST);else{var Ts=1!==s.layout.get("icon-size").constantOr(0)||zn.iconsNeedLinear;Vn=Mn.imageAtlasTexture,Ss=un||o.options.rotating||o.options.zooming||Ts||yo?Ie.LINEAR:Ie.NEAREST,mo=Mn.imageAtlasTexture.size}var kr=Jo(Mn,1,o.transform.zoom),Ur=vr(fn.posMatrix,Se,Oe,o.transform,kr),Fr=bo(fn.posMatrix,Se,Oe,o.transform,kr),ia=wi&&zn.hasTextData(),tl="none"!==s.layout.get("icon-text-fit")&&ia&&zn.hasIconData();Re&&Vs(zn,fn.posMatrix,o,P,Ur,Fr,Se,Ht);var na=o.translatePosMatrix(fn.posMatrix,Mn,W,$),Da=Re||P&&wi||tl?Ls:Ur,Pa=o.translatePosMatrix(Fr,Mn,W,$,!0),el=un&&0!==s.paint.get(P?"text-halo-width":"icon-halo-width").constantOr(1),il={program:Kn,buffers:Ln,uniformValues:un?zn.iconsInText?ca(to.kind,qn,Ze,Se,o,na,Da,Pa,mo,$n):ls(to.kind,qn,Ze,Se,o,na,Da,Pa,P,mo,!0):ha(to.kind,qn,Ze,Se,o,na,Da,Pa,P,mo),atlasTexture:Vn,atlasTextureIcon:es,atlasInterpolation:Ss,atlasInterpolationIcon:Zs,isSDF:un,hasHalo:el};if(si&&zn.canOverlap){bi=!0;for(var Wa=0,ml=Ln.segments.get();Wa<ml.length;Wa+=1){var p=ml[Wa];Ri.push({segments:new l.SegmentVector([p]),sortKey:p.sortKey,state:il})}}else Ri.push({segments:Ln.segments,sortKey:0,state:il})}}}bi&&Ri.sort(function(D,J){return D.sortKey-J.sortKey});for(var n=0,h=Ri;n<h.length;n+=1){var d=h[n],g=d.state;if(de.activeTexture.set(Ie.TEXTURE0),g.atlasTexture.bind(g.atlasInterpolation,Ie.CLAMP_TO_EDGE),g.atlasTextureIcon&&(de.activeTexture.set(Ie.TEXTURE1),g.atlasTextureIcon&&g.atlasTextureIcon.bind(g.atlasInterpolationIcon,Ie.CLAMP_TO_EDGE)),g.isSDF){var C=g.uniformValues;g.hasHalo&&(C.u_is_halo=1,ni(g.buffers,d.segments,s,o,g.program,mi,re,le,C)),C.u_is_halo=0}ni(g.buffers,d.segments,s,o,g.program,mi,re,le,g.uniformValues)}}function ni(o,a,s,u,P,W,$,gt,Dt){var Ht=u.context;P.draw(Ht,Ht.gl.TRIANGLES,W,$,gt,Ge.disabled,Dt,s.id,o.layoutVertexBuffer,o.indexBuffer,a,s.paint,u.transform.zoom,o.programConfigurations.get(s.id),o.dynamicLayoutVertexBuffer,o.opacityVertexBuffer)}function zi(o,a,s,u,P,W,$){var gt,Dt,Ht,re,le,de=o.context.gl,Ie=s.paint.get("fill-pattern"),Pe=Ie&&Ie.constantOr(1),Oe=s.getCrossfadeParameters();$?(Dt=Pe&&!s.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline",gt=de.LINES):(Dt=Pe?"fillPattern":"fill",gt=de.TRIANGLES);for(var Se=0,Re=u;Se<Re.length;Se+=1){var Ze=Re[Se],si=a.getTile(Ze);if(!Pe||si.patternsLoaded()){var bi=si.getBucket(s);if(bi){var mi=bi.programConfigurations.get(s.id),wi=o.useProgram(Dt,mi);Pe&&(o.context.activeTexture.set(de.TEXTURE0),si.imageAtlasTexture.bind(de.LINEAR,de.CLAMP_TO_EDGE),mi.updatePaintBuffers(Oe));var Ri=Ie.constantOr(null);if(Ri&&si.imageAtlas){var $i=si.imageAtlas,Xi=$i.patternPositions[Ri.to.toString()],fn=$i.patternPositions[Ri.from.toString()];Xi&&fn&&mi.setConstantPatternPositions(Xi,fn)}var Mn=o.translatePosMatrix(Ze.posMatrix,si,s.paint.get("fill-translate"),s.paint.get("fill-translate-anchor"));if($){re=bi.indexBuffer2,le=bi.segments2;var zn=[de.drawingBufferWidth,de.drawingBufferHeight];Ht="fillOutlinePattern"===Dt&&Pe?f(Mn,o,Oe,si,zn):r(Mn,zn)}else re=bi.indexBuffer,le=bi.segments,Ht=Pe?Sa(Mn,o,Oe,si):xs(Mn);wi.draw(o.context,gt,P,o.stencilModeForClipping(Ze),W,Ge.disabled,Ht,s.id,bi.layoutVertexBuffer,re,le,s.paint,o.transform.zoom,mi)}}}}function ri(o,a,s,u,P,W,$){for(var gt=o.context,Dt=gt.gl,Ht=s.paint.get("fill-extrusion-pattern"),re=Ht.constantOr(1),le=s.getCrossfadeParameters(),de=s.paint.get("fill-extrusion-opacity"),Ie=0,Pe=u;Ie<Pe.length;Ie+=1){var Oe=Pe[Ie],Se=a.getTile(Oe),Re=Se.getBucket(s);if(Re){var Ze=Re.programConfigurations.get(s.id),si=o.useProgram(re?"fillExtrusionPattern":"fillExtrusion",Ze);re&&(o.context.activeTexture.set(Dt.TEXTURE0),Se.imageAtlasTexture.bind(Dt.LINEAR,Dt.CLAMP_TO_EDGE),Ze.updatePaintBuffers(le));var bi=Ht.constantOr(null);if(bi&&Se.imageAtlas){var mi=Se.imageAtlas,wi=mi.patternPositions[bi.to.toString()],Ri=mi.patternPositions[bi.from.toString()];wi&&Ri&&Ze.setConstantPatternPositions(wi,Ri)}var $i=o.translatePosMatrix(Oe.posMatrix,Se,s.paint.get("fill-extrusion-translate"),s.paint.get("fill-extrusion-translate-anchor")),Xi=s.paint.get("fill-extrusion-vertical-gradient"),fn=re?Es($i,o,Xi,de,Oe,le,Se):ya($i,o,Xi,de);si.draw(gt,gt.gl.TRIANGLES,P,W,$,Ge.backCCW,fn,s.id,Re.layoutVertexBuffer,Re.indexBuffer,Re.segments,s.paint,o.transform.zoom,Ze)}}}function Di(o,a,s,u,P,W){var $=o.context,gt=$.gl,Dt=a.fbo;if(Dt){var Ht=o.useProgram("hillshade");$.activeTexture.set(gt.TEXTURE0),gt.bindTexture(gt.TEXTURE_2D,Dt.colorAttachment.get());var re=function(le,de,Ie){var Pe=Ie.paint.get("hillshade-shadow-color"),Oe=Ie.paint.get("hillshade-highlight-color"),Se=Ie.paint.get("hillshade-accent-color"),Re=Ie.paint.get("hillshade-illumination-direction")*(Math.PI/180);"viewport"===Ie.paint.get("hillshade-illumination-anchor")&&(Re-=le.transform.angle);var Ze,si,bi,mi=!le.options.moving;return{u_matrix:le.transform.calculatePosMatrix(de.tileID.toUnwrapped(),mi),u_image:0,u_latrange:(Ze=de.tileID,si=Math.pow(2,Ze.canonical.z),bi=Ze.canonical.y,[new l.MercatorCoordinate(0,bi/si).toLngLat().lat,new l.MercatorCoordinate(0,(bi+1)/si).toLngLat().lat]),u_light:[Ie.paint.get("hillshade-exaggeration"),Re],u_shadow:Pe,u_highlight:Oe,u_accent:Se}}(o,a,s);Ht.draw($,gt.TRIANGLES,u,P,W,Ge.disabled,re,s.id,o.rasterBoundsBuffer,o.quadTriangleIndexBuffer,o.rasterBoundsSegments)}}function Qi(o,a,s,u,P,W){var Oe,Se,Re,Ze,$=o.context,gt=$.gl,Dt=a.dem;if(Dt&&Dt.data){var Ht=Dt.dim,re=Dt.stride,le=Dt.getPixels();if($.activeTexture.set(gt.TEXTURE1),$.pixelStoreUnpackPremultiplyAlpha.set(!1),a.demTexture=a.demTexture||o.getTileTexture(re),a.demTexture){var de=a.demTexture;de.update(le,{premultiply:!1}),de.bind(gt.NEAREST,gt.CLAMP_TO_EDGE)}else a.demTexture=new l.Texture($,le,gt.RGBA,{premultiply:!1}),a.demTexture.bind(gt.NEAREST,gt.CLAMP_TO_EDGE);$.activeTexture.set(gt.TEXTURE0);var Ie=a.fbo;if(!Ie){var Pe=new l.Texture($,{width:Ht,height:Ht,data:null},gt.RGBA);Pe.bind(gt.LINEAR,gt.CLAMP_TO_EDGE),(Ie=a.fbo=$.createFramebuffer(Ht,Ht,!0)).colorAttachment.set(Pe.texture)}$.bindFramebuffer.set(Ie.framebuffer),$.viewport.set([0,0,Ht,Ht]),o.useProgram("hillshadePrepare").draw($,gt.TRIANGLES,u,P,W,Ge.disabled,(Oe=a.tileID,Re=(Se=Dt).stride,Ze=l.create(),l.ortho(Ze,0,l.EXTENT,-l.EXTENT,0,0,1),l.translate(Ze,Ze,[0,-l.EXTENT,0]),{u_matrix:Ze,u_image:1,u_dimension:[Re,Re],u_zoom:Oe.overscaledZ,u_unpack:Se.getUnpackVector()}),s.id,o.rasterBoundsBuffer,o.quadTriangleIndexBuffer,o.rasterBoundsSegments),a.needsHillshadePrepare=!1}}function rn(o,a,s,u,P){var W=u.paint.get("raster-fade-duration");if(W>0){var $=l.browser.now(),gt=($-o.timeAdded)/W,Dt=a?($-a.timeAdded)/W:-1,Ht=s.getSource(),re=P.coveringZoomLevel({tileSize:Ht.tileSize,roundZoom:Ht.roundZoom}),le=!a||Math.abs(a.tileID.overscaledZ-re)>Math.abs(o.tileID.overscaledZ-re),de=le&&o.refreshedUponExpiration?1:l.clamp(le?gt:1-Dt,0,1);return o.refreshedUponExpiration&&gt>=1&&(o.refreshedUponExpiration=!1),a?{opacity:1,mix:1-de}:{opacity:de,mix:0}}return{opacity:1,mix:0}}var xn=new l.Color(1,0,0,1),lo=new l.Color(0,1,0,1),oo=new l.Color(0,0,1,1),Wn=new l.Color(1,0,1,1),Xt=new l.Color(0,1,1,1);function Z(o,a,s,u){ce(o,0,a+s/2,o.transform.width,s,u)}function Tt(o,a,s,u){ce(o,a-s/2,0,s,o.transform.height,u)}function ce(o,a,s,u,P,W){var $=o.context,gt=$.gl;gt.enable(gt.SCISSOR_TEST),gt.scissor(a*l.browser.devicePixelRatio,s*l.browser.devicePixelRatio,u*l.browser.devicePixelRatio,P*l.browser.devicePixelRatio),$.clear({color:W}),gt.disable(gt.SCISSOR_TEST)}function Ke(o,a,s){var u=o.context,P=u.gl,W=s.posMatrix,$=o.useProgram("debug"),gt=he.disabled,Dt=Ce.disabled,Ht=o.colorModeForRenderPass();u.activeTexture.set(P.TEXTURE0),o.emptyTexture.bind(P.LINEAR,P.CLAMP_TO_EDGE),$.draw(u,P.LINE_STRIP,gt,Dt,Ht,Ge.disabled,ae(W,l.Color.red),"$debug",o.debugBuffer,o.tileBorderIndexBuffer,o.debugSegments);var re=a.getTileByID(s.key).latestRawTileData,le=Math.floor((re&&re.byteLength||0)/1024),de=a.getTile(s).tileSize,Ie=512/Math.min(de,512)*(s.overscaledZ/o.transform.zoom)*.5,Pe=s.canonical.toString();s.overscaledZ!==s.canonical.z&&(Pe+=" => "+s.overscaledZ),function(Oe,Se){Oe.initDebugOverlayCanvas();var Re=Oe.debugOverlayCanvas,Ze=Oe.context.gl,si=Oe.debugOverlayCanvas.getContext("2d");si.clearRect(0,0,Re.width,Re.height),si.shadowColor="white",si.shadowBlur=2,si.lineWidth=1.5,si.strokeStyle="white",si.textBaseline="top",si.font="bold 36px Open Sans, sans-serif",si.fillText(Se,5,5),si.strokeText(Se,5,5),Oe.debugOverlayTexture.update(Re),Oe.debugOverlayTexture.bind(Ze.LINEAR,Ze.CLAMP_TO_EDGE)}(o,Pe+" "+le+"kb"),$.draw(u,P.TRIANGLES,gt,Dt,De.alphaBlended,Ge.disabled,ae(W,l.Color.transparent,Ie),"$debug",o.debugBuffer,o.quadTriangleIndexBuffer,o.debugSegments)}var $e={symbol:function(o,a,s,u,P){if("translucent"===o.renderPass){var W=Ce.disabled,$=o.colorModeForRenderPass();s.layout.get("text-variable-anchor")&&function(gt,Dt,Ht,re,le,de,Ie){for(var Pe=Dt.transform,Oe="map"===le,Se="map"===de,Re=0,Ze=gt;Re<Ze.length;Re+=1){var si=Ze[Re],bi=re.getTile(si),mi=bi.getBucket(Ht);if(mi&&mi.text&&mi.text.segments.get().length){var wi=l.evaluateSizeForZoom(mi.textSizeData,Pe.zoom),Ri=Jo(bi,1,Dt.transform.zoom),$i=vr(si.posMatrix,Se,Oe,Dt.transform,Ri),Xi="none"!==Ht.layout.get("icon-text-fit")&&mi.hasIconData();if(wi){var fn=Math.pow(2,Pe.zoom-bi.tileID.overscaledZ);Va(mi,Oe,Se,Ie,l.symbolSize,Pe,$i,si.posMatrix,fn,wi,Xi)}}}}(u,o,s,a,s.layout.get("text-rotation-alignment"),s.layout.get("text-pitch-alignment"),P),0!==s.paint.get("icon-opacity").constantOr(1)&&Ne(o,a,s,u,!1,s.paint.get("icon-translate"),s.paint.get("icon-translate-anchor"),s.layout.get("icon-rotation-alignment"),s.layout.get("icon-pitch-alignment"),s.layout.get("icon-keep-upright"),W,$),0!==s.paint.get("text-opacity").constantOr(1)&&Ne(o,a,s,u,!0,s.paint.get("text-translate"),s.paint.get("text-translate-anchor"),s.layout.get("text-rotation-alignment"),s.layout.get("text-pitch-alignment"),s.layout.get("text-keep-upright"),W,$),a.map.showCollisionBoxes&&(Ta(o,a,s,u,s.paint.get("text-translate"),s.paint.get("text-translate-anchor"),!0),Ta(o,a,s,u,s.paint.get("icon-translate"),s.paint.get("icon-translate-anchor"),!1))}},circle:function(o,a,s,u){if("translucent"===o.renderPass){var P=s.paint.get("circle-opacity"),W=s.paint.get("circle-stroke-width"),$=s.paint.get("circle-stroke-opacity"),gt=void 0!==s.layout.get("circle-sort-key").constantOr(1);if(0!==P.constantOr(1)||0!==W.constantOr(1)&&0!==$.constantOr(1)){for(var Dt=o.context,Ht=Dt.gl,re=o.depthModeForSublayer(0,he.ReadOnly),le=Ce.disabled,de=o.colorModeForRenderPass(),Ie=[],Pe=0;Pe<u.length;Pe++){var Oe=u[Pe],Se=a.getTile(Oe),Re=Se.getBucket(s);if(Re){var Ze=Re.programConfigurations.get(s.id),si={programConfiguration:Ze,program:o.useProgram("circle",Ze),layoutVertexBuffer:Re.layoutVertexBuffer,indexBuffer:Re.indexBuffer,uniformValues:U(o,Oe,Se,s)};if(gt)for(var bi=0,mi=Re.segments.get();bi<mi.length;bi+=1){var wi=mi[bi];Ie.push({segments:new l.SegmentVector([wi]),sortKey:wi.sortKey,state:si})}else Ie.push({segments:Re.segments,sortKey:0,state:si})}}gt&&Ie.sort(function(Mn,zn){return Mn.sortKey-zn.sortKey});for(var Ri=0,$i=Ie;Ri<$i.length;Ri+=1){var Xi=$i[Ri],fn=Xi.state;fn.program.draw(Dt,Ht.TRIANGLES,re,le,de,Ge.disabled,fn.uniformValues,s.id,fn.layoutVertexBuffer,fn.indexBuffer,Xi.segments,s.paint,o.transform.zoom,fn.programConfiguration)}}}},heatmap:function(o,a,s,u){if(0!==s.paint.get("heatmap-opacity"))if("offscreen"===o.renderPass){var P=o.context,W=P.gl,$=Ce.disabled,gt=new De([W.ONE,W.ONE],l.Color.transparent,[!0,!0,!0,!0]);(function(Ie,Pe,Oe){var Se=Ie.gl;Ie.activeTexture.set(Se.TEXTURE1),Ie.viewport.set([0,0,Pe.width/4,Pe.height/4]);var si,bi,mi,wi,Ri,Re=Oe.heatmapFbo;if(Re)Se.bindTexture(Se.TEXTURE_2D,Re.colorAttachment.get()),Ie.bindFramebuffer.set(Re.framebuffer);else{var Ze=Se.createTexture();Se.bindTexture(Se.TEXTURE_2D,Ze),Se.texParameteri(Se.TEXTURE_2D,Se.TEXTURE_WRAP_S,Se.CLAMP_TO_EDGE),Se.texParameteri(Se.TEXTURE_2D,Se.TEXTURE_WRAP_T,Se.CLAMP_TO_EDGE),Se.texParameteri(Se.TEXTURE_2D,Se.TEXTURE_MIN_FILTER,Se.LINEAR),Se.texParameteri(Se.TEXTURE_2D,Se.TEXTURE_MAG_FILTER,Se.LINEAR),mi=Ze,wi=Re=Oe.heatmapFbo=Ie.createFramebuffer(Pe.width/4,Pe.height/4,!1),(Ri=(si=Ie).gl).texImage2D(Ri.TEXTURE_2D,0,Ri.RGBA,(bi=Pe).width/4,bi.height/4,0,Ri.RGBA,si.extRenderToTextureHalfFloat?si.extTextureHalfFloat.HALF_FLOAT_OES:Ri.UNSIGNED_BYTE,null),wi.colorAttachment.set(mi)}})(P,o,s),P.clear({color:l.Color.transparent});for(var Dt=0;Dt<u.length;Dt++){var Ht=u[Dt];if(!a.hasRenderableParent(Ht)){var re=a.getTile(Ht),le=re.getBucket(s);if(le){var de=le.programConfigurations.get(s.id);o.useProgram("heatmap",de).draw(P,W.TRIANGLES,he.disabled,$,gt,Ge.disabled,Xe(Ht.posMatrix,re,o.transform.zoom,s.paint.get("heatmap-intensity")),s.id,le.layoutVertexBuffer,le.indexBuffer,le.segments,s.paint,o.transform.zoom,de)}}}P.viewport.set([0,0,o.width,o.height])}else"translucent"===o.renderPass&&(o.context.setColorMode(o.colorModeForRenderPass()),function(Ie,Pe){var Oe=Ie.context,Se=Oe.gl,Re=Pe.heatmapFbo;if(Re){Oe.activeTexture.set(Se.TEXTURE0),Se.bindTexture(Se.TEXTURE_2D,Re.colorAttachment.get()),Oe.activeTexture.set(Se.TEXTURE1);var Ze=Pe.colorRampTexture;Ze||(Ze=Pe.colorRampTexture=new l.Texture(Oe,Pe.colorRamp,Se.RGBA)),Ze.bind(Se.LINEAR,Se.CLAMP_TO_EDGE),Ie.useProgram("heatmapTexture").draw(Oe,Se.TRIANGLES,he.disabled,Ce.disabled,Ie.colorModeForRenderPass(),Ge.disabled,function(si,bi,mi,wi){var Ri=l.create();l.ortho(Ri,0,si.width,si.height,0,0,1);var $i=si.context.gl;return{u_matrix:Ri,u_world:[$i.drawingBufferWidth,$i.drawingBufferHeight],u_image:0,u_color_ramp:1,u_opacity:bi.paint.get("heatmap-opacity")}}(Ie,Pe),Pe.id,Ie.viewportBuffer,Ie.quadTriangleIndexBuffer,Ie.viewportSegments,Pe.paint,Ie.transform.zoom)}}(o,s))},line:function(o,a,s,u){if("translucent"===o.renderPass){var P=s.paint.get("line-opacity"),W=s.paint.get("line-width");if(0!==P.constantOr(1)&&0!==W.constantOr(1))for(var $=o.depthModeForSublayer(0,he.ReadOnly),gt=o.colorModeForRenderPass(),Dt=s.paint.get("line-dasharray"),Ht=s.paint.get("line-pattern"),re=Ht.constantOr(1),le=s.paint.get("line-gradient"),de=s.getCrossfadeParameters(),Ie=re?"linePattern":Dt?"lineSDF":le?"lineGradient":"line",Pe=o.context,Oe=Pe.gl,Se=!0,Re=0,Ze=u;Re<Ze.length;Re+=1){var si=Ze[Re],bi=a.getTile(si);if(!re||bi.patternsLoaded()){var mi=bi.getBucket(s);if(mi){var wi=mi.programConfigurations.get(s.id),Ri=o.context.program.get(),$i=o.useProgram(Ie,wi),Xi=Se||$i.program!==Ri,fn=Ht.constantOr(null);if(fn&&bi.imageAtlas){var Mn=bi.imageAtlas,zn=Mn.patternPositions[fn.to.toString()],Ln=Mn.patternPositions[fn.from.toString()];zn&&Ln&&wi.setConstantPatternPositions(zn,Ln)}var Wo=re?Sn(o,bi,s,de):Dt?no(o,bi,s,Dt,de):le?Ci(o,bi,s,mi.lineClipsArray.length):ki(o,bi,s);if(re)Pe.activeTexture.set(Oe.TEXTURE0),bi.imageAtlasTexture.bind(Oe.LINEAR,Oe.CLAMP_TO_EDGE),wi.updatePaintBuffers(de);else if(Dt&&(Xi||o.lineAtlas.dirty))Pe.activeTexture.set(Oe.TEXTURE0),o.lineAtlas.bind(Pe);else if(le){var un=mi.gradients[s.id],to=un.texture;if(s.gradientVersion!==un.version){var yo=256;if(s.stepInterpolant){var Kn=a.getSource().maxzoom,qn=si.canonical.z===Kn?Math.ceil(1<<o.transform.maxZoom-si.canonical.z):1;yo=l.clamp(l.nextPowerOfTwo(mi.maxLineLength/l.EXTENT*1024*qn),256,Pe.maxTextureSize)}un.gradient=l.renderColorRamp({expression:s.gradientExpression(),evaluationKey:"lineProgress",resolution:yo,image:un.gradient||void 0,clips:mi.lineClipsArray}),un.texture?un.texture.update(un.gradient):un.texture=new l.Texture(Pe,un.gradient,Oe.RGBA),un.version=s.gradientVersion,to=un.texture}Pe.activeTexture.set(Oe.TEXTURE0),to.bind(s.stepInterpolant?Oe.NEAREST:Oe.LINEAR,Oe.CLAMP_TO_EDGE)}$i.draw(Pe,Oe.TRIANGLES,$,o.stencilModeForClipping(si),gt,Ge.disabled,Wo,s.id,mi.layoutVertexBuffer,mi.indexBuffer,mi.segments,s.paint,o.transform.zoom,wi,mi.layoutVertexBuffer2),Se=!1}}}}},fill:function(o,a,s,u){var P=s.paint.get("fill-color"),W=s.paint.get("fill-opacity");if(0!==W.constantOr(1)){var $=o.colorModeForRenderPass(),gt=s.paint.get("fill-pattern"),Dt=o.opaquePassEnabledForLayer()&&!gt.constantOr(1)&&1===P.constantOr(l.Color.transparent).a&&1===W.constantOr(0)?"opaque":"translucent";if(o.renderPass===Dt){var Ht=o.depthModeForSublayer(1,"opaque"===o.renderPass?he.ReadWrite:he.ReadOnly);zi(o,a,s,u,Ht,$,!1)}if("translucent"===o.renderPass&&s.paint.get("fill-antialias")){var re=o.depthModeForSublayer(s.getPaintProperty("fill-outline-color")?2:0,he.ReadOnly);zi(o,a,s,u,re,$,!0)}}},"fill-extrusion":function(o,a,s,u){var P=s.paint.get("fill-extrusion-opacity");if(0!==P&&"translucent"===o.renderPass){var W=new he(o.context.gl.LEQUAL,he.ReadWrite,o.depthRangeFor3D);if(1!==P||s.paint.get("fill-extrusion-pattern").constantOr(1))ri(o,a,s,u,W,Ce.disabled,De.disabled),ri(o,a,s,u,W,o.stencilModeFor3D(),o.colorModeForRenderPass());else{var $=o.colorModeForRenderPass();ri(o,a,s,u,W,Ce.disabled,$)}}},hillshade:function(o,a,s,u){if("offscreen"===o.renderPass||"translucent"===o.renderPass){for(var P=o.context,W=o.depthModeForSublayer(0,he.ReadOnly),$=o.colorModeForRenderPass(),gt="translucent"===o.renderPass?o.stencilConfigForOverlap(u):[{},u],Dt=gt[0],Ht=0,re=gt[1];Ht<re.length;Ht+=1){var le=re[Ht],de=a.getTile(le);de.needsHillshadePrepare&&"offscreen"===o.renderPass?Qi(o,de,s,W,Ce.disabled,$):"translucent"===o.renderPass&&Di(o,de,s,W,Dt[le.overscaledZ],$)}P.viewport.set([0,0,o.width,o.height])}},raster:function(o,a,s,u){if("translucent"===o.renderPass&&0!==s.paint.get("raster-opacity")&&u.length)for(var P=o.context,W=P.gl,$=a.getSource(),gt=o.useProgram("raster"),Dt=o.colorModeForRenderPass(),Ht=$ instanceof Fe?[{},u]:o.stencilConfigForOverlap(u),re=Ht[0],le=Ht[1],de=le[le.length-1].overscaledZ,Ie=!o.options.moving,Pe=0,Oe=le;Pe<Oe.length;Pe+=1){var Se=Oe[Pe],Re=o.depthModeForSublayer(Se.overscaledZ-de,1===s.paint.get("raster-opacity")?he.ReadWrite:he.ReadOnly,W.LESS),Ze=a.getTile(Se),si=o.transform.calculatePosMatrix(Se.toUnwrapped(),Ie);Ze.registerFadeDuration(s.paint.get("raster-fade-duration"));var bi=a.findLoadedParent(Se,0),mi=rn(Ze,bi,a,s,o.transform),wi=void 0,Ri=void 0,$i="nearest"===s.paint.get("raster-resampling")?W.NEAREST:W.LINEAR;P.activeTexture.set(W.TEXTURE0),Ze.texture.bind($i,W.CLAMP_TO_EDGE,W.LINEAR_MIPMAP_NEAREST),P.activeTexture.set(W.TEXTURE1),bi?(bi.texture.bind($i,W.CLAMP_TO_EDGE,W.LINEAR_MIPMAP_NEAREST),wi=Math.pow(2,bi.tileID.overscaledZ-Ze.tileID.overscaledZ),Ri=[Ze.tileID.canonical.x*wi%1,Ze.tileID.canonical.y*wi%1]):Ze.texture.bind($i,W.CLAMP_TO_EDGE,W.LINEAR_MIPMAP_NEAREST);var Xi=Fs(si,Ri||[0,0],wi||1,mi,s);$ instanceof Fe?gt.draw(P,W.TRIANGLES,Re,Ce.disabled,Dt,Ge.disabled,Xi,s.id,$.boundsBuffer,o.quadTriangleIndexBuffer,$.boundsSegments):gt.draw(P,W.TRIANGLES,Re,re[Se.overscaledZ],Dt,Ge.disabled,Xi,s.id,o.rasterBoundsBuffer,o.quadTriangleIndexBuffer,o.rasterBoundsSegments)}},background:function(o,a,s){var u=s.paint.get("background-color"),P=s.paint.get("background-opacity");if(0!==P){var W=o.context,$=W.gl,gt=o.transform,Dt=gt.tileSize,Ht=s.paint.get("background-pattern");if(!o.isPatternMissing(Ht)){var re=!Ht&&1===u.a&&1===P&&o.opaquePassEnabledForLayer()?"opaque":"translucent";if(o.renderPass===re){var le=Ce.disabled,de=o.depthModeForSublayer(0,"opaque"===re?he.ReadWrite:he.ReadOnly),Ie=o.colorModeForRenderPass(),Pe=o.useProgram(Ht?"backgroundPattern":"background"),Oe=gt.coveringTiles({tileSize:Dt});Ht&&(W.activeTexture.set($.TEXTURE0),o.imageManager.bind(o.context));for(var Se=s.getCrossfadeParameters(),Re=0,Ze=Oe;Re<Ze.length;Re+=1){var si=Ze[Re],bi=o.transform.calculatePosMatrix(si.toUnwrapped()),mi=Ht?Ms(bi,P,o,Ht,{tileID:si,tileSize:Dt},Se):ur(bi,P,u);Pe.draw(W,$.TRIANGLES,de,le,Ie,Ge.disabled,mi,s.id,o.tileExtentBuffer,o.quadTriangleIndexBuffer,o.tileExtentSegments)}}}}},debug:function(o,a,s){for(var u=0;u<s.length;u++)Ke(o,a,s[u])},custom:function(o,a,s){var u=o.context,P=s.implementation;if("offscreen"===o.renderPass){var W=P.prerender;W&&(o.setCustomLayerDefaults(),u.setColorMode(o.colorModeForRenderPass()),W.call(P,u.gl,o.transform.customLayerMatrix()),u.setDirty(),o.setBaseState())}else if("translucent"===o.renderPass){o.setCustomLayerDefaults(),u.setColorMode(o.colorModeForRenderPass()),u.setStencilMode(Ce.disabled);var $="3d"===P.renderingMode?new he(o.context.gl.LEQUAL,he.ReadWrite,o.depthRangeFor3D):o.depthModeForSublayer(0,he.ReadOnly);u.setDepthMode($),P.render(u.gl,o.transform.customLayerMatrix()),u.setDirty(),o.setBaseState(),u.bindFramebuffer.set(null)}}},ti=function(o,a){this.context=new oe(o),this.transform=a,this._tileTextures={},this.setup(),this.numSublayers=Ee.maxUnderzooming+Ee.maxOverzooming+1,this.depthEpsilon=1/Math.pow(2,16),this.crossTileSymbolIndex=new ei,this.gpuTimers={}};ti.prototype.resize=function(o,a){if(this.width=o*l.browser.devicePixelRatio,this.height=a*l.browser.devicePixelRatio,this.context.viewport.set([0,0,this.width,this.height]),this.style)for(var s=0,u=this.style._order;s<u.length;s+=1)this.style._layers[u[s]].resize()},ti.prototype.setup=function(){var o=this.context,a=new l.StructArrayLayout2i4;a.emplaceBack(0,0),a.emplaceBack(l.EXTENT,0),a.emplaceBack(0,l.EXTENT),a.emplaceBack(l.EXTENT,l.EXTENT),this.tileExtentBuffer=o.createVertexBuffer(a,cn.members),this.tileExtentSegments=l.SegmentVector.simpleSegment(0,0,4,2);var s=new l.StructArrayLayout2i4;s.emplaceBack(0,0),s.emplaceBack(l.EXTENT,0),s.emplaceBack(0,l.EXTENT),s.emplaceBack(l.EXTENT,l.EXTENT),this.debugBuffer=o.createVertexBuffer(s,cn.members),this.debugSegments=l.SegmentVector.simpleSegment(0,0,4,5);var u=new l.StructArrayLayout4i8;u.emplaceBack(0,0,0,0),u.emplaceBack(l.EXTENT,0,l.EXTENT,0),u.emplaceBack(0,l.EXTENT,0,l.EXTENT),u.emplaceBack(l.EXTENT,l.EXTENT,l.EXTENT,l.EXTENT),this.rasterBoundsBuffer=o.createVertexBuffer(u,He.members),this.rasterBoundsSegments=l.SegmentVector.simpleSegment(0,0,4,2);var P=new l.StructArrayLayout2i4;P.emplaceBack(0,0),P.emplaceBack(1,0),P.emplaceBack(0,1),P.emplaceBack(1,1),this.viewportBuffer=o.createVertexBuffer(P,cn.members),this.viewportSegments=l.SegmentVector.simpleSegment(0,0,4,2);var W=new l.StructArrayLayout1ui2;W.emplaceBack(0),W.emplaceBack(1),W.emplaceBack(3),W.emplaceBack(2),W.emplaceBack(0),this.tileBorderIndexBuffer=o.createIndexBuffer(W);var $=new l.StructArrayLayout3ui6;$.emplaceBack(0,1,2),$.emplaceBack(2,1,3),this.quadTriangleIndexBuffer=o.createIndexBuffer($),this.emptyTexture=new l.Texture(o,{width:1,height:1,data:new Uint8Array([0,0,0,0])},o.gl.RGBA);var gt=this.context.gl;this.stencilClearMode=new Ce({func:gt.ALWAYS,mask:0},0,255,gt.ZERO,gt.ZERO,gt.ZERO)},ti.prototype.clearStencil=function(){var o=this.context,a=o.gl;this.nextStencilID=1,this.currentStencilSource=void 0;var s=l.create();l.ortho(s,0,this.width,this.height,0,0,1),l.scale(s,s,[a.drawingBufferWidth,a.drawingBufferHeight,0]),this.useProgram("clippingMask").draw(o,a.TRIANGLES,he.disabled,this.stencilClearMode,De.disabled,Ge.disabled,qe(s),"$clipping",this.viewportBuffer,this.quadTriangleIndexBuffer,this.viewportSegments)},ti.prototype._renderTileClippingMasks=function(o,a){if(this.currentStencilSource!==o.source&&o.isTileClipped()&&a&&a.length){this.currentStencilSource=o.source;var s=this.context,u=s.gl;this.nextStencilID+a.length>256&&this.clearStencil(),s.setColorMode(De.disabled),s.setDepthMode(he.disabled);var P=this.useProgram("clippingMask");this._tileClippingMaskIDs={};for(var W=0,$=a;W<$.length;W+=1){var gt=$[W],Dt=this._tileClippingMaskIDs[gt.key]=this.nextStencilID++;P.draw(s,u.TRIANGLES,he.disabled,new Ce({func:u.ALWAYS,mask:0},Dt,255,u.KEEP,u.KEEP,u.REPLACE),De.disabled,Ge.disabled,qe(gt.posMatrix),"$clipping",this.tileExtentBuffer,this.quadTriangleIndexBuffer,this.tileExtentSegments)}}},ti.prototype.stencilModeFor3D=function(){this.currentStencilSource=void 0,this.nextStencilID+1>256&&this.clearStencil();var o=this.nextStencilID++,a=this.context.gl;return new Ce({func:a.NOTEQUAL,mask:255},o,255,a.KEEP,a.KEEP,a.REPLACE)},ti.prototype.stencilModeForClipping=function(o){var a=this.context.gl;return new Ce({func:a.EQUAL,mask:255},this._tileClippingMaskIDs[o.key],0,a.KEEP,a.KEEP,a.REPLACE)},ti.prototype.stencilConfigForOverlap=function(o){var a,s=this.context.gl,u=o.sort(function(Dt,Ht){return Ht.overscaledZ-Dt.overscaledZ}),P=u[u.length-1].overscaledZ,W=u[0].overscaledZ-P+1;if(W>1){this.currentStencilSource=void 0,this.nextStencilID+W>256&&this.clearStencil();for(var $={},gt=0;gt<W;gt++)$[gt+P]=new Ce({func:s.GEQUAL,mask:255},gt+this.nextStencilID,255,s.KEEP,s.KEEP,s.REPLACE);return this.nextStencilID+=W,[$,u]}return[(a={},a[P]=Ce.disabled,a),u]},ti.prototype.colorModeForRenderPass=function(){var o=this.context.gl;return this._showOverdrawInspector?new De([o.CONSTANT_COLOR,o.ONE],new l.Color(1/8,1/8,1/8,0),[!0,!0,!0,!0]):"opaque"===this.renderPass?De.unblended:De.alphaBlended},ti.prototype.depthModeForSublayer=function(o,a,s){if(!this.opaquePassEnabledForLayer())return he.disabled;var u=1-((1+this.currentLayer)*this.numSublayers+o)*this.depthEpsilon;return new he(s||this.context.gl.LEQUAL,a,[u,u])},ti.prototype.opaquePassEnabledForLayer=function(){return this.currentLayer<this.opaquePassCutoff},ti.prototype.render=function(o,a){var s=this;this.style=o,this.options=a,this.lineAtlas=o.lineAtlas,this.imageManager=o.imageManager,this.glyphManager=o.glyphManager,this.symbolFadeChange=o.placement.symbolFadeChange(l.browser.now()),this.imageManager.beginFrame();var u=this.style._order,P=this.style.sourceCaches;for(var W in P){var $=P[W];$.used&&$.prepare(this.context)}var gt,Dt,Ht={},re={},le={};for(var de in P){var Ie=P[de];Ht[de]=Ie.getVisibleCoordinates(),re[de]=Ht[de].slice().reverse(),le[de]=Ie.getVisibleCoordinates(!0).reverse()}this.opaquePassCutoff=1/0;for(var Pe=0;Pe<u.length;Pe++)if(this.style._layers[u[Pe]].is3D()){this.opaquePassCutoff=Pe;break}this.renderPass="offscreen";for(var Oe=0,Se=u;Oe<Se.length;Oe+=1){var Re=this.style._layers[Se[Oe]];if(Re.hasOffscreenPass()&&!Re.isHidden(this.transform.zoom)){var Ze=re[Re.source];("custom"===Re.type||Ze.length)&&this.renderLayer(this,P[Re.source],Re,Ze)}}for(this.context.bindFramebuffer.set(null),this.context.clear({color:a.showOverdrawInspector?l.Color.black:l.Color.transparent,depth:1}),this.clearStencil(),this._showOverdrawInspector=a.showOverdrawInspector,this.depthRangeFor3D=[0,1-(o._order.length+2)*this.numSublayers*this.depthEpsilon],this.renderPass="opaque",this.currentLayer=u.length-1;this.currentLayer>=0;this.currentLayer--){var si=this.style._layers[u[this.currentLayer]],bi=P[si.source],mi=Ht[si.source];this._renderTileClippingMasks(si,mi),this.renderLayer(this,bi,si,mi)}for(this.renderPass="translucent",this.currentLayer=0;this.currentLayer<u.length;this.currentLayer++){var wi=this.style._layers[u[this.currentLayer]],Ri=P[wi.source],$i=("symbol"===wi.type?le:re)[wi.source];this._renderTileClippingMasks(wi,Ht[wi.source]),this.renderLayer(this,Ri,wi,$i)}this.options.showTileBoundaries&&(l.values(this.style._layers).forEach(function(Xi){Xi.source&&!Xi.isHidden(s.transform.zoom)&&(Xi.source!==(Dt&&Dt.id)&&(Dt=s.style.sourceCaches[Xi.source]),(!gt||gt.getSource().maxzoom<Dt.getSource().maxzoom)&&(gt=Dt))}),gt&&$e.debug(this,gt,gt.getVisibleCoordinates())),this.options.showPadding&&function(Xi){var fn=Xi.transform.padding;Z(Xi,Xi.transform.height-(fn.top||0),3,xn),Z(Xi,fn.bottom||0,3,lo),Tt(Xi,fn.left||0,3,oo),Tt(Xi,Xi.transform.width-(fn.right||0),3,Wn);var zn,Ln,Wo,un,Mn=Xi.transform.centerPoint;ce(zn=Xi,(Ln=Mn.x)-1,(Wo=Xi.transform.height-Mn.y)-10,2,20,un=Xt),ce(zn,Ln-10,Wo-1,20,2,un)}(this),this.context.setDefault()},ti.prototype.renderLayer=function(o,a,s,u){s.isHidden(this.transform.zoom)||("background"===s.type||"custom"===s.type||u.length)&&(this.id=s.id,this.gpuTimingStart(s),$e[s.type](o,a,s,u,this.style.placement.variableOffsets),this.gpuTimingEnd())},ti.prototype.gpuTimingStart=function(o){if(this.options.gpuTiming){var a=this.context.extTimerQuery,s=this.gpuTimers[o.id];s||(s=this.gpuTimers[o.id]={calls:0,cpuTime:0,query:a.createQueryEXT()}),s.calls++,a.beginQueryEXT(a.TIME_ELAPSED_EXT,s.query)}},ti.prototype.gpuTimingEnd=function(){if(this.options.gpuTiming){var o=this.context.extTimerQuery;o.endQueryEXT(o.TIME_ELAPSED_EXT)}},ti.prototype.collectGpuTimers=function(){var o=this.gpuTimers;return this.gpuTimers={},o},ti.prototype.queryGpuTimers=function(o){var a={};for(var s in o){var u=o[s],P=this.context.extTimerQuery,W=P.getQueryObjectEXT(u.query,P.QUERY_RESULT_EXT)/1e6;P.deleteQueryEXT(u.query),a[s]=W}return a},ti.prototype.translatePosMatrix=function(o,a,s,u,P){if(!s[0]&&!s[1])return o;var W=P?"map"===u?this.transform.angle:0:"viewport"===u?-this.transform.angle:0;if(W){var $=Math.sin(W),gt=Math.cos(W);s=[s[0]*gt-s[1]*$,s[0]*$+s[1]*gt]}var Dt=[P?s[0]:Jo(a,s[0],this.transform.zoom),P?s[1]:Jo(a,s[1],this.transform.zoom),0],Ht=new Float32Array(16);return l.translate(Ht,o,Dt),Ht},ti.prototype.saveTileTexture=function(o){var a=this._tileTextures[o.size[0]];a?a.push(o):this._tileTextures[o.size[0]]=[o]},ti.prototype.getTileTexture=function(o){var a=this._tileTextures[o];return a&&a.length>0?a.pop():null},ti.prototype.isPatternMissing=function(o){if(!o)return!1;if(!o.from||!o.to)return!0;var a=this.imageManager.getPattern(o.from.toString()),s=this.imageManager.getPattern(o.to.toString());return!a||!s},ti.prototype.useProgram=function(o,a){this.cache=this.cache||{};var s=""+o+(a?a.cacheKey:"")+(this._showOverdrawInspector?"/overdraw":"");return this.cache[s]||(this.cache[s]=new Qs(this.context,o,la[o],a,Hs[o],this._showOverdrawInspector)),this.cache[s]},ti.prototype.setCustomLayerDefaults=function(){this.context.unbindVAO(),this.context.cullFace.setDefault(),this.context.activeTexture.setDefault(),this.context.pixelStoreUnpack.setDefault(),this.context.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.context.pixelStoreUnpackFlipY.setDefault()},ti.prototype.setBaseState=function(){var o=this.context.gl;this.context.cullFace.set(!1),this.context.viewport.set([0,0,this.width,this.height]),this.context.blendEquation.set(o.FUNC_ADD)},ti.prototype.initDebugOverlayCanvas=function(){null==this.debugOverlayCanvas&&(this.debugOverlayCanvas=l.window.document.createElement("canvas"),this.debugOverlayCanvas.width=512,this.debugOverlayCanvas.height=512,this.debugOverlayTexture=new l.Texture(this.context,this.debugOverlayCanvas,this.context.gl.RGBA))},ti.prototype.destroy=function(){this.emptyTexture.destroy(),this.debugOverlayTexture&&this.debugOverlayTexture.destroy()};var Bi=function(o,a){this.points=o,this.planes=a};Bi.fromInvProjectionMatrix=function(o,a,s){var u=Math.pow(2,s),P=[[-1,1,-1,1],[1,1,-1,1],[1,-1,-1,1],[-1,-1,-1,1],[-1,1,1,1],[1,1,1,1],[1,-1,1,1],[-1,-1,1,1]].map(function($){return l.transformMat4([],$,o)}).map(function($){return l.scale$1([],$,1/$[3]/a*u)}),W=[[0,1,2],[6,5,4],[0,3,7],[2,1,5],[3,2,6],[0,4,5]].map(function($){var gt=l.sub([],P[$[0]],P[$[1]]),Dt=l.sub([],P[$[2]],P[$[1]]),Ht=l.normalize([],l.cross([],gt,Dt)),re=-l.dot(Ht,P[$[1]]);return Ht.concat(re)});return new Bi(P,W)};var Wi=function(o,a){this.min=o,this.max=a,this.center=l.scale$2([],l.add([],this.min,this.max),.5)};Wi.prototype.quadrant=function(o){for(var a=[o%2==0,o<2],s=l.clone$2(this.min),u=l.clone$2(this.max),P=0;P<a.length;P++)s[P]=a[P]?this.min[P]:this.center[P],u[P]=a[P]?this.center[P]:this.max[P];return u[2]=this.max[2],new Wi(s,u)},Wi.prototype.distanceX=function(o){return Math.max(Math.min(this.max[0],o[0]),this.min[0])-o[0]},Wi.prototype.distanceY=function(o){return Math.max(Math.min(this.max[1],o[1]),this.min[1])-o[1]},Wi.prototype.intersects=function(o){for(var a=[[this.min[0],this.min[1],0,1],[this.max[0],this.min[1],0,1],[this.max[0],this.max[1],0,1],[this.min[0],this.max[1],0,1]],s=!0,u=0;u<o.planes.length;u++){for(var P=o.planes[u],W=0,$=0;$<a.length;$++)W+=l.dot$1(P,a[$])>=0;if(0===W)return 0;W!==a.length&&(s=!1)}if(s)return 2;for(var gt=0;gt<3;gt++){for(var Dt=Number.MAX_VALUE,Ht=-Number.MAX_VALUE,re=0;re<o.points.length;re++){var le=o.points[re][gt]-this.min[gt];Dt=Math.min(Dt,le),Ht=Math.max(Ht,le)}if(Ht<0||Dt>this.max[gt]-this.min[gt])return 0}return 1};var en=function(o,a,s,u){if(void 0===o&&(o=0),void 0===a&&(a=0),void 0===s&&(s=0),void 0===u&&(u=0),isNaN(o)||o<0||isNaN(a)||a<0||isNaN(s)||s<0||isNaN(u)||u<0)throw new Error("Invalid value for edge-insets, top, bottom, left and right must all be numbers");this.top=o,this.bottom=a,this.left=s,this.right=u};en.prototype.interpolate=function(o,a,s){return null!=a.top&&null!=o.top&&(this.top=l.number(o.top,a.top,s)),null!=a.bottom&&null!=o.bottom&&(this.bottom=l.number(o.bottom,a.bottom,s)),null!=a.left&&null!=o.left&&(this.left=l.number(o.left,a.left,s)),null!=a.right&&null!=o.right&&(this.right=l.number(o.right,a.right,s)),this},en.prototype.getCenter=function(o,a){var s=l.clamp((this.left+o-this.right)/2,0,o),u=l.clamp((this.top+a-this.bottom)/2,0,a);return new l.Point(s,u)},en.prototype.equals=function(o){return this.top===o.top&&this.bottom===o.bottom&&this.left===o.left&&this.right===o.right},en.prototype.clone=function(){return new en(this.top,this.bottom,this.left,this.right)},en.prototype.toJSON=function(){return{top:this.top,bottom:this.bottom,left:this.left,right:this.right}};var ji=function(o,a,s,u,P){this.tileSize=512,this.maxValidLatitude=85.051129,this._renderWorldCopies=void 0===P||P,this._minZoom=o||0,this._maxZoom=a||22,this._minPitch=s??0,this._maxPitch=u??60,this.setMaxBounds(),this.width=0,this.height=0,this._center=new l.LngLat(0,0),this.zoom=0,this.angle=0,this._fov=.6435011087932844,this._pitch=0,this._unmodified=!0,this._edgeInsets=new en,this._posMatrixCache={},this._alignedPosMatrixCache={}},Gi={minZoom:{configurable:!0},maxZoom:{configurable:!0},minPitch:{configurable:!0},maxPitch:{configurable:!0},renderWorldCopies:{configurable:!0},worldSize:{configurable:!0},centerOffset:{configurable:!0},size:{configurable:!0},bearing:{configurable:!0},pitch:{configurable:!0},fov:{configurable:!0},zoom:{configurable:!0},center:{configurable:!0},padding:{configurable:!0},centerPoint:{configurable:!0},unmodified:{configurable:!0},point:{configurable:!0}};ji.prototype.clone=function(){var o=new ji(this._minZoom,this._maxZoom,this._minPitch,this.maxPitch,this._renderWorldCopies);return o.tileSize=this.tileSize,o.latRange=this.latRange,o.width=this.width,o.height=this.height,o._center=this._center,o.zoom=this.zoom,o.angle=this.angle,o._fov=this._fov,o._pitch=this._pitch,o._unmodified=this._unmodified,o._edgeInsets=this._edgeInsets.clone(),o._calcMatrices(),o},Gi.minZoom.get=function(){return this._minZoom},Gi.minZoom.set=function(o){this._minZoom!==o&&(this._minZoom=o,this.zoom=Math.max(this.zoom,o))},Gi.maxZoom.get=function(){return this._maxZoom},Gi.maxZoom.set=function(o){this._maxZoom!==o&&(this._maxZoom=o,this.zoom=Math.min(this.zoom,o))},Gi.minPitch.get=function(){return this._minPitch},Gi.minPitch.set=function(o){this._minPitch!==o&&(this._minPitch=o,this.pitch=Math.max(this.pitch,o))},Gi.maxPitch.get=function(){return this._maxPitch},Gi.maxPitch.set=function(o){this._maxPitch!==o&&(this._maxPitch=o,this.pitch=Math.min(this.pitch,o))},Gi.renderWorldCopies.get=function(){return this._renderWorldCopies},Gi.renderWorldCopies.set=function(o){void 0===o?o=!0:null===o&&(o=!1),this._renderWorldCopies=o},Gi.worldSize.get=function(){return this.tileSize*this.scale},Gi.centerOffset.get=function(){return this.centerPoint._sub(this.size._div(2))},Gi.size.get=function(){return new l.Point(this.width,this.height)},Gi.bearing.get=function(){return-this.angle/Math.PI*180},Gi.bearing.set=function(o){var a=-l.wrap(o,-180,180)*Math.PI/180;this.angle!==a&&(this._unmodified=!1,this.angle=a,this._calcMatrices(),this.rotationMatrix=l.create$2(),l.rotate(this.rotationMatrix,this.rotationMatrix,this.angle))},Gi.pitch.get=function(){return this._pitch/Math.PI*180},Gi.pitch.set=function(o){var a=l.clamp(o,this.minPitch,this.maxPitch)/180*Math.PI;this._pitch!==a&&(this._unmodified=!1,this._pitch=a,this._calcMatrices())},Gi.fov.get=function(){return this._fov/Math.PI*180},Gi.fov.set=function(o){o=Math.max(.01,Math.min(60,o)),this._fov!==o&&(this._unmodified=!1,this._fov=o/180*Math.PI,this._calcMatrices())},Gi.zoom.get=function(){return this._zoom},Gi.zoom.set=function(o){var a=Math.min(Math.max(o,this.minZoom),this.maxZoom);this._zoom!==a&&(this._unmodified=!1,this._zoom=a,this.scale=this.zoomScale(a),this.tileZoom=Math.floor(a),this.zoomFraction=a-this.tileZoom,this._constrain(),this._calcMatrices())},Gi.center.get=function(){return this._center},Gi.center.set=function(o){o.lat===this._center.lat&&o.lng===this._center.lng||(this._unmodified=!1,this._center=o,this._constrain(),this._calcMatrices())},Gi.padding.get=function(){return this._edgeInsets.toJSON()},Gi.padding.set=function(o){this._edgeInsets.equals(o)||(this._unmodified=!1,this._edgeInsets.interpolate(this._edgeInsets,o,1),this._calcMatrices())},Gi.centerPoint.get=function(){return this._edgeInsets.getCenter(this.width,this.height)},ji.prototype.isPaddingEqual=function(o){return this._edgeInsets.equals(o)},ji.prototype.interpolatePadding=function(o,a,s){this._unmodified=!1,this._edgeInsets.interpolate(o,a,s),this._constrain(),this._calcMatrices()},ji.prototype.coveringZoomLevel=function(o){var a=(o.roundZoom?Math.round:Math.floor)(this.zoom+this.scaleZoom(this.tileSize/o.tileSize));return Math.max(0,a)},ji.prototype.getVisibleUnwrappedCoordinates=function(o){var a=[new l.UnwrappedTileID(0,o)];if(this._renderWorldCopies)for(var s=this.pointCoordinate(new l.Point(0,0)),u=this.pointCoordinate(new l.Point(this.width,0)),P=this.pointCoordinate(new l.Point(this.width,this.height)),W=this.pointCoordinate(new l.Point(0,this.height)),$=Math.floor(Math.min(s.x,u.x,P.x,W.x)),gt=Math.floor(Math.max(s.x,u.x,P.x,W.x)),Dt=$-1;Dt<=gt+1;Dt++)0!==Dt&&a.push(new l.UnwrappedTileID(Dt,o));return a},ji.prototype.coveringTiles=function(o){var a=this.coveringZoomLevel(o),s=a;if(void 0!==o.minzoom&&a<o.minzoom)return[];void 0!==o.maxzoom&&a>o.maxzoom&&(a=o.maxzoom);var u=l.MercatorCoordinate.fromLngLat(this.center),P=Math.pow(2,a),W=[P*u.x,P*u.y,0],$=Bi.fromInvProjectionMatrix(this.invProjMatrix,this.worldSize,a),gt=o.minzoom||0;this.pitch<=60&&this._edgeInsets.top<.1&&(gt=a);var Dt=function(Xi){return{aabb:new Wi([Xi*P,0,0],[(Xi+1)*P,P,0]),zoom:0,x:0,y:0,wrap:Xi,fullyVisible:!1}},Ht=[],re=[],le=a,de=o.reparseOverscaled?s:a;if(this._renderWorldCopies)for(var Ie=1;Ie<=3;Ie++)Ht.push(Dt(-Ie)),Ht.push(Dt(Ie));for(Ht.push(Dt(0));Ht.length>0;){var Pe=Ht.pop(),Oe=Pe.x,Se=Pe.y,Re=Pe.fullyVisible;if(!Re){var Ze=Pe.aabb.intersects($);if(0===Ze)continue;Re=2===Ze}var si=Pe.aabb.distanceX(W),bi=Pe.aabb.distanceY(W),mi=Math.max(Math.abs(si),Math.abs(bi));if(Pe.zoom===le||mi>3+(1<<le-Pe.zoom)-2&&Pe.zoom>=gt)re.push({tileID:new l.OverscaledTileID(Pe.zoom===le?de:Pe.zoom,Pe.wrap,Pe.zoom,Oe,Se),distanceSq:l.sqrLen([W[0]-.5-Oe,W[1]-.5-Se])});else for(var wi=0;wi<4;wi++){var Ri=(Oe<<1)+wi%2,$i=(Se<<1)+(wi>>1);Ht.push({aabb:Pe.aabb.quadrant(wi),zoom:Pe.zoom+1,x:Ri,y:$i,wrap:Pe.wrap,fullyVisible:Re})}}return re.sort(function(Xi,fn){return Xi.distanceSq-fn.distanceSq}).map(function(Xi){return Xi.tileID})},ji.prototype.resize=function(o,a){this.width=o,this.height=a,this.pixelsToGLUnits=[2/o,-2/a],this._constrain(),this._calcMatrices()},Gi.unmodified.get=function(){return this._unmodified},ji.prototype.zoomScale=function(o){return Math.pow(2,o)},ji.prototype.scaleZoom=function(o){return Math.log(o)/Math.LN2},ji.prototype.project=function(o){var a=l.clamp(o.lat,-this.maxValidLatitude,this.maxValidLatitude);return new l.Point(l.mercatorXfromLng(o.lng)*this.worldSize,l.mercatorYfromLat(a)*this.worldSize)},ji.prototype.unproject=function(o){return new l.MercatorCoordinate(o.x/this.worldSize,o.y/this.worldSize).toLngLat()},Gi.point.get=function(){return this.project(this.center)},ji.prototype.setLocationAtPoint=function(o,a){var s=this.pointCoordinate(a),u=this.pointCoordinate(this.centerPoint),P=this.locationCoordinate(o),W=new l.MercatorCoordinate(P.x-(s.x-u.x),P.y-(s.y-u.y));this.center=this.coordinateLocation(W),this._renderWorldCopies&&(this.center=this.center.wrap())},ji.prototype.locationPoint=function(o){return this.coordinatePoint(this.locationCoordinate(o))},ji.prototype.pointLocation=function(o){return this.coordinateLocation(this.pointCoordinate(o))},ji.prototype.locationCoordinate=function(o){return l.MercatorCoordinate.fromLngLat(o)},ji.prototype.coordinateLocation=function(o){return o.toLngLat()},ji.prototype.pointCoordinate=function(o){var a=[o.x,o.y,0,1],s=[o.x,o.y,1,1];l.transformMat4(a,a,this.pixelMatrixInverse),l.transformMat4(s,s,this.pixelMatrixInverse);var u=a[3],P=s[3],W=a[1]/u,$=s[1]/P,gt=a[2]/u,Dt=s[2]/P,Ht=gt===Dt?0:(0-gt)/(Dt-gt);return new l.MercatorCoordinate(l.number(a[0]/u,s[0]/P,Ht)/this.worldSize,l.number(W,$,Ht)/this.worldSize)},ji.prototype.coordinatePoint=function(o){var a=[o.x*this.worldSize,o.y*this.worldSize,0,1];return l.transformMat4(a,a,this.pixelMatrix),new l.Point(a[0]/a[3],a[1]/a[3])},ji.prototype.getBounds=function(){return(new l.LngLatBounds).extend(this.pointLocation(new l.Point(0,0))).extend(this.pointLocation(new l.Point(this.width,0))).extend(this.pointLocation(new l.Point(this.width,this.height))).extend(this.pointLocation(new l.Point(0,this.height)))},ji.prototype.getMaxBounds=function(){return this.latRange&&2===this.latRange.length&&this.lngRange&&2===this.lngRange.length?new l.LngLatBounds([this.lngRange[0],this.latRange[0]],[this.lngRange[1],this.latRange[1]]):null},ji.prototype.setMaxBounds=function(o){o?(this.lngRange=[o.getWest(),o.getEast()],this.latRange=[o.getSouth(),o.getNorth()],this._constrain()):(this.lngRange=null,this.latRange=[-this.maxValidLatitude,this.maxValidLatitude])},ji.prototype.calculatePosMatrix=function(o,a){void 0===a&&(a=!1);var s=o.key,u=a?this._alignedPosMatrixCache:this._posMatrixCache;if(u[s])return u[s];var P=o.canonical,W=this.worldSize/this.zoomScale(P.z),$=P.x+Math.pow(2,P.z)*o.wrap,gt=l.identity(new Float64Array(16));return l.translate(gt,gt,[$*W,P.y*W,0]),l.scale(gt,gt,[W/l.EXTENT,W/l.EXTENT,1]),l.multiply(gt,a?this.alignedProjMatrix:this.projMatrix,gt),u[s]=new Float32Array(gt),u[s]},ji.prototype.customLayerMatrix=function(){return this.mercatorMatrix.slice()},ji.prototype._constrain=function(){if(this.center&&this.width&&this.height&&!this._constraining){this._constraining=!0;var o,a,s,u,P=-90,W=90,$=-180,gt=180,Dt=this.size,Ht=this._unmodified;if(this.latRange){var re=this.latRange;P=l.mercatorYfromLat(re[1])*this.worldSize,o=(W=l.mercatorYfromLat(re[0])*this.worldSize)-P<Dt.y?Dt.y/(W-P):0}if(this.lngRange){var le=this.lngRange;$=l.mercatorXfromLng(le[0])*this.worldSize,a=(gt=l.mercatorXfromLng(le[1])*this.worldSize)-$<Dt.x?Dt.x/(gt-$):0}var de=this.point,Ie=Math.max(a||0,o||0);if(Ie)return this.center=this.unproject(new l.Point(a?(gt+$)/2:de.x,o?(W+P)/2:de.y)),this.zoom+=this.scaleZoom(Ie),this._unmodified=Ht,void(this._constraining=!1);if(this.latRange){var Pe=de.y,Oe=Dt.y/2;Pe-Oe<P&&(u=P+Oe),Pe+Oe>W&&(u=W-Oe)}if(this.lngRange){var Se=de.x,Re=Dt.x/2;Se-Re<$&&(s=$+Re),Se+Re>gt&&(s=gt-Re)}void 0===s&&void 0===u||(this.center=this.unproject(new l.Point(void 0!==s?s:de.x,void 0!==u?u:de.y))),this._unmodified=Ht,this._constraining=!1}},ji.prototype._calcMatrices=function(){if(this.height){var o=this.centerOffset;this.cameraToCenterDistance=.5/Math.tan(this._fov/2)*this.height;var a=Math.PI/2+this._pitch,s=this._fov*(.5+o.y/this.height),u=Math.sin(s)*this.cameraToCenterDistance/Math.sin(l.clamp(Math.PI-a-s,.01,Math.PI-.01)),P=this.point,W=P.x,$=P.y,gt=1.01*(Math.cos(Math.PI/2-this._pitch)*u+this.cameraToCenterDistance),Dt=this.height/50,Ht=new Float64Array(16);l.perspective(Ht,this._fov,this.width/this.height,Dt,gt),Ht[8]=2*-o.x/this.width,Ht[9]=2*o.y/this.height,l.scale(Ht,Ht,[1,-1,1]),l.translate(Ht,Ht,[0,0,-this.cameraToCenterDistance]),l.rotateX(Ht,Ht,this._pitch),l.rotateZ(Ht,Ht,this.angle),l.translate(Ht,Ht,[-W,-$,0]),this.mercatorMatrix=l.scale([],Ht,[this.worldSize,this.worldSize,this.worldSize]),l.scale(Ht,Ht,[1,1,l.mercatorZfromAltitude(1,this.center.lat)*this.worldSize,1]),this.projMatrix=Ht,this.invProjMatrix=l.invert([],this.projMatrix);var re=this.width%2/2,le=this.height%2/2,de=Math.cos(this.angle),Ie=Math.sin(this.angle),Pe=W-Math.round(W)+de*re+Ie*le,Oe=$-Math.round($)+de*le+Ie*re,Se=new Float64Array(Ht);if(l.translate(Se,Se,[Pe>.5?Pe-1:Pe,Oe>.5?Oe-1:Oe,0]),this.alignedProjMatrix=Se,Ht=l.create(),l.scale(Ht,Ht,[this.width/2,-this.height/2,1]),l.translate(Ht,Ht,[1,-1,0]),this.labelPlaneMatrix=Ht,Ht=l.create(),l.scale(Ht,Ht,[1,-1,1]),l.translate(Ht,Ht,[-1,-1,0]),l.scale(Ht,Ht,[2/this.width,2/this.height,1]),this.glCoordMatrix=Ht,this.pixelMatrix=l.multiply(new Float64Array(16),this.labelPlaneMatrix,this.projMatrix),!(Ht=l.invert(new Float64Array(16),this.pixelMatrix)))throw new Error("failed to invert matrix");this.pixelMatrixInverse=Ht,this._posMatrixCache={},this._alignedPosMatrixCache={}}},ji.prototype.maxPitchScaleFactor=function(){if(!this.pixelMatrixInverse)return 1;var o=this.pointCoordinate(new l.Point(0,0)),a=[o.x*this.worldSize,o.y*this.worldSize,0,1];return l.transformMat4(a,a,this.pixelMatrix)[3]/this.cameraToCenterDistance},ji.prototype.getCameraPoint=function(){var o=Math.tan(this._pitch)*(this.cameraToCenterDistance||1);return this.centerPoint.add(new l.Point(0,o))},ji.prototype.getCameraQueryGeometry=function(o){var a=this.getCameraPoint();if(1===o.length)return[o[0],a];for(var s=a.x,u=a.y,P=a.x,W=a.y,$=0,gt=o;$<gt.length;$+=1){var Dt=gt[$];s=Math.min(s,Dt.x),u=Math.min(u,Dt.y),P=Math.max(P,Dt.x),W=Math.max(W,Dt.y)}return[new l.Point(s,u),new l.Point(P,u),new l.Point(P,W),new l.Point(s,W),new l.Point(s,u)]},Object.defineProperties(ji.prototype,Gi);var Qn=function(o){var a,s,u,P;this._hashName=o&&encodeURIComponent(o),l.bindAll(["_getCurrentHash","_onHashChange","_updateHash"],this),this._updateHash=(a=this._updateHashUnthrottled.bind(this),s=!1,u=null,P=function(){u=null,s&&(a(),u=setTimeout(P,300),s=!1)},function(){return s=!0,u||P(),u})};Qn.prototype.addTo=function(o){return this._map=o,l.window.addEventListener("hashchange",this._onHashChange,!1),this._map.on("moveend",this._updateHash),this},Qn.prototype.remove=function(){return l.window.removeEventListener("hashchange",this._onHashChange,!1),this._map.off("moveend",this._updateHash),clearTimeout(this._updateHash()),delete this._map,this},Qn.prototype.getHashString=function(o){var a=this._map.getCenter(),s=Math.round(100*this._map.getZoom())/100,u=Math.ceil((s*Math.LN2+Math.log(512/360/.5))/Math.LN10),P=Math.pow(10,u),W=Math.round(a.lng*P)/P,$=Math.round(a.lat*P)/P,gt=this._map.getBearing(),Dt=this._map.getPitch(),Ht="";if(Ht+=o?"/"+W+"/"+$+"/"+s:s+"/"+$+"/"+W,(gt||Dt)&&(Ht+="/"+Math.round(10*gt)/10),Dt&&(Ht+="/"+Math.round(Dt)),this._hashName){var re=this._hashName,le=!1,de=l.window.location.hash.slice(1).split("&").map(function(Ie){var Pe=Ie.split("=")[0];return Pe===re?(le=!0,Pe+"="+Ht):Ie}).filter(function(Ie){return Ie});return le||de.push(re+"="+Ht),"#"+de.join("&")}return"#"+Ht},Qn.prototype._getCurrentHash=function(){var o,a=this,s=l.window.location.hash.replace("#","");return this._hashName?(s.split("&").map(function(u){return u.split("=")}).forEach(function(u){u[0]===a._hashName&&(o=u)}),(o&&o[1]||"").split("/")):s.split("/")},Qn.prototype._onHashChange=function(){var o=this._getCurrentHash();if(o.length>=3&&!o.some(function(s){return isNaN(s)})){var a=this._map.dragRotate.isEnabled()&&this._map.touchZoomRotate.isEnabled()?+(o[3]||0):this._map.getBearing();return this._map.jumpTo({center:[+o[2],+o[1]],zoom:+o[0],bearing:a,pitch:+(o[4]||0)}),!0}return!1},Qn.prototype._updateHashUnthrottled=function(){var o=l.window.location.href.replace(/(#.+)?$/,this.getHashString());try{l.window.history.replaceState(l.window.history.state,null,o)}catch{}};var Zn={linearity:.3,easing:l.bezier(0,0,.3,1)},ho=l.extend({deceleration:2500,maxSpeed:1400},Zn),uo=l.extend({deceleration:20,maxSpeed:1400},Zn),_o=l.extend({deceleration:1e3,maxSpeed:360},Zn),ar=l.extend({deceleration:1e3,maxSpeed:90},Zn),mr=function(o){this._map=o,this.clear()};function Eo(o,a){(!o.duration||o.duration<a.duration)&&(o.duration=a.duration,o.easing=a.easing)}function jo(o,a,s){var u=s.maxSpeed,P=s.linearity,W=s.deceleration,$=l.clamp(o*P/(a/1e3),-u,u),gt=Math.abs($)/(W*P);return{easing:s.easing,duration:1e3*gt,amount:$*(gt/2)}}mr.prototype.clear=function(){this._inertiaBuffer=[]},mr.prototype.record=function(o){this._drainInertiaBuffer(),this._inertiaBuffer.push({time:l.browser.now(),settings:o})},mr.prototype._drainInertiaBuffer=function(){for(var o=this._inertiaBuffer,a=l.browser.now();o.length>0&&a-o[0].time>160;)o.shift()},mr.prototype._onMoveEnd=function(o){if(this._drainInertiaBuffer(),!(this._inertiaBuffer.length<2)){for(var a={zoom:0,bearing:0,pitch:0,pan:new l.Point(0,0),pinchAround:void 0,around:void 0},s=0,u=this._inertiaBuffer;s<u.length;s+=1){var P=u[s].settings;a.zoom+=P.zoomDelta||0,a.bearing+=P.bearingDelta||0,a.pitch+=P.pitchDelta||0,P.panDelta&&a.pan._add(P.panDelta),P.around&&(a.around=P.around),P.pinchAround&&(a.pinchAround=P.pinchAround)}var W=this._inertiaBuffer[this._inertiaBuffer.length-1].time-this._inertiaBuffer[0].time,$={};if(a.pan.mag()){var gt=jo(a.pan.mag(),W,l.extend({},ho,o||{}));$.offset=a.pan.mult(gt.amount/a.pan.mag()),$.center=this._map.transform.center,Eo($,gt)}if(a.zoom){var Dt=jo(a.zoom,W,uo);$.zoom=this._map.transform.zoom+Dt.amount,Eo($,Dt)}if(a.bearing){var Ht=jo(a.bearing,W,_o);$.bearing=this._map.transform.bearing+l.clamp(Ht.amount,-179,179),Eo($,Ht)}if(a.pitch){var re=jo(a.pitch,W,ar);$.pitch=this._map.transform.pitch+re.amount,Eo($,re)}if($.zoom||$.bearing){var le=void 0===a.pinchAround?a.around:a.pinchAround;$.around=le?this._map.unproject(le):this._map.getCenter()}return this.clear(),l.extend($,{noMoveStart:!0})}};var Un=function(o){function a(u,P,W,$){void 0===$&&($={});var gt=N.mousePos(P.getCanvasContainer(),W),Dt=P.unproject(gt);o.call(this,u,l.extend({point:gt,lngLat:Dt,originalEvent:W},$)),this._defaultPrevented=!1,this.target=P}o&&(a.__proto__=o),(a.prototype=Object.create(o&&o.prototype)).constructor=a;var s={defaultPrevented:{configurable:!0}};return a.prototype.preventDefault=function(){this._defaultPrevented=!0},s.defaultPrevented.get=function(){return this._defaultPrevented},Object.defineProperties(a.prototype,s),a}(l.Event),Bo=function(o){function a(u,P,W){var $="touchend"===u?W.changedTouches:W.touches,gt=N.touchPos(P.getCanvasContainer(),$),Dt=gt.map(function(le){return P.unproject(le)}),Ht=gt.reduce(function(le,de,Ie,Pe){return le.add(de.div(Pe.length))},new l.Point(0,0)),re=P.unproject(Ht);o.call(this,u,{points:gt,point:Ht,lngLats:Dt,lngLat:re,originalEvent:W}),this._defaultPrevented=!1}o&&(a.__proto__=o),(a.prototype=Object.create(o&&o.prototype)).constructor=a;var s={defaultPrevented:{configurable:!0}};return a.prototype.preventDefault=function(){this._defaultPrevented=!0},s.defaultPrevented.get=function(){return this._defaultPrevented},Object.defineProperties(a.prototype,s),a}(l.Event),pr=function(o){function a(u,P,W){o.call(this,u,{originalEvent:W}),this._defaultPrevented=!1}o&&(a.__proto__=o),(a.prototype=Object.create(o&&o.prototype)).constructor=a;var s={defaultPrevented:{configurable:!0}};return a.prototype.preventDefault=function(){this._defaultPrevented=!0},s.defaultPrevented.get=function(){return this._defaultPrevented},Object.defineProperties(a.prototype,s),a}(l.Event),fo=function(o,a){this._map=o,this._clickTolerance=a.clickTolerance};fo.prototype.reset=function(){delete this._mousedownPos},fo.prototype.wheel=function(o){return this._firePreventable(new pr(o.type,this._map,o))},fo.prototype.mousedown=function(o,a){return this._mousedownPos=a,this._firePreventable(new Un(o.type,this._map,o))},fo.prototype.mouseup=function(o){this._map.fire(new Un(o.type,this._map,o))},fo.prototype.click=function(o,a){this._mousedownPos&&this._mousedownPos.dist(a)>=this._clickTolerance||this._map.fire(new Un(o.type,this._map,o))},fo.prototype.dblclick=function(o){return this._firePreventable(new Un(o.type,this._map,o))},fo.prototype.mouseover=function(o){this._map.fire(new Un(o.type,this._map,o))},fo.prototype.mouseout=function(o){this._map.fire(new Un(o.type,this._map,o))},fo.prototype.touchstart=function(o){return this._firePreventable(new Bo(o.type,this._map,o))},fo.prototype.touchmove=function(o){this._map.fire(new Bo(o.type,this._map,o))},fo.prototype.touchend=function(o){this._map.fire(new Bo(o.type,this._map,o))},fo.prototype.touchcancel=function(o){this._map.fire(new Bo(o.type,this._map,o))},fo.prototype._firePreventable=function(o){if(this._map.fire(o),o.defaultPrevented)return{}},fo.prototype.isEnabled=function(){return!0},fo.prototype.isActive=function(){return!1},fo.prototype.enable=function(){},fo.prototype.disable=function(){};var Hi=function(o){this._map=o};Hi.prototype.reset=function(){this._delayContextMenu=!1,delete this._contextMenuEvent},Hi.prototype.mousemove=function(o){this._map.fire(new Un(o.type,this._map,o))},Hi.prototype.mousedown=function(){this._delayContextMenu=!0},Hi.prototype.mouseup=function(){this._delayContextMenu=!1,this._contextMenuEvent&&(this._map.fire(new Un("contextmenu",this._map,this._contextMenuEvent)),delete this._contextMenuEvent)},Hi.prototype.contextmenu=function(o){this._delayContextMenu?this._contextMenuEvent=o:this._map.fire(new Un(o.type,this._map,o)),this._map.listens("contextmenu")&&o.preventDefault()},Hi.prototype.isEnabled=function(){return!0},Hi.prototype.isActive=function(){return!1},Hi.prototype.enable=function(){},Hi.prototype.disable=function(){};var tr=function(o,a){this._map=o,this._el=o.getCanvasContainer(),this._container=o.getContainer(),this._clickTolerance=a.clickTolerance||1};function ps(o,a){for(var s={},u=0;u<o.length;u++)s[o[u].identifier]=a[u];return s}tr.prototype.isEnabled=function(){return!!this._enabled},tr.prototype.isActive=function(){return!!this._active},tr.prototype.enable=function(){this.isEnabled()||(this._enabled=!0)},tr.prototype.disable=function(){this.isEnabled()&&(this._enabled=!1)},tr.prototype.mousedown=function(o,a){this.isEnabled()&&o.shiftKey&&0===o.button&&(N.disableDrag(),this._startPos=this._lastPos=a,this._active=!0)},tr.prototype.mousemoveWindow=function(o,a){if(this._active){var s=a;if(!(this._lastPos.equals(s)||!this._box&&s.dist(this._startPos)<this._clickTolerance)){var u=this._startPos;this._lastPos=s,this._box||(this._box=N.create("div","mapboxgl-boxzoom",this._container),this._container.classList.add("mapboxgl-crosshair"),this._fireEvent("boxzoomstart",o));var P=Math.min(u.x,s.x),W=Math.max(u.x,s.x),$=Math.min(u.y,s.y),gt=Math.max(u.y,s.y);N.setTransform(this._box,"translate("+P+"px,"+$+"px)"),this._box.style.width=W-P+"px",this._box.style.height=gt-$+"px"}}},tr.prototype.mouseupWindow=function(o,a){var s=this;if(this._active&&0===o.button){var u=this._startPos,P=a;if(this.reset(),N.suppressClick(),u.x!==P.x||u.y!==P.y)return this._map.fire(new l.Event("boxzoomend",{originalEvent:o})),{cameraAnimation:function(W){return W.fitScreenCoordinates(u,P,s._map.getBearing(),{linear:!0})}};this._fireEvent("boxzoomcancel",o)}},tr.prototype.keydown=function(o){this._active&&27===o.keyCode&&(this.reset(),this._fireEvent("boxzoomcancel",o))},tr.prototype.reset=function(){this._active=!1,this._container.classList.remove("mapboxgl-crosshair"),this._box&&(N.remove(this._box),this._box=null),N.enableDrag(),delete this._startPos,delete this._lastPos},tr.prototype._fireEvent=function(o,a){return this._map.fire(new l.Event(o,{originalEvent:a}))};var Is=function(o){this.reset(),this.numTouches=o.numTouches};Is.prototype.reset=function(){delete this.centroid,delete this.startTime,delete this.touches,this.aborted=!1},Is.prototype.touchstart=function(o,a,s){(this.centroid||s.length>this.numTouches)&&(this.aborted=!0),this.aborted||(void 0===this.startTime&&(this.startTime=o.timeStamp),s.length===this.numTouches&&(this.centroid=function(u){for(var P=new l.Point(0,0),W=0,$=u;W<$.length;W+=1)P._add($[W]);return P.div(u.length)}(a),this.touches=ps(s,a)))},Is.prototype.touchmove=function(o,a,s){if(!this.aborted&&this.centroid){var u=ps(s,a);for(var P in this.touches){var W=u[P];(!W||W.dist(this.touches[P])>30)&&(this.aborted=!0)}}},Is.prototype.touchend=function(o,a,s){if((!this.centroid||o.timeStamp-this.startTime>500)&&(this.aborted=!0),0===s.length){var u=!this.aborted&&this.centroid;if(this.reset(),u)return u}};var jr=function(o){this.singleTap=new Is(o),this.numTaps=o.numTaps,this.reset()};jr.prototype.reset=function(){this.lastTime=1/0,delete this.lastTap,this.count=0,this.singleTap.reset()},jr.prototype.touchstart=function(o,a,s){this.singleTap.touchstart(o,a,s)},jr.prototype.touchmove=function(o,a,s){this.singleTap.touchmove(o,a,s)},jr.prototype.touchend=function(o,a,s){var u=this.singleTap.touchend(o,a,s);if(u){var P=o.timeStamp-this.lastTime<500,W=!this.lastTap||this.lastTap.dist(u)<30;if(P&&W||this.reset(),this.count++,this.lastTime=o.timeStamp,this.lastTap=u,this.count===this.numTaps)return this.reset(),u}};var So=function(){this._zoomIn=new jr({numTouches:1,numTaps:2}),this._zoomOut=new jr({numTouches:2,numTaps:1}),this.reset()};So.prototype.reset=function(){this._active=!1,this._zoomIn.reset(),this._zoomOut.reset()},So.prototype.touchstart=function(o,a,s){this._zoomIn.touchstart(o,a,s),this._zoomOut.touchstart(o,a,s)},So.prototype.touchmove=function(o,a,s){this._zoomIn.touchmove(o,a,s),this._zoomOut.touchmove(o,a,s)},So.prototype.touchend=function(o,a,s){var u=this,P=this._zoomIn.touchend(o,a,s),W=this._zoomOut.touchend(o,a,s);return P?(this._active=!0,o.preventDefault(),setTimeout(function(){return u.reset()},0),{cameraAnimation:function($){return $.easeTo({duration:300,zoom:$.getZoom()+1,around:$.unproject(P)},{originalEvent:o})}}):W?(this._active=!0,o.preventDefault(),setTimeout(function(){return u.reset()},0),{cameraAnimation:function($){return $.easeTo({duration:300,zoom:$.getZoom()-1,around:$.unproject(W)},{originalEvent:o})}}):void 0},So.prototype.touchcancel=function(){this.reset()},So.prototype.enable=function(){this._enabled=!0},So.prototype.disable=function(){this._enabled=!1,this.reset()},So.prototype.isEnabled=function(){return this._enabled},So.prototype.isActive=function(){return this._active};var bs={0:1,2:2},Ni=function(o){this.reset(),this._clickTolerance=o.clickTolerance||1};Ni.prototype.reset=function(){this._active=!1,this._moved=!1,delete this._lastPoint,delete this._eventButton},Ni.prototype._correctButton=function(o,a){return!1},Ni.prototype._move=function(o,a){return{}},Ni.prototype.mousedown=function(o,a){if(!this._lastPoint){var s=N.mouseButton(o);this._correctButton(o,s)&&(this._lastPoint=a,this._eventButton=s)}},Ni.prototype.mousemoveWindow=function(o,a){var u,W,s=this._lastPoint;if(s)if(o.preventDefault(),W=bs[this._eventButton],void 0===(u=o).buttons||(u.buttons&W)!==W)this.reset();else if(this._moved||!(a.dist(s)<this._clickTolerance))return this._moved=!0,this._lastPoint=a,this._move(s,a)},Ni.prototype.mouseupWindow=function(o){this._lastPoint&&N.mouseButton(o)===this._eventButton&&(this._moved&&N.suppressClick(),this.reset())},Ni.prototype.enable=function(){this._enabled=!0},Ni.prototype.disable=function(){this._enabled=!1,this.reset()},Ni.prototype.isEnabled=function(){return this._enabled},Ni.prototype.isActive=function(){return this._active};var ws=function(o){function a(){o.apply(this,arguments)}return o&&(a.__proto__=o),(a.prototype=Object.create(o&&o.prototype)).constructor=a,a.prototype.mousedown=function(s,u){o.prototype.mousedown.call(this,s,u),this._lastPoint&&(this._active=!0)},a.prototype._correctButton=function(s,u){return 0===u&&!s.ctrlKey},a.prototype._move=function(s,u){return{around:u,panDelta:u.sub(s)}},a}(Ni),Gs=function(o){function a(){o.apply(this,arguments)}return o&&(a.__proto__=o),(a.prototype=Object.create(o&&o.prototype)).constructor=a,a.prototype._correctButton=function(s,u){return 0===u&&s.ctrlKey||2===u},a.prototype._move=function(s,u){var P=.8*(u.x-s.x);if(P)return this._active=!0,{bearingDelta:P}},a.prototype.contextmenu=function(s){s.preventDefault()},a}(Ni),Ba=function(o){function a(){o.apply(this,arguments)}return o&&(a.__proto__=o),(a.prototype=Object.create(o&&o.prototype)).constructor=a,a.prototype._correctButton=function(s,u){return 0===u&&s.ctrlKey||2===u},a.prototype._move=function(s,u){var P=-.5*(u.y-s.y);if(P)return this._active=!0,{pitchDelta:P}},a.prototype.contextmenu=function(s){s.preventDefault()},a}(Ni),_r=function(o){this._minTouches=1,this._clickTolerance=o.clickTolerance||1,this.reset()};_r.prototype.reset=function(){this._active=!1,this._touches={},this._sum=new l.Point(0,0)},_r.prototype.touchstart=function(o,a,s){return this._calculateTransform(o,a,s)},_r.prototype.touchmove=function(o,a,s){if(this._active&&!(s.length<this._minTouches))return o.preventDefault(),this._calculateTransform(o,a,s)},_r.prototype.touchend=function(o,a,s){this._calculateTransform(o,a,s),this._active&&s.length<this._minTouches&&this.reset()},_r.prototype.touchcancel=function(){this.reset()},_r.prototype._calculateTransform=function(o,a,s){s.length>0&&(this._active=!0);var u=ps(s,a),P=new l.Point(0,0),W=new l.Point(0,0),$=0;for(var gt in u){var Dt=u[gt],Ht=this._touches[gt];Ht&&(P._add(Dt),W._add(Dt.sub(Ht)),$++,u[gt]=Dt)}if(this._touches=u,!($<this._minTouches)&&W.mag()){var re=W.div($);if(this._sum._add(re),!(this._sum.mag()<this._clickTolerance))return{around:P.div($),panDelta:re}}},_r.prototype.enable=function(){this._enabled=!0},_r.prototype.disable=function(){this._enabled=!1,this.reset()},_r.prototype.isEnabled=function(){return this._enabled},_r.prototype.isActive=function(){return this._active};var Do=function(){this.reset()};function ds(o,a,s){for(var u=0;u<o.length;u++)if(o[u].identifier===s)return a[u]}function Ds(o,a){return Math.log(o/a)/Math.LN2}Do.prototype.reset=function(){this._active=!1,delete this._firstTwoTouches},Do.prototype._start=function(o){},Do.prototype._move=function(o,a,s){return{}},Do.prototype.touchstart=function(o,a,s){this._firstTwoTouches||s.length<2||(this._firstTwoTouches=[s[0].identifier,s[1].identifier],this._start([a[0],a[1]]))},Do.prototype.touchmove=function(o,a,s){if(this._firstTwoTouches){o.preventDefault();var u=this._firstTwoTouches,P=u[1],W=ds(s,a,u[0]),$=ds(s,a,P);if(W&&$){var gt=this._aroundCenter?null:W.add($).div(2);return this._move([W,$],gt,o)}}},Do.prototype.touchend=function(o,a,s){if(this._firstTwoTouches){var u=this._firstTwoTouches,P=u[1],W=ds(s,a,u[0]),$=ds(s,a,P);W&&$||(this._active&&N.suppressClick(),this.reset())}},Do.prototype.touchcancel=function(){this.reset()},Do.prototype.enable=function(o){this._enabled=!0,this._aroundCenter=!!o&&"center"===o.around},Do.prototype.disable=function(){this._enabled=!1,this.reset()},Do.prototype.isEnabled=function(){return this._enabled},Do.prototype.isActive=function(){return this._active};var os=function(o){function a(){o.apply(this,arguments)}return o&&(a.__proto__=o),(a.prototype=Object.create(o&&o.prototype)).constructor=a,a.prototype.reset=function(){o.prototype.reset.call(this),delete this._distance,delete this._startDistance},a.prototype._start=function(s){this._startDistance=this._distance=s[0].dist(s[1])},a.prototype._move=function(s,u){var P=this._distance;if(this._distance=s[0].dist(s[1]),this._active||!(Math.abs(Ds(this._distance,this._startDistance))<.1))return this._active=!0,{zoomDelta:Ds(this._distance,P),pinchAround:u}},a}(Do);function ua(o,a){return 180*o.angleWith(a)/Math.PI}var xl=function(o){function a(){o.apply(this,arguments)}return o&&(a.__proto__=o),(a.prototype=Object.create(o&&o.prototype)).constructor=a,a.prototype.reset=function(){o.prototype.reset.call(this),delete this._minDiameter,delete this._startVector,delete this._vector},a.prototype._start=function(s){this._startVector=this._vector=s[0].sub(s[1]),this._minDiameter=s[0].dist(s[1])},a.prototype._move=function(s,u){var P=this._vector;if(this._vector=s[0].sub(s[1]),this._active||!this._isBelowThreshold(this._vector))return this._active=!0,{bearingDelta:ua(this._vector,P),pinchAround:u}},a.prototype._isBelowThreshold=function(s){this._minDiameter=Math.min(this._minDiameter,s.mag());var u=25/(Math.PI*this._minDiameter)*360,P=ua(s,this._startVector);return Math.abs(P)<u},a}(Do);function rl(o){return Math.abs(o.y)>Math.abs(o.x)}var Ra=function(o){function a(){o.apply(this,arguments)}return o&&(a.__proto__=o),(a.prototype=Object.create(o&&o.prototype)).constructor=a,a.prototype.reset=function(){o.prototype.reset.call(this),this._valid=void 0,delete this._firstMove,delete this._lastPoints},a.prototype._start=function(s){this._lastPoints=s,rl(s[0].sub(s[1]))&&(this._valid=!1)},a.prototype._move=function(s,u,P){var W=s[0].sub(this._lastPoints[0]),$=s[1].sub(this._lastPoints[1]);if(this._valid=this.gestureBeginsVertically(W,$,P.timeStamp),this._valid)return this._lastPoints=s,this._active=!0,{pitchDelta:(W.y+$.y)/2*-.5}},a.prototype.gestureBeginsVertically=function(s,u,P){if(void 0!==this._valid)return this._valid;var W=s.mag()>=2,$=u.mag()>=2;if(W||$){if(!W||!$)return void 0===this._firstMove&&(this._firstMove=P),P-this._firstMove<100&&void 0;var gt=s.y>0==u.y>0;return rl(s)&&rl(u)&&gt}},a}(Do),sl={panStep:100,bearingStep:15,pitchStep:10},Ws=function(){var o=sl;this._panStep=o.panStep,this._bearingStep=o.bearingStep,this._pitchStep=o.pitchStep,this._rotationDisabled=!1};function fs(o){return o*(2-o)}Ws.prototype.reset=function(){this._active=!1},Ws.prototype.keydown=function(o){var a=this;if(!(o.altKey||o.ctrlKey||o.metaKey)){var s=0,u=0,P=0,W=0,$=0;switch(o.keyCode){case 61:case 107:case 171:case 187:s=1;break;case 189:case 109:case 173:s=-1;break;case 37:o.shiftKey?u=-1:(o.preventDefault(),W=-1);break;case 39:o.shiftKey?u=1:(o.preventDefault(),W=1);break;case 38:o.shiftKey?P=1:(o.preventDefault(),$=-1);break;case 40:o.shiftKey?P=-1:(o.preventDefault(),$=1);break;default:return}return this._rotationDisabled&&(u=0,P=0),{cameraAnimation:function(gt){var Dt=gt.getZoom();gt.easeTo({duration:300,easeId:"keyboardHandler",easing:fs,zoom:s?Math.round(Dt)+s*(o.shiftKey?2:1):Dt,bearing:gt.getBearing()+u*a._bearingStep,pitch:gt.getPitch()+P*a._pitchStep,offset:[-W*a._panStep,-$*a._panStep],center:gt.getCenter()},{originalEvent:o})}}}},Ws.prototype.enable=function(){this._enabled=!0},Ws.prototype.disable=function(){this._enabled=!1,this.reset()},Ws.prototype.isEnabled=function(){return this._enabled},Ws.prototype.isActive=function(){return this._active},Ws.prototype.disableRotation=function(){this._rotationDisabled=!0},Ws.prototype.enableRotation=function(){this._rotationDisabled=!1};var To=function(o,a){this._map=o,this._el=o.getCanvasContainer(),this._handler=a,this._delta=0,this._defaultZoomRate=.01,this._wheelZoomRate=1/450,l.bindAll(["_onTimeout"],this)};To.prototype.setZoomRate=function(o){this._defaultZoomRate=o},To.prototype.setWheelZoomRate=function(o){this._wheelZoomRate=o},To.prototype.isEnabled=function(){return!!this._enabled},To.prototype.isActive=function(){return!!this._active||void 0!==this._finishTimeout},To.prototype.isZooming=function(){return!!this._zooming},To.prototype.enable=function(o){this.isEnabled()||(this._enabled=!0,this._aroundCenter=o&&"center"===o.around)},To.prototype.disable=function(){this.isEnabled()&&(this._enabled=!1)},To.prototype.wheel=function(o){if(this.isEnabled()){var a=o.deltaMode===l.window.WheelEvent.DOM_DELTA_LINE?40*o.deltaY:o.deltaY,s=l.browser.now(),u=s-(this._lastWheelEventTime||0);this._lastWheelEventTime=s,0!==a&&a%4.000244140625==0?this._type="wheel":0!==a&&Math.abs(a)<4?this._type="trackpad":u>400?(this._type=null,this._lastValue=a,this._timeout=setTimeout(this._onTimeout,40,o)):this._type||(this._type=Math.abs(u*a)<200?"trackpad":"wheel",this._timeout&&(clearTimeout(this._timeout),this._timeout=null,a+=this._lastValue)),o.shiftKey&&a&&(a/=4),this._type&&(this._lastWheelEvent=o,this._delta-=a,this._active||this._start(o)),o.preventDefault()}},To.prototype._onTimeout=function(o){this._type="wheel",this._delta-=this._lastValue,this._active||this._start(o)},To.prototype._start=function(o){if(this._delta){this._frameId&&(this._frameId=null),this._active=!0,this.isZooming()||(this._zooming=!0),this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout);var a=N.mousePos(this._el,o);this._around=l.LngLat.convert(this._aroundCenter?this._map.getCenter():this._map.unproject(a)),this._aroundPoint=this._map.transform.locationPoint(this._around),this._frameId||(this._frameId=!0,this._handler._triggerRenderFrame())}},To.prototype.renderFrame=function(){var o=this;if(this._frameId&&(this._frameId=null,this.isActive())){var a=this._map.transform;if(0!==this._delta){var s="wheel"===this._type&&Math.abs(this._delta)>4.000244140625?this._wheelZoomRate:this._defaultZoomRate,u=2/(1+Math.exp(-Math.abs(this._delta*s)));this._delta<0&&0!==u&&(u=1/u);var P="number"==typeof this._targetZoom?a.zoomScale(this._targetZoom):a.scale;this._targetZoom=Math.min(a.maxZoom,Math.max(a.minZoom,a.scaleZoom(P*u))),"wheel"===this._type&&(this._startZoom=a.zoom,this._easing=this._smoothOutEasing(200)),this._delta=0}var W,$="number"==typeof this._targetZoom?this._targetZoom:a.zoom,gt=this._startZoom,Dt=this._easing,Ht=!1;if("wheel"===this._type&&gt&&Dt){var re=Math.min((l.browser.now()-this._lastWheelEventTime)/200,1),le=Dt(re);W=l.number(gt,$,le),re<1?this._frameId||(this._frameId=!0):Ht=!0}else W=$,Ht=!0;return this._active=!0,Ht&&(this._active=!1,this._finishTimeout=setTimeout(function(){o._zooming=!1,o._handler._triggerRenderFrame(),delete o._targetZoom,delete o._finishTimeout},200)),{noInertia:!0,needsRenderFrame:!Ht,zoomDelta:W-a.zoom,around:this._aroundPoint,originalEvent:this._lastWheelEvent}}},To.prototype._smoothOutEasing=function(o){var a=l.ease;if(this._prevEase){var s=this._prevEase,u=(l.browser.now()-s.start)/s.duration,P=s.easing(u+.01)-s.easing(u),W=.27/Math.sqrt(P*P+1e-4)*.01,$=Math.sqrt(.0729-W*W);a=l.bezier(W,$,.25,1)}return this._prevEase={start:l.browser.now(),duration:o,easing:a},a},To.prototype.reset=function(){this._active=!1};var pa=function(o,a){this._clickZoom=o,this._tapZoom=a};pa.prototype.enable=function(){this._clickZoom.enable(),this._tapZoom.enable()},pa.prototype.disable=function(){this._clickZoom.disable(),this._tapZoom.disable()},pa.prototype.isEnabled=function(){return this._clickZoom.isEnabled()&&this._tapZoom.isEnabled()},pa.prototype.isActive=function(){return this._clickZoom.isActive()||this._tapZoom.isActive()};var ta=function(){this.reset()};ta.prototype.reset=function(){this._active=!1},ta.prototype.dblclick=function(o,a){return o.preventDefault(),{cameraAnimation:function(s){s.easeTo({duration:300,zoom:s.getZoom()+(o.shiftKey?-1:1),around:s.unproject(a)},{originalEvent:o})}}},ta.prototype.enable=function(){this._enabled=!0},ta.prototype.disable=function(){this._enabled=!1,this.reset()},ta.prototype.isEnabled=function(){return this._enabled},ta.prototype.isActive=function(){return this._active};var ts=function(){this._tap=new jr({numTouches:1,numTaps:1}),this.reset()};ts.prototype.reset=function(){this._active=!1,delete this._swipePoint,delete this._swipeTouch,delete this._tapTime,this._tap.reset()},ts.prototype.touchstart=function(o,a,s){this._swipePoint||(this._tapTime&&o.timeStamp-this._tapTime>500&&this.reset(),this._tapTime?s.length>0&&(this._swipePoint=a[0],this._swipeTouch=s[0].identifier):this._tap.touchstart(o,a,s))},ts.prototype.touchmove=function(o,a,s){if(this._tapTime){if(this._swipePoint){if(s[0].identifier!==this._swipeTouch)return;var u=a[0],P=u.y-this._swipePoint.y;return this._swipePoint=u,o.preventDefault(),this._active=!0,{zoomDelta:P/128}}}else this._tap.touchmove(o,a,s)},ts.prototype.touchend=function(o,a,s){this._tapTime?this._swipePoint&&0===s.length&&this.reset():this._tap.touchend(o,a,s)&&(this._tapTime=o.timeStamp)},ts.prototype.touchcancel=function(){this.reset()},ts.prototype.enable=function(){this._enabled=!0},ts.prototype.disable=function(){this._enabled=!1,this.reset()},ts.prototype.isEnabled=function(){return this._enabled},ts.prototype.isActive=function(){return this._active};var ja=function(o,a,s){this._el=o,this._mousePan=a,this._touchPan=s};ja.prototype.enable=function(o){this._inertiaOptions=o||{},this._mousePan.enable(),this._touchPan.enable(),this._el.classList.add("mapboxgl-touch-drag-pan")},ja.prototype.disable=function(){this._mousePan.disable(),this._touchPan.disable(),this._el.classList.remove("mapboxgl-touch-drag-pan")},ja.prototype.isEnabled=function(){return this._mousePan.isEnabled()&&this._touchPan.isEnabled()},ja.prototype.isActive=function(){return this._mousePan.isActive()||this._touchPan.isActive()};var Fa=function(o,a,s){this._pitchWithRotate=o.pitchWithRotate,this._mouseRotate=a,this._mousePitch=s};Fa.prototype.enable=function(){this._mouseRotate.enable(),this._pitchWithRotate&&this._mousePitch.enable()},Fa.prototype.disable=function(){this._mouseRotate.disable(),this._mousePitch.disable()},Fa.prototype.isEnabled=function(){return this._mouseRotate.isEnabled()&&(!this._pitchWithRotate||this._mousePitch.isEnabled())},Fa.prototype.isActive=function(){return this._mouseRotate.isActive()||this._mousePitch.isActive()};var Ca=function(o,a,s,u){this._el=o,this._touchZoom=a,this._touchRotate=s,this._tapDragZoom=u,this._rotationDisabled=!1,this._enabled=!0};Ca.prototype.enable=function(o){this._touchZoom.enable(o),this._rotationDisabled||this._touchRotate.enable(o),this._tapDragZoom.enable(),this._el.classList.add("mapboxgl-touch-zoom-rotate")},Ca.prototype.disable=function(){this._touchZoom.disable(),this._touchRotate.disable(),this._tapDragZoom.disable(),this._el.classList.remove("mapboxgl-touch-zoom-rotate")},Ca.prototype.isEnabled=function(){return this._touchZoom.isEnabled()&&(this._rotationDisabled||this._touchRotate.isEnabled())&&this._tapDragZoom.isEnabled()},Ca.prototype.isActive=function(){return this._touchZoom.isActive()||this._touchRotate.isActive()||this._tapDragZoom.isActive()},Ca.prototype.disableRotation=function(){this._rotationDisabled=!0,this._touchRotate.disable()},Ca.prototype.enableRotation=function(){this._rotationDisabled=!1,this._touchZoom.isEnabled()&&this._touchRotate.enable()};var Ar=function(o){return o.zoom||o.drag||o.pitch||o.rotate},La=function(o){function a(){o.apply(this,arguments)}return o&&(a.__proto__=o),(a.prototype=Object.create(o&&o.prototype)).constructor=a,a}(l.Event);function Pn(o){return o.panDelta&&o.panDelta.mag()||o.zoomDelta||o.bearingDelta||o.pitchDelta}var yn=function(o,a){this._map=o,this._el=this._map.getCanvasContainer(),this._handlers=[],this._handlersById={},this._changes=[],this._inertia=new mr(o),this._bearingSnap=a.bearingSnap,this._previousActiveHandlers={},this._eventsInProgress={},this._addDefaultHandlers(a),l.bindAll(["handleEvent","handleWindowEvent"],this);var s=this._el;this._listeners=[[s,"touchstart",{passive:!0}],[s,"touchmove",{passive:!1}],[s,"touchend",void 0],[s,"touchcancel",void 0],[s,"mousedown",void 0],[s,"mousemove",void 0],[s,"mouseup",void 0],[l.window.document,"mousemove",{capture:!0}],[l.window.document,"mouseup",void 0],[s,"mouseover",void 0],[s,"mouseout",void 0],[s,"dblclick",void 0],[s,"click",void 0],[s,"keydown",{capture:!1}],[s,"keyup",void 0],[s,"wheel",{passive:!1}],[s,"contextmenu",void 0],[l.window,"blur",void 0]];for(var u=0,P=this._listeners;u<P.length;u+=1){var W=P[u],$=W[0];N.addEventListener($,W[1],$===l.window.document?this.handleWindowEvent:this.handleEvent,W[2])}};yn.prototype.destroy=function(){for(var o=0,a=this._listeners;o<a.length;o+=1){var s=a[o],u=s[0];N.removeEventListener(u,s[1],u===l.window.document?this.handleWindowEvent:this.handleEvent,s[2])}},yn.prototype._addDefaultHandlers=function(o){var a=this._map,s=a.getCanvasContainer();this._add("mapEvent",new fo(a,o));var u=a.boxZoom=new tr(a,o);this._add("boxZoom",u);var P=new So,W=new ta;a.doubleClickZoom=new pa(W,P),this._add("tapZoom",P),this._add("clickZoom",W);var $=new ts;this._add("tapDragZoom",$);var gt=a.touchPitch=new Ra;this._add("touchPitch",gt);var Dt=new Gs(o),Ht=new Ba(o);a.dragRotate=new Fa(o,Dt,Ht),this._add("mouseRotate",Dt,["mousePitch"]),this._add("mousePitch",Ht,["mouseRotate"]);var re=new ws(o),le=new _r(o);a.dragPan=new ja(s,re,le),this._add("mousePan",re),this._add("touchPan",le,["touchZoom","touchRotate"]);var de=new xl,Ie=new os;a.touchZoomRotate=new Ca(s,Ie,de,$),this._add("touchRotate",de,["touchPan","touchZoom"]),this._add("touchZoom",Ie,["touchPan","touchRotate"]);var Pe=a.scrollZoom=new To(a,this);this._add("scrollZoom",Pe,["mousePan"]);var Oe=a.keyboard=new Ws;this._add("keyboard",Oe),this._add("blockableMapEvent",new Hi(a));for(var Se=0,Re=["boxZoom","doubleClickZoom","tapDragZoom","touchPitch","dragRotate","dragPan","touchZoomRotate","scrollZoom","keyboard"];Se<Re.length;Se+=1){var Ze=Re[Se];o.interactive&&o[Ze]&&a[Ze].enable(o[Ze])}},yn.prototype._add=function(o,a,s){this._handlers.push({handlerName:o,handler:a,allowed:s}),this._handlersById[o]=a},yn.prototype.stop=function(o){if(!this._updatingCamera){for(var a=0,s=this._handlers;a<s.length;a+=1)s[a].handler.reset();this._inertia.clear(),this._fireEvents({},{},o),this._changes=[]}},yn.prototype.isActive=function(){for(var o=0,a=this._handlers;o<a.length;o+=1)if(a[o].handler.isActive())return!0;return!1},yn.prototype.isZooming=function(){return!!this._eventsInProgress.zoom||this._map.scrollZoom.isZooming()},yn.prototype.isRotating=function(){return!!this._eventsInProgress.rotate},yn.prototype.isMoving=function(){return Boolean(Ar(this._eventsInProgress))||this.isZooming()},yn.prototype._blockedByActive=function(o,a,s){for(var u in o)if(u!==s&&(!a||a.indexOf(u)<0))return!0;return!1},yn.prototype.handleWindowEvent=function(o){this.handleEvent(o,o.type+"Window")},yn.prototype._getMapTouches=function(o){for(var a=[],s=0,u=o;s<u.length;s+=1){var P=u[s];this._el.contains(P.target)&&a.push(P)}return a},yn.prototype.handleEvent=function(o,a){if("blur"!==o.type){this._updatingCamera=!0;for(var s="renderFrame"===o.type?void 0:o,u={needsRenderFrame:!1},P={},W={},$=o.touches?this._getMapTouches(o.touches):void 0,gt=$?N.touchPos(this._el,$):N.mousePos(this._el,o),Dt=0,Ht=this._handlers;Dt<Ht.length;Dt+=1){var re=Ht[Dt],le=re.handlerName,de=re.handler,Ie=re.allowed;if(de.isEnabled()){var Pe=void 0;this._blockedByActive(W,Ie,le)?de.reset():de[a||o.type]&&(Pe=de[a||o.type](o,gt,$),this.mergeHandlerResult(u,P,Pe,le,s),Pe&&Pe.needsRenderFrame&&this._triggerRenderFrame()),(Pe||de.isActive())&&(W[le]=de)}}var Oe={};for(var Se in this._previousActiveHandlers)W[Se]||(Oe[Se]=s);this._previousActiveHandlers=W,(Object.keys(Oe).length||Pn(u))&&(this._changes.push([u,P,Oe]),this._triggerRenderFrame()),(Object.keys(W).length||Pn(u))&&this._map._stop(!0),this._updatingCamera=!1;var Re=u.cameraAnimation;Re&&(this._inertia.clear(),this._fireEvents({},{},!0),this._changes=[],Re(this._map))}else this.stop(!0)},yn.prototype.mergeHandlerResult=function(o,a,s,u,P){if(s){l.extend(o,s);var W={handlerName:u,originalEvent:s.originalEvent||P};void 0!==s.zoomDelta&&(a.zoom=W),void 0!==s.panDelta&&(a.drag=W),void 0!==s.pitchDelta&&(a.pitch=W),void 0!==s.bearingDelta&&(a.rotate=W)}},yn.prototype._applyChanges=function(){for(var o={},a={},s={},u=0,P=this._changes;u<P.length;u+=1){var W=P[u],$=W[0],gt=W[1],Dt=W[2];$.panDelta&&(o.panDelta=(o.panDelta||new l.Point(0,0))._add($.panDelta)),$.zoomDelta&&(o.zoomDelta=(o.zoomDelta||0)+$.zoomDelta),$.bearingDelta&&(o.bearingDelta=(o.bearingDelta||0)+$.bearingDelta),$.pitchDelta&&(o.pitchDelta=(o.pitchDelta||0)+$.pitchDelta),void 0!==$.around&&(o.around=$.around),void 0!==$.pinchAround&&(o.pinchAround=$.pinchAround),$.noInertia&&(o.noInertia=$.noInertia),l.extend(a,gt),l.extend(s,Dt)}this._updateMapTransform(o,a,s),this._changes=[]},yn.prototype._updateMapTransform=function(o,a,s){var u=this._map,P=u.transform;if(!Pn(o))return this._fireEvents(a,s,!0);var W=o.panDelta,$=o.zoomDelta,gt=o.bearingDelta,Dt=o.pitchDelta,Ht=o.around,re=o.pinchAround;void 0!==re&&(Ht=re),u._stop(!0),Ht=Ht||u.transform.centerPoint;var le=P.pointLocation(W?Ht.sub(W):Ht);gt&&(P.bearing+=gt),Dt&&(P.pitch+=Dt),$&&(P.zoom+=$),P.setLocationAtPoint(le,Ht),this._map._update(),o.noInertia||this._inertia.record(o),this._fireEvents(a,s,!0)},yn.prototype._fireEvents=function(o,a,s){var u=this,P=Ar(this._eventsInProgress),W=Ar(o),$={};for(var gt in o)this._eventsInProgress[gt]||($[gt+"start"]=o[gt].originalEvent),this._eventsInProgress[gt]=o[gt];for(var Dt in!P&&W&&this._fireEvent("movestart",W.originalEvent),$)this._fireEvent(Dt,$[Dt]);for(var Ht in W&&this._fireEvent("move",W.originalEvent),o)this._fireEvent(Ht,o[Ht].originalEvent);var re,le={};for(var de in this._eventsInProgress){var Ie=this._eventsInProgress[de],Pe=Ie.handlerName,Oe=Ie.originalEvent;this._handlersById[Pe].isActive()||(delete this._eventsInProgress[de],le[de+"end"]=re=a[Pe]||Oe)}for(var Se in le)this._fireEvent(Se,le[Se]);var Re=Ar(this._eventsInProgress);if(s&&(P||W)&&!Re){this._updatingCamera=!0;var Ze=this._inertia._onMoveEnd(this._map.dragPan._inertiaOptions),si=function(bi){return 0!==bi&&-u._bearingSnap<bi&&bi<u._bearingSnap};Ze?(si(Ze.bearing||this._map.getBearing())&&(Ze.bearing=0),this._map.easeTo(Ze,{originalEvent:re})):(this._map.fire(new l.Event("moveend",{originalEvent:re})),si(this._map.getBearing())&&this._map.resetNorth()),this._updatingCamera=!1}},yn.prototype._fireEvent=function(o,a){this._map.fire(new l.Event(o,a?{originalEvent:a}:{}))},yn.prototype._requestFrame=function(){var o=this;return this._map.triggerRepaint(),this._map._renderTaskQueue.add(function(a){delete o._frameId,o.handleEvent(new La("renderFrame",{timeStamp:a})),o._applyChanges()})},yn.prototype._triggerRenderFrame=function(){void 0===this._frameId&&(this._frameId=this._requestFrame())};var $a=function(o){function a(s,u){o.call(this),this._moving=!1,this._zooming=!1,this.transform=s,this._bearingSnap=u.bearingSnap,l.bindAll(["_renderFrameCallback"],this)}return o&&(a.__proto__=o),(a.prototype=Object.create(o&&o.prototype)).constructor=a,a.prototype.getCenter=function(){return new l.LngLat(this.transform.center.lng,this.transform.center.lat)},a.prototype.setCenter=function(s,u){return this.jumpTo({center:s},u)},a.prototype.panBy=function(s,u,P){return s=l.Point.convert(s).mult(-1),this.panTo(this.transform.center,l.extend({offset:s},u),P)},a.prototype.panTo=function(s,u,P){return this.easeTo(l.extend({center:s},u),P)},a.prototype.getZoom=function(){return this.transform.zoom},a.prototype.setZoom=function(s,u){return this.jumpTo({zoom:s},u),this},a.prototype.zoomTo=function(s,u,P){return this.easeTo(l.extend({zoom:s},u),P)},a.prototype.zoomIn=function(s,u){return this.zoomTo(this.getZoom()+1,s,u),this},a.prototype.zoomOut=function(s,u){return this.zoomTo(this.getZoom()-1,s,u),this},a.prototype.getBearing=function(){return this.transform.bearing},a.prototype.setBearing=function(s,u){return this.jumpTo({bearing:s},u),this},a.prototype.getPadding=function(){return this.transform.padding},a.prototype.setPadding=function(s,u){return this.jumpTo({padding:s},u),this},a.prototype.rotateTo=function(s,u,P){return this.easeTo(l.extend({bearing:s},u),P)},a.prototype.resetNorth=function(s,u){return this.rotateTo(0,l.extend({duration:1e3},s),u),this},a.prototype.resetNorthPitch=function(s,u){return this.easeTo(l.extend({bearing:0,pitch:0,duration:1e3},s),u),this},a.prototype.snapToNorth=function(s,u){return Math.abs(this.getBearing())<this._bearingSnap?this.resetNorth(s,u):this},a.prototype.getPitch=function(){return this.transform.pitch},a.prototype.setPitch=function(s,u){return this.jumpTo({pitch:s},u),this},a.prototype.cameraForBounds=function(s,u){s=l.LngLatBounds.convert(s);var P=u&&u.bearing||0;return this._cameraForBoxAndBearing(s.getNorthWest(),s.getSouthEast(),P,u)},a.prototype._cameraForBoxAndBearing=function(s,u,P,W){var $={top:0,bottom:0,right:0,left:0};if("number"==typeof(W=l.extend({padding:$,offset:[0,0],maxZoom:this.transform.maxZoom},W)).padding){var gt=W.padding;W.padding={top:gt,bottom:gt,right:gt,left:gt}}W.padding=l.extend($,W.padding);var Dt=this.transform,Ht=Dt.padding,re=Dt.project(l.LngLat.convert(s)),le=Dt.project(l.LngLat.convert(u)),de=re.rotate(-P*Math.PI/180),Ie=le.rotate(-P*Math.PI/180),Pe=new l.Point(Math.max(de.x,Ie.x),Math.max(de.y,Ie.y)),Oe=new l.Point(Math.min(de.x,Ie.x),Math.min(de.y,Ie.y)),Se=Pe.sub(Oe),Re=(Dt.width-(Ht.left+Ht.right+W.padding.left+W.padding.right))/Se.x,Ze=(Dt.height-(Ht.top+Ht.bottom+W.padding.top+W.padding.bottom))/Se.y;if(!(Ze<0||Re<0)){var si=Math.min(Dt.scaleZoom(Dt.scale*Math.min(Re,Ze)),W.maxZoom),bi="number"==typeof W.offset.x?new l.Point(W.offset.x,W.offset.y):l.Point.convert(W.offset),mi=new l.Point((W.padding.left-W.padding.right)/2,(W.padding.top-W.padding.bottom)/2).rotate(P*Math.PI/180),wi=bi.add(mi).mult(Dt.scale/Dt.zoomScale(si));return{center:Dt.unproject(re.add(le).div(2).sub(wi)),zoom:si,bearing:P}}l.warnOnce("Map cannot fit within canvas with the given bounds, padding, and/or offset.")},a.prototype.fitBounds=function(s,u,P){return this._fitInternal(this.cameraForBounds(s,u),u,P)},a.prototype.fitScreenCoordinates=function(s,u,P,W,$){return this._fitInternal(this._cameraForBoxAndBearing(this.transform.pointLocation(l.Point.convert(s)),this.transform.pointLocation(l.Point.convert(u)),P,W),W,$)},a.prototype._fitInternal=function(s,u,P){return s?(delete(u=l.extend(s,u)).padding,u.linear?this.easeTo(u,P):this.flyTo(u,P)):this},a.prototype.jumpTo=function(s,u){this.stop();var P=this.transform,W=!1,$=!1,gt=!1;return"zoom"in s&&P.zoom!==+s.zoom&&(W=!0,P.zoom=+s.zoom),void 0!==s.center&&(P.center=l.LngLat.convert(s.center)),"bearing"in s&&P.bearing!==+s.bearing&&($=!0,P.bearing=+s.bearing),"pitch"in s&&P.pitch!==+s.pitch&&(gt=!0,P.pitch=+s.pitch),null==s.padding||P.isPaddingEqual(s.padding)||(P.padding=s.padding),this.fire(new l.Event("movestart",u)).fire(new l.Event("move",u)),W&&this.fire(new l.Event("zoomstart",u)).fire(new l.Event("zoom",u)).fire(new l.Event("zoomend",u)),$&&this.fire(new l.Event("rotatestart",u)).fire(new l.Event("rotate",u)).fire(new l.Event("rotateend",u)),gt&&this.fire(new l.Event("pitchstart",u)).fire(new l.Event("pitch",u)).fire(new l.Event("pitchend",u)),this.fire(new l.Event("moveend",u))},a.prototype.easeTo=function(s,u){var P=this;this._stop(!1,s.easeId),(!1===(s=l.extend({offset:[0,0],duration:500,easing:l.ease},s)).animate||!s.essential&&l.browser.prefersReducedMotion)&&(s.duration=0);var W=this.transform,$=this.getZoom(),gt=this.getBearing(),Dt=this.getPitch(),Ht=this.getPadding(),re="zoom"in s?+s.zoom:$,le="bearing"in s?this._normalizeBearing(s.bearing,gt):gt,de="pitch"in s?+s.pitch:Dt,Ie="padding"in s?s.padding:W.padding,Pe=l.Point.convert(s.offset),Oe=W.centerPoint.add(Pe),Se=W.pointLocation(Oe),Re=l.LngLat.convert(s.center||Se);this._normalizeCenter(Re);var Ze,si,bi=W.project(Se),mi=W.project(Re).sub(bi),wi=W.zoomScale(re-$);s.around&&(Ze=l.LngLat.convert(s.around),si=W.locationPoint(Ze));var Ri={moving:this._moving,zooming:this._zooming,rotating:this._rotating,pitching:this._pitching};return this._zooming=this._zooming||re!==$,this._rotating=this._rotating||gt!==le,this._pitching=this._pitching||de!==Dt,this._padding=!W.isPaddingEqual(Ie),this._easeId=s.easeId,this._prepareEase(u,s.noMoveStart,Ri),this._ease(function($i){if(P._zooming&&(W.zoom=l.number($,re,$i)),P._rotating&&(W.bearing=l.number(gt,le,$i)),P._pitching&&(W.pitch=l.number(Dt,de,$i)),P._padding&&(W.interpolatePadding(Ht,Ie,$i),Oe=W.centerPoint.add(Pe)),Ze)W.setLocationAtPoint(Ze,si);else{var Xi=W.zoomScale(W.zoom-$),fn=re>$?Math.min(2,wi):Math.max(.5,wi),Mn=Math.pow(fn,1-$i),zn=W.unproject(bi.add(mi.mult($i*Mn)).mult(Xi));W.setLocationAtPoint(W.renderWorldCopies?zn.wrap():zn,Oe)}P._fireMoveEvents(u)},function($i){P._afterEase(u,$i)},s),this},a.prototype._prepareEase=function(s,u,P){void 0===P&&(P={}),this._moving=!0,u||P.moving||this.fire(new l.Event("movestart",s)),this._zooming&&!P.zooming&&this.fire(new l.Event("zoomstart",s)),this._rotating&&!P.rotating&&this.fire(new l.Event("rotatestart",s)),this._pitching&&!P.pitching&&this.fire(new l.Event("pitchstart",s))},a.prototype._fireMoveEvents=function(s){this.fire(new l.Event("move",s)),this._zooming&&this.fire(new l.Event("zoom",s)),this._rotating&&this.fire(new l.Event("rotate",s)),this._pitching&&this.fire(new l.Event("pitch",s))},a.prototype._afterEase=function(s,u){if(!this._easeId||!u||this._easeId!==u){delete this._easeId;var P=this._zooming,W=this._rotating,$=this._pitching;this._moving=!1,this._zooming=!1,this._rotating=!1,this._pitching=!1,this._padding=!1,P&&this.fire(new l.Event("zoomend",s)),W&&this.fire(new l.Event("rotateend",s)),$&&this.fire(new l.Event("pitchend",s)),this.fire(new l.Event("moveend",s))}},a.prototype.flyTo=function(s,u){var P=this;if(!s.essential&&l.browser.prefersReducedMotion){var W=l.pick(s,["center","zoom","bearing","pitch","around"]);return this.jumpTo(W,u)}this.stop(),s=l.extend({offset:[0,0],speed:1.2,curve:1.42,easing:l.ease},s);var $=this.transform,gt=this.getZoom(),Dt=this.getBearing(),Ht=this.getPitch(),re=this.getPadding(),le="zoom"in s?l.clamp(+s.zoom,$.minZoom,$.maxZoom):gt,de="bearing"in s?this._normalizeBearing(s.bearing,Dt):Dt,Ie="pitch"in s?+s.pitch:Ht,Pe="padding"in s?s.padding:$.padding,Oe=$.zoomScale(le-gt),Se=l.Point.convert(s.offset),Re=$.centerPoint.add(Se),Ze=$.pointLocation(Re),si=l.LngLat.convert(s.center||Ze);this._normalizeCenter(si);var bi=$.project(Ze),mi=$.project(si).sub(bi),wi=s.curve,Ri=Math.max($.width,$.height),$i=Ri/Oe,Xi=mi.mag();if("minZoom"in s){var fn=l.clamp(Math.min(s.minZoom,gt,le),$.minZoom,$.maxZoom),Mn=Ri/$.zoomScale(fn-gt);wi=Math.sqrt(Mn/Xi*2)}var zn=wi*wi;function Ln($n){var Vn=($i*$i-Ri*Ri+($n?-1:1)*zn*zn*Xi*Xi)/(2*($n?$i:Ri)*zn*Xi);return Math.log(Math.sqrt(Vn*Vn+1)-Vn)}function Wo($n){return(Math.exp($n)-Math.exp(-$n))/2}function un($n){return(Math.exp($n)+Math.exp(-$n))/2}var to=Ln(0),yo=function($n){return un(to)/un(to+wi*$n)},Kn=function($n){return Ri*((un(to)*(Wo(Vn=to+wi*$n)/un(Vn))-Wo(to))/zn)/Xi;var Vn},qn=(Ln(1)-to)/wi;if(Math.abs(Xi)<1e-6||!isFinite(qn)){if(Math.abs(Ri-$i)<1e-6)return this.easeTo(s,u);var mo=$i<Ri?-1:1;qn=Math.abs(Math.log($i/Ri))/wi,Kn=function(){return 0},yo=function($n){return Math.exp(mo*wi*$n)}}return s.duration="duration"in s?+s.duration:1e3*qn/("screenSpeed"in s?+s.screenSpeed/wi:+s.speed),s.maxDuration&&s.duration>s.maxDuration&&(s.duration=0),this._zooming=!0,this._rotating=Dt!==de,this._pitching=Ie!==Ht,this._padding=!$.isPaddingEqual(Pe),this._prepareEase(u,!1),this._ease(function($n){var Vn=$n*qn,Ss=1/yo(Vn);$.zoom=1===$n?le:gt+$.scaleZoom(Ss),P._rotating&&($.bearing=l.number(Dt,de,$n)),P._pitching&&($.pitch=l.number(Ht,Ie,$n)),P._padding&&($.interpolatePadding(re,Pe,$n),Re=$.centerPoint.add(Se));var es=1===$n?si:$.unproject(bi.add(mi.mult(Kn(Vn))).mult(Ss));$.setLocationAtPoint($.renderWorldCopies?es.wrap():es,Re),P._fireMoveEvents(u)},function(){return P._afterEase(u)},s),this},a.prototype.isEasing=function(){return!!this._easeFrameId},a.prototype.stop=function(){return this._stop()},a.prototype._stop=function(s,u){if(this._easeFrameId&&(this._cancelRenderFrame(this._easeFrameId),delete this._easeFrameId,delete this._onEaseFrame),this._onEaseEnd){var P=this._onEaseEnd;delete this._onEaseEnd,P.call(this,u)}if(!s){var W=this.handlers;W&&W.stop(!1)}return this},a.prototype._ease=function(s,u,P){!1===P.animate||0===P.duration?(s(1),u()):(this._easeStart=l.browser.now(),this._easeOptions=P,this._onEaseFrame=s,this._onEaseEnd=u,this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback))},a.prototype._renderFrameCallback=function(){var s=Math.min((l.browser.now()-this._easeStart)/this._easeOptions.duration,1);this._onEaseFrame(this._easeOptions.easing(s)),s<1?this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback):this.stop()},a.prototype._normalizeBearing=function(s,u){s=l.wrap(s,-180,180);var P=Math.abs(s-u);return Math.abs(s-360-u)<P&&(s-=360),Math.abs(s+360-u)<P&&(s+=360),s},a.prototype._normalizeCenter=function(s){var u=this.transform;if(u.renderWorldCopies&&!u.lngRange){var P=s.lng-u.center.lng;s.lng+=P>180?-360:P<-180?360:0}},a}(l.Evented),zs=function(o){void 0===o&&(o={}),this.options=o,l.bindAll(["_toggleAttribution","_updateEditLink","_updateData","_updateCompact"],this)};zs.prototype.getDefaultPosition=function(){return"bottom-right"},zs.prototype.onAdd=function(o){var a=this.options&&this.options.compact;return this._map=o,this._container=N.create("div","mapboxgl-ctrl mapboxgl-ctrl-attrib"),this._compactButton=N.create("button","mapboxgl-ctrl-attrib-button",this._container),this._compactButton.addEventListener("click",this._toggleAttribution),this._setElementTitle(this._compactButton,"ToggleAttribution"),this._innerContainer=N.create("div","mapboxgl-ctrl-attrib-inner",this._container),this._innerContainer.setAttribute("role","list"),a&&this._container.classList.add("mapboxgl-compact"),this._updateAttributions(),this._updateEditLink(),this._map.on("styledata",this._updateData),this._map.on("sourcedata",this._updateData),this._map.on("moveend",this._updateEditLink),void 0===a&&(this._map.on("resize",this._updateCompact),this._updateCompact()),this._container},zs.prototype.onRemove=function(){N.remove(this._container),this._map.off("styledata",this._updateData),this._map.off("sourcedata",this._updateData),this._map.off("moveend",this._updateEditLink),this._map.off("resize",this._updateCompact),this._map=void 0,this._attribHTML=void 0},zs.prototype._setElementTitle=function(o,a){var s=this._map._getUIString("AttributionControl."+a);o.title=s,o.setAttribute("aria-label",s)},zs.prototype._toggleAttribution=function(){this._container.classList.contains("mapboxgl-compact-show")?(this._container.classList.remove("mapboxgl-compact-show"),this._compactButton.setAttribute("aria-pressed","false")):(this._container.classList.add("mapboxgl-compact-show"),this._compactButton.setAttribute("aria-pressed","true"))},zs.prototype._updateEditLink=function(){var o=this._editLink;o||(o=this._editLink=this._container.querySelector(".mapbox-improve-map"));var a=[{key:"owner",value:this.styleOwner},{key:"id",value:this.styleId},{key:"access_token",value:this._map._requestManager._customAccessToken||l.config.ACCESS_TOKEN}];if(o){var s=a.reduce(function(u,P,W){return P.value&&(u+=P.key+"="+P.value+(W<a.length-1?"&":"")),u},"?");o.href=l.config.FEEDBACK_URL+"/"+s+(this._map._hash?this._map._hash.getHashString(!0):""),o.rel="noopener nofollow",this._setElementTitle(o,"MapFeedback")}},zs.prototype._updateData=function(o){!o||"metadata"!==o.sourceDataType&&"visibility"!==o.sourceDataType&&"style"!==o.dataType||(this._updateAttributions(),this._updateEditLink())},zs.prototype._updateAttributions=function(){if(this._map.style){var o=[];if(this.options.customAttribution&&(Array.isArray(this.options.customAttribution)?o=o.concat(this.options.customAttribution.map(function(gt){return"string"!=typeof gt?"":gt})):"string"==typeof this.options.customAttribution&&o.push(this.options.customAttribution)),this._map.style.stylesheet){var a=this._map.style.stylesheet;this.styleOwner=a.owner,this.styleId=a.id}var s=this._map.style.sourceCaches;for(var u in s){var P=s[u];if(P.used){var W=P.getSource();W.attribution&&o.indexOf(W.attribution)<0&&o.push(W.attribution)}}o.sort(function(gt,Dt){return gt.length-Dt.length});var $=(o=o.filter(function(gt,Dt){for(var Ht=Dt+1;Ht<o.length;Ht++)if(o[Ht].indexOf(gt)>=0)return!1;return!0})).join(" | ");$!==this._attribHTML&&(this._attribHTML=$,o.length?(this._innerContainer.innerHTML=$,this._container.classList.remove("mapboxgl-attrib-empty")):this._container.classList.add("mapboxgl-attrib-empty"),this._editLink=null)}},zs.prototype._updateCompact=function(){this._map.getCanvasContainer().offsetWidth<=640?this._container.classList.add("mapboxgl-compact"):this._container.classList.remove("mapboxgl-compact","mapboxgl-compact-show")};var da=function(){l.bindAll(["_updateLogo"],this),l.bindAll(["_updateCompact"],this)};da.prototype.onAdd=function(o){this._map=o,this._container=N.create("div","mapboxgl-ctrl");var a=N.create("a","mapboxgl-ctrl-logo");return a.target="_blank",a.rel="noopener nofollow",a.href="https://www.mapbox.com/",a.setAttribute("aria-label",this._map._getUIString("LogoControl.Title")),a.setAttribute("rel","noopener nofollow"),this._container.appendChild(a),this._container.style.display="none",this._map.on("sourcedata",this._updateLogo),this._updateLogo(),this._map.on("resize",this._updateCompact),this._updateCompact(),this._container},da.prototype.onRemove=function(){N.remove(this._container),this._map.off("sourcedata",this._updateLogo),this._map.off("resize",this._updateCompact)},da.prototype.getDefaultPosition=function(){return"bottom-left"},da.prototype._updateLogo=function(o){o&&"metadata"!==o.sourceDataType||(this._container.style.display=this._logoRequired()?"block":"none")},da.prototype._logoRequired=function(){if(this._map.style){var o=this._map.style.sourceCaches;for(var a in o)if(o[a].getSource().mapbox_logo)return!0;return!1}},da.prototype._updateCompact=function(){var o=this._container.children;if(o.length){var a=o[0];this._map.getCanvasContainer().offsetWidth<250?a.classList.add("mapboxgl-compact"):a.classList.remove("mapboxgl-compact")}};var ms=function(){this._queue=[],this._id=0,this._cleared=!1,this._currentlyRunning=!1};ms.prototype.add=function(o){var a=++this._id;return this._queue.push({callback:o,id:a,cancelled:!1}),a},ms.prototype.remove=function(o){for(var a=this._currentlyRunning,s=0,u=a?this._queue.concat(a):this._queue;s<u.length;s+=1){var P=u[s];if(P.id===o)return void(P.cancelled=!0)}},ms.prototype.run=function(o){void 0===o&&(o=0);var a=this._currentlyRunning=this._queue;this._queue=[];for(var s=0,u=a;s<u.length;s+=1){var P=u[s];if(!P.cancelled&&(P.callback(o),this._cleared))break}this._cleared=!1,this._currentlyRunning=!1},ms.prototype.clear=function(){this._currentlyRunning&&(this._cleared=!0),this._queue=[]};var Aa={"AttributionControl.ToggleAttribution":"Toggle attribution","AttributionControl.MapFeedback":"Map feedback","FullscreenControl.Enter":"Enter fullscreen","FullscreenControl.Exit":"Exit fullscreen","GeolocateControl.FindMyLocation":"Find my location","GeolocateControl.LocationNotAvailable":"Location not available","LogoControl.Title":"Mapbox logo","NavigationControl.ResetBearing":"Reset bearing to north","NavigationControl.ZoomIn":"Zoom in","NavigationControl.ZoomOut":"Zoom out","ScaleControl.Feet":"ft","ScaleControl.Meters":"m","ScaleControl.Kilometers":"km","ScaleControl.Miles":"mi","ScaleControl.NauticalMiles":"nm"},ul=l.window.HTMLImageElement,bl=l.window.HTMLElement,Yo=l.window.ImageBitmap,Pr={center:[0,0],zoom:0,bearing:0,pitch:0,minZoom:-2,maxZoom:22,minPitch:0,maxPitch:60,interactive:!0,scrollZoom:!0,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,touchPitch:!0,bearingSnap:7,clickTolerance:3,pitchWithRotate:!0,hash:!1,attributionControl:!0,failIfMajorPerformanceCaveat:!1,preserveDrawingBuffer:!1,trackResize:!0,renderWorldCopies:!0,refreshExpiredTiles:!0,maxTileCacheSize:null,localIdeographFontFamily:"sans-serif",transformRequest:null,accessToken:null,fadeDuration:300,crossSourceCollisions:!0},Gl=function(o){function a(u){var P=this;if(null!=(u=l.extend({},Pr,u)).minZoom&&null!=u.maxZoom&&u.minZoom>u.maxZoom)throw new Error("maxZoom must be greater than or equal to minZoom");if(null!=u.minPitch&&null!=u.maxPitch&&u.minPitch>u.maxPitch)throw new Error("maxPitch must be greater than or equal to minPitch");if(null!=u.minPitch&&u.minPitch<0)throw new Error("minPitch must be greater than or equal to 0");if(null!=u.maxPitch&&u.maxPitch>60)throw new Error("maxPitch must be less than or equal to 60");var W=new ji(u.minZoom,u.maxZoom,u.minPitch,u.maxPitch,u.renderWorldCopies);if(o.call(this,W,u),this._interactive=u.interactive,this._maxTileCacheSize=u.maxTileCacheSize,this._failIfMajorPerformanceCaveat=u.failIfMajorPerformanceCaveat,this._preserveDrawingBuffer=u.preserveDrawingBuffer,this._antialias=u.antialias,this._trackResize=u.trackResize,this._bearingSnap=u.bearingSnap,this._refreshExpiredTiles=u.refreshExpiredTiles,this._fadeDuration=u.fadeDuration,this._crossSourceCollisions=u.crossSourceCollisions,this._crossFadingFactor=1,this._collectResourceTiming=u.collectResourceTiming,this._renderTaskQueue=new ms,this._controls=[],this._mapId=l.uniqueId(),this._locale=l.extend({},Aa,u.locale),this._clickTolerance=u.clickTolerance,this._requestManager=new l.RequestManager(u.transformRequest,u.accessToken),"string"==typeof u.container){if(this._container=l.window.document.getElementById(u.container),!this._container)throw new Error("Container '"+u.container+"' not found.")}else{if(!(u.container instanceof bl))throw new Error("Invalid type: 'container' must be a String or HTMLElement.");this._container=u.container}if(u.maxBounds&&this.setMaxBounds(u.maxBounds),l.bindAll(["_onWindowOnline","_onWindowResize","_onMapScroll","_contextLost","_contextRestored"],this),this._setupContainer(),this._setupPainter(),void 0===this.painter)throw new Error("Failed to initialize WebGL.");this.on("move",function(){return P._update(!1)}),this.on("moveend",function(){return P._update(!1)}),this.on("zoom",function(){return P._update(!0)}),void 0!==l.window&&(l.window.addEventListener("online",this._onWindowOnline,!1),l.window.addEventListener("resize",this._onWindowResize,!1),l.window.addEventListener("orientationchange",this._onWindowResize,!1)),this.handlers=new yn(this,u),this._hash=u.hash&&new Qn("string"==typeof u.hash&&u.hash||void 0).addTo(this),this._hash&&this._hash._onHashChange()||(this.jumpTo({center:u.center,zoom:u.zoom,bearing:u.bearing,pitch:u.pitch}),u.bounds&&(this.resize(),this.fitBounds(u.bounds,l.extend({},u.fitBoundsOptions,{duration:0})))),this.resize(),this._localIdeographFontFamily=u.localIdeographFontFamily,u.style&&this.setStyle(u.style,{localIdeographFontFamily:u.localIdeographFontFamily}),u.attributionControl&&this.addControl(new zs({customAttribution:u.customAttribution})),this.addControl(new da,u.logoPosition),this.on("style.load",function(){P.transform.unmodified&&P.jumpTo(P.style.stylesheet)}),this.on("data",function($){P._update("style"===$.dataType),P.fire(new l.Event($.dataType+"data",$))}),this.on("dataloading",function($){P.fire(new l.Event($.dataType+"dataloading",$))})}o&&(a.__proto__=o),(a.prototype=Object.create(o&&o.prototype)).constructor=a;var s={showTileBoundaries:{configurable:!0},showPadding:{configurable:!0},showCollisionBoxes:{configurable:!0},showOverdrawInspector:{configurable:!0},repaint:{configurable:!0},vertices:{configurable:!0},version:{configurable:!0}};return a.prototype._getMapId=function(){return this._mapId},a.prototype.addControl=function(u,P){if(void 0===P&&(P=u.getDefaultPosition?u.getDefaultPosition():"top-right"),!u||!u.onAdd)return this.fire(new l.ErrorEvent(new Error("Invalid argument to map.addControl(). Argument must be a control with onAdd and onRemove methods.")));var W=u.onAdd(this);this._controls.push(u);var $=this._controlPositions[P];return-1!==P.indexOf("bottom")?$.insertBefore(W,$.firstChild):$.appendChild(W),this},a.prototype.removeControl=function(u){if(!u||!u.onRemove)return this.fire(new l.ErrorEvent(new Error("Invalid argument to map.removeControl(). Argument must be a control with onAdd and onRemove methods.")));var P=this._controls.indexOf(u);return P>-1&&this._controls.splice(P,1),u.onRemove(this),this},a.prototype.hasControl=function(u){return this._controls.indexOf(u)>-1},a.prototype.resize=function(u){var P=this._containerDimensions(),W=P[0],$=P[1];this._resizeCanvas(W,$),this.transform.resize(W,$),this.painter.resize(W,$);var gt=!this._moving;return gt&&(this.stop(),this.fire(new l.Event("movestart",u)).fire(new l.Event("move",u))),this.fire(new l.Event("resize",u)),gt&&this.fire(new l.Event("moveend",u)),this},a.prototype.getBounds=function(){return this.transform.getBounds()},a.prototype.getMaxBounds=function(){return this.transform.getMaxBounds()},a.prototype.setMaxBounds=function(u){return this.transform.setMaxBounds(l.LngLatBounds.convert(u)),this._update()},a.prototype.setMinZoom=function(u){if((u=u??-2)>=-2&&u<=this.transform.maxZoom)return this.transform.minZoom=u,this._update(),this.getZoom()<u&&this.setZoom(u),this;throw new Error("minZoom must be between -2 and the current maxZoom, inclusive")},a.prototype.getMinZoom=function(){return this.transform.minZoom},a.prototype.setMaxZoom=function(u){if((u=u??22)>=this.transform.minZoom)return this.transform.maxZoom=u,this._update(),this.getZoom()>u&&this.setZoom(u),this;throw new Error("maxZoom must be greater than the current minZoom")},a.prototype.getMaxZoom=function(){return this.transform.maxZoom},a.prototype.setMinPitch=function(u){if((u=u??0)<0)throw new Error("minPitch must be greater than or equal to 0");if(u>=0&&u<=this.transform.maxPitch)return this.transform.minPitch=u,this._update(),this.getPitch()<u&&this.setPitch(u),this;throw new Error("minPitch must be between 0 and the current maxPitch, inclusive")},a.prototype.getMinPitch=function(){return this.transform.minPitch},a.prototype.setMaxPitch=function(u){if((u=u??60)>60)throw new Error("maxPitch must be less than or equal to 60");if(u>=this.transform.minPitch)return this.transform.maxPitch=u,this._update(),this.getPitch()>u&&this.setPitch(u),this;throw new Error("maxPitch must be greater than the current minPitch")},a.prototype.getMaxPitch=function(){return this.transform.maxPitch},a.prototype.getRenderWorldCopies=function(){return this.transform.renderWorldCopies},a.prototype.setRenderWorldCopies=function(u){return this.transform.renderWorldCopies=u,this._update()},a.prototype.project=function(u){return this.transform.locationPoint(l.LngLat.convert(u))},a.prototype.unproject=function(u){return this.transform.pointLocation(l.Point.convert(u))},a.prototype.isMoving=function(){return this._moving||this.handlers.isMoving()},a.prototype.isZooming=function(){return this._zooming||this.handlers.isZooming()},a.prototype.isRotating=function(){return this._rotating||this.handlers.isRotating()},a.prototype._createDelegatedListener=function(u,P,W){var $,gt=this;if("mouseenter"===u||"mouseover"===u){var Dt=!1;return{layer:P,listener:W,delegates:{mousemove:function(re){var le=gt.getLayer(P)?gt.queryRenderedFeatures(re.point,{layers:[P]}):[];le.length?Dt||(Dt=!0,W.call(gt,new Un(u,gt,re.originalEvent,{features:le}))):Dt=!1},mouseout:function(){Dt=!1}}}}if("mouseleave"===u||"mouseout"===u){var Ht=!1;return{layer:P,listener:W,delegates:{mousemove:function(re){(gt.getLayer(P)?gt.queryRenderedFeatures(re.point,{layers:[P]}):[]).length?Ht=!0:Ht&&(Ht=!1,W.call(gt,new Un(u,gt,re.originalEvent)))},mouseout:function(re){Ht&&(Ht=!1,W.call(gt,new Un(u,gt,re.originalEvent)))}}}}return{layer:P,listener:W,delegates:($={},$[u]=function(re){var le=gt.getLayer(P)?gt.queryRenderedFeatures(re.point,{layers:[P]}):[];le.length&&(re.features=le,W.call(gt,re),delete re.features)},$)}},a.prototype.on=function(u,P,W){if(void 0===W)return o.prototype.on.call(this,u,P);var $=this._createDelegatedListener(u,P,W);for(var gt in this._delegatedListeners=this._delegatedListeners||{},this._delegatedListeners[u]=this._delegatedListeners[u]||[],this._delegatedListeners[u].push($),$.delegates)this.on(gt,$.delegates[gt]);return this},a.prototype.once=function(u,P,W){if(void 0===W)return o.prototype.once.call(this,u,P);var $=this._createDelegatedListener(u,P,W);for(var gt in $.delegates)this.once(gt,$.delegates[gt]);return this},a.prototype.off=function(u,P,W){var $=this;return void 0===W?o.prototype.off.call(this,u,P):(this._delegatedListeners&&this._delegatedListeners[u]&&function(gt){for(var Dt=gt[u],Ht=0;Ht<Dt.length;Ht++){var re=Dt[Ht];if(re.layer===P&&re.listener===W){for(var le in re.delegates)$.off(le,re.delegates[le]);return Dt.splice(Ht,1),$}}}(this._delegatedListeners),this)},a.prototype.queryRenderedFeatures=function(u,P){if(!this.style)return[];var W;if(void 0!==P||void 0===u||u instanceof l.Point||Array.isArray(u)||(P=u,u=void 0),P=P||{},(u=u||[[0,0],[this.transform.width,this.transform.height]])instanceof l.Point||"number"==typeof u[0])W=[l.Point.convert(u)];else{var $=l.Point.convert(u[0]),gt=l.Point.convert(u[1]);W=[$,new l.Point(gt.x,$.y),gt,new l.Point($.x,gt.y),$]}return this.style.queryRenderedFeatures(W,P,this.transform)},a.prototype.querySourceFeatures=function(u,P){return this.style.querySourceFeatures(u,P)},a.prototype.setStyle=function(u,P){return!1!==(P=l.extend({},{localIdeographFontFamily:this._localIdeographFontFamily},P)).diff&&P.localIdeographFontFamily===this._localIdeographFontFamily&&this.style&&u?(this._diffStyle(u,P),this):(this._localIdeographFontFamily=P.localIdeographFontFamily,this._updateStyle(u,P))},a.prototype._getUIString=function(u){var P=this._locale[u];if(null==P)throw new Error("Missing UI string '"+u+"'");return P},a.prototype._updateStyle=function(u,P){return this.style&&(this.style.setEventedParent(null),this.style._remove()),u?(this.style=new an(this,P||{}),this.style.setEventedParent(this,{style:this.style}),"string"==typeof u?this.style.loadURL(u):this.style.loadJSON(u),this):(delete this.style,this)},a.prototype._lazyInitEmptyStyle=function(){this.style||(this.style=new an(this,{}),this.style.setEventedParent(this,{style:this.style}),this.style.loadEmpty())},a.prototype._diffStyle=function(u,P){var W=this;if("string"==typeof u){var $=this._requestManager.normalizeStyleURL(u),gt=this._requestManager.transformRequest($,l.ResourceType.Style);l.getJSON(gt,function(Dt,Ht){Dt?W.fire(new l.ErrorEvent(Dt)):Ht&&W._updateDiff(Ht,P)})}else"object"==typeof u&&this._updateDiff(u,P)},a.prototype._updateDiff=function(u,P){try{this.style.setState(u)&&this._update(!0)}catch(W){l.warnOnce("Unable to perform style diff: "+(W.message||W.error||W)+".  Rebuilding the style from scratch."),this._updateStyle(u,P)}},a.prototype.getStyle=function(){if(this.style)return this.style.serialize()},a.prototype.isStyleLoaded=function(){return this.style?this.style.loaded():l.warnOnce("There is no style added to the map.")},a.prototype.addSource=function(u,P){return this._lazyInitEmptyStyle(),this.style.addSource(u,P),this._update(!0)},a.prototype.isSourceLoaded=function(u){var P=this.style&&this.style.sourceCaches[u];if(void 0!==P)return P.loaded();this.fire(new l.ErrorEvent(new Error("There is no source with ID '"+u+"'")))},a.prototype.areTilesLoaded=function(){var u=this.style&&this.style.sourceCaches;for(var P in u){var W=u[P]._tiles;for(var $ in W){var gt=W[$];if("loaded"!==gt.state&&"errored"!==gt.state)return!1}}return!0},a.prototype.addSourceType=function(u,P,W){return this._lazyInitEmptyStyle(),this.style.addSourceType(u,P,W)},a.prototype.removeSource=function(u){return this.style.removeSource(u),this._update(!0)},a.prototype.getSource=function(u){return this.style.getSource(u)},a.prototype.addImage=function(u,P,W){void 0===W&&(W={});var $=W.pixelRatio;void 0===$&&($=1);var gt=W.sdf;void 0===gt&&(gt=!1);var Dt=W.stretchX,Ht=W.stretchY,re=W.content;if(this._lazyInitEmptyStyle(),P instanceof ul||Yo&&P instanceof Yo){var le=l.browser.getImageData(P);this.style.addImage(u,{data:new l.RGBAImage({width:le.width,height:le.height},le.data),pixelRatio:$,stretchX:Dt,stretchY:Ht,content:re,sdf:gt,version:0})}else{if(void 0===P.width||void 0===P.height)return this.fire(new l.ErrorEvent(new Error("Invalid arguments to map.addImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));var de=P;this.style.addImage(u,{data:new l.RGBAImage({width:P.width,height:P.height},new Uint8Array(P.data)),pixelRatio:$,stretchX:Dt,stretchY:Ht,content:re,sdf:gt,version:0,userImage:de}),de.onAdd&&de.onAdd(this,u)}},a.prototype.updateImage=function(u,P){var W=this.style.getImage(u);if(!W)return this.fire(new l.ErrorEvent(new Error("The map has no image with that id. If you are adding a new image use `map.addImage(...)` instead.")));var $=P instanceof ul||Yo&&P instanceof Yo?l.browser.getImageData(P):P,gt=$.width,Dt=$.height,Ht=$.data;return void 0===gt||void 0===Dt?this.fire(new l.ErrorEvent(new Error("Invalid arguments to map.updateImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`"))):gt!==W.data.width||Dt!==W.data.height?this.fire(new l.ErrorEvent(new Error("The width and height of the updated image must be that same as the previous version of the image"))):(W.data.replace(Ht,!(P instanceof ul||Yo&&P instanceof Yo)),void this.style.updateImage(u,W))},a.prototype.hasImage=function(u){return u?!!this.style.getImage(u):(this.fire(new l.ErrorEvent(new Error("Missing required image id"))),!1)},a.prototype.removeImage=function(u){this.style.removeImage(u)},a.prototype.loadImage=function(u,P){l.getImage(this._requestManager.transformRequest(u,l.ResourceType.Image),P)},a.prototype.listImages=function(){return this.style.listImages()},a.prototype.addLayer=function(u,P){return this._lazyInitEmptyStyle(),this.style.addLayer(u,P),this._update(!0)},a.prototype.moveLayer=function(u,P){return this.style.moveLayer(u,P),this._update(!0)},a.prototype.removeLayer=function(u){return this.style.removeLayer(u),this._update(!0)},a.prototype.getLayer=function(u){return this.style.getLayer(u)},a.prototype.setLayerZoomRange=function(u,P,W){return this.style.setLayerZoomRange(u,P,W),this._update(!0)},a.prototype.setFilter=function(u,P,W){return void 0===W&&(W={}),this.style.setFilter(u,P,W),this._update(!0)},a.prototype.getFilter=function(u){return this.style.getFilter(u)},a.prototype.setPaintProperty=function(u,P,W,$){return void 0===$&&($={}),this.style.setPaintProperty(u,P,W,$),this._update(!0)},a.prototype.getPaintProperty=function(u,P){return this.style.getPaintProperty(u,P)},a.prototype.setLayoutProperty=function(u,P,W,$){return void 0===$&&($={}),this.style.setLayoutProperty(u,P,W,$),this._update(!0)},a.prototype.getLayoutProperty=function(u,P){return this.style.getLayoutProperty(u,P)},a.prototype.setLight=function(u,P){return void 0===P&&(P={}),this._lazyInitEmptyStyle(),this.style.setLight(u,P),this._update(!0)},a.prototype.getLight=function(){return this.style.getLight()},a.prototype.setFeatureState=function(u,P){return this.style.setFeatureState(u,P),this._update()},a.prototype.removeFeatureState=function(u,P){return this.style.removeFeatureState(u,P),this._update()},a.prototype.getFeatureState=function(u){return this.style.getFeatureState(u)},a.prototype.getContainer=function(){return this._container},a.prototype.getCanvasContainer=function(){return this._canvasContainer},a.prototype.getCanvas=function(){return this._canvas},a.prototype._containerDimensions=function(){var u=0,P=0;return this._container&&(u=this._container.clientWidth||400,P=this._container.clientHeight||300),[u,P]},a.prototype._detectMissingCSS=function(){"rgb(250, 128, 114)"!==l.window.getComputedStyle(this._missingCSSCanary).getPropertyValue("background-color")&&l.warnOnce("This page appears to be missing CSS declarations for Mapbox GL JS, which may cause the map to display incorrectly. Please ensure your page includes mapbox-gl.css, as described in https://www.mapbox.com/mapbox-gl-js/api/.")},a.prototype._setupContainer=function(){var u=this._container;u.classList.add("mapboxgl-map"),(this._missingCSSCanary=N.create("div","mapboxgl-canary",u)).style.visibility="hidden",this._detectMissingCSS();var P=this._canvasContainer=N.create("div","mapboxgl-canvas-container",u);this._interactive&&P.classList.add("mapboxgl-interactive"),this._canvas=N.create("canvas","mapboxgl-canvas",P),this._canvas.addEventListener("webglcontextlost",this._contextLost,!1),this._canvas.addEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.setAttribute("tabindex","0"),this._canvas.setAttribute("aria-label","Map"),this._canvas.setAttribute("role","region");var W=this._containerDimensions();this._resizeCanvas(W[0],W[1]);var $=this._controlContainer=N.create("div","mapboxgl-control-container",u),gt=this._controlPositions={};["top-left","top-right","bottom-left","bottom-right"].forEach(function(Dt){gt[Dt]=N.create("div","mapboxgl-ctrl-"+Dt,$)}),this._container.addEventListener("scroll",this._onMapScroll,!1)},a.prototype._resizeCanvas=function(u,P){var W=l.browser.devicePixelRatio||1;this._canvas.width=W*u,this._canvas.height=W*P,this._canvas.style.width=u+"px",this._canvas.style.height=P+"px"},a.prototype._setupPainter=function(){var u=l.extend({},it.webGLContextAttributes,{failIfMajorPerformanceCaveat:this._failIfMajorPerformanceCaveat,preserveDrawingBuffer:this._preserveDrawingBuffer,antialias:this._antialias||!1}),P=this._canvas.getContext("webgl",u)||this._canvas.getContext("experimental-webgl",u);P?(this.painter=new ti(P,this.transform),l.webpSupported.testSupport(P)):this.fire(new l.ErrorEvent(new Error("Failed to initialize WebGL")))},a.prototype._contextLost=function(u){u.preventDefault(),this._frame&&(this._frame.cancel(),this._frame=null),this.fire(new l.Event("webglcontextlost",{originalEvent:u}))},a.prototype._contextRestored=function(u){this._setupPainter(),this.resize(),this._update(),this.fire(new l.Event("webglcontextrestored",{originalEvent:u}))},a.prototype._onMapScroll=function(u){if(u.target===this._container)return this._container.scrollTop=0,this._container.scrollLeft=0,!1},a.prototype.loaded=function(){return!this._styleDirty&&!this._sourcesDirty&&!!this.style&&this.style.loaded()},a.prototype._update=function(u){return this.style?(this._styleDirty=this._styleDirty||u,this._sourcesDirty=!0,this.triggerRepaint(),this):this},a.prototype._requestRenderFrame=function(u){return this._update(),this._renderTaskQueue.add(u)},a.prototype._cancelRenderFrame=function(u){this._renderTaskQueue.remove(u)},a.prototype._render=function(u){var P,W=this,$=0,gt=this.painter.context.extTimerQuery;if(this.listens("gpu-timing-frame")&&(P=gt.createQueryEXT(),gt.beginQueryEXT(gt.TIME_ELAPSED_EXT,P),$=l.browser.now()),this.painter.context.setDirty(),this.painter.setBaseState(),this._renderTaskQueue.run(u),!this._removed){var Dt=!1;if(this.style&&this._styleDirty){this._styleDirty=!1;var Ht=this.transform.zoom,re=l.browser.now();this.style.zoomHistory.update(Ht,re);var le=new l.EvaluationParameters(Ht,{now:re,fadeDuration:this._fadeDuration,zoomHistory:this.style.zoomHistory,transition:this.style.getTransition()}),de=le.crossFadingFactor();1===de&&de===this._crossFadingFactor||(Dt=!0,this._crossFadingFactor=de),this.style.update(le)}if(this.style&&this._sourcesDirty&&(this._sourcesDirty=!1,this.style._updateSources(this.transform)),this._placementDirty=this.style&&this.style._updatePlacement(this.painter.transform,this.showCollisionBoxes,this._fadeDuration,this._crossSourceCollisions),this.painter.render(this.style,{showTileBoundaries:this.showTileBoundaries,showOverdrawInspector:this._showOverdrawInspector,rotating:this.isRotating(),zooming:this.isZooming(),moving:this.isMoving(),fadeDuration:this._fadeDuration,showPadding:this.showPadding,gpuTiming:!!this.listens("gpu-timing-layer")}),this.fire(new l.Event("render")),this.loaded()&&!this._loaded&&(this._loaded=!0,this.fire(new l.Event("load"))),this.style&&(this.style.hasTransitions()||Dt)&&(this._styleDirty=!0),this.style&&!this._placementDirty&&this.style._releaseSymbolFadeTiles(),this.listens("gpu-timing-frame")){var Ie=l.browser.now()-$;gt.endQueryEXT(gt.TIME_ELAPSED_EXT,P),setTimeout(function(){var Se=gt.getQueryObjectEXT(P,gt.QUERY_RESULT_EXT)/1e6;gt.deleteQueryEXT(P),W.fire(new l.Event("gpu-timing-frame",{cpuTime:Ie,gpuTime:Se}))},50)}if(this.listens("gpu-timing-layer")){var Pe=this.painter.collectGpuTimers();setTimeout(function(){var Se=W.painter.queryGpuTimers(Pe);W.fire(new l.Event("gpu-timing-layer",{layerTimes:Se}))},50)}var Oe=this._sourcesDirty||this._styleDirty||this._placementDirty;return Oe||this._repaint?this.triggerRepaint():!this.isMoving()&&this.loaded()&&this.fire(new l.Event("idle")),!this._loaded||this._fullyLoaded||Oe||(this._fullyLoaded=!0),this}},a.prototype.remove=function(){this._hash&&this._hash.remove();for(var u=0,P=this._controls;u<P.length;u+=1)P[u].onRemove(this);this._controls=[],this._frame&&(this._frame.cancel(),this._frame=null),this._renderTaskQueue.clear(),this.painter.destroy(),this.handlers.destroy(),delete this.handlers,this.setStyle(null),void 0!==l.window&&(l.window.removeEventListener("resize",this._onWindowResize,!1),l.window.removeEventListener("orientationchange",this._onWindowResize,!1),l.window.removeEventListener("online",this._onWindowOnline,!1));var W=this.painter.context.gl.getExtension("WEBGL_lose_context");W&&W.loseContext(),Ha(this._canvasContainer),Ha(this._controlContainer),Ha(this._missingCSSCanary),this._container.classList.remove("mapboxgl-map"),this._removed=!0,this.fire(new l.Event("remove"))},a.prototype.triggerRepaint=function(){var u=this;this.style&&!this._frame&&(this._frame=l.browser.frame(function(P){u._frame=null,u._render(P)}))},a.prototype._onWindowOnline=function(){this._update()},a.prototype._onWindowResize=function(u){this._trackResize&&this.resize({originalEvent:u})._update()},s.showTileBoundaries.get=function(){return!!this._showTileBoundaries},s.showTileBoundaries.set=function(u){this._showTileBoundaries!==u&&(this._showTileBoundaries=u,this._update())},s.showPadding.get=function(){return!!this._showPadding},s.showPadding.set=function(u){this._showPadding!==u&&(this._showPadding=u,this._update())},s.showCollisionBoxes.get=function(){return!!this._showCollisionBoxes},s.showCollisionBoxes.set=function(u){this._showCollisionBoxes!==u&&(this._showCollisionBoxes=u,u?this.style._generateCollisionBoxes():this._update())},s.showOverdrawInspector.get=function(){return!!this._showOverdrawInspector},s.showOverdrawInspector.set=function(u){this._showOverdrawInspector!==u&&(this._showOverdrawInspector=u,this._update())},s.repaint.get=function(){return!!this._repaint},s.repaint.set=function(u){this._repaint!==u&&(this._repaint=u,this.triggerRepaint())},s.vertices.get=function(){return!!this._vertices},s.vertices.set=function(u){this._vertices=u,this._update()},a.prototype._setCacheLimits=function(u,P){l.setCacheLimits(u,P)},s.version.get=function(){return l.version},Object.defineProperties(a.prototype,s),a}($a);function Ha(o){o.parentNode&&o.parentNode.removeChild(o)}var Fl={showCompass:!0,showZoom:!0,visualizePitch:!1},ea=function(o){var a=this;this.options=l.extend({},Fl,o),this._container=N.create("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._container.addEventListener("contextmenu",function(s){return s.preventDefault()}),this.options.showZoom&&(l.bindAll(["_setButtonTitle","_updateZoomButtons"],this),this._zoomInButton=this._createButton("mapboxgl-ctrl-zoom-in",function(s){return a._map.zoomIn({},{originalEvent:s})}),N.create("span","mapboxgl-ctrl-icon",this._zoomInButton).setAttribute("aria-hidden",!0),this._zoomOutButton=this._createButton("mapboxgl-ctrl-zoom-out",function(s){return a._map.zoomOut({},{originalEvent:s})}),N.create("span","mapboxgl-ctrl-icon",this._zoomOutButton).setAttribute("aria-hidden",!0)),this.options.showCompass&&(l.bindAll(["_rotateCompassArrow"],this),this._compass=this._createButton("mapboxgl-ctrl-compass",function(s){a.options.visualizePitch?a._map.resetNorthPitch({},{originalEvent:s}):a._map.resetNorth({},{originalEvent:s})}),this._compassIcon=N.create("span","mapboxgl-ctrl-icon",this._compass),this._compassIcon.setAttribute("aria-hidden",!0))};ea.prototype._updateZoomButtons=function(){var o=this._map.getZoom(),a=o===this._map.getMaxZoom(),s=o===this._map.getMinZoom();this._zoomInButton.disabled=a,this._zoomOutButton.disabled=s,this._zoomInButton.setAttribute("aria-disabled",a.toString()),this._zoomOutButton.setAttribute("aria-disabled",s.toString())},ea.prototype._rotateCompassArrow=function(){var o=this.options.visualizePitch?"scale("+1/Math.pow(Math.cos(this._map.transform.pitch*(Math.PI/180)),.5)+") rotateX("+this._map.transform.pitch+"deg) rotateZ("+this._map.transform.angle*(180/Math.PI)+"deg)":"rotate("+this._map.transform.angle*(180/Math.PI)+"deg)";this._compassIcon.style.transform=o},ea.prototype.onAdd=function(o){return this._map=o,this.options.showZoom&&(this._setButtonTitle(this._zoomInButton,"ZoomIn"),this._setButtonTitle(this._zoomOutButton,"ZoomOut"),this._map.on("zoom",this._updateZoomButtons),this._updateZoomButtons()),this.options.showCompass&&(this._setButtonTitle(this._compass,"ResetBearing"),this.options.visualizePitch&&this._map.on("pitch",this._rotateCompassArrow),this._map.on("rotate",this._rotateCompassArrow),this._rotateCompassArrow(),this._handler=new va(this._map,this._compass,this.options.visualizePitch)),this._container},ea.prototype.onRemove=function(){N.remove(this._container),this.options.showZoom&&this._map.off("zoom",this._updateZoomButtons),this.options.showCompass&&(this.options.visualizePitch&&this._map.off("pitch",this._rotateCompassArrow),this._map.off("rotate",this._rotateCompassArrow),this._handler.off(),delete this._handler),delete this._map},ea.prototype._createButton=function(o,a){var s=N.create("button",o,this._container);return s.type="button",s.addEventListener("click",a),s},ea.prototype._setButtonTitle=function(o,a){var s=this._map._getUIString("NavigationControl."+a);o.title=s,o.setAttribute("aria-label",s)};var va=function(o,a,s){void 0===s&&(s=!1),this._clickTolerance=10,this.element=a,this.mouseRotate=new Gs({clickTolerance:o.dragRotate._mouseRotate._clickTolerance}),this.map=o,s&&(this.mousePitch=new Ba({clickTolerance:o.dragRotate._mousePitch._clickTolerance})),l.bindAll(["mousedown","mousemove","mouseup","touchstart","touchmove","touchend","reset"],this),N.addEventListener(a,"mousedown",this.mousedown),N.addEventListener(a,"touchstart",this.touchstart,{passive:!1}),N.addEventListener(a,"touchmove",this.touchmove),N.addEventListener(a,"touchend",this.touchend),N.addEventListener(a,"touchcancel",this.reset)};function al(o,a,s){if(o=new l.LngLat(o.lng,o.lat),a){var u=new l.LngLat(o.lng-360,o.lat),P=new l.LngLat(o.lng+360,o.lat),W=s.locationPoint(o).distSqr(a);s.locationPoint(u).distSqr(a)<W?o=u:s.locationPoint(P).distSqr(a)<W&&(o=P)}for(;Math.abs(o.lng-s.center.lng)>180;){var $=s.locationPoint(o);if($.x>=0&&$.y>=0&&$.x<=s.width&&$.y<=s.height)break;o.lng>s.center.lng?o.lng-=360:o.lng+=360}return o}va.prototype.down=function(o,a){this.mouseRotate.mousedown(o,a),this.mousePitch&&this.mousePitch.mousedown(o,a),N.disableDrag()},va.prototype.move=function(o,a){var s=this.map,u=this.mouseRotate.mousemoveWindow(o,a);if(u&&u.bearingDelta&&s.setBearing(s.getBearing()+u.bearingDelta),this.mousePitch){var P=this.mousePitch.mousemoveWindow(o,a);P&&P.pitchDelta&&s.setPitch(s.getPitch()+P.pitchDelta)}},va.prototype.off=function(){var o=this.element;N.removeEventListener(o,"mousedown",this.mousedown),N.removeEventListener(o,"touchstart",this.touchstart,{passive:!1}),N.removeEventListener(o,"touchmove",this.touchmove),N.removeEventListener(o,"touchend",this.touchend),N.removeEventListener(o,"touchcancel",this.reset),this.offTemp()},va.prototype.offTemp=function(){N.enableDrag(),N.removeEventListener(l.window,"mousemove",this.mousemove),N.removeEventListener(l.window,"mouseup",this.mouseup)},va.prototype.mousedown=function(o){this.down(l.extend({},o,{ctrlKey:!0,preventDefault:function(){return o.preventDefault()}}),N.mousePos(this.element,o)),N.addEventListener(l.window,"mousemove",this.mousemove),N.addEventListener(l.window,"mouseup",this.mouseup)},va.prototype.mousemove=function(o){this.move(o,N.mousePos(this.element,o))},va.prototype.mouseup=function(o){this.mouseRotate.mouseupWindow(o),this.mousePitch&&this.mousePitch.mouseupWindow(o),this.offTemp()},va.prototype.touchstart=function(o){1!==o.targetTouches.length?this.reset():(this._startPos=this._lastPos=N.touchPos(this.element,o.targetTouches)[0],this.down({type:"mousedown",button:0,ctrlKey:!0,preventDefault:function(){return o.preventDefault()}},this._startPos))},va.prototype.touchmove=function(o){1!==o.targetTouches.length?this.reset():(this._lastPos=N.touchPos(this.element,o.targetTouches)[0],this.move({preventDefault:function(){return o.preventDefault()}},this._lastPos))},va.prototype.touchend=function(o){0===o.targetTouches.length&&this._startPos&&this._lastPos&&this._startPos.dist(this._lastPos)<this._clickTolerance&&this.element.click(),this.reset()},va.prototype.reset=function(){this.mouseRotate.reset(),this.mousePitch&&this.mousePitch.reset(),delete this._startPos,delete this._lastPos,this.offTemp()};var Ga={center:"translate(-50%,-50%)",top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)","bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"};function wl(o,a,s){var u=o.classList;for(var P in Ga)u.remove("mapboxgl-"+s+"-anchor-"+P);u.add("mapboxgl-"+s+"-anchor-"+a)}var Ja,pl=function(o){function a(s,u){if(o.call(this),(s instanceof l.window.HTMLElement||u)&&(s=l.extend({element:s},u)),l.bindAll(["_update","_onMove","_onUp","_addDragHandler","_onMapClick","_onKeyPress"],this),this._anchor=s&&s.anchor||"center",this._color=s&&s.color||"#3FB1CE",this._scale=s&&s.scale||1,this._draggable=s&&s.draggable||!1,this._clickTolerance=s&&s.clickTolerance||0,this._isDragging=!1,this._state="inactive",this._rotation=s&&s.rotation||0,this._rotationAlignment=s&&s.rotationAlignment||"auto",this._pitchAlignment=s&&s.pitchAlignment&&"auto"!==s.pitchAlignment?s.pitchAlignment:this._rotationAlignment,s&&s.element)this._element=s.element,this._offset=l.Point.convert(s&&s.offset||[0,0]);else{this._defaultMarker=!0,this._element=N.create("div"),this._element.setAttribute("aria-label","Map marker");var P=N.createNS("http://www.w3.org/2000/svg","svg");P.setAttributeNS(null,"display","block"),P.setAttributeNS(null,"height","41px"),P.setAttributeNS(null,"width","27px"),P.setAttributeNS(null,"viewBox","0 0 27 41");var W=N.createNS("http://www.w3.org/2000/svg","g");W.setAttributeNS(null,"stroke","none"),W.setAttributeNS(null,"stroke-width","1"),W.setAttributeNS(null,"fill","none"),W.setAttributeNS(null,"fill-rule","evenodd");var $=N.createNS("http://www.w3.org/2000/svg","g");$.setAttributeNS(null,"fill-rule","nonzero");var gt=N.createNS("http://www.w3.org/2000/svg","g");gt.setAttributeNS(null,"transform","translate(3.0, 29.0)"),gt.setAttributeNS(null,"fill","#000000");for(var Dt=0,Ht=[{rx:"10.5",ry:"5.25002273"},{rx:"10.5",ry:"5.25002273"},{rx:"9.5",ry:"4.77275007"},{rx:"8.5",ry:"4.29549936"},{rx:"7.5",ry:"3.81822308"},{rx:"6.5",ry:"3.34094679"},{rx:"5.5",ry:"2.86367051"},{rx:"4.5",ry:"2.38636864"}];Dt<Ht.length;Dt+=1){var re=Ht[Dt],le=N.createNS("http://www.w3.org/2000/svg","ellipse");le.setAttributeNS(null,"opacity","0.04"),le.setAttributeNS(null,"cx","10.5"),le.setAttributeNS(null,"cy","5.80029008"),le.setAttributeNS(null,"rx",re.rx),le.setAttributeNS(null,"ry",re.ry),gt.appendChild(le)}var de=N.createNS("http://www.w3.org/2000/svg","g");de.setAttributeNS(null,"fill",this._color);var Ie=N.createNS("http://www.w3.org/2000/svg","path");Ie.setAttributeNS(null,"d","M27,13.5 C27,19.074644 20.250001,27.000002 14.75,34.500002 C14.016665,35.500004 12.983335,35.500004 12.25,34.500002 C6.7499993,27.000002 0,19.222562 0,13.5 C0,6.0441559 6.0441559,0 13.5,0 C20.955844,0 27,6.0441559 27,13.5 Z"),de.appendChild(Ie);var Pe=N.createNS("http://www.w3.org/2000/svg","g");Pe.setAttributeNS(null,"opacity","0.25"),Pe.setAttributeNS(null,"fill","#000000");var Oe=N.createNS("http://www.w3.org/2000/svg","path");Oe.setAttributeNS(null,"d","M13.5,0 C6.0441559,0 0,6.0441559 0,13.5 C0,19.222562 6.7499993,27 12.25,34.5 C13,35.522727 14.016664,35.500004 14.75,34.5 C20.250001,27 27,19.074644 27,13.5 C27,6.0441559 20.955844,0 13.5,0 Z M13.5,1 C20.415404,1 26,6.584596 26,13.5 C26,15.898657 24.495584,19.181431 22.220703,22.738281 C19.945823,26.295132 16.705119,30.142167 13.943359,33.908203 C13.743445,34.180814 13.612715,34.322738 13.5,34.441406 C13.387285,34.322738 13.256555,34.180814 13.056641,33.908203 C10.284481,30.127985 7.4148684,26.314159 5.015625,22.773438 C2.6163816,19.232715 1,15.953538 1,13.5 C1,6.584596 6.584596,1 13.5,1 Z"),Pe.appendChild(Oe);var Se=N.createNS("http://www.w3.org/2000/svg","g");Se.setAttributeNS(null,"transform","translate(6.0, 7.0)"),Se.setAttributeNS(null,"fill","#FFFFFF");var Re=N.createNS("http://www.w3.org/2000/svg","g");Re.setAttributeNS(null,"transform","translate(8.0, 8.0)");var Ze=N.createNS("http://www.w3.org/2000/svg","circle");Ze.setAttributeNS(null,"fill","#000000"),Ze.setAttributeNS(null,"opacity","0.25"),Ze.setAttributeNS(null,"cx","5.5"),Ze.setAttributeNS(null,"cy","5.5"),Ze.setAttributeNS(null,"r","5.4999962");var si=N.createNS("http://www.w3.org/2000/svg","circle");si.setAttributeNS(null,"fill","#FFFFFF"),si.setAttributeNS(null,"cx","5.5"),si.setAttributeNS(null,"cy","5.5"),si.setAttributeNS(null,"r","5.4999962"),Re.appendChild(Ze),Re.appendChild(si),$.appendChild(gt),$.appendChild(de),$.appendChild(Pe),$.appendChild(Se),$.appendChild(Re),P.appendChild($),P.setAttributeNS(null,"height",41*this._scale+"px"),P.setAttributeNS(null,"width",27*this._scale+"px"),this._element.appendChild(P),this._offset=l.Point.convert(s&&s.offset||[0,-14])}this._element.classList.add("mapboxgl-marker"),this._element.addEventListener("dragstart",function(bi){bi.preventDefault()}),this._element.addEventListener("mousedown",function(bi){bi.preventDefault()}),wl(this._element,this._anchor,"marker"),this._popup=null}return o&&(a.__proto__=o),(a.prototype=Object.create(o&&o.prototype)).constructor=a,a.prototype.addTo=function(s){return this.remove(),this._map=s,s.getCanvasContainer().appendChild(this._element),s.on("move",this._update),s.on("moveend",this._update),this.setDraggable(this._draggable),this._update(),this._map.on("click",this._onMapClick),this},a.prototype.remove=function(){return this._map&&(this._map.off("click",this._onMapClick),this._map.off("move",this._update),this._map.off("moveend",this._update),this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler),this._map.off("mouseup",this._onUp),this._map.off("touchend",this._onUp),this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),delete this._map),N.remove(this._element),this._popup&&this._popup.remove(),this},a.prototype.getLngLat=function(){return this._lngLat},a.prototype.setLngLat=function(s){return this._lngLat=l.LngLat.convert(s),this._pos=null,this._popup&&this._popup.setLngLat(this._lngLat),this._update(),this},a.prototype.getElement=function(){return this._element},a.prototype.setPopup=function(s){if(this._popup&&(this._popup.remove(),this._popup=null,this._element.removeEventListener("keypress",this._onKeyPress),this._originalTabIndex||this._element.removeAttribute("tabindex")),s){if(!("offset"in s.options)){var u=Math.sqrt(Math.pow(13.5,2)/2);s.options.offset=this._defaultMarker?{top:[0,0],"top-left":[0,0],"top-right":[0,0],bottom:[0,-38.1],"bottom-left":[u,-1*(24.6+u)],"bottom-right":[-u,-1*(24.6+u)],left:[13.5,-24.6],right:[-13.5,-24.6]}:this._offset}this._popup=s,this._lngLat&&this._popup.setLngLat(this._lngLat),this._originalTabIndex=this._element.getAttribute("tabindex"),this._originalTabIndex||this._element.setAttribute("tabindex","0"),this._element.addEventListener("keypress",this._onKeyPress)}return this},a.prototype._onKeyPress=function(s){var u=s.code,P=s.charCode||s.keyCode;"Space"!==u&&"Enter"!==u&&32!==P&&13!==P||this.togglePopup()},a.prototype._onMapClick=function(s){var u=s.originalEvent.target,P=this._element;this._popup&&(u===P||P.contains(u))&&this.togglePopup()},a.prototype.getPopup=function(){return this._popup},a.prototype.togglePopup=function(){var s=this._popup;return s?(s.isOpen()?s.remove():s.addTo(this._map),this):this},a.prototype._update=function(s){if(this._map){this._map.transform.renderWorldCopies&&(this._lngLat=al(this._lngLat,this._pos,this._map.transform)),this._pos=this._map.project(this._lngLat)._add(this._offset);var u="";"viewport"===this._rotationAlignment||"auto"===this._rotationAlignment?u="rotateZ("+this._rotation+"deg)":"map"===this._rotationAlignment&&(u="rotateZ("+(this._rotation-this._map.getBearing())+"deg)");var P="";"viewport"===this._pitchAlignment||"auto"===this._pitchAlignment?P="rotateX(0deg)":"map"===this._pitchAlignment&&(P="rotateX("+this._map.getPitch()+"deg)"),s&&"moveend"!==s.type||(this._pos=this._pos.round()),N.setTransform(this._element,Ga[this._anchor]+" translate("+this._pos.x+"px, "+this._pos.y+"px) "+P+" "+u)}},a.prototype.getOffset=function(){return this._offset},a.prototype.setOffset=function(s){return this._offset=l.Point.convert(s),this._update(),this},a.prototype._onMove=function(s){if(!this._isDragging){var u=this._clickTolerance||this._map._clickTolerance;this._isDragging=s.point.dist(this._pointerdownPos)>=u}this._isDragging&&(this._pos=s.point.sub(this._positionDelta),this._lngLat=this._map.unproject(this._pos),this.setLngLat(this._lngLat),this._element.style.pointerEvents="none","pending"===this._state&&(this._state="active",this.fire(new l.Event("dragstart"))),this.fire(new l.Event("drag")))},a.prototype._onUp=function(){this._element.style.pointerEvents="auto",this._positionDelta=null,this._pointerdownPos=null,this._isDragging=!1,this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),"active"===this._state&&this.fire(new l.Event("dragend")),this._state="inactive"},a.prototype._addDragHandler=function(s){this._element.contains(s.originalEvent.target)&&(s.preventDefault(),this._positionDelta=s.point.sub(this._pos).add(this._offset),this._pointerdownPos=s.point,this._state="pending",this._map.on("mousemove",this._onMove),this._map.on("touchmove",this._onMove),this._map.once("mouseup",this._onUp),this._map.once("touchend",this._onUp))},a.prototype.setDraggable=function(s){return this._draggable=!!s,this._map&&(s?(this._map.on("mousedown",this._addDragHandler),this._map.on("touchstart",this._addDragHandler)):(this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler))),this},a.prototype.isDraggable=function(){return this._draggable},a.prototype.setRotation=function(s){return this._rotation=s||0,this._update(),this},a.prototype.getRotation=function(){return this._rotation},a.prototype.setRotationAlignment=function(s){return this._rotationAlignment=s||"auto",this._update(),this},a.prototype.getRotationAlignment=function(){return this._rotationAlignment},a.prototype.setPitchAlignment=function(s){return this._pitchAlignment=s&&"auto"!==s?s:this._rotationAlignment,this._update(),this},a.prototype.getPitchAlignment=function(){return this._pitchAlignment},a}(l.Evented),Nl={positionOptions:{enableHighAccuracy:!1,maximumAge:0,timeout:6e3},fitBoundsOptions:{maxZoom:15},trackUserLocation:!1,showAccuracyCircle:!0,showUserLocation:!0},dl=0,fl=!1,Wl=function(o){function a(s){o.call(this),this.options=l.extend({},Nl,s),l.bindAll(["_onSuccess","_onError","_onZoom","_finish","_setupUI","_updateCamera","_updateMarker"],this)}return o&&(a.__proto__=o),(a.prototype=Object.create(o&&o.prototype)).constructor=a,a.prototype.onAdd=function(s){var u;return this._map=s,this._container=N.create("div","mapboxgl-ctrl mapboxgl-ctrl-group"),u=this._setupUI,void 0!==Ja?u(Ja):void 0!==l.window.navigator.permissions?l.window.navigator.permissions.query({name:"geolocation"}).then(function(P){u(Ja="denied"!==P.state)}):u(Ja=!!l.window.navigator.geolocation),this._container},a.prototype.onRemove=function(){void 0!==this._geolocationWatchID&&(l.window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0),this.options.showUserLocation&&this._userLocationDotMarker&&this._userLocationDotMarker.remove(),this.options.showAccuracyCircle&&this._accuracyCircleMarker&&this._accuracyCircleMarker.remove(),N.remove(this._container),this._map.off("zoom",this._onZoom),this._map=void 0,dl=0,fl=!1},a.prototype._isOutOfMapMaxBounds=function(s){var u=this._map.getMaxBounds(),P=s.coords;return u&&(P.longitude<u.getWest()||P.longitude>u.getEast()||P.latitude<u.getSouth()||P.latitude>u.getNorth())},a.prototype._setErrorState=function(){switch(this._watchState){case"WAITING_ACTIVE":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error");break;case"ACTIVE_LOCK":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting");break;case"BACKGROUND":this._watchState="BACKGROUND_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting")}},a.prototype._onSuccess=function(s){if(this._map){if(this._isOutOfMapMaxBounds(s))return this._setErrorState(),this.fire(new l.Event("outofmaxbounds",s)),this._updateMarker(),void this._finish();if(this.options.trackUserLocation)switch(this._lastKnownPosition=s,this._watchState){case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"BACKGROUND":case"BACKGROUND_ERROR":this._watchState="BACKGROUND",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background")}this.options.showUserLocation&&"OFF"!==this._watchState&&this._updateMarker(s),this.options.trackUserLocation&&"ACTIVE_LOCK"!==this._watchState||this._updateCamera(s),this.options.showUserLocation&&this._dotElement.classList.remove("mapboxgl-user-location-dot-stale"),this.fire(new l.Event("geolocate",s)),this._finish()}},a.prototype._updateCamera=function(s){var u=new l.LngLat(s.coords.longitude,s.coords.latitude),P=s.coords.accuracy,W=this._map.getBearing(),$=l.extend({bearing:W},this.options.fitBoundsOptions);this._map.fitBounds(u.toBounds(P),$,{geolocateSource:!0})},a.prototype._updateMarker=function(s){if(s){var u=new l.LngLat(s.coords.longitude,s.coords.latitude);this._accuracyCircleMarker.setLngLat(u).addTo(this._map),this._userLocationDotMarker.setLngLat(u).addTo(this._map),this._accuracy=s.coords.accuracy,this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}else this._userLocationDotMarker.remove(),this._accuracyCircleMarker.remove()},a.prototype._updateCircleRadius=function(){var s=this._map._container.clientHeight/2,u=this._map.unproject([0,s]),P=this._map.unproject([1,s]),W=u.distanceTo(P),$=Math.ceil(2*this._accuracy/W);this._circleElement.style.width=$+"px",this._circleElement.style.height=$+"px"},a.prototype._onZoom=function(){this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()},a.prototype._onError=function(s){if(this._map){if(this.options.trackUserLocation)if(1===s.code){this._watchState="OFF",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.disabled=!0;var u=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.title=u,this._geolocateButton.setAttribute("aria-label",u),void 0!==this._geolocationWatchID&&this._clearWatch()}else{if(3===s.code&&fl)return;this._setErrorState()}"OFF"!==this._watchState&&this.options.showUserLocation&&this._dotElement.classList.add("mapboxgl-user-location-dot-stale"),this.fire(new l.Event("error",s)),this._finish()}},a.prototype._finish=function(){this._timeoutId&&clearTimeout(this._timeoutId),this._timeoutId=void 0},a.prototype._setupUI=function(s){var u=this;if(this._container.addEventListener("contextmenu",function($){return $.preventDefault()}),this._geolocateButton=N.create("button","mapboxgl-ctrl-geolocate",this._container),N.create("span","mapboxgl-ctrl-icon",this._geolocateButton).setAttribute("aria-hidden",!0),this._geolocateButton.type="button",!1===s){l.warnOnce("Geolocation support is not available so the GeolocateControl will be disabled.");var P=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.disabled=!0,this._geolocateButton.title=P,this._geolocateButton.setAttribute("aria-label",P)}else{var W=this._map._getUIString("GeolocateControl.FindMyLocation");this._geolocateButton.title=W,this._geolocateButton.setAttribute("aria-label",W)}this.options.trackUserLocation&&(this._geolocateButton.setAttribute("aria-pressed","false"),this._watchState="OFF"),this.options.showUserLocation&&(this._dotElement=N.create("div","mapboxgl-user-location-dot"),this._userLocationDotMarker=new pl(this._dotElement),this._circleElement=N.create("div","mapboxgl-user-location-accuracy-circle"),this._accuracyCircleMarker=new pl({element:this._circleElement,pitchAlignment:"map"}),this.options.trackUserLocation&&(this._watchState="OFF"),this._map.on("zoom",this._onZoom)),this._geolocateButton.addEventListener("click",this.trigger.bind(this)),this._setup=!0,this.options.trackUserLocation&&this._map.on("movestart",function($){$.geolocateSource||"ACTIVE_LOCK"!==u._watchState||$.originalEvent&&"resize"===$.originalEvent.type||(u._watchState="BACKGROUND",u._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background"),u._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),u.fire(new l.Event("trackuserlocationend")))})},a.prototype.trigger=function(){if(!this._setup)return l.warnOnce("Geolocate control triggered before added to a map"),!1;if(this.options.trackUserLocation){switch(this._watchState){case"OFF":this._watchState="WAITING_ACTIVE",this.fire(new l.Event("trackuserlocationstart"));break;case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":case"BACKGROUND_ERROR":dl--,fl=!1,this._watchState="OFF",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this.fire(new l.Event("trackuserlocationend"));break;case"BACKGROUND":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._lastKnownPosition&&this._updateCamera(this._lastKnownPosition),this.fire(new l.Event("trackuserlocationstart"))}switch(this._watchState){case"WAITING_ACTIVE":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_LOCK":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_ERROR":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error");break;case"BACKGROUND":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background");break;case"BACKGROUND_ERROR":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background-error")}if("OFF"===this._watchState&&void 0!==this._geolocationWatchID)this._clearWatch();else if(void 0===this._geolocationWatchID){var s;this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","true"),++dl>1?(s={maximumAge:6e5,timeout:0},fl=!0):(s=this.options.positionOptions,fl=!1),this._geolocationWatchID=l.window.navigator.geolocation.watchPosition(this._onSuccess,this._onError,s)}}else l.window.navigator.geolocation.getCurrentPosition(this._onSuccess,this._onError,this.options.positionOptions),this._timeoutId=setTimeout(this._finish,1e4);return!0},a.prototype._clearWatch=function(){l.window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0,this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","false"),this.options.showUserLocation&&this._updateMarker(null)},a}(l.Evented),Qa={maxWidth:100,unit:"metric"},ll=function(o){this.options=l.extend({},Qa,o),l.bindAll(["_onMove","setUnit"],this)};function Sl(o,a,s){var u=s&&s.maxWidth||100,P=o._container.clientHeight/2,W=o.unproject([0,P]),$=o.unproject([u,P]),gt=W.distanceTo($);if(s&&"imperial"===s.unit){var Dt=3.2808*gt;Dt>5280?hl(a,u,Dt/5280,o._getUIString("ScaleControl.Miles")):hl(a,u,Dt,o._getUIString("ScaleControl.Feet"))}else s&&"nautical"===s.unit?hl(a,u,gt/1852,o._getUIString("ScaleControl.NauticalMiles")):gt>=1e3?hl(a,u,gt/1e3,o._getUIString("ScaleControl.Kilometers")):hl(a,u,gt,o._getUIString("ScaleControl.Meters"))}function hl(o,a,s,u){var P,W,$,Dt,Ht,gt=(P=s,(W=Math.pow(10,(""+Math.floor(P)).length-1))*($=($=P/W)>=10?10:$>=5?5:$>=3?3:$>=2?2:$>=1?1:(Dt=$,Ht=Math.pow(10,Math.ceil(-Math.log(Dt)/Math.LN10)),Math.round(Dt*Ht)/Ht)));o.style.width=a*(gt/s)+"px",o.innerHTML=gt+"&nbsp;"+u}ll.prototype.getDefaultPosition=function(){return"bottom-left"},ll.prototype._onMove=function(){Sl(this._map,this._container,this.options)},ll.prototype.onAdd=function(o){return this._map=o,this._container=N.create("div","mapboxgl-ctrl mapboxgl-ctrl-scale",o.getContainer()),this._map.on("move",this._onMove),this._onMove(),this._container},ll.prototype.onRemove=function(){N.remove(this._container),this._map.off("move",this._onMove),this._map=void 0},ll.prototype.setUnit=function(o){this.options.unit=o,Sl(this._map,this._container,this.options)};var Ia=function(o){this._fullscreen=!1,o&&o.container&&(o.container instanceof l.window.HTMLElement?this._container=o.container:l.warnOnce("Full screen control 'container' must be a DOM element.")),l.bindAll(["_onClickFullscreen","_changeIcon"],this),"onfullscreenchange"in l.window.document?this._fullscreenchange="fullscreenchange":"onmozfullscreenchange"in l.window.document?this._fullscreenchange="mozfullscreenchange":"onwebkitfullscreenchange"in l.window.document?this._fullscreenchange="webkitfullscreenchange":"onmsfullscreenchange"in l.window.document&&(this._fullscreenchange="MSFullscreenChange")};Ia.prototype.onAdd=function(o){return this._map=o,this._container||(this._container=this._map.getContainer()),this._controlContainer=N.create("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._checkFullscreenSupport()?this._setupUI():(this._controlContainer.style.display="none",l.warnOnce("This device does not support fullscreen mode.")),this._controlContainer},Ia.prototype.onRemove=function(){N.remove(this._controlContainer),this._map=null,l.window.document.removeEventListener(this._fullscreenchange,this._changeIcon)},Ia.prototype._checkFullscreenSupport=function(){return!!(l.window.document.fullscreenEnabled||l.window.document.mozFullScreenEnabled||l.window.document.msFullscreenEnabled||l.window.document.webkitFullscreenEnabled)},Ia.prototype._setupUI=function(){var o=this._fullscreenButton=N.create("button","mapboxgl-ctrl-fullscreen",this._controlContainer);N.create("span","mapboxgl-ctrl-icon",o).setAttribute("aria-hidden",!0),o.type="button",this._updateTitle(),this._fullscreenButton.addEventListener("click",this._onClickFullscreen),l.window.document.addEventListener(this._fullscreenchange,this._changeIcon)},Ia.prototype._updateTitle=function(){var o=this._getTitle();this._fullscreenButton.setAttribute("aria-label",o),this._fullscreenButton.title=o},Ia.prototype._getTitle=function(){return this._map._getUIString(this._isFullscreen()?"FullscreenControl.Exit":"FullscreenControl.Enter")},Ia.prototype._isFullscreen=function(){return this._fullscreen},Ia.prototype._changeIcon=function(){(l.window.document.fullscreenElement||l.window.document.mozFullScreenElement||l.window.document.webkitFullscreenElement||l.window.document.msFullscreenElement)===this._container!==this._fullscreen&&(this._fullscreen=!this._fullscreen,this._fullscreenButton.classList.toggle("mapboxgl-ctrl-shrink"),this._fullscreenButton.classList.toggle("mapboxgl-ctrl-fullscreen"),this._updateTitle())},Ia.prototype._onClickFullscreen=function(){this._isFullscreen()?l.window.document.exitFullscreen?l.window.document.exitFullscreen():l.window.document.mozCancelFullScreen?l.window.document.mozCancelFullScreen():l.window.document.msExitFullscreen?l.window.document.msExitFullscreen():l.window.document.webkitCancelFullScreen&&l.window.document.webkitCancelFullScreen():this._container.requestFullscreen?this._container.requestFullscreen():this._container.mozRequestFullScreen?this._container.mozRequestFullScreen():this._container.msRequestFullscreen?this._container.msRequestFullscreen():this._container.webkitRequestFullscreen&&this._container.webkitRequestFullscreen()};var Zl={closeButton:!0,closeOnClick:!0,focusAfterOpen:!0,className:"",maxWidth:"240px"},Tl=["a[href]","[tabindex]:not([tabindex='-1'])","[contenteditable]:not([contenteditable='false'])","button:not([disabled])","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].join(", "),ql=function(o){function a(s){o.call(this),this.options=l.extend(Object.create(Zl),s),l.bindAll(["_update","_onClose","remove","_onMouseMove","_onMouseUp","_onDrag"],this)}return o&&(a.__proto__=o),(a.prototype=Object.create(o&&o.prototype)).constructor=a,a.prototype.addTo=function(s){return this._map&&this.remove(),this._map=s,this.options.closeOnClick&&this._map.on("click",this._onClose),this.options.closeOnMove&&this._map.on("move",this._onClose),this._map.on("remove",this.remove),this._update(),this._focusFirstElement(),this._trackPointer?(this._map.on("mousemove",this._onMouseMove),this._map.on("mouseup",this._onMouseUp),this._container&&this._container.classList.add("mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.add("mapboxgl-track-pointer")):this._map.on("move",this._update),this.fire(new l.Event("open")),this},a.prototype.isOpen=function(){return!!this._map},a.prototype.remove=function(){return this._content&&N.remove(this._content),this._container&&(N.remove(this._container),delete this._container),this._map&&(this._map.off("move",this._update),this._map.off("move",this._onClose),this._map.off("click",this._onClose),this._map.off("remove",this.remove),this._map.off("mousemove",this._onMouseMove),this._map.off("mouseup",this._onMouseUp),this._map.off("drag",this._onDrag),delete this._map),this.fire(new l.Event("close")),this},a.prototype.getLngLat=function(){return this._lngLat},a.prototype.setLngLat=function(s){return this._lngLat=l.LngLat.convert(s),this._pos=null,this._trackPointer=!1,this._update(),this._map&&(this._map.on("move",this._update),this._map.off("mousemove",this._onMouseMove),this._container&&this._container.classList.remove("mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.remove("mapboxgl-track-pointer")),this},a.prototype.trackPointer=function(){return this._trackPointer=!0,this._pos=null,this._update(),this._map&&(this._map.off("move",this._update),this._map.on("mousemove",this._onMouseMove),this._map.on("drag",this._onDrag),this._container&&this._container.classList.add("mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.add("mapboxgl-track-pointer")),this},a.prototype.getElement=function(){return this._container},a.prototype.setText=function(s){return this.setDOMContent(l.window.document.createTextNode(s))},a.prototype.setHTML=function(s){var u,P=l.window.document.createDocumentFragment(),W=l.window.document.createElement("body");for(W.innerHTML=s;u=W.firstChild;)P.appendChild(u);return this.setDOMContent(P)},a.prototype.getMaxWidth=function(){return this._container&&this._container.style.maxWidth},a.prototype.setMaxWidth=function(s){return this.options.maxWidth=s,this._update(),this},a.prototype.setDOMContent=function(s){if(this._content)for(;this._content.hasChildNodes();)this._content.firstChild&&this._content.removeChild(this._content.firstChild);else this._content=N.create("div","mapboxgl-popup-content",this._container);return this._content.appendChild(s),this._createCloseButton(),this._update(),this._focusFirstElement(),this},a.prototype.addClassName=function(s){this._container&&this._container.classList.add(s)},a.prototype.removeClassName=function(s){this._container&&this._container.classList.remove(s)},a.prototype.setOffset=function(s){return this.options.offset=s,this._update(),this},a.prototype.toggleClassName=function(s){if(this._container)return this._container.classList.toggle(s)},a.prototype._createCloseButton=function(){this.options.closeButton&&(this._closeButton=N.create("button","mapboxgl-popup-close-button",this._content),this._closeButton.type="button",this._closeButton.setAttribute("aria-label","Close popup"),this._closeButton.innerHTML="&#215;",this._closeButton.addEventListener("click",this._onClose))},a.prototype._onMouseUp=function(s){this._update(s.point)},a.prototype._onMouseMove=function(s){this._update(s.point)},a.prototype._onDrag=function(s){this._update(s.point)},a.prototype._update=function(s){var u=this;if(this._map&&(this._lngLat||this._trackPointer)&&this._content&&(this._container||(this._container=N.create("div","mapboxgl-popup",this._map.getContainer()),this._tip=N.create("div","mapboxgl-popup-tip",this._container),this._container.appendChild(this._content),this.options.className&&this.options.className.split(" ").forEach(function(le){return u._container.classList.add(le)}),this._trackPointer&&this._container.classList.add("mapboxgl-popup-track-pointer")),this.options.maxWidth&&this._container.style.maxWidth!==this.options.maxWidth&&(this._container.style.maxWidth=this.options.maxWidth),this._map.transform.renderWorldCopies&&!this._trackPointer&&(this._lngLat=al(this._lngLat,this._pos,this._map.transform)),!this._trackPointer||s)){var P=this._pos=this._trackPointer&&s?s:this._map.project(this._lngLat),W=this.options.anchor,$=function le(de){if(de){if("number"==typeof de){var Ie=Math.round(Math.sqrt(.5*Math.pow(de,2)));return{center:new l.Point(0,0),top:new l.Point(0,de),"top-left":new l.Point(Ie,Ie),"top-right":new l.Point(-Ie,Ie),bottom:new l.Point(0,-de),"bottom-left":new l.Point(Ie,-Ie),"bottom-right":new l.Point(-Ie,-Ie),left:new l.Point(de,0),right:new l.Point(-de,0)}}if(de instanceof l.Point||Array.isArray(de)){var Pe=l.Point.convert(de);return{center:Pe,top:Pe,"top-left":Pe,"top-right":Pe,bottom:Pe,"bottom-left":Pe,"bottom-right":Pe,left:Pe,right:Pe}}return{center:l.Point.convert(de.center||[0,0]),top:l.Point.convert(de.top||[0,0]),"top-left":l.Point.convert(de["top-left"]||[0,0]),"top-right":l.Point.convert(de["top-right"]||[0,0]),bottom:l.Point.convert(de.bottom||[0,0]),"bottom-left":l.Point.convert(de["bottom-left"]||[0,0]),"bottom-right":l.Point.convert(de["bottom-right"]||[0,0]),left:l.Point.convert(de.left||[0,0]),right:l.Point.convert(de.right||[0,0])}}return le(new l.Point(0,0))}(this.options.offset);if(!W){var gt,Dt=this._container.offsetWidth,Ht=this._container.offsetHeight;gt=P.y+$.bottom.y<Ht?["top"]:P.y>this._map.transform.height-Ht?["bottom"]:[],P.x<Dt/2?gt.push("left"):P.x>this._map.transform.width-Dt/2&&gt.push("right"),W=0===gt.length?"bottom":gt.join("-")}var re=P.add($[W]).round();N.setTransform(this._container,Ga[W]+" translate("+re.x+"px,"+re.y+"px)"),wl(this._container,W,"popup")}},a.prototype._focusFirstElement=function(){if(this.options.focusAfterOpen&&this._container){var s=this._container.querySelector(Tl);s&&s.focus()}},a.prototype._onClose=function(){this.remove()},a}(l.Evented),Ll={version:l.version,supported:it,setRTLTextPlugin:l.setRTLTextPlugin,getRTLTextPluginStatus:l.getRTLTextPluginStatus,Map:Gl,NavigationControl:ea,GeolocateControl:Wl,AttributionControl:zs,ScaleControl:ll,FullscreenControl:Ia,Popup:ql,Marker:pl,Style:an,LngLat:l.LngLat,LngLatBounds:l.LngLatBounds,Point:l.Point,MercatorCoordinate:l.MercatorCoordinate,Evented:l.Evented,config:l.config,prewarm:function(){yi().acquire(di)},clearPrewarmedResources:function(){var o=sn;o&&(o.isPreloaded()&&1===o.numActive()?(o.release(di),sn=null):console.warn("Could not clear WebWorkers since there are active Map instances that still reference it. The pre-warmed WebWorker pool can only be cleared when all map instances have been removed with map.remove()"))},get accessToken(){return l.config.ACCESS_TOKEN},set accessToken(o){l.config.ACCESS_TOKEN=o},get baseApiUrl(){return l.config.API_URL},set baseApiUrl(o){l.config.API_URL=o},get workerCount(){return hi.workerCount},set workerCount(o){hi.workerCount=o},get maxParallelImageRequests(){return l.config.MAX_PARALLEL_IMAGE_REQUESTS},set maxParallelImageRequests(o){l.config.MAX_PARALLEL_IMAGE_REQUESTS=o},clearStorage:function(o){l.clearTileCache(o)},workerUrl:""};return Ll}),nt}();var et=K.exports,st=te.Layer.extend({options:{updateInterval:32,padding:.1,interactive:!1,opacity:1},initialize:function(x){te.setOptions(this,x),this._throttledUpdate=te.Util.throttle(this._update,this.options.updateInterval,this)},onAdd:function(x){this._container||this._initContainer(),this.getPane().appendChild(this._container),this._initGL(),this._offset=this._map.containerPointToLayerPoint([0,0]),x.options.zoomAnimation&&te.DomEvent.on(x._proxy,te.DomUtil.TRANSITION_END,this._transitionEnd,this)},onRemove:function(x){this._map._proxy&&this._map.options.zoomAnimation&&te.DomEvent.off(this._map._proxy,te.DomUtil.TRANSITION_END,this._transitionEnd,this),this.getPane().removeChild(this._container),this._glMap.remove(),this._glMap=null},getEvents:function(){return{move:this._throttledUpdate,zoomanim:this._animateZoom,zoom:this._pinchZoom,zoomstart:this._zoomStart,zoomend:this._zoomEnd}},getMapboxMap:function(){return this._glMap},getCanvas:function(){return this._glMap.getCanvas()},getSize:function(){return this._map.getSize().multiplyBy(1+2*this.options.padding)},getOpacity:function(){return this.options.opacity},setOpacity:function(x){this.options.opacity=x,this._container.style.opacity=x},getBounds:function(){var x=this.getSize().multiplyBy(.5),T=this._map.latLngToContainerPoint(this._map.getCenter());return te.latLngBounds(this._map.containerPointToLatLng(T.subtract(x)),this._map.containerPointToLatLng(T.add(x)))},getContainer:function(){return this._container},_initContainer:function(){var x=this._container=te.DomUtil.create("div","leaflet-gl-layer"),T=this.getSize(),j=this._map.getSize().multiplyBy(this.options.padding);x.style.width=T.x+"px",x.style.height=T.y+"px",x.style.position="absolute",x.style.opacity=this.options.opacity;var V=this._map.containerPointToLayerPoint([0,0]).subtract(j);te.DomUtil.setPosition(x,V)},_initGL:function(){var x=this._map.getCenter(),T=te.extend({},this.options,{container:this._container,center:[x.lng,x.lat],zoom:this._map.getZoom()-1,attributionControl:!1});this._glMap=new et.Map(T),this._glMap.once("styledata",function(V){this.fire("styleLoaded")}.bind(this)),this._glMap.transform.latRange=null,this._glMap.transform.maxValidLatitude=1/0,this._transformGL(this._glMap),this._glMap._actualCanvas=this._glMap._canvas.canvas?this._glMap._canvas.canvas:this._glMap._canvas;var j=this._glMap._actualCanvas;te.DomUtil.addClass(j,"leaflet-image-layer"),te.DomUtil.addClass(j,"leaflet-zoom-animated"),this.options.interactive&&te.DomUtil.addClass(j,"leaflet-interactive"),this.options.className&&te.DomUtil.addClass(j,this.options.className)},_update:function(x){if(this._offset=this._map.containerPointToLayerPoint([0,0]),!this._zooming){var T=this.getSize(),j=this._container,V=this._glMap,nt=this._map.getSize().multiplyBy(this.options.padding),w=this._map.containerPointToLayerPoint([0,0]).subtract(nt);te.DomUtil.setPosition(j,w),this._transformGL(V),V.transform.width!==T.x||V.transform.height!==T.y?(j.style.width=T.x+"px",j.style.height=T.y+"px",null!=V._resize?V._resize():V.resize()):null!=V._update?V._update():V.update()}},_transformGL:function(x){var T=this._map.getCenter(),j=x.transform;j.center=et.LngLat.convert([T.lng,T.lat]),j.zoom=this._map.getZoom()-1},_pinchZoom:function(x){this._glMap.jumpTo({zoom:this._map.getZoom()-1,center:this._map.getCenter()})},_animateZoom:function(x){var T=this._map.getZoomScale(x.zoom),j=this._map.getSize().multiplyBy(this.options.padding*T),V=this.getSize()._divideBy(2),nt=this._map.project(x.center,x.zoom)._subtract(V)._add(this._map._getMapPanePos().add(j))._round(),w=this._map.project(this._map.getBounds().getNorthWest(),x.zoom)._subtract(nt);te.DomUtil.setTransform(this._glMap._actualCanvas,w.subtract(this._offset),T)},_zoomStart:function(x){this._zooming=!0},_zoomEnd:function(){var x=this._map.getZoomScale(this._map.getZoom());te.DomUtil.setTransform(this._glMap._actualCanvas,null,x),this._zooming=!1,this._update()},_transitionEnd:function(x){te.Util.requestAnimFrame(function(){var T=this._map.getZoom(),j=this._map.getCenter(),V=this._map.latLngToContainerPoint(this._map.getBounds().getNorthWest());te.DomUtil.setTransform(this._glMap._actualCanvas,V,1),this._glMap.once("moveend",te.Util.bind(function(){this._zoomEnd()},this)),this._glMap.jumpTo({center:j,zoom:T-1})},this)}});function R(x){return new st(x)}var I=te.Layer.extend({options:{key:"ArcGIS:Streets"},initialize:function(x,T){if(T&&te.setOptions(this,T),this.options.apiKey&&(this.options.apikey=this.options.apiKey),this.options.token&&(this.options.apikey=this.options.token),!this.options.apikey&&!this.options.token)throw new Error("API Key or token is required for vectorBasemapLayer.");x&&(this.options.key=x),this._createLayer()},_createLayer:function(){var T,j,V=(j="https://basemaps-api.arcgis.com/arcgis/rest/services/styles/"+this.options.key+"?type=style",(T=this.options.apikey)&&(j=j+"&apiKey="+T),j);this._mapboxGL=R({style:V,pane:this.options.pane,opacity:this.options.opacity}),this._ready=!0,this.fire("ready",{},!0),this._mapboxGL.on("styleLoaded",function(nt){this._setupAttribution()}.bind(this))},_setupAttribution:function(){var x=this._map;if(Ct.Util.setEsriAttribution(x),32===this.options.key.length){var T=this._mapboxGL.getMapboxMap().style.stylesheet.sources,j=[];Object.keys(T).forEach(function(V){j.push(T[V].attribution),T[V].copyrightText&&T[V].copyrightText&&""!==T[V].copyrightText&&T[V].attribution!==T[V].copyrightText&&j.push(T[V].copyrightText)}),x.attributionControl.addAttribution('<span class="">'+j.join(", ")+"</span>")}else if(this.options.attributionUrls||(this.options.attributionUrls=this._getAttributionUrls(this.options.key)),this._map&&this.options.attributionUrls){if(this._map.attributionControl){for(let V=0;V<this.options.attributionUrls.length;V++)Rt(this.options.attributionUrls[V],x);x.attributionControl.addAttribution('<span class="esri-dynamic-attribution"></span>')}Ct.Util._updateMapAttribution({target:this._map})}},_getAttributionUrls:function(x){return 0===x.indexOf("OSM:")?["https://static.arcgis.com/attribution/Vector/OpenStreetMap_v2"]:0===x.indexOf("ArcGIS:Imagery")?["https://static.arcgis.com/attribution/World_Imagery","https://static.arcgis.com/attribution/Vector/World_Basemap_v2"]:["https://static.arcgis.com/attribution/Vector/World_Basemap_v2"]},onAdd:function(x){this._map=x,this._initPane(),this._ready?this._asyncAdd():this.once("ready",function(){this._asyncAdd()},this)},_initPane:function(){if(this.options.pane||(this.options.pane=this.options.key.indexOf(":Labels")>-1?"esri-labels":"tilePane"),!this._map.getPane(this.options.pane)){var x=this._map.createPane(this.options.pane);x.style.pointerEvents="none",x.style.zIndex="esri-labels"===this.options.pane?550:500}},onRemove:function(x){if(x.off("moveend",Ct.Util._updateMapAttribution),x.removeLayer(this._mapboxGL),x.attributionControl){var T=document.getElementsByClassName("esri-dynamic-attribution");T&&T.length>0&&x.attributionControl.removeAttribution(T[0].outerHTML)}},_asyncAdd:function(){var x=this._map;x.on("moveend",Ct.Util._updateMapAttribution),this._mapboxGL.addTo(x,this)}}),A=te.Layer.extend({options:{pane:"overlayPane",portalUrl:"https://www.arcgis.com"},initialize:function(x,T){if(T&&te.setOptions(this,T),this.options.apiKey&&(this.options.apikey=this.options.apiKey),this.options.apikey&&(this.options.token=this.options.apikey),!x)throw new Error("An ITEM ID or SERVICE URL is required for vectorTileLayer.");x&&(this.options.key=x),this._createLayer()},_createLayer:function(){!function wt(x,T,j){var V,nt,w,l;/^https?:\/\//.test(x)&&/\/VectorTileServer\/?$/.test(x)?zt(x,T,j):(w=j,Ut(l=(nt=T).portalUrl+"/sharing/rest/content/items/"+(V=x)+"/resources/styles/root.json",nt,function(it,N){!function jt(x,T,j){Ct.request(T.portalUrl+"/sharing/rest/content/items/"+x,T.token?{token:T.token}:{},j)}(V,nt,it?function(G,v){G&&console.error(G),zt(v.url,nt,w)}:function(G,v){G&&console.error(G),xt(v.url,nt,function(M,b){w(M,N,l,b,v.url)})})}))}(this.options.key,this.options,function(x,T,j,V){if(x)throw new Error(x);if(It.indexOf(V.tileInfo.spatialReference.wkid)>=0||console.warn('This layer is not guaranteed to display properly because its service does not use the Web Mercator projection. The "tileInfo.spatialReference" property is:',V.tileInfo.spatialReference,"\nMore information is available at https://docs.mapbox.com/help/glossary/projection/ and https://github.com/Esri/esri-leaflet-vector/issues/94."),T=function(l,it,N,G){for(var v=Object.keys(l.sources),M=0;M<v.length;M++){var b=l.sources[v[M]];-1===b.url.indexOf("http")&&(b.url=it.replace("/resources/styles/root.json","")),"/"===b.url.charAt(b.url.length-1)&&(b.url=b.url.slice(0,b.url.length-1)),b.tiles||(N.tiles&&"/"!==N.tiles[0].charAt(0)&&(N.tiles[0]="/"+N.tiles[0]),b.tiles=[b.url+N.tiles[0]]),b.url+="?f=json",b.url+=G?"&token="+G:"",b.tiles[0]+=G?"?token="+G:"",b.minzoom=N.tileInfo.lods[0].level,b.maxzoom=N.tileInfo.lods[N.tileInfo.lods.length-1].level}var k=l.sources[v[v.length-1]];k.attribution=N.copyrightText||"",k.copyrightText=N.copyrightText||"";for(var _=0;_<l.layers.length;_++){var y=l.layers[_];y.layout&&y.layout["text-font"]&&y.layout["text-font"].length>1&&(y.layout["text-font"]=[y.layout["text-font"][0]])}return l.sprite&&-1===l.sprite.indexOf("http")&&(l.sprite=it.replace("styles/root.json",l.sprite.replace("../","")),l.sprite+=G?"?token="+G:""),l.glyphs&&-1===l.glyphs.indexOf("http")&&(l.glyphs=it.replace("styles/root.json",l.glyphs.replace("../","")),l.glyphs+=G?"?token="+G:""),l}(T,j,V,this.options.token),!this.getAttribution()){var w=Object.keys(T.sources);this.options.attribution=T.sources[w[w.length-1]].attribution,this._map&&this._map.attributionControl&&this._map.attributionControl.addAttribution(this.getAttribution())}this.options.style&&"function"==typeof this.options.style&&(T=this.options.style(T)),this._mapboxGL=R({style:T,pane:this.options.pane,opacity:this.options.opacity}),this._ready=!0,this.fire("ready",{},!0)}.bind(this))},onAdd:function(x){this._map=x,this._ready?this._asyncAdd():this.once("ready",function(){this._asyncAdd()},this)},onRemove:function(x){x.removeLayer(this._mapboxGL)},_asyncAdd:function(){this._mapboxGL.addTo(this._map,this)}});vt.VERSION="3.1.5",vt.VectorBasemapLayer=I,vt.VectorTileLayer=A,vt.vectorBasemapLayer=function(x,T){return new I(x,T)},vt.vectorTileLayer=function(x,T){return new A(x,T)},Object.defineProperty(vt,"__esModule",{value:!0})}),function(vt,te){"use strict";"object"==typeof module&&"object"==typeof module.exports?module.exports=vt.document?te(vt,!0):function(Ct){if(!Ct.document)throw new Error("jQuery requires a window with a document");return te(Ct)}:te(vt)}(typeof window<"u"?window:this,function(vt,te){"use strict";var Ct=[],wt=Object.getPrototypeOf,xt=Ct.slice,jt=Ct.flat?function(E){return Ct.flat.call(E)}:function(E){return Ct.concat.apply([],E)},zt=Ct.push,Ut=Ct.indexOf,Rt={},It=Rt.toString,K=Rt.hasOwnProperty,et=K.toString,st=et.call(Object),R={},I=function(E){return"function"==typeof E&&"number"!=typeof E.nodeType&&"function"!=typeof E.item},A=function(E){return null!=E&&E===E.window},x=vt.document,T={type:!0,src:!0,nonce:!0,noModule:!0};function j(E,tt,yt){var St,Zt,ne=(yt=yt||x).createElement("script");if(ne.text=E,tt)for(St in T)(Zt=tt[St]||tt.getAttribute&&tt.getAttribute(St))&&ne.setAttribute(St,Zt);yt.head.appendChild(ne).parentNode.removeChild(ne)}function V(E){return null==E?E+"":"object"==typeof E||"function"==typeof E?Rt[It.call(E)]||"object":typeof E}var w=function(E,tt){return new w.fn.init(E,tt)};function l(E){var tt=!!E&&"length"in E&&E.length,yt=V(E);return!I(E)&&!A(E)&&("array"===yt||0===tt||"number"==typeof tt&&0<tt&&tt-1 in E)}w.fn=w.prototype={jquery:"3.6.1",constructor:w,length:0,toArray:function(){return xt.call(this)},get:function(E){return null==E?xt.call(this):E<0?this[E+this.length]:this[E]},pushStack:function(E){var tt=w.merge(this.constructor(),E);return tt.prevObject=this,tt},each:function(E){return w.each(this,E)},map:function(E){return this.pushStack(w.map(this,function(tt,yt){return E.call(tt,yt,tt)}))},slice:function(){return this.pushStack(xt.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},even:function(){return this.pushStack(w.grep(this,function(E,tt){return(tt+1)%2}))},odd:function(){return this.pushStack(w.grep(this,function(E,tt){return tt%2}))},eq:function(E){var tt=this.length,yt=+E+(E<0?tt:0);return this.pushStack(0<=yt&&yt<tt?[this[yt]]:[])},end:function(){return this.prevObject||this.constructor()},push:zt,sort:Ct.sort,splice:Ct.splice},w.extend=w.fn.extend=function(){var E,tt,yt,St,Zt,ne,fe=arguments[0]||{},Be=1,je=arguments.length,ei=!1;for("boolean"==typeof fe&&(ei=fe,fe=arguments[Be]||{},Be++),"object"==typeof fe||I(fe)||(fe={}),Be===je&&(fe=this,Be--);Be<je;Be++)if(null!=(E=arguments[Be]))for(tt in E)St=E[tt],"__proto__"!==tt&&fe!==St&&(ei&&St&&(w.isPlainObject(St)||(Zt=Array.isArray(St)))?(yt=fe[tt],ne=Zt&&!Array.isArray(yt)?[]:Zt||w.isPlainObject(yt)?yt:{},Zt=!1,fe[tt]=w.extend(ei,ne,St)):void 0!==St&&(fe[tt]=St));return fe},w.extend({expando:"jQuery"+("3.6.1"+Math.random()).replace(/\D/g,""),isReady:!0,error:function(E){throw new Error(E)},noop:function(){},isPlainObject:function(E){var tt,yt;return!(!E||"[object Object]"!==It.call(E)||(tt=wt(E))&&("function"!=typeof(yt=K.call(tt,"constructor")&&tt.constructor)||et.call(yt)!==st))},isEmptyObject:function(E){var tt;for(tt in E)return!1;return!0},globalEval:function(E,tt,yt){j(E,{nonce:tt&&tt.nonce},yt)},each:function(E,tt){var yt,St=0;if(l(E))for(yt=E.length;St<yt&&!1!==tt.call(E[St],St,E[St]);St++);else for(St in E)if(!1===tt.call(E[St],St,E[St]))break;return E},makeArray:function(E,tt){var yt=tt||[];return null!=E&&(l(Object(E))?w.merge(yt,"string"==typeof E?[E]:E):zt.call(yt,E)),yt},inArray:function(E,tt,yt){return null==tt?-1:Ut.call(tt,E,yt)},merge:function(E,tt){for(var yt=+tt.length,St=0,Zt=E.length;St<yt;St++)E[Zt++]=tt[St];return E.length=Zt,E},grep:function(E,tt,yt){for(var St=[],Zt=0,ne=E.length,fe=!yt;Zt<ne;Zt++)!tt(E[Zt],Zt)!==fe&&St.push(E[Zt]);return St},map:function(E,tt,yt){var St,Zt,ne=0,fe=[];if(l(E))for(St=E.length;ne<St;ne++)null!=(Zt=tt(E[ne],ne,yt))&&fe.push(Zt);else for(ne in E)null!=(Zt=tt(E[ne],ne,yt))&&fe.push(Zt);return jt(fe)},guid:1,support:R}),"function"==typeof Symbol&&(w.fn[Symbol.iterator]=Ct[Symbol.iterator]),w.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),function(E,tt){Rt["[object "+tt+"]"]=tt.toLowerCase()});var it=function(E){var tt,yt,St,Zt,ne,fe,Be,je,ei,vi,Li,ci,ui,an,cn,bn,Qo,wr,$r,Io="sizzle"+1*new Date,io=E.document,Ir=0,Ao=0,er=Sn(),aa=Sn(),ga=Sn(),hr=Sn(),Jr=function(ve,Ne){return ve===Ne&&(Li=!0),0},js={}.hasOwnProperty,Ho=[],Qr=Ho.pop,Xo=Ho.push,Go=Ho.push,Rr=Ho.slice,sr=function(ve,Ne){for(var ni=0,zi=ve.length;ni<zi;ni++)if(ve[ni]===Ne)return ni;return-1},ir="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",Rn="[\\x20\\t\\r\\n\\f]",go="(?:\\\\[\\da-fA-F]{1,6}"+Rn+"?|\\\\[^\\r\\n\\f]|[\\w-]|[^\0-\\x7f])+",Zo="\\["+Rn+"*("+go+")(?:"+Rn+"*([*^$|!~]?=)"+Rn+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+go+"))|)"+Rn+"*\\]",Gr=":("+go+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+Zo+")*)|.*)\\)|)",cr=new RegExp(Rn+"+","g"),co=new RegExp("^"+Rn+"+|((?:^|[^\\\\])(?:\\\\.)*)"+Rn+"+$","g"),la=new RegExp("^"+Rn+"*,"+Rn+"*"),as=new RegExp("^"+Rn+"*([>+~]|"+Rn+")"+Rn+"*"),_s=new RegExp(Rn+"|>"),Qs=new RegExp(Gr),Oa=new RegExp("^"+go+"$"),ya={ID:new RegExp("^#("+go+")"),CLASS:new RegExp("^\\.("+go+")"),TAG:new RegExp("^("+go+"|[*])"),ATTR:new RegExp("^"+Zo),PSEUDO:new RegExp("^"+Gr),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+Rn+"*(even|odd|(([+-]|)(\\d*)n|)"+Rn+"*(?:([+-]|)"+Rn+"*(\\d+)|))"+Rn+"*\\)|)","i"),bool:new RegExp("^(?:"+ir+")$","i"),needsContext:new RegExp("^"+Rn+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+Rn+"*((?:-\\d)?\\d*)"+Rn+"*\\)|)(?=[^-]|$)","i")},Es=/HTML$/i,xs=/^(?:input|select|textarea|button)$/i,Sa=/^h\d$/i,r=/^[^{]+\{\s*\[native \w/,f=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,U=/[+~]/,ut=new RegExp("\\\\[\\da-fA-F]{1,6}"+Rn+"?|\\\\([^\\r\\n\\f])","g"),Et=function(ve,Ne){var ni="0x"+ve.slice(1)-65536;return Ne||(ni<0?String.fromCharCode(ni+65536):String.fromCharCode(ni>>10|55296,1023&ni|56320))},ae=/([\0-\x1f\x7f]|^-?\d)|^-$|[^\0-\x1f\x7f-\uFFFF\w-]/g,qe=function(ve,Ne){return Ne?"\0"===ve?"\ufffd":ve.slice(0,-1)+"\\"+ve.charCodeAt(ve.length-1).toString(16)+" ":"\\"+ve},Xe=function(){ci()},ki=Hs(function(ve){return!0===ve.disabled&&"fieldset"===ve.nodeName.toLowerCase()},{dir:"parentNode",next:"legend"});try{Go.apply(Ho=Rr.call(io.childNodes),io.childNodes)}catch{Go={apply:Ho.length?function(Ne,ni){Xo.apply(Ne,Rr.call(ni))}:function(Ne,ni){for(var zi=Ne.length,ri=0;Ne[zi++]=ni[ri++];);Ne.length=zi-1}}}function Ci(ve,Ne,ni,zi){var ri,Di,Qi,rn,xn,lo,oo,Wn=Ne&&Ne.ownerDocument,Xt=Ne?Ne.nodeType:9;if(ni=ni||[],"string"!=typeof ve||!ve||1!==Xt&&9!==Xt&&11!==Xt)return ni;if(!zi&&(ci(Ne),Ne=Ne||ui,cn)){if(11!==Xt&&(xn=f.exec(ve)))if(ri=xn[1]){if(9===Xt){if(!(Qi=Ne.getElementById(ri)))return ni;if(Qi.id===ri)return ni.push(Qi),ni}else if(Wn&&(Qi=Wn.getElementById(ri))&&$r(Ne,Qi)&&Qi.id===ri)return ni.push(Qi),ni}else{if(xn[2])return Go.apply(ni,Ne.getElementsByTagName(ve)),ni;if((ri=xn[3])&&yt.getElementsByClassName&&Ne.getElementsByClassName)return Go.apply(ni,Ne.getElementsByClassName(ri)),ni}if(yt.qsa&&!hr[ve+" "]&&(!bn||!bn.test(ve))&&(1!==Xt||"object"!==Ne.nodeName.toLowerCase())){if(oo=ve,Wn=Ne,1===Xt&&(_s.test(ve)||as.test(ve))){for((Wn=U.test(ve)&&ca(Ne.parentNode)||Ne)===Ne&&yt.scope||((rn=Ne.getAttribute("id"))?rn=rn.replace(ae,qe):Ne.setAttribute("id",rn=Io)),Di=(lo=fe(ve)).length;Di--;)lo[Di]=(rn?"#"+rn:":scope")+" "+Ms(lo[Di]);oo=lo.join(",")}try{return Go.apply(ni,Wn.querySelectorAll(oo)),ni}catch{hr(ve,!0)}finally{rn===Io&&Ne.removeAttribute("id")}}}return je(ve.replace(co,"$1"),Ne,ni,zi)}function Sn(){var ve=[];return function Ne(ni,zi){return ve.push(ni+" ")>St.cacheLength&&delete Ne[ve.shift()],Ne[ni+" "]=zi}}function no(ve){return ve[Io]=!0,ve}function wo(ve){var Ne=ui.createElement("fieldset");try{return!!ve(Ne)}catch{return!1}finally{Ne.parentNode&&Ne.parentNode.removeChild(Ne),Ne=null}}function fr(ve,Ne){for(var ni=ve.split("|"),zi=ni.length;zi--;)St.attrHandle[ni[zi]]=Ne}function Fs(ve,Ne){var ni=Ne&&ve,zi=ni&&1===ve.nodeType&&1===Ne.nodeType&&ve.sourceIndex-Ne.sourceIndex;if(zi)return zi;if(ni)for(;ni=ni.nextSibling;)if(ni===Ne)return-1;return ve?1:-1}function ns(ve){return function(Ne){return"input"===Ne.nodeName.toLowerCase()&&Ne.type===ve}}function Wr(ve){return function(Ne){var ni=Ne.nodeName.toLowerCase();return("input"===ni||"button"===ni)&&Ne.type===ve}}function ha(ve){return function(Ne){return"form"in Ne?Ne.parentNode&&!1===Ne.disabled?"label"in Ne?"label"in Ne.parentNode?Ne.parentNode.disabled===ve:Ne.disabled===ve:Ne.isDisabled===ve||Ne.isDisabled!==!ve&&ki(Ne)===ve:Ne.disabled===ve:"label"in Ne&&Ne.disabled===ve}}function ls(ve){return no(function(Ne){return Ne=+Ne,no(function(ni,zi){for(var ri,Di=ve([],ni.length,Ne),Qi=Di.length;Qi--;)ni[ri=Di[Qi]]&&(ni[ri]=!(zi[ri]=ni[ri]))})})}function ca(ve){return ve&&typeof ve.getElementsByTagName<"u"&&ve}for(tt in yt=Ci.support={},ne=Ci.isXML=function(ve){var ni=ve&&(ve.ownerDocument||ve).documentElement;return!Es.test(ve&&ve.namespaceURI||ni&&ni.nodeName||"HTML")},ci=Ci.setDocument=function(ve){var Ne,ni,zi=ve?ve.ownerDocument||ve:io;return zi!=ui&&9===zi.nodeType&&zi.documentElement&&(an=(ui=zi).documentElement,cn=!ne(ui),io!=ui&&(ni=ui.defaultView)&&ni.top!==ni&&(ni.addEventListener?ni.addEventListener("unload",Xe,!1):ni.attachEvent&&ni.attachEvent("onunload",Xe)),yt.scope=wo(function(ri){return an.appendChild(ri).appendChild(ui.createElement("div")),typeof ri.querySelectorAll<"u"&&!ri.querySelectorAll(":scope fieldset div").length}),yt.attributes=wo(function(ri){return ri.className="i",!ri.getAttribute("className")}),yt.getElementsByTagName=wo(function(ri){return ri.appendChild(ui.createComment("")),!ri.getElementsByTagName("*").length}),yt.getElementsByClassName=r.test(ui.getElementsByClassName),yt.getById=wo(function(ri){return an.appendChild(ri).id=Io,!ui.getElementsByName||!ui.getElementsByName(Io).length}),yt.getById?(St.filter.ID=function(ri){var Di=ri.replace(ut,Et);return function(Qi){return Qi.getAttribute("id")===Di}},St.find.ID=function(ri,Di){if(typeof Di.getElementById<"u"&&cn){var Qi=Di.getElementById(ri);return Qi?[Qi]:[]}}):(St.filter.ID=function(ri){var Di=ri.replace(ut,Et);return function(Qi){var rn=typeof Qi.getAttributeNode<"u"&&Qi.getAttributeNode("id");return rn&&rn.value===Di}},St.find.ID=function(ri,Di){if(typeof Di.getElementById<"u"&&cn){var Qi,rn,xn,lo=Di.getElementById(ri);if(lo){if((Qi=lo.getAttributeNode("id"))&&Qi.value===ri)return[lo];for(xn=Di.getElementsByName(ri),rn=0;lo=xn[rn++];)if((Qi=lo.getAttributeNode("id"))&&Qi.value===ri)return[lo]}return[]}}),St.find.TAG=yt.getElementsByTagName?function(ri,Di){return typeof Di.getElementsByTagName<"u"?Di.getElementsByTagName(ri):yt.qsa?Di.querySelectorAll(ri):void 0}:function(ri,Di){var Qi,rn=[],xn=0,lo=Di.getElementsByTagName(ri);if("*"===ri){for(;Qi=lo[xn++];)1===Qi.nodeType&&rn.push(Qi);return rn}return lo},St.find.CLASS=yt.getElementsByClassName&&function(ri,Di){if(typeof Di.getElementsByClassName<"u"&&cn)return Di.getElementsByClassName(ri)},Qo=[],bn=[],(yt.qsa=r.test(ui.querySelectorAll))&&(wo(function(ri){var Di;an.appendChild(ri).innerHTML="<a id='"+Io+"'></a><select id='"+Io+"-\r\\' msallowcapture=''><option selected=''></option></select>",ri.querySelectorAll("[msallowcapture^='']").length&&bn.push("[*^$]="+Rn+"*(?:''|\"\")"),ri.querySelectorAll("[selected]").length||bn.push("\\["+Rn+"*(?:value|"+ir+")"),ri.querySelectorAll("[id~="+Io+"-]").length||bn.push("~="),(Di=ui.createElement("input")).setAttribute("name",""),ri.appendChild(Di),ri.querySelectorAll("[name='']").length||bn.push("\\["+Rn+"*name"+Rn+"*="+Rn+"*(?:''|\"\")"),ri.querySelectorAll(":checked").length||bn.push(":checked"),ri.querySelectorAll("a#"+Io+"+*").length||bn.push(".#.+[+~]"),ri.querySelectorAll("\\\f"),bn.push("[\\r\\n\\f]")}),wo(function(ri){ri.innerHTML="<a href='' disabled='disabled'></a><select disabled='disabled'><option/></select>";var Di=ui.createElement("input");Di.setAttribute("type","hidden"),ri.appendChild(Di).setAttribute("name","D"),ri.querySelectorAll("[name=d]").length&&bn.push("name"+Rn+"*[*^$|!~]?="),2!==ri.querySelectorAll(":enabled").length&&bn.push(":enabled",":disabled"),an.appendChild(ri).disabled=!0,2!==ri.querySelectorAll(":disabled").length&&bn.push(":enabled",":disabled"),ri.querySelectorAll("*,:x"),bn.push(",.*:")})),(yt.matchesSelector=r.test(wr=an.matches||an.webkitMatchesSelector||an.mozMatchesSelector||an.oMatchesSelector||an.msMatchesSelector))&&wo(function(ri){yt.disconnectedMatch=wr.call(ri,"*"),wr.call(ri,"[s!='']:x"),Qo.push("!=",Gr)}),bn=bn.length&&new RegExp(bn.join("|")),Qo=Qo.length&&new RegExp(Qo.join("|")),Ne=r.test(an.compareDocumentPosition),$r=Ne||r.test(an.contains)?function(ri,Di){var Qi=9===ri.nodeType?ri.documentElement:ri,rn=Di&&Di.parentNode;return ri===rn||!(!rn||1!==rn.nodeType||!(Qi.contains?Qi.contains(rn):ri.compareDocumentPosition&&16&ri.compareDocumentPosition(rn)))}:function(ri,Di){if(Di)for(;Di=Di.parentNode;)if(Di===ri)return!0;return!1},Jr=Ne?function(ri,Di){if(ri===Di)return Li=!0,0;var Qi=!ri.compareDocumentPosition-!Di.compareDocumentPosition;return Qi||(1&(Qi=(ri.ownerDocument||ri)==(Di.ownerDocument||Di)?ri.compareDocumentPosition(Di):1)||!yt.sortDetached&&Di.compareDocumentPosition(ri)===Qi?ri==ui||ri.ownerDocument==io&&$r(io,ri)?-1:Di==ui||Di.ownerDocument==io&&$r(io,Di)?1:vi?sr(vi,ri)-sr(vi,Di):0:4&Qi?-1:1)}:function(ri,Di){if(ri===Di)return Li=!0,0;var Qi,rn=0,xn=ri.parentNode,lo=Di.parentNode,oo=[ri],Wn=[Di];if(!xn||!lo)return ri==ui?-1:Di==ui?1:xn?-1:lo?1:vi?sr(vi,ri)-sr(vi,Di):0;if(xn===lo)return Fs(ri,Di);for(Qi=ri;Qi=Qi.parentNode;)oo.unshift(Qi);for(Qi=Di;Qi=Qi.parentNode;)Wn.unshift(Qi);for(;oo[rn]===Wn[rn];)rn++;return rn?Fs(oo[rn],Wn[rn]):oo[rn]==io?-1:Wn[rn]==io?1:0}),ui},Ci.matches=function(ve,Ne){return Ci(ve,null,null,Ne)},Ci.matchesSelector=function(ve,Ne){if(ci(ve),yt.matchesSelector&&cn&&!hr[Ne+" "]&&(!Qo||!Qo.test(Ne))&&(!bn||!bn.test(Ne)))try{var ni=wr.call(ve,Ne);if(ni||yt.disconnectedMatch||ve.document&&11!==ve.document.nodeType)return ni}catch{hr(Ne,!0)}return 0<Ci(Ne,ui,null,[ve]).length},Ci.contains=function(ve,Ne){return(ve.ownerDocument||ve)!=ui&&ci(ve),$r(ve,Ne)},Ci.attr=function(ve,Ne){(ve.ownerDocument||ve)!=ui&&ci(ve);var ni=St.attrHandle[Ne.toLowerCase()],zi=ni&&js.call(St.attrHandle,Ne.toLowerCase())?ni(ve,Ne,!cn):void 0;return void 0!==zi?zi:yt.attributes||!cn?ve.getAttribute(Ne):(zi=ve.getAttributeNode(Ne))&&zi.specified?zi.value:null},Ci.escape=function(ve){return(ve+"").replace(ae,qe)},Ci.error=function(ve){throw new Error("Syntax error, unrecognized expression: "+ve)},Ci.uniqueSort=function(ve){var Ne,ni=[],zi=0,ri=0;if(Li=!yt.detectDuplicates,vi=!yt.sortStable&&ve.slice(0),ve.sort(Jr),Li){for(;Ne=ve[ri++];)Ne===ve[ri]&&(zi=ni.push(ri));for(;zi--;)ve.splice(ni[zi],1)}return vi=null,ve},Zt=Ci.getText=function(ve){var Ne,ni="",zi=0,ri=ve.nodeType;if(ri){if(1===ri||9===ri||11===ri){if("string"==typeof ve.textContent)return ve.textContent;for(ve=ve.firstChild;ve;ve=ve.nextSibling)ni+=Zt(ve)}else if(3===ri||4===ri)return ve.nodeValue}else for(;Ne=ve[zi++];)ni+=Zt(Ne);return ni},(St=Ci.selectors={cacheLength:50,createPseudo:no,match:ya,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(ve){return ve[1]=ve[1].replace(ut,Et),ve[3]=(ve[3]||ve[4]||ve[5]||"").replace(ut,Et),"~="===ve[2]&&(ve[3]=" "+ve[3]+" "),ve.slice(0,4)},CHILD:function(ve){return ve[1]=ve[1].toLowerCase(),"nth"===ve[1].slice(0,3)?(ve[3]||Ci.error(ve[0]),ve[4]=+(ve[4]?ve[5]+(ve[6]||1):2*("even"===ve[3]||"odd"===ve[3])),ve[5]=+(ve[7]+ve[8]||"odd"===ve[3])):ve[3]&&Ci.error(ve[0]),ve},PSEUDO:function(ve){var Ne,ni=!ve[6]&&ve[2];return ya.CHILD.test(ve[0])?null:(ve[3]?ve[2]=ve[4]||ve[5]||"":ni&&Qs.test(ni)&&(Ne=fe(ni,!0))&&(Ne=ni.indexOf(")",ni.length-Ne)-ni.length)&&(ve[0]=ve[0].slice(0,Ne),ve[2]=ni.slice(0,Ne)),ve.slice(0,3))}},filter:{TAG:function(ve){var Ne=ve.replace(ut,Et).toLowerCase();return"*"===ve?function(){return!0}:function(ni){return ni.nodeName&&ni.nodeName.toLowerCase()===Ne}},CLASS:function(ve){var Ne=er[ve+" "];return Ne||(Ne=new RegExp("(^|"+Rn+")"+ve+"("+Rn+"|$)"))&&er(ve,function(ni){return Ne.test("string"==typeof ni.className&&ni.className||typeof ni.getAttribute<"u"&&ni.getAttribute("class")||"")})},ATTR:function(ve,Ne,ni){return function(zi){var ri=Ci.attr(zi,ve);return null==ri?"!="===Ne:!Ne||(ri+="","="===Ne?ri===ni:"!="===Ne?ri!==ni:"^="===Ne?ni&&0===ri.indexOf(ni):"*="===Ne?ni&&-1<ri.indexOf(ni):"$="===Ne?ni&&ri.slice(-ni.length)===ni:"~="===Ne?-1<(" "+ri.replace(cr," ")+" ").indexOf(ni):"|="===Ne&&(ri===ni||ri.slice(0,ni.length+1)===ni+"-"))}},CHILD:function(ve,Ne,ni,zi,ri){var Di="nth"!==ve.slice(0,3),Qi="last"!==ve.slice(-4),rn="of-type"===Ne;return 1===zi&&0===ri?function(xn){return!!xn.parentNode}:function(xn,lo,oo){var Wn,Xt,Z,Tt,ce,Ke,$e=Di!==Qi?"nextSibling":"previousSibling",ti=xn.parentNode,Bi=rn&&xn.nodeName.toLowerCase(),Wi=!oo&&!rn,en=!1;if(ti){if(Di){for(;$e;){for(Tt=xn;Tt=Tt[$e];)if(rn?Tt.nodeName.toLowerCase()===Bi:1===Tt.nodeType)return!1;Ke=$e="only"===ve&&!Ke&&"nextSibling"}return!0}if(Ke=[Qi?ti.firstChild:ti.lastChild],Qi&&Wi){for(en=(ce=(Wn=(Xt=(Z=(Tt=ti)[Io]||(Tt[Io]={}))[Tt.uniqueID]||(Z[Tt.uniqueID]={}))[ve]||[])[0]===Ir&&Wn[1])&&Wn[2],Tt=ce&&ti.childNodes[ce];Tt=++ce&&Tt&&Tt[$e]||(en=ce=0)||Ke.pop();)if(1===Tt.nodeType&&++en&&Tt===xn){Xt[ve]=[Ir,ce,en];break}}else if(Wi&&(en=ce=(Wn=(Xt=(Z=(Tt=xn)[Io]||(Tt[Io]={}))[Tt.uniqueID]||(Z[Tt.uniqueID]={}))[ve]||[])[0]===Ir&&Wn[1]),!1===en)for(;(Tt=++ce&&Tt&&Tt[$e]||(en=ce=0)||Ke.pop())&&((rn?Tt.nodeName.toLowerCase()!==Bi:1!==Tt.nodeType)||!++en||(Wi&&((Xt=(Z=Tt[Io]||(Tt[Io]={}))[Tt.uniqueID]||(Z[Tt.uniqueID]={}))[ve]=[Ir,en]),Tt!==xn)););return(en-=ri)===zi||en%zi==0&&0<=en/zi}}},PSEUDO:function(ve,Ne){var ni,zi=St.pseudos[ve]||St.setFilters[ve.toLowerCase()]||Ci.error("unsupported pseudo: "+ve);return zi[Io]?zi(Ne):1<zi.length?(ni=[ve,ve,"",Ne],St.setFilters.hasOwnProperty(ve.toLowerCase())?no(function(ri,Di){for(var Qi,rn=zi(ri,Ne),xn=rn.length;xn--;)ri[Qi=sr(ri,rn[xn])]=!(Di[Qi]=rn[xn])}):function(ri){return zi(ri,0,ni)}):zi}},pseudos:{not:no(function(ve){var Ne=[],ni=[],zi=Be(ve.replace(co,"$1"));return zi[Io]?no(function(ri,Di,Qi,rn){for(var xn,lo=zi(ri,null,rn,[]),oo=ri.length;oo--;)(xn=lo[oo])&&(ri[oo]=!(Di[oo]=xn))}):function(ri,Di,Qi){return Ne[0]=ri,zi(Ne,null,Qi,ni),Ne[0]=null,!ni.pop()}}),has:no(function(ve){return function(Ne){return 0<Ci(ve,Ne).length}}),contains:no(function(ve){return ve=ve.replace(ut,Et),function(Ne){return-1<(Ne.textContent||Zt(Ne)).indexOf(ve)}}),lang:no(function(ve){return Oa.test(ve||"")||Ci.error("unsupported lang: "+ve),ve=ve.replace(ut,Et).toLowerCase(),function(Ne){var ni;do{if(ni=cn?Ne.lang:Ne.getAttribute("xml:lang")||Ne.getAttribute("lang"))return(ni=ni.toLowerCase())===ve||0===ni.indexOf(ve+"-")}while((Ne=Ne.parentNode)&&1===Ne.nodeType);return!1}}),target:function(ve){var Ne=E.location&&E.location.hash;return Ne&&Ne.slice(1)===ve.id},root:function(ve){return ve===an},focus:function(ve){return ve===ui.activeElement&&(!ui.hasFocus||ui.hasFocus())&&!!(ve.type||ve.href||~ve.tabIndex)},enabled:ha(!1),disabled:ha(!0),checked:function(ve){var Ne=ve.nodeName.toLowerCase();return"input"===Ne&&!!ve.checked||"option"===Ne&&!!ve.selected},selected:function(ve){return!0===ve.selected},empty:function(ve){for(ve=ve.firstChild;ve;ve=ve.nextSibling)if(ve.nodeType<6)return!1;return!0},parent:function(ve){return!St.pseudos.empty(ve)},header:function(ve){return Sa.test(ve.nodeName)},input:function(ve){return xs.test(ve.nodeName)},button:function(ve){var Ne=ve.nodeName.toLowerCase();return"input"===Ne&&"button"===ve.type||"button"===Ne},text:function(ve){var Ne;return"input"===ve.nodeName.toLowerCase()&&"text"===ve.type&&(null==(Ne=ve.getAttribute("type"))||"text"===Ne.toLowerCase())},first:ls(function(){return[0]}),last:ls(function(ve,Ne){return[Ne-1]}),eq:ls(function(ve,Ne,ni){return[ni<0?ni+Ne:ni]}),even:ls(function(ve,Ne){for(var ni=0;ni<Ne;ni+=2)ve.push(ni);return ve}),odd:ls(function(ve,Ne){for(var ni=1;ni<Ne;ni+=2)ve.push(ni);return ve}),lt:ls(function(ve,Ne,ni){for(var zi=ni<0?ni+Ne:Ne<ni?Ne:ni;0<=--zi;)ve.push(zi);return ve}),gt:ls(function(ve,Ne,ni){for(var zi=ni<0?ni+Ne:ni;++zi<Ne;)ve.push(zi);return ve})}}).pseudos.nth=St.pseudos.eq,{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})St.pseudos[tt]=ns(tt);for(tt in{submit:!0,reset:!0})St.pseudos[tt]=Wr(tt);function ur(){}function Ms(ve){for(var Ne=0,ni=ve.length,zi="";Ne<ni;Ne++)zi+=ve[Ne].value;return zi}function Hs(ve,Ne,ni){var zi=Ne.dir,ri=Ne.next,Di=ri||zi,Qi=ni&&"parentNode"===Di,rn=Ao++;return Ne.first?function(xn,lo,oo){for(;xn=xn[zi];)if(1===xn.nodeType||Qi)return ve(xn,lo,oo);return!1}:function(xn,lo,oo){var Wn,Xt,Z,Tt=[Ir,rn];if(oo){for(;xn=xn[zi];)if((1===xn.nodeType||Qi)&&ve(xn,lo,oo))return!0}else for(;xn=xn[zi];)if(1===xn.nodeType||Qi)if(Xt=(Z=xn[Io]||(xn[Io]={}))[xn.uniqueID]||(Z[xn.uniqueID]={}),ri&&ri===xn.nodeName.toLowerCase())xn=xn[zi]||xn;else{if((Wn=Xt[Di])&&Wn[0]===Ir&&Wn[1]===rn)return Tt[2]=Wn[2];if((Xt[Di]=Tt)[2]=ve(xn,lo,oo))return!0}return!1}}function Ta(ve){return 1<ve.length?function(Ne,ni,zi){for(var ri=ve.length;ri--;)if(!ve[ri](Ne,ni,zi))return!1;return!0}:ve[0]}function Ls(ve,Ne,ni,zi,ri){for(var Di,Qi=[],rn=0,xn=ve.length,lo=null!=Ne;rn<xn;rn++)(Di=ve[rn])&&(ni&&!ni(Di,zi,ri)||(Qi.push(Di),lo&&Ne.push(rn)));return Qi}function Ka(ve,Ne,ni,zi,ri,Di){return zi&&!zi[Io]&&(zi=Ka(zi)),ri&&!ri[Io]&&(ri=Ka(ri,Di)),no(function(Qi,rn,xn,lo){var oo,Wn,Xt,Z=[],Tt=[],ce=rn.length,Ke=Qi||function(Bi,Wi,en){for(var ji=0,Gi=Wi.length;ji<Gi;ji++)Ci(Bi,Wi[ji],en);return en}(Ne||"*",xn.nodeType?[xn]:xn,[]),$e=!ve||!Qi&&Ne?Ke:Ls(Ke,Z,ve,xn,lo),ti=ni?ri||(Qi?ve:ce||zi)?[]:rn:$e;if(ni&&ni($e,ti,xn,lo),zi)for(oo=Ls(ti,Tt),zi(oo,[],xn,lo),Wn=oo.length;Wn--;)(Xt=oo[Wn])&&(ti[Tt[Wn]]=!($e[Tt[Wn]]=Xt));if(Qi){if(ri||ve){if(ri){for(oo=[],Wn=ti.length;Wn--;)(Xt=ti[Wn])&&oo.push($e[Wn]=Xt);ri(null,ti=[],oo,lo)}for(Wn=ti.length;Wn--;)(Xt=ti[Wn])&&-1<(oo=ri?sr(Qi,Xt):Z[Wn])&&(Qi[oo]=!(rn[oo]=Xt))}}else ti=Ls(ti===rn?ti.splice(ce,ti.length):ti),ri?ri(null,rn,ti,lo):Go.apply(rn,ti)})}function Va(ve){for(var Ne,ni,zi,ri=ve.length,Di=St.relative[ve[0].type],Qi=Di||St.relative[" "],rn=Di?1:0,xn=Hs(function(Wn){return Wn===Ne},Qi,!0),lo=Hs(function(Wn){return-1<sr(Ne,Wn)},Qi,!0),oo=[function(Wn,Xt,Z){var Tt=!Di&&(Z||Xt!==ei)||((Ne=Xt).nodeType?xn(Wn,Xt,Z):lo(Wn,Xt,Z));return Ne=null,Tt}];rn<ri;rn++)if(ni=St.relative[ve[rn].type])oo=[Hs(Ta(oo),ni)];else{if((ni=St.filter[ve[rn].type].apply(null,ve[rn].matches))[Io]){for(zi=++rn;zi<ri&&!St.relative[ve[zi].type];zi++);return Ka(1<rn&&Ta(oo),1<rn&&Ms(ve.slice(0,rn-1).concat({value:" "===ve[rn-2].type?"*":""})).replace(co,"$1"),ni,rn<zi&&Va(ve.slice(rn,zi)),zi<ri&&Va(ve=ve.slice(zi)),zi<ri&&Ms(ve))}oo.push(ni)}return Ta(oo)}return ur.prototype=St.filters=St.pseudos,St.setFilters=new ur,fe=Ci.tokenize=function(ve,Ne){var ni,zi,ri,Di,Qi,rn,xn,lo=aa[ve+" "];if(lo)return Ne?0:lo.slice(0);for(Qi=ve,rn=[],xn=St.preFilter;Qi;){for(Di in ni&&!(zi=la.exec(Qi))||(zi&&(Qi=Qi.slice(zi[0].length)||Qi),rn.push(ri=[])),ni=!1,(zi=as.exec(Qi))&&(ni=zi.shift(),ri.push({value:ni,type:zi[0].replace(co," ")}),Qi=Qi.slice(ni.length)),St.filter)!(zi=ya[Di].exec(Qi))||xn[Di]&&!(zi=xn[Di](zi))||(ni=zi.shift(),ri.push({value:ni,type:Di,matches:zi}),Qi=Qi.slice(ni.length));if(!ni)break}return Ne?Qi.length:Qi?Ci.error(ve):aa(ve,rn).slice(0)},Be=Ci.compile=function(ve,Ne){var ni,zi,ri,Di,Qi,rn,xn=[],lo=[],oo=ga[ve+" "];if(!oo){for(Ne||(Ne=fe(ve)),ni=Ne.length;ni--;)(oo=Va(Ne[ni]))[Io]?xn.push(oo):lo.push(oo);(oo=ga(ve,(zi=lo,Di=0<(ri=xn).length,Qi=0<zi.length,rn=function(Wn,Xt,Z,Tt,ce){var Ke,$e,ti,Bi=0,Wi="0",en=Wn&&[],ji=[],Gi=ei,Qn=Wn||Qi&&St.find.TAG("*",ce),Zn=Ir+=null==Gi?1:Math.random()||.1,ho=Qn.length;for(ce&&(ei=Xt==ui||Xt||ce);Wi!==ho&&null!=(Ke=Qn[Wi]);Wi++){if(Qi&&Ke){for($e=0,Xt||Ke.ownerDocument==ui||(ci(Ke),Z=!cn);ti=zi[$e++];)if(ti(Ke,Xt||ui,Z)){Tt.push(Ke);break}ce&&(Ir=Zn)}Di&&((Ke=!ti&&Ke)&&Bi--,Wn&&en.push(Ke))}if(Bi+=Wi,Di&&Wi!==Bi){for($e=0;ti=ri[$e++];)ti(en,ji,Xt,Z);if(Wn){if(0<Bi)for(;Wi--;)en[Wi]||ji[Wi]||(ji[Wi]=Qr.call(Tt));ji=Ls(ji)}Go.apply(Tt,ji),ce&&!Wn&&0<ji.length&&1<Bi+ri.length&&Ci.uniqueSort(Tt)}return ce&&(Ir=Zn,ei=Gi),en},Di?no(rn):rn))).selector=ve}return oo},je=Ci.select=function(ve,Ne,ni,zi){var ri,Di,Qi,rn,xn,lo="function"==typeof ve&&ve,oo=!zi&&fe(ve=lo.selector||ve);if(ni=ni||[],1===oo.length){if(2<(Di=oo[0]=oo[0].slice(0)).length&&"ID"===(Qi=Di[0]).type&&9===Ne.nodeType&&cn&&St.relative[Di[1].type]){if(!(Ne=(St.find.ID(Qi.matches[0].replace(ut,Et),Ne)||[])[0]))return ni;lo&&(Ne=Ne.parentNode),ve=ve.slice(Di.shift().value.length)}for(ri=ya.needsContext.test(ve)?0:Di.length;ri--&&!St.relative[rn=(Qi=Di[ri]).type];)if((xn=St.find[rn])&&(zi=xn(Qi.matches[0].replace(ut,Et),U.test(Di[0].type)&&ca(Ne.parentNode)||Ne))){if(Di.splice(ri,1),!(ve=zi.length&&Ms(Di)))return Go.apply(ni,zi),ni;break}}return(lo||Be(ve,oo))(zi,Ne,!cn,ni,!Ne||U.test(ve)&&ca(Ne.parentNode)||Ne),ni},yt.sortStable=Io.split("").sort(Jr).join("")===Io,yt.detectDuplicates=!!Li,ci(),yt.sortDetached=wo(function(ve){return 1&ve.compareDocumentPosition(ui.createElement("fieldset"))}),wo(function(ve){return ve.innerHTML="<a href='#'></a>","#"===ve.firstChild.getAttribute("href")})||fr("type|href|height|width",function(ve,Ne,ni){if(!ni)return ve.getAttribute(Ne,"type"===Ne.toLowerCase()?1:2)}),yt.attributes&&wo(function(ve){return ve.innerHTML="<input/>",ve.firstChild.setAttribute("value",""),""===ve.firstChild.getAttribute("value")})||fr("value",function(ve,Ne,ni){if(!ni&&"input"===ve.nodeName.toLowerCase())return ve.defaultValue}),wo(function(ve){return null==ve.getAttribute("disabled")})||fr(ir,function(ve,Ne,ni){var zi;if(!ni)return!0===ve[Ne]?Ne.toLowerCase():(zi=ve.getAttributeNode(Ne))&&zi.specified?zi.value:null}),Ci}(vt);w.find=it,w.expr=it.selectors,w.expr[":"]=w.expr.pseudos,w.uniqueSort=w.unique=it.uniqueSort,w.text=it.getText,w.isXMLDoc=it.isXML,w.contains=it.contains,w.escapeSelector=it.escape;var N=function(E,tt,yt){for(var St=[],Zt=void 0!==yt;(E=E[tt])&&9!==E.nodeType;)if(1===E.nodeType){if(Zt&&w(E).is(yt))break;St.push(E)}return St},G=function(E,tt){for(var yt=[];E;E=E.nextSibling)1===E.nodeType&&E!==tt&&yt.push(E);return yt},v=w.expr.match.needsContext;function M(E,tt){return E.nodeName&&E.nodeName.toLowerCase()===tt.toLowerCase()}var b=/^<([a-z][^\/\0>:\x20\t\r\n\f]*)[\x20\t\r\n\f]*\/?>(?:<\/\1>|)$/i;function k(E,tt,yt){return I(tt)?w.grep(E,function(St,Zt){return!!tt.call(St,Zt,St)!==yt}):tt.nodeType?w.grep(E,function(St){return St===tt!==yt}):"string"!=typeof tt?w.grep(E,function(St){return-1<Ut.call(tt,St)!==yt}):w.filter(tt,E,yt)}w.filter=function(E,tt,yt){var St=tt[0];return yt&&(E=":not("+E+")"),1===tt.length&&1===St.nodeType?w.find.matchesSelector(St,E)?[St]:[]:w.find.matches(E,w.grep(tt,function(Zt){return 1===Zt.nodeType}))},w.fn.extend({find:function(E){var tt,yt,St=this.length,Zt=this;if("string"!=typeof E)return this.pushStack(w(E).filter(function(){for(tt=0;tt<St;tt++)if(w.contains(Zt[tt],this))return!0}));for(yt=this.pushStack([]),tt=0;tt<St;tt++)w.find(E,Zt[tt],yt);return 1<St?w.uniqueSort(yt):yt},filter:function(E){return this.pushStack(k(this,E||[],!1))},not:function(E){return this.pushStack(k(this,E||[],!0))},is:function(E){return!!k(this,"string"==typeof E&&v.test(E)?w(E):E||[],!1).length}});var _,y=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]+))$/;(w.fn.init=function(E,tt,yt){var St,Zt;if(!E)return this;if(yt=yt||_,"string"==typeof E){if(!(St="<"===E[0]&&">"===E[E.length-1]&&3<=E.length?[null,E,null]:y.exec(E))||!St[1]&&tt)return!tt||tt.jquery?(tt||yt).find(E):this.constructor(tt).find(E);if(St[1]){if(w.merge(this,w.parseHTML(St[1],(tt=tt instanceof w?tt[0]:tt)&&tt.nodeType?tt.ownerDocument||tt:x,!0)),b.test(St[1])&&w.isPlainObject(tt))for(St in tt)I(this[St])?this[St](tt[St]):this.attr(St,tt[St]);return this}return(Zt=x.getElementById(St[2]))&&(this[0]=Zt,this.length=1),this}return E.nodeType?(this[0]=E,this.length=1,this):I(E)?void 0!==yt.ready?yt.ready(E):E(w):w.makeArray(E,this)}).prototype=w.fn,_=w(x);var O=/^(?:parents|prev(?:Until|All))/,B={children:!0,contents:!0,next:!0,prev:!0};function H(E,tt){for(;(E=E[tt])&&1!==E.nodeType;);return E}w.fn.extend({has:function(E){var tt=w(E,this),yt=tt.length;return this.filter(function(){for(var St=0;St<yt;St++)if(w.contains(this,tt[St]))return!0})},closest:function(E,tt){var yt,St=0,Zt=this.length,ne=[],fe="string"!=typeof E&&w(E);if(!v.test(E))for(;St<Zt;St++)for(yt=this[St];yt&&yt!==tt;yt=yt.parentNode)if(yt.nodeType<11&&(fe?-1<fe.index(yt):1===yt.nodeType&&w.find.matchesSelector(yt,E))){ne.push(yt);break}return this.pushStack(1<ne.length?w.uniqueSort(ne):ne)},index:function(E){return E?"string"==typeof E?Ut.call(w(E),this[0]):Ut.call(this,E.jquery?E[0]:E):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(E,tt){return this.pushStack(w.uniqueSort(w.merge(this.get(),w(E,tt))))},addBack:function(E){return this.add(null==E?this.prevObject:this.prevObject.filter(E))}}),w.each({parent:function(E){var tt=E.parentNode;return tt&&11!==tt.nodeType?tt:null},parents:function(E){return N(E,"parentNode")},parentsUntil:function(E,tt,yt){return N(E,"parentNode",yt)},next:function(E){return H(E,"nextSibling")},prev:function(E){return H(E,"previousSibling")},nextAll:function(E){return N(E,"nextSibling")},prevAll:function(E){return N(E,"previousSibling")},nextUntil:function(E,tt,yt){return N(E,"nextSibling",yt)},prevUntil:function(E,tt,yt){return N(E,"previousSibling",yt)},siblings:function(E){return G((E.parentNode||{}).firstChild,E)},children:function(E){return G(E.firstChild)},contents:function(E){return null!=E.contentDocument&&wt(E.contentDocument)?E.contentDocument:(M(E,"template")&&(E=E.content||E),w.merge([],E.childNodes))}},function(E,tt){w.fn[E]=function(yt,St){var Zt=w.map(this,tt,yt);return"Until"!==E.slice(-5)&&(St=yt),St&&"string"==typeof St&&(Zt=w.filter(St,Zt)),1<this.length&&(B[E]||w.uniqueSort(Zt),O.test(E)&&Zt.reverse()),this.pushStack(Zt)}});var at=/[^\x20\t\r\n\f]+/g;function ft(E){return E}function rt(E){throw E}function z(E,tt,yt,St){var Zt;try{E&&I(Zt=E.promise)?Zt.call(E).done(tt).fail(yt):E&&I(Zt=E.then)?Zt.call(E,tt,yt):tt.apply(void 0,[E].slice(St))}catch(ne){yt.apply(void 0,[ne])}}w.Callbacks=function(E){var yt;E="string"==typeof E?(yt={},w.each(E.match(at)||[],function(ci,ui){yt[ui]=!0}),yt):w.extend({},E);var St,Zt,ne,fe,Be=[],je=[],ei=-1,vi=function(){for(fe=fe||E.once,ne=St=!0;je.length;ei=-1)for(Zt=je.shift();++ei<Be.length;)!1===Be[ei].apply(Zt[0],Zt[1])&&E.stopOnFalse&&(ei=Be.length,Zt=!1);E.memory||(Zt=!1),St=!1,fe&&(Be=Zt?[]:"")},Li={add:function(){return Be&&(Zt&&!St&&(ei=Be.length-1,je.push(Zt)),function ci(ui){w.each(ui,function(an,cn){I(cn)?E.unique&&Li.has(cn)||Be.push(cn):cn&&cn.length&&"string"!==V(cn)&&ci(cn)})}(arguments),Zt&&!St&&vi()),this},remove:function(){return w.each(arguments,function(ci,ui){for(var an;-1<(an=w.inArray(ui,Be,an));)Be.splice(an,1),an<=ei&&ei--}),this},has:function(ci){return ci?-1<w.inArray(ci,Be):0<Be.length},empty:function(){return Be&&(Be=[]),this},disable:function(){return fe=je=[],Be=Zt="",this},disabled:function(){return!Be},lock:function(){return fe=je=[],Zt||St||(Be=Zt=""),this},locked:function(){return!!fe},fireWith:function(ci,ui){return fe||(ui=[ci,(ui=ui||[]).slice?ui.slice():ui],je.push(ui),St||vi()),this},fire:function(){return Li.fireWith(this,arguments),this},fired:function(){return!!ne}};return Li},w.extend({Deferred:function(E){var tt=[["notify","progress",w.Callbacks("memory"),w.Callbacks("memory"),2],["resolve","done",w.Callbacks("once memory"),w.Callbacks("once memory"),0,"resolved"],["reject","fail",w.Callbacks("once memory"),w.Callbacks("once memory"),1,"rejected"]],yt="pending",St={state:function(){return yt},always:function(){return Zt.done(arguments).fail(arguments),this},catch:function(ne){return St.then(null,ne)},pipe:function(){var ne=arguments;return w.Deferred(function(fe){w.each(tt,function(Be,je){var ei=I(ne[je[4]])&&ne[je[4]];Zt[je[1]](function(){var vi=ei&&ei.apply(this,arguments);vi&&I(vi.promise)?vi.promise().progress(fe.notify).done(fe.resolve).fail(fe.reject):fe[je[0]+"With"](this,ei?[vi]:arguments)})}),ne=null}).promise()},then:function(ne,fe,Be){var je=0;function ei(vi,Li,ci,ui){return function(){var an=this,cn=arguments,bn=function(){var wr,$r;if(!(vi<je)){if((wr=ci.apply(an,cn))===Li.promise())throw new TypeError("Thenable self-resolution");I($r=wr&&("object"==typeof wr||"function"==typeof wr)&&wr.then)?ui?$r.call(wr,ei(je,Li,ft,ui),ei(je,Li,rt,ui)):(je++,$r.call(wr,ei(je,Li,ft,ui),ei(je,Li,rt,ui),ei(je,Li,ft,Li.notifyWith))):(ci!==ft&&(an=void 0,cn=[wr]),(ui||Li.resolveWith)(an,cn))}},Qo=ui?bn:function(){try{bn()}catch(wr){w.Deferred.exceptionHook&&w.Deferred.exceptionHook(wr,Qo.stackTrace),je<=vi+1&&(ci!==rt&&(an=void 0,cn=[wr]),Li.rejectWith(an,cn))}};vi?Qo():(w.Deferred.getStackHook&&(Qo.stackTrace=w.Deferred.getStackHook()),vt.setTimeout(Qo))}}return w.Deferred(function(vi){tt[0][3].add(ei(0,vi,I(Be)?Be:ft,vi.notifyWith)),tt[1][3].add(ei(0,vi,I(ne)?ne:ft)),tt[2][3].add(ei(0,vi,I(fe)?fe:rt))}).promise()},promise:function(ne){return null!=ne?w.extend(ne,St):St}},Zt={};return w.each(tt,function(ne,fe){var Be=fe[2],je=fe[5];St[fe[1]]=Be.add,je&&Be.add(function(){yt=je},tt[3-ne][2].disable,tt[3-ne][3].disable,tt[0][2].lock,tt[0][3].lock),Be.add(fe[3].fire),Zt[fe[0]]=function(){return Zt[fe[0]+"With"](this===Zt?void 0:this,arguments),this},Zt[fe[0]+"With"]=Be.fireWith}),St.promise(Zt),E&&E.call(Zt,Zt),Zt},when:function(E){var tt=arguments.length,yt=tt,St=Array(yt),Zt=xt.call(arguments),ne=w.Deferred(),fe=function(Be){return function(je){St[Be]=this,Zt[Be]=1<arguments.length?xt.call(arguments):je,--tt||ne.resolveWith(St,Zt)}};if(tt<=1&&(z(E,ne.done(fe(yt)).resolve,ne.reject,!tt),"pending"===ne.state()||I(Zt[yt]&&Zt[yt].then)))return ne.then();for(;yt--;)z(Zt[yt],fe(yt),ne.reject);return ne.promise()}});var q=/^(Eval|Internal|Range|Reference|Syntax|Type|URI)Error$/;w.Deferred.exceptionHook=function(E,tt){vt.console&&vt.console.warn&&E&&q.test(E.name)&&vt.console.warn("jQuery.Deferred exception: "+E.message,E.stack,tt)},w.readyException=function(E){vt.setTimeout(function(){throw E})};var mt=w.Deferred();function pt(){x.removeEventListener("DOMContentLoaded",pt),vt.removeEventListener("load",pt),w.ready()}w.fn.ready=function(E){return mt.then(E).catch(function(tt){w.readyException(tt)}),this},w.extend({isReady:!1,readyWait:1,ready:function(E){(!0===E?--w.readyWait:w.isReady)||(w.isReady=!0)!==E&&0<--w.readyWait||mt.resolveWith(x,[w])}}),w.ready.then=mt.then,"complete"===x.readyState||"loading"!==x.readyState&&!x.documentElement.doScroll?vt.setTimeout(w.ready):(x.addEventListener("DOMContentLoaded",pt),vt.addEventListener("load",pt));var dt=function(E,tt,yt,St,Zt,ne,fe){var Be=0,je=E.length,ei=null==yt;if("object"===V(yt))for(Be in Zt=!0,yt)dt(E,tt,Be,yt[Be],!0,ne,fe);else if(void 0!==St&&(Zt=!0,I(St)||(fe=!0),ei&&(fe?(tt.call(E,St),tt=null):(ei=tt,tt=function(vi,Li,ci){return ei.call(w(vi),ci)})),tt))for(;Be<je;Be++)tt(E[Be],yt,fe?St:St.call(E[Be],Be,tt(E[Be],yt)));return Zt?E:ei?tt.call(E):je?tt(E[0],yt):ne},Y=/^-ms-/,lt=/-([a-z])/g;function ht(E,tt){return tt.toUpperCase()}function Lt(E){return E.replace(Y,"ms-").replace(lt,ht)}var At=function(E){return 1===E.nodeType||9===E.nodeType||!+E.nodeType};function Wt(){this.expando=w.expando+Wt.uid++}Wt.uid=1,Wt.prototype={cache:function(E){var tt=E[this.expando];return tt||(tt={},At(E)&&(E.nodeType?E[this.expando]=tt:Object.defineProperty(E,this.expando,{value:tt,configurable:!0}))),tt},set:function(E,tt,yt){var St,Zt=this.cache(E);if("string"==typeof tt)Zt[Lt(tt)]=yt;else for(St in tt)Zt[Lt(St)]=tt[St];return Zt},get:function(E,tt){return void 0===tt?this.cache(E):E[this.expando]&&E[this.expando][Lt(tt)]},access:function(E,tt,yt){return void 0===tt||tt&&"string"==typeof tt&&void 0===yt?this.get(E,tt):(this.set(E,tt,yt),void 0!==yt?yt:tt)},remove:function(E,tt){var yt,St=E[this.expando];if(void 0!==St){if(void 0!==tt)for((yt=(tt=Array.isArray(tt)?tt.map(Lt):(tt=Lt(tt))in St?[tt]:tt.match(at)||[]).length);yt--;)delete St[tt[yt]];(void 0===tt||w.isEmptyObject(St))&&(E.nodeType?E[this.expando]=void 0:delete E[this.expando])}},hasData:function(E){var tt=E[this.expando];return void 0!==tt&&!w.isEmptyObject(tt)}};var Ot=new Wt,se=new Wt,_e=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,We=/[A-Z]/g;function He(E,tt,yt){var St,Zt;if(void 0===yt&&1===E.nodeType)if(St="data-"+tt.replace(We,"-$&").toLowerCase(),"string"==typeof(yt=E.getAttribute(St))){try{yt="true"===(Zt=yt)||"false"!==Zt&&("null"===Zt?null:Zt===+Zt+""?+Zt:_e.test(Zt)?JSON.parse(Zt):Zt)}catch{}se.set(E,tt,yt)}else yt=void 0;return yt}w.extend({hasData:function(E){return se.hasData(E)||Ot.hasData(E)},data:function(E,tt,yt){return se.access(E,tt,yt)},removeData:function(E,tt){se.remove(E,tt)},_data:function(E,tt,yt){return Ot.access(E,tt,yt)},_removeData:function(E,tt){Ot.remove(E,tt)}}),w.fn.extend({data:function(E,tt){var yt,St,Zt,ne=this[0],fe=ne&&ne.attributes;if(void 0===E){if(this.length&&(Zt=se.get(ne),1===ne.nodeType&&!Ot.get(ne,"hasDataAttrs"))){for(yt=fe.length;yt--;)fe[yt]&&0===(St=fe[yt].name).indexOf("data-")&&(St=Lt(St.slice(5)),He(ne,St,Zt[St]));Ot.set(ne,"hasDataAttrs",!0)}return Zt}return"object"==typeof E?this.each(function(){se.set(this,E)}):dt(this,function(Be){var je;if(ne&&void 0===Be)return void 0!==(je=se.get(ne,E))||void 0!==(je=He(ne,E))?je:void 0;this.each(function(){se.set(this,E,Be)})},null,tt,1<arguments.length,null,!0)},removeData:function(E){return this.each(function(){se.remove(this,E)})}}),w.extend({queue:function(E,tt,yt){var St;if(E)return St=Ot.get(E,tt=(tt||"fx")+"queue"),yt&&(!St||Array.isArray(yt)?St=Ot.access(E,tt,w.makeArray(yt)):St.push(yt)),St||[]},dequeue:function(E,tt){var yt=w.queue(E,tt=tt||"fx"),St=yt.length,Zt=yt.shift(),ne=w._queueHooks(E,tt);"inprogress"===Zt&&(Zt=yt.shift(),St--),Zt&&("fx"===tt&&yt.unshift("inprogress"),delete ne.stop,Zt.call(E,function(){w.dequeue(E,tt)},ne)),!St&&ne&&ne.empty.fire()},_queueHooks:function(E,tt){var yt=tt+"queueHooks";return Ot.get(E,yt)||Ot.access(E,yt,{empty:w.Callbacks("once memory").add(function(){Ot.remove(E,[tt+"queue",yt])})})}}),w.fn.extend({queue:function(E,tt){var yt=2;return"string"!=typeof E&&(tt=E,E="fx",yt--),arguments.length<yt?w.queue(this[0],E):void 0===tt?this:this.each(function(){var St=w.queue(this,E,tt);w._queueHooks(this,E),"fx"===E&&"inprogress"!==St[0]&&w.dequeue(this,E)})},dequeue:function(E){return this.each(function(){w.dequeue(this,E)})},clearQueue:function(E){return this.queue(E||"fx",[])},promise:function(E,tt){var yt,St=1,Zt=w.Deferred(),ne=this,fe=this.length,Be=function(){--St||Zt.resolveWith(ne,[ne])};for("string"!=typeof E&&(tt=E,E=void 0),E=E||"fx";fe--;)(yt=Ot.get(ne[fe],E+"queueHooks"))&&yt.empty&&(St++,yt.empty.add(Be));return Be(),Zt.promise(tt)}});var Fe=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,pe=new RegExp("^(?:([+-])=|)("+Fe+")([a-z%]*)$","i"),Me=["Top","Right","Bottom","Left"],me=x.documentElement,qt=function(E){return w.contains(E.ownerDocument,E)},Kt={composed:!0};me.getRootNode&&(qt=function(E){return w.contains(E.ownerDocument,E)||E.getRootNode(Kt)===E.ownerDocument});var xe=function(E,tt){return"none"===(E=tt||E).style.display||""===E.style.display&&qt(E)&&"none"===w.css(E,"display")};function be(E,tt,yt,St){var Zt,ne,fe=20,Be=St?function(){return St.cur()}:function(){return w.css(E,tt,"")},je=Be(),ei=yt&&yt[3]||(w.cssNumber[tt]?"":"px"),vi=E.nodeType&&(w.cssNumber[tt]||"px"!==ei&&+je)&&pe.exec(w.css(E,tt));if(vi&&vi[3]!==ei){for(ei=ei||vi[3],vi=+(je/=2)||1;fe--;)w.style(E,tt,vi+ei),(1-ne)*(1-(ne=Be()/je||.5))<=0&&(fe=0),vi/=ne;w.style(E,tt,(vi*=2)+ei),yt=yt||[]}return yt&&(vi=+vi||+je||0,Zt=yt[1]?vi+(yt[1]+1)*yt[2]:+yt[2],St&&(St.unit=ei,St.start=vi,St.end=Zt)),Zt}var Te={};function ye(E,tt){for(var yt,St,Zt,ne,fe,Be,je,ei=[],vi=0,Li=E.length;vi<Li;vi++)(St=E[vi]).style&&(yt=St.style.display,tt?("none"===yt&&(ei[vi]=Ot.get(St,"display")||null,ei[vi]||(St.style.display="")),""===St.style.display&&xe(St)&&(ei[vi]=(je=fe=ne=void 0,fe=(Zt=St).ownerDocument,(je=Te[Be=Zt.nodeName])||(ne=fe.body.appendChild(fe.createElement(Be)),je=w.css(ne,"display"),ne.parentNode.removeChild(ne),"none"===je&&(je="block"),Te[Be]=je)))):"none"!==yt&&(ei[vi]="none",Ot.set(St,"display",yt)));for(vi=0;vi<Li;vi++)null!=ei[vi]&&(E[vi].style.display=ei[vi]);return E}w.fn.extend({show:function(){return ye(this,!0)},hide:function(){return ye(this)},toggle:function(E){return"boolean"==typeof E?E?this.show():this.hide():this.each(function(){xe(this)?w(this).show():w(this).hide()})}});var oi,fi,tn=/^(?:checkbox|radio)$/i,Ii=/<([a-z][^\/\0>\x20\t\r\n\f]*)/i,Pi=/^$|^module$|\/(?:java|ecma)script/i;oi=x.createDocumentFragment().appendChild(x.createElement("div")),(fi=x.createElement("input")).setAttribute("type","radio"),fi.setAttribute("checked","checked"),fi.setAttribute("name","t"),oi.appendChild(fi),R.checkClone=oi.cloneNode(!0).cloneNode(!0).lastChild.checked,oi.innerHTML="<textarea>x</textarea>",R.noCloneChecked=!!oi.cloneNode(!0).lastChild.defaultValue,oi.innerHTML="<option></option>",R.option=!!oi.lastChild;var Ji={thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};function Mi(E,tt){var yt;return yt=typeof E.getElementsByTagName<"u"?E.getElementsByTagName(tt||"*"):typeof E.querySelectorAll<"u"?E.querySelectorAll(tt||"*"):[],void 0===tt||tt&&M(E,tt)?w.merge([E],yt):yt}function nn(E,tt){for(var yt=0,St=E.length;yt<St;yt++)Ot.set(E[yt],"globalEval",!tt||Ot.get(tt[yt],"globalEval"))}Ji.tbody=Ji.tfoot=Ji.colgroup=Ji.caption=Ji.thead,Ji.th=Ji.td,R.option||(Ji.optgroup=Ji.option=[1,"<select multiple='multiple'>","</select>"]);var Ti=/<|&#?\w+;/;function Cn(E,tt,yt,St,Zt){for(var ne,fe,Be,je,ei,vi,Li=tt.createDocumentFragment(),ci=[],ui=0,an=E.length;ui<an;ui++)if((ne=E[ui])||0===ne)if("object"===V(ne))w.merge(ci,ne.nodeType?[ne]:ne);else if(Ti.test(ne)){for(fe=fe||Li.appendChild(tt.createElement("div")),Be=(Ii.exec(ne)||["",""])[1].toLowerCase(),fe.innerHTML=(je=Ji[Be]||Ji._default)[1]+w.htmlPrefilter(ne)+je[2],vi=je[0];vi--;)fe=fe.lastChild;w.merge(ci,fe.childNodes),(fe=Li.firstChild).textContent=""}else ci.push(tt.createTextNode(ne));for(Li.textContent="",ui=0;ne=ci[ui++];)if(St&&-1<w.inArray(ne,St))Zt&&Zt.push(ne);else if(ei=qt(ne),fe=Mi(Li.appendChild(ne),"script"),ei&&nn(fe),yt)for(vi=0;ne=fe[vi++];)Pi.test(ne.type||"")&&yt.push(ne);return Li}var wn=/^([^.]*)(?:\.(.+)|)/;function X(){return!0}function bt(){return!1}function Gt(E,tt){return E===function(){try{return x.activeElement}catch{}}()==("focus"===tt)}function ee(E,tt,yt,St,Zt,ne){var fe,Be;if("object"==typeof tt){for(Be in"string"!=typeof yt&&(St=St||yt,yt=void 0),tt)ee(E,Be,yt,St,tt[Be],ne);return E}if(null==St&&null==Zt?(Zt=yt,St=yt=void 0):null==Zt&&("string"==typeof yt?(Zt=St,St=void 0):(Zt=St,St=yt,yt=void 0)),!1===Zt)Zt=bt;else if(!Zt)return E;return 1===ne&&(fe=Zt,(Zt=function(je){return w().off(je),fe.apply(this,arguments)}).guid=fe.guid||(fe.guid=w.guid++)),E.each(function(){w.event.add(this,tt,Zt,St,yt)})}function we(E,tt,yt){yt?(Ot.set(E,tt,!1),w.event.add(E,tt,{namespace:!1,handler:function(St){var Zt,ne,fe=Ot.get(this,tt);if(1&St.isTrigger&&this[tt]){if(fe.length)(w.event.special[tt]||{}).delegateType&&St.stopPropagation();else if(fe=xt.call(arguments),Ot.set(this,tt,fe),Zt=yt(this,tt),this[tt](),fe!==(ne=Ot.get(this,tt))||Zt?Ot.set(this,tt,!1):ne={},fe!==ne)return St.stopImmediatePropagation(),St.preventDefault(),ne&&ne.value}else fe.length&&(Ot.set(this,tt,{value:w.event.trigger(w.extend(fe[0],w.Event.prototype),fe.slice(1),this)}),St.stopImmediatePropagation())}})):void 0===Ot.get(E,tt)&&w.event.add(E,tt,X)}w.event={global:{},add:function(E,tt,yt,St,Zt){var ne,fe,Be,je,ei,vi,Li,ci,ui,an,cn,bn=Ot.get(E);if(At(E))for(yt.handler&&(yt=(ne=yt).handler,Zt=ne.selector),Zt&&w.find.matchesSelector(me,Zt),yt.guid||(yt.guid=w.guid++),(je=bn.events)||(je=bn.events=Object.create(null)),(fe=bn.handle)||(fe=bn.handle=function(Qo){return typeof w<"u"&&w.event.triggered!==Qo.type?w.event.dispatch.apply(E,arguments):void 0}),ei=(tt=(tt||"").match(at)||[""]).length;ei--;)ui=cn=(Be=wn.exec(tt[ei])||[])[1],an=(Be[2]||"").split(".").sort(),ui&&(Li=w.event.special[ui]||{},Li=w.event.special[ui=(Zt?Li.delegateType:Li.bindType)||ui]||{},vi=w.extend({type:ui,origType:cn,data:St,handler:yt,guid:yt.guid,selector:Zt,needsContext:Zt&&w.expr.match.needsContext.test(Zt),namespace:an.join(".")},ne),(ci=je[ui])||((ci=je[ui]=[]).delegateCount=0,Li.setup&&!1!==Li.setup.call(E,St,an,fe)||E.addEventListener&&E.addEventListener(ui,fe)),Li.add&&(Li.add.call(E,vi),vi.handler.guid||(vi.handler.guid=yt.guid)),Zt?ci.splice(ci.delegateCount++,0,vi):ci.push(vi),w.event.global[ui]=!0)},remove:function(E,tt,yt,St,Zt){var ne,fe,Be,je,ei,vi,Li,ci,ui,an,cn,bn=Ot.hasData(E)&&Ot.get(E);if(bn&&(je=bn.events)){for(ei=(tt=(tt||"").match(at)||[""]).length;ei--;)if(ui=cn=(Be=wn.exec(tt[ei])||[])[1],an=(Be[2]||"").split(".").sort(),ui){for(Li=w.event.special[ui]||{},ci=je[ui=(St?Li.delegateType:Li.bindType)||ui]||[],Be=Be[2]&&new RegExp("(^|\\.)"+an.join("\\.(?:.*\\.|)")+"(\\.|$)"),fe=ne=ci.length;ne--;)vi=ci[ne],!Zt&&cn!==vi.origType||yt&&yt.guid!==vi.guid||Be&&!Be.test(vi.namespace)||St&&St!==vi.selector&&("**"!==St||!vi.selector)||(ci.splice(ne,1),vi.selector&&ci.delegateCount--,Li.remove&&Li.remove.call(E,vi));fe&&!ci.length&&(Li.teardown&&!1!==Li.teardown.call(E,an,bn.handle)||w.removeEvent(E,ui,bn.handle),delete je[ui])}else for(ui in je)w.event.remove(E,ui+tt[ei],yt,St,!0);w.isEmptyObject(je)&&Ot.remove(E,"handle events")}},dispatch:function(E){var tt,yt,St,Zt,ne,fe,Be=new Array(arguments.length),je=w.event.fix(E),ei=(Ot.get(this,"events")||Object.create(null))[je.type]||[],vi=w.event.special[je.type]||{};for(Be[0]=je,tt=1;tt<arguments.length;tt++)Be[tt]=arguments[tt];if(je.delegateTarget=this,!vi.preDispatch||!1!==vi.preDispatch.call(this,je)){for(fe=w.event.handlers.call(this,je,ei),tt=0;(Zt=fe[tt++])&&!je.isPropagationStopped();)for(je.currentTarget=Zt.elem,yt=0;(ne=Zt.handlers[yt++])&&!je.isImmediatePropagationStopped();)je.rnamespace&&!1!==ne.namespace&&!je.rnamespace.test(ne.namespace)||(je.handleObj=ne,je.data=ne.data,void 0!==(St=((w.event.special[ne.origType]||{}).handle||ne.handler).apply(Zt.elem,Be))&&!1===(je.result=St)&&(je.preventDefault(),je.stopPropagation()));return vi.postDispatch&&vi.postDispatch.call(this,je),je.result}},handlers:function(E,tt){var yt,St,Zt,ne,fe,Be=[],je=tt.delegateCount,ei=E.target;if(je&&ei.nodeType&&!("click"===E.type&&1<=E.button))for(;ei!==this;ei=ei.parentNode||this)if(1===ei.nodeType&&("click"!==E.type||!0!==ei.disabled)){for(ne=[],fe={},yt=0;yt<je;yt++)void 0===fe[Zt=(St=tt[yt]).selector+" "]&&(fe[Zt]=St.needsContext?-1<w(Zt,this).index(ei):w.find(Zt,this,null,[ei]).length),fe[Zt]&&ne.push(St);ne.length&&Be.push({elem:ei,handlers:ne})}return ei=this,je<tt.length&&Be.push({elem:ei,handlers:tt.slice(je)}),Be},addProp:function(E,tt){Object.defineProperty(w.Event.prototype,E,{enumerable:!0,configurable:!0,get:I(tt)?function(){if(this.originalEvent)return tt(this.originalEvent)}:function(){if(this.originalEvent)return this.originalEvent[E]},set:function(yt){Object.defineProperty(this,E,{enumerable:!0,configurable:!0,writable:!0,value:yt})}})},fix:function(E){return E[w.expando]?E:new w.Event(E)},special:{load:{noBubble:!0},click:{setup:function(E){var tt=this||E;return tn.test(tt.type)&&tt.click&&M(tt,"input")&&we(tt,"click",X),!1},trigger:function(E){var tt=this||E;return tn.test(tt.type)&&tt.click&&M(tt,"input")&&we(tt,"click"),!0},_default:function(E){var tt=E.target;return tn.test(tt.type)&&tt.click&&M(tt,"input")&&Ot.get(tt,"click")||M(tt,"a")}},beforeunload:{postDispatch:function(E){void 0!==E.result&&E.originalEvent&&(E.originalEvent.returnValue=E.result)}}}},w.removeEvent=function(E,tt,yt){E.removeEventListener&&E.removeEventListener(tt,yt)},w.Event=function(E,tt){if(!(this instanceof w.Event))return new w.Event(E,tt);E&&E.type?(this.originalEvent=E,this.type=E.type,this.isDefaultPrevented=E.defaultPrevented||void 0===E.defaultPrevented&&!1===E.returnValue?X:bt,this.target=E.target&&3===E.target.nodeType?E.target.parentNode:E.target,this.currentTarget=E.currentTarget,this.relatedTarget=E.relatedTarget):this.type=E,tt&&w.extend(this,tt),this.timeStamp=E&&E.timeStamp||Date.now(),this[w.expando]=!0},w.Event.prototype={constructor:w.Event,isDefaultPrevented:bt,isPropagationStopped:bt,isImmediatePropagationStopped:bt,isSimulated:!1,preventDefault:function(){var E=this.originalEvent;this.isDefaultPrevented=X,E&&!this.isSimulated&&E.preventDefault()},stopPropagation:function(){var E=this.originalEvent;this.isPropagationStopped=X,E&&!this.isSimulated&&E.stopPropagation()},stopImmediatePropagation:function(){var E=this.originalEvent;this.isImmediatePropagationStopped=X,E&&!this.isSimulated&&E.stopImmediatePropagation(),this.stopPropagation()}},w.each({altKey:!0,bubbles:!0,cancelable:!0,changedTouches:!0,ctrlKey:!0,detail:!0,eventPhase:!0,metaKey:!0,pageX:!0,pageY:!0,shiftKey:!0,view:!0,char:!0,code:!0,charCode:!0,key:!0,keyCode:!0,button:!0,buttons:!0,clientX:!0,clientY:!0,offsetX:!0,offsetY:!0,pointerId:!0,pointerType:!0,screenX:!0,screenY:!0,targetTouches:!0,toElement:!0,touches:!0,which:!0},w.event.addProp),w.each({focus:"focusin",blur:"focusout"},function(E,tt){w.event.special[E]={setup:function(){return we(this,E,Gt),!1},trigger:function(){return we(this,E),!0},_default:function(yt){return Ot.get(yt.target,E)},delegateType:tt}}),w.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(E,tt){w.event.special[E]={delegateType:tt,bindType:tt,handle:function(yt){var St,Zt=yt.relatedTarget,ne=yt.handleObj;return Zt&&(Zt===this||w.contains(this,Zt))||(yt.type=ne.origType,St=ne.handler.apply(this,arguments),yt.type=tt),St}}}),w.fn.extend({on:function(E,tt,yt,St){return ee(this,E,tt,yt,St)},one:function(E,tt,yt,St){return ee(this,E,tt,yt,St,1)},off:function(E,tt,yt){var St,Zt;if(E&&E.preventDefault&&E.handleObj)return St=E.handleObj,w(E.delegateTarget).off(St.namespace?St.origType+"."+St.namespace:St.origType,St.selector,St.handler),this;if("object"==typeof E){for(Zt in E)this.off(Zt,tt,E[Zt]);return this}return!1!==tt&&"function"!=typeof tt||(yt=tt,tt=void 0),!1===yt&&(yt=bt),this.each(function(){w.event.remove(this,E,yt,tt)})}});var Ye=/<script|<style|<link/i,xi=/checked\s*(?:[^=]|=\s*.checked.)/i,Ui=/^\s*<!\[CDATA\[|\]\]>\s*$/g;function hn(E,tt){return M(E,"table")&&M(11!==tt.nodeType?tt:tt.firstChild,"tr")&&w(E).children("tbody")[0]||E}function Fn(E){return E.type=(null!==E.getAttribute("type"))+"/"+E.type,E}function Mo(E){return"true/"===(E.type||"").slice(0,5)?E.type=E.type.slice(5):E.removeAttribute("type"),E}function qo(E,tt){var yt,St,Zt,ne,fe,Be;if(1===tt.nodeType){if(Ot.hasData(E)&&(Be=Ot.get(E).events))for(Zt in Ot.remove(tt,"handle events"),Be)for(yt=0,St=Be[Zt].length;yt<St;yt++)w.event.add(tt,Zt,Be[Zt][yt]);se.hasData(E)&&(ne=se.access(E),fe=w.extend({},ne),se.set(tt,fe))}}function Oo(E,tt,yt,St){tt=jt(tt);var Zt,ne,fe,Be,je,ei,vi=0,Li=E.length,ci=Li-1,ui=tt[0],an=I(ui);if(an||1<Li&&"string"==typeof ui&&!R.checkClone&&xi.test(ui))return E.each(function(cn){var bn=E.eq(cn);an&&(tt[0]=ui.call(this,cn,bn.html())),Oo(bn,tt,yt,St)});if(Li&&(ne=(Zt=Cn(tt,E[0].ownerDocument,!1,E,St)).firstChild,1===Zt.childNodes.length&&(Zt=ne),ne||St)){for(Be=(fe=w.map(Mi(Zt,"script"),Fn)).length;vi<Li;vi++)je=Zt,vi!==ci&&(je=w.clone(je,!0,!0),Be&&w.merge(fe,Mi(je,"script"))),yt.call(E[vi],je,vi);if(Be)for(ei=fe[fe.length-1].ownerDocument,w.map(fe,Mo),vi=0;vi<Be;vi++)Pi.test((je=fe[vi]).type||"")&&!Ot.access(je,"globalEval")&&w.contains(ei,je)&&(je.src&&"module"!==(je.type||"").toLowerCase()?w._evalUrl&&!je.noModule&&w._evalUrl(je.src,{nonce:je.nonce||je.getAttribute("nonce")},ei):j(je.textContent.replace(Ui,""),je,ei))}return E}function Dr(E,tt,yt){for(var St,Zt=tt?w.filter(tt,E):E,ne=0;null!=(St=Zt[ne]);ne++)yt||1!==St.nodeType||w.cleanData(Mi(St)),St.parentNode&&(yt&&qt(St)&&nn(Mi(St,"script")),St.parentNode.removeChild(St));return E}w.extend({htmlPrefilter:function(E){return E},clone:function(E,tt,yt){var St,Zt,ne,fe,Be,je,ei,vi=E.cloneNode(!0),Li=qt(E);if(!(R.noCloneChecked||1!==E.nodeType&&11!==E.nodeType||w.isXMLDoc(E)))for(fe=Mi(vi),St=0,Zt=(ne=Mi(E)).length;St<Zt;St++)Be=ne[St],"input"===(ei=(je=fe[St]).nodeName.toLowerCase())&&tn.test(Be.type)?je.checked=Be.checked:"input"!==ei&&"textarea"!==ei||(je.defaultValue=Be.defaultValue);if(tt)if(yt)for(ne=ne||Mi(E),fe=fe||Mi(vi),St=0,Zt=ne.length;St<Zt;St++)qo(ne[St],fe[St]);else qo(E,vi);return 0<(fe=Mi(vi,"script")).length&&nn(fe,!Li&&Mi(E,"script")),vi},cleanData:function(E){for(var tt,yt,St,Zt=w.event.special,ne=0;void 0!==(yt=E[ne]);ne++)if(At(yt)){if(tt=yt[Ot.expando]){if(tt.events)for(St in tt.events)Zt[St]?w.event.remove(yt,St):w.removeEvent(yt,St,tt.handle);yt[Ot.expando]=void 0}yt[se.expando]&&(yt[se.expando]=void 0)}}}),w.fn.extend({detach:function(E){return Dr(this,E,!0)},remove:function(E){return Dr(this,E)},text:function(E){return dt(this,function(tt){return void 0===tt?w.text(this):this.empty().each(function(){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||(this.textContent=tt)})},null,E,arguments.length)},append:function(){return Oo(this,arguments,function(E){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||hn(this,E).appendChild(E)})},prepend:function(){return Oo(this,arguments,function(E){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var tt=hn(this,E);tt.insertBefore(E,tt.firstChild)}})},before:function(){return Oo(this,arguments,function(E){this.parentNode&&this.parentNode.insertBefore(E,this)})},after:function(){return Oo(this,arguments,function(E){this.parentNode&&this.parentNode.insertBefore(E,this.nextSibling)})},empty:function(){for(var E,tt=0;null!=(E=this[tt]);tt++)1===E.nodeType&&(w.cleanData(Mi(E,!1)),E.textContent="");return this},clone:function(E,tt){return E=null!=E&&E,tt=tt??E,this.map(function(){return w.clone(this,E,tt)})},html:function(E){return dt(this,function(tt){var yt=this[0]||{},St=0,Zt=this.length;if(void 0===tt&&1===yt.nodeType)return yt.innerHTML;if("string"==typeof tt&&!Ye.test(tt)&&!Ji[(Ii.exec(tt)||["",""])[1].toLowerCase()]){tt=w.htmlPrefilter(tt);try{for(;St<Zt;St++)1===(yt=this[St]||{}).nodeType&&(w.cleanData(Mi(yt,!1)),yt.innerHTML=tt);yt=0}catch{}}yt&&this.empty().append(tt)},null,E,arguments.length)},replaceWith:function(){var E=[];return Oo(this,arguments,function(tt){var yt=this.parentNode;w.inArray(this,E)<0&&(w.cleanData(Mi(this)),yt&&yt.replaceChild(tt,this))},E)}}),w.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(E,tt){w.fn[E]=function(yt){for(var St,Zt=[],ne=w(yt),fe=ne.length-1,Be=0;Be<=fe;Be++)St=Be===fe?this:this.clone(!0),w(ne[Be])[tt](St),zt.apply(Zt,St.get());return this.pushStack(Zt)}});var No=new RegExp("^("+Fe+")(?!px)[a-z%]+$","i"),po=/^--/,ko=function(E){var tt=E.ownerDocument.defaultView;return tt&&tt.opener||(tt=vt),tt.getComputedStyle(E)},Kr=function(E,tt,yt){var St,Zt,ne={};for(Zt in tt)ne[Zt]=E.style[Zt],E.style[Zt]=tt[Zt];for(Zt in St=yt.call(E),tt)E.style[Zt]=ne[Zt];return St},dr=new RegExp(Me.join("|"),"i"),gr="[\\x20\\t\\r\\n\\f]",lr=new RegExp("^"+gr+"+|((?:^|[^\\\\])(?:\\\\.)*)"+gr+"+$","g");function kn(E,tt,yt){var St,Zt,ne,fe,Be=po.test(tt),je=E.style;return(yt=yt||ko(E))&&(fe=yt.getPropertyValue(tt)||yt[tt],Be&&(fe=fe.replace(lr,"$1")),""!==fe||qt(E)||(fe=w.style(E,tt)),!R.pixelBoxStyles()&&No.test(fe)&&dr.test(tt)&&(St=je.width,Zt=je.minWidth,ne=je.maxWidth,je.minWidth=je.maxWidth=je.width=fe,fe=yt.width,je.width=St,je.minWidth=Zt,je.maxWidth=ne)),void 0!==fe?fe+"":fe}function En(E,tt){return{get:function(){if(!E())return(this.get=tt).apply(this,arguments);delete this.get}}}!function(){function E(){if(ei){je.style.cssText="position:absolute;left:-11111px;width:60px;margin-top:1px;padding:0;border:0",ei.style.cssText="position:relative;display:block;box-sizing:border-box;overflow:scroll;margin:auto;border:1px;padding:1px;width:60%;top:1%",me.appendChild(je).appendChild(ei);var vi=vt.getComputedStyle(ei);yt="1%"!==vi.top,Be=12===tt(vi.marginLeft),ei.style.right="60%",ne=36===tt(vi.right),St=36===tt(vi.width),ei.style.position="absolute",Zt=12===tt(ei.offsetWidth/3),me.removeChild(je),ei=null}}function tt(vi){return Math.round(parseFloat(vi))}var yt,St,Zt,ne,fe,Be,je=x.createElement("div"),ei=x.createElement("div");ei.style&&(ei.style.backgroundClip="content-box",ei.cloneNode(!0).style.backgroundClip="",R.clearCloneStyle="content-box"===ei.style.backgroundClip,w.extend(R,{boxSizingReliable:function(){return E(),St},pixelBoxStyles:function(){return E(),ne},pixelPosition:function(){return E(),yt},reliableMarginLeft:function(){return E(),Be},scrollboxSize:function(){return E(),Zt},reliableTrDimensions:function(){var vi,Li,ci,ui;return null==fe&&(vi=x.createElement("table"),Li=x.createElement("tr"),ci=x.createElement("div"),vi.style.cssText="position:absolute;left:-11111px;border-collapse:separate",Li.style.cssText="border:1px solid",Li.style.height="1px",ci.style.height="9px",ci.style.display="block",me.appendChild(vi).appendChild(Li).appendChild(ci),ui=vt.getComputedStyle(Li),fe=parseInt(ui.height,10)+parseInt(ui.borderTopWidth,10)+parseInt(ui.borderBottomWidth,10)===Li.offsetHeight,me.removeChild(vi)),fe}}))}();var Ft=["Webkit","Moz","ms"],Yt=x.createElement("div").style,Jt={};function he(E){return w.cssProps[E]||Jt[E]||(E in Yt?E:Jt[E]=function(yt){for(var St=yt[0].toUpperCase()+yt.slice(1),Zt=Ft.length;Zt--;)if((yt=Ft[Zt]+St)in Yt)return yt}(E)||E)}var Ce=/^(none|table(?!-c[ea]).+)/,De={position:"absolute",visibility:"hidden",display:"block"},Ge={letterSpacing:"0",fontWeight:"400"};function oe(E,tt,yt){var St=pe.exec(tt);return St?Math.max(0,St[2]-(yt||0))+(St[3]||"px"):tt}function Ee(E,tt,yt,St,Zt,ne){var fe="width"===tt?1:0,Be=0,je=0;if(yt===(St?"border":"content"))return 0;for(;fe<4;fe+=2)"margin"===yt&&(je+=w.css(E,yt+Me[fe],!0,Zt)),St?("content"===yt&&(je-=w.css(E,"padding"+Me[fe],!0,Zt)),"margin"!==yt&&(je-=w.css(E,"border"+Me[fe]+"Width",!0,Zt))):(je+=w.css(E,"padding"+Me[fe],!0,Zt),"padding"!==yt?je+=w.css(E,"border"+Me[fe]+"Width",!0,Zt):Be+=w.css(E,"border"+Me[fe]+"Width",!0,Zt));return!St&&0<=ne&&(je+=Math.max(0,Math.ceil(E["offset"+tt[0].toUpperCase()+tt.slice(1)]-ne-je-Be-.5))||0),je}function ii(E,tt,yt){var St=ko(E),Zt=(!R.boxSizingReliable()||yt)&&"border-box"===w.css(E,"boxSizing",!1,St),ne=Zt,fe=kn(E,tt,St),Be="offset"+tt[0].toUpperCase()+tt.slice(1);if(No.test(fe)){if(!yt)return fe;fe="auto"}return(!R.boxSizingReliable()&&Zt||!R.reliableTrDimensions()&&M(E,"tr")||"auto"===fe||!parseFloat(fe)&&"inline"===w.css(E,"display",!1,St))&&E.getClientRects().length&&(Zt="border-box"===w.css(E,"boxSizing",!1,St),(ne=Be in E)&&(fe=E[Be])),(fe=parseFloat(fe)||0)+Ee(E,tt,yt||(Zt?"border":"content"),ne,St,fe)+"px"}function Si(E,tt,yt,St,Zt){return new Si.prototype.init(E,tt,yt,St,Zt)}w.extend({cssHooks:{opacity:{get:function(E,tt){if(tt){var yt=kn(E,"opacity");return""===yt?"1":yt}}}},cssNumber:{animationIterationCount:!0,columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,gridArea:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnStart:!0,gridRow:!0,gridRowEnd:!0,gridRowStart:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{},style:function(E,tt,yt,St){if(E&&3!==E.nodeType&&8!==E.nodeType&&E.style){var Zt,ne,fe,Be=Lt(tt),je=po.test(tt),ei=E.style;if(je||(tt=he(Be)),fe=w.cssHooks[tt]||w.cssHooks[Be],void 0===yt)return fe&&"get"in fe&&void 0!==(Zt=fe.get(E,!1,St))?Zt:ei[tt];"string"==(ne=typeof yt)&&(Zt=pe.exec(yt))&&Zt[1]&&(yt=be(E,tt,Zt),ne="number"),null!=yt&&yt==yt&&("number"!==ne||je||(yt+=Zt&&Zt[3]||(w.cssNumber[Be]?"":"px")),R.clearCloneStyle||""!==yt||0!==tt.indexOf("background")||(ei[tt]="inherit"),fe&&"set"in fe&&void 0===(yt=fe.set(E,yt,St))||(je?ei.setProperty(tt,yt):ei[tt]=yt))}},css:function(E,tt,yt,St){var Zt,ne,fe,Be=Lt(tt);return po.test(tt)||(tt=he(Be)),(fe=w.cssHooks[tt]||w.cssHooks[Be])&&"get"in fe&&(Zt=fe.get(E,!0,yt)),void 0===Zt&&(Zt=kn(E,tt,St)),"normal"===Zt&&tt in Ge&&(Zt=Ge[tt]),""===yt||yt?(ne=parseFloat(Zt),!0===yt||isFinite(ne)?ne||0:Zt):Zt}}),w.each(["height","width"],function(E,tt){w.cssHooks[tt]={get:function(yt,St,Zt){if(St)return!Ce.test(w.css(yt,"display"))||yt.getClientRects().length&&yt.getBoundingClientRect().width?ii(yt,tt,Zt):Kr(yt,De,function(){return ii(yt,tt,Zt)})},set:function(yt,St,Zt){var ne,fe=ko(yt),Be=!R.scrollboxSize()&&"absolute"===fe.position,je=(Be||Zt)&&"border-box"===w.css(yt,"boxSizing",!1,fe),ei=Zt?Ee(yt,tt,Zt,je,fe):0;return je&&Be&&(ei-=Math.ceil(yt["offset"+tt[0].toUpperCase()+tt.slice(1)]-parseFloat(fe[tt])-Ee(yt,tt,"border",!1,fe)-.5)),ei&&(ne=pe.exec(St))&&"px"!==(ne[3]||"px")&&(yt.style[tt]=St,St=w.css(yt,tt)),oe(0,St,ei)}}}),w.cssHooks.marginLeft=En(R.reliableMarginLeft,function(E,tt){if(tt)return(parseFloat(kn(E,"marginLeft"))||E.getBoundingClientRect().left-Kr(E,{marginLeft:0},function(){return E.getBoundingClientRect().left}))+"px"}),w.each({margin:"",padding:"",border:"Width"},function(E,tt){w.cssHooks[E+tt]={expand:function(yt){for(var St=0,Zt={},ne="string"==typeof yt?yt.split(" "):[yt];St<4;St++)Zt[E+Me[St]+tt]=ne[St]||ne[St-2]||ne[0];return Zt}},"margin"!==E&&(w.cssHooks[E+tt].set=oe)}),w.fn.extend({css:function(E,tt){return dt(this,function(yt,St,Zt){var ne,fe,Be={},je=0;if(Array.isArray(St)){for(ne=ko(yt),fe=St.length;je<fe;je++)Be[St[je]]=w.css(yt,St[je],!1,ne);return Be}return void 0!==Zt?w.style(yt,St,Zt):w.css(yt,St)},E,tt,1<arguments.length)}}),((w.Tween=Si).prototype={constructor:Si,init:function(E,tt,yt,St,Zt,ne){this.elem=E,this.prop=yt,this.easing=Zt||w.easing._default,this.options=tt,this.start=this.now=this.cur(),this.end=St,this.unit=ne||(w.cssNumber[yt]?"":"px")},cur:function(){var E=Si.propHooks[this.prop];return E&&E.get?E.get(this):Si.propHooks._default.get(this)},run:function(E){var tt,yt=Si.propHooks[this.prop];return this.pos=tt=this.options.duration?w.easing[this.easing](E,this.options.duration*E,0,1,this.options.duration):E,this.now=(this.end-this.start)*tt+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),yt&&yt.set?yt.set(this):Si.propHooks._default.set(this),this}}).init.prototype=Si.prototype,(Si.propHooks={_default:{get:function(E){var tt;return 1!==E.elem.nodeType||null!=E.elem[E.prop]&&null==E.elem.style[E.prop]?E.elem[E.prop]:(tt=w.css(E.elem,E.prop,""))&&"auto"!==tt?tt:0},set:function(E){w.fx.step[E.prop]?w.fx.step[E.prop](E):1!==E.elem.nodeType||!w.cssHooks[E.prop]&&null==E.elem.style[he(E.prop)]?E.elem[E.prop]=E.now:w.style(E.elem,E.prop,E.now+E.unit)}}}).scrollTop=Si.propHooks.scrollLeft={set:function(E){E.elem.nodeType&&E.elem.parentNode&&(E.elem[E.prop]=E.now)}},w.easing={linear:function(E){return E},swing:function(E){return.5-Math.cos(E*Math.PI)/2},_default:"swing"},w.fx=Si.prototype.init,w.fx.step={};var Oi,di,hi,sn,Fi=/^(?:toggle|show|hide)$/,yi=/queueHooks$/;function Zi(){di&&(!1===x.hidden&&vt.requestAnimationFrame?vt.requestAnimationFrame(Zi):vt.setTimeout(Zi,w.fx.interval),w.fx.tick())}function Yi(){return vt.setTimeout(function(){Oi=void 0}),Oi=Date.now()}function Ki(E,tt){var yt,St=0,Zt={height:E};for(tt=tt?1:0;St<4;St+=2-tt)Zt["margin"+(yt=Me[St])]=Zt["padding"+yt]=E;return tt&&(Zt.opacity=Zt.width=E),Zt}function Nn(E,tt,yt){for(var St,Zt=(Vi.tweeners[tt]||[]).concat(Vi.tweeners["*"]),ne=0,fe=Zt.length;ne<fe;ne++)if(St=Zt[ne].call(yt,tt,E))return St}function Vi(E,tt,yt){var St,Zt,ne=0,fe=Vi.prefilters.length,Be=w.Deferred().always(function(){delete je.elem}),je=function(){if(Zt)return!1;for(var Li=Oi||Yi(),ci=Math.max(0,ei.startTime+ei.duration-Li),ui=1-(ci/ei.duration||0),an=0,cn=ei.tweens.length;an<cn;an++)ei.tweens[an].run(ui);return Be.notifyWith(E,[ei,ui,ci]),ui<1&&cn?ci:(cn||Be.notifyWith(E,[ei,1,0]),Be.resolveWith(E,[ei]),!1)},ei=Be.promise({elem:E,props:w.extend({},tt),opts:w.extend(!0,{specialEasing:{},easing:w.easing._default},yt),originalProperties:tt,originalOptions:yt,startTime:Oi||Yi(),duration:yt.duration,tweens:[],createTween:function(Li,ci){var ui=w.Tween(E,ei.opts,Li,ci,ei.opts.specialEasing[Li]||ei.opts.easing);return ei.tweens.push(ui),ui},stop:function(Li){var ci=0,ui=Li?ei.tweens.length:0;if(Zt)return this;for(Zt=!0;ci<ui;ci++)ei.tweens[ci].run(1);return Li?(Be.notifyWith(E,[ei,1,0]),Be.resolveWith(E,[ei,Li])):Be.rejectWith(E,[ei,Li]),this}}),vi=ei.props;for(function(Li,ci){var ui,an,cn,bn,Qo;for(ui in Li)if(cn=ci[an=Lt(ui)],bn=Li[ui],Array.isArray(bn)&&(cn=bn[1],bn=Li[ui]=bn[0]),ui!==an&&(Li[an]=bn,delete Li[ui]),(Qo=w.cssHooks[an])&&"expand"in Qo)for(ui in bn=Qo.expand(bn),delete Li[an],bn)ui in Li||(Li[ui]=bn[ui],ci[ui]=cn);else ci[an]=cn}(vi,ei.opts.specialEasing);ne<fe;ne++)if(St=Vi.prefilters[ne].call(ei,E,vi,ei.opts))return I(St.stop)&&(w._queueHooks(ei.elem,ei.opts.queue).stop=St.stop.bind(St)),St;return w.map(vi,Nn,ei),I(ei.opts.start)&&ei.opts.start.call(E,ei),ei.progress(ei.opts.progress).done(ei.opts.done,ei.opts.complete).fail(ei.opts.fail).always(ei.opts.always),w.fx.timer(w.extend(je,{elem:E,anim:ei,queue:ei.opts.queue})),ei}w.Animation=w.extend(Vi,{tweeners:{"*":[function(E,tt){var yt=this.createTween(E,tt);return be(yt.elem,E,pe.exec(tt),yt),yt}]},tweener:function(E,tt){I(E)?(tt=E,E=["*"]):E=E.match(at);for(var yt,St=0,Zt=E.length;St<Zt;St++)(Vi.tweeners[yt=E[St]]=Vi.tweeners[yt]||[]).unshift(tt)},prefilters:[function(E,tt,yt){var St,Zt,ne,fe,Be,je,ei,vi,Li="width"in tt||"height"in tt,ci=this,ui={},an=E.style,cn=E.nodeType&&xe(E),bn=Ot.get(E,"fxshow");for(St in yt.queue||(null==(fe=w._queueHooks(E,"fx")).unqueued&&(fe.unqueued=0,Be=fe.empty.fire,fe.empty.fire=function(){fe.unqueued||Be()}),fe.unqueued++,ci.always(function(){ci.always(function(){fe.unqueued--,w.queue(E,"fx").length||fe.empty.fire()})})),tt)if(Fi.test(Zt=tt[St])){if(delete tt[St],ne=ne||"toggle"===Zt,Zt===(cn?"hide":"show")){if("show"!==Zt||!bn||void 0===bn[St])continue;cn=!0}ui[St]=bn&&bn[St]||w.style(E,St)}if((je=!w.isEmptyObject(tt))||!w.isEmptyObject(ui))for(St in Li&&1===E.nodeType&&(yt.overflow=[an.overflow,an.overflowX,an.overflowY],null==(ei=bn&&bn.display)&&(ei=Ot.get(E,"display")),"none"===(vi=w.css(E,"display"))&&(ei?vi=ei:(ye([E],!0),ei=E.style.display||ei,vi=w.css(E,"display"),ye([E]))),("inline"===vi||"inline-block"===vi&&null!=ei)&&"none"===w.css(E,"float")&&(je||(ci.done(function(){an.display=ei}),null==ei&&(ei="none"===(vi=an.display)?"":vi)),an.display="inline-block")),yt.overflow&&(an.overflow="hidden",ci.always(function(){an.overflow=yt.overflow[0],an.overflowX=yt.overflow[1],an.overflowY=yt.overflow[2]})),je=!1,ui)je||(bn?"hidden"in bn&&(cn=bn.hidden):bn=Ot.access(E,"fxshow",{display:ei}),ne&&(bn.hidden=!cn),cn&&ye([E],!0),ci.done(function(){for(St in cn||ye([E]),Ot.remove(E,"fxshow"),ui)w.style(E,St,ui[St])})),je=Nn(cn?bn[St]:0,St,ci),St in bn||(bn[St]=je.start,cn&&(je.end=je.start,je.start=0))}],prefilter:function(E,tt){tt?Vi.prefilters.unshift(E):Vi.prefilters.push(E)}}),w.speed=function(E,tt,yt){var St=E&&"object"==typeof E?w.extend({},E):{complete:yt||!yt&&tt||I(E)&&E,duration:E,easing:yt&&tt||tt&&!I(tt)&&tt};return w.fx.off?St.duration=0:"number"!=typeof St.duration&&(St.duration=St.duration in w.fx.speeds?w.fx.speeds[St.duration]:w.fx.speeds._default),null!=St.queue&&!0!==St.queue||(St.queue="fx"),St.old=St.complete,St.complete=function(){I(St.old)&&St.old.call(this),St.queue&&w.dequeue(this,St.queue)},St},w.fn.extend({fadeTo:function(E,tt,yt,St){return this.filter(xe).css("opacity",0).show().end().animate({opacity:tt},E,yt,St)},animate:function(E,tt,yt,St){var Zt=w.isEmptyObject(E),ne=w.speed(tt,yt,St),fe=function(){var Be=Vi(this,w.extend({},E),ne);(Zt||Ot.get(this,"finish"))&&Be.stop(!0)};return fe.finish=fe,Zt||!1===ne.queue?this.each(fe):this.queue(ne.queue,fe)},stop:function(E,tt,yt){var St=function(Zt){var ne=Zt.stop;delete Zt.stop,ne(yt)};return"string"!=typeof E&&(yt=tt,tt=E,E=void 0),tt&&this.queue(E||"fx",[]),this.each(function(){var Zt=!0,ne=null!=E&&E+"queueHooks",fe=w.timers,Be=Ot.get(this);if(ne)Be[ne]&&Be[ne].stop&&St(Be[ne]);else for(ne in Be)Be[ne]&&Be[ne].stop&&yi.test(ne)&&St(Be[ne]);for(ne=fe.length;ne--;)fe[ne].elem!==this||null!=E&&fe[ne].queue!==E||(fe[ne].anim.stop(yt),Zt=!1,fe.splice(ne,1));!Zt&&yt||w.dequeue(this,E)})},finish:function(E){return!1!==E&&(E=E||"fx"),this.each(function(){var tt,yt=Ot.get(this),St=yt[E+"queue"],Zt=yt[E+"queueHooks"],ne=w.timers,fe=St?St.length:0;for(yt.finish=!0,w.queue(this,E,[]),Zt&&Zt.stop&&Zt.stop.call(this,!0),tt=ne.length;tt--;)ne[tt].elem===this&&ne[tt].queue===E&&(ne[tt].anim.stop(!0),ne.splice(tt,1));for(tt=0;tt<fe;tt++)St[tt]&&St[tt].finish&&St[tt].finish.call(this);delete yt.finish})}}),w.each(["toggle","show","hide"],function(E,tt){var yt=w.fn[tt];w.fn[tt]=function(St,Zt,ne){return null==St||"boolean"==typeof St?yt.apply(this,arguments):this.animate(Ki(tt,!0),St,Zt,ne)}}),w.each({slideDown:Ki("show"),slideUp:Ki("hide"),slideToggle:Ki("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(E,tt){w.fn[E]=function(yt,St,Zt){return this.animate(tt,yt,St,Zt)}}),w.timers=[],w.fx.tick=function(){var E,tt=0,yt=w.timers;for(Oi=Date.now();tt<yt.length;tt++)(E=yt[tt])()||yt[tt]!==E||yt.splice(tt--,1);yt.length||w.fx.stop(),Oi=void 0},w.fx.timer=function(E){w.timers.push(E),w.fx.start()},w.fx.interval=13,w.fx.start=function(){di||(di=!0,Zi())},w.fx.stop=function(){di=null},w.fx.speeds={slow:600,fast:200,_default:400},w.fn.delay=function(E,tt){return E=w.fx&&w.fx.speeds[E]||E,this.queue(tt=tt||"fx",function(yt,St){var Zt=vt.setTimeout(yt,E);St.stop=function(){vt.clearTimeout(Zt)}})},hi=x.createElement("input"),sn=x.createElement("select").appendChild(x.createElement("option")),hi.type="checkbox",R.checkOn=""!==hi.value,R.optSelected=sn.selected,(hi=x.createElement("input")).value="t",hi.type="radio",R.radioValue="t"===hi.value;var so,Hn=w.expr.attrHandle;w.fn.extend({attr:function(E,tt){return dt(this,w.attr,E,tt,1<arguments.length)},removeAttr:function(E){return this.each(function(){w.removeAttr(this,E)})}}),w.extend({attr:function(E,tt,yt){var St,Zt,ne=E.nodeType;if(3!==ne&&8!==ne&&2!==ne)return typeof E.getAttribute>"u"?w.prop(E,tt,yt):(1===ne&&w.isXMLDoc(E)||(Zt=w.attrHooks[tt.toLowerCase()]||(w.expr.match.bool.test(tt)?so:void 0)),void 0!==yt?null===yt?void w.removeAttr(E,tt):Zt&&"set"in Zt&&void 0!==(St=Zt.set(E,yt,tt))?St:(E.setAttribute(tt,yt+""),yt):Zt&&"get"in Zt&&null!==(St=Zt.get(E,tt))?St:null==(St=w.find.attr(E,tt))?void 0:St)},attrHooks:{type:{set:function(E,tt){if(!R.radioValue&&"radio"===tt&&M(E,"input")){var yt=E.value;return E.setAttribute("type",tt),yt&&(E.value=yt),tt}}}},removeAttr:function(E,tt){var yt,St=0,Zt=tt&&tt.match(at);if(Zt&&1===E.nodeType)for(;yt=Zt[St++];)E.removeAttribute(yt)}}),so={set:function(E,tt,yt){return!1===tt?w.removeAttr(E,yt):E.setAttribute(yt,yt),yt}},w.each(w.expr.match.bool.source.match(/\w+/g),function(E,tt){var yt=Hn[tt]||w.find.attr;Hn[tt]=function(St,Zt,ne){var fe,Be,je=Zt.toLowerCase();return ne||(Be=Hn[je],Hn[je]=fe,fe=null!=yt(St,Zt,ne)?je:null,Hn[je]=Be),fe}});var Gn=/^(?:input|select|textarea|button)$/i,vo=/^(?:a|area)$/i;function Jn(E){return(E.match(at)||[]).join(" ")}function yr(E){return E.getAttribute&&E.getAttribute("class")||""}function Co(E){return Array.isArray(E)?E:"string"==typeof E&&E.match(at)||[]}w.fn.extend({prop:function(E,tt){return dt(this,w.prop,E,tt,1<arguments.length)},removeProp:function(E){return this.each(function(){delete this[w.propFix[E]||E]})}}),w.extend({prop:function(E,tt,yt){var St,Zt,ne=E.nodeType;if(3!==ne&&8!==ne&&2!==ne)return 1===ne&&w.isXMLDoc(E)||(Zt=w.propHooks[tt=w.propFix[tt]||tt]),void 0!==yt?Zt&&"set"in Zt&&void 0!==(St=Zt.set(E,yt,tt))?St:E[tt]=yt:Zt&&"get"in Zt&&null!==(St=Zt.get(E,tt))?St:E[tt]},propHooks:{tabIndex:{get:function(E){var tt=w.find.attr(E,"tabindex");return tt?parseInt(tt,10):Gn.test(E.nodeName)||vo.test(E.nodeName)&&E.href?0:-1}}},propFix:{for:"htmlFor",class:"className"}}),R.optSelected||(w.propHooks.selected={get:function(E){return null},set:function(E){}}),w.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){w.propFix[this.toLowerCase()]=this}),w.fn.extend({addClass:function(E){var tt,yt,St,Zt,ne,fe;return I(E)?this.each(function(Be){w(this).addClass(E.call(this,Be,yr(this)))}):(tt=Co(E)).length?this.each(function(){if(St=yr(this),yt=1===this.nodeType&&" "+Jn(St)+" "){for(ne=0;ne<tt.length;ne++)yt.indexOf(" "+(Zt=tt[ne])+" ")<0&&(yt+=Zt+" ");fe=Jn(yt),St!==fe&&this.setAttribute("class",fe)}}):this},removeClass:function(E){var tt,yt,St,Zt,ne,fe;return I(E)?this.each(function(Be){w(this).removeClass(E.call(this,Be,yr(this)))}):arguments.length?(tt=Co(E)).length?this.each(function(){if(St=yr(this),yt=1===this.nodeType&&" "+Jn(St)+" "){for(ne=0;ne<tt.length;ne++)for(Zt=tt[ne];-1<yt.indexOf(" "+Zt+" ");)yt=yt.replace(" "+Zt+" "," ");fe=Jn(yt),St!==fe&&this.setAttribute("class",fe)}}):this:this.attr("class","")},toggleClass:function(E,tt){var yt,St,Zt,ne,fe=typeof E,Be="string"===fe||Array.isArray(E);return I(E)?this.each(function(je){w(this).toggleClass(E.call(this,je,yr(this),tt),tt)}):"boolean"==typeof tt&&Be?tt?this.addClass(E):this.removeClass(E):(yt=Co(E),this.each(function(){if(Be)for(ne=w(this),Zt=0;Zt<yt.length;Zt++)ne.hasClass(St=yt[Zt])?ne.removeClass(St):ne.addClass(St);else void 0!==E&&"boolean"!==fe||((St=yr(this))&&Ot.set(this,"__className__",St),this.setAttribute&&this.setAttribute("class",St||!1===E?"":Ot.get(this,"__className__")||""))}))},hasClass:function(E){var tt,yt,St=0;for(tt=" "+E+" ";yt=this[St++];)if(1===yt.nodeType&&-1<(" "+Jn(yr(yt))+" ").indexOf(tt))return!0;return!1}});var vr=/\r/g;w.fn.extend({val:function(E){var tt,yt,St,Zt=this[0];return arguments.length?(St=I(E),this.each(function(ne){var fe;1===this.nodeType&&(null==(fe=St?E.call(this,ne,w(this).val()):E)?fe="":"number"==typeof fe?fe+="":Array.isArray(fe)&&(fe=w.map(fe,function(Be){return null==Be?"":Be+""})),(tt=w.valHooks[this.type]||w.valHooks[this.nodeName.toLowerCase()])&&"set"in tt&&void 0!==tt.set(this,fe,"value")||(this.value=fe))})):Zt?(tt=w.valHooks[Zt.type]||w.valHooks[Zt.nodeName.toLowerCase()])&&"get"in tt&&void 0!==(yt=tt.get(Zt,"value"))?yt:"string"==typeof(yt=Zt.value)?yt.replace(vr,""):yt??"":void 0}}),w.extend({valHooks:{option:{get:function(E){return w.find.attr(E,"value")??Jn(w.text(E))}},select:{get:function(E){var tt,yt,St,Zt=E.options,ne=E.selectedIndex,fe="select-one"===E.type,Be=fe?null:[],je=fe?ne+1:Zt.length;for(St=ne<0?je:fe?ne:0;St<je;St++)if(((yt=Zt[St]).selected||St===ne)&&!yt.disabled&&(!yt.parentNode.disabled||!M(yt.parentNode,"optgroup"))){if(tt=w(yt).val(),fe)return tt;Be.push(tt)}return Be},set:function(E,tt){for(var yt,St,Zt=E.options,ne=w.makeArray(tt),fe=Zt.length;fe--;)((St=Zt[fe]).selected=-1<w.inArray(w.valHooks.option.get(St),ne))&&(yt=!0);return yt||(E.selectedIndex=-1),ne}}}}),w.each(["radio","checkbox"],function(){w.valHooks[this]={set:function(E,tt){if(Array.isArray(tt))return E.checked=-1<w.inArray(w(E).val(),tt)}},R.checkOn||(w.valHooks[this].get=function(E){return null===E.getAttribute("value")?"on":E.value})}),R.focusin="onfocusin"in vt;var bo=/^(?:focusinfocus|focusoutblur)$/,ao=function(E){E.stopPropagation()};w.extend(w.event,{trigger:function(E,tt,yt,St){var Zt,ne,fe,Be,je,ei,vi,Li,ci=[yt||x],ui=K.call(E,"type")?E.type:E,an=K.call(E,"namespace")?E.namespace.split("."):[];if(ne=Li=fe=yt=yt||x,3!==yt.nodeType&&8!==yt.nodeType&&!bo.test(ui+w.event.triggered)&&(-1<ui.indexOf(".")&&(ui=(an=ui.split(".")).shift(),an.sort()),je=ui.indexOf(":")<0&&"on"+ui,(E=E[w.expando]?E:new w.Event(ui,"object"==typeof E&&E)).isTrigger=St?2:3,E.namespace=an.join("."),E.rnamespace=E.namespace?new RegExp("(^|\\.)"+an.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,E.result=void 0,E.target||(E.target=yt),tt=null==tt?[E]:w.makeArray(tt,[E]),vi=w.event.special[ui]||{},St||!vi.trigger||!1!==vi.trigger.apply(yt,tt))){if(!St&&!vi.noBubble&&!A(yt)){for(bo.test((Be=vi.delegateType||ui)+ui)||(ne=ne.parentNode);ne;ne=ne.parentNode)ci.push(ne),fe=ne;fe===(yt.ownerDocument||x)&&ci.push(fe.defaultView||fe.parentWindow||vt)}for(Zt=0;(ne=ci[Zt++])&&!E.isPropagationStopped();)Li=ne,E.type=1<Zt?Be:vi.bindType||ui,(ei=(Ot.get(ne,"events")||Object.create(null))[E.type]&&Ot.get(ne,"handle"))&&ei.apply(ne,tt),(ei=je&&ne[je])&&ei.apply&&At(ne)&&(E.result=ei.apply(ne,tt),!1===E.result&&E.preventDefault());return E.type=ui,St||E.isDefaultPrevented()||vi._default&&!1!==vi._default.apply(ci.pop(),tt)||!At(yt)||je&&I(yt[ui])&&!A(yt)&&((fe=yt[je])&&(yt[je]=null),w.event.triggered=ui,E.isPropagationStopped()&&Li.addEventListener(ui,ao),yt[ui](),E.isPropagationStopped()&&Li.removeEventListener(ui,ao),w.event.triggered=void 0,fe&&(yt[je]=fe)),E.result}},simulate:function(E,tt,yt){var St=w.extend(new w.Event,yt,{type:E,isSimulated:!0});w.event.trigger(St,null,tt)}}),w.fn.extend({trigger:function(E,tt){return this.each(function(){w.event.trigger(E,tt,this)})},triggerHandler:function(E,tt){var yt=this[0];if(yt)return w.event.trigger(E,tt,yt,!0)}}),R.focusin||w.each({focus:"focusin",blur:"focusout"},function(E,tt){var yt=function(St){w.event.simulate(tt,St.target,w.event.fix(St))};w.event.special[tt]={setup:function(){var St=this.ownerDocument||this.document||this,Zt=Ot.access(St,tt);Zt||St.addEventListener(E,yt,!0),Ot.access(St,tt,(Zt||0)+1)},teardown:function(){var St=this.ownerDocument||this.document||this,Zt=Ot.access(St,tt)-1;Zt?Ot.access(St,tt,Zt):(St.removeEventListener(E,yt,!0),Ot.remove(St,tt))}}});var gn=vt.location,Tr={guid:Date.now()},Vs=/\?/;w.parseXML=function(E){var tt,yt;if(!E||"string"!=typeof E)return null;try{tt=(new vt.DOMParser).parseFromString(E,"text/xml")}catch{}return yt=tt&&tt.getElementsByTagName("parsererror")[0],tt&&!yt||w.error("Invalid XML: "+(yt?w.map(yt.childNodes,function(St){return St.textContent}).join("\n"):E)),tt};var Uo=/\[\]$/,zr=/\r?\n/g,$s=/^(?:submit|button|image|reset|file)$/i,wa=/^(?:input|select|textarea|keygen)/i;function Vo(E,tt,yt,St){var Zt;if(Array.isArray(tt))w.each(tt,function(ne,fe){yt||Uo.test(E)?St(E,fe):Vo(E+"["+("object"==typeof fe&&null!=fe?ne:"")+"]",fe,yt,St)});else if(yt||"object"!==V(tt))St(E,tt);else for(Zt in tt)Vo(E+"["+Zt+"]",tt[Zt],yt,St)}w.param=function(E,tt){var yt,St=[],Zt=function(ne,fe){var Be=I(fe)?fe():fe;St[St.length]=encodeURIComponent(ne)+"="+encodeURIComponent(Be??"")};if(null==E)return"";if(Array.isArray(E)||E.jquery&&!w.isPlainObject(E))w.each(E,function(){Zt(this.name,this.value)});else for(yt in E)Vo(yt,E[yt],tt,Zt);return St.join("&")},w.fn.extend({serialize:function(){return w.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var E=w.prop(this,"elements");return E?w.makeArray(E):this}).filter(function(){var E=this.type;return this.name&&!w(this).is(":disabled")&&wa.test(this.nodeName)&&!$s.test(E)&&(this.checked||!tn.test(E))}).map(function(E,tt){var yt=w(this).val();return null==yt?null:Array.isArray(yt)?w.map(yt,function(St){return{name:tt.name,value:St.replace(zr,"\r\n")}}):{name:tt.name,value:yt.replace(zr,"\r\n")}}).get()}});var Hr=/%20/g,Or=/#.*$/,Cr=/([?&])_=[^&]*/,Br=/^(.*?):[ \t]*([^\r\n]*)$/gm,Jo=/^(?:GET|HEAD)$/,Ps=/^\/\//,is={},oa={},Mr="*/".concat("*"),ra=x.createElement("a");function rr(E){return function(tt,yt){"string"!=typeof tt&&(yt=tt,tt="*");var St,Zt=0,ne=tt.toLowerCase().match(at)||[];if(I(yt))for(;St=ne[Zt++];)"+"===St[0]?(St=St.slice(1)||"*",(E[St]=E[St]||[]).unshift(yt)):(E[St]=E[St]||[]).push(yt)}}function Lo(E,tt,yt,St){var Zt={},ne=E===oa;function fe(Be){var je;return Zt[Be]=!0,w.each(E[Be]||[],function(ei,vi){var Li=vi(tt,yt,St);return"string"!=typeof Li||ne||Zt[Li]?ne?!(je=Li):void 0:(tt.dataTypes.unshift(Li),fe(Li),!1)}),je}return fe(tt.dataTypes[0])||!Zt["*"]&&fe("*")}function Ro(E,tt){var yt,St,Zt=w.ajaxSettings.flatOptions||{};for(yt in tt)void 0!==tt[yt]&&((Zt[yt]?E:St||(St={}))[yt]=tt[yt]);return St&&w.extend(!0,E,St),E}ra.href=gn.href,w.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:gn.href,type:"GET",isLocal:/^(?:about|app|app-storage|.+-extension|file|res|widget):$/.test(gn.protocol),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":Mr,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/\bxml\b/,html:/\bhtml/,json:/\bjson\b/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":JSON.parse,"text xml":w.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(E,tt){return tt?Ro(Ro(E,w.ajaxSettings),tt):Ro(w.ajaxSettings,E)},ajaxPrefilter:rr(is),ajaxTransport:rr(oa),ajax:function(E,tt){"object"==typeof E&&(tt=E,E=void 0);var yt,St,Zt,ne,fe,Be,je,ei,vi,Li,ci=w.ajaxSetup({},tt=tt||{}),ui=ci.context||ci,an=ci.context&&(ui.nodeType||ui.jquery)?w(ui):w.event,cn=w.Deferred(),bn=w.Callbacks("once memory"),Qo=ci.statusCode||{},wr={},$r={},Io="canceled",io={readyState:0,getResponseHeader:function(Ao){var er;if(je){if(!ne)for(ne={};er=Br.exec(Zt);)ne[er[1].toLowerCase()+" "]=(ne[er[1].toLowerCase()+" "]||[]).concat(er[2]);er=ne[Ao.toLowerCase()+" "]}return null==er?null:er.join(", ")},getAllResponseHeaders:function(){return je?Zt:null},setRequestHeader:function(Ao,er){return null==je&&(Ao=$r[Ao.toLowerCase()]=$r[Ao.toLowerCase()]||Ao,wr[Ao]=er),this},overrideMimeType:function(Ao){return null==je&&(ci.mimeType=Ao),this},statusCode:function(Ao){var er;if(Ao)if(je)io.always(Ao[io.status]);else for(er in Ao)Qo[er]=[Qo[er],Ao[er]];return this},abort:function(Ao){var er=Ao||Io;return yt&&yt.abort(er),Ir(0,er),this}};if(cn.promise(io),ci.url=((E||ci.url||gn.href)+"").replace(Ps,gn.protocol+"//"),ci.type=tt.method||tt.type||ci.method||ci.type,ci.dataTypes=(ci.dataType||"*").toLowerCase().match(at)||[""],null==ci.crossDomain){Be=x.createElement("a");try{Be.href=ci.url,Be.href=Be.href,ci.crossDomain=ra.protocol+"//"+ra.host!=Be.protocol+"//"+Be.host}catch{ci.crossDomain=!0}}if(ci.data&&ci.processData&&"string"!=typeof ci.data&&(ci.data=w.param(ci.data,ci.traditional)),Lo(is,ci,tt,io),je)return io;for(vi in(ei=w.event&&ci.global)&&0==w.active++&&w.event.trigger("ajaxStart"),ci.type=ci.type.toUpperCase(),ci.hasContent=!Jo.test(ci.type),St=ci.url.replace(Or,""),ci.hasContent?ci.data&&ci.processData&&0===(ci.contentType||"").indexOf("application/x-www-form-urlencoded")&&(ci.data=ci.data.replace(Hr,"+")):(Li=ci.url.slice(St.length),ci.data&&(ci.processData||"string"==typeof ci.data)&&(St+=(Vs.test(St)?"&":"?")+ci.data,delete ci.data),!1===ci.cache&&(St=St.replace(Cr,"$1"),Li=(Vs.test(St)?"&":"?")+"_="+Tr.guid+++Li),ci.url=St+Li),ci.ifModified&&(w.lastModified[St]&&io.setRequestHeader("If-Modified-Since",w.lastModified[St]),w.etag[St]&&io.setRequestHeader("If-None-Match",w.etag[St])),(ci.data&&ci.hasContent&&!1!==ci.contentType||tt.contentType)&&io.setRequestHeader("Content-Type",ci.contentType),io.setRequestHeader("Accept",ci.dataTypes[0]&&ci.accepts[ci.dataTypes[0]]?ci.accepts[ci.dataTypes[0]]+("*"!==ci.dataTypes[0]?", "+Mr+"; q=0.01":""):ci.accepts["*"]),ci.headers)io.setRequestHeader(vi,ci.headers[vi]);if(ci.beforeSend&&(!1===ci.beforeSend.call(ui,io,ci)||je))return io.abort();if(Io="abort",bn.add(ci.complete),io.done(ci.success),io.fail(ci.error),yt=Lo(oa,ci,tt,io)){if(io.readyState=1,ei&&an.trigger("ajaxSend",[io,ci]),je)return io;ci.async&&0<ci.timeout&&(fe=vt.setTimeout(function(){io.abort("timeout")},ci.timeout));try{je=!1,yt.send(wr,Ir)}catch(Ao){if(je)throw Ao;Ir(-1,Ao)}}else Ir(-1,"No Transport");function Ir(Ao,er,aa,ga){var hr,Jr,js,Ho,Qr,Xo=er;je||(je=!0,fe&&vt.clearTimeout(fe),yt=void 0,Zt=ga||"",io.readyState=0<Ao?4:0,hr=200<=Ao&&Ao<300||304===Ao,aa&&(Ho=function(Go,Rr,sr){for(var ir,Rn,go,Zo,Gr=Go.contents,cr=Go.dataTypes;"*"===cr[0];)cr.shift(),void 0===ir&&(ir=Go.mimeType||Rr.getResponseHeader("Content-Type"));if(ir)for(Rn in Gr)if(Gr[Rn]&&Gr[Rn].test(ir)){cr.unshift(Rn);break}if(cr[0]in sr)go=cr[0];else{for(Rn in sr){if(!cr[0]||Go.converters[Rn+" "+cr[0]]){go=Rn;break}Zo||(Zo=Rn)}go=go||Zo}if(go)return go!==cr[0]&&cr.unshift(go),sr[go]}(ci,io,aa)),!hr&&-1<w.inArray("script",ci.dataTypes)&&w.inArray("json",ci.dataTypes)<0&&(ci.converters["text script"]=function(){}),Ho=function(Go,Rr,sr,ir){var Rn,go,Zo,Gr,cr,co={},la=Go.dataTypes.slice();if(la[1])for(Zo in Go.converters)co[Zo.toLowerCase()]=Go.converters[Zo];for(go=la.shift();go;)if(Go.responseFields[go]&&(sr[Go.responseFields[go]]=Rr),!cr&&ir&&Go.dataFilter&&(Rr=Go.dataFilter(Rr,Go.dataType)),cr=go,go=la.shift())if("*"===go)go=cr;else if("*"!==cr&&cr!==go){if(!(Zo=co[cr+" "+go]||co["* "+go]))for(Rn in co)if((Gr=Rn.split(" "))[1]===go&&(Zo=co[cr+" "+Gr[0]]||co["* "+Gr[0]])){!0===Zo?Zo=co[Rn]:!0!==co[Rn]&&(go=Gr[0],la.unshift(Gr[1]));break}if(!0!==Zo)if(Zo&&Go.throws)Rr=Zo(Rr);else try{Rr=Zo(Rr)}catch(as){return{state:"parsererror",error:Zo?as:"No conversion from "+cr+" to "+go}}}return{state:"success",data:Rr}}(ci,Ho,io,hr),hr?(ci.ifModified&&((Qr=io.getResponseHeader("Last-Modified"))&&(w.lastModified[St]=Qr),(Qr=io.getResponseHeader("etag"))&&(w.etag[St]=Qr)),204===Ao||"HEAD"===ci.type?Xo="nocontent":304===Ao?Xo="notmodified":(Xo=Ho.state,Jr=Ho.data,hr=!(js=Ho.error))):(js=Xo,!Ao&&Xo||(Xo="error",Ao<0&&(Ao=0))),io.status=Ao,io.statusText=(er||Xo)+"",hr?cn.resolveWith(ui,[Jr,Xo,io]):cn.rejectWith(ui,[io,Xo,js]),io.statusCode(Qo),Qo=void 0,ei&&an.trigger(hr?"ajaxSuccess":"ajaxError",[io,ci,hr?Jr:js]),bn.fireWith(ui,[io,Xo]),ei&&(an.trigger("ajaxComplete",[io,ci]),--w.active||w.event.trigger("ajaxStop")))}return io},getJSON:function(E,tt,yt){return w.get(E,tt,yt,"json")},getScript:function(E,tt){return w.get(E,void 0,tt,"script")}}),w.each(["get","post"],function(E,tt){w[tt]=function(yt,St,Zt,ne){return I(St)&&(ne=ne||Zt,Zt=St,St=void 0),w.ajax(w.extend({url:yt,type:tt,dataType:ne,data:St,success:Zt},w.isPlainObject(yt)&&yt))}}),w.ajaxPrefilter(function(E){var tt;for(tt in E.headers)"content-type"===tt.toLowerCase()&&(E.contentType=E.headers[tt]||"")}),w._evalUrl=function(E,tt,yt){return w.ajax({url:E,type:"GET",dataType:"script",cache:!0,async:!1,global:!1,converters:{"text script":function(){}},dataFilter:function(St){w.globalEval(St,tt,yt)}})},w.fn.extend({wrapAll:function(E){var tt;return this[0]&&(I(E)&&(E=E.call(this[0])),tt=w(E,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&tt.insertBefore(this[0]),tt.map(function(){for(var yt=this;yt.firstElementChild;)yt=yt.firstElementChild;return yt}).append(this)),this},wrapInner:function(E){return I(E)?this.each(function(tt){w(this).wrapInner(E.call(this,tt))}):this.each(function(){var tt=w(this),yt=tt.contents();yt.length?yt.wrapAll(E):tt.append(E)})},wrap:function(E){var tt=I(E);return this.each(function(yt){w(this).wrapAll(tt?E.call(this,yt):E)})},unwrap:function(E){return this.parent(E).not("body").each(function(){w(this).replaceWith(this.childNodes)}),this}}),w.expr.pseudos.hidden=function(E){return!w.expr.pseudos.visible(E)},w.expr.pseudos.visible=function(E){return!!(E.offsetWidth||E.offsetHeight||E.getClientRects().length)},w.ajaxSettings.xhr=function(){try{return new vt.XMLHttpRequest}catch{}};var Lr={0:200,1223:204},ks=w.ajaxSettings.xhr();R.cors=!!ks&&"withCredentials"in ks,R.ajax=ks=!!ks,w.ajaxTransport(function(E){var tt,yt;if(R.cors||ks&&!E.crossDomain)return{send:function(St,Zt){var ne,fe=E.xhr();if(fe.open(E.type,E.url,E.async,E.username,E.password),E.xhrFields)for(ne in E.xhrFields)fe[ne]=E.xhrFields[ne];for(ne in E.mimeType&&fe.overrideMimeType&&fe.overrideMimeType(E.mimeType),E.crossDomain||St["X-Requested-With"]||(St["X-Requested-With"]="XMLHttpRequest"),St)fe.setRequestHeader(ne,St[ne]);tt=function(Be){return function(){tt&&(tt=yt=fe.onload=fe.onerror=fe.onabort=fe.ontimeout=fe.onreadystatechange=null,"abort"===Be?fe.abort():"error"===Be?"number"!=typeof fe.status?Zt(0,"error"):Zt(fe.status,fe.statusText):Zt(Lr[fe.status]||fe.status,fe.statusText,"text"!==(fe.responseType||"text")||"string"!=typeof fe.responseText?{binary:fe.response}:{text:fe.responseText},fe.getAllResponseHeaders()))}},fe.onload=tt(),yt=fe.onerror=fe.ontimeout=tt("error"),void 0!==fe.onabort?fe.onabort=yt:fe.onreadystatechange=function(){4===fe.readyState&&vt.setTimeout(function(){tt&&yt()})},tt=tt("abort");try{fe.send(E.hasContent&&E.data||null)}catch(Be){if(tt)throw Be}},abort:function(){tt&&tt()}}}),w.ajaxPrefilter(function(E){E.crossDomain&&(E.contents.script=!1)}),w.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/\b(?:java|ecma)script\b/},converters:{"text script":function(E){return w.globalEval(E),E}}}),w.ajaxPrefilter("script",function(E){void 0===E.cache&&(E.cache=!1),E.crossDomain&&(E.type="GET")}),w.ajaxTransport("script",function(E){var tt,yt;if(E.crossDomain||E.scriptAttrs)return{send:function(St,Zt){tt=w("<script>").attr(E.scriptAttrs||{}).prop({charset:E.scriptCharset,src:E.url}).on("load error",yt=function(ne){tt.remove(),yt=null,ne&&Zt("error"===ne.type?404:200,ne.type)}),x.head.appendChild(tt[0])},abort:function(){yt&&yt()}}});var us,Js=[],ss=/(=)\?(?=&|$)|\?\?/;w.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var E=Js.pop()||w.expando+"_"+Tr.guid++;return this[E]=!0,E}}),w.ajaxPrefilter("json jsonp",function(E,tt,yt){var St,Zt,ne,fe=!1!==E.jsonp&&(ss.test(E.url)?"url":"string"==typeof E.data&&0===(E.contentType||"").indexOf("application/x-www-form-urlencoded")&&ss.test(E.data)&&"data");if(fe||"jsonp"===E.dataTypes[0])return St=E.jsonpCallback=I(E.jsonpCallback)?E.jsonpCallback():E.jsonpCallback,fe?E[fe]=E[fe].replace(ss,"$1"+St):!1!==E.jsonp&&(E.url+=(Vs.test(E.url)?"&":"?")+E.jsonp+"="+St),E.converters["script json"]=function(){return ne||w.error(St+" was not called"),ne[0]},E.dataTypes[0]="json",Zt=vt[St],vt[St]=function(){ne=arguments},yt.always(function(){void 0===Zt?w(vt).removeProp(St):vt[St]=Zt,E[St]&&(E.jsonpCallback=tt.jsonpCallback,Js.push(St)),ne&&I(Zt)&&Zt(ne[0]),ne=Zt=void 0}),"script"}),R.createHTMLDocument=((us=x.implementation.createHTMLDocument("").body).innerHTML="<form></form><form></form>",2===us.childNodes.length),w.parseHTML=function(E,tt,yt){return"string"!=typeof E?[]:("boolean"==typeof tt&&(yt=tt,tt=!1),tt||(R.createHTMLDocument?((St=(tt=x.implementation.createHTMLDocument("")).createElement("base")).href=x.location.href,tt.head.appendChild(St)):tt=x),ne=!yt&&[],(Zt=b.exec(E))?[tt.createElement(Zt[1])]:(Zt=Cn([E],tt,ne),ne&&ne.length&&w(ne).remove(),w.merge([],Zt.childNodes)));var St,Zt,ne},w.fn.load=function(E,tt,yt){var St,Zt,ne,fe=this,Be=E.indexOf(" ");return-1<Be&&(St=Jn(E.slice(Be)),E=E.slice(0,Be)),I(tt)?(yt=tt,tt=void 0):tt&&"object"==typeof tt&&(Zt="POST"),0<fe.length&&w.ajax({url:E,type:Zt||"GET",dataType:"html",data:tt}).done(function(je){ne=arguments,fe.html(St?w("<div>").append(w.parseHTML(je)).find(St):je)}).always(yt&&function(je,ei){fe.each(function(){yt.apply(this,ne||[je.responseText,ei,je])})}),this},w.expr.pseudos.animated=function(E){return w.grep(w.timers,function(tt){return E===tt.elem}).length},w.offset={setOffset:function(E,tt,yt){var St,Zt,ne,fe,Be,je,ei=w.css(E,"position"),vi=w(E),Li={};"static"===ei&&(E.style.position="relative"),Be=vi.offset(),ne=w.css(E,"top"),je=w.css(E,"left"),("absolute"===ei||"fixed"===ei)&&-1<(ne+je).indexOf("auto")?(fe=(St=vi.position()).top,Zt=St.left):(fe=parseFloat(ne)||0,Zt=parseFloat(je)||0),I(tt)&&(tt=tt.call(E,yt,w.extend({},Be))),null!=tt.top&&(Li.top=tt.top-Be.top+fe),null!=tt.left&&(Li.left=tt.left-Be.left+Zt),"using"in tt?tt.using.call(E,Li):vi.css(Li)}},w.fn.extend({offset:function(E){if(arguments.length)return void 0===E?this:this.each(function(Zt){w.offset.setOffset(this,E,Zt)});var tt,yt,St=this[0];return St?St.getClientRects().length?{top:(tt=St.getBoundingClientRect()).top+(yt=St.ownerDocument.defaultView).pageYOffset,left:tt.left+yt.pageXOffset}:{top:0,left:0}:void 0},position:function(){if(this[0]){var E,tt,yt,St=this[0],Zt={top:0,left:0};if("fixed"===w.css(St,"position"))tt=St.getBoundingClientRect();else{for(tt=this.offset(),yt=St.ownerDocument,E=St.offsetParent||yt.documentElement;E&&(E===yt.body||E===yt.documentElement)&&"static"===w.css(E,"position");)E=E.parentNode;E&&E!==St&&1===E.nodeType&&((Zt=w(E).offset()).top+=w.css(E,"borderTopWidth",!0),Zt.left+=w.css(E,"borderLeftWidth",!0))}return{top:tt.top-Zt.top-w.css(St,"marginTop",!0),left:tt.left-Zt.left-w.css(St,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var E=this.offsetParent;E&&"static"===w.css(E,"position");)E=E.offsetParent;return E||me})}}),w.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(E,tt){var yt="pageYOffset"===tt;w.fn[E]=function(St){return dt(this,function(Zt,ne,fe){var Be;if(A(Zt)?Be=Zt:9===Zt.nodeType&&(Be=Zt.defaultView),void 0===fe)return Be?Be[tt]:Zt[ne];Be?Be.scrollTo(yt?Be.pageXOffset:fe,yt?fe:Be.pageYOffset):Zt[ne]=fe},E,St,arguments.length)}}),w.each(["top","left"],function(E,tt){w.cssHooks[tt]=En(R.pixelPosition,function(yt,St){if(St)return St=kn(yt,tt),No.test(St)?w(yt).position()[tt]+"px":St})}),w.each({Height:"height",Width:"width"},function(E,tt){w.each({padding:"inner"+E,content:tt,"":"outer"+E},function(yt,St){w.fn[St]=function(Zt,ne){var fe=arguments.length&&(yt||"boolean"!=typeof Zt),Be=yt||(!0===Zt||!0===ne?"margin":"border");return dt(this,function(je,ei,vi){var Li;return A(je)?0===St.indexOf("outer")?je["inner"+E]:je.document.documentElement["client"+E]:9===je.nodeType?(Li=je.documentElement,Math.max(je.body["scroll"+E],Li["scroll"+E],je.body["offset"+E],Li["offset"+E],Li["client"+E])):void 0===vi?w.css(je,ei,Be):w.style(je,ei,vi,Be)},tt,fe?Zt:void 0,fe)}})}),w.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(E,tt){w.fn[tt]=function(yt){return this.on(tt,yt)}}),w.fn.extend({bind:function(E,tt,yt){return this.on(E,null,tt,yt)},unbind:function(E,tt){return this.off(E,null,tt)},delegate:function(E,tt,yt,St){return this.on(tt,E,yt,St)},undelegate:function(E,tt,yt){return 1===arguments.length?this.off(E,"**"):this.off(tt,E||"**",yt)},hover:function(E,tt){return this.mouseenter(E).mouseleave(tt||E)}}),w.each("blur focus focusin focusout resize scroll click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup contextmenu".split(" "),function(E,tt){w.fn[tt]=function(yt,St){return 0<arguments.length?this.on(tt,null,yt,St):this.trigger(tt)}});var za=/^[\s\uFEFF\xA0]+|([^\s\uFEFF\xA0])[\s\uFEFF\xA0]+$/g;w.proxy=function(E,tt){var yt,St,Zt;if("string"==typeof tt&&(yt=E[tt],tt=E,E=yt),I(E))return St=xt.call(arguments,2),(Zt=function(){return E.apply(tt||this,St.concat(xt.call(arguments)))}).guid=E.guid=E.guid||w.guid++,Zt},w.holdReady=function(E){E?w.readyWait++:w.ready(!0)},w.isArray=Array.isArray,w.parseJSON=JSON.parse,w.nodeName=M,w.isFunction=I,w.isWindow=A,w.camelCase=Lt,w.type=V,w.now=Date.now,w.isNumeric=function(E){var tt=w.type(E);return("number"===tt||"string"===tt)&&!isNaN(E-parseFloat(E))},w.trim=function(E){return null==E?"":(E+"").replace(za,"$1")},"function"==typeof define&&define.amd&&define("jquery",[],function(){return w});var sa=vt.jQuery,Ya=vt.$;return w.noConflict=function(E){return vt.$===w&&(vt.$=Ya),E&&vt.jQuery===w&&(vt.jQuery=sa),w},typeof te>"u"&&(vt.jQuery=vt.$=w),w}),function(vt,te){"object"==typeof exports&&typeof module<"u"?module.exports=te():"function"==typeof define&&define.amd?define(te):(vt=typeof globalThis<"u"?globalThis:vt||self).Chart=te()}(this,function(){"use strict";const vt=typeof window>"u"?function(p){return p()}:window.requestAnimationFrame;function te(p,n,h){const d=h||(D=>Array.prototype.slice.call(D));let g=!1,C=[];return function(...D){C=d(D),g||(g=!0,vt.call(window,()=>{g=!1,p.apply(n,C)}))}}function Ct(p,n){let h;return function(...d){return n?(clearTimeout(h),h=setTimeout(p,n,d)):p.apply(this,d),n}}const wt=p=>"start"===p?"left":"end"===p?"right":"center",xt=(p,n,h)=>"start"===p?n:"end"===p?h:(n+h)/2,jt=(p,n,h,d)=>p===(d?"left":"right")?h:"center"===p?(n+h)/2:n;var zt=new class{constructor(){this._request=null,this._charts=new Map,this._running=!1,this._lastDate=void 0}_notify(p,n,h,d){const C=n.duration;n.listeners[d].forEach(D=>D({chart:p,initial:n.initial,numSteps:C,currentStep:Math.min(h-n.start,C)}))}_refresh(){this._request||(this._running=!0,this._request=vt.call(window,()=>{this._update(),this._request=null,this._running&&this._refresh()}))}_update(p=Date.now()){let n=0;this._charts.forEach((h,d)=>{if(!h.running||!h.items.length)return;const g=h.items;let C,D=g.length-1,J=!1;for(;D>=0;--D)C=g[D],C._active?(C._total>h.duration&&(h.duration=C._total),C.tick(p),J=!0):(g[D]=g[g.length-1],g.pop());J&&(d.draw(),this._notify(d,h,p,"progress")),g.length||(h.running=!1,this._notify(d,h,p,"complete"),h.initial=!1),n+=g.length}),this._lastDate=p,0===n&&(this._running=!1)}_getAnims(p){const n=this._charts;let h=n.get(p);return h||(h={running:!1,initial:!0,items:[],listeners:{complete:[],progress:[]}},n.set(p,h)),h}listen(p,n,h){this._getAnims(p).listeners[n].push(h)}add(p,n){n&&n.length&&this._getAnims(p).items.push(...n)}has(p){return this._getAnims(p).items.length>0}start(p){const n=this._charts.get(p);n&&(n.running=!0,n.start=Date.now(),n.duration=n.items.reduce((h,d)=>Math.max(h,d._duration),0),this._refresh())}running(p){if(!this._running)return!1;const n=this._charts.get(p);return!!(n&&n.running&&n.items.length)}stop(p){const n=this._charts.get(p);if(!n||!n.items.length)return;const h=n.items;let d=h.length-1;for(;d>=0;--d)h[d].cancel();n.items=[],this._notify(p,n,Date.now(),"complete")}remove(p){return this._charts.delete(p)}};const Ut={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15,a:10,b:11,c:12,d:13,e:14,f:15},Rt="0123456789ABCDEF",It=p=>Rt[15&p],K=p=>Rt[(240&p)>>4]+Rt[15&p],et=p=>(240&p)>>4==(15&p);function R(p){return p+.5|0}const I=(p,n,h)=>Math.max(Math.min(p,h),n);function A(p){return I(R(2.55*p),0,255)}function x(p){return I(R(255*p),0,255)}function T(p){return I(R(p/2.55)/100,0,1)}function j(p){return I(R(100*p),0,100)}const V=/^rgba?\(\s*([-+.\d]+)(%)?[\s,]+([-+.e\d]+)(%)?[\s,]+([-+.e\d]+)(%)?(?:[\s,/]+([-+.e\d]+)(%)?)?\s*\)$/,nt=/^(hsla?|hwb|hsv)\(\s*([-+.e\d]+)(?:deg)?[\s,]+([-+.e\d]+)%[\s,]+([-+.e\d]+)%(?:[\s,]+([-+.e\d]+)(%)?)?\s*\)$/;function w(p,n,h){const d=n*Math.min(h,1-h),g=(C,D=(C+p/30)%12)=>h-d*Math.max(Math.min(D-3,9-D,1),-1);return[g(0),g(8),g(4)]}function l(p,n,h){const d=(g,C=(g+p/60)%6)=>h-h*n*Math.max(Math.min(C,4-C,1),0);return[d(5),d(3),d(1)]}function it(p,n,h){const d=w(p,1,.5);let g;for(n+h>1&&(g=1/(n+h),n*=g,h*=g),g=0;g<3;g++)d[g]*=1-n-h,d[g]+=n;return d}function N(p){const n=p.r/255,h=p.g/255,d=p.b/255,g=Math.max(n,h,d),C=Math.min(n,h,d),D=(g+C)/2;let J,ot,ct;return g!==C&&(ct=g-C,ot=D>.5?ct/(2-g-C):ct/(g+C),J=g===n?(h-d)/ct+(h<d?6:0):g===h?(d-n)/ct+2:(n-h)/ct+4,J=60*J+.5),[0|J,ot||0,D]}function G(p,n,h,d){return(Array.isArray(n)?p(n[0],n[1],n[2]):p(n,h,d)).map(x)}function v(p,n,h){return G(w,p,n,h)}function M(p){return(p%360+360)%360}const k={x:"dark",Z:"light",Y:"re",X:"blu",W:"gr",V:"medium",U:"slate",A:"ee",T:"ol",S:"or",B:"ra",C:"lateg",D:"ights",R:"in",Q:"turquois",E:"hi",P:"ro",O:"al",N:"le",M:"de",L:"yello",F:"en",K:"ch",G:"arks",H:"ea",I:"ightg",J:"wh"},_={OiceXe:"f0f8ff",antiquewEte:"faebd7",aqua:"ffff",aquamarRe:"7fffd4",azuY:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"0",blanKedOmond:"ffebcd",Xe:"ff",XeviTet:"8a2be2",bPwn:"a52a2a",burlywood:"deb887",caMtXe:"5f9ea0",KartYuse:"7fff00",KocTate:"d2691e",cSO:"ff7f50",cSnflowerXe:"6495ed",cSnsilk:"fff8dc",crimson:"dc143c",cyan:"ffff",xXe:"8b",xcyan:"8b8b",xgTMnPd:"b8860b",xWay:"a9a9a9",xgYF:"6400",xgYy:"a9a9a9",xkhaki:"bdb76b",xmagFta:"8b008b",xTivegYF:"556b2f",xSange:"ff8c00",xScEd:"9932cc",xYd:"8b0000",xsOmon:"e9967a",xsHgYF:"8fbc8f",xUXe:"483d8b",xUWay:"2f4f4f",xUgYy:"2f4f4f",xQe:"ced1",xviTet:"9400d3",dAppRk:"ff1493",dApskyXe:"bfff",dimWay:"696969",dimgYy:"696969",dodgerXe:"1e90ff",fiYbrick:"b22222",flSOwEte:"fffaf0",foYstWAn:"228b22",fuKsia:"ff00ff",gaRsbSo:"dcdcdc",ghostwEte:"f8f8ff",gTd:"ffd700",gTMnPd:"daa520",Way:"808080",gYF:"8000",gYFLw:"adff2f",gYy:"808080",honeyMw:"f0fff0",hotpRk:"ff69b4",RdianYd:"cd5c5c",Rdigo:"4b0082",ivSy:"fffff0",khaki:"f0e68c",lavFMr:"e6e6fa",lavFMrXsh:"fff0f5",lawngYF:"7cfc00",NmoncEffon:"fffacd",ZXe:"add8e6",ZcSO:"f08080",Zcyan:"e0ffff",ZgTMnPdLw:"fafad2",ZWay:"d3d3d3",ZgYF:"90ee90",ZgYy:"d3d3d3",ZpRk:"ffb6c1",ZsOmon:"ffa07a",ZsHgYF:"20b2aa",ZskyXe:"87cefa",ZUWay:"778899",ZUgYy:"778899",ZstAlXe:"b0c4de",ZLw:"ffffe0",lime:"ff00",limegYF:"32cd32",lRF:"faf0e6",magFta:"ff00ff",maPon:"800000",VaquamarRe:"66cdaa",VXe:"cd",VScEd:"ba55d3",VpurpN:"9370db",VsHgYF:"3cb371",VUXe:"7b68ee",VsprRggYF:"fa9a",VQe:"48d1cc",VviTetYd:"c71585",midnightXe:"191970",mRtcYam:"f5fffa",mistyPse:"ffe4e1",moccasR:"ffe4b5",navajowEte:"ffdead",navy:"80",Tdlace:"fdf5e6",Tive:"808000",TivedBb:"6b8e23",Sange:"ffa500",SangeYd:"ff4500",ScEd:"da70d6",pOegTMnPd:"eee8aa",pOegYF:"98fb98",pOeQe:"afeeee",pOeviTetYd:"db7093",papayawEp:"ffefd5",pHKpuff:"ffdab9",peru:"cd853f",pRk:"ffc0cb",plum:"dda0dd",powMrXe:"b0e0e6",purpN:"800080",YbeccapurpN:"663399",Yd:"ff0000",Psybrown:"bc8f8f",PyOXe:"4169e1",saddNbPwn:"8b4513",sOmon:"fa8072",sandybPwn:"f4a460",sHgYF:"2e8b57",sHshell:"fff5ee",siFna:"a0522d",silver:"c0c0c0",skyXe:"87ceeb",UXe:"6a5acd",UWay:"708090",UgYy:"708090",snow:"fffafa",sprRggYF:"ff7f",stAlXe:"4682b4",tan:"d2b48c",teO:"8080",tEstN:"d8bfd8",tomato:"ff6347",Qe:"40e0d0",viTet:"ee82ee",JHt:"f5deb3",wEte:"ffffff",wEtesmoke:"f5f5f5",Lw:"ffff00",LwgYF:"9acd32"};let y;function B(p,n,h){if(p){let d=N(p);d[n]=Math.max(0,Math.min(d[n]+d[n]*h,0===n?360:1)),d=v(d),p.r=d[0],p.g=d[1],p.b=d[2]}}function H(p,n){return p&&Object.assign(n||{},p)}function at(p){var n={r:0,g:0,b:0,a:255};return Array.isArray(p)?p.length>=3&&(n={r:p[0],g:p[1],b:p[2],a:255},p.length>3&&(n.a=x(p[3]))):(n=H(p,{r:0,g:0,b:0,a:1})).a=x(n.a),n}class rt{constructor(n){if(n instanceof rt)return n;const h=typeof n;let d;var g,C,D;"object"===h?d=at(n):"string"===h&&(D=(g=n).length,"#"===g[0]&&(4===D||5===D?C={r:255&17*Ut[g[1]],g:255&17*Ut[g[2]],b:255&17*Ut[g[3]],a:5===D?17*Ut[g[4]]:255}:7!==D&&9!==D||(C={r:Ut[g[1]]<<4|Ut[g[2]],g:Ut[g[3]]<<4|Ut[g[4]],b:Ut[g[5]]<<4|Ut[g[6]],a:9===D?Ut[g[7]]<<4|Ut[g[8]]:255})),d=C||function O(p){y||(y=function(){const h={},d=Object.keys(_),g=Object.keys(k);let C,D,J,ot,ct;for(C=0;C<d.length;C++){for(ot=ct=d[C],D=0;D<g.length;D++)J=g[D],ct=ct.replace(J,k[J]);J=parseInt(_[ot],16),h[ct]=[J>>16&255,J>>8&255,255&J]}return h}(),y.transparent=[0,0,0,0]);const n=y[p.toLowerCase()];return n&&{r:n[0],g:n[1],b:n[2],a:4===n.length?n[3]:255}}(n)||function ft(p){return"r"===p.charAt(0)?function(n){const h=V.exec(n);let d,g,C,D=255;if(h){if(h[7]!==d){const J=+h[7];D=255&(h[8]?A(J):255*J)}return d=+h[1],g=+h[3],C=+h[5],d=255&(h[2]?A(d):d),g=255&(h[4]?A(g):g),C=255&(h[6]?A(C):C),{r:d,g,b:C,a:D}}}(p):function b(p){const n=nt.exec(p);let h,d=255;if(!n)return;n[5]!==h&&(d=n[6]?A(+n[5]):x(+n[5]));const g=M(+n[2]),C=+n[3]/100,D=+n[4]/100;return h="hwb"===n[1]?G(it,g,C,D):"hsv"===n[1]?G(l,g,C,D):v(g,C,D),{r:h[0],g:h[1],b:h[2],a:d}}(p)}(n)),this._rgb=d,this._valid=!!d}get valid(){return this._valid}get rgb(){var n=H(this._rgb);return n&&(n.a=T(n.a)),n}set rgb(n){this._rgb=at(n)}rgbString(){return this._valid?(n=this._rgb)&&(n.a<255?`rgba(${n.r}, ${n.g}, ${n.b}, ${T(n.a)})`:`rgb(${n.r}, ${n.g}, ${n.b})`):this._rgb;var n}hexString(){return this._valid?function st(p){var h,n=et((h=p).r)&&et(h.g)&&et(h.b)&&et(h.a)?It:K;return p&&"#"+n(p.r)+n(p.g)+n(p.b)+(p.a<255?n(p.a):"")}(this._rgb):this._rgb}hslString(){return this._valid?function(n){if(!n)return;const h=N(n),d=h[0],g=j(h[1]),C=j(h[2]);return n.a<255?`hsla(${d}, ${g}%, ${C}%, ${T(n.a)})`:`hsl(${d}, ${g}%, ${C}%)`}(this._rgb):this._rgb}mix(n,h){const d=this;if(n){const g=d.rgb,C=n.rgb;let D;const J=h===D?.5:h,ot=2*J-1,ct=g.a-C.a,Pt=((ot*ct==-1?ot:(ot+ct)/(1+ot*ct))+1)/2;D=1-Pt,g.r=255&Pt*g.r+D*C.r+.5,g.g=255&Pt*g.g+D*C.g+.5,g.b=255&Pt*g.b+D*C.b+.5,g.a=J*g.a+(1-J)*C.a,d.rgb=g}return d}clone(){return new rt(this.rgb)}alpha(n){return this._rgb.a=x(n),this}clearer(n){return this._rgb.a*=1-n,this}greyscale(){const n=this._rgb,h=R(.3*n.r+.59*n.g+.11*n.b);return n.r=n.g=n.b=h,this}opaquer(n){return this._rgb.a*=1+n,this}negate(){const n=this._rgb;return n.r=255-n.r,n.g=255-n.g,n.b=255-n.b,this}lighten(n){return B(this._rgb,2,n),this}darken(n){return B(this._rgb,2,-n),this}saturate(n){return B(this._rgb,1,n),this}desaturate(n){return B(this._rgb,1,-n),this}rotate(n){return d=n,(g=N(h=this._rgb))[0]=M(g[0]+d),g=v(g),h.r=g[0],h.g=g[1],h.b=g[2],this;var h,d,g}}function z(p){return new rt(p)}const q=p=>p instanceof CanvasGradient||p instanceof CanvasPattern;function mt(p){return q(p)?p:z(p)}function pt(p){return q(p)?p:z(p).saturate(.5).darken(.1).hexString()}function dt(){}const Y=function(){let p=0;return function(){return p++}}();function lt(p){return null==p}function ht(p){if(Array.isArray&&Array.isArray(p))return!0;const n=Object.prototype.toString.call(p);return"[object"===n.substr(0,7)&&"Array]"===n.substr(-6)}function Lt(p){return null!==p&&"[object Object]"===Object.prototype.toString.call(p)}const At=p=>("number"==typeof p||p instanceof Number)&&isFinite(+p);function Wt(p,n){return At(p)?p:n}function Ot(p,n){return void 0===p?n:p}const se=(p,n)=>"string"==typeof p&&p.endsWith("%")?parseFloat(p)/100:p/n,_e=(p,n)=>"string"==typeof p&&p.endsWith("%")?parseFloat(p)/100*n:+p;function We(p,n,h){if(p&&"function"==typeof p.call)return p.apply(h,n)}function He(p,n,h,d){let g,C,D;if(ht(p))if(C=p.length,d)for(g=C-1;g>=0;g--)n.call(h,p[g],g);else for(g=0;g<C;g++)n.call(h,p[g],g);else if(Lt(p))for(D=Object.keys(p),C=D.length,g=0;g<C;g++)n.call(h,p[D[g]],D[g])}function Fe(p,n){let h,d,g,C;if(!p||!n||p.length!==n.length)return!1;for(h=0,d=p.length;h<d;++h)if(g=p[h],C=n[h],g.datasetIndex!==C.datasetIndex||g.index!==C.index)return!1;return!0}function pe(p){if(ht(p))return p.map(pe);if(Lt(p)){const n=Object.create(null),h=Object.keys(p),d=h.length;let g=0;for(;g<d;++g)n[h[g]]=pe(p[h[g]]);return n}return p}function Me(p){return-1===["__proto__","prototype","constructor"].indexOf(p)}function me(p,n,h,d){if(!Me(p))return;const g=n[p],C=h[p];Lt(g)&&Lt(C)?qt(g,C,d):n[p]=pe(C)}function qt(p,n,h){const d=ht(n)?n:[n],g=d.length;if(!Lt(p))return p;const C=(h=h||{}).merger||me;for(let D=0;D<g;++D){if(!Lt(n=d[D]))continue;const J=Object.keys(n);for(let ot=0,ct=J.length;ot<ct;++ot)C(J[ot],p,n,h)}return p}function Kt(p,n){return qt(p,n,{merger:xe})}function xe(p,n,h){if(!Me(p))return;const d=n[p],g=h[p];Lt(d)&&Lt(g)?Kt(d,g):Object.prototype.hasOwnProperty.call(n,p)||(n[p]=pe(g))}function be(p,n){const h=p.indexOf(".",n);return-1===h?p.length:h}function Te(p,n){if(""===n)return p;let h=0,d=be(n,h);for(;p&&d>h;)p=p[n.substr(h,d-h)],h=d+1,d=be(n,h);return p}function ye(p){return p.charAt(0).toUpperCase()+p.slice(1)}const oi=p=>void 0!==p,fi=p=>"function"==typeof p,tn=(p,n)=>{if(p.size!==n.size)return!1;for(const h of p)if(!n.has(h))return!1;return!0};function Ii(p){return"mouseup"===p.type||"click"===p.type||"contextmenu"===p.type}const Pi=Object.create(null),Ji=Object.create(null);function Mi(p,n){if(!n)return p;const h=n.split(".");for(let d=0,g=h.length;d<g;++d){const C=h[d];p=p[C]||(p[C]=Object.create(null))}return p}function nn(p,n,h){return"string"==typeof n?qt(Mi(p,n),h):qt(Mi(p,""),n)}var Ti=new class{constructor(p){this.animation=void 0,this.backgroundColor="rgba(0,0,0,0.1)",this.borderColor="rgba(0,0,0,0.1)",this.color="#666",this.datasets={},this.devicePixelRatio=n=>n.chart.platform.getDevicePixelRatio(),this.elements={},this.events=["mousemove","mouseout","click","touchstart","touchmove"],this.font={family:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",size:12,style:"normal",lineHeight:1.2,weight:null},this.hover={},this.hoverBackgroundColor=(n,h)=>pt(h.backgroundColor),this.hoverBorderColor=(n,h)=>pt(h.borderColor),this.hoverColor=(n,h)=>pt(h.color),this.indexAxis="x",this.interaction={mode:"nearest",intersect:!0},this.maintainAspectRatio=!0,this.onHover=null,this.onClick=null,this.parsing=!0,this.plugins={},this.responsive=!0,this.scale=void 0,this.scales={},this.showLine=!0,this.drawActiveElementsOnTop=!0,this.describe(p)}set(p,n){return nn(this,p,n)}get(p){return Mi(this,p)}describe(p,n){return nn(Ji,p,n)}override(p,n){return nn(Pi,p,n)}route(p,n,h,d){const g=Mi(this,p),C=Mi(this,h),D="_"+n;Object.defineProperties(g,{[D]:{value:g[n],writable:!0},[n]:{enumerable:!0,get(){const J=this[D],ot=C[d];return Lt(J)?Object.assign({},ot,J):Ot(J,ot)},set(J){this[D]=J}}})}}({_scriptable:p=>!p.startsWith("on"),_indexable:p=>"events"!==p,hover:{_fallback:"interaction"},interaction:{_scriptable:!1,_indexable:!1}});const Cn=Math.PI,wn=2*Cn,X=wn+Cn,bt=Number.POSITIVE_INFINITY,Gt=Cn/180,ee=Cn/2,we=Cn/4,Ye=2*Cn/3,xi=Math.log10,Ui=Math.sign;function hn(p){const n=Math.round(p);p=qo(p,n,p/1e3)?n:p;const h=Math.pow(10,Math.floor(xi(p))),d=p/h;return(d<=1?1:d<=2?2:d<=5?5:10)*h}function Fn(p){const n=[],h=Math.sqrt(p);let d;for(d=1;d<h;d++)p%d==0&&(n.push(d),n.push(p/d));return h===(0|h)&&n.push(h),n.sort((g,C)=>g-C).pop(),n}function Mo(p){return!isNaN(parseFloat(p))&&isFinite(p)}function qo(p,n,h){return Math.abs(p-n)<h}function Oo(p,n){const h=Math.round(p);return h-n<=p&&h+n>=p}function Dr(p,n,h){let d,g,C;for(d=0,g=p.length;d<g;d++)C=p[d][h],isNaN(C)||(n.min=Math.min(n.min,C),n.max=Math.max(n.max,C))}function No(p){return p*(Cn/180)}function po(p){return p*(180/Cn)}function ko(p){if(!At(p))return;let n=1,h=0;for(;Math.round(p*n)/n!==p;)n*=10,h++;return h}function Kr(p,n){const h=n.x-p.x,d=n.y-p.y,g=Math.sqrt(h*h+d*d);let C=Math.atan2(d,h);return C<-.5*Cn&&(C+=wn),{angle:C,distance:g}}function dr(p,n){return Math.sqrt(Math.pow(n.x-p.x,2)+Math.pow(n.y-p.y,2))}function gr(p,n){return(p-n+X)%wn-Cn}function lr(p){return(p%wn+wn)%wn}function kn(p,n,h,d){const g=lr(p),C=lr(n),D=lr(h),J=lr(C-g),ot=lr(D-g),ct=lr(g-C),Pt=lr(g-D);return g===C||g===D||d&&C===D||J>ot&&ct<Pt}function En(p,n,h){return Math.max(n,Math.min(h,p))}function Ft(p){return En(p,-32768,32767)}function Yt(p,n,h,d=1e-6){return p>=Math.min(n,h)-d&&p<=Math.max(n,h)+d}function Jt(p){return!p||lt(p.size)||lt(p.family)?null:(p.style?p.style+" ":"")+(p.weight?p.weight+" ":"")+p.size+"px "+p.family}function he(p,n,h,d,g){let C=n[g];return C||(C=n[g]=p.measureText(g).width,h.push(g)),C>d&&(d=C),d}function Ce(p,n,h,d){let g=(d=d||{}).data=d.data||{},C=d.garbageCollect=d.garbageCollect||[];d.font!==n&&(g=d.data={},C=d.garbageCollect=[],d.font=n),p.save(),p.font=n;let D=0;const J=h.length;let ot,ct,Pt,Mt,Vt;for(ot=0;ot<J;ot++)if(Mt=h[ot],null!=Mt&&!0!==ht(Mt))D=he(p,g,C,D,Mt);else if(ht(Mt))for(ct=0,Pt=Mt.length;ct<Pt;ct++)Vt=Mt[ct],null==Vt||ht(Vt)||(D=he(p,g,C,D,Vt));p.restore();const Qt=C.length/2;if(Qt>h.length){for(ot=0;ot<Qt;ot++)delete g[C[ot]];C.splice(0,Qt)}return D}function De(p,n,h){const d=p.currentDevicePixelRatio,g=0!==h?Math.max(h/2,.5):0;return Math.round((n-g)*d)/d+g}function Ge(p,n){(n=n||p.getContext("2d")).save(),n.resetTransform(),n.clearRect(0,0,p.width,p.height),n.restore()}function oe(p,n,h,d){let g,C,D,J,ot;const ct=n.pointStyle,Pt=n.rotation,Mt=n.radius;let Vt=(Pt||0)*Gt;if(ct&&"object"==typeof ct&&(g=ct.toString(),"[object HTMLImageElement]"===g||"[object HTMLCanvasElement]"===g))return p.save(),p.translate(h,d),p.rotate(Vt),p.drawImage(ct,-ct.width/2,-ct.height/2,ct.width,ct.height),void p.restore();if(!(isNaN(Mt)||Mt<=0)){switch(p.beginPath(),ct){default:p.arc(h,d,Mt,0,wn),p.closePath();break;case"triangle":p.moveTo(h+Math.sin(Vt)*Mt,d-Math.cos(Vt)*Mt),Vt+=Ye,p.lineTo(h+Math.sin(Vt)*Mt,d-Math.cos(Vt)*Mt),Vt+=Ye,p.lineTo(h+Math.sin(Vt)*Mt,d-Math.cos(Vt)*Mt),p.closePath();break;case"rectRounded":ot=.516*Mt,J=Mt-ot,C=Math.cos(Vt+we)*J,D=Math.sin(Vt+we)*J,p.arc(h-C,d-D,ot,Vt-Cn,Vt-ee),p.arc(h+D,d-C,ot,Vt-ee,Vt),p.arc(h+C,d+D,ot,Vt,Vt+ee),p.arc(h-D,d+C,ot,Vt+ee,Vt+Cn),p.closePath();break;case"rect":if(!Pt){J=Math.SQRT1_2*Mt,p.rect(h-J,d-J,2*J,2*J);break}Vt+=we;case"rectRot":C=Math.cos(Vt)*Mt,D=Math.sin(Vt)*Mt,p.moveTo(h-C,d-D),p.lineTo(h+D,d-C),p.lineTo(h+C,d+D),p.lineTo(h-D,d+C),p.closePath();break;case"crossRot":Vt+=we;case"cross":C=Math.cos(Vt)*Mt,D=Math.sin(Vt)*Mt,p.moveTo(h-C,d-D),p.lineTo(h+C,d+D),p.moveTo(h+D,d-C),p.lineTo(h-D,d+C);break;case"star":C=Math.cos(Vt)*Mt,D=Math.sin(Vt)*Mt,p.moveTo(h-C,d-D),p.lineTo(h+C,d+D),p.moveTo(h+D,d-C),p.lineTo(h-D,d+C),Vt+=we,C=Math.cos(Vt)*Mt,D=Math.sin(Vt)*Mt,p.moveTo(h-C,d-D),p.lineTo(h+C,d+D),p.moveTo(h+D,d-C),p.lineTo(h-D,d+C);break;case"line":C=Math.cos(Vt)*Mt,D=Math.sin(Vt)*Mt,p.moveTo(h-C,d-D),p.lineTo(h+C,d+D);break;case"dash":p.moveTo(h,d),p.lineTo(h+Math.cos(Vt)*Mt,d+Math.sin(Vt)*Mt)}p.fill(),n.borderWidth>0&&p.stroke()}}function Ee(p,n,h){return h=h||.5,!n||p&&p.x>n.left-h&&p.x<n.right+h&&p.y>n.top-h&&p.y<n.bottom+h}function ii(p,n){p.save(),p.beginPath(),p.rect(n.left,n.top,n.right-n.left,n.bottom-n.top),p.clip()}function Si(p){p.restore()}function Oi(p,n,h,d,g){if(!n)return p.lineTo(h.x,h.y);if("middle"===g){const C=(n.x+h.x)/2;p.lineTo(C,n.y),p.lineTo(C,h.y)}else"after"===g!=!!d?p.lineTo(n.x,h.y):p.lineTo(h.x,n.y);p.lineTo(h.x,h.y)}function di(p,n,h,d){if(!n)return p.lineTo(h.x,h.y);p.bezierCurveTo(d?n.cp1x:n.cp2x,d?n.cp1y:n.cp2y,d?h.cp2x:h.cp1x,d?h.cp2y:h.cp1y,h.x,h.y)}function hi(p,n,h,d,g,C={}){const D=ht(n)?n:[n],J=C.strokeWidth>0&&""!==C.strokeColor;let ot,ct;for(p.save(),p.font=g.string,Pt=p,(Mt=C).translation&&Pt.translate(Mt.translation[0],Mt.translation[1]),lt(Mt.rotation)||Pt.rotate(Mt.rotation),Mt.color&&(Pt.fillStyle=Mt.color),Mt.textAlign&&(Pt.textAlign=Mt.textAlign),Mt.textBaseline&&(Pt.textBaseline=Mt.textBaseline),ot=0;ot<D.length;++ot)ct=D[ot],J&&(C.strokeColor&&(p.strokeStyle=C.strokeColor),lt(C.strokeWidth)||(p.lineWidth=C.strokeWidth),p.strokeText(ct,h,d,C.maxWidth)),p.fillText(ct,h,d,C.maxWidth),sn(p,h,d,ct,C),d+=g.lineHeight;var Pt,Mt;p.restore()}function sn(p,n,h,d,g){if(g.strikethrough||g.underline){const C=p.measureText(d),D=n-C.actualBoundingBoxLeft,J=n+C.actualBoundingBoxRight,ot=h-C.actualBoundingBoxAscent,ct=h+C.actualBoundingBoxDescent,Pt=g.strikethrough?(ot+ct)/2:ct;p.strokeStyle=p.fillStyle,p.beginPath(),p.lineWidth=g.decorationWidth||2,p.moveTo(D,Pt),p.lineTo(J,Pt),p.stroke()}}function Fi(p,n){const{x:h,y:d,w:g,h:C,radius:D}=n;p.arc(h+D.topLeft,d+D.topLeft,D.topLeft,-ee,Cn,!0),p.lineTo(h,d+C-D.bottomLeft),p.arc(h+D.bottomLeft,d+C-D.bottomLeft,D.bottomLeft,Cn,ee,!0),p.lineTo(h+g-D.bottomRight,d+C),p.arc(h+g-D.bottomRight,d+C-D.bottomRight,D.bottomRight,ee,0,!0),p.lineTo(h+g,d+D.topRight),p.arc(h+g-D.topRight,d+D.topRight,D.topRight,0,-ee,!0),p.lineTo(h+D.topLeft,d)}function yi(p,n,h){h=h||(D=>p[D]<n);let d,g=p.length-1,C=0;for(;g-C>1;)d=C+g>>1,h(d)?C=d:g=d;return{lo:C,hi:g}}const Zi=(p,n,h)=>yi(p,h,d=>p[d][n]<h),Yi=(p,n,h)=>yi(p,h,d=>p[d][n]>=h);function Ki(p,n,h){let d=0,g=p.length;for(;d<g&&p[d]<n;)d++;for(;g>d&&p[g-1]>h;)g--;return d>0||g<p.length?p.slice(d,g):p}const Nn=["push","pop","shift","splice","unshift"];function Vi(p,n){p._chartjs?p._chartjs.listeners.push(n):(Object.defineProperty(p,"_chartjs",{configurable:!0,enumerable:!1,value:{listeners:[n]}}),Nn.forEach(h=>{const d="_onData"+ye(h),g=p[h];Object.defineProperty(p,h,{configurable:!0,enumerable:!1,value(...C){const D=g.apply(this,C);return p._chartjs.listeners.forEach(J=>{"function"==typeof J[d]&&J[d](...C)}),D}})}))}function so(p,n){const h=p._chartjs;if(!h)return;const d=h.listeners,g=d.indexOf(n);-1!==g&&d.splice(g,1),d.length>0||(Nn.forEach(C=>{delete p[C]}),delete p._chartjs)}function Hn(p){const n=new Set;let h,d;for(h=0,d=p.length;h<d;++h)n.add(p[h]);return n.size===d?p:Array.from(n)}function Gn(){return typeof window<"u"&&typeof document<"u"}function vo(p){let n=p.parentNode;return n&&"[object ShadowRoot]"===n.toString()&&(n=n.host),n}function Jn(p,n,h){let d;return"string"==typeof p?(d=parseInt(p,10),-1!==p.indexOf("%")&&(d=d/100*n.parentNode[h])):d=p,d}const yr=p=>window.getComputedStyle(p,null);function Co(p,n){return yr(p).getPropertyValue(n)}const vr=["top","right","bottom","left"];function bo(p,n,h){const d={};h=h?"-"+h:"";for(let g=0;g<4;g++){const C=vr[g];d[C]=parseFloat(p[n+"-"+C+h])||0}return d.width=d.left+d.right,d.height=d.top+d.bottom,d}function ao(p,n){const{canvas:h,currentDevicePixelRatio:d}=n,g=yr(h),C="border-box"===g.boxSizing,D=bo(g,"padding"),J=bo(g,"border","width"),{x:ot,y:ct,box:Pt}=function(ge,Ae){const Ue=ge.native||ge,Je=Ue.touches,ai=Je&&Je.length?Je[0]:Ue,{offsetX:pi,offsetY:Ei}=ai;let ln,pn,On=!1;if(Xn=Ue.target,!(pi>0||Ei>0)||Xn&&Xn.shadowRoot){const jn=Ae.getBoundingClientRect();ln=ai.clientX-jn.left,pn=ai.clientY-jn.top,On=!0}else ln=pi,pn=Ei;var Xn;return{x:ln,y:pn,box:On}}(p,h),Mt=D.left+(Pt&&J.left),Vt=D.top+(Pt&&J.top);let{width:Qt,height:ue}=n;return C&&(Qt-=D.width+J.width,ue-=D.height+J.height),{x:Math.round((ot-Mt)/Qt*h.width/d),y:Math.round((ct-Vt)/ue*h.height/d)}}const gn=p=>Math.round(10*p)/10;function Tr(p,n,h,d){const g=yr(p),C=bo(g,"margin"),D=Jn(g.maxWidth,p,"clientWidth")||bt,J=Jn(g.maxHeight,p,"clientHeight")||bt,ot=function(Mt,Vt,Qt){let ue,ge;if(void 0===Vt||void 0===Qt){const Ae=vo(Mt);if(Ae){const Ue=Ae.getBoundingClientRect(),Je=yr(Ae),ai=bo(Je,"border","width"),pi=bo(Je,"padding");Vt=Ue.width-pi.width-ai.width,Qt=Ue.height-pi.height-ai.height,ue=Jn(Je.maxWidth,Ae,"clientWidth"),ge=Jn(Je.maxHeight,Ae,"clientHeight")}else Vt=Mt.clientWidth,Qt=Mt.clientHeight}return{width:Vt,height:Qt,maxWidth:ue||bt,maxHeight:ge||bt}}(p,n,h);let{width:ct,height:Pt}=ot;if("content-box"===g.boxSizing){const Mt=bo(g,"border","width"),Vt=bo(g,"padding");ct-=Vt.width+Mt.width,Pt-=Vt.height+Mt.height}return ct=Math.max(0,ct-C.width),Pt=Math.max(0,d?Math.floor(ct/d):Pt-C.height),ct=gn(Math.min(ct,D,ot.maxWidth)),Pt=gn(Math.min(Pt,J,ot.maxHeight)),ct&&!Pt&&(Pt=gn(ct/2)),{width:ct,height:Pt}}function Vs(p,n,h){const d=n||1,g=Math.floor(p.height*d),C=Math.floor(p.width*d);p.height=g/d,p.width=C/d;const D=p.canvas;return D.style&&(h||!D.style.height&&!D.style.width)&&(D.style.height=`${p.height}px`,D.style.width=`${p.width}px`),(p.currentDevicePixelRatio!==d||D.height!==g||D.width!==C)&&(p.currentDevicePixelRatio=d,D.height=g,D.width=C,p.ctx.setTransform(d,0,0,d,0,0),!0)}const Uo=function(){let p=!1;try{const n={get passive(){return p=!0,!1}};window.addEventListener("test",null,n),window.removeEventListener("test",null,n)}catch{}return p}();function zr(p,n){const h=Co(p,n),d=h&&h.match(/^(\d+)(\.\d+)?px$/);return d?+d[1]:void 0}function $s(p,n){return"native"in p?{x:p.x,y:p.y}:ao(p,n)}function wa(p,n,h,d){const{controller:g,data:C,_sorted:D}=p,J=g._cachedMeta.iScale;if(J&&n===J.axis&&"r"!==n&&D&&C.length){const ot=J._reversePixels?Yi:Zi;if(!d)return ot(C,n,h);if(g._sharedOptions){const ct=C[0],Pt="function"==typeof ct.getRange&&ct.getRange(n);if(Pt){const Mt=ot(C,n,h-Pt),Vt=ot(C,n,h+Pt);return{lo:Mt.lo,hi:Vt.hi}}}}return{lo:0,hi:C.length-1}}function Vo(p,n,h,d,g){const C=p.getSortedVisibleDatasetMetas(),D=h[n];for(let J=0,ot=C.length;J<ot;++J){const{index:ct,data:Pt}=C[J],{lo:Mt,hi:Vt}=wa(C[J],n,D,g);for(let Qt=Mt;Qt<=Vt;++Qt){const ue=Pt[Qt];ue.skip||d(ue,ct,Qt)}}}function Hr(p,n,h,d){const g=[];return Ee(n,p.chartArea,p._minPadding)&&Vo(p,h,n,function(C,D,J){C.inRange(n.x,n.y,d)&&g.push({element:C,datasetIndex:D,index:J})},!0),g}function Cr(p,n,h,d,g){return Ee(n,p.chartArea,p._minPadding)?"r"!==h||d?function Or(p,n,h,d,g){let C=[];const D=function(ot){const ct=-1!==ot.indexOf("x"),Pt=-1!==ot.indexOf("y");return function(Mt,Vt){const Qt=ct?Math.abs(Mt.x-Vt.x):0,ue=Pt?Math.abs(Mt.y-Vt.y):0;return Math.sqrt(Math.pow(Qt,2)+Math.pow(ue,2))}}(h);let J=Number.POSITIVE_INFINITY;return Vo(p,h,n,function(ot,ct,Pt){const Mt=ot.inRange(n.x,n.y,g);if(d&&!Mt)return;const Vt=ot.getCenterPoint(g);if(!Ee(Vt,p.chartArea,p._minPadding)&&!Mt)return;const Qt=D(n,Vt);Qt<J?(C=[{element:ot,datasetIndex:ct,index:Pt}],J=Qt):Qt===J&&C.push({element:ot,datasetIndex:ct,index:Pt})}),C}(p,n,h,d,g):function(C,D,J,ot){let ct=[];return Vo(C,J,D,function(Pt,Mt,Vt){const{startAngle:Qt,endAngle:ue}=Pt.getProps(["startAngle","endAngle"],ot),{angle:ge}=Kr(Pt,{x:D.x,y:D.y});kn(ge,Qt,ue)&&ct.push({element:Pt,datasetIndex:Mt,index:Vt})}),ct}(p,n,h,g):[]}function Br(p,n,h,d){const g=$s(n,p),C=[],D=h.axis,J="x"===D?"inXRange":"inYRange";let ot=!1;return function(ct,Pt){const Mt=ct.getSortedVisibleDatasetMetas();let Vt,Qt,ue;for(let ge=0,Ae=Mt.length;ge<Ae;++ge){({index:Vt,data:Qt}=Mt[ge]);for(let Ue=0,Je=Qt.length;Ue<Je;++Ue)ue=Qt[Ue],ue.skip||Pt(ue,Vt,Ue)}}(p,(ct,Pt,Mt)=>{ct[J](g[D],d)&&C.push({element:ct,datasetIndex:Pt,index:Mt}),ct.inRange(g.x,g.y,d)&&(ot=!0)}),h.intersect&&!ot?[]:C}var Jo={modes:{index(p,n,h,d){const g=$s(n,p),C=h.axis||"x",D=h.intersect?Hr(p,g,C,d):Cr(p,g,C,!1,d),J=[];return D.length?(p.getSortedVisibleDatasetMetas().forEach(ot=>{const ct=D[0].index,Pt=ot.data[ct];Pt&&!Pt.skip&&J.push({element:Pt,datasetIndex:ot.index,index:ct})}),J):[]},dataset(p,n,h,d){const g=$s(n,p),C=h.axis||"xy";let D=h.intersect?Hr(p,g,C,d):Cr(p,g,C,!1,d);if(D.length>0){const J=D[0].datasetIndex,ot=p.getDatasetMeta(J).data;D=[];for(let ct=0;ct<ot.length;++ct)D.push({element:ot[ct],datasetIndex:J,index:ct})}return D},point:(p,n,h,d)=>Hr(p,$s(n,p),h.axis||"xy",d),nearest:(p,n,h,d)=>Cr(p,$s(n,p),h.axis||"xy",h.intersect,d),x:(p,n,h,d)=>Br(p,n,{axis:"x",intersect:h.intersect},d),y:(p,n,h,d)=>Br(p,n,{axis:"y",intersect:h.intersect},d)}};const Ps=new RegExp(/^(normal|(\d+(?:\.\d+)?)(px|em|%)?)$/),is=new RegExp(/^(normal|italic|initial|inherit|unset|(oblique( -?[0-9]?[0-9]deg)?))$/);function oa(p,n){const h=(""+p).match(Ps);if(!h||"normal"===h[1])return 1.2*n;switch(p=+h[2],h[3]){case"px":return p;case"%":p/=100}return n*p}function Mr(p,n){const h={},d=Lt(n),g=d?Object.keys(n):n,C=Lt(p)?d?D=>Ot(p[D],p[n[D]]):D=>p[D]:()=>p;for(const D of g)h[D]=+C(D)||0;return h}function ra(p){return Mr(p,{top:"y",right:"x",bottom:"y",left:"x"})}function rr(p){return Mr(p,["topLeft","topRight","bottomLeft","bottomRight"])}function Lo(p){const n=ra(p);return n.width=n.left+n.right,n.height=n.top+n.bottom,n}function Ro(p,n){let h=Ot((p=p||{}).size,(n=n||Ti.font).size);"string"==typeof h&&(h=parseInt(h,10));let d=Ot(p.style,n.style);d&&!(""+d).match(is)&&(console.warn('Invalid font style specified: "'+d+'"'),d="");const g={family:Ot(p.family,n.family),lineHeight:oa(Ot(p.lineHeight,n.lineHeight),h),size:h,style:d,weight:Ot(p.weight,n.weight),string:""};return g.string=Jt(g),g}function Lr(p,n,h,d){let g,C,D,J=!0;for(g=0,C=p.length;g<C;++g)if(D=p[g],void 0!==D&&(void 0!==n&&"function"==typeof D&&(D=D(n),J=!1),void 0!==h&&ht(D)&&(D=D[h%D.length],J=!1),void 0!==D))return d&&!J&&(d.cacheable=!1),D}function ks(p,n,h){const{min:d,max:g}=p,C=_e(n,(g-d)/2),D=(J,ot)=>h&&0===J?0:J+ot;return{min:D(d,-Math.abs(C)),max:D(g,C)}}function us(p,n){return Object.assign(Object.create(p),n)}const Js=["left","top","right","bottom"];function ss(p,n){return p.filter(h=>h.pos===n)}function za(p,n){return p.filter(h=>-1===Js.indexOf(h.pos)&&h.box.axis===n)}function sa(p,n){return p.sort((h,d)=>{const g=n?d:h,C=n?h:d;return g.weight===C.weight?g.index-C.index:g.weight-C.weight})}function E(p,n,h,d){return Math.max(p[h],n[h])+Math.max(p[d],n[d])}function tt(p,n){p.top=Math.max(p.top,n.top),p.left=Math.max(p.left,n.left),p.bottom=Math.max(p.bottom,n.bottom),p.right=Math.max(p.right,n.right)}function yt(p,n,h,d){const{pos:g,box:C}=h,D=p.maxPadding;if(!Lt(g)){h.size&&(p[g]-=h.size);const Mt=d[h.stack]||{size:0,count:1};Mt.size=Math.max(Mt.size,h.horizontal?C.height:C.width),h.size=Mt.size/Mt.count,p[g]+=h.size}C.getPadding&&tt(D,C.getPadding());const J=Math.max(0,n.outerWidth-E(D,p,"left","right")),ot=Math.max(0,n.outerHeight-E(D,p,"top","bottom")),ct=J!==p.w,Pt=ot!==p.h;return p.w=J,p.h=ot,h.horizontal?{same:ct,other:Pt}:{same:Pt,other:ct}}function St(p,n){const h=n.maxPadding;return function d(g){const C={left:0,top:0,right:0,bottom:0};return g.forEach(D=>{C[D]=Math.max(n[D],h[D])}),C}(p?["left","right"]:["top","bottom"])}function Zt(p,n,h,d){const g=[];let C,D,J,ot,ct,Pt;for(C=0,D=p.length,ct=0;C<D;++C){J=p[C],ot=J.box,ot.update(J.width||n.w,J.height||n.h,St(J.horizontal,n));const{same:Mt,other:Vt}=yt(n,h,J,d);ct|=Mt&&g.length,Pt=Pt||Vt,ot.fullSize||g.push(J)}return ct&&Zt(g,n,h,d)||Pt}function ne(p,n,h,d,g){p.top=h,p.left=n,p.right=n+d,p.bottom=h+g,p.width=d,p.height=g}function fe(p,n,h,d){const g=h.padding;let{x:C,y:D}=n;for(const J of p){const ot=J.box,ct=d[J.stack]||{count:1,placed:0,weight:1},Pt=J.stackWeight/ct.weight||1;if(J.horizontal){const Mt=n.w*Pt,Vt=ct.size||ot.height;oi(ct.start)&&(D=ct.start),ot.fullSize?ne(ot,g.left,D,h.outerWidth-g.right-g.left,Vt):ne(ot,n.left+ct.placed,D,Mt,Vt),ct.start=D,ct.placed+=Mt,D=ot.bottom}else{const Mt=n.h*Pt,Vt=ct.size||ot.width;oi(ct.start)&&(C=ct.start),ot.fullSize?ne(ot,C,g.top,Vt,h.outerHeight-g.bottom-g.top):ne(ot,C,n.top+ct.placed,Vt,Mt),ct.start=C,ct.placed+=Mt,C=ot.right}}n.x=C,n.y=D}Ti.set("layout",{autoPadding:!0,padding:{top:0,right:0,bottom:0,left:0}});var Be={addBox(p,n){p.boxes||(p.boxes=[]),n.fullSize=n.fullSize||!1,n.position=n.position||"top",n.weight=n.weight||0,n._layers=n._layers||function(){return[{z:0,draw(h){n.draw(h)}}]},p.boxes.push(n)},removeBox(p,n){const h=p.boxes?p.boxes.indexOf(n):-1;-1!==h&&p.boxes.splice(h,1)},configure(p,n,h){n.fullSize=h.fullSize,n.position=h.position,n.weight=h.weight},update(p,n,h,d){if(!p)return;const g=Lo(p.options.layout.padding),C=Math.max(n-g.width,0),D=Math.max(h-g.height,0),J=function(ge){const Ae=function(On){const jn=[];let vn,Xn,Yn,ro,_n,An;for(vn=0,Xn=(On||[]).length;vn<Xn;++vn)Yn=On[vn],({position:ro,options:{stack:_n,stackWeight:An=1}}=Yn),jn.push({index:vn,box:Yn,pos:ro,horizontal:Yn.isHorizontal(),weight:Yn.weight,stack:_n&&ro+_n,stackWeight:An});return jn}(ge),Ue=sa(Ae.filter(On=>On.box.fullSize),!0),Je=sa(ss(Ae,"left"),!0),ai=sa(ss(Ae,"right")),pi=sa(ss(Ae,"top"),!0),Ei=sa(ss(Ae,"bottom")),ln=za(Ae,"x"),pn=za(Ae,"y");return{fullSize:Ue,leftAndTop:Je.concat(pi),rightAndBottom:ai.concat(pn).concat(Ei).concat(ln),chartArea:ss(Ae,"chartArea"),vertical:Je.concat(ai).concat(pn),horizontal:pi.concat(Ei).concat(ln)}}(p.boxes),ot=J.vertical,ct=J.horizontal;He(p.boxes,ge=>{"function"==typeof ge.beforeLayout&&ge.beforeLayout()});const Pt=ot.reduce((ge,Ae)=>Ae.box.options&&!1===Ae.box.options.display?ge:ge+1,0)||1,Mt=Object.freeze({outerWidth:n,outerHeight:h,padding:g,availableWidth:C,availableHeight:D,vBoxMaxWidth:C/2/Pt,hBoxMaxHeight:D/2}),Vt=Object.assign({},g);tt(Vt,Lo(d));const Qt=Object.assign({maxPadding:Vt,w:C,h:D,x:g.left,y:g.top},g),ue=function Ya(p,n){const h=function(ot){const ct={};for(const Pt of ot){const{stack:Mt,pos:Vt,stackWeight:Qt}=Pt;if(!Mt||!Js.includes(Vt))continue;const ue=ct[Mt]||(ct[Mt]={count:0,placed:0,weight:0,size:0});ue.count++,ue.weight+=Qt}return ct}(p),{vBoxMaxWidth:d,hBoxMaxHeight:g}=n;let C,D,J;for(C=0,D=p.length;C<D;++C){J=p[C];const{fullSize:ot}=J.box,ct=h[J.stack],Pt=ct&&J.stackWeight/ct.weight;J.horizontal?(J.width=Pt?Pt*d:ot&&n.availableWidth,J.height=g):(J.width=d,J.height=Pt?Pt*g:ot&&n.availableHeight)}return h}(ot.concat(ct),Mt);Zt(J.fullSize,Qt,Mt,ue),Zt(ot,Qt,Mt,ue),Zt(ct,Qt,Mt,ue)&&Zt(ot,Qt,Mt,ue),function(ge){const Ae=ge.maxPadding;function Ue(Je){const ai=Math.max(Ae[Je]-ge[Je],0);return ge[Je]+=ai,ai}ge.y+=Ue("top"),ge.x+=Ue("left"),Ue("right"),Ue("bottom")}(Qt),fe(J.leftAndTop,Qt,Mt,ue),Qt.x+=Qt.w,Qt.y+=Qt.h,fe(J.rightAndBottom,Qt,Mt,ue),p.chartArea={left:Qt.left,top:Qt.top,right:Qt.left+Qt.w,bottom:Qt.top+Qt.h,height:Qt.h,width:Qt.w},He(J.chartArea,ge=>{const Ae=ge.box;Object.assign(Ae,p.chartArea),Ae.update(Qt.w,Qt.h,{left:0,top:0,right:0,bottom:0})})}};function je(p,n=[""],h=p,d,g=(()=>p[0])){oi(d)||(d=$r("_fallback",p));const C={[Symbol.toStringTag]:"Object",_cacheable:!0,_scopes:p,_rootScopes:h,_fallback:d,_getTarget:g,override:D=>je([D,...p],n,h,d)};return new Proxy(C,{deleteProperty:(D,J)=>(delete D[J],delete D._keys,delete p[0][J],!0),get:(D,J)=>ui(D,J,()=>function(ot,ct,Pt,Mt){let Vt;for(const Qt of ct)if(Vt=$r(Li(Qt,ot),Pt),oi(Vt))return ci(ot,Vt)?Qo(Pt,Mt,ot,Vt):Vt}(J,n,p,D)),getOwnPropertyDescriptor:(D,J)=>Reflect.getOwnPropertyDescriptor(D._scopes[0],J),getPrototypeOf:()=>Reflect.getPrototypeOf(p[0]),has:(D,J)=>Io(D).includes(J),ownKeys:D=>Io(D),set(D,J,ot){const ct=D._storage||(D._storage=g());return D[J]=ct[J]=ot,delete D._keys,!0}})}function ei(p,n,h,d){const g={_cacheable:!1,_proxy:p,_context:n,_subProxy:h,_stack:new Set,_descriptors:vi(p,d),setContext:C=>ei(p,C,h,d),override:C=>ei(p.override(C),n,h,d)};return new Proxy(g,{deleteProperty:(C,D)=>(delete C[D],delete p[D],!0),get:(C,D,J)=>ui(C,D,()=>function(ot,ct,Pt){const{_proxy:Mt,_context:Vt,_subProxy:Qt,_descriptors:ue}=ot;let ge=Mt[ct];return fi(ge)&&ue.isScriptable(ct)&&(ge=function(Ae,Ue,Je,ai){const{_proxy:pi,_context:Ei,_subProxy:ln,_stack:pn}=Je;if(pn.has(Ae))throw new Error("Recursion detected: "+Array.from(pn).join("->")+"->"+Ae);return pn.add(Ae),Ue=Ue(Ei,ln||ai),pn.delete(Ae),ci(Ae,Ue)&&(Ue=Qo(pi._scopes,pi,Ae,Ue)),Ue}(ct,ge,ot,Pt)),ht(ge)&&ge.length&&(ge=function(Ae,Ue,Je,ai){const{_proxy:pi,_context:Ei,_subProxy:ln,_descriptors:pn}=Je;if(oi(Ei.index)&&ai(Ae))Ue=Ue[Ei.index%Ue.length];else if(Lt(Ue[0])){const On=Ue,jn=pi._scopes.filter(vn=>vn!==On);Ue=[];for(const vn of On){const Xn=Qo(jn,pi,Ae,vn);Ue.push(ei(Xn,Ei,ln&&ln[Ae],pn))}}return Ue}(ct,ge,ot,ue.isIndexable)),ci(ct,ge)&&(ge=ei(ge,Vt,Qt&&Qt[ct],ue)),ge}(C,D,J)),getOwnPropertyDescriptor:(C,D)=>C._descriptors.allKeys?Reflect.has(p,D)?{enumerable:!0,configurable:!0}:void 0:Reflect.getOwnPropertyDescriptor(p,D),getPrototypeOf:()=>Reflect.getPrototypeOf(p),has:(C,D)=>Reflect.has(p,D),ownKeys:()=>Reflect.ownKeys(p),set:(C,D,J)=>(p[D]=J,delete C[D],!0)})}function vi(p,n={scriptable:!0,indexable:!0}){const{_scriptable:h=n.scriptable,_indexable:d=n.indexable,_allKeys:g=n.allKeys}=p;return{allKeys:g,scriptable:h,indexable:d,isScriptable:fi(h)?h:()=>h,isIndexable:fi(d)?d:()=>d}}const Li=(p,n)=>p?p+ye(n):n,ci=(p,n)=>Lt(n)&&"adapters"!==p&&(null===Object.getPrototypeOf(n)||n.constructor===Object);function ui(p,n,h){if(Object.prototype.hasOwnProperty.call(p,n))return p[n];const d=h();return p[n]=d,d}function an(p,n,h){return fi(p)?p(n,h):p}const cn=(p,n)=>!0===p?n:"string"==typeof p?Te(n,p):void 0;function bn(p,n,h,d,g){for(const C of n){const D=cn(h,C);if(D){p.add(D);const J=an(D._fallback,h,g);if(oi(J)&&J!==h&&J!==d)return J}else if(!1===D&&oi(d)&&h!==d)return null}return!1}function Qo(p,n,h,d){const g=n._rootScopes,C=an(n._fallback,h,d),D=[...p,...g],J=new Set;J.add(d);let ot=wr(J,D,h,C||h,d);return null!==ot&&(!oi(C)||C===h||(ot=wr(J,D,C,ot,d),null!==ot))&&je(Array.from(J),[""],g,C,()=>function(ct,Pt,Mt){const Vt=ct._getTarget();Pt in Vt||(Vt[Pt]={});const Qt=Vt[Pt];return ht(Qt)&&Lt(Mt)?Mt:Qt}(n,h,d))}function wr(p,n,h,d,g){for(;h;)h=bn(p,n,h,d,g);return h}function $r(p,n){for(const h of n){if(!h)continue;const d=h[p];if(oi(d))return d}}function Io(p){let n=p._keys;return n||(n=p._keys=function(h){const d=new Set;for(const g of h)for(const C of Object.keys(g).filter(D=>!D.startsWith("_")))d.add(C);return Array.from(d)}(p._scopes)),n}const io=Number.EPSILON||1e-14,Ir=(p,n)=>n<p.length&&!p[n].skip&&p[n],Ao=p=>"x"===p?"y":"x";function er(p,n,h,d){const g=p.skip?n:p,C=n,D=h.skip?n:h,J=dr(C,g),ot=dr(D,C);let ct=J/(J+ot),Pt=ot/(J+ot);ct=isNaN(ct)?0:ct,Pt=isNaN(Pt)?0:Pt;const Mt=d*ct,Vt=d*Pt;return{previous:{x:C.x-Mt*(D.x-g.x),y:C.y-Mt*(D.y-g.y)},next:{x:C.x+Vt*(D.x-g.x),y:C.y+Vt*(D.y-g.y)}}}function aa(p,n="x"){const h=Ao(n),d=p.length,g=Array(d).fill(0),C=Array(d);let D,J,ot,ct=Ir(p,0);for(D=0;D<d;++D)if(J=ot,ot=ct,ct=Ir(p,D+1),ot){if(ct){const Pt=ct[n]-ot[n];g[D]=0!==Pt?(ct[h]-ot[h])/Pt:0}C[D]=J?ct?Ui(g[D-1])!==Ui(g[D])?0:(g[D-1]+g[D])/2:g[D-1]:g[D]}(function(Pt,Mt,Vt){const Qt=Pt.length;let ue,ge,Ae,Ue,Je,ai=Ir(Pt,0);for(let pi=0;pi<Qt-1;++pi)Je=ai,ai=Ir(Pt,pi+1),Je&&ai&&(qo(Mt[pi],0,io)?Vt[pi]=Vt[pi+1]=0:(ue=Vt[pi]/Mt[pi],ge=Vt[pi+1]/Mt[pi],Ue=Math.pow(ue,2)+Math.pow(ge,2),Ue<=9||(Ae=3/Math.sqrt(Ue),Vt[pi]=ue*Ae*Mt[pi],Vt[pi+1]=ge*Ae*Mt[pi])))})(p,g,C),function(Pt,Mt,Vt="x"){const Qt=Ao(Vt),ue=Pt.length;let ge,Ae,Ue,Je=Ir(Pt,0);for(let ai=0;ai<ue;++ai){if(Ae=Ue,Ue=Je,Je=Ir(Pt,ai+1),!Ue)continue;const pi=Ue[Vt],Ei=Ue[Qt];Ae&&(ge=(pi-Ae[Vt])/3,Ue[`cp1${Vt}`]=pi-ge,Ue[`cp1${Qt}`]=Ei-ge*Mt[ai]),Je&&(ge=(Je[Vt]-pi)/3,Ue[`cp2${Vt}`]=pi+ge,Ue[`cp2${Qt}`]=Ei+ge*Mt[ai])}}(p,C,n)}function ga(p,n,h){return Math.max(Math.min(p,h),n)}function hr(p,n,h,d,g){let C,D,J,ot;if(n.spanGaps&&(p=p.filter(ct=>!ct.skip)),"monotone"===n.cubicInterpolationMode)aa(p,g);else{let ct=d?p[p.length-1]:p[0];for(C=0,D=p.length;C<D;++C)J=p[C],ot=er(ct,J,p[Math.min(C+1,D-(d?0:1))%D],n.tension),J.cp1x=ot.previous.x,J.cp1y=ot.previous.y,J.cp2x=ot.next.x,J.cp2y=ot.next.y,ct=J}n.capBezierPoints&&function(ct,Pt){let Mt,Vt,Qt,ue,ge,Ae=Ee(ct[0],Pt);for(Mt=0,Vt=ct.length;Mt<Vt;++Mt)ge=ue,ue=Ae,Ae=Mt<Vt-1&&Ee(ct[Mt+1],Pt),ue&&(Qt=ct[Mt],ge&&(Qt.cp1x=ga(Qt.cp1x,Pt.left,Pt.right),Qt.cp1y=ga(Qt.cp1y,Pt.top,Pt.bottom)),Ae&&(Qt.cp2x=ga(Qt.cp2x,Pt.left,Pt.right),Qt.cp2y=ga(Qt.cp2y,Pt.top,Pt.bottom)))}(p,h)}const Jr=p=>0===p||1===p,js=(p,n,h)=>-Math.pow(2,10*(p-=1))*Math.sin((p-n)*wn/h),Ho=(p,n,h)=>Math.pow(2,-10*p)*Math.sin((p-n)*wn/h)+1,Qr={linear:p=>p,easeInQuad:p=>p*p,easeOutQuad:p=>-p*(p-2),easeInOutQuad:p=>(p/=.5)<1?.5*p*p:-.5*(--p*(p-2)-1),easeInCubic:p=>p*p*p,easeOutCubic:p=>(p-=1)*p*p+1,easeInOutCubic:p=>(p/=.5)<1?.5*p*p*p:.5*((p-=2)*p*p+2),easeInQuart:p=>p*p*p*p,easeOutQuart:p=>-((p-=1)*p*p*p-1),easeInOutQuart:p=>(p/=.5)<1?.5*p*p*p*p:-.5*((p-=2)*p*p*p-2),easeInQuint:p=>p*p*p*p*p,easeOutQuint:p=>(p-=1)*p*p*p*p+1,easeInOutQuint:p=>(p/=.5)<1?.5*p*p*p*p*p:.5*((p-=2)*p*p*p*p+2),easeInSine:p=>1-Math.cos(p*ee),easeOutSine:p=>Math.sin(p*ee),easeInOutSine:p=>-.5*(Math.cos(Cn*p)-1),easeInExpo:p=>0===p?0:Math.pow(2,10*(p-1)),easeOutExpo:p=>1===p?1:1-Math.pow(2,-10*p),easeInOutExpo:p=>Jr(p)?p:p<.5?.5*Math.pow(2,10*(2*p-1)):.5*(2-Math.pow(2,-10*(2*p-1))),easeInCirc:p=>p>=1?p:-(Math.sqrt(1-p*p)-1),easeOutCirc:p=>Math.sqrt(1-(p-=1)*p),easeInOutCirc:p=>(p/=.5)<1?-.5*(Math.sqrt(1-p*p)-1):.5*(Math.sqrt(1-(p-=2)*p)+1),easeInElastic:p=>Jr(p)?p:js(p,.075,.3),easeOutElastic:p=>Jr(p)?p:Ho(p,.075,.3),easeInOutElastic:p=>Jr(p)?p:p<.5?.5*js(2*p,.1125,.45):.5+.5*Ho(2*p-1,.1125,.45),easeInBack:p=>p*p*(2.70158*p-1.70158),easeOutBack:p=>(p-=1)*p*(2.70158*p+1.70158)+1,easeInOutBack(p){let n=1.70158;return(p/=.5)<1?p*p*((1+(n*=1.525))*p-n)*.5:.5*((p-=2)*p*((1+(n*=1.525))*p+n)+2)},easeInBounce:p=>1-Qr.easeOutBounce(1-p),easeOutBounce:p=>p<1/2.75?7.5625*p*p:p<2/2.75?7.5625*(p-=1.5/2.75)*p+.75:p<2.5/2.75?7.5625*(p-=2.25/2.75)*p+.9375:7.5625*(p-=2.625/2.75)*p+.984375,easeInOutBounce:p=>p<.5?.5*Qr.easeInBounce(2*p):.5*Qr.easeOutBounce(2*p-1)+.5};function Xo(p,n,h,d){return{x:p.x+h*(n.x-p.x),y:p.y+h*(n.y-p.y)}}function Go(p,n,h,d){return{x:p.x+h*(n.x-p.x),y:"middle"===d?h<.5?p.y:n.y:"after"===d?h<1?p.y:n.y:h>0?n.y:p.y}}function Rr(p,n,h,d){const g={x:p.cp2x,y:p.cp2y},C={x:n.cp1x,y:n.cp1y},D=Xo(p,g,h),J=Xo(g,C,h),ot=Xo(C,n,h),ct=Xo(D,J,h),Pt=Xo(J,ot,h);return Xo(ct,Pt,h)}const sr=new Map;function ir(p,n,h){return function(d,g){g=g||{};const C=d+JSON.stringify(g);let D=sr.get(C);return D||(D=new Intl.NumberFormat(d,g),sr.set(C,D)),D}(n,h).format(p)}function Rn(p,n,h){return p?(d=n,g=h,{x:C=>d+d+g-C,setWidth(C){g=C},textAlign:C=>"center"===C?C:"right"===C?"left":"right",xPlus:(C,D)=>C-D,leftForLtr:(C,D)=>C-D}):{x:d=>d,setWidth(d){},textAlign:d=>d,xPlus:(d,g)=>d+g,leftForLtr:(d,g)=>d};var d,g}function go(p,n){let h,d;"ltr"!==n&&"rtl"!==n||(h=p.canvas.style,d=[h.getPropertyValue("direction"),h.getPropertyPriority("direction")],h.setProperty("direction",n,"important"),p.prevTextDirection=d)}function Zo(p,n){void 0!==n&&(delete p.prevTextDirection,p.canvas.style.setProperty("direction",n[0],n[1]))}function Gr(p){return"angle"===p?{between:kn,compare:gr,normalize:lr}:{between:Yt,compare:(n,h)=>n-h,normalize:n=>n}}function cr({start:p,end:n,count:h,loop:d,style:g}){return{start:p%h,end:n%h,loop:d&&(n-p+1)%h==0,style:g}}function co(p,n,h){if(!h)return[p];const{property:d,start:g,end:C}=h,D=n.length,{compare:J,between:ot,normalize:ct}=Gr(d),{start:Pt,end:Mt,loop:Vt,style:Qt}=function(ln,pn,On){const{property:jn,start:vn,end:Xn}=On,{between:Yn,normalize:ro}=Gr(jn),_n=pn.length;let An,xr,{start:Zr,end:Cs,loop:qs}=ln;if(qs){for(Zr+=_n,Cs+=_n,An=0,xr=_n;An<xr&&Yn(ro(pn[Zr%_n][jn]),vn,Xn);++An)Zr--,Cs--;Zr%=_n,Cs%=_n}return Cs<Zr&&(Cs+=_n),{start:Zr,end:Cs,loop:qs,style:ln.style}}(p,n,h),ue=[];let ge,Ae,Ue,Je=!1,ai=null;for(let ln=Pt,pn=Pt;ln<=Mt;++ln)Ae=n[ln%D],Ae.skip||(ge=ct(Ae[d]),ge!==Ue&&(Je=ot(ge,g,C),null===ai&&(Je||ot(g,Ue,ge)&&0!==J(g,Ue))&&(ai=0===J(ge,g)?ln:pn),null!==ai&&(!Je||0===J(C,ge)||ot(C,Ue,ge))&&(ue.push(cr({start:ai,end:ln,loop:Vt,count:D,style:Qt})),ai=null),pn=ln,Ue=ge));return null!==ai&&ue.push(cr({start:ai,end:Mt,loop:Vt,count:D,style:Qt})),ue}function la(p,n){const h=[],d=p.segments;for(let g=0;g<d.length;g++){const C=co(d[g],p.points,n);C.length&&h.push(...C)}return h}function as(p,n){const h=p.points,d=p.options.spanGaps,g=h.length;if(!g)return[];const C=!!p._loop,{start:D,end:J}=function(ot,ct,Pt,Mt){let Vt=0,Qt=ct-1;if(Pt&&!Mt)for(;Vt<ct&&!ot[Vt].skip;)Vt++;for(;Vt<ct&&ot[Vt].skip;)Vt++;for(Vt%=ct,Pt&&(Qt+=Vt);Qt>Vt&&ot[Qt%ct].skip;)Qt--;return Qt%=ct,{start:Vt,end:Qt}}(h,g,C,d);return function _s(p,n,h,d){return d&&d.setContext&&h?function(g,C,D,J){const ot=g._chart.getContext(),ct=Qs(g.options),{_datasetIndex:Pt,options:{spanGaps:Mt}}=g,Vt=D.length,Qt=[];let ue=ct,ge=C[0].start,Ae=ge;function Ue(Je,ai,pi,Ei){const ln=Mt?-1:1;if(Je!==ai){for(Je+=Vt;D[Je%Vt].skip;)Je-=ln;for(;D[ai%Vt].skip;)ai+=ln;Je%Vt!=ai%Vt&&(Qt.push({start:Je%Vt,end:ai%Vt,loop:pi,style:Ei}),ue=Ei,ge=ai%Vt)}}for(const Je of C){ge=Mt?ge:Je.start;let ai,pi=D[ge%Vt];for(Ae=ge+1;Ae<=Je.end;Ae++){const Ei=D[Ae%Vt];ai=Qs(J.setContext(us(ot,{type:"segment",p0:pi,p1:Ei,p0DataIndex:(Ae-1)%Vt,p1DataIndex:Ae%Vt,datasetIndex:Pt}))),Oa(ai,ue)&&Ue(ge,Ae-1,Je.loop,ue),pi=Ei,ue=ai}ge<Ae-1&&Ue(ge,Ae-1,Je.loop,ue)}return Qt}(p,n,h,d):n}(p,!0===d?[{start:D,end:J,loop:C}]:function(ot,ct,Pt,Mt){const Vt=ot.length,Qt=[];let ue,ge=ct,Ae=ot[ct];for(ue=ct+1;ue<=Pt;++ue){const Ue=ot[ue%Vt];Ue.skip||Ue.stop?Ae.skip||(Qt.push({start:ct%Vt,end:(ue-1)%Vt,loop:Mt=!1}),ct=ge=Ue.stop?ue:null):(ge=ue,Ae.skip&&(ct=ue)),Ae=Ue}return null!==ge&&Qt.push({start:ct%Vt,end:ge%Vt,loop:Mt}),Qt}(h,D,J<D?J+g:J,!!p._fullLoop&&0===D&&J===g-1),h,n)}function Qs(p){return{backgroundColor:p.backgroundColor,borderCapStyle:p.borderCapStyle,borderDash:p.borderDash,borderDashOffset:p.borderDashOffset,borderJoinStyle:p.borderJoinStyle,borderWidth:p.borderWidth,borderColor:p.borderColor}}function Oa(p,n){return n&&JSON.stringify(p)!==JSON.stringify(n)}var ya=Object.freeze({__proto__:null,easingEffects:Qr,color:mt,getHoverColor:pt,noop:dt,uid:Y,isNullOrUndef:lt,isArray:ht,isObject:Lt,isFinite:At,finiteOrDefault:Wt,valueOrDefault:Ot,toPercentage:se,toDimension:_e,callback:We,each:He,_elementsEqual:Fe,clone:pe,_merger:me,merge:qt,mergeIf:Kt,_mergerIf:xe,_deprecated:function(p,n,h,d){void 0!==n&&console.warn(p+': "'+h+'" is deprecated. Please use "'+d+'" instead')},resolveObjectKey:Te,_capitalize:ye,defined:oi,isFunction:fi,setsEqual:tn,_isClickEvent:Ii,toFontString:Jt,_measureText:he,_longestText:Ce,_alignPixel:De,clearCanvas:Ge,drawPoint:oe,_isPointInArea:Ee,clipArea:ii,unclipArea:Si,_steppedLineTo:Oi,_bezierCurveTo:di,renderText:hi,addRoundedRectPath:Fi,_lookup:yi,_lookupByKey:Zi,_rlookupByKey:Yi,_filterBetween:Ki,listenArrayEvents:Vi,unlistenArrayEvents:so,_arrayUnique:Hn,_createResolver:je,_attachContext:ei,_descriptors:vi,splineCurve:er,splineCurveMonotone:aa,_updateBezierControlPoints:hr,_isDomSupported:Gn,_getParentNode:vo,getStyle:Co,getRelativePosition:ao,getMaximumSize:Tr,retinaScale:Vs,supportsEventListenerOptions:Uo,readUsedSize:zr,fontString:function(p,n,h){return n+" "+p+"px "+h},requestAnimFrame:vt,throttled:te,debounce:Ct,_toLeftRightCenter:wt,_alignStartEnd:xt,_textX:jt,_pointInLine:Xo,_steppedInterpolation:Go,_bezierInterpolation:Rr,formatNumber:ir,toLineHeight:oa,_readValueToProps:Mr,toTRBL:ra,toTRBLCorners:rr,toPadding:Lo,toFont:Ro,resolve:Lr,_addGrace:ks,createContext:us,PI:Cn,TAU:wn,PITAU:X,INFINITY:bt,RAD_PER_DEG:Gt,HALF_PI:ee,QUARTER_PI:we,TWO_THIRDS_PI:Ye,log10:xi,sign:Ui,niceNum:hn,_factorize:Fn,isNumber:Mo,almostEquals:qo,almostWhole:Oo,_setMinAndMaxByKey:Dr,toRadians:No,toDegrees:po,_decimalPlaces:ko,getAngleFromPoint:Kr,distanceBetweenPoints:dr,_angleDiff:gr,_normalizeAngle:lr,_angleBetween:kn,_limitValue:En,_int16Range:Ft,_isBetween:Yt,getRtlAdapter:Rn,overrideTextDirection:go,restoreTextDirection:Zo,_boundSegment:co,_boundSegments:la,_computeSegments:as});class Es{acquireContext(n,h){}releaseContext(n){return!1}addEventListener(n,h,d){}removeEventListener(n,h,d){}getDevicePixelRatio(){return 1}getMaximumSize(n,h,d,g){return h=Math.max(0,h||n.width),d=d||n.height,{width:h,height:Math.max(0,g?Math.floor(h/g):d)}}isAttached(n){return!0}updateConfig(n){}}class xs extends Es{acquireContext(n){return n&&n.getContext&&n.getContext("2d")||null}updateConfig(n){n.options.animation=!1}}const Sa={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup",pointerenter:"mouseenter",pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointerleave:"mouseout",pointerout:"mouseout"},r=p=>null===p||""===p,f=!!Uo&&{passive:!0};function U(p,n,h){p.canvas.removeEventListener(n,h,f)}function ut(p,n){for(const h of p)if(h===n||h.contains(n))return!0}function Et(p,n,h){const d=p.canvas,g=new MutationObserver(C=>{let D=!1;for(const J of C)D=D||ut(J.addedNodes,d),D=D&&!ut(J.removedNodes,d);D&&h()});return g.observe(document,{childList:!0,subtree:!0}),g}function ae(p,n,h){const d=p.canvas,g=new MutationObserver(C=>{let D=!1;for(const J of C)D=D||ut(J.removedNodes,d),D=D&&!ut(J.addedNodes,d);D&&h()});return g.observe(document,{childList:!0,subtree:!0}),g}const qe=new Map;let Xe=0;function ki(){const p=window.devicePixelRatio;p!==Xe&&(Xe=p,qe.forEach((n,h)=>{h.currentDevicePixelRatio!==p&&n()}))}function Ci(p,n,h){const d=p.canvas,g=d&&vo(d);if(!g)return;const C=te((J,ot)=>{const ct=g.clientWidth;h(J,ot),ct<g.clientWidth&&h()},window),D=new ResizeObserver(J=>{const ot=J[0],ct=ot.contentRect.width,Pt=ot.contentRect.height;0===ct&&0===Pt||C(ct,Pt)});return D.observe(g),J=p,ot=C,qe.size||window.addEventListener("resize",ki),qe.set(J,ot),D;var J,ot}function Sn(p,n,h){h&&h.disconnect(),"resize"===n&&(qe.delete(p),qe.size||window.removeEventListener("resize",ki))}function no(p,n,h){const d=p.canvas,g=te(C=>{null!==p.ctx&&h(function(D,J){const ot=Sa[D.type]||D.type,{x:ct,y:Pt}=ao(D,J);return{type:ot,chart:J,native:D,x:void 0!==ct?ct:null,y:void 0!==Pt?Pt:null}}(C,p))},p,C=>{const D=C[0];return[D,D.offsetX,D.offsetY]});return d.addEventListener(n,g,f),g}class wo extends Es{acquireContext(n,h){const d=n&&n.getContext&&n.getContext("2d");return d&&d.canvas===n?(function(g,C){const D=g.style,J=g.getAttribute("height"),ot=g.getAttribute("width");if(g.$chartjs={initial:{height:J,width:ot,style:{display:D.display,height:D.height,width:D.width}}},D.display=D.display||"block",D.boxSizing=D.boxSizing||"border-box",r(ot)){const ct=zr(g,"width");void 0!==ct&&(g.width=ct)}if(r(J))if(""===g.style.height)g.height=g.width/(C||2);else{const ct=zr(g,"height");void 0!==ct&&(g.height=ct)}}(n,h),d):null}releaseContext(n){const h=n.canvas;if(!h.$chartjs)return!1;const d=h.$chartjs.initial;["height","width"].forEach(C=>{const D=d[C];lt(D)?h.removeAttribute(C):h.setAttribute(C,D)});const g=d.style||{};return Object.keys(g).forEach(C=>{h.style[C]=g[C]}),h.width=h.width,delete h.$chartjs,!0}addEventListener(n,h,d){this.removeEventListener(n,h),(n.$proxies||(n.$proxies={}))[h]=({attach:Et,detach:ae,resize:Ci}[h]||no)(n,h,d)}removeEventListener(n,h){const d=n.$proxies||(n.$proxies={}),g=d[h];!g||(({attach:Sn,detach:Sn,resize:Sn}[h]||U)(n,h,g),d[h]=void 0)}getDevicePixelRatio(){return window.devicePixelRatio}getMaximumSize(n,h,d,g){return Tr(n,h,d,g)}isAttached(n){const h=vo(n);return!(!h||!h.isConnected)}}function fr(p){return!Gn()||typeof OffscreenCanvas<"u"&&p instanceof OffscreenCanvas?xs:wo}var Fs=Object.freeze({__proto__:null,_detectPlatform:fr,BasePlatform:Es,BasicPlatform:xs,DomPlatform:wo});const ns="transparent",Wr={boolean:(p,n,h)=>h>.5?n:p,color(p,n,h){const d=mt(p||ns),g=d.valid&&mt(n||ns);return g&&g.valid?g.mix(d,h).hexString():n},number:(p,n,h)=>p+(n-p)*h};class ha{constructor(n,h,d,g){const C=h[d];g=Lr([n.to,g,C,n.from]);const D=Lr([n.from,C,g]);this._active=!0,this._fn=n.fn||Wr[n.type||typeof D],this._easing=Qr[n.easing]||Qr.linear,this._start=Math.floor(Date.now()+(n.delay||0)),this._duration=this._total=Math.floor(n.duration),this._loop=!!n.loop,this._target=h,this._prop=d,this._from=D,this._to=g,this._promises=void 0}active(){return this._active}update(n,h,d){if(this._active){this._notify(!1);const g=this._target[this._prop],C=d-this._start,D=this._duration-C;this._start=d,this._duration=Math.floor(Math.max(D,n.duration)),this._total+=C,this._loop=!!n.loop,this._to=Lr([n.to,h,g,n.from]),this._from=Lr([n.from,g,h])}}cancel(){this._active&&(this.tick(Date.now()),this._active=!1,this._notify(!1))}tick(n){const h=n-this._start,d=this._duration,g=this._prop,C=this._from,D=this._loop,J=this._to;let ot;if(this._active=C!==J&&(D||h<d),!this._active)return this._target[g]=J,void this._notify(!0);h<0?this._target[g]=C:(ot=h/d%2,ot=D&&ot>1?2-ot:ot,ot=this._easing(Math.min(1,Math.max(0,ot))),this._target[g]=this._fn(C,J,ot))}wait(){const n=this._promises||(this._promises=[]);return new Promise((h,d)=>{n.push({res:h,rej:d})})}_notify(n){const h=n?"res":"rej",d=this._promises||[];for(let g=0;g<d.length;g++)d[g][h]()}}Ti.set("animation",{delay:void 0,duration:1e3,easing:"easeOutQuart",fn:void 0,from:void 0,loop:void 0,to:void 0,type:void 0});const ls=Object.keys(Ti.animation);Ti.describe("animation",{_fallback:!1,_indexable:!1,_scriptable:p=>"onProgress"!==p&&"onComplete"!==p&&"fn"!==p}),Ti.set("animations",{colors:{type:"color",properties:["color","borderColor","backgroundColor"]},numbers:{type:"number",properties:["x","y","borderWidth","radius","tension"]}}),Ti.describe("animations",{_fallback:"animation"}),Ti.set("transitions",{active:{animation:{duration:400}},resize:{animation:{duration:0}},show:{animations:{colors:{from:"transparent"},visible:{type:"boolean",duration:0}}},hide:{animations:{colors:{to:"transparent"},visible:{type:"boolean",easing:"linear",fn:p=>0|p}}}});class ca{constructor(n,h){this._chart=n,this._properties=new Map,this.configure(h)}configure(n){if(!Lt(n))return;const h=this._properties;Object.getOwnPropertyNames(n).forEach(d=>{const g=n[d];if(!Lt(g))return;const C={};for(const D of ls)C[D]=g[D];(ht(g.properties)&&g.properties||[d]).forEach(D=>{D!==d&&h.has(D)||h.set(D,C)})})}_animateOptions(n,h){const d=h.options,g=function(D,J){if(!J)return;let ot=D.options;return ot?(ot.$shared&&(D.options=ot=Object.assign({},ot,{$shared:!1,$animations:{}})),ot):void(D.options=J)}(n,d);if(!g)return[];const C=this._createAnimations(g,d);return d.$shared&&function(D,J){const ot=[],ct=Object.keys(J);for(let Pt=0;Pt<ct.length;Pt++){const Mt=D[ct[Pt]];Mt&&Mt.active()&&ot.push(Mt.wait())}return Promise.all(ot)}(n.options.$animations,d).then(()=>{n.options=d},()=>{}),C}_createAnimations(n,h){const d=this._properties,g=[],C=n.$animations||(n.$animations={}),D=Object.keys(h),J=Date.now();let ot;for(ot=D.length-1;ot>=0;--ot){const ct=D[ot];if("$"===ct.charAt(0))continue;if("options"===ct){g.push(...this._animateOptions(n,h));continue}const Pt=h[ct];let Mt=C[ct];const Vt=d.get(ct);if(Mt){if(Vt&&Mt.active()){Mt.update(Vt,Pt,J);continue}Mt.cancel()}Vt&&Vt.duration?(C[ct]=Mt=new ha(Vt,n,ct,Pt),g.push(Mt)):n[ct]=Pt}return g}update(n,h){if(0===this._properties.size)return void Object.assign(n,h);const d=this._createAnimations(n,h);return d.length?(zt.add(this._chart,d),!0):void 0}}function ur(p,n){const h=p&&p.options||{},d=h.reverse,g=void 0===h.min?n:0,C=void 0===h.max?n:0;return{start:d?C:g,end:d?g:C}}function Ms(p,n){const h=[],d=p._getSortedDatasetMetas(n);let g,C;for(g=0,C=d.length;g<C;++g)h.push(d[g].index);return h}function Hs(p,n,h,d={}){const g=p.keys,C="single"===d.mode;let D,J,ot,ct;if(null!==n){for(D=0,J=g.length;D<J;++D){if(ot=+g[D],ot===h){if(d.all)continue;break}ct=p.values[ot],At(ct)&&(C||0===n||Ui(n)===Ui(ct))&&(n+=ct)}return n}}function Ta(p,n){const h=p&&p.options.stacked;return h||void 0===h&&void 0!==n.stack}function Ls(p,n,h){const d=p[n]||(p[n]={});return d[h]||(d[h]={})}function Ka(p,n,h,d){for(const g of n.getMatchingVisibleMetas(d).reverse()){const C=p[g.index];if(h&&C>0||!h&&C<0)return g.index}return null}function Va(p,n){const{chart:h,_cachedMeta:d}=p,g=h._stacks||(h._stacks={}),{iScale:C,vScale:D,index:J}=d,ot=C.axis,ct=D.axis,Pt=`${C.id}.${D.id}.${(ge=d).stack||ge.type}`,Mt=n.length;var ge;let Vt;for(let Qt=0;Qt<Mt;++Qt){const ue=n[Qt],{[ot]:ge,[ct]:Ae}=ue;Vt=(ue._stacks||(ue._stacks={}))[ct]=Ls(g,Pt,ge),Vt[J]=Ae,Vt._top=Ka(Vt,D,!0,d.type),Vt._bottom=Ka(Vt,D,!1,d.type)}}function ve(p,n){const h=p.scales;return Object.keys(h).filter(d=>h[d].axis===n).shift()}function Ne(p,n){const h=p.controller.index,d=p.vScale&&p.vScale.axis;if(d){n=n||p._parsed;for(const g of n){const C=g._stacks;if(!C||void 0===C[d]||void 0===C[d][h])return;delete C[d][h]}}}const ni=p=>"reset"===p||"none"===p,zi=(p,n)=>n?p:Object.assign({},p);class ri{constructor(n,h){this.chart=n,this._ctx=n.ctx,this.index=h,this._cachedDataOpts={},this._cachedMeta=this.getMeta(),this._type=this._cachedMeta.type,this.options=void 0,this._parsing=!1,this._data=void 0,this._objectData=void 0,this._sharedOptions=void 0,this._drawStart=void 0,this._drawCount=void 0,this.enableOptionSharing=!1,this.$context=void 0,this._syncList=[],this.initialize()}initialize(){const n=this._cachedMeta;this.configure(),this.linkScales(),n._stacked=Ta(n.vScale,n),this.addElements()}updateIndex(n){this.index!==n&&Ne(this._cachedMeta),this.index=n}linkScales(){const n=this.chart,h=this._cachedMeta,d=this.getDataset(),g=(Mt,Vt,Qt,ue)=>"x"===Mt?Vt:"r"===Mt?ue:Qt,C=h.xAxisID=Ot(d.xAxisID,ve(n,"x")),D=h.yAxisID=Ot(d.yAxisID,ve(n,"y")),J=h.rAxisID=Ot(d.rAxisID,ve(n,"r")),ot=h.indexAxis,ct=h.iAxisID=g(ot,C,D,J),Pt=h.vAxisID=g(ot,D,C,J);h.xScale=this.getScaleForId(C),h.yScale=this.getScaleForId(D),h.rScale=this.getScaleForId(J),h.iScale=this.getScaleForId(ct),h.vScale=this.getScaleForId(Pt)}getDataset(){return this.chart.data.datasets[this.index]}getMeta(){return this.chart.getDatasetMeta(this.index)}getScaleForId(n){return this.chart.scales[n]}_getOtherScale(n){const h=this._cachedMeta;return n===h.iScale?h.vScale:h.iScale}reset(){this._update("reset")}_destroy(){const n=this._cachedMeta;this._data&&so(this._data,this),n._stacked&&Ne(n)}_dataCheck(){const n=this.getDataset(),h=n.data||(n.data=[]),d=this._data;if(Lt(h))this._data=function(g){const C=Object.keys(g),D=new Array(C.length);let J,ot,ct;for(J=0,ot=C.length;J<ot;++J)ct=C[J],D[J]={x:ct,y:g[ct]};return D}(h);else if(d!==h){if(d){so(d,this);const g=this._cachedMeta;Ne(g),g._parsed=[]}h&&Object.isExtensible(h)&&Vi(h,this),this._syncList=[],this._data=h}}addElements(){const n=this._cachedMeta;this._dataCheck(),this.datasetElementType&&(n.dataset=new this.datasetElementType)}buildOrUpdateElements(n){const h=this._cachedMeta,d=this.getDataset();let g=!1;this._dataCheck();const C=h._stacked;h._stacked=Ta(h.vScale,h),h.stack!==d.stack&&(g=!0,Ne(h),h.stack=d.stack),this._resyncElements(n),(g||C!==h._stacked)&&Va(this,h._parsed)}configure(){const n=this.chart.config,h=n.datasetScopeKeys(this._type),d=n.getOptionScopes(this.getDataset(),h,!0);this.options=n.createResolver(d,this.getContext()),this._parsing=this.options.parsing,this._cachedDataOpts={}}parse(n,h){const{_cachedMeta:d,_data:g}=this,{iScale:C,_stacked:D}=d,J=C.axis;let ot,ct,Pt,Mt=0===n&&h===g.length||d._sorted,Vt=n>0&&d._parsed[n-1];if(!1===this._parsing)d._parsed=g,d._sorted=!0,Pt=g;else{Pt=ht(g[n])?this.parseArrayData(d,g,n,h):Lt(g[n])?this.parseObjectData(d,g,n,h):this.parsePrimitiveData(d,g,n,h);const Qt=()=>null===ct[J]||Vt&&ct[J]<Vt[J];for(ot=0;ot<h;++ot)d._parsed[ot+n]=ct=Pt[ot],Mt&&(Qt()&&(Mt=!1),Vt=ct);d._sorted=Mt}D&&Va(this,Pt)}parsePrimitiveData(n,h,d,g){const{iScale:C,vScale:D}=n,J=C.axis,ot=D.axis,ct=C.getLabels(),Pt=C===D,Mt=new Array(g);let Vt,Qt,ue;for(Vt=0,Qt=g;Vt<Qt;++Vt)ue=Vt+d,Mt[Vt]={[J]:Pt||C.parse(ct[ue],ue),[ot]:D.parse(h[ue],ue)};return Mt}parseArrayData(n,h,d,g){const{xScale:C,yScale:D}=n,J=new Array(g);let ot,ct,Pt,Mt;for(ot=0,ct=g;ot<ct;++ot)Pt=ot+d,Mt=h[Pt],J[ot]={x:C.parse(Mt[0],Pt),y:D.parse(Mt[1],Pt)};return J}parseObjectData(n,h,d,g){const{xScale:C,yScale:D}=n,{xAxisKey:J="x",yAxisKey:ot="y"}=this._parsing,ct=new Array(g);let Pt,Mt,Vt,Qt;for(Pt=0,Mt=g;Pt<Mt;++Pt)Vt=Pt+d,Qt=h[Vt],ct[Pt]={x:C.parse(Te(Qt,J),Vt),y:D.parse(Te(Qt,ot),Vt)};return ct}getParsed(n){return this._cachedMeta._parsed[n]}getDataElement(n){return this._cachedMeta.data[n]}applyStack(n,h,d){const C=this._cachedMeta,D=h[n.axis];return Hs({keys:Ms(this.chart,!0),values:h._stacks[n.axis]},D,C.index,{mode:d})}updateRangeFromParsed(n,h,d,g){const C=d[h.axis];let D=null===C?NaN:C;const J=g&&d._stacks[h.axis];g&&J&&(g.values=J,D=Hs(g,C,this._cachedMeta.index)),n.min=Math.min(n.min,D),n.max=Math.max(n.max,D)}getMinMax(n,h){const d=this._cachedMeta,g=d._parsed,C=d._sorted&&n===d.iScale,D=g.length,J=this._getOtherScale(n),ot=((ge,Ae,Ue)=>ge&&!Ae.hidden&&Ae._stacked&&{keys:Ms(this.chart,!0),values:null})(h,d),ct={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY},{min:Pt,max:Mt}=function(ge){const{min:Ae,max:Ue,minDefined:Je,maxDefined:ai}=ge.getUserBounds();return{min:Je?Ae:Number.NEGATIVE_INFINITY,max:ai?Ue:Number.POSITIVE_INFINITY}}(J);let Vt,Qt;function ue(){Qt=g[Vt];const ge=Qt[J.axis];return!At(Qt[n.axis])||Pt>ge||Mt<ge}for(Vt=0;Vt<D&&(ue()||(this.updateRangeFromParsed(ct,n,Qt,ot),!C));++Vt);if(C)for(Vt=D-1;Vt>=0;--Vt)if(!ue()){this.updateRangeFromParsed(ct,n,Qt,ot);break}return ct}getAllParsedValues(n){const h=this._cachedMeta._parsed,d=[];let g,C,D;for(g=0,C=h.length;g<C;++g)D=h[g][n.axis],At(D)&&d.push(D);return d}getMaxOverflow(){return!1}getLabelAndValue(n){const h=this._cachedMeta,d=h.iScale,g=h.vScale,C=this.getParsed(n);return{label:d?""+d.getLabelForValue(C[d.axis]):"",value:g?""+g.getLabelForValue(C[g.axis]):""}}_update(n){const h=this._cachedMeta;this.update(n||"default"),h._clip=function(d){let g,C,D,J;return Lt(d)?(g=d.top,C=d.right,D=d.bottom,J=d.left):g=C=D=J=d,{top:g,right:C,bottom:D,left:J,disabled:!1===d}}(Ot(this.options.clip,function(d,g,C){if(!1===C)return!1;const D=ur(d,C),J=ur(g,C);return{top:J.end,right:D.end,bottom:J.start,left:D.start}}(h.xScale,h.yScale,this.getMaxOverflow())))}update(n){}draw(){const n=this._ctx,d=this._cachedMeta,g=d.data||[],C=this.chart.chartArea,D=[],J=this._drawStart||0,ot=this._drawCount||g.length-J,ct=this.options.drawActiveElementsOnTop;let Pt;for(d.dataset&&d.dataset.draw(n,C,J,ot),Pt=J;Pt<J+ot;++Pt){const Mt=g[Pt];Mt.hidden||(Mt.active&&ct?D.push(Mt):Mt.draw(n,C))}for(Pt=0;Pt<D.length;++Pt)D[Pt].draw(n,C)}getStyle(n,h){const d=h?"active":"default";return void 0===n&&this._cachedMeta.dataset?this.resolveDatasetElementOptions(d):this.resolveDataElementOptions(n||0,d)}getContext(n,h,d){const g=this.getDataset();let C;if(n>=0&&n<this._cachedMeta.data.length){const D=this._cachedMeta.data[n];C=D.$context||(D.$context=us(this.getContext(),{active:!1,dataIndex:ot=n,parsed:void 0,raw:void 0,element:D,index:ot,mode:"default",type:"data"})),C.parsed=this.getParsed(n),C.raw=g.data[n],C.index=C.dataIndex=n}else C=this.$context||(this.$context=us(this.chart.getContext(),{active:!1,dataset:void 0,datasetIndex:J=this.index,index:J,mode:"default",type:"dataset"})),C.dataset=g,C.index=C.datasetIndex=this.index;var J,ot;return C.active=!!h,C.mode=d,C}resolveDatasetElementOptions(n){return this._resolveElementOptions(this.datasetElementType.id,n)}resolveDataElementOptions(n,h){return this._resolveElementOptions(this.dataElementType.id,h,n)}_resolveElementOptions(n,h="default",d){const g="active"===h,C=this._cachedDataOpts,D=n+"-"+h,J=C[D],ot=this.enableOptionSharing&&oi(d);if(J)return zi(J,ot);const ct=this.chart.config,Pt=ct.datasetElementScopeKeys(this._type,n),Mt=g?[`${n}Hover`,"hover",n,""]:[n,""],Vt=ct.getOptionScopes(this.getDataset(),Pt),Qt=Object.keys(Ti.elements[n]),ue=ct.resolveNamedOptions(Vt,Qt,()=>this.getContext(d,g),Mt);return ue.$shared&&(ue.$shared=ot,C[D]=Object.freeze(zi(ue,ot))),ue}_resolveAnimations(n,h,d){const g=this.chart,C=this._cachedDataOpts,D=`animation-${h}`,J=C[D];if(J)return J;let ot;if(!1!==g.options.animation){const Pt=this.chart.config,Mt=Pt.datasetAnimationScopeKeys(this._type,h),Vt=Pt.getOptionScopes(this.getDataset(),Mt);ot=Pt.createResolver(Vt,this.getContext(n,d,h))}const ct=new ca(g,ot&&ot.animations);return ot&&ot._cacheable&&(C[D]=Object.freeze(ct)),ct}getSharedOptions(n){if(n.$shared)return this._sharedOptions||(this._sharedOptions=Object.assign({},n))}includeOptions(n,h){return!h||ni(n)||this.chart._animationsDisabled}updateElement(n,h,d,g){ni(g)?Object.assign(n,d):this._resolveAnimations(h,g).update(n,d)}updateSharedOptions(n,h,d){n&&!ni(h)&&this._resolveAnimations(void 0,h).update(n,d)}_setStyle(n,h,d,g){n.active=g;const C=this.getStyle(h,g);this._resolveAnimations(h,d,g).update(n,{options:!g&&this.getSharedOptions(C)||C})}removeHoverStyle(n,h,d){this._setStyle(n,d,"active",!1)}setHoverStyle(n,h,d){this._setStyle(n,d,"active",!0)}_removeDatasetHoverStyle(){const n=this._cachedMeta.dataset;n&&this._setStyle(n,void 0,"active",!1)}_setDatasetHoverStyle(){const n=this._cachedMeta.dataset;n&&this._setStyle(n,void 0,"active",!0)}_resyncElements(n){const h=this._data,d=this._cachedMeta.data;for(const[J,ot,ct]of this._syncList)this[J](ot,ct);this._syncList=[];const g=d.length,C=h.length,D=Math.min(C,g);D&&this.parse(0,D),C>g?this._insertElements(g,C-g,n):C<g&&this._removeElements(C,g-C)}_insertElements(n,h,d=!0){const g=this._cachedMeta,C=g.data,D=n+h;let J;const ot=ct=>{for(ct.length+=h,J=ct.length-1;J>=D;J--)ct[J]=ct[J-h]};for(ot(C),J=n;J<D;++J)C[J]=new this.dataElementType;this._parsing&&ot(g._parsed),this.parse(n,h),d&&this.updateElements(C,n,h,"reset")}updateElements(n,h,d,g){}_removeElements(n,h){const d=this._cachedMeta;if(this._parsing){const g=d._parsed.splice(n,h);d._stacked&&Ne(d,g)}d.data.splice(n,h)}_sync(n){if(this._parsing)this._syncList.push(n);else{const[h,d,g]=n;this[h](d,g)}this.chart._dataChanges.push([this.index,...n])}_onDataPush(){const n=arguments.length;this._sync(["_insertElements",this.getDataset().data.length-n,n])}_onDataPop(){this._sync(["_removeElements",this._cachedMeta.data.length-1,1])}_onDataShift(){this._sync(["_removeElements",0,1])}_onDataSplice(n,h){h&&this._sync(["_removeElements",n,h]);const d=arguments.length-2;d&&this._sync(["_insertElements",n,d])}_onDataUnshift(){this._sync(["_insertElements",0,arguments.length])}}ri.defaults={},ri.prototype.datasetElementType=null,ri.prototype.dataElementType=null;class Di{constructor(){this.x=void 0,this.y=void 0,this.active=!1,this.options=void 0,this.$animations=void 0}tooltipPosition(n){const{x:h,y:d}=this.getProps(["x","y"],n);return{x:h,y:d}}hasValue(){return Mo(this.x)&&Mo(this.y)}getProps(n,h){const d=this.$animations;if(!h||!d)return this;const g={};return n.forEach(C=>{g[C]=d[C]&&d[C].active()?d[C]._to:this[C]}),g}}Di.defaults={},Di.defaultRoutes=void 0;const Qi={values:p=>ht(p)?p:""+p,numeric(p,n,h){if(0===p)return"0";const d=this.chart.options.locale;let g,C=p;if(h.length>1){const ct=Math.max(Math.abs(h[0].value),Math.abs(h[h.length-1].value));(ct<1e-4||ct>1e15)&&(g="scientific"),C=function(Pt,Mt){let Vt=Mt.length>3?Mt[2].value-Mt[1].value:Mt[1].value-Mt[0].value;return Math.abs(Vt)>=1&&Pt!==Math.floor(Pt)&&(Vt=Pt-Math.floor(Pt)),Vt}(p,h)}const D=xi(Math.abs(C)),J=Math.max(Math.min(-1*Math.floor(D),20),0),ot={notation:g,minimumFractionDigits:J,maximumFractionDigits:J};return Object.assign(ot,this.options.ticks.format),ir(p,d,ot)},logarithmic(p,n,h){if(0===p)return"0";const d=p/Math.pow(10,Math.floor(xi(p)));return 1===d||2===d||5===d?Qi.numeric.call(this,p,n,h):""}};var rn={formatters:Qi};function lo(p,n,h,d,g){const C=Ot(d,0),D=Math.min(Ot(g,p.length),p.length);let J,ot,ct,Pt=0;for(h=Math.ceil(h),g&&(J=g-d,h=J/Math.floor(J/h)),ct=C;ct<0;)Pt++,ct=Math.round(C+Pt*h);for(ot=Math.max(C,0);ot<D;ot++)ot===ct&&(n.push(p[ot]),Pt++,ct=Math.round(C+Pt*h))}Ti.set("scale",{display:!0,offset:!1,reverse:!1,beginAtZero:!1,bounds:"ticks",grace:0,grid:{display:!0,lineWidth:1,drawBorder:!0,drawOnChartArea:!0,drawTicks:!0,tickLength:8,tickWidth:(p,n)=>n.lineWidth,tickColor:(p,n)=>n.color,offset:!1,borderDash:[],borderDashOffset:0,borderWidth:1},title:{display:!1,text:"",padding:{top:4,bottom:4}},ticks:{minRotation:0,maxRotation:50,mirror:!1,textStrokeWidth:0,textStrokeColor:"",padding:3,display:!0,autoSkip:!0,autoSkipPadding:3,labelOffset:0,callback:rn.formatters.values,minor:{},major:{},align:"center",crossAlign:"near",showLabelBackdrop:!1,backdropColor:"rgba(255, 255, 255, 0.75)",backdropPadding:2}}),Ti.route("scale.ticks","color","","color"),Ti.route("scale.grid","color","","borderColor"),Ti.route("scale.grid","borderColor","","borderColor"),Ti.route("scale.title","color","","color"),Ti.describe("scale",{_fallback:!1,_scriptable:p=>!p.startsWith("before")&&!p.startsWith("after")&&"callback"!==p&&"parser"!==p,_indexable:p=>"borderDash"!==p&&"tickBorderDash"!==p}),Ti.describe("scales",{_fallback:"scale"}),Ti.describe("scale.ticks",{_scriptable:p=>"backdropPadding"!==p&&"callback"!==p,_indexable:p=>"backdropPadding"!==p});const oo=(p,n,h)=>"top"===n||"left"===n?p[n]+h:p[n]-h;function Wn(p,n){const h=[],d=p.length/n,g=p.length;let C=0;for(;C<g;C+=d)h.push(p[Math.floor(C)]);return h}function Xt(p,n,h){const d=p.ticks.length,g=Math.min(n,d-1),C=p._startPixel,D=p._endPixel,J=1e-6;let ot,ct=p.getPixelForTick(g);if(!(h&&(ot=1===d?Math.max(ct-C,D-ct):0===n?(p.getPixelForTick(1)-ct)/2:(ct-p.getPixelForTick(g-1))/2,ct+=g<n?ot:-ot,ct<C-J||ct>D+J)))return ct}function Z(p){return p.drawTicks?p.tickLength:0}function Tt(p,n){if(!p.display)return 0;const h=Ro(p.font,n),d=Lo(p.padding);return(ht(p.text)?p.text.length:1)*h.lineHeight+d.height}function ce(p,n,h){let d=wt(p);return(h&&"right"!==n||!h&&"right"===n)&&(d="left"===(g=d)?"right":"right"===g?"left":g),d;var g}class Ke extends Di{constructor(n){super(),this.id=n.id,this.type=n.type,this.options=void 0,this.ctx=n.ctx,this.chart=n.chart,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this._margins={left:0,right:0,top:0,bottom:0},this.maxWidth=void 0,this.maxHeight=void 0,this.paddingTop=void 0,this.paddingBottom=void 0,this.paddingLeft=void 0,this.paddingRight=void 0,this.axis=void 0,this.labelRotation=void 0,this.min=void 0,this.max=void 0,this._range=void 0,this.ticks=[],this._gridLineItems=null,this._labelItems=null,this._labelSizes=null,this._length=0,this._maxLength=0,this._longestTextCache={},this._startPixel=void 0,this._endPixel=void 0,this._reversePixels=!1,this._userMax=void 0,this._userMin=void 0,this._suggestedMax=void 0,this._suggestedMin=void 0,this._ticksLength=0,this._borderValue=0,this._cache={},this._dataLimitsCached=!1,this.$context=void 0}init(n){this.options=n.setContext(this.getContext()),this.axis=n.axis,this._userMin=this.parse(n.min),this._userMax=this.parse(n.max),this._suggestedMin=this.parse(n.suggestedMin),this._suggestedMax=this.parse(n.suggestedMax)}parse(n,h){return n}getUserBounds(){let{_userMin:n,_userMax:h,_suggestedMin:d,_suggestedMax:g}=this;return n=Wt(n,Number.POSITIVE_INFINITY),h=Wt(h,Number.NEGATIVE_INFINITY),d=Wt(d,Number.POSITIVE_INFINITY),g=Wt(g,Number.NEGATIVE_INFINITY),{min:Wt(n,d),max:Wt(h,g),minDefined:At(n),maxDefined:At(h)}}getMinMax(n){let h,{min:d,max:g,minDefined:C,maxDefined:D}=this.getUserBounds();if(C&&D)return{min:d,max:g};const J=this.getMatchingVisibleMetas();for(let ot=0,ct=J.length;ot<ct;++ot)h=J[ot].controller.getMinMax(this,n),C||(d=Math.min(d,h.min)),D||(g=Math.max(g,h.max));return d=D&&d>g?g:d,g=C&&d>g?d:g,{min:Wt(d,Wt(g,d)),max:Wt(g,Wt(d,g))}}getPadding(){return{left:this.paddingLeft||0,top:this.paddingTop||0,right:this.paddingRight||0,bottom:this.paddingBottom||0}}getTicks(){return this.ticks}getLabels(){const n=this.chart.data;return this.options.labels||(this.isHorizontal()?n.xLabels:n.yLabels)||n.labels||[]}beforeLayout(){this._cache={},this._dataLimitsCached=!1}beforeUpdate(){We(this.options.beforeUpdate,[this])}update(n,h,d){const{beginAtZero:g,grace:C,ticks:D}=this.options,J=D.sampleSize;this.beforeUpdate(),this.maxWidth=n,this.maxHeight=h,this._margins=d=Object.assign({left:0,right:0,top:0,bottom:0},d),this.ticks=null,this._labelSizes=null,this._gridLineItems=null,this._labelItems=null,this.beforeSetDimensions(),this.setDimensions(),this.afterSetDimensions(),this._maxLength=this.isHorizontal()?this.width+d.left+d.right:this.height+d.top+d.bottom,this._dataLimitsCached||(this.beforeDataLimits(),this.determineDataLimits(),this.afterDataLimits(),this._range=ks(this,C,g),this._dataLimitsCached=!0),this.beforeBuildTicks(),this.ticks=this.buildTicks()||[],this.afterBuildTicks();const ot=J<this.ticks.length;this._convertTicksToLabels(ot?Wn(this.ticks,J):this.ticks),this.configure(),this.beforeCalculateLabelRotation(),this.calculateLabelRotation(),this.afterCalculateLabelRotation(),D.display&&(D.autoSkip||"auto"===D.source)&&(this.ticks=function xn(p,n){const h=p.options.ticks,d=h.maxTicksLimit||function(Pt){const Mt=Pt.options.offset,Vt=Pt._tickSize();return Math.floor(Math.min(Pt._length/Vt+(Mt?0:1),Pt._maxLength/Vt))}(p),g=h.major.enabled?function(Pt){const Mt=[];let Vt,Qt;for(Vt=0,Qt=Pt.length;Vt<Qt;Vt++)Pt[Vt].major&&Mt.push(Vt);return Mt}(n):[],C=g.length,D=g[0],J=g[C-1],ot=[];if(C>d)return function(Pt,Mt,Vt,Qt){let ue,ge=0,Ae=Vt[0];for(Qt=Math.ceil(Qt),ue=0;ue<Pt.length;ue++)ue===Ae&&(Mt.push(Pt[ue]),ge++,Ae=Vt[ge*Qt])}(n,ot,g,C/d),ot;const ct=function(Pt,Mt,Vt){const Qt=function(Ae){const Ue=Ae.length;let Je,ai;if(Ue<2)return!1;for(ai=Ae[0],Je=1;Je<Ue;++Je)if(Ae[Je]-Ae[Je-1]!==ai)return!1;return ai}(Pt),ue=Mt.length/Vt;if(!Qt)return Math.max(ue,1);const ge=Fn(Qt);for(let Ae=0,Ue=ge.length-1;Ae<Ue;Ae++){const Je=ge[Ae];if(Je>ue)return Je}return Math.max(ue,1)}(g,n,d);if(C>0){let Pt,Mt;const Vt=C>1?Math.round((J-D)/(C-1)):null;for(lo(n,ot,ct,lt(Vt)?0:D-Vt,D),Pt=0,Mt=C-1;Pt<Mt;Pt++)lo(n,ot,ct,g[Pt],g[Pt+1]);return lo(n,ot,ct,J,lt(Vt)?n.length:J+Vt),ot}return lo(n,ot,ct),ot}(this,this.ticks),this._labelSizes=null),ot&&this._convertTicksToLabels(this.ticks),this.beforeFit(),this.fit(),this.afterFit(),this.afterUpdate()}configure(){let n,h,d=this.options.reverse;this.isHorizontal()?(n=this.left,h=this.right):(n=this.top,h=this.bottom,d=!d),this._startPixel=n,this._endPixel=h,this._reversePixels=d,this._length=h-n,this._alignToPixels=this.options.alignToPixels}afterUpdate(){We(this.options.afterUpdate,[this])}beforeSetDimensions(){We(this.options.beforeSetDimensions,[this])}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=0,this.right=this.width):(this.height=this.maxHeight,this.top=0,this.bottom=this.height),this.paddingLeft=0,this.paddingTop=0,this.paddingRight=0,this.paddingBottom=0}afterSetDimensions(){We(this.options.afterSetDimensions,[this])}_callHooks(n){this.chart.notifyPlugins(n,this.getContext()),We(this.options[n],[this])}beforeDataLimits(){this._callHooks("beforeDataLimits")}determineDataLimits(){}afterDataLimits(){this._callHooks("afterDataLimits")}beforeBuildTicks(){this._callHooks("beforeBuildTicks")}buildTicks(){return[]}afterBuildTicks(){this._callHooks("afterBuildTicks")}beforeTickToLabelConversion(){We(this.options.beforeTickToLabelConversion,[this])}generateTickLabels(n){const h=this.options.ticks;let d,g,C;for(d=0,g=n.length;d<g;d++)C=n[d],C.label=We(h.callback,[C.value,d,n],this)}afterTickToLabelConversion(){We(this.options.afterTickToLabelConversion,[this])}beforeCalculateLabelRotation(){We(this.options.beforeCalculateLabelRotation,[this])}calculateLabelRotation(){const n=this.options,h=n.ticks,d=this.ticks.length,g=h.minRotation||0,C=h.maxRotation;let D,J,ot,ct=g;if(!this._isVisible()||!h.display||g>=C||d<=1||!this.isHorizontal())return void(this.labelRotation=g);const Pt=this._getLabelSizes(),Mt=Pt.widest.width,Vt=Pt.highest.height,Qt=En(this.chart.width-Mt,0,this.maxWidth);D=n.offset?this.maxWidth/d:Qt/(d-1),Mt+6>D&&(D=Qt/(d-(n.offset?.5:1)),J=this.maxHeight-Z(n.grid)-h.padding-Tt(n.title,this.chart.options.font),ot=Math.sqrt(Mt*Mt+Vt*Vt),ct=po(Math.min(Math.asin(En((Pt.highest.height+6)/D,-1,1)),Math.asin(En(J/ot,-1,1))-Math.asin(En(Vt/ot,-1,1)))),ct=Math.max(g,Math.min(C,ct))),this.labelRotation=ct}afterCalculateLabelRotation(){We(this.options.afterCalculateLabelRotation,[this])}beforeFit(){We(this.options.beforeFit,[this])}fit(){const n={width:0,height:0},{chart:h,options:{ticks:d,title:g,grid:C}}=this,D=this._isVisible(),J=this.isHorizontal();if(D){const ot=Tt(g,h.options.font);if(J?(n.width=this.maxWidth,n.height=Z(C)+ot):(n.height=this.maxHeight,n.width=Z(C)+ot),d.display&&this.ticks.length){const{first:ct,last:Pt,widest:Mt,highest:Vt}=this._getLabelSizes(),Qt=2*d.padding,ue=No(this.labelRotation),ge=Math.cos(ue),Ae=Math.sin(ue);J?n.height=Math.min(this.maxHeight,n.height+(d.mirror?0:Ae*Mt.width+ge*Vt.height)+Qt):n.width=Math.min(this.maxWidth,n.width+(d.mirror?0:ge*Mt.width+Ae*Vt.height)+Qt),this._calculatePadding(ct,Pt,Ae,ge)}}this._handleMargins(),J?(this.width=this._length=h.width-this._margins.left-this._margins.right,this.height=n.height):(this.width=n.width,this.height=this._length=h.height-this._margins.top-this._margins.bottom)}_calculatePadding(n,h,d,g){const{ticks:{align:C,padding:D},position:J}=this.options,ot=0!==this.labelRotation,ct="top"!==J&&"x"===this.axis;if(this.isHorizontal()){const Pt=this.getPixelForTick(0)-this.left,Mt=this.right-this.getPixelForTick(this.ticks.length-1);let Vt=0,Qt=0;ot?ct?(Vt=g*n.width,Qt=d*h.height):(Vt=d*n.height,Qt=g*h.width):"start"===C?Qt=h.width:"end"===C?Vt=n.width:(Vt=n.width/2,Qt=h.width/2),this.paddingLeft=Math.max((Vt-Pt+D)*this.width/(this.width-Pt),0),this.paddingRight=Math.max((Qt-Mt+D)*this.width/(this.width-Mt),0)}else{let Pt=h.height/2,Mt=n.height/2;"start"===C?(Pt=0,Mt=n.height):"end"===C&&(Pt=h.height,Mt=0),this.paddingTop=Pt+D,this.paddingBottom=Mt+D}}_handleMargins(){this._margins&&(this._margins.left=Math.max(this.paddingLeft,this._margins.left),this._margins.top=Math.max(this.paddingTop,this._margins.top),this._margins.right=Math.max(this.paddingRight,this._margins.right),this._margins.bottom=Math.max(this.paddingBottom,this._margins.bottom))}afterFit(){We(this.options.afterFit,[this])}isHorizontal(){const{axis:n,position:h}=this.options;return"top"===h||"bottom"===h||"x"===n}isFullSize(){return this.options.fullSize}_convertTicksToLabels(n){let h,d;for(this.beforeTickToLabelConversion(),this.generateTickLabels(n),h=0,d=n.length;h<d;h++)lt(n[h].label)&&(n.splice(h,1),d--,h--);this.afterTickToLabelConversion()}_getLabelSizes(){let n=this._labelSizes;if(!n){const h=this.options.ticks.sampleSize;let d=this.ticks;h<d.length&&(d=Wn(d,h)),this._labelSizes=n=this._computeLabelSizes(d,d.length)}return n}_computeLabelSizes(n,h){const{ctx:d,_longestTextCache:g}=this,C=[],D=[];let J,ot,ct,Pt,Mt,Vt,Qt,ue,ge,Ae,Ue,Je=0,ai=0;for(J=0;J<h;++J){if(Pt=n[J].label,Mt=this._resolveTickFontOptions(J),d.font=Vt=Mt.string,Qt=g[Vt]=g[Vt]||{data:{},gc:[]},ue=Mt.lineHeight,ge=Ae=0,lt(Pt)||ht(Pt)){if(ht(Pt))for(ot=0,ct=Pt.length;ot<ct;++ot)Ue=Pt[ot],lt(Ue)||ht(Ue)||(ge=he(d,Qt.data,Qt.gc,ge,Ue),Ae+=ue)}else ge=he(d,Qt.data,Qt.gc,ge,Pt),Ae=ue;C.push(ge),D.push(Ae),Je=Math.max(ge,Je),ai=Math.max(Ae,ai)}var On;On=h,He(g,jn=>{const vn=jn.gc,Xn=vn.length/2;let Yn;if(Xn>On){for(Yn=0;Yn<Xn;++Yn)delete jn.data[vn[Yn]];vn.splice(0,Xn)}});const pi=C.indexOf(Je),Ei=D.indexOf(ai),ln=pn=>({width:C[pn]||0,height:D[pn]||0});return{first:ln(0),last:ln(h-1),widest:ln(pi),highest:ln(Ei),widths:C,heights:D}}getLabelForValue(n){return n}getPixelForValue(n,h){return NaN}getValueForPixel(n){}getPixelForTick(n){const h=this.ticks;return n<0||n>h.length-1?null:this.getPixelForValue(h[n].value)}getPixelForDecimal(n){this._reversePixels&&(n=1-n);const h=this._startPixel+n*this._length;return Ft(this._alignToPixels?De(this.chart,h,0):h)}getDecimalForPixel(n){const h=(n-this._startPixel)/this._length;return this._reversePixels?1-h:h}getBasePixel(){return this.getPixelForValue(this.getBaseValue())}getBaseValue(){const{min:n,max:h}=this;return n<0&&h<0?h:n>0&&h>0?n:0}getContext(n){const h=this.ticks||[];if(n>=0&&n<h.length){const d=h[n];return d.$context||(d.$context=us(this.getContext(),{tick:d,index:n,type:"tick"}))}return this.$context||(this.$context=us(this.chart.getContext(),{scale:this,type:"scale"}))}_tickSize(){const n=this.options.ticks,h=No(this.labelRotation),d=Math.abs(Math.cos(h)),g=Math.abs(Math.sin(h)),C=this._getLabelSizes(),D=n.autoSkipPadding||0,J=C?C.widest.width+D:0,ot=C?C.highest.height+D:0;return this.isHorizontal()?ot*d>J*g?J/d:ot/g:ot*g<J*d?ot/d:J/g}_isVisible(){const n=this.options.display;return"auto"!==n?!!n:this.getMatchingVisibleMetas().length>0}_computeGridLineItems(n){const h=this.axis,d=this.chart,g=this.options,{grid:C,position:D}=g,J=C.offset,ot=this.isHorizontal(),ct=this.ticks.length+(J?1:0),Pt=Z(C),Mt=[],Vt=C.setContext(this.getContext()),Qt=Vt.drawBorder?Vt.borderWidth:0,ue=Qt/2,ge=function(_n){return De(d,_n,Qt)};let Ae,Ue,Je,ai,pi,Ei,ln,pn,On,jn,vn,Xn;if("top"===D)Ae=ge(this.bottom),Ei=this.bottom-Pt,pn=Ae-ue,jn=ge(n.top)+ue,Xn=n.bottom;else if("bottom"===D)Ae=ge(this.top),jn=n.top,Xn=ge(n.bottom)-ue,Ei=Ae+ue,pn=this.top+Pt;else if("left"===D)Ae=ge(this.right),pi=this.right-Pt,ln=Ae-ue,On=ge(n.left)+ue,vn=n.right;else if("right"===D)Ae=ge(this.left),On=n.left,vn=ge(n.right)-ue,pi=Ae+ue,ln=this.left+Pt;else if("x"===h){if("center"===D)Ae=ge((n.top+n.bottom)/2+.5);else if(Lt(D)){const _n=Object.keys(D)[0];Ae=ge(this.chart.scales[_n].getPixelForValue(D[_n]))}jn=n.top,Xn=n.bottom,Ei=Ae+ue,pn=Ei+Pt}else if("y"===h){if("center"===D)Ae=ge((n.left+n.right)/2);else if(Lt(D)){const _n=Object.keys(D)[0];Ae=ge(this.chart.scales[_n].getPixelForValue(D[_n]))}pi=Ae-ue,ln=pi-Pt,On=n.left,vn=n.right}const Yn=Ot(g.ticks.maxTicksLimit,ct),ro=Math.max(1,Math.ceil(ct/Yn));for(Ue=0;Ue<ct;Ue+=ro){const _n=C.setContext(this.getContext(Ue)),An=_n.lineWidth,xr=_n.color,Zr=C.borderDash||[],Cs=_n.borderDashOffset,qs=_n.tickWidth,Na=_n.tickColor,ka=_n.tickBorderDash||[],nl=_n.tickBorderDashOffset;Je=Xt(this,Ue,J),void 0!==Je&&(ai=De(d,Je,An),ot?pi=ln=On=vn=ai:Ei=pn=jn=Xn=ai,Mt.push({tx1:pi,ty1:Ei,tx2:ln,ty2:pn,x1:On,y1:jn,x2:vn,y2:Xn,width:An,color:xr,borderDash:Zr,borderDashOffset:Cs,tickWidth:qs,tickColor:Na,tickBorderDash:ka,tickBorderDashOffset:nl}))}return this._ticksLength=ct,this._borderValue=Ae,Mt}_computeLabelItems(n){const h=this.axis,d=this.options,{position:g,ticks:C}=d,D=this.isHorizontal(),J=this.ticks,{align:ot,crossAlign:ct,padding:Pt,mirror:Mt}=C,Vt=Z(d.grid),Qt=Vt+Pt,ue=Mt?-Pt:Qt,ge=-No(this.labelRotation),Ae=[];let Ue,Je,ai,pi,Ei,ln,pn,On,jn,vn,Xn,Yn,ro="middle";if("top"===g)ln=this.bottom-ue,pn=this._getXAxisLabelAlignment();else if("bottom"===g)ln=this.top+ue,pn=this._getXAxisLabelAlignment();else if("left"===g){const An=this._getYAxisLabelAlignment(Vt);pn=An.textAlign,Ei=An.x}else if("right"===g){const An=this._getYAxisLabelAlignment(Vt);pn=An.textAlign,Ei=An.x}else if("x"===h){if("center"===g)ln=(n.top+n.bottom)/2+Qt;else if(Lt(g)){const An=Object.keys(g)[0];ln=this.chart.scales[An].getPixelForValue(g[An])+Qt}pn=this._getXAxisLabelAlignment()}else if("y"===h){if("center"===g)Ei=(n.left+n.right)/2-Qt;else if(Lt(g)){const An=Object.keys(g)[0];Ei=this.chart.scales[An].getPixelForValue(g[An])}pn=this._getYAxisLabelAlignment(Vt).textAlign}"y"===h&&("start"===ot?ro="top":"end"===ot&&(ro="bottom"));const _n=this._getLabelSizes();for(Ue=0,Je=J.length;Ue<Je;++Ue){ai=J[Ue],pi=ai.label;const An=C.setContext(this.getContext(Ue));On=this.getPixelForTick(Ue)+C.labelOffset,jn=this._resolveTickFontOptions(Ue),vn=jn.lineHeight,Xn=ht(pi)?pi.length:1;const xr=Xn/2,Zr=An.color,Cs=An.textStrokeColor,qs=An.textStrokeWidth;let Na;if(D?(Ei=On,Yn="top"===g?"near"===ct||0!==ge?-Xn*vn+vn/2:"center"===ct?-_n.highest.height/2-xr*vn+vn:vn/2-_n.highest.height:"near"===ct||0!==ge?vn/2:"center"===ct?_n.highest.height/2-xr*vn:_n.highest.height-Xn*vn,Mt&&(Yn*=-1)):(ln=On,Yn=(1-Xn)*vn/2),An.showLabelBackdrop){const ka=Lo(An.backdropPadding),nl=_n.heights[Ue],gl=_n.widths[Ue];let Il=ln+Yn-ka.top,ol=Ei-ka.left;switch(ro){case"middle":Il-=nl/2;break;case"bottom":Il-=nl}switch(pn){case"center":ol-=gl/2;break;case"right":ol-=gl}Na={left:ol,top:Il,width:gl+ka.width,height:nl+ka.height,color:An.backdropColor}}Ae.push({rotation:ge,label:pi,font:jn,color:Zr,strokeColor:Cs,strokeWidth:qs,textOffset:Yn,textAlign:pn,textBaseline:ro,translation:[Ei,ln],backdrop:Na})}return Ae}_getXAxisLabelAlignment(){const{position:n,ticks:h}=this.options;if(-No(this.labelRotation))return"top"===n?"left":"right";let d="center";return"start"===h.align?d="left":"end"===h.align&&(d="right"),d}_getYAxisLabelAlignment(n){const{position:h,ticks:{crossAlign:d,mirror:g,padding:C}}=this.options,D=n+C,J=this._getLabelSizes().widest.width;let ot,ct;return"left"===h?g?(ct=this.right+C,"near"===d?ot="left":"center"===d?(ot="center",ct+=J/2):(ot="right",ct+=J)):(ct=this.right-D,"near"===d?ot="right":"center"===d?(ot="center",ct-=J/2):(ot="left",ct=this.left)):"right"===h?g?(ct=this.left+C,"near"===d?ot="right":"center"===d?(ot="center",ct-=J/2):(ot="left",ct-=J)):(ct=this.left+D,"near"===d?ot="left":"center"===d?(ot="center",ct+=J/2):(ot="right",ct=this.right)):ot="right",{textAlign:ot,x:ct}}_computeLabelArea(){if(this.options.ticks.mirror)return;const n=this.chart,h=this.options.position;return"left"===h||"right"===h?{top:0,left:this.left,bottom:n.height,right:this.right}:"top"===h||"bottom"===h?{top:this.top,left:0,bottom:this.bottom,right:n.width}:void 0}drawBackground(){const{ctx:n,options:{backgroundColor:h},left:d,top:g,width:C,height:D}=this;h&&(n.save(),n.fillStyle=h,n.fillRect(d,g,C,D),n.restore())}getLineWidthForValue(n){const h=this.options.grid;if(!this._isVisible()||!h.display)return 0;const d=this.ticks.findIndex(g=>g.value===n);return d>=0?h.setContext(this.getContext(d)).lineWidth:0}drawGrid(n){const h=this.options.grid,d=this.ctx,g=this._gridLineItems||(this._gridLineItems=this._computeGridLineItems(n));let C,D;const J=(ot,ct,Pt)=>{Pt.width&&Pt.color&&(d.save(),d.lineWidth=Pt.width,d.strokeStyle=Pt.color,d.setLineDash(Pt.borderDash||[]),d.lineDashOffset=Pt.borderDashOffset,d.beginPath(),d.moveTo(ot.x,ot.y),d.lineTo(ct.x,ct.y),d.stroke(),d.restore())};if(h.display)for(C=0,D=g.length;C<D;++C){const ot=g[C];h.drawOnChartArea&&J({x:ot.x1,y:ot.y1},{x:ot.x2,y:ot.y2},ot),h.drawTicks&&J({x:ot.tx1,y:ot.ty1},{x:ot.tx2,y:ot.ty2},{color:ot.tickColor,width:ot.tickWidth,borderDash:ot.tickBorderDash,borderDashOffset:ot.tickBorderDashOffset})}}drawBorder(){const{chart:n,ctx:h,options:{grid:d}}=this,g=d.setContext(this.getContext()),C=d.drawBorder?g.borderWidth:0;if(!C)return;const D=d.setContext(this.getContext(0)).lineWidth,J=this._borderValue;let ot,ct,Pt,Mt;this.isHorizontal()?(ot=De(n,this.left,C)-C/2,ct=De(n,this.right,D)+D/2,Pt=Mt=J):(Pt=De(n,this.top,C)-C/2,Mt=De(n,this.bottom,D)+D/2,ot=ct=J),h.save(),h.lineWidth=g.borderWidth,h.strokeStyle=g.borderColor,h.beginPath(),h.moveTo(ot,Pt),h.lineTo(ct,Mt),h.stroke(),h.restore()}drawLabels(n){if(!this.options.ticks.display)return;const h=this.ctx,d=this._computeLabelArea();d&&ii(h,d);const g=this._labelItems||(this._labelItems=this._computeLabelItems(n));let C,D;for(C=0,D=g.length;C<D;++C){const J=g[C],ot=J.font,ct=J.label;J.backdrop&&(h.fillStyle=J.backdrop.color,h.fillRect(J.backdrop.left,J.backdrop.top,J.backdrop.width,J.backdrop.height)),hi(h,ct,0,J.textOffset,ot,J)}d&&Si(h)}drawTitle(){const{ctx:n,options:{position:h,title:d,reverse:g}}=this;if(!d.display)return;const C=Ro(d.font),D=Lo(d.padding),J=d.align;let ot=C.lineHeight/2;"bottom"===h||"center"===h||Lt(h)?(ot+=D.bottom,ht(d.text)&&(ot+=C.lineHeight*(d.text.length-1))):ot+=D.top;const{titleX:ct,titleY:Pt,maxWidth:Mt,rotation:Vt}=function(Qt,ue,ge,Ae){const{top:Ue,left:Je,bottom:ai,right:pi,chart:Ei}=Qt,{chartArea:ln,scales:pn}=Ei;let On,jn,vn,Xn=0;const Yn=ai-Ue,ro=pi-Je;if(Qt.isHorizontal()){if(jn=xt(Ae,Je,pi),Lt(ge)){const _n=Object.keys(ge)[0];vn=pn[_n].getPixelForValue(ge[_n])+Yn-ue}else vn="center"===ge?(ln.bottom+ln.top)/2+Yn-ue:oo(Qt,ge,ue);On=pi-Je}else{if(Lt(ge)){const _n=Object.keys(ge)[0];jn=pn[_n].getPixelForValue(ge[_n])-ro+ue}else jn="center"===ge?(ln.left+ln.right)/2-ro+ue:oo(Qt,ge,ue);vn=xt(Ae,ai,Ue),Xn="left"===ge?-ee:ee}return{titleX:jn,titleY:vn,maxWidth:On,rotation:Xn}}(this,ot,h,J);hi(n,d.text,0,0,C,{color:d.color,maxWidth:Mt,rotation:Vt,textAlign:ce(J,h,g),textBaseline:"middle",translation:[ct,Pt]})}draw(n){this._isVisible()&&(this.drawBackground(),this.drawGrid(n),this.drawBorder(),this.drawTitle(),this.drawLabels(n))}_layers(){const n=this.options,h=n.ticks&&n.ticks.z||0,d=Ot(n.grid&&n.grid.z,-1);return this._isVisible()&&this.draw===Ke.prototype.draw?[{z:d,draw:g=>{this.drawBackground(),this.drawGrid(g),this.drawTitle()}},{z:d+1,draw:()=>{this.drawBorder()}},{z:h,draw:g=>{this.drawLabels(g)}}]:[{z:h,draw:g=>{this.draw(g)}}]}getMatchingVisibleMetas(n){const h=this.chart.getSortedVisibleDatasetMetas(),d=this.axis+"AxisID",g=[];let C,D;for(C=0,D=h.length;C<D;++C){const J=h[C];J[d]!==this.id||n&&J.type!==n||g.push(J)}return g}_resolveTickFontOptions(n){return Ro(this.options.ticks.setContext(this.getContext(n)).font)}_maxDigits(){const n=this._resolveTickFontOptions(0).lineHeight;return(this.isHorizontal()?this.width:this.height)/n}}class $e{constructor(n,h,d){this.type=n,this.scope=h,this.override=d,this.items=Object.create(null)}isForType(n){return Object.prototype.isPrototypeOf.call(this.type.prototype,n.prototype)}register(n){const h=Object.getPrototypeOf(n);let d;var J;"id"in(J=h)&&"defaults"in J&&(d=this.register(h));const g=this.items,C=n.id,D=this.scope+"."+C;if(!C)throw new Error("class does not have id: "+n);return C in g||(g[C]=n,function(J,ot,ct){const Pt=qt(Object.create(null),[ct?Ti.get(ct):{},Ti.get(ot),J.defaults]);var Mt,Vt;Ti.set(ot,Pt),J.defaultRoutes&&(Mt=ot,Vt=J.defaultRoutes,Object.keys(Vt).forEach(Qt=>{const ue=Qt.split("."),ge=ue.pop(),Ae=[Mt].concat(ue).join("."),Ue=Vt[Qt].split("."),Je=Ue.pop(),ai=Ue.join(".");Ti.route(Ae,ge,ai,Je)})),J.descriptors&&Ti.describe(ot,J.descriptors)}(n,D,d),this.override&&Ti.override(n.id,n.overrides)),D}get(n){return this.items[n]}unregister(n){const h=this.items,d=n.id,g=this.scope;d in h&&delete h[d],g&&d in Ti[g]&&(delete Ti[g][d],this.override&&delete Pi[d])}}var ti=new class{constructor(){this.controllers=new $e(ri,"datasets",!0),this.elements=new $e(Di,"elements"),this.plugins=new $e(Object,"plugins"),this.scales=new $e(Ke,"scales"),this._typedRegistries=[this.controllers,this.scales,this.elements]}add(...p){this._each("register",p)}remove(...p){this._each("unregister",p)}addControllers(...p){this._each("register",p,this.controllers)}addElements(...p){this._each("register",p,this.elements)}addPlugins(...p){this._each("register",p,this.plugins)}addScales(...p){this._each("register",p,this.scales)}getController(p){return this._get(p,this.controllers,"controller")}getElement(p){return this._get(p,this.elements,"element")}getPlugin(p){return this._get(p,this.plugins,"plugin")}getScale(p){return this._get(p,this.scales,"scale")}removeControllers(...p){this._each("unregister",p,this.controllers)}removeElements(...p){this._each("unregister",p,this.elements)}removePlugins(...p){this._each("unregister",p,this.plugins)}removeScales(...p){this._each("unregister",p,this.scales)}_each(p,n,h){[...n].forEach(d=>{const g=h||this._getRegistryForType(d);h||g.isForType(d)||g===this.plugins&&d.id?this._exec(p,g,d):He(d,C=>{const D=h||this._getRegistryForType(C);this._exec(p,D,C)})})}_exec(p,n,h){const d=ye(p);We(h["before"+d],[],h),n[p](h),We(h["after"+d],[],h)}_getRegistryForType(p){for(let n=0;n<this._typedRegistries.length;n++){const h=this._typedRegistries[n];if(h.isForType(p))return h}return this.plugins}_get(p,n,h){const d=n.get(p);if(void 0===d)throw new Error('"'+p+'" is not a registered '+h+".");return d}};class Bi{constructor(){this._init=[]}notify(n,h,d,g){"beforeInit"===h&&(this._init=this._createDescriptors(n,!0),this._notify(this._init,n,"install"));const C=g?this._descriptors(n).filter(g):this._descriptors(n),D=this._notify(C,n,h,d);return"afterDestroy"===h&&(this._notify(C,n,"stop"),this._notify(this._init,n,"uninstall")),D}_notify(n,h,d,g){g=g||{};for(const C of n){const D=C.plugin;if(!1===We(D[d],[h,g,C.options],D)&&g.cancelable)return!1}return!0}invalidate(){lt(this._cache)||(this._oldCache=this._cache,this._cache=void 0)}_descriptors(n){if(this._cache)return this._cache;const h=this._cache=this._createDescriptors(n);return this._notifyStateChanges(n),h}_createDescriptors(n,h){const d=n&&n.config,g=Ot(d.options&&d.options.plugins,{}),C=function(D){const J=[],ot=Object.keys(ti.plugins.items);for(let Pt=0;Pt<ot.length;Pt++)J.push(ti.getPlugin(ot[Pt]));const ct=D.plugins||[];for(let Pt=0;Pt<ct.length;Pt++){const Mt=ct[Pt];-1===J.indexOf(Mt)&&J.push(Mt)}return J}(d);return!1!==g||h?function(D,J,ot,ct){const Pt=[],Mt=D.getContext();for(let Vt=0;Vt<J.length;Vt++){const Qt=J[Vt],ue=Wi(ot[Qt.id],ct);null!==ue&&Pt.push({plugin:Qt,options:en(D.config,Qt,ue,Mt)})}return Pt}(n,C,g,h):[]}_notifyStateChanges(n){const h=this._oldCache||[],d=this._cache,g=(C,D)=>C.filter(J=>!D.some(ot=>J.plugin.id===ot.plugin.id));this._notify(g(h,d),n,"stop"),this._notify(g(d,h),n,"start")}}function Wi(p,n){return n||!1!==p?!0===p?{}:p:null}function en(p,n,h,d){const g=p.pluginScopeKeys(n),C=p.getOptionScopes(h,g);return p.createResolver(C,d,[""],{scriptable:!1,indexable:!1,allKeys:!0})}function ji(p,n){return((n.datasets||{})[p]||{}).indexAxis||n.indexAxis||(Ti.datasets[p]||{}).indexAxis||"x"}function Gi(p,n){return"x"===p||"y"===p?p:n.axis||("top"===(h=n.position)||"bottom"===h?"x":"left"===h||"right"===h?"y":void 0)||p.charAt(0).toLowerCase();var h}function Qn(p){const n=p.options||(p.options={});n.plugins=Ot(n.plugins,{}),n.scales=function(h,d){const g=Pi[h.type]||{scales:{}},C=d.scales||{},D=ji(h.type,d),J=Object.create(null),ot=Object.create(null);return Object.keys(C).forEach(ct=>{const Pt=C[ct];if(!Lt(Pt))return console.error(`Invalid scale configuration for scale: ${ct}`);if(Pt._proxy)return console.warn(`Ignoring resolver passed as options for scale: ${ct}`);const Mt=Gi(ct,Pt),Vt=Mt===D?"_index_":"_value_",Qt=g.scales||{};J[Mt]=J[Mt]||ct,ot[ct]=Kt(Object.create(null),[{axis:Mt},Pt,Qt[Mt],Qt[Vt]])}),h.data.datasets.forEach(ct=>{const Pt=ct.type||h.type,Mt=ct.indexAxis||ji(Pt,d),Vt=(Pi[Pt]||{}).scales||{};Object.keys(Vt).forEach(Qt=>{const ue=function(Ae,Ue){let Je=Ae;return"_index_"===Ae?Je=Ue:"_value_"===Ae&&(Je="x"===Ue?"y":"x"),Je}(Qt,Mt),ge=ct[ue+"AxisID"]||J[ue]||ue;ot[ge]=ot[ge]||Object.create(null),Kt(ot[ge],[{axis:ue},C[ge],Vt[Qt]])})}),Object.keys(ot).forEach(ct=>{const Pt=ot[ct];Kt(Pt,[Ti.scales[Pt.type],Ti.scale])}),ot}(p,n)}function Zn(p){return(p=p||{}).datasets=p.datasets||[],p.labels=p.labels||[],p}const ho=new Map,uo=new Set;function _o(p,n){let h=ho.get(p);return h||(h=n(),ho.set(p,h),uo.add(h)),h}const ar=(p,n,h)=>{const d=Te(n,h);void 0!==d&&p.add(d)};class mr{constructor(n){var h;this._config=((h=(h=n)||{}).data=Zn(h.data),Qn(h),h),this._scopeCache=new Map,this._resolverCache=new Map}get platform(){return this._config.platform}get type(){return this._config.type}set type(n){this._config.type=n}get data(){return this._config.data}set data(n){this._config.data=Zn(n)}get options(){return this._config.options}set options(n){this._config.options=n}get plugins(){return this._config.plugins}update(){const n=this._config;this.clearCache(),Qn(n)}clearCache(){this._scopeCache.clear(),this._resolverCache.clear()}datasetScopeKeys(n){return _o(n,()=>[[`datasets.${n}`,""]])}datasetAnimationScopeKeys(n,h){return _o(`${n}.transition.${h}`,()=>[[`datasets.${n}.transitions.${h}`,`transitions.${h}`],[`datasets.${n}`,""]])}datasetElementScopeKeys(n,h){return _o(`${n}-${h}`,()=>[[`datasets.${n}.elements.${h}`,`datasets.${n}`,`elements.${h}`,""]])}pluginScopeKeys(n){const h=n.id;return _o(`${this.type}-plugin-${h}`,()=>[[`plugins.${h}`,...n.additionalOptionScopes||[]]])}_cachedScopes(n,h){const d=this._scopeCache;let g=d.get(n);return g&&!h||(g=new Map,d.set(n,g)),g}getOptionScopes(n,h,d){const{options:g,type:C}=this,D=this._cachedScopes(n,d),J=D.get(h);if(J)return J;const ot=new Set;h.forEach(Pt=>{n&&(ot.add(n),Pt.forEach(Mt=>ar(ot,n,Mt))),Pt.forEach(Mt=>ar(ot,g,Mt)),Pt.forEach(Mt=>ar(ot,Pi[C]||{},Mt)),Pt.forEach(Mt=>ar(ot,Ti,Mt)),Pt.forEach(Mt=>ar(ot,Ji,Mt))});const ct=Array.from(ot);return 0===ct.length&&ct.push(Object.create(null)),uo.has(h)&&D.set(h,ct),ct}chartOptionScopes(){const{options:n,type:h}=this;return[n,Pi[h]||{},Ti.datasets[h]||{},{type:h},Ti,Ji]}resolveNamedOptions(n,h,d,g=[""]){const C={$shared:!0},{resolver:D,subPrefixes:J}=Eo(this._resolverCache,n,g);let ot=D;(function(ct,Pt){const{isScriptable:Mt,isIndexable:Vt}=vi(ct);for(const Qt of Pt){const ue=Mt(Qt),ge=Vt(Qt),Ae=(ge||ue)&&ct[Qt];if(ue&&(fi(Ae)||jo(Ae))||ge&&ht(Ae))return!0}return!1})(D,h)&&(C.$shared=!1,ot=ei(D,d=fi(d)?d():d,this.createResolver(n,d,J)));for(const ct of h)C[ct]=ot[ct];return C}createResolver(n,h,d=[""],g){const{resolver:C}=Eo(this._resolverCache,n,d);return Lt(h)?ei(C,h,void 0,g):C}}function Eo(p,n,h){let d=p.get(n);d||(d=new Map,p.set(n,d));const g=h.join();let C=d.get(g);return C||(C={resolver:je(n,h),subPrefixes:h.filter(D=>!D.toLowerCase().includes("hover"))},d.set(g,C)),C}const jo=p=>Lt(p)&&Object.getOwnPropertyNames(p).reduce((n,h)=>n||fi(p[h]),!1),Un=["top","bottom","left","right","chartArea"];function Bo(p,n){return"top"===p||"bottom"===p||-1===Un.indexOf(p)&&"x"===n}function pr(p,n){return function(h,d){return h[p]===d[p]?h[n]-d[n]:h[p]-d[p]}}function fo(p){const n=p.chart,h=n.options.animation;n.notifyPlugins("afterRender"),We(h&&h.onComplete,[p],n)}function Hi(p){const n=p.chart,h=n.options.animation;We(h&&h.onProgress,[p],n)}function tr(p){return Gn()&&"string"==typeof p?p=document.getElementById(p):p&&p.length&&(p=p[0]),p&&p.canvas&&(p=p.canvas),p}const ps={},Is=p=>{const n=tr(p);return Object.values(ps).filter(h=>h.canvas===n).pop()};function jr(p,n,h){const d=Object.keys(p);for(const g of d){const C=+g;if(C>=n){const D=p[g];delete p[g],(h>0||C>n)&&(p[C+h]=D)}}}class So{constructor(n,h){const d=this.config=new mr(h),g=tr(n),C=Is(g);if(C)throw new Error("Canvas is already in use. Chart with ID '"+C.id+"' must be destroyed before the canvas can be reused.");const D=d.createResolver(d.chartOptionScopes(),this.getContext());this.platform=new(d.platform||fr(g)),this.platform.updateConfig(d);const J=this.platform.acquireContext(g,D.aspectRatio),ot=J&&J.canvas,ct=ot&&ot.height,Pt=ot&&ot.width;this.id=Y(),this.ctx=J,this.canvas=ot,this.width=Pt,this.height=ct,this._options=D,this._aspectRatio=this.aspectRatio,this._layers=[],this._metasets=[],this._stacks=void 0,this.boxes=[],this.currentDevicePixelRatio=void 0,this.chartArea=void 0,this._active=[],this._lastEvent=void 0,this._listeners={},this._responsiveListeners=void 0,this._sortedMetasets=[],this.scales={},this._plugins=new Bi,this.$proxies={},this._hiddenIndices={},this.attached=!1,this._animationsDisabled=void 0,this.$context=void 0,this._doResize=Ct(Mt=>this.update(Mt),D.resizeDelay||0),this._dataChanges=[],ps[this.id]=this,J&&ot?(zt.listen(this,"complete",fo),zt.listen(this,"progress",Hi),this._initialize(),this.attached&&this.update()):console.error("Failed to create chart: can't acquire context from the given item")}get aspectRatio(){const{options:{aspectRatio:n,maintainAspectRatio:h},width:d,height:g,_aspectRatio:C}=this;return lt(n)?h&&C?C:g?d/g:null:n}get data(){return this.config.data}set data(n){this.config.data=n}get options(){return this._options}set options(n){this.config.options=n}_initialize(){return this.notifyPlugins("beforeInit"),this.options.responsive?this.resize():Vs(this,this.options.devicePixelRatio),this.bindEvents(),this.notifyPlugins("afterInit"),this}clear(){return Ge(this.canvas,this.ctx),this}stop(){return zt.stop(this),this}resize(n,h){zt.running(this)?this._resizeBeforeDraw={width:n,height:h}:this._resize(n,h)}_resize(n,h){const d=this.options,D=this.platform.getMaximumSize(this.canvas,n,h,d.maintainAspectRatio&&this.aspectRatio),J=d.devicePixelRatio||this.platform.getDevicePixelRatio(),ot=this.width?"resize":"attach";this.width=D.width,this.height=D.height,this._aspectRatio=this.aspectRatio,Vs(this,J,!0)&&(this.notifyPlugins("resize",{size:D}),We(d.onResize,[this,D],this),this.attached&&this._doResize(ot)&&this.render())}ensureScalesHaveIDs(){He(this.options.scales||{},(n,h)=>{n.id=h})}buildOrUpdateScales(){const n=this.options,h=n.scales,d=this.scales,g=Object.keys(d).reduce((D,J)=>(D[J]=!1,D),{});let C=[];h&&(C=C.concat(Object.keys(h).map(D=>{const J=h[D],ot=Gi(D,J),ct="r"===ot,Pt="x"===ot;return{options:J,dposition:ct?"chartArea":Pt?"bottom":"left",dtype:ct?"radialLinear":Pt?"category":"linear"}}))),He(C,D=>{const J=D.options,ot=J.id,ct=Gi(ot,J),Pt=Ot(J.type,D.dtype);void 0!==J.position&&Bo(J.position,ct)===Bo(D.dposition)||(J.position=D.dposition),g[ot]=!0;let Mt=null;ot in d&&d[ot].type===Pt?Mt=d[ot]:(Mt=new(ti.getScale(Pt))({id:ot,type:Pt,ctx:this.ctx,chart:this}),d[Mt.id]=Mt),Mt.init(J,n)}),He(g,(D,J)=>{D||delete d[J]}),He(d,D=>{Be.configure(this,D,D.options),Be.addBox(this,D)})}_updateMetasets(){const n=this._metasets,h=this.data.datasets.length,d=n.length;if(n.sort((g,C)=>g.index-C.index),d>h){for(let g=h;g<d;++g)this._destroyDatasetMeta(g);n.splice(h,d-h)}this._sortedMetasets=n.slice(0).sort(pr("order","index"))}_removeUnreferencedMetasets(){const{_metasets:n,data:{datasets:h}}=this;n.length>h.length&&delete this._stacks,n.forEach((d,g)=>{0===h.filter(C=>C===d._dataset).length&&this._destroyDatasetMeta(g)})}buildOrUpdateControllers(){const n=[],h=this.data.datasets;let d,g;for(this._removeUnreferencedMetasets(),d=0,g=h.length;d<g;d++){const C=h[d];let D=this.getDatasetMeta(d);const J=C.type||this.config.type;if(D.type&&D.type!==J&&(this._destroyDatasetMeta(d),D=this.getDatasetMeta(d)),D.type=J,D.indexAxis=C.indexAxis||ji(J,this.options),D.order=C.order||0,D.index=d,D.label=""+C.label,D.visible=this.isDatasetVisible(d),D.controller)D.controller.updateIndex(d),D.controller.linkScales();else{const ot=ti.getController(J),{datasetElementType:ct,dataElementType:Pt}=Ti.datasets[J];Object.assign(ot.prototype,{dataElementType:ti.getElement(Pt),datasetElementType:ct&&ti.getElement(ct)}),D.controller=new ot(this,d),n.push(D.controller)}}return this._updateMetasets(),n}_resetElements(){He(this.data.datasets,(n,h)=>{this.getDatasetMeta(h).controller.reset()},this)}reset(){this._resetElements(),this.notifyPlugins("reset")}update(n){const h=this.config;h.update();const d=this._options=h.createResolver(h.chartOptionScopes(),this.getContext()),g=this._animationsDisabled=!d.animation;if(this._updateScales(),this._checkEventBindings(),this._updateHiddenIndices(),this._plugins.invalidate(),!1===this.notifyPlugins("beforeUpdate",{mode:n,cancelable:!0}))return;const C=this.buildOrUpdateControllers();this.notifyPlugins("beforeElementsUpdate");let D=0;for(let ct=0,Pt=this.data.datasets.length;ct<Pt;ct++){const{controller:Mt}=this.getDatasetMeta(ct),Vt=!g&&-1===C.indexOf(Mt);Mt.buildOrUpdateElements(Vt),D=Math.max(+Mt.getMaxOverflow(),D)}D=this._minPadding=d.layout.autoPadding?D:0,this._updateLayout(D),g||He(C,ct=>{ct.reset()}),this._updateDatasets(n),this.notifyPlugins("afterUpdate",{mode:n}),this._layers.sort(pr("z","_idx"));const{_active:J,_lastEvent:ot}=this;ot?this._eventHandler(ot,!0):J.length&&this._updateHoverStyles(J,J,!0),this.render()}_updateScales(){He(this.scales,n=>{Be.removeBox(this,n)}),this.ensureScalesHaveIDs(),this.buildOrUpdateScales()}_checkEventBindings(){const n=this.options,h=new Set(Object.keys(this._listeners)),d=new Set(n.events);tn(h,d)&&!!this._responsiveListeners===n.responsive||(this.unbindEvents(),this.bindEvents())}_updateHiddenIndices(){const{_hiddenIndices:n}=this,h=this._getUniformDataChanges()||[];for(const{method:d,start:g,count:C}of h)jr(n,g,"_removeElements"===d?-C:C)}_getUniformDataChanges(){const n=this._dataChanges;if(!n||!n.length)return;this._dataChanges=[];const h=this.data.datasets.length,d=C=>new Set(n.filter(D=>D[0]===C).map((D,J)=>J+","+D.splice(1).join(","))),g=d(0);for(let C=1;C<h;C++)if(!tn(g,d(C)))return;return Array.from(g).map(C=>C.split(",")).map(C=>({method:C[1],start:+C[2],count:+C[3]}))}_updateLayout(n){if(!1===this.notifyPlugins("beforeLayout",{cancelable:!0}))return;Be.update(this,this.width,this.height,n);const h=this.chartArea,d=h.width<=0||h.height<=0;this._layers=[],He(this.boxes,g=>{d&&"chartArea"===g.position||(g.configure&&g.configure(),this._layers.push(...g._layers()))},this),this._layers.forEach((g,C)=>{g._idx=C}),this.notifyPlugins("afterLayout")}_updateDatasets(n){if(!1!==this.notifyPlugins("beforeDatasetsUpdate",{mode:n,cancelable:!0})){for(let h=0,d=this.data.datasets.length;h<d;++h)this.getDatasetMeta(h).controller.configure();for(let h=0,d=this.data.datasets.length;h<d;++h)this._updateDataset(h,fi(n)?n({datasetIndex:h}):n);this.notifyPlugins("afterDatasetsUpdate",{mode:n})}}_updateDataset(n,h){const d=this.getDatasetMeta(n),g={meta:d,index:n,mode:h,cancelable:!0};!1!==this.notifyPlugins("beforeDatasetUpdate",g)&&(d.controller._update(h),g.cancelable=!1,this.notifyPlugins("afterDatasetUpdate",g))}render(){!1!==this.notifyPlugins("beforeRender",{cancelable:!0})&&(zt.has(this)?this.attached&&!zt.running(this)&&zt.start(this):(this.draw(),fo({chart:this})))}draw(){let n;if(this._resizeBeforeDraw){const{width:d,height:g}=this._resizeBeforeDraw;this._resize(d,g),this._resizeBeforeDraw=null}if(this.clear(),this.width<=0||this.height<=0||!1===this.notifyPlugins("beforeDraw",{cancelable:!0}))return;const h=this._layers;for(n=0;n<h.length&&h[n].z<=0;++n)h[n].draw(this.chartArea);for(this._drawDatasets();n<h.length;++n)h[n].draw(this.chartArea);this.notifyPlugins("afterDraw")}_getSortedDatasetMetas(n){const h=this._sortedMetasets,d=[];let g,C;for(g=0,C=h.length;g<C;++g){const D=h[g];n&&!D.visible||d.push(D)}return d}getSortedVisibleDatasetMetas(){return this._getSortedDatasetMetas(!0)}_drawDatasets(){if(!1===this.notifyPlugins("beforeDatasetsDraw",{cancelable:!0}))return;const n=this.getSortedVisibleDatasetMetas();for(let h=n.length-1;h>=0;--h)this._drawDataset(n[h]);this.notifyPlugins("afterDatasetsDraw")}_drawDataset(n){const h=this.ctx,d=n._clip,g=!d.disabled,C=this.chartArea,D={meta:n,index:n.index,cancelable:!0};!1!==this.notifyPlugins("beforeDatasetDraw",D)&&(g&&ii(h,{left:!1===d.left?0:C.left-d.left,right:!1===d.right?this.width:C.right+d.right,top:!1===d.top?0:C.top-d.top,bottom:!1===d.bottom?this.height:C.bottom+d.bottom}),n.controller.draw(),g&&Si(h),D.cancelable=!1,this.notifyPlugins("afterDatasetDraw",D))}getElementsAtEventForMode(n,h,d,g){const C=Jo.modes[h];return"function"==typeof C?C(this,n,d,g):[]}getDatasetMeta(n){const h=this.data.datasets[n],d=this._metasets;let g=d.filter(C=>C&&C._dataset===h).pop();return g||(g={type:null,data:[],dataset:null,controller:null,hidden:null,xAxisID:null,yAxisID:null,order:h&&h.order||0,index:n,_dataset:h,_parsed:[],_sorted:!1},d.push(g)),g}getContext(){return this.$context||(this.$context=us(null,{chart:this,type:"chart"}))}getVisibleDatasetCount(){return this.getSortedVisibleDatasetMetas().length}isDatasetVisible(n){const h=this.data.datasets[n];if(!h)return!1;const d=this.getDatasetMeta(n);return"boolean"==typeof d.hidden?!d.hidden:!h.hidden}setDatasetVisibility(n,h){this.getDatasetMeta(n).hidden=!h}toggleDataVisibility(n){this._hiddenIndices[n]=!this._hiddenIndices[n]}getDataVisibility(n){return!this._hiddenIndices[n]}_updateVisibility(n,h,d){const g=d?"show":"hide",C=this.getDatasetMeta(n),D=C.controller._resolveAnimations(void 0,g);oi(h)?(C.data[h].hidden=!d,this.update()):(this.setDatasetVisibility(n,d),D.update(C,{visible:d}),this.update(J=>J.datasetIndex===n?g:void 0))}hide(n,h){this._updateVisibility(n,h,!1)}show(n,h){this._updateVisibility(n,h,!0)}_destroyDatasetMeta(n){const h=this._metasets[n];h&&h.controller&&h.controller._destroy(),delete this._metasets[n]}_stop(){let n,h;for(this.stop(),zt.remove(this),n=0,h=this.data.datasets.length;n<h;++n)this._destroyDatasetMeta(n)}destroy(){this.notifyPlugins("beforeDestroy");const{canvas:n,ctx:h}=this;this._stop(),this.config.clearCache(),n&&(this.unbindEvents(),Ge(n,h),this.platform.releaseContext(h),this.canvas=null,this.ctx=null),this.notifyPlugins("destroy"),delete ps[this.id],this.notifyPlugins("afterDestroy")}toBase64Image(...n){return this.canvas.toDataURL(...n)}bindEvents(){this.bindUserEvents(),this.options.responsive?this.bindResponsiveEvents():this.attached=!0}bindUserEvents(){const n=this._listeners,h=this.platform,d=(C,D)=>{h.addEventListener(this,C,D),n[C]=D},g=(C,D,J)=>{C.offsetX=D,C.offsetY=J,this._eventHandler(C)};He(this.options.events,C=>d(C,g))}bindResponsiveEvents(){this._responsiveListeners||(this._responsiveListeners={});const n=this._responsiveListeners,h=this.platform,d=(ot,ct)=>{h.addEventListener(this,ot,ct),n[ot]=ct},g=(ot,ct)=>{n[ot]&&(h.removeEventListener(this,ot,ct),delete n[ot])},C=(ot,ct)=>{this.canvas&&this.resize(ot,ct)};let D;const J=()=>{g("attach",J),this.attached=!0,this.resize(),d("resize",C),d("detach",D)};D=()=>{this.attached=!1,g("resize",C),this._stop(),this._resize(0,0),d("attach",J)},h.isAttached(this.canvas)?J():D()}unbindEvents(){He(this._listeners,(n,h)=>{this.platform.removeEventListener(this,h,n)}),this._listeners={},He(this._responsiveListeners,(n,h)=>{this.platform.removeEventListener(this,h,n)}),this._responsiveListeners=void 0}updateHoverStyle(n,h,d){const g=d?"set":"remove";let C,D,J,ot;for("dataset"===h&&(C=this.getDatasetMeta(n[0].datasetIndex),C.controller["_"+g+"DatasetHoverStyle"]()),J=0,ot=n.length;J<ot;++J){D=n[J];const ct=D&&this.getDatasetMeta(D.datasetIndex).controller;ct&&ct[g+"HoverStyle"](D.element,D.datasetIndex,D.index)}}getActiveElements(){return this._active||[]}setActiveElements(n){const h=this._active||[],d=n.map(({datasetIndex:g,index:C})=>{const D=this.getDatasetMeta(g);if(!D)throw new Error("No dataset found at index "+g);return{datasetIndex:g,element:D.data[C],index:C}});!Fe(d,h)&&(this._active=d,this._lastEvent=null,this._updateHoverStyles(d,h))}notifyPlugins(n,h,d){return this._plugins.notify(this,n,h,d)}_updateHoverStyles(n,h,d){const g=this.options.hover,C=(ot,ct)=>ot.filter(Pt=>!ct.some(Mt=>Pt.datasetIndex===Mt.datasetIndex&&Pt.index===Mt.index)),D=C(h,n),J=d?n:C(n,h);D.length&&this.updateHoverStyle(D,g.mode,!1),J.length&&g.mode&&this.updateHoverStyle(J,g.mode,!0)}_eventHandler(n,h){const d={event:n,replay:h,cancelable:!0,inChartArea:Ee(n,this.chartArea,this._minPadding)},g=D=>(D.options.events||this.options.events).includes(n.native.type);if(!1===this.notifyPlugins("beforeEvent",d,g))return;const C=this._handleEvent(n,h,d.inChartArea);return d.cancelable=!1,this.notifyPlugins("afterEvent",d,g),(C||d.changed)&&this.render(),this}_handleEvent(n,h,d){const{_active:g=[],options:C}=this,J=this._getActiveElements(n,g,d,h),ot=Ii(n),ct=(Mt=n,d&&"mouseout"!==Mt.type?ot?this._lastEvent:Mt:null);var Mt;d&&(this._lastEvent=null,We(C.onHover,[n,J,this],this),ot&&We(C.onClick,[n,J,this],this));const Pt=!Fe(J,g);return(Pt||h)&&(this._active=J,this._updateHoverStyles(J,g,h)),this._lastEvent=ct,Pt}_getActiveElements(n,h,d,g){if("mouseout"===n.type)return[];if(!d)return h;const C=this.options.hover;return this.getElementsAtEventForMode(n,C.mode,C,g)}}const bs=()=>He(So.instances,p=>p._plugins.invalidate()),Ni=!0;function ws(){throw new Error("This method is not implemented: Check that a complete date adapter is provided.")}Object.defineProperties(So,{defaults:{enumerable:Ni,value:Ti},instances:{enumerable:Ni,value:ps},overrides:{enumerable:Ni,value:Pi},registry:{enumerable:Ni,value:ti},version:{enumerable:Ni,value:"3.7.1"},getChart:{enumerable:Ni,value:Is},register:{enumerable:Ni,value:(...p)=>{ti.add(...p),bs()}},unregister:{enumerable:Ni,value:(...p)=>{ti.remove(...p),bs()}}});class Gs{constructor(n){this.options=n||{}}formats(){return ws()}parse(n,h){return ws()}format(n,h){return ws()}add(n,h,d){return ws()}diff(n,h,d){return ws()}startOf(n,h,d){return ws()}endOf(n,h){return ws()}}Gs.override=function(p){Object.assign(Gs.prototype,p)};var Ba={_date:Gs};function _r(p){const n=p.iScale,h=function(ct,Pt){if(!ct._cache.$bar){const Mt=ct.getMatchingVisibleMetas(Pt);let Vt=[];for(let Qt=0,ue=Mt.length;Qt<ue;Qt++)Vt=Vt.concat(Mt[Qt].controller.getAllParsedValues(ct));ct._cache.$bar=Hn(Vt.sort((Qt,ue)=>Qt-ue))}return ct._cache.$bar}(n,p.type);let d,g,C,D,J=n._length;const ot=()=>{32767!==C&&-32768!==C&&(oi(D)&&(J=Math.min(J,Math.abs(C-D)||J)),D=C)};for(d=0,g=h.length;d<g;++d)C=n.getPixelForValue(h[d]),ot();for(D=void 0,d=0,g=n.ticks.length;d<g;++d)C=n.getPixelForTick(d),ot();return J}function Do(p,n,h,d){return ht(p)?function(g,C,D,J){const ot=D.parse(g[0],J),ct=D.parse(g[1],J),Pt=Math.min(ot,ct),Mt=Math.max(ot,ct);let Vt=Pt,Qt=Mt;Math.abs(Pt)>Math.abs(Mt)&&(Vt=Mt,Qt=Pt),C[D.axis]=Qt,C._custom={barStart:Vt,barEnd:Qt,start:ot,end:ct,min:Pt,max:Mt}}(p,n,h,d):n[h.axis]=h.parse(p,d),n}function ds(p,n,h,d){const g=p.iScale,C=p.vScale,D=g.getLabels(),J=g===C,ot=[];let ct,Pt,Mt,Vt;for(ct=h,Pt=h+d;ct<Pt;++ct)Vt=n[ct],Mt={},Mt[g.axis]=J||g.parse(D[ct],ct),ot.push(Do(Vt,Mt,C,ct));return ot}function Ds(p){return p&&void 0!==p.barStart&&void 0!==p.barEnd}function os(p,n,h,d){let g=n.borderSkipped;const C={};if(!g)return void(p.borderSkipped=C);const{start:D,end:J,reverse:ot,top:ct,bottom:Pt}=function(Mt){let Vt,Qt,ue,ge,Ae;return Mt.horizontal?(Vt=Mt.base>Mt.x,Qt="left",ue="right"):(Vt=Mt.base<Mt.y,Qt="bottom",ue="top"),Vt?(ge="end",Ae="start"):(ge="start",Ae="end"),{start:Qt,end:ue,reverse:Vt,top:ge,bottom:Ae}}(p);"middle"===g&&h&&(p.enableBorderRadius=!0,(h._top||0)===d?g=ct:(h._bottom||0)===d?g=Pt:(C[ua(Pt,D,J,ot)]=!0,g=ct)),C[ua(g,D,J,ot)]=!0,p.borderSkipped=C}function ua(p,n,h,d){var g,C,D;return d?(D=h,p=xl(p=(g=p)===(C=n)?D:g===D?C:g,h,n)):p=xl(p,n,h),p}function xl(p,n,h){return"start"===p?n:"end"===p?h:p}function rl(p,{inflateAmount:n},h){p.inflateAmount="auto"===n?1===h?.33:0:n}class Ra extends ri{parsePrimitiveData(n,h,d,g){return ds(n,h,d,g)}parseArrayData(n,h,d,g){return ds(n,h,d,g)}parseObjectData(n,h,d,g){const{iScale:C,vScale:D}=n,{xAxisKey:J="x",yAxisKey:ot="y"}=this._parsing,ct="x"===C.axis?J:ot,Pt="x"===D.axis?J:ot,Mt=[];let Vt,Qt,ue,ge;for(Vt=d,Qt=d+g;Vt<Qt;++Vt)ge=h[Vt],ue={},ue[C.axis]=C.parse(Te(ge,ct),Vt),Mt.push(Do(Te(ge,Pt),ue,D,Vt));return Mt}updateRangeFromParsed(n,h,d,g){super.updateRangeFromParsed(n,h,d,g);const C=d._custom;C&&h===this._cachedMeta.vScale&&(n.min=Math.min(n.min,C.min),n.max=Math.max(n.max,C.max))}getMaxOverflow(){return 0}getLabelAndValue(n){const h=this._cachedMeta,{iScale:d,vScale:g}=h,C=this.getParsed(n),D=C._custom,J=Ds(D)?"["+D.start+", "+D.end+"]":""+g.getLabelForValue(C[g.axis]);return{label:""+d.getLabelForValue(C[d.axis]),value:J}}initialize(){this.enableOptionSharing=!0,super.initialize(),this._cachedMeta.stack=this.getDataset().stack}update(n){const h=this._cachedMeta;this.updateElements(h.data,0,h.data.length,n)}updateElements(n,h,d,g){const C="reset"===g,{index:D,_cachedMeta:{vScale:J}}=this,ot=J.getBasePixel(),ct=J.isHorizontal(),Pt=this._getRuler(),Mt=this.resolveDataElementOptions(h,g),Vt=this.getSharedOptions(Mt),Qt=this.includeOptions(g,Vt);this.updateSharedOptions(Vt,g,Mt);for(let ue=h;ue<h+d;ue++){const ge=this.getParsed(ue),Ae=C||lt(ge[J.axis])?{base:ot,head:ot}:this._calculateBarValuePixels(ue),Ue=this._calculateBarIndexPixels(ue,Pt),Je=(ge._stacks||{})[J.axis],ai={horizontal:ct,base:Ae.base,enableBorderRadius:!Je||Ds(ge._custom)||D===Je._top||D===Je._bottom,x:ct?Ae.head:Ue.center,y:ct?Ue.center:Ae.head,height:ct?Ue.size:Math.abs(Ae.size),width:ct?Math.abs(Ae.size):Ue.size};Qt&&(ai.options=Vt||this.resolveDataElementOptions(ue,n[ue].active?"active":g));const pi=ai.options||n[ue].options;os(ai,pi,Je,D),rl(ai,pi,Pt.ratio),this.updateElement(n[ue],ue,ai,g)}}_getStacks(n,h){const d=this._cachedMeta.iScale,g=d.getMatchingVisibleMetas(this._type),C=d.options.stacked,D=g.length,J=[];let ot,ct;for(ot=0;ot<D;++ot)if(ct=g[ot],ct.controller.options.grouped){if(void 0!==h){const Pt=ct.controller.getParsed(h)[ct.controller._cachedMeta.vScale.axis];if(lt(Pt)||isNaN(Pt))continue}if((!1===C||-1===J.indexOf(ct.stack)||void 0===C&&void 0===ct.stack)&&J.push(ct.stack),ct.index===n)break}return J.length||J.push(void 0),J}_getStackCount(n){return this._getStacks(void 0,n).length}_getStackIndex(n,h,d){const g=this._getStacks(n,d),C=void 0!==h?g.indexOf(h):-1;return-1===C?g.length-1:C}_getRuler(){const n=this.options,h=this._cachedMeta,d=h.iScale,g=[];let C,D;for(C=0,D=h.data.length;C<D;++C)g.push(d.getPixelForValue(this.getParsed(C)[d.axis],C));const J=n.barThickness;return{min:J||_r(h),pixels:g,start:d._startPixel,end:d._endPixel,stackCount:this._getStackCount(),scale:d,grouped:n.grouped,ratio:J?1:n.categoryPercentage*n.barPercentage}}_calculateBarValuePixels(n){const{_cachedMeta:{vScale:h,_stacked:d},options:{base:g,minBarLength:C}}=this,D=g||0,J=this.getParsed(n),ot=J._custom,ct=Ds(ot);let Pt,Mt,Vt=J[h.axis],Qt=0,ue=d?this.applyStack(h,J,d):Vt;ue!==Vt&&(Qt=ue-Vt,ue=Vt),ct&&(Vt=ot.barStart,ue=ot.barEnd-ot.barStart,0!==Vt&&Ui(Vt)!==Ui(ot.barEnd)&&(Qt=0),Qt+=Vt);const ge=lt(g)||ct?Qt:g;let Ae=h.getPixelForValue(ge);if(Pt=this.chart.getDataVisibility(n)?h.getPixelForValue(Qt+ue):Ae,Mt=Pt-Ae,Math.abs(Mt)<C&&(Je=h,ai=D,Mt=(0!==(Ue=Mt)?Ui(Ue):(Je.isHorizontal()?1:-1)*(Je.min>=ai?1:-1))*C,Vt===D&&(Ae-=Mt/2),Pt=Ae+Mt),Ae===h.getPixelForValue(D)){const Ue=Ui(Mt)*h.getLineWidthForValue(D)/2;Ae+=Ue,Mt-=Ue}var Ue,Je,ai;return{size:Mt,base:Ae,head:Pt,center:Pt+Mt/2}}_calculateBarIndexPixels(n,h){const d=h.scale,g=this.options,C=g.skipNull,D=Ot(g.maxBarThickness,1/0);let J,ot;if(h.grouped){const ct=C?this._getStackCount(n):h.stackCount,Pt="flex"===g.barThickness?function(Vt,Qt,ue,ge){const Ae=Qt.pixels,Ue=Ae[Vt];let Je=Vt>0?Ae[Vt-1]:null,ai=Vt<Ae.length-1?Ae[Vt+1]:null;const pi=ue.categoryPercentage;null===Je&&(Je=Ue-(null===ai?Qt.end-Qt.start:ai-Ue)),null===ai&&(ai=Ue+Ue-Je);const Ei=Ue-(Ue-Math.min(Je,ai))/2*pi;return{chunk:Math.abs(ai-Je)/2*pi/ge,ratio:ue.barPercentage,start:Ei}}(n,h,g,ct):function(Vt,Qt,ue,ge){const Ae=ue.barThickness;let Ue,Je;return lt(Ae)?(Ue=Qt.min*ue.categoryPercentage,Je=ue.barPercentage):(Ue=Ae*ge,Je=1),{chunk:Ue/ge,ratio:Je,start:Qt.pixels[Vt]-Ue/2}}(n,h,g,ct),Mt=this._getStackIndex(this.index,this._cachedMeta.stack,C?n:void 0);J=Pt.start+Pt.chunk*Mt+Pt.chunk/2,ot=Math.min(D,Pt.chunk*Pt.ratio)}else J=d.getPixelForValue(this.getParsed(n)[d.axis],n),ot=Math.min(D,h.min*h.ratio);return{base:J-ot/2,head:J+ot/2,center:J,size:ot}}draw(){const n=this._cachedMeta,h=n.vScale,d=n.data,g=d.length;let C=0;for(;C<g;++C)null!==this.getParsed(C)[h.axis]&&d[C].draw(this._ctx)}}Ra.id="bar",Ra.defaults={datasetElementType:!1,dataElementType:"bar",categoryPercentage:.8,barPercentage:.9,grouped:!0,animations:{numbers:{type:"number",properties:["x","y","base","width","height"]}}},Ra.overrides={scales:{_index_:{type:"category",offset:!0,grid:{offset:!0}},_value_:{type:"linear",beginAtZero:!0}}};class sl extends ri{initialize(){this.enableOptionSharing=!0,super.initialize()}parsePrimitiveData(n,h,d,g){const C=super.parsePrimitiveData(n,h,d,g);for(let D=0;D<C.length;D++)C[D]._custom=this.resolveDataElementOptions(D+d).radius;return C}parseArrayData(n,h,d,g){const C=super.parseArrayData(n,h,d,g);for(let D=0;D<C.length;D++)C[D]._custom=Ot(h[d+D][2],this.resolveDataElementOptions(D+d).radius);return C}parseObjectData(n,h,d,g){const C=super.parseObjectData(n,h,d,g);for(let D=0;D<C.length;D++){const J=h[d+D];C[D]._custom=Ot(J&&J.r&&+J.r,this.resolveDataElementOptions(D+d).radius)}return C}getMaxOverflow(){const n=this._cachedMeta.data;let h=0;for(let d=n.length-1;d>=0;--d)h=Math.max(h,n[d].size(this.resolveDataElementOptions(d))/2);return h>0&&h}getLabelAndValue(n){const h=this._cachedMeta,{xScale:d,yScale:g}=h,C=this.getParsed(n),D=d.getLabelForValue(C.x),J=g.getLabelForValue(C.y),ot=C._custom;return{label:h.label,value:"("+D+", "+J+(ot?", "+ot:"")+")"}}update(n){const h=this._cachedMeta.data;this.updateElements(h,0,h.length,n)}updateElements(n,h,d,g){const C="reset"===g,{iScale:D,vScale:J}=this._cachedMeta,ot=this.resolveDataElementOptions(h,g),ct=this.getSharedOptions(ot),Pt=this.includeOptions(g,ct),Mt=D.axis,Vt=J.axis;for(let Qt=h;Qt<h+d;Qt++){const ue=n[Qt],ge=!C&&this.getParsed(Qt),Ae={},Ue=Ae[Mt]=C?D.getPixelForDecimal(.5):D.getPixelForValue(ge[Mt]),Je=Ae[Vt]=C?J.getBasePixel():J.getPixelForValue(ge[Vt]);Ae.skip=isNaN(Ue)||isNaN(Je),Pt&&(Ae.options=this.resolveDataElementOptions(Qt,ue.active?"active":g),C&&(Ae.options.radius=0)),this.updateElement(ue,Qt,Ae,g)}this.updateSharedOptions(ct,g,ot)}resolveDataElementOptions(n,h){const d=this.getParsed(n);let g=super.resolveDataElementOptions(n,h);g.$shared&&(g=Object.assign({},g,{$shared:!1}));const C=g.radius;return"active"!==h&&(g.radius=0),g.radius+=Ot(d&&d._custom,C),g}}sl.id="bubble",sl.defaults={datasetElementType:!1,dataElementType:"point",animations:{numbers:{type:"number",properties:["x","y","borderWidth","radius"]}}},sl.overrides={scales:{x:{type:"linear"},y:{type:"linear"}},plugins:{tooltip:{callbacks:{title:()=>""}}}};class Ws extends ri{constructor(n,h){super(n,h),this.enableOptionSharing=!0,this.innerRadius=void 0,this.outerRadius=void 0,this.offsetX=void 0,this.offsetY=void 0}linkScales(){}parse(n,h){const d=this.getDataset().data,g=this._cachedMeta;if(!1===this._parsing)g._parsed=d;else{let C,D,J=ot=>+d[ot];if(Lt(d[n])){const{key:ot="value"}=this._parsing;J=ct=>+Te(d[ct],ot)}for(C=n,D=n+h;C<D;++C)g._parsed[C]=J(C)}}_getRotation(){return No(this.options.rotation-90)}_getCircumference(){return No(this.options.circumference)}_getRotationExtents(){let n=wn,h=-wn;for(let d=0;d<this.chart.data.datasets.length;++d)if(this.chart.isDatasetVisible(d)){const g=this.chart.getDatasetMeta(d).controller,C=g._getRotation(),D=g._getCircumference();n=Math.min(n,C),h=Math.max(h,C+D)}return{rotation:n,circumference:h-n}}update(n){const h=this.chart,{chartArea:d}=h,g=this._cachedMeta,C=g.data,D=this.getMaxBorderWidth()+this.getMaxOffset(C)+this.options.spacing,J=Math.max((Math.min(d.width,d.height)-D)/2,0),ot=Math.min(se(this.options.cutout,J),1),ct=this._getRingWeight(this.index),{circumference:Pt,rotation:Mt}=this._getRotationExtents(),{ratioX:Vt,ratioY:Qt,offsetX:ue,offsetY:ge}=function(Ei,ln,pn){let On=1,jn=1,vn=0,Xn=0;if(ln<wn){const Yn=Ei,ro=Yn+ln,_n=Math.cos(Yn),An=Math.sin(Yn),xr=Math.cos(ro),Zr=Math.sin(ro),Cs=(Il,ol,Xl)=>kn(Il,Yn,ro,!0)?1:Math.max(ol,ol*pn,Xl,Xl*pn),qs=(Il,ol,Xl)=>kn(Il,Yn,ro,!0)?-1:Math.min(ol,ol*pn,Xl,Xl*pn),Na=Cs(0,_n,xr),ka=Cs(ee,An,Zr),nl=qs(Cn,_n,xr),gl=qs(Cn+ee,An,Zr);On=(Na-nl)/2,jn=(ka-gl)/2,vn=-(Na+nl)/2,Xn=-(ka+gl)/2}return{ratioX:On,ratioY:jn,offsetX:vn,offsetY:Xn}}(Mt,Pt,ot),Je=Math.max(Math.min((d.width-D)/Vt,(d.height-D)/Qt)/2,0),ai=_e(this.options.radius,Je),pi=(ai-Math.max(ai*ot,0))/this._getVisibleDatasetWeightTotal();this.offsetX=ue*ai,this.offsetY=ge*ai,g.total=this.calculateTotal(),this.outerRadius=ai-pi*this._getRingWeightOffset(this.index),this.innerRadius=Math.max(this.outerRadius-pi*ct,0),this.updateElements(C,0,C.length,n)}_circumference(n,h){const d=this.options,g=this._cachedMeta,C=this._getCircumference();return h&&d.animation.animateRotate||!this.chart.getDataVisibility(n)||null===g._parsed[n]||g.data[n].hidden?0:this.calculateCircumference(g._parsed[n]*C/wn)}updateElements(n,h,d,g){const C="reset"===g,D=this.chart,J=D.chartArea,ct=(J.left+J.right)/2,Pt=(J.top+J.bottom)/2,Mt=C&&D.options.animation.animateScale,Vt=Mt?0:this.innerRadius,Qt=Mt?0:this.outerRadius,ue=this.resolveDataElementOptions(h,g),ge=this.getSharedOptions(ue),Ae=this.includeOptions(g,ge);let Ue,Je=this._getRotation();for(Ue=0;Ue<h;++Ue)Je+=this._circumference(Ue,C);for(Ue=h;Ue<h+d;++Ue){const ai=this._circumference(Ue,C),pi=n[Ue],Ei={x:ct+this.offsetX,y:Pt+this.offsetY,startAngle:Je,endAngle:Je+ai,circumference:ai,outerRadius:Qt,innerRadius:Vt};Ae&&(Ei.options=ge||this.resolveDataElementOptions(Ue,pi.active?"active":g)),Je+=ai,this.updateElement(pi,Ue,Ei,g)}this.updateSharedOptions(ge,g,ue)}calculateTotal(){const n=this._cachedMeta,h=n.data;let d,g=0;for(d=0;d<h.length;d++){const C=n._parsed[d];null===C||isNaN(C)||!this.chart.getDataVisibility(d)||h[d].hidden||(g+=Math.abs(C))}return g}calculateCircumference(n){const h=this._cachedMeta.total;return h>0&&!isNaN(n)?wn*(Math.abs(n)/h):0}getLabelAndValue(n){const d=this.chart,g=d.data.labels||[],C=ir(this._cachedMeta._parsed[n],d.options.locale);return{label:g[n]||"",value:C}}getMaxBorderWidth(n){let h=0;const d=this.chart;let g,C,D,J,ot;if(!n)for(g=0,C=d.data.datasets.length;g<C;++g)if(d.isDatasetVisible(g)){D=d.getDatasetMeta(g),n=D.data,J=D.controller;break}if(!n)return 0;for(g=0,C=n.length;g<C;++g)ot=J.resolveDataElementOptions(g),"inner"!==ot.borderAlign&&(h=Math.max(h,ot.borderWidth||0,ot.hoverBorderWidth||0));return h}getMaxOffset(n){let h=0;for(let d=0,g=n.length;d<g;++d){const C=this.resolveDataElementOptions(d);h=Math.max(h,C.offset||0,C.hoverOffset||0)}return h}_getRingWeightOffset(n){let h=0;for(let d=0;d<n;++d)this.chart.isDatasetVisible(d)&&(h+=this._getRingWeight(d));return h}_getRingWeight(n){return Math.max(Ot(this.chart.data.datasets[n].weight,1),0)}_getVisibleDatasetWeightTotal(){return this._getRingWeightOffset(this.chart.data.datasets.length)||1}}Ws.id="doughnut",Ws.defaults={datasetElementType:!1,dataElementType:"arc",animation:{animateRotate:!0,animateScale:!1},animations:{numbers:{type:"number",properties:["circumference","endAngle","innerRadius","outerRadius","startAngle","x","y","offset","borderWidth","spacing"]}},cutout:"50%",rotation:0,circumference:360,radius:"100%",spacing:0,indexAxis:"r"},Ws.descriptors={_scriptable:p=>"spacing"!==p,_indexable:p=>"spacing"!==p},Ws.overrides={aspectRatio:1,plugins:{legend:{labels:{generateLabels(p){const n=p.data;if(n.labels.length&&n.datasets.length){const{labels:{pointStyle:h}}=p.legend.options;return n.labels.map((d,g)=>{const C=p.getDatasetMeta(0).controller.getStyle(g);return{text:d,fillStyle:C.backgroundColor,strokeStyle:C.borderColor,lineWidth:C.borderWidth,pointStyle:h,hidden:!p.getDataVisibility(g),index:g}})}return[]}},onClick(p,n,h){h.chart.toggleDataVisibility(n.index),h.chart.update()}},tooltip:{callbacks:{title:()=>"",label(p){let n=p.label;const h=": "+p.formattedValue;return ht(n)?(n=n.slice(),n[0]+=h):n+=h,n}}}}};class fs extends ri{initialize(){this.enableOptionSharing=!0,super.initialize()}update(n){const h=this._cachedMeta,{dataset:d,data:g=[],_dataset:C}=h,D=this.chart._animationsDisabled;let{start:J,count:ot}=function(Pt,Mt,Vt){const Qt=Mt.length;let ue=0,ge=Qt;if(Pt._sorted){const{iScale:Ae,_parsed:Ue}=Pt,Je=Ae.axis,{min:ai,max:pi,minDefined:Ei,maxDefined:ln}=Ae.getUserBounds();Ei&&(ue=En(Math.min(Zi(Ue,Ae.axis,ai).lo,Vt?Qt:Zi(Mt,Je,Ae.getPixelForValue(ai)).lo),0,Qt-1)),ge=ln?En(Math.max(Zi(Ue,Ae.axis,pi).hi+1,Vt?0:Zi(Mt,Je,Ae.getPixelForValue(pi)).hi+1),ue,Qt)-ue:Qt-ue}return{start:ue,count:ge}}(h,g,D);this._drawStart=J,this._drawCount=ot,function(Pt){const{xScale:Mt,yScale:Vt,_scaleRanges:Qt}=Pt,ue={xmin:Mt.min,xmax:Mt.max,ymin:Vt.min,ymax:Vt.max};if(!Qt)return Pt._scaleRanges=ue,!0;const ge=Qt.xmin!==Mt.min||Qt.xmax!==Mt.max||Qt.ymin!==Vt.min||Qt.ymax!==Vt.max;return Object.assign(Qt,ue),ge}(h)&&(J=0,ot=g.length),d._chart=this.chart,d._datasetIndex=this.index,d._decimated=!!C._decimated,d.points=g;const ct=this.resolveDatasetElementOptions(n);this.options.showLine||(ct.borderWidth=0),ct.segment=this.options.segment,this.updateElement(d,void 0,{animated:!D,options:ct},n),this.updateElements(g,J,ot,n)}updateElements(n,h,d,g){const C="reset"===g,{iScale:D,vScale:J,_stacked:ot,_dataset:ct}=this._cachedMeta,Pt=this.resolveDataElementOptions(h,g),Mt=this.getSharedOptions(Pt),Vt=this.includeOptions(g,Mt),Qt=D.axis,ue=J.axis,{spanGaps:ge,segment:Ae}=this.options,Ue=Mo(ge)?ge:Number.POSITIVE_INFINITY,Je=this.chart._animationsDisabled||C||"none"===g;let ai=h>0&&this.getParsed(h-1);for(let pi=h;pi<h+d;++pi){const Ei=n[pi],ln=this.getParsed(pi),pn=Je?Ei:{},On=lt(ln[ue]),jn=pn[Qt]=D.getPixelForValue(ln[Qt],pi),vn=pn[ue]=C||On?J.getBasePixel():J.getPixelForValue(ot?this.applyStack(J,ln,ot):ln[ue],pi);pn.skip=isNaN(jn)||isNaN(vn)||On,pn.stop=pi>0&&ln[Qt]-ai[Qt]>Ue,Ae&&(pn.parsed=ln,pn.raw=ct.data[pi]),Vt&&(pn.options=Mt||this.resolveDataElementOptions(pi,Ei.active?"active":g)),Je||this.updateElement(Ei,pi,pn,g),ai=ln}this.updateSharedOptions(Mt,g,Pt)}getMaxOverflow(){const n=this._cachedMeta,h=n.dataset,d=h.options&&h.options.borderWidth||0,g=n.data||[];if(!g.length)return d;const C=g[0].size(this.resolveDataElementOptions(0)),D=g[g.length-1].size(this.resolveDataElementOptions(g.length-1));return Math.max(d,C,D)/2}draw(){const n=this._cachedMeta;n.dataset.updateControlPoints(this.chart.chartArea,n.iScale.axis),super.draw()}}fs.id="line",fs.defaults={datasetElementType:"line",dataElementType:"point",showLine:!0,spanGaps:!1},fs.overrides={scales:{_index_:{type:"category"},_value_:{type:"linear"}}};class To extends ri{constructor(n,h){super(n,h),this.innerRadius=void 0,this.outerRadius=void 0}getLabelAndValue(n){const d=this.chart,g=d.data.labels||[],C=ir(this._cachedMeta._parsed[n].r,d.options.locale);return{label:g[n]||"",value:C}}update(n){const h=this._cachedMeta.data;this._updateRadius(),this.updateElements(h,0,h.length,n)}_updateRadius(){const n=this.chart,h=n.chartArea,d=n.options,g=Math.min(h.right-h.left,h.bottom-h.top),C=Math.max(g/2,0),D=(C-Math.max(d.cutoutPercentage?C/100*d.cutoutPercentage:1,0))/n.getVisibleDatasetCount();this.outerRadius=C-D*this.index,this.innerRadius=this.outerRadius-D}updateElements(n,h,d,g){const C="reset"===g,D=this.chart,J=this.getDataset(),ot=D.options.animation,ct=this._cachedMeta.rScale,Pt=ct.xCenter,Mt=ct.yCenter,Vt=ct.getIndexAngle(0)-.5*Cn;let Qt,ue=Vt;const ge=360/this.countVisibleElements();for(Qt=0;Qt<h;++Qt)ue+=this._computeAngle(Qt,g,ge);for(Qt=h;Qt<h+d;Qt++){const Ae=n[Qt];let Ue=ue,Je=ue+this._computeAngle(Qt,g,ge),ai=D.getDataVisibility(Qt)?ct.getDistanceFromCenterForValue(J.data[Qt]):0;ue=Je,C&&(ot.animateScale&&(ai=0),ot.animateRotate&&(Ue=Je=Vt));const pi={x:Pt,y:Mt,innerRadius:0,outerRadius:ai,startAngle:Ue,endAngle:Je,options:this.resolveDataElementOptions(Qt,Ae.active?"active":g)};this.updateElement(Ae,Qt,pi,g)}}countVisibleElements(){const n=this.getDataset();let d=0;return this._cachedMeta.data.forEach((g,C)=>{!isNaN(n.data[C])&&this.chart.getDataVisibility(C)&&d++}),d}_computeAngle(n,h,d){return this.chart.getDataVisibility(n)?No(this.resolveDataElementOptions(n,h).angle||d):0}}To.id="polarArea",To.defaults={dataElementType:"arc",animation:{animateRotate:!0,animateScale:!0},animations:{numbers:{type:"number",properties:["x","y","startAngle","endAngle","innerRadius","outerRadius"]}},indexAxis:"r",startAngle:0},To.overrides={aspectRatio:1,plugins:{legend:{labels:{generateLabels(p){const n=p.data;if(n.labels.length&&n.datasets.length){const{labels:{pointStyle:h}}=p.legend.options;return n.labels.map((d,g)=>{const C=p.getDatasetMeta(0).controller.getStyle(g);return{text:d,fillStyle:C.backgroundColor,strokeStyle:C.borderColor,lineWidth:C.borderWidth,pointStyle:h,hidden:!p.getDataVisibility(g),index:g}})}return[]}},onClick(p,n,h){h.chart.toggleDataVisibility(n.index),h.chart.update()}},tooltip:{callbacks:{title:()=>"",label:p=>p.chart.data.labels[p.dataIndex]+": "+p.formattedValue}}},scales:{r:{type:"radialLinear",angleLines:{display:!1},beginAtZero:!0,grid:{circular:!0},pointLabels:{display:!1},startAngle:0}}};class pa extends Ws{}pa.id="pie",pa.defaults={cutout:0,rotation:0,circumference:360,radius:"100%"};class ta extends ri{getLabelAndValue(n){const h=this._cachedMeta.vScale,d=this.getParsed(n);return{label:h.getLabels()[n],value:""+h.getLabelForValue(d[h.axis])}}update(n){const h=this._cachedMeta,d=h.dataset,g=h.data||[],C=h.iScale.getLabels();if(d.points=g,"resize"!==n){const D=this.resolveDatasetElementOptions(n);this.options.showLine||(D.borderWidth=0),this.updateElement(d,void 0,{_loop:!0,_fullLoop:C.length===g.length,options:D},n)}this.updateElements(g,0,g.length,n)}updateElements(n,h,d,g){const C=this.getDataset(),D=this._cachedMeta.rScale,J="reset"===g;for(let ot=h;ot<h+d;ot++){const ct=n[ot],Pt=this.resolveDataElementOptions(ot,ct.active?"active":g),Mt=D.getPointPositionForValue(ot,C.data[ot]),Vt=J?D.xCenter:Mt.x,Qt=J?D.yCenter:Mt.y,ue={x:Vt,y:Qt,angle:Mt.angle,skip:isNaN(Vt)||isNaN(Qt),options:Pt};this.updateElement(ct,ot,ue,g)}}}ta.id="radar",ta.defaults={datasetElementType:"line",dataElementType:"point",indexAxis:"r",showLine:!0,elements:{line:{fill:"start"}}},ta.overrides={aspectRatio:1,scales:{r:{type:"radialLinear"}}};class ts extends fs{}ts.id="scatter",ts.defaults={showLine:!1,fill:!1},ts.overrides={interaction:{mode:"point"},plugins:{tooltip:{callbacks:{title:()=>"",label:p=>"("+p.label+", "+p.formattedValue+")"}}},scales:{x:{type:"linear"},y:{type:"linear"}}};var ja=Object.freeze({__proto__:null,BarController:Ra,BubbleController:sl,DoughnutController:Ws,LineController:fs,PolarAreaController:To,PieController:pa,RadarController:ta,ScatterController:ts});function Fa(p,n,h){const{startAngle:d,pixelMargin:g,x:C,y:D,outerRadius:J,innerRadius:ot}=n;let ct=g/J;p.beginPath(),p.arc(C,D,J,d-ct,h+ct),ot>g?(ct=g/ot,p.arc(C,D,ot,h+ct,d-ct,!0)):p.arc(C,D,g,h+ee,d-ee),p.closePath(),p.clip()}function Ar(p,n,h,d){return{x:h+p*Math.cos(n),y:d+p*Math.sin(n)}}function La(p,n,h,d,g){const{x:C,y:D,startAngle:J,pixelMargin:ot,innerRadius:ct}=n,Pt=Math.max(n.outerRadius+d+h-ot,0),Mt=ct>0?ct+d+h+ot:0;let Vt=0;const Qt=g-J;if(d){const An=((ct>0?ct-d:0)+(Pt>0?Pt-d:0))/2;Vt=(Qt-(0!==An?Qt*An/(An+d):Qt))/2}const ue=(Qt-Math.max(.001,Qt*Pt-h/Cn)/Pt)/2,ge=J+ue+Vt,Ae=g-ue-Vt,{outerStart:Ue,outerEnd:Je,innerStart:ai,innerEnd:pi}=function Ca(p,n,h,d){const g=Mr(p.options.borderRadius,["outerStart","outerEnd","innerStart","innerEnd"]),C=(h-n)/2,D=Math.min(C,d*n/2),J=ot=>{const ct=(h-Math.min(C,ot))*d/2;return En(ot,0,Math.min(C,ct))};return{outerStart:J(g.outerStart),outerEnd:J(g.outerEnd),innerStart:En(g.innerStart,0,D),innerEnd:En(g.innerEnd,0,D)}}(n,Mt,Pt,Ae-ge),Ei=Pt-Ue,ln=Pt-Je,pn=ge+Ue/Ei,On=Ae-Je/ln,jn=Mt+ai,vn=Mt+pi,Xn=ge+ai/jn,Yn=Ae-pi/vn;if(p.beginPath(),p.arc(C,D,Pt,pn,On),Je>0){const An=Ar(ln,On,C,D);p.arc(An.x,An.y,Je,On,Ae+ee)}const ro=Ar(vn,Ae,C,D);if(p.lineTo(ro.x,ro.y),pi>0){const An=Ar(vn,Yn,C,D);p.arc(An.x,An.y,pi,Ae+ee,Yn+Math.PI)}if(p.arc(C,D,Mt,Ae-pi/Mt,ge+ai/Mt,!0),ai>0){const An=Ar(jn,Xn,C,D);p.arc(An.x,An.y,ai,Xn+Math.PI,ge-ee)}const _n=Ar(Ei,ge,C,D);if(p.lineTo(_n.x,_n.y),Ue>0){const An=Ar(Ei,pn,C,D);p.arc(An.x,An.y,Ue,ge-ee,pn)}p.closePath()}class yn extends Di{constructor(n){super(),this.options=void 0,this.circumference=void 0,this.startAngle=void 0,this.endAngle=void 0,this.innerRadius=void 0,this.outerRadius=void 0,this.pixelMargin=0,this.fullCircles=0,n&&Object.assign(this,n)}inRange(n,h,d){const g=this.getProps(["x","y"],d),{angle:C,distance:D}=Kr(g,{x:n,y:h}),{startAngle:J,endAngle:ot,innerRadius:ct,outerRadius:Pt,circumference:Mt}=this.getProps(["startAngle","endAngle","innerRadius","outerRadius","circumference"],d),Vt=this.options.spacing/2,Qt=Ot(Mt,ot-J)>=wn||kn(C,J,ot),ue=Yt(D,ct+Vt,Pt+Vt);return Qt&&ue}getCenterPoint(n){const{x:h,y:d,startAngle:g,endAngle:C,innerRadius:D,outerRadius:J}=this.getProps(["x","y","startAngle","endAngle","innerRadius","outerRadius","circumference"],n),{offset:ot,spacing:ct}=this.options,Pt=(g+C)/2,Mt=(D+J+ct+ot)/2;return{x:h+Math.cos(Pt)*Mt,y:d+Math.sin(Pt)*Mt}}tooltipPosition(n){return this.getCenterPoint(n)}draw(n){const{options:h,circumference:d}=this,g=(h.offset||0)/2,C=(h.spacing||0)/2;if(this.pixelMargin="inner"===h.borderAlign?.33:0,this.fullCircles=d>wn?Math.floor(d/wn):0,0===d||this.innerRadius<0||this.outerRadius<0)return;n.save();let D=0;if(g){D=g/2;const ot=(this.startAngle+this.endAngle)/2;n.translate(Math.cos(ot)*D,Math.sin(ot)*D),this.circumference>=Cn&&(D=g)}n.fillStyle=h.backgroundColor,n.strokeStyle=h.borderColor,function Pn(p,n,h,d,g){const{options:C}=n,{borderWidth:D,borderJoinStyle:J}=C,ot="inner"===C.borderAlign;D&&(ot?(p.lineWidth=2*D,p.lineJoin=J||"round"):(p.lineWidth=D,p.lineJoin=J||"bevel"),n.fullCircles&&function(ct,Pt,Mt){const{x:Vt,y:Qt,startAngle:ue,pixelMargin:ge,fullCircles:Ae}=Pt,Ue=Math.max(Pt.outerRadius-ge,0),Je=Pt.innerRadius+ge;let ai;for(Mt&&Fa(ct,Pt,ue+wn),ct.beginPath(),ct.arc(Vt,Qt,Je,ue+wn,ue,!0),ai=0;ai<Ae;++ai)ct.stroke();for(ct.beginPath(),ct.arc(Vt,Qt,Ue,ue,ue+wn),ai=0;ai<Ae;++ai)ct.stroke()}(p,n,ot),ot&&Fa(p,n,g),La(p,n,h,d,g),p.stroke())}(n,this,D,C,function(ot,ct,Pt,Mt){const{fullCircles:Vt,startAngle:Qt,circumference:ue}=ct;let ge=ct.endAngle;if(Vt){La(ot,ct,Pt,Mt,Qt+wn);for(let Ae=0;Ae<Vt;++Ae)ot.fill();isNaN(ue)||(ge=Qt+ue%wn,ue%wn==0&&(ge+=wn))}return La(ot,ct,Pt,Mt,ge),ot.fill(),ge}(n,this,D,C)),n.restore()}}function $a(p,n,h=n){p.lineCap=Ot(h.borderCapStyle,n.borderCapStyle),p.setLineDash(Ot(h.borderDash,n.borderDash)),p.lineDashOffset=Ot(h.borderDashOffset,n.borderDashOffset),p.lineJoin=Ot(h.borderJoinStyle,n.borderJoinStyle),p.lineWidth=Ot(h.borderWidth,n.borderWidth),p.strokeStyle=Ot(h.borderColor,n.borderColor)}function zs(p,n,h){p.lineTo(h.x,h.y)}function da(p,n,h={}){const d=p.length,{start:g=0,end:C=d-1}=h,{start:D,end:J}=n,ot=Math.max(g,D),ct=Math.min(C,J);return{count:d,start:ot,loop:n.loop,ilen:ct<ot&&!(g<D&&C<D||g>J&&C>J)?d+ct-ot:ct-ot}}function ms(p,n,h,d){const{points:g,options:C}=n,{count:D,start:J,loop:ot,ilen:ct}=da(g,h,d),Pt=(Ae=C).stepped?Oi:Ae.tension||"monotone"===Ae.cubicInterpolationMode?di:zs;var Ae;let Mt,Vt,Qt,{move:ue=!0,reverse:ge}=d||{};for(Mt=0;Mt<=ct;++Mt)Vt=g[(J+(ge?ct-Mt:Mt))%D],Vt.skip||(ue?(p.moveTo(Vt.x,Vt.y),ue=!1):Pt(p,Qt,Vt,ge,C.stepped),Qt=Vt);return ot&&(Vt=g[(J+(ge?ct:0))%D],Pt(p,Qt,Vt,ge,C.stepped)),!!ot}function Aa(p,n,h,d){const g=n.points,{count:C,start:D,ilen:J}=da(g,h,d),{move:ot=!0,reverse:ct}=d||{};let Pt,Mt,Vt,Qt,ue,ge,Ae=0,Ue=0;const Je=pi=>(D+(ct?J-pi:pi))%C,ai=()=>{Qt!==ue&&(p.lineTo(Ae,ue),p.lineTo(Ae,Qt),p.lineTo(Ae,ge))};for(ot&&(Mt=g[Je(0)],p.moveTo(Mt.x,Mt.y)),Pt=0;Pt<=J;++Pt){if(Mt=g[Je(Pt)],Mt.skip)continue;const pi=Mt.x,Ei=Mt.y,ln=0|pi;ln===Vt?(Ei<Qt?Qt=Ei:Ei>ue&&(ue=Ei),Ae=(Ue*Ae+pi)/++Ue):(ai(),p.lineTo(pi,Ei),Vt=ln,Ue=0,Qt=ue=Ei),ge=Ei}ai()}function ul(p){const n=p.options;return p._decimated||p._loop||n.tension||"monotone"===n.cubicInterpolationMode||n.stepped||n.borderDash&&n.borderDash.length?ms:Aa}yn.id="arc",yn.defaults={borderAlign:"center",borderColor:"#fff",borderJoinStyle:void 0,borderRadius:0,borderWidth:2,offset:0,spacing:0,angle:void 0},yn.defaultRoutes={backgroundColor:"backgroundColor"};const bl="function"==typeof Path2D;class Pr extends Di{constructor(n){super(),this.animated=!0,this.options=void 0,this._chart=void 0,this._loop=void 0,this._fullLoop=void 0,this._path=void 0,this._points=void 0,this._segments=void 0,this._decimated=!1,this._pointsUpdated=!1,this._datasetIndex=void 0,n&&Object.assign(this,n)}updateControlPoints(n,h){const d=this.options;!d.tension&&"monotone"!==d.cubicInterpolationMode||d.stepped||this._pointsUpdated||(hr(this._points,d,n,d.spanGaps?this._loop:this._fullLoop,h),this._pointsUpdated=!0)}set points(n){this._points=n,delete this._segments,delete this._path,this._pointsUpdated=!1}get points(){return this._points}get segments(){return this._segments||(this._segments=as(this,this.options.segment))}first(){const n=this.segments;return n.length&&this.points[n[0].start]}last(){const n=this.segments,d=n.length;return d&&this.points[n[d-1].end]}interpolate(n,h){const d=this.options,g=n[h],C=this.points,D=la(this,{property:h,start:g,end:g});if(!D.length)return;const J=[],ot=(Mt=d).stepped?Go:Mt.tension||"monotone"===Mt.cubicInterpolationMode?Rr:Xo;var Mt;let ct,Pt;for(ct=0,Pt=D.length;ct<Pt;++ct){const{start:Mt,end:Vt}=D[ct],Qt=C[Mt],ue=C[Vt];if(Qt===ue){J.push(Qt);continue}const ge=ot(Qt,ue,Math.abs((g-Qt[h])/(ue[h]-Qt[h])),d.stepped);ge[h]=n[h],J.push(ge)}return 1===J.length?J[0]:J}pathSegment(n,h,d){return ul(this)(n,this,h,d)}path(n,h,d){const g=this.segments,C=ul(this);let D=this._loop;h=h||0,d=d||this.points.length-h;for(const J of g)D&=C(n,this,J,{start:h,end:h+d-1});return!!D}draw(n,h,d,g){(this.points||[]).length&&(this.options||{}).borderWidth&&(n.save(),function Yo(p,n,h,d){bl&&!n.options.segment?function(g,C,D,J){let ot=C._path;ot||(ot=C._path=new Path2D,C.path(ot,D,J)&&ot.closePath()),$a(g,C.options),g.stroke(ot)}(p,n,h,d):function(g,C,D,J){const{segments:ot,options:ct}=C,Pt=ul(C);for(const Mt of ot)$a(g,ct,Mt.style),g.beginPath(),Pt(g,C,Mt,{start:D,end:D+J-1})&&g.closePath(),g.stroke()}(p,n,h,d)}(n,this,d,g),n.restore()),this.animated&&(this._pointsUpdated=!1,this._path=void 0)}}function Gl(p,n,h,d){const g=p.options,{[h]:C}=p.getProps([h],d);return Math.abs(n-C)<g.radius+g.hitRadius}Pr.id="line",Pr.defaults={borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderWidth:3,capBezierPoints:!0,cubicInterpolationMode:"default",fill:!1,spanGaps:!1,stepped:!1,tension:0},Pr.defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"},Pr.descriptors={_scriptable:!0,_indexable:p=>"borderDash"!==p&&"fill"!==p};class Ha extends Di{constructor(n){super(),this.options=void 0,this.parsed=void 0,this.skip=void 0,this.stop=void 0,n&&Object.assign(this,n)}inRange(n,h,d){const g=this.options,{x:C,y:D}=this.getProps(["x","y"],d);return Math.pow(n-C,2)+Math.pow(h-D,2)<Math.pow(g.hitRadius+g.radius,2)}inXRange(n,h){return Gl(this,n,"x",h)}inYRange(n,h){return Gl(this,n,"y",h)}getCenterPoint(n){const{x:h,y:d}=this.getProps(["x","y"],n);return{x:h,y:d}}size(n){let h=(n=n||this.options||{}).radius||0;return h=Math.max(h,h&&n.hoverRadius||0),2*(h+(h&&n.borderWidth||0))}draw(n,h){const d=this.options;this.skip||d.radius<.1||!Ee(this,h,this.size(d)/2)||(n.strokeStyle=d.borderColor,n.lineWidth=d.borderWidth,n.fillStyle=d.backgroundColor,oe(n,d,this.x,this.y))}getRange(){const n=this.options||{};return n.radius+n.hitRadius}}function Fl(p,n){const{x:h,y:d,base:g,width:C,height:D}=p.getProps(["x","y","base","width","height"],n);let J,ot,ct,Pt,Mt;return p.horizontal?(Mt=D/2,J=Math.min(h,g),ot=Math.max(h,g),ct=d-Mt,Pt=d+Mt):(Mt=C/2,J=h-Mt,ot=h+Mt,ct=Math.min(d,g),Pt=Math.max(d,g)),{left:J,top:ct,right:ot,bottom:Pt}}function ea(p,n,h,d){return p?0:En(n,h,d)}function al(p,n,h,d){const g=null===n,C=null===h,D=p&&!(g&&C)&&Fl(p,d);return D&&(g||Yt(n,D.left,D.right))&&(C||Yt(h,D.top,D.bottom))}function Ga(p,n){p.rect(n.x,n.y,n.w,n.h)}function wl(p,n,h={}){const d=p.x!==h.x?-n:0,g=p.y!==h.y?-n:0;return{x:p.x+d,y:p.y+g,w:p.w+((p.x+p.w!==h.x+h.w?n:0)-d),h:p.h+((p.y+p.h!==h.y+h.h?n:0)-g),radius:p.radius}}Ha.id="point",Ha.defaults={borderWidth:1,hitRadius:1,hoverBorderWidth:1,hoverRadius:4,pointStyle:"circle",radius:3,rotation:0},Ha.defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"};class Ja extends Di{constructor(n){super(),this.options=void 0,this.horizontal=void 0,this.base=void 0,this.width=void 0,this.height=void 0,this.inflateAmount=void 0,n&&Object.assign(this,n)}draw(n){const{inflateAmount:h,options:{borderColor:d,backgroundColor:g}}=this,{inner:C,outer:D}=function va(p){const n=Fl(p),h=n.right-n.left,d=n.bottom-n.top,g=function(D,J,ot){const Pt=D.borderSkipped,Mt=ra(D.options.borderWidth);return{t:ea(Pt.top,Mt.top,0,ot),r:ea(Pt.right,Mt.right,0,J),b:ea(Pt.bottom,Mt.bottom,0,ot),l:ea(Pt.left,Mt.left,0,J)}}(p,h/2,d/2),C=function(D,J,ot){const{enableBorderRadius:ct}=D.getProps(["enableBorderRadius"]),Pt=D.options.borderRadius,Mt=rr(Pt),Vt=Math.min(J,ot),Qt=D.borderSkipped,ue=ct||Lt(Pt);return{topLeft:ea(!ue||Qt.top||Qt.left,Mt.topLeft,0,Vt),topRight:ea(!ue||Qt.top||Qt.right,Mt.topRight,0,Vt),bottomLeft:ea(!ue||Qt.bottom||Qt.left,Mt.bottomLeft,0,Vt),bottomRight:ea(!ue||Qt.bottom||Qt.right,Mt.bottomRight,0,Vt)}}(p,h/2,d/2);return{outer:{x:n.left,y:n.top,w:h,h:d,radius:C},inner:{x:n.left+g.l,y:n.top+g.t,w:h-g.l-g.r,h:d-g.t-g.b,radius:{topLeft:Math.max(0,C.topLeft-Math.max(g.t,g.l)),topRight:Math.max(0,C.topRight-Math.max(g.t,g.r)),bottomLeft:Math.max(0,C.bottomLeft-Math.max(g.b,g.l)),bottomRight:Math.max(0,C.bottomRight-Math.max(g.b,g.r))}}}}(this),J=(ot=D.radius).topLeft||ot.topRight||ot.bottomLeft||ot.bottomRight?Fi:Ga;var ot;n.save(),D.w===C.w&&D.h===C.h||(n.beginPath(),J(n,wl(D,h,C)),n.clip(),J(n,wl(C,-h,D)),n.fillStyle=d,n.fill("evenodd")),n.beginPath(),J(n,wl(C,h)),n.fillStyle=g,n.fill(),n.restore()}inRange(n,h,d){return al(this,n,h,d)}inXRange(n,h){return al(this,n,null,h)}inYRange(n,h){return al(this,null,n,h)}getCenterPoint(n){const{x:h,y:d,base:g,horizontal:C}=this.getProps(["x","y","base","horizontal"],n);return{x:C?(h+g)/2:h,y:C?d:(d+g)/2}}getRange(n){return"x"===n?this.width/2:this.height/2}}Ja.id="bar",Ja.defaults={borderSkipped:"start",borderWidth:0,borderRadius:0,inflateAmount:"auto",pointStyle:void 0},Ja.defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"};var pl=Object.freeze({__proto__:null,ArcElement:yn,LineElement:Pr,PointElement:Ha,BarElement:Ja});function Nl(p){if(p._decimated){const n=p._data;delete p._decimated,delete p._data,Object.defineProperty(p,"data",{value:n})}}function dl(p){p.data.datasets.forEach(n=>{Nl(n)})}var fl={id:"decimation",defaults:{algorithm:"min-max",enabled:!1},beforeElementsUpdate:(p,n,h)=>{if(!h.enabled)return void dl(p);const d=p.width;p.data.datasets.forEach((g,C)=>{const{_data:D,indexAxis:J}=g,ot=p.getDatasetMeta(C),ct=D||g.data;if("y"===Lr([J,p.options.indexAxis])||"line"!==ot.type)return;const Pt=p.scales[ot.xAxisID];if("linear"!==Pt.type&&"time"!==Pt.type||p.options.parsing)return;let Qt,{start:Mt,count:Vt}=function(ue,ge){const Ae=ge.length;let Ue,Je=0;const{iScale:ai}=ue,{min:pi,max:Ei,minDefined:ln,maxDefined:pn}=ai.getUserBounds();return ln&&(Je=En(Zi(ge,ai.axis,pi).lo,0,Ae-1)),Ue=pn?En(Zi(ge,ai.axis,Ei).hi+1,Je,Ae)-Je:Ae-Je,{start:Je,count:Ue}}(ot,ct);if(Vt<=(h.threshold||4*d))Nl(g);else{switch(lt(D)&&(g._data=ct,delete g.data,Object.defineProperty(g,"data",{configurable:!0,enumerable:!0,get:function(){return this._decimated},set:function(ue){this._data=ue}})),h.algorithm){case"lttb":Qt=function(ue,ge,Ae,Ue,Je){const ai=Je.samples||Ue;if(ai>=Ae)return ue.slice(ge,ge+Ae);const pi=[],Ei=(Ae-2)/(ai-2);let ln=0;const pn=ge+Ae-1;let On,jn,vn,Xn,Yn,ro=ge;for(pi[ln++]=ue[ro],On=0;On<ai-2;On++){let _n,An=0,xr=0;const Zr=Math.floor((On+1)*Ei)+1+ge,Cs=Math.min(Math.floor((On+2)*Ei)+1,Ae)+ge,qs=Cs-Zr;for(_n=Zr;_n<Cs;_n++)An+=ue[_n].x,xr+=ue[_n].y;An/=qs,xr/=qs;const Na=Math.floor(On*Ei)+1+ge,ka=Math.min(Math.floor((On+1)*Ei)+1,Ae)+ge,{x:nl,y:gl}=ue[ro];for(vn=Xn=-1,_n=Na;_n<ka;_n++)Xn=.5*Math.abs((nl-An)*(ue[_n].y-gl)-(nl-ue[_n].x)*(xr-gl)),Xn>vn&&(vn=Xn,jn=ue[_n],Yn=_n);pi[ln++]=jn,ro=Yn}return pi[ln++]=ue[pn],pi}(ct,Mt,Vt,d,h);break;case"min-max":Qt=function(ue,ge,Ae,Ue){let Je,ai,pi,Ei,ln,pn,On,jn,vn,Xn,Yn=0,ro=0;const _n=[],xr=ue[ge].x,Zr=ue[ge+Ae-1].x-xr;for(Je=ge;Je<ge+Ae;++Je){ai=ue[Je],pi=(ai.x-xr)/Zr*Ue,Ei=ai.y;const Cs=0|pi;if(Cs===ln)Ei<vn?(vn=Ei,pn=Je):Ei>Xn&&(Xn=Ei,On=Je),Yn=(ro*Yn+ai.x)/++ro;else{const qs=Je-1;if(!lt(pn)&&!lt(On)){const Na=Math.min(pn,On),ka=Math.max(pn,On);Na!==jn&&Na!==qs&&_n.push({...ue[Na],x:Yn}),ka!==jn&&ka!==qs&&_n.push({...ue[ka],x:Yn})}Je>0&&qs!==jn&&_n.push(ue[qs]),_n.push(ai),ln=Cs,ro=0,vn=Xn=Ei,pn=On=jn=Je}}return _n}(ct,Mt,Vt,d);break;default:throw new Error(`Unsupported decimation algorithm '${h.algorithm}'`)}g._decimated=Qt}})},destroy(p){dl(p)}};function Wl(p,n,h){const d=function(C){const D=C.options,J=D.fill;let ot=Ot(J&&J.target,J);return void 0===ot&&(ot=!!D.backgroundColor),!1!==ot&&null!==ot&&(!0===ot?"origin":ot)}(p);if(Lt(d))return!isNaN(d.value)&&d;let g=parseFloat(d);return At(g)&&Math.floor(g)===g?("-"!==d[0]&&"+"!==d[0]||(g=n+g),!(g===n||g<0||g>=h)&&g):["origin","start","end","stack","shape"].indexOf(d)>=0&&d}class Qa{constructor(n){this.x=n.x,this.y=n.y,this.radius=n.radius}pathSegment(n,h,d){const{x:g,y:C,radius:D}=this;return n.arc(g,C,D,(h=h||{start:0,end:wn}).end,h.start,!0),!d.bounds}interpolate(n){const{x:h,y:d,radius:g}=this,C=n.angle;return{x:h+Math.cos(C)*g,y:d+Math.sin(C)*g,angle:C}}}function Sl(p,n,h){for(;n>p;n--){const d=h[n];if(!isNaN(d.x)&&!isNaN(d.y))break}return n}function hl(p,n,h){const d=[];for(let g=0;g<h.length;g++){const C=h[g],{first:D,last:J,point:ot}=Ia(C,n,"x");if(!(!ot||D&&J))if(D)d.unshift(ot);else if(p.push(ot),!J)break}p.push(...d)}function Ia(p,n,h){const d=p.interpolate(n,h);if(!d)return{};const g=d[h],C=p.segments,D=p.points;let J=!1,ot=!1;for(let ct=0;ct<C.length;ct++){const Pt=C[ct],Mt=D[Pt.start][h],Vt=D[Pt.end][h];if(Yt(g,Mt,Vt)){J=g===Mt,ot=g===Vt;break}}return{first:J,last:ot,point:d}}function Tl(p,n){let h=[],d=!1;return ht(p)?(d=!0,h=p):h=function(g,C){const{x:D=null,y:J=null}=g||{},ot=C.points,ct=[];return C.segments.forEach(({start:Pt,end:Mt})=>{Mt=Sl(Pt,Mt,ot);const Vt=ot[Pt],Qt=ot[Mt];null!==J?(ct.push({x:Vt.x,y:J}),ct.push({x:Qt.x,y:J})):null!==D&&(ct.push({x:D,y:Vt.y}),ct.push({x:D,y:Qt.y}))}),ct}(p,n),h.length?new Pr({points:h,options:{tension:0},_loop:d,_fullLoop:d}):null}function ql(p,n,h){let d=p[n].fill;const g=[n];let C;if(!h)return d;for(;!1!==d&&-1===g.indexOf(d);){if(!At(d))return d;if(C=p[d],!C)return!1;if(C.visible)return d;g.push(d),d=C.fill}return!1}function Ll(p,n,h){const{segments:d,points:g}=n;let C=!0,D=!1;p.beginPath();for(const J of d){const{start:ot,end:ct}=J,Pt=g[ot],Mt=g[Sl(ot,ct,g)];C?(p.moveTo(Pt.x,Pt.y),C=!1):(p.lineTo(Pt.x,h),p.lineTo(Pt.x,Pt.y)),D=!!n.pathSegment(p,J,{move:D}),D?p.closePath():p.lineTo(Mt.x,h)}p.lineTo(n.first().x,h),p.closePath(),p.clip()}function o(p,n,h,d){if(d)return;let g=n[p],C=h[p];return"angle"===p&&(g=lr(g),C=lr(C)),{property:p,start:g,end:C}}function a(p,n,h,d){return p&&n?d(p[h],n[h]):p?p[h]:n?n[h]:0}function s(p,n,h){const{top:d,bottom:g}=n.chart.chartArea,{property:C,start:D,end:J}=h||{};"x"===C&&(p.beginPath(),p.rect(D,d,J-D,g-d),p.clip())}function u(p,n,h,d){const g=n.interpolate(h,d);g&&p.lineTo(g.x,g.y)}function P(p,n){const{line:h,target:d,property:g,color:C,scale:D}=n,J=function(ot,ct,Pt){const Mt=ot.segments,Vt=ot.points,Qt=ct.points,ue=[];for(const ge of Mt){let{start:Ae,end:Ue}=ge;Ue=Sl(Ae,Ue,Vt);const Je=o(Pt,Vt[Ae],Vt[Ue],ge.loop);if(!ct.segments){ue.push({source:ge,target:Je,start:Vt[Ae],end:Vt[Ue]});continue}const ai=la(ct,Je);for(const pi of ai){const Ei=o(Pt,Qt[pi.start],Qt[pi.end],pi.loop),ln=co(ge,Vt,Ei);for(const pn of ln)ue.push({source:pn,target:pi,start:{[Pt]:a(Je,Ei,"start",Math.max)},end:{[Pt]:a(Je,Ei,"end",Math.min)}})}}return ue}(h,d,g);for(const{source:ot,target:ct,start:Pt,end:Mt}of J){const{style:{backgroundColor:Vt=C}={}}=ot,Qt=!0!==d;p.save(),p.fillStyle=Vt,s(p,D,Qt&&o(g,Pt,Mt)),p.beginPath();const ue=!!h.pathSegment(p,ot);let ge;if(Qt){ue?p.closePath():u(p,d,Mt,g);const Ae=!!d.pathSegment(p,ct,{move:ue,reverse:!0});ge=ue&&Ae,ge||u(p,d,Pt,g)}p.closePath(),p.fill(ge?"evenodd":"nonzero"),p.restore()}}function W(p,n,h){const d=function Zl(p){const{chart:n,fill:h,line:d}=p;if(At(h))return function(C,D){const J=C.getDatasetMeta(D);return J&&C.isDatasetVisible(D)?J.dataset:null}(n,h);if("stack"===h)return function(C){const{scale:D,index:J,line:ot}=C,ct=[],Pt=ot.segments,Mt=ot.points,Vt=function(Qt,ue){const ge=[],Ae=Qt.getMatchingVisibleMetas("line");for(let Ue=0;Ue<Ae.length;Ue++){const Je=Ae[Ue];if(Je.index===ue)break;Je.hidden||ge.unshift(Je.dataset)}return ge}(D,J);Vt.push(Tl({x:null,y:D.bottom},ot));for(let Qt=0;Qt<Pt.length;Qt++){const ue=Pt[Qt];for(let ge=ue.start;ge<=ue.end;ge++)hl(ct,Mt[ge],Vt)}return new Pr({points:ct,options:{}})}(p);if("shape"===h)return!0;const g=function ll(p){return(p.scale||{}).getPointPositionForValue?function(n){const{scale:h,fill:d}=n,g=h.options,C=h.getLabels().length,D=[],J=g.reverse?h.max:h.min;let ct,Pt,Mt;if(Mt="start"===d?J:"end"===d?g.reverse?h.min:h.max:Lt(d)?d.value:h.getBaseValue(),g.grid.circular)return Pt=h.getPointPositionForValue(0,J),new Qa({x:Pt.x,y:Pt.y,radius:h.getDistanceFromCenterForValue(Mt)});for(ct=0;ct<C;++ct)D.push(h.getPointPositionForValue(ct,Mt));return D}(p):function(n){const{scale:h={},fill:d}=n;let g,C=null;return"start"===d?C=h.bottom:"end"===d?C=h.top:Lt(d)?C=h.getPixelForValue(d.value):h.getBasePixel&&(C=h.getBasePixel()),At(C)?(g=h.isHorizontal(),{x:g?C:null,y:g?null:C}):null}(p)}(p);return g instanceof Qa?g:Tl(g,d)}(n),{line:g,scale:C,axis:D}=n,J=g.options,ot=J.fill,ct=J.backgroundColor,{above:Pt=ct,below:Mt=ct}=ot||{};d&&g.points.length&&(ii(p,h),function(Vt,Qt){const{line:ue,target:ge,above:Ae,below:Ue,area:Je,scale:ai}=Qt,pi=ue._loop?"angle":Qt.axis;Vt.save(),"x"===pi&&Ue!==Ae&&(Ll(Vt,ge,Je.top),P(Vt,{line:ue,target:ge,color:Ae,scale:ai,property:pi}),Vt.restore(),Vt.save(),Ll(Vt,ge,Je.bottom)),P(Vt,{line:ue,target:ge,color:Ue,scale:ai,property:pi}),Vt.restore()}(p,{line:g,target:d,above:Pt,below:Mt,area:h,scale:C,axis:D}),Si(p))}var $={id:"filler",afterDatasetsUpdate(p,n,h){const d=(p.data.datasets||[]).length,g=[];let C,D,J,ot;for(D=0;D<d;++D)C=p.getDatasetMeta(D),J=C.dataset,ot=null,J&&J.options&&J instanceof Pr&&(ot={visible:p.isDatasetVisible(D),index:D,fill:Wl(J,D,d),chart:p,axis:C.controller.options.indexAxis,scale:C.vScale,line:J}),C.$filler=ot,g.push(ot);for(D=0;D<d;++D)ot=g[D],ot&&!1!==ot.fill&&(ot.fill=ql(g,D,h.propagate))},beforeDraw(p,n,h){const d="beforeDraw"===h.drawTime,g=p.getSortedVisibleDatasetMetas(),C=p.chartArea;for(let D=g.length-1;D>=0;--D){const J=g[D].$filler;J&&(J.line.updateControlPoints(C,J.axis),d&&W(p.ctx,J,C))}},beforeDatasetsDraw(p,n,h){if("beforeDatasetsDraw"!==h.drawTime)return;const d=p.getSortedVisibleDatasetMetas();for(let g=d.length-1;g>=0;--g){const C=d[g].$filler;C&&W(p.ctx,C,p.chartArea)}},beforeDatasetDraw(p,n,h){const d=n.meta.$filler;d&&!1!==d.fill&&"beforeDatasetDraw"===h.drawTime&&W(p.ctx,d,p.chartArea)},defaults:{propagate:!0,drawTime:"beforeDatasetDraw"}};const gt=(p,n)=>{let{boxHeight:h=n,boxWidth:d=n}=p;return p.usePointStyle&&(h=Math.min(h,n),d=Math.min(d,n)),{boxWidth:d,boxHeight:h,itemHeight:Math.max(n,h)}};class Dt extends Di{constructor(n){super(),this._added=!1,this.legendHitBoxes=[],this._hoveredItem=null,this.doughnutMode=!1,this.chart=n.chart,this.options=n.options,this.ctx=n.ctx,this.legendItems=void 0,this.columnSizes=void 0,this.lineWidths=void 0,this.maxHeight=void 0,this.maxWidth=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.height=void 0,this.width=void 0,this._margins=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(n,h,d){this.maxWidth=n,this.maxHeight=h,this._margins=d,this.setDimensions(),this.buildLabels(),this.fit()}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=this._margins.left,this.right=this.width):(this.height=this.maxHeight,this.top=this._margins.top,this.bottom=this.height)}buildLabels(){const n=this.options.labels||{};let h=We(n.generateLabels,[this.chart],this)||[];n.filter&&(h=h.filter(d=>n.filter(d,this.chart.data))),n.sort&&(h=h.sort((d,g)=>n.sort(d,g,this.chart.data))),this.options.reverse&&h.reverse(),this.legendItems=h}fit(){const{options:n,ctx:h}=this;if(!n.display)return void(this.width=this.height=0);const d=n.labels,g=Ro(d.font),C=g.size,D=this._computeTitleHeight(),{boxWidth:J,itemHeight:ot}=gt(d,C);let ct,Pt;h.font=g.string,this.isHorizontal()?(ct=this.maxWidth,Pt=this._fitRows(D,C,J,ot)+10):(Pt=this.maxHeight,ct=this._fitCols(D,C,J,ot)+10),this.width=Math.min(ct,n.maxWidth||this.maxWidth),this.height=Math.min(Pt,n.maxHeight||this.maxHeight)}_fitRows(n,h,d,g){const{ctx:C,maxWidth:D,options:{labels:{padding:J}}}=this,ot=this.legendHitBoxes=[],ct=this.lineWidths=[0],Pt=g+J;let Mt=n;C.textAlign="left",C.textBaseline="middle";let Vt=-1,Qt=-Pt;return this.legendItems.forEach((ue,ge)=>{const Ae=d+h/2+C.measureText(ue.text).width;(0===ge||ct[ct.length-1]+Ae+2*J>D)&&(Mt+=Pt,ct[ct.length-(ge>0?0:1)]=0,Qt+=Pt,Vt++),ot[ge]={left:0,top:Qt,row:Vt,width:Ae,height:g},ct[ct.length-1]+=Ae+J}),Mt}_fitCols(n,h,d,g){const{ctx:C,maxHeight:D,options:{labels:{padding:J}}}=this,ot=this.legendHitBoxes=[],ct=this.columnSizes=[],Pt=D-n;let Mt=J,Vt=0,Qt=0,ue=0,ge=0;return this.legendItems.forEach((Ae,Ue)=>{const Je=d+h/2+C.measureText(Ae.text).width;Ue>0&&Qt+g+2*J>Pt&&(Mt+=Vt+J,ct.push({width:Vt,height:Qt}),ue+=Vt+J,ge++,Vt=Qt=0),ot[Ue]={left:ue,top:Qt,col:ge,width:Je,height:g},Vt=Math.max(Vt,Je),Qt+=g+J}),Mt+=Vt,ct.push({width:Vt,height:Qt}),Mt}adjustHitBoxes(){if(!this.options.display)return;const n=this._computeTitleHeight(),{legendHitBoxes:h,options:{align:d,labels:{padding:g},rtl:C}}=this,D=Rn(C,this.left,this.width);if(this.isHorizontal()){let J=0,ot=xt(d,this.left+g,this.right-this.lineWidths[J]);for(const ct of h)J!==ct.row&&(J=ct.row,ot=xt(d,this.left+g,this.right-this.lineWidths[J])),ct.top+=this.top+n+g,ct.left=D.leftForLtr(D.x(ot),ct.width),ot+=ct.width+g}else{let J=0,ot=xt(d,this.top+n+g,this.bottom-this.columnSizes[J].height);for(const ct of h)ct.col!==J&&(J=ct.col,ot=xt(d,this.top+n+g,this.bottom-this.columnSizes[J].height)),ct.top=ot,ct.left+=this.left+g,ct.left=D.leftForLtr(D.x(ct.left),ct.width),ot+=ct.height+g}}isHorizontal(){return"top"===this.options.position||"bottom"===this.options.position}draw(){if(this.options.display){const n=this.ctx;ii(n,this),this._draw(),Si(n)}}_draw(){const{options:n,columnSizes:h,lineWidths:d,ctx:g}=this,{align:C,labels:D}=n,J=Ti.color,ot=Rn(n.rtl,this.left,this.width),ct=Ro(D.font),{color:Pt,padding:Mt}=D,Vt=ct.size,Qt=Vt/2;let ue;this.drawTitle(),g.textAlign=ot.textAlign("left"),g.textBaseline="middle",g.lineWidth=.5,g.font=ct.string;const{boxWidth:ge,boxHeight:Ae,itemHeight:Ue}=gt(D,Vt),Je=this.isHorizontal(),ai=this._computeTitleHeight();ue=Je?{x:xt(C,this.left+Mt,this.right-d[0]),y:this.top+Mt+ai,line:0}:{x:this.left+Mt,y:xt(C,this.top+ai+Mt,this.bottom-h[0].height),line:0},go(this.ctx,n.textDirection);const pi=Ue+Mt;this.legendItems.forEach((Ei,ln)=>{g.strokeStyle=Ei.fontColor||Pt,g.fillStyle=Ei.fontColor||Pt;const pn=g.measureText(Ei.text).width,On=ot.textAlign(Ei.textAlign||(Ei.textAlign=D.textAlign)),jn=ge+Qt+pn;let vn=ue.x,Xn=ue.y;var Yn,_n;ot.setWidth(this.width),Je?ln>0&&vn+jn+Mt>this.right&&(Xn=ue.y+=pi,ue.line++,vn=ue.x=xt(C,this.left+Mt,this.right-d[ue.line])):ln>0&&Xn+pi>this.bottom&&(vn=ue.x=vn+h[ue.line].width+Mt,ue.line++,Xn=ue.y=xt(C,this.top+ai+Mt,this.bottom-h[ue.line].height)),function(Yn,ro,_n){if(isNaN(ge)||ge<=0||isNaN(Ae)||Ae<0)return;g.save();const An=Ot(_n.lineWidth,1);if(g.fillStyle=Ot(_n.fillStyle,J),g.lineCap=Ot(_n.lineCap,"butt"),g.lineDashOffset=Ot(_n.lineDashOffset,0),g.lineJoin=Ot(_n.lineJoin,"miter"),g.lineWidth=An,g.strokeStyle=Ot(_n.strokeStyle,J),g.setLineDash(Ot(_n.lineDash,[])),D.usePointStyle){const xr={radius:ge*Math.SQRT2/2,pointStyle:_n.pointStyle,rotation:_n.rotation,borderWidth:An},Zr=ot.xPlus(Yn,ge/2);oe(g,xr,Zr,ro+Qt)}else{const xr=ro+Math.max((Vt-Ae)/2,0),Zr=ot.leftForLtr(Yn,ge),Cs=rr(_n.borderRadius);g.beginPath(),Object.values(Cs).some(qs=>0!==qs)?Fi(g,{x:Zr,y:xr,w:ge,h:Ae,radius:Cs}):g.rect(Zr,xr,ge,Ae),g.fill(),0!==An&&g.stroke()}g.restore()}(ot.x(vn),Xn,Ei),vn=jt(On,vn+ge+Qt,Je?vn+jn:this.right,n.rtl),Yn=ot.x(vn),hi(g,(_n=Ei).text,Yn,Xn+Ue/2,ct,{strikethrough:_n.hidden,textAlign:ot.textAlign(_n.textAlign)}),Je?ue.x+=jn+Mt:ue.y+=pi}),Zo(this.ctx,n.textDirection)}drawTitle(){const n=this.options,h=n.title,d=Ro(h.font),g=Lo(h.padding);if(!h.display)return;const C=Rn(n.rtl,this.left,this.width),D=this.ctx,J=h.position,ct=g.top+d.size/2;let Pt,Mt=this.left,Vt=this.width;if(this.isHorizontal())Vt=Math.max(...this.lineWidths),Pt=this.top+ct,Mt=xt(n.align,Mt,this.right-Vt);else{const ue=this.columnSizes.reduce((ge,Ae)=>Math.max(ge,Ae.height),0);Pt=ct+xt(n.align,this.top,this.bottom-ue-n.labels.padding-this._computeTitleHeight())}const Qt=xt(J,Mt,Mt+Vt);D.textAlign=C.textAlign(wt(J)),D.textBaseline="middle",D.strokeStyle=h.color,D.fillStyle=h.color,D.font=d.string,hi(D,h.text,Qt,Pt,d)}_computeTitleHeight(){const n=this.options.title,h=Ro(n.font),d=Lo(n.padding);return n.display?h.lineHeight+d.height:0}_getLegendItemAt(n,h){let d,g,C;if(Yt(n,this.left,this.right)&&Yt(h,this.top,this.bottom))for(C=this.legendHitBoxes,d=0;d<C.length;++d)if(g=C[d],Yt(n,g.left,g.left+g.width)&&Yt(h,g.top,g.top+g.height))return this.legendItems[d];return null}handleEvent(n){const h=this.options;if(J=h,!("mousemove"===(D=n.type)&&(J.onHover||J.onLeave)||J.onClick&&("click"===D||"mouseup"===D)))return;var D,J;const d=this._getLegendItemAt(n.x,n.y);if("mousemove"===n.type){const D=this._hoveredItem,J=(C=d,null!==(g=D)&&null!==C&&g.datasetIndex===C.datasetIndex&&g.index===C.index);D&&!J&&We(h.onLeave,[n,D,this],this),this._hoveredItem=d,d&&!J&&We(h.onHover,[n,d,this],this)}else d&&We(h.onClick,[n,d,this],this);var g,C}}var Ht={id:"legend",_element:Dt,start(p,n,h){const d=p.legend=new Dt({ctx:p.ctx,options:h,chart:p});Be.configure(p,d,h),Be.addBox(p,d)},stop(p){Be.removeBox(p,p.legend),delete p.legend},beforeUpdate(p,n,h){const d=p.legend;Be.configure(p,d,h),d.options=h},afterUpdate(p){const n=p.legend;n.buildLabels(),n.adjustHitBoxes()},afterEvent(p,n){n.replay||p.legend.handleEvent(n.event)},defaults:{display:!0,position:"top",align:"center",fullSize:!0,reverse:!1,weight:1e3,onClick(p,n,h){const d=n.datasetIndex,g=h.chart;g.isDatasetVisible(d)?(g.hide(d),n.hidden=!0):(g.show(d),n.hidden=!1)},onHover:null,onLeave:null,labels:{color:p=>p.chart.options.color,boxWidth:40,padding:10,generateLabels(p){const n=p.data.datasets,{labels:{usePointStyle:h,pointStyle:d,textAlign:g,color:C}}=p.legend.options;return p._getSortedDatasetMetas().map(D=>{const J=D.controller.getStyle(h?0:void 0),ot=Lo(J.borderWidth);return{text:n[D.index].label,fillStyle:J.backgroundColor,fontColor:C,hidden:!D.visible,lineCap:J.borderCapStyle,lineDash:J.borderDash,lineDashOffset:J.borderDashOffset,lineJoin:J.borderJoinStyle,lineWidth:(ot.width+ot.height)/4,strokeStyle:J.borderColor,pointStyle:d||J.pointStyle,rotation:J.rotation,textAlign:g||J.textAlign,borderRadius:0,datasetIndex:D.index}},this)}},title:{color:p=>p.chart.options.color,display:!1,position:"center",text:""}},descriptors:{_scriptable:p=>!p.startsWith("on"),labels:{_scriptable:p=>!["generateLabels","filter","sort"].includes(p)}}};class re extends Di{constructor(n){super(),this.chart=n.chart,this.options=n.options,this.ctx=n.ctx,this._padding=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(n,h){const d=this.options;if(this.left=0,this.top=0,!d.display)return void(this.width=this.height=this.right=this.bottom=0);this.width=this.right=n,this.height=this.bottom=h;const g=ht(d.text)?d.text.length:1;this._padding=Lo(d.padding);const C=g*Ro(d.font).lineHeight+this._padding.height;this.isHorizontal()?this.height=C:this.width=C}isHorizontal(){const n=this.options.position;return"top"===n||"bottom"===n}_drawArgs(n){const{top:h,left:d,bottom:g,right:C,options:D}=this,J=D.align;let ot,ct,Pt,Mt=0;return this.isHorizontal()?(ct=xt(J,d,C),Pt=h+n,ot=C-d):("left"===D.position?(ct=d+n,Pt=xt(J,g,h),Mt=-.5*Cn):(ct=C-n,Pt=xt(J,h,g),Mt=.5*Cn),ot=g-h),{titleX:ct,titleY:Pt,maxWidth:ot,rotation:Mt}}draw(){const n=this.ctx,h=this.options;if(!h.display)return;const d=Ro(h.font),g=d.lineHeight/2+this._padding.top,{titleX:C,titleY:D,maxWidth:J,rotation:ot}=this._drawArgs(g);hi(n,h.text,0,0,d,{color:h.color,maxWidth:J,rotation:ot,textAlign:wt(h.align),textBaseline:"middle",translation:[C,D]})}}var le={id:"title",_element:re,start(p,n,h){!function(d,g){const C=new re({ctx:d.ctx,options:g,chart:d});Be.configure(d,C,g),Be.addBox(d,C),d.titleBlock=C}(p,h)},stop(p){Be.removeBox(p,p.titleBlock),delete p.titleBlock},beforeUpdate(p,n,h){const d=p.titleBlock;Be.configure(p,d,h),d.options=h},defaults:{align:"center",display:!1,font:{weight:"bold"},fullSize:!0,padding:10,position:"top",text:"",weight:2e3},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};const de=new WeakMap;var Ie={id:"subtitle",start(p,n,h){const d=new re({ctx:p.ctx,options:h,chart:p});Be.configure(p,d,h),Be.addBox(p,d),de.set(p,d)},stop(p){Be.removeBox(p,de.get(p)),de.delete(p)},beforeUpdate(p,n,h){const d=de.get(p);Be.configure(p,d,h),d.options=h},defaults:{align:"center",display:!1,font:{weight:"normal"},fullSize:!0,padding:0,position:"top",text:"",weight:1500},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};const Pe={average(p){if(!p.length)return!1;let n,h,d=0,g=0,C=0;for(n=0,h=p.length;n<h;++n){const D=p[n].element;if(D&&D.hasValue()){const J=D.tooltipPosition();d+=J.x,g+=J.y,++C}}return{x:d/C,y:g/C}},nearest(p,n){if(!p.length)return!1;let h,d,g,C=n.x,D=n.y,J=Number.POSITIVE_INFINITY;for(h=0,d=p.length;h<d;++h){const ot=p[h].element;if(ot&&ot.hasValue()){const ct=dr(n,ot.getCenterPoint());ct<J&&(J=ct,g=ot)}}if(g){const ot=g.tooltipPosition();C=ot.x,D=ot.y}return{x:C,y:D}}};function Oe(p,n){return n&&(ht(n)?Array.prototype.push.apply(p,n):p.push(n)),p}function Se(p){return("string"==typeof p||p instanceof String)&&p.indexOf("\n")>-1?p.split("\n"):p}function Re(p,n){const{element:h,datasetIndex:d,index:g}=n,C=p.getDatasetMeta(d).controller,{label:D,value:J}=C.getLabelAndValue(g);return{chart:p,label:D,parsed:C.getParsed(g),raw:p.data.datasets[d].data[g],formattedValue:J,dataset:C.getDataset(),dataIndex:g,datasetIndex:d,element:h}}function Ze(p,n){const h=p.chart.ctx,{body:d,footer:g,title:C}=p,{boxWidth:D,boxHeight:J}=n,ot=Ro(n.bodyFont),ct=Ro(n.titleFont),Pt=Ro(n.footerFont),Mt=C.length,Vt=g.length,Qt=d.length,ue=Lo(n.padding);let ge=ue.height,Ae=0,Ue=d.reduce((pi,Ei)=>pi+Ei.before.length+Ei.lines.length+Ei.after.length,0);Ue+=p.beforeBody.length+p.afterBody.length,Mt&&(ge+=Mt*ct.lineHeight+(Mt-1)*n.titleSpacing+n.titleMarginBottom),Ue&&(ge+=Qt*(n.displayColors?Math.max(J,ot.lineHeight):ot.lineHeight)+(Ue-Qt)*ot.lineHeight+(Ue-1)*n.bodySpacing),Vt&&(ge+=n.footerMarginTop+Vt*Pt.lineHeight+(Vt-1)*n.footerSpacing);let Je=0;const ai=function(pi){Ae=Math.max(Ae,h.measureText(pi).width+Je)};return h.save(),h.font=ct.string,He(p.title,ai),h.font=ot.string,He(p.beforeBody.concat(p.afterBody),ai),Je=n.displayColors?D+2+n.boxPadding:0,He(d,pi=>{He(pi.before,ai),He(pi.lines,ai),He(pi.after,ai)}),Je=0,h.font=Pt.string,He(p.footer,ai),h.restore(),Ae+=ue.width,{width:Ae,height:ge}}function si(p,n,h,d){const{x:g,width:C}=h,{width:D,chartArea:{left:J,right:ot}}=p;let ct="center";return"center"===d?ct=g<=(J+ot)/2?"left":"right":g<=C/2?ct="left":g>=D-C/2&&(ct="right"),function(Pt,Mt,Vt,Qt){const{x:ue,width:ge}=Qt,Ae=Vt.caretSize+Vt.caretPadding;return"left"===Pt&&ue+ge+Ae>Mt.width||"right"===Pt&&ue-ge-Ae<0||void 0}(ct,p,n,h)&&(ct="center"),ct}function bi(p,n,h){const d=h.yAlign||n.yAlign||function(g,C){const{y:D,height:J}=C;return D<J/2?"top":D>g.height-J/2?"bottom":"center"}(p,h);return{xAlign:h.xAlign||n.xAlign||si(p,n,h,d),yAlign:d}}function mi(p,n,h,d){const{caretSize:g,caretPadding:C,cornerRadius:D}=p,{xAlign:J,yAlign:ot}=h,ct=g+C,{topLeft:Pt,topRight:Mt,bottomLeft:Vt,bottomRight:Qt}=rr(D);let ue=function(Ae,Ue){let{x:Je,width:ai}=Ae;return"right"===Ue?Je-=ai:"center"===Ue&&(Je-=ai/2),Je}(n,J);const ge=function(Ae,Ue,Je){let{y:ai,height:pi}=Ae;return"top"===Ue?ai+=Je:ai-="bottom"===Ue?pi+Je:pi/2,ai}(n,ot,ct);return"center"===ot?"left"===J?ue+=ct:"right"===J&&(ue-=ct):"left"===J?ue-=Math.max(Pt,Vt)+g:"right"===J&&(ue+=Math.max(Mt,Qt)+g),{x:En(ue,0,d.width-n.width),y:En(ge,0,d.height-n.height)}}function wi(p,n,h){const d=Lo(h.padding);return"center"===n?p.x+p.width/2:"right"===n?p.x+p.width-d.right:p.x+d.left}function Ri(p){return Oe([],Se(p))}function $i(p,n){const h=n&&n.dataset&&n.dataset.tooltip&&n.dataset.tooltip.callbacks;return h?p.override(h):p}class Xi extends Di{constructor(n){super(),this.opacity=0,this._active=[],this._eventPosition=void 0,this._size=void 0,this._cachedAnimations=void 0,this._tooltipItems=[],this.$animations=void 0,this.$context=void 0,this.chart=n.chart||n._chart,this._chart=this.chart,this.options=n.options,this.dataPoints=void 0,this.title=void 0,this.beforeBody=void 0,this.body=void 0,this.afterBody=void 0,this.footer=void 0,this.xAlign=void 0,this.yAlign=void 0,this.x=void 0,this.y=void 0,this.height=void 0,this.width=void 0,this.caretX=void 0,this.caretY=void 0,this.labelColors=void 0,this.labelPointStyles=void 0,this.labelTextColors=void 0}initialize(n){this.options=n,this._cachedAnimations=void 0,this.$context=void 0}_resolveAnimations(){const n=this._cachedAnimations;if(n)return n;const h=this.chart,d=this.options.setContext(this.getContext()),g=d.enabled&&h.options.animation&&d.animations,C=new ca(this.chart,g);return g._cacheable&&(this._cachedAnimations=Object.freeze(C)),C}getContext(){return this.$context||(this.$context=us(this.chart.getContext(),{tooltip:this,tooltipItems:this._tooltipItems,type:"tooltip"}))}getTitle(n,h){const{callbacks:d}=h,g=d.beforeTitle.apply(this,[n]),C=d.title.apply(this,[n]),D=d.afterTitle.apply(this,[n]);let J=[];return J=Oe(J,Se(g)),J=Oe(J,Se(C)),J=Oe(J,Se(D)),J}getBeforeBody(n,h){return Ri(h.callbacks.beforeBody.apply(this,[n]))}getBody(n,h){const{callbacks:d}=h,g=[];return He(n,C=>{const D={before:[],lines:[],after:[]},J=$i(d,C);Oe(D.before,Se(J.beforeLabel.call(this,C))),Oe(D.lines,J.label.call(this,C)),Oe(D.after,Se(J.afterLabel.call(this,C))),g.push(D)}),g}getAfterBody(n,h){return Ri(h.callbacks.afterBody.apply(this,[n]))}getFooter(n,h){const{callbacks:d}=h,g=d.beforeFooter.apply(this,[n]),C=d.footer.apply(this,[n]),D=d.afterFooter.apply(this,[n]);let J=[];return J=Oe(J,Se(g)),J=Oe(J,Se(C)),J=Oe(J,Se(D)),J}_createItems(n){const h=this._active,d=this.chart.data,g=[],C=[],D=[];let J,ot,ct=[];for(J=0,ot=h.length;J<ot;++J)ct.push(Re(this.chart,h[J]));return n.filter&&(ct=ct.filter((Pt,Mt,Vt)=>n.filter(Pt,Mt,Vt,d))),n.itemSort&&(ct=ct.sort((Pt,Mt)=>n.itemSort(Pt,Mt,d))),He(ct,Pt=>{const Mt=$i(n.callbacks,Pt);g.push(Mt.labelColor.call(this,Pt)),C.push(Mt.labelPointStyle.call(this,Pt)),D.push(Mt.labelTextColor.call(this,Pt))}),this.labelColors=g,this.labelPointStyles=C,this.labelTextColors=D,this.dataPoints=ct,ct}update(n,h){const d=this.options.setContext(this.getContext()),g=this._active;let C,D=[];if(g.length){const J=Pe[d.position].call(this,g,this._eventPosition);D=this._createItems(d),this.title=this.getTitle(D,d),this.beforeBody=this.getBeforeBody(D,d),this.body=this.getBody(D,d),this.afterBody=this.getAfterBody(D,d),this.footer=this.getFooter(D,d);const ot=this._size=Ze(this,d),ct=Object.assign({},J,ot),Pt=bi(this.chart,d,ct),Mt=mi(d,ct,Pt,this.chart);this.xAlign=Pt.xAlign,this.yAlign=Pt.yAlign,C={opacity:1,x:Mt.x,y:Mt.y,width:ot.width,height:ot.height,caretX:J.x,caretY:J.y}}else 0!==this.opacity&&(C={opacity:0});this._tooltipItems=D,this.$context=void 0,C&&this._resolveAnimations().update(this,C),n&&d.external&&d.external.call(this,{chart:this.chart,tooltip:this,replay:h})}drawCaret(n,h,d,g){const C=this.getCaretPosition(n,d,g);h.lineTo(C.x1,C.y1),h.lineTo(C.x2,C.y2),h.lineTo(C.x3,C.y3)}getCaretPosition(n,h,d){const{xAlign:g,yAlign:C}=this,{caretSize:D,cornerRadius:J}=d,{topLeft:ot,topRight:ct,bottomLeft:Pt,bottomRight:Mt}=rr(J),{x:Vt,y:Qt}=n,{width:ue,height:ge}=h;let Ae,Ue,Je,ai,pi,Ei;return"center"===C?(pi=Qt+ge/2,"left"===g?(Ae=Vt,Ue=Ae-D,ai=pi+D,Ei=pi-D):(Ae=Vt+ue,Ue=Ae+D,ai=pi-D,Ei=pi+D),Je=Ae):(Ue="left"===g?Vt+Math.max(ot,Pt)+D:"right"===g?Vt+ue-Math.max(ct,Mt)-D:this.caretX,"top"===C?(ai=Qt,pi=ai-D,Ae=Ue-D,Je=Ue+D):(ai=Qt+ge,pi=ai+D,Ae=Ue+D,Je=Ue-D),Ei=ai),{x1:Ae,x2:Ue,x3:Je,y1:ai,y2:pi,y3:Ei}}drawTitle(n,h,d){const g=this.title,C=g.length;let D,J,ot;if(C){const ct=Rn(d.rtl,this.x,this.width);for(n.x=wi(this,d.titleAlign,d),h.textAlign=ct.textAlign(d.titleAlign),h.textBaseline="middle",D=Ro(d.titleFont),J=d.titleSpacing,h.fillStyle=d.titleColor,h.font=D.string,ot=0;ot<C;++ot)h.fillText(g[ot],ct.x(n.x),n.y+D.lineHeight/2),n.y+=D.lineHeight+J,ot+1===C&&(n.y+=d.titleMarginBottom-J)}}_drawColorBox(n,h,d,g,C){const D=this.labelColors[d],J=this.labelPointStyles[d],{boxHeight:ot,boxWidth:ct,boxPadding:Pt}=C,Mt=Ro(C.bodyFont),Vt=wi(this,"left",C),Qt=g.x(Vt),ge=h.y+(ot<Mt.lineHeight?(Mt.lineHeight-ot)/2:0);if(C.usePointStyle){const Ae={radius:Math.min(ct,ot)/2,pointStyle:J.pointStyle,rotation:J.rotation,borderWidth:1},Ue=g.leftForLtr(Qt,ct)+ct/2,Je=ge+ot/2;n.strokeStyle=C.multiKeyBackground,n.fillStyle=C.multiKeyBackground,oe(n,Ae,Ue,Je),n.strokeStyle=D.borderColor,n.fillStyle=D.backgroundColor,oe(n,Ae,Ue,Je)}else{n.lineWidth=D.borderWidth||1,n.strokeStyle=D.borderColor,n.setLineDash(D.borderDash||[]),n.lineDashOffset=D.borderDashOffset||0;const Ae=g.leftForLtr(Qt,ct-Pt),Ue=g.leftForLtr(g.xPlus(Qt,1),ct-Pt-2),Je=rr(D.borderRadius);Object.values(Je).some(ai=>0!==ai)?(n.beginPath(),n.fillStyle=C.multiKeyBackground,Fi(n,{x:Ae,y:ge,w:ct,h:ot,radius:Je}),n.fill(),n.stroke(),n.fillStyle=D.backgroundColor,n.beginPath(),Fi(n,{x:Ue,y:ge+1,w:ct-2,h:ot-2,radius:Je}),n.fill()):(n.fillStyle=C.multiKeyBackground,n.fillRect(Ae,ge,ct,ot),n.strokeRect(Ae,ge,ct,ot),n.fillStyle=D.backgroundColor,n.fillRect(Ue,ge+1,ct-2,ot-2))}n.fillStyle=this.labelTextColors[d]}drawBody(n,h,d){const{body:g}=this,{bodySpacing:C,bodyAlign:D,displayColors:J,boxHeight:ot,boxWidth:ct,boxPadding:Pt}=d,Mt=Ro(d.bodyFont);let Vt=Mt.lineHeight,Qt=0;const ue=Rn(d.rtl,this.x,this.width),ge=function(On){h.fillText(On,ue.x(n.x+Qt),n.y+Vt/2),n.y+=Vt+C},Ae=ue.textAlign(D);let Ue,Je,ai,pi,Ei,ln,pn;for(h.textAlign=D,h.textBaseline="middle",h.font=Mt.string,n.x=wi(this,Ae,d),h.fillStyle=d.bodyColor,He(this.beforeBody,ge),Qt=J&&"right"!==Ae?"center"===D?ct/2+Pt:ct+2+Pt:0,pi=0,ln=g.length;pi<ln;++pi){for(Ue=g[pi],Je=this.labelTextColors[pi],h.fillStyle=Je,He(Ue.before,ge),ai=Ue.lines,J&&ai.length&&(this._drawColorBox(h,n,pi,ue,d),Vt=Math.max(Mt.lineHeight,ot)),Ei=0,pn=ai.length;Ei<pn;++Ei)ge(ai[Ei]),Vt=Mt.lineHeight;He(Ue.after,ge)}Qt=0,Vt=Mt.lineHeight,He(this.afterBody,ge),n.y-=C}drawFooter(n,h,d){const g=this.footer,C=g.length;let D,J;if(C){const ot=Rn(d.rtl,this.x,this.width);for(n.x=wi(this,d.footerAlign,d),n.y+=d.footerMarginTop,h.textAlign=ot.textAlign(d.footerAlign),h.textBaseline="middle",D=Ro(d.footerFont),h.fillStyle=d.footerColor,h.font=D.string,J=0;J<C;++J)h.fillText(g[J],ot.x(n.x),n.y+D.lineHeight/2),n.y+=D.lineHeight+d.footerSpacing}}drawBackground(n,h,d,g){const{xAlign:C,yAlign:D}=this,{x:J,y:ot}=n,{width:ct,height:Pt}=d,{topLeft:Mt,topRight:Vt,bottomLeft:Qt,bottomRight:ue}=rr(g.cornerRadius);h.fillStyle=g.backgroundColor,h.strokeStyle=g.borderColor,h.lineWidth=g.borderWidth,h.beginPath(),h.moveTo(J+Mt,ot),"top"===D&&this.drawCaret(n,h,d,g),h.lineTo(J+ct-Vt,ot),h.quadraticCurveTo(J+ct,ot,J+ct,ot+Vt),"center"===D&&"right"===C&&this.drawCaret(n,h,d,g),h.lineTo(J+ct,ot+Pt-ue),h.quadraticCurveTo(J+ct,ot+Pt,J+ct-ue,ot+Pt),"bottom"===D&&this.drawCaret(n,h,d,g),h.lineTo(J+Qt,ot+Pt),h.quadraticCurveTo(J,ot+Pt,J,ot+Pt-Qt),"center"===D&&"left"===C&&this.drawCaret(n,h,d,g),h.lineTo(J,ot+Mt),h.quadraticCurveTo(J,ot,J+Mt,ot),h.closePath(),h.fill(),g.borderWidth>0&&h.stroke()}_updateAnimationTarget(n){const h=this.chart,d=this.$animations,g=d&&d.x,C=d&&d.y;if(g||C){const D=Pe[n.position].call(this,this._active,this._eventPosition);if(!D)return;const J=this._size=Ze(this,n),ot=Object.assign({},D,this._size),ct=bi(h,n,ot),Pt=mi(n,ot,ct,h);g._to===Pt.x&&C._to===Pt.y||(this.xAlign=ct.xAlign,this.yAlign=ct.yAlign,this.width=J.width,this.height=J.height,this.caretX=D.x,this.caretY=D.y,this._resolveAnimations().update(this,Pt))}}draw(n){const h=this.options.setContext(this.getContext());let d=this.opacity;if(!d)return;this._updateAnimationTarget(h);const g={width:this.width,height:this.height},C={x:this.x,y:this.y};d=Math.abs(d)<.001?0:d;const D=Lo(h.padding);h.enabled&&(this.title.length||this.beforeBody.length||this.body.length||this.afterBody.length||this.footer.length)&&(n.save(),n.globalAlpha=d,this.drawBackground(C,n,g,h),go(n,h.textDirection),C.y+=D.top,this.drawTitle(C,n,h),this.drawBody(C,n,h),this.drawFooter(C,n,h),Zo(n,h.textDirection),n.restore())}getActiveElements(){return this._active||[]}setActiveElements(n,h){const d=this._active,g=n.map(({datasetIndex:J,index:ot})=>{const ct=this.chart.getDatasetMeta(J);if(!ct)throw new Error("Cannot find a dataset at index "+J);return{datasetIndex:J,element:ct.data[ot],index:ot}}),C=!Fe(d,g),D=this._positionChanged(g,h);(C||D)&&(this._active=g,this._eventPosition=h,this._ignoreReplayEvents=!0,this.update(!0))}handleEvent(n,h,d=!0){if(h&&this._ignoreReplayEvents)return!1;this._ignoreReplayEvents=!1;const g=this.options,C=this._active||[],D=this._getActiveElements(n,C,h,d),J=this._positionChanged(D,n),ot=h||!Fe(D,C)||J;return ot&&(this._active=D,(g.enabled||g.external)&&(this._eventPosition={x:n.x,y:n.y},this.update(!0,h))),ot}_getActiveElements(n,h,d,g){const C=this.options;if("mouseout"===n.type)return[];if(!g)return h;const D=this.chart.getElementsAtEventForMode(n,C.mode,C,d);return C.reverse&&D.reverse(),D}_positionChanged(n,h){const{caretX:d,caretY:g,options:C}=this,D=Pe[C.position].call(this,n,h);return!1!==D&&(d!==D.x||g!==D.y)}}Xi.positioners=Pe;var Mn=Object.freeze({__proto__:null,Decimation:fl,Filler:$,Legend:Ht,SubTitle:Ie,Title:le,Tooltip:{id:"tooltip",_element:Xi,positioners:Pe,afterInit(p,n,h){h&&(p.tooltip=new Xi({chart:p,options:h}))},beforeUpdate(p,n,h){p.tooltip&&p.tooltip.initialize(h)},reset(p,n,h){p.tooltip&&p.tooltip.initialize(h)},afterDraw(p){const n=p.tooltip,h={tooltip:n};!1!==p.notifyPlugins("beforeTooltipDraw",h)&&(n&&n.draw(p.ctx),p.notifyPlugins("afterTooltipDraw",h))},afterEvent(p,n){p.tooltip&&p.tooltip.handleEvent(n.event,n.replay,n.inChartArea)&&(n.changed=!0)},defaults:{enabled:!0,external:null,position:"average",backgroundColor:"rgba(0,0,0,0.8)",titleColor:"#fff",titleFont:{weight:"bold"},titleSpacing:2,titleMarginBottom:6,titleAlign:"left",bodyColor:"#fff",bodySpacing:2,bodyFont:{},bodyAlign:"left",footerColor:"#fff",footerSpacing:2,footerMarginTop:6,footerFont:{weight:"bold"},footerAlign:"left",padding:6,caretPadding:2,caretSize:5,cornerRadius:6,boxHeight:(p,n)=>n.bodyFont.size,boxWidth:(p,n)=>n.bodyFont.size,multiKeyBackground:"#fff",displayColors:!0,boxPadding:0,borderColor:"rgba(0,0,0,0)",borderWidth:0,animation:{duration:400,easing:"easeOutQuart"},animations:{numbers:{type:"number",properties:["x","y","width","height","caretX","caretY"]},opacity:{easing:"linear",duration:200}},callbacks:{beforeTitle:dt,title(p){if(p.length>0){const n=p[0],h=n.chart.data.labels,d=h?h.length:0;if(this&&this.options&&"dataset"===this.options.mode)return n.dataset.label||"";if(n.label)return n.label;if(d>0&&n.dataIndex<d)return h[n.dataIndex]}return""},afterTitle:dt,beforeBody:dt,beforeLabel:dt,label(p){if(this&&this.options&&"dataset"===this.options.mode)return p.label+": "+p.formattedValue||p.formattedValue;let n=p.dataset.label||"";n&&(n+=": ");const h=p.formattedValue;return lt(h)||(n+=h),n},labelColor(p){const n=p.chart.getDatasetMeta(p.datasetIndex).controller.getStyle(p.dataIndex);return{borderColor:n.borderColor,backgroundColor:n.backgroundColor,borderWidth:n.borderWidth,borderDash:n.borderDash,borderDashOffset:n.borderDashOffset,borderRadius:0}},labelTextColor(){return this.options.bodyColor},labelPointStyle(p){const n=p.chart.getDatasetMeta(p.datasetIndex).controller.getStyle(p.dataIndex);return{pointStyle:n.pointStyle,rotation:n.rotation}},afterLabel:dt,afterBody:dt,beforeFooter:dt,footer:dt,afterFooter:dt}},defaultRoutes:{bodyFont:"font",footerFont:"font",titleFont:"font"},descriptors:{_scriptable:p=>"filter"!==p&&"itemSort"!==p&&"external"!==p,_indexable:!1,callbacks:{_scriptable:!1,_indexable:!1},animation:{_fallback:!1},animations:{_fallback:"animation"}},additionalOptionScopes:["interaction"]}});class Ln extends Ke{constructor(n){super(n),this._startValue=void 0,this._valueRange=0,this._addedLabels=[]}init(n){const h=this._addedLabels;if(h.length){const d=this.getLabels();for(const{index:g,label:C}of h)d[g]===C&&d.splice(g,1);this._addedLabels=[]}super.init(n)}parse(n,h){if(lt(n))return null;const d=this.getLabels();return g=h=isFinite(h)&&d[h]===n?h:function zn(p,n,h,d){const g=p.indexOf(n);return-1===g?(J=h,ot=d,"string"==typeof(D=n)?(J=p.push(D)-1,ot.unshift({index:J,label:D})):isNaN(D)&&(J=null),J):g!==p.lastIndexOf(n)?h:g;var D,J,ot}(d,n,Ot(h,n),this._addedLabels),C=d.length-1,null===g?null:En(Math.round(g),0,C);var g,C}determineDataLimits(){const{minDefined:n,maxDefined:h}=this.getUserBounds();let{min:d,max:g}=this.getMinMax(!0);"ticks"===this.options.bounds&&(n||(d=0),h||(g=this.getLabels().length-1)),this.min=d,this.max=g}buildTicks(){const n=this.min,h=this.max,d=this.options.offset,g=[];let C=this.getLabels();C=0===n&&h===C.length-1?C:C.slice(n,h+1),this._valueRange=Math.max(C.length-(d?0:1),1),this._startValue=this.min-(d?.5:0);for(let D=n;D<=h;D++)g.push({value:D});return g}getLabelForValue(n){const h=this.getLabels();return n>=0&&n<h.length?h[n]:n}configure(){super.configure(),this.isHorizontal()||(this._reversePixels=!this._reversePixels)}getPixelForValue(n){return"number"!=typeof n&&(n=this.parse(n)),null===n?NaN:this.getPixelForDecimal((n-this._startValue)/this._valueRange)}getPixelForTick(n){const h=this.ticks;return n<0||n>h.length-1?null:this.getPixelForValue(h[n].value)}getValueForPixel(n){return Math.round(this._startValue+this.getDecimalForPixel(n)*this._valueRange)}getBasePixel(){return this.bottom}}function Wo(p,n,{horizontal:h,minRotation:d}){const g=No(d),C=(h?Math.sin(g):Math.cos(g))||.001;return Math.min(n/C,.75*n*(""+p).length)}Ln.id="category",Ln.defaults={ticks:{callback:Ln.prototype.getLabelForValue}};class un extends Ke{constructor(n){super(n),this.start=void 0,this.end=void 0,this._startValue=void 0,this._endValue=void 0,this._valueRange=0}parse(n,h){return lt(n)||("number"==typeof n||n instanceof Number)&&!isFinite(+n)?null:+n}handleTickRangeOptions(){const{beginAtZero:n}=this.options,{minDefined:h,maxDefined:d}=this.getUserBounds();let{min:g,max:C}=this;const D=ot=>g=h?g:ot,J=ot=>C=d?C:ot;if(n){const ot=Ui(g),ct=Ui(C);ot<0&&ct<0?J(0):ot>0&&ct>0&&D(0)}if(g===C){let ot=1;(C>=Number.MAX_SAFE_INTEGER||g<=Number.MIN_SAFE_INTEGER)&&(ot=Math.abs(.05*C)),J(C+ot),n||D(g-ot)}this.min=g,this.max=C}getTickLimit(){const n=this.options.ticks;let h,{maxTicksLimit:d,stepSize:g}=n;return g?(h=Math.ceil(this.max/g)-Math.floor(this.min/g)+1,h>1e3&&(console.warn(`scales.${this.id}.ticks.stepSize: ${g} would result generating up to ${h} ticks. Limiting to 1000.`),h=1e3)):(h=this.computeTickLimit(),d=d||11),d&&(h=Math.min(d,h)),h}computeTickLimit(){return Number.POSITIVE_INFINITY}buildTicks(){const n=this.options,h=n.ticks;let d=this.getTickLimit();d=Math.max(2,d);const g=function(C,D){const J=[],{bounds:ot,step:ct,min:Pt,max:Mt,precision:Vt,count:Qt,maxTicks:ue,maxDigits:ge,includeBounds:Ae}=C,Ue=ct||1,Je=ue-1,{min:ai,max:pi}=D,Ei=!lt(Pt),ln=!lt(Mt),pn=!lt(Qt),On=(pi-ai)/(ge+1);let jn,vn,Xn,Yn,ro=hn((pi-ai)/Je/Ue)*Ue;if(ro<1e-14&&!Ei&&!ln)return[{value:ai},{value:pi}];Yn=Math.ceil(pi/ro)-Math.floor(ai/ro),Yn>Je&&(ro=hn(Yn*ro/Je/Ue)*Ue),lt(Vt)||(jn=Math.pow(10,Vt),ro=Math.ceil(ro*jn)/jn),"ticks"===ot?(vn=Math.floor(ai/ro)*ro,Xn=Math.ceil(pi/ro)*ro):(vn=ai,Xn=pi),Ei&&ln&&ct&&Oo((Mt-Pt)/ct,ro/1e3)?(Yn=Math.round(Math.min((Mt-Pt)/ro,ue)),ro=(Mt-Pt)/Yn,vn=Pt,Xn=Mt):pn?(vn=Ei?Pt:vn,Xn=ln?Mt:Xn,Yn=Qt-1,ro=(Xn-vn)/Yn):(Yn=(Xn-vn)/ro,Yn=qo(Yn,Math.round(Yn),ro/1e3)?Math.round(Yn):Math.ceil(Yn));const _n=Math.max(ko(ro),ko(vn));jn=Math.pow(10,lt(Vt)?_n:Vt),vn=Math.round(vn*jn)/jn,Xn=Math.round(Xn*jn)/jn;let An=0;for(Ei&&(Ae&&vn!==Pt?(J.push({value:Pt}),vn<Pt&&An++,qo(Math.round((vn+An*ro)*jn)/jn,Pt,Wo(Pt,On,C))&&An++):vn<Pt&&An++);An<Yn;++An)J.push({value:Math.round((vn+An*ro)*jn)/jn});return ln&&Ae&&Xn!==Mt?J.length&&qo(J[J.length-1].value,Mt,Wo(Mt,On,C))?J[J.length-1].value=Mt:J.push({value:Mt}):ln&&Xn!==Mt||J.push({value:Xn}),J}({maxTicks:d,bounds:n.bounds,min:n.min,max:n.max,precision:h.precision,step:h.stepSize,count:h.count,maxDigits:this._maxDigits(),horizontal:this.isHorizontal(),minRotation:h.minRotation||0,includeBounds:!1!==h.includeBounds},this._range||this);return"ticks"===n.bounds&&Dr(g,this,"value"),n.reverse?(g.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),g}configure(){const n=this.ticks;let h=this.min,d=this.max;if(super.configure(),this.options.offset&&n.length){const g=(d-h)/Math.max(n.length-1,1)/2;h-=g,d+=g}this._startValue=h,this._endValue=d,this._valueRange=d-h}getLabelForValue(n){return ir(n,this.chart.options.locale,this.options.ticks.format)}}class to extends un{determineDataLimits(){const{min:n,max:h}=this.getMinMax(!0);this.min=At(n)?n:0,this.max=At(h)?h:1,this.handleTickRangeOptions()}computeTickLimit(){const n=this.isHorizontal(),h=n?this.width:this.height,d=No(this.options.ticks.minRotation),g=(n?Math.sin(d):Math.cos(d))||.001,C=this._resolveTickFontOptions(0);return Math.ceil(h/Math.min(40,C.lineHeight/g))}getPixelForValue(n){return null===n?NaN:this.getPixelForDecimal((n-this._startValue)/this._valueRange)}getValueForPixel(n){return this._startValue+this.getDecimalForPixel(n)*this._valueRange}}function yo(p){return p/Math.pow(10,Math.floor(xi(p)))==1}to.id="linear",to.defaults={ticks:{callback:rn.formatters.numeric}};class Kn extends Ke{constructor(n){super(n),this.start=void 0,this.end=void 0,this._startValue=void 0,this._valueRange=0}parse(n,h){const d=un.prototype.parse.apply(this,[n,h]);if(0!==d)return At(d)&&d>0?d:null;this._zero=!0}determineDataLimits(){const{min:n,max:h}=this.getMinMax(!0);this.min=At(n)?Math.max(0,n):null,this.max=At(h)?Math.max(0,h):null,this.options.beginAtZero&&(this._zero=!0),this.handleTickRangeOptions()}handleTickRangeOptions(){const{minDefined:n,maxDefined:h}=this.getUserBounds();let d=this.min,g=this.max;const C=ot=>d=n?d:ot,D=ot=>g=h?g:ot,J=(ot,ct)=>Math.pow(10,Math.floor(xi(ot))+ct);d===g&&(d<=0?(C(1),D(10)):(C(J(d,-1)),D(J(g,1)))),d<=0&&C(J(g,-1)),g<=0&&D(J(d,1)),this._zero&&this.min!==this._suggestedMin&&d===J(this.min,0)&&C(J(d,-1)),this.min=d,this.max=g}buildTicks(){const n=this.options,h=function(d,g){const C=Math.floor(xi(g.max)),D=Math.ceil(g.max/Math.pow(10,C)),J=[];let ot=Wt(d.min,Math.pow(10,Math.floor(xi(g.min)))),ct=Math.floor(xi(ot)),Pt=Math.floor(ot/Math.pow(10,ct)),Mt=ct<0?Math.pow(10,Math.abs(ct)):1;do{J.push({value:ot,major:yo(ot)}),++Pt,10===Pt&&(Pt=1,++ct,Mt=ct>=0?1:Mt),ot=Math.round(Pt*Math.pow(10,ct)*Mt)/Mt}while(ct<C||ct===C&&Pt<D);const Vt=Wt(d.max,ot);return J.push({value:Vt,major:yo(ot)}),J}({min:this._userMin,max:this._userMax},this);return"ticks"===n.bounds&&Dr(h,this,"value"),n.reverse?(h.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),h}getLabelForValue(n){return void 0===n?"0":ir(n,this.chart.options.locale,this.options.ticks.format)}configure(){const n=this.min;super.configure(),this._startValue=xi(n),this._valueRange=xi(this.max)-xi(n)}getPixelForValue(n){return void 0!==n&&0!==n||(n=this.min),null===n||isNaN(n)?NaN:this.getPixelForDecimal(n===this.min?0:(xi(n)-this._startValue)/this._valueRange)}getValueForPixel(n){const h=this.getDecimalForPixel(n);return Math.pow(10,this._startValue+h*this._valueRange)}}function qn(p){const n=p.ticks;if(n.display&&p.display){const h=Lo(n.backdropPadding);return Ot(n.font&&n.font.size,Ti.font.size)+h.height}return 0}function mo(p,n,h,d,g){return p===d||p===g?{start:n-h/2,end:n+h/2}:p<d||p>g?{start:n-h,end:n}:{start:n,end:n+h}}function Vn(p,n,h,d,g){const C=Math.abs(Math.sin(h)),D=Math.abs(Math.cos(h));let J=0,ot=0;d.start<n.l?(J=(n.l-d.start)/C,p.l=Math.min(p.l,n.l-J)):d.end>n.r&&(J=(d.end-n.r)/C,p.r=Math.max(p.r,n.r+J)),g.start<n.t?(ot=(n.t-g.start)/D,p.t=Math.min(p.t,n.t-ot)):g.end>n.b&&(ot=(g.end-n.b)/D,p.b=Math.max(p.b,n.b+ot))}function Ss(p){return 0===p||180===p?"center":p<180?"left":"right"}function es(p,n,h){return"right"===h?p-=n:"center"===h&&(p-=n/2),p}function Zs(p,n,h){return 90===h||270===h?p-=n/2:(h>270||h<90)&&(p-=n),p}function Ts(p,n,h,d){const{ctx:g}=p;if(h)g.arc(p.xCenter,p.yCenter,n,0,wn);else{let C=p.getPointPosition(0,n);g.moveTo(C.x,C.y);for(let D=1;D<d;D++)C=p.getPointPosition(D,n),g.lineTo(C.x,C.y)}}Kn.id="logarithmic",Kn.defaults={ticks:{callback:rn.formatters.logarithmic,major:{enabled:!0}}};class kr extends un{constructor(n){super(n),this.xCenter=void 0,this.yCenter=void 0,this.drawingArea=void 0,this._pointLabels=[],this._pointLabelItems=[]}setDimensions(){const n=this._padding=Lo(qn(this.options)/2),h=this.width=this.maxWidth-n.width,d=this.height=this.maxHeight-n.height;this.xCenter=Math.floor(this.left+h/2+n.left),this.yCenter=Math.floor(this.top+d/2+n.top),this.drawingArea=Math.floor(Math.min(h,d)/2)}determineDataLimits(){const{min:n,max:h}=this.getMinMax(!1);this.min=At(n)&&!isNaN(n)?n:0,this.max=At(h)&&!isNaN(h)?h:0,this.handleTickRangeOptions()}computeTickLimit(){return Math.ceil(this.drawingArea/qn(this.options))}generateTickLabels(n){un.prototype.generateTickLabels.call(this,n),this._pointLabels=this.getLabels().map((h,d)=>{const g=We(this.options.pointLabels.callback,[h,d],this);return g||0===g?g:""}).filter((h,d)=>this.chart.getDataVisibility(d))}fit(){const n=this.options;n.display&&n.pointLabels.display?function $n(p){const n={l:p.left+p._padding.left,r:p.right-p._padding.right,t:p.top+p._padding.top,b:p.bottom-p._padding.bottom},h=Object.assign({},n),d=[],g=[],C=p._pointLabels.length,D=p.options.pointLabels,J=D.centerPointLabels?Cn/C:0;for(let Mt=0;Mt<C;Mt++){const Vt=D.setContext(p.getPointLabelContext(Mt));g[Mt]=Vt.padding;const Qt=p.getPointPosition(Mt,p.drawingArea+g[Mt],J),ue=Ro(Vt.font),ge=(ot=p.ctx,ct=ue,Pt=ht(Pt=p._pointLabels[Mt])?Pt:[Pt],{w:Ce(ot,ct.string,Pt),h:Pt.length*ct.lineHeight});d[Mt]=ge;const Ae=lr(p.getIndexAngle(Mt)+J),Ue=Math.round(po(Ae));Vn(h,n,Ae,mo(Ue,Qt.x,ge.w,0,180),mo(Ue,Qt.y,ge.h,90,270))}var ot,ct,Pt;p.setCenterPoint(n.l-h.l,h.r-n.r,n.t-h.t,h.b-n.b),p._pointLabelItems=function(Mt,Vt,Qt){const ue=[],ge=Mt._pointLabels.length,Ae=Mt.options,Ue=qn(Ae)/2,Je=Mt.drawingArea,ai=Ae.pointLabels.centerPointLabels?Cn/ge:0;for(let pi=0;pi<ge;pi++){const Ei=Mt.getPointPosition(pi,Je+Ue+Qt[pi],ai),ln=Math.round(po(lr(Ei.angle+ee))),pn=Vt[pi],On=Zs(Ei.y,pn.h,ln),jn=Ss(ln),vn=es(Ei.x,pn.w,jn);ue.push({x:Ei.x,y:On,textAlign:jn,left:vn,top:On,right:vn+pn.w,bottom:On+pn.h})}return ue}(p,d,g)}(this):this.setCenterPoint(0,0,0,0)}setCenterPoint(n,h,d,g){this.xCenter+=Math.floor((n-h)/2),this.yCenter+=Math.floor((d-g)/2),this.drawingArea-=Math.min(this.drawingArea/2,Math.max(n,h,d,g))}getIndexAngle(n){return lr(n*(wn/(this._pointLabels.length||1))+No(this.options.startAngle||0))}getDistanceFromCenterForValue(n){if(lt(n))return NaN;const h=this.drawingArea/(this.max-this.min);return this.options.reverse?(this.max-n)*h:(n-this.min)*h}getValueForDistanceFromCenter(n){if(lt(n))return NaN;const h=n/(this.drawingArea/(this.max-this.min));return this.options.reverse?this.max-h:this.min+h}getPointLabelContext(n){const h=this._pointLabels||[];if(n>=0&&n<h.length){const d=h[n];return us(this.getContext(),{label:d,index:n,type:"pointLabel"})}}getPointPosition(n,h,d=0){const g=this.getIndexAngle(n)-ee+d;return{x:Math.cos(g)*h+this.xCenter,y:Math.sin(g)*h+this.yCenter,angle:g}}getPointPositionForValue(n,h){return this.getPointPosition(n,this.getDistanceFromCenterForValue(h))}getBasePosition(n){return this.getPointPositionForValue(n||0,this.getBaseValue())}getPointLabelPosition(n){const{left:h,top:d,right:g,bottom:C}=this._pointLabelItems[n];return{left:h,top:d,right:g,bottom:C}}drawBackground(){const{backgroundColor:n,grid:{circular:h}}=this.options;if(n){const d=this.ctx;d.save(),d.beginPath(),Ts(this,this.getDistanceFromCenterForValue(this._endValue),h,this._pointLabels.length),d.closePath(),d.fillStyle=n,d.fill(),d.restore()}}drawGrid(){const n=this.ctx,h=this.options,{angleLines:d,grid:g}=h,C=this._pointLabels.length;let D,J,ot;if(h.pointLabels.display&&function(ct,Pt){const{ctx:Mt,options:{pointLabels:Vt}}=ct;for(let Qt=Pt-1;Qt>=0;Qt--){const ue=Vt.setContext(ct.getPointLabelContext(Qt)),ge=Ro(ue.font),{x:Ae,y:Ue,textAlign:Je,left:ai,top:pi,right:Ei,bottom:ln}=ct._pointLabelItems[Qt],{backdropColor:pn}=ue;if(!lt(pn)){const On=Lo(ue.backdropPadding);Mt.fillStyle=pn,Mt.fillRect(ai-On.left,pi-On.top,Ei-ai+On.width,ln-pi+On.height)}hi(Mt,ct._pointLabels[Qt],Ae,Ue+ge.lineHeight/2,ge,{color:ue.color,textAlign:Je,textBaseline:"middle"})}}(this,C),g.display&&this.ticks.forEach((ct,Pt)=>{0!==Pt&&(J=this.getDistanceFromCenterForValue(ct.value),function(Mt,Vt,Qt,ue){const ge=Mt.ctx,Ae=Vt.circular,{color:Ue,lineWidth:Je}=Vt;!Ae&&!ue||!Ue||!Je||Qt<0||(ge.save(),ge.strokeStyle=Ue,ge.lineWidth=Je,ge.setLineDash(Vt.borderDash),ge.lineDashOffset=Vt.borderDashOffset,ge.beginPath(),Ts(Mt,Qt,Ae,ue),ge.closePath(),ge.stroke(),ge.restore())}(this,g.setContext(this.getContext(Pt-1)),J,C))}),d.display){for(n.save(),D=C-1;D>=0;D--){const ct=d.setContext(this.getPointLabelContext(D)),{color:Pt,lineWidth:Mt}=ct;Mt&&Pt&&(n.lineWidth=Mt,n.strokeStyle=Pt,n.setLineDash(ct.borderDash),n.lineDashOffset=ct.borderDashOffset,J=this.getDistanceFromCenterForValue(h.ticks.reverse?this.min:this.max),ot=this.getPointPosition(D,J),n.beginPath(),n.moveTo(this.xCenter,this.yCenter),n.lineTo(ot.x,ot.y),n.stroke())}n.restore()}}drawBorder(){}drawLabels(){const n=this.ctx,h=this.options,d=h.ticks;if(!d.display)return;const g=this.getIndexAngle(0);let C,D;n.save(),n.translate(this.xCenter,this.yCenter),n.rotate(g),n.textAlign="center",n.textBaseline="middle",this.ticks.forEach((J,ot)=>{if(0===ot&&!h.reverse)return;const ct=d.setContext(this.getContext(ot)),Pt=Ro(ct.font);if(C=this.getDistanceFromCenterForValue(this.ticks[ot].value),ct.showLabelBackdrop){n.font=Pt.string,D=n.measureText(J.label).width,n.fillStyle=ct.backdropColor;const Mt=Lo(ct.backdropPadding);n.fillRect(-D/2-Mt.left,-C-Pt.size/2-Mt.top,D+Mt.width,Pt.size+Mt.height)}hi(n,J.label,0,-C,Pt,{color:ct.color})}),n.restore()}drawTitle(){}}kr.id="radialLinear",kr.defaults={display:!0,animate:!0,position:"chartArea",angleLines:{display:!0,lineWidth:1,borderDash:[],borderDashOffset:0},grid:{circular:!1},startAngle:0,ticks:{showLabelBackdrop:!0,callback:rn.formatters.numeric},pointLabels:{backdropColor:void 0,backdropPadding:2,display:!0,font:{size:10},callback:p=>p,padding:5,centerPointLabels:!1}},kr.defaultRoutes={"angleLines.color":"borderColor","pointLabels.color":"color","ticks.color":"color"},kr.descriptors={angleLines:{_fallback:"grid"}};const Ur={millisecond:{common:!0,size:1,steps:1e3},second:{common:!0,size:1e3,steps:60},minute:{common:!0,size:6e4,steps:60},hour:{common:!0,size:36e5,steps:24},day:{common:!0,size:864e5,steps:30},week:{common:!1,size:6048e5,steps:4},month:{common:!0,size:2628e6,steps:12},quarter:{common:!1,size:7884e6,steps:4},year:{common:!0,size:3154e7}},Fr=Object.keys(Ur);function ia(p,n){return p-n}function tl(p,n){if(lt(n))return null;const h=p._adapter,{parser:d,round:g,isoWeekday:C}=p._parseOpts;let D=n;return"function"==typeof d&&(D=d(D)),At(D)||(D="string"==typeof d?h.parse(D,d):h.parse(D)),null===D?null:(g&&(D="week"!==g||!Mo(C)&&!0!==C?h.startOf(D,g):h.startOf(D,"isoWeek",C)),+D)}function na(p,n,h,d){const g=Fr.length;for(let C=Fr.indexOf(p);C<g-1;++C){const D=Ur[Fr[C]],J=D.steps?D.steps:Number.MAX_SAFE_INTEGER;if(D.common&&Math.ceil((h-n)/(J*D.size))<=d)return Fr[C]}return Fr[g-1]}function Da(p,n,h){if(h){if(h.length){const{lo:d,hi:g}=yi(h,n);p[h[d]>=n?h[d]:h[g]]=!0}}else p[n]=!0}function Pa(p,n,h){const d=[],g={},C=n.length;let D,J;for(D=0;D<C;++D)J=n[D],g[J]=D,d.push({value:J,major:!1});return 0!==C&&h?function(ot,ct,Pt,Mt){const Vt=ot._adapter,Qt=+Vt.startOf(ct[0].value,Mt),ue=ct[ct.length-1].value;let ge,Ae;for(ge=Qt;ge<=ue;ge=+Vt.add(ge,1,Mt))Ae=Pt[ge],Ae>=0&&(ct[Ae].major=!0);return ct}(p,d,g,h):d}class el extends Ke{constructor(n){super(n),this._cache={data:[],labels:[],all:[]},this._unit="day",this._majorUnit=void 0,this._offsets={},this._normalized=!1,this._parseOpts=void 0}init(n,h){const d=n.time||(n.time={}),g=this._adapter=new Ba._date(n.adapters.date);Kt(d.displayFormats,g.formats()),this._parseOpts={parser:d.parser,round:d.round,isoWeekday:d.isoWeekday},super.init(n),this._normalized=h.normalized}parse(n,h){return void 0===n?null:tl(this,n)}beforeLayout(){super.beforeLayout(),this._cache={data:[],labels:[],all:[]}}determineDataLimits(){const n=this.options,h=this._adapter,d=n.time.unit||"day";let{min:g,max:C,minDefined:D,maxDefined:J}=this.getUserBounds();function ot(ct){D||isNaN(ct.min)||(g=Math.min(g,ct.min)),J||isNaN(ct.max)||(C=Math.max(C,ct.max))}D&&J||(ot(this._getLabelBounds()),"ticks"===n.bounds&&"labels"===n.ticks.source||ot(this.getMinMax(!1))),g=At(g)&&!isNaN(g)?g:+h.startOf(Date.now(),d),C=At(C)&&!isNaN(C)?C:+h.endOf(Date.now(),d)+1,this.min=Math.min(g,C-1),this.max=Math.max(g+1,C)}_getLabelBounds(){const n=this.getLabelTimestamps();let h=Number.POSITIVE_INFINITY,d=Number.NEGATIVE_INFINITY;return n.length&&(h=n[0],d=n[n.length-1]),{min:h,max:d}}buildTicks(){const n=this.options,h=n.time,d=n.ticks,g="labels"===d.source?this.getLabelTimestamps():this._generate();"ticks"===n.bounds&&g.length&&(this.min=this._userMin||g[0],this.max=this._userMax||g[g.length-1]);const C=this.min,D=Ki(g,C,this.max);return this._unit=h.unit||(d.autoSkip?na(h.minUnit,this.min,this.max,this._getLabelCapacity(C)):function(J,ot,ct,Pt,Mt){for(let Vt=Fr.length-1;Vt>=Fr.indexOf(ct);Vt--){const Qt=Fr[Vt];if(Ur[Qt].common&&J._adapter.diff(Mt,Pt,Qt)>=ot-1)return Qt}return Fr[ct?Fr.indexOf(ct):0]}(this,D.length,h.minUnit,this.min,this.max)),this._majorUnit=d.major.enabled&&"year"!==this._unit?function(J){for(let ot=Fr.indexOf(J)+1,ct=Fr.length;ot<ct;++ot)if(Ur[Fr[ot]].common)return Fr[ot]}(this._unit):void 0,this.initOffsets(g),n.reverse&&D.reverse(),Pa(this,D,this._majorUnit)}initOffsets(n){let h,d,g=0,C=0;this.options.offset&&n.length&&(h=this.getDecimalForValue(n[0]),g=1===n.length?1-h:(this.getDecimalForValue(n[1])-h)/2,d=this.getDecimalForValue(n[n.length-1]),C=1===n.length?d:(d-this.getDecimalForValue(n[n.length-2]))/2);const D=n.length<3?.5:.25;g=En(g,0,D),C=En(C,0,D),this._offsets={start:g,end:C,factor:1/(g+1+C)}}_generate(){const n=this._adapter,h=this.min,d=this.max,g=this.options,C=g.time,D=C.unit||na(C.minUnit,h,d,this._getLabelCapacity(h)),J=Ot(C.stepSize,1),ot="week"===D&&C.isoWeekday,ct=Mo(ot)||!0===ot,Pt={};let Mt,Vt,Qt=h;if(ct&&(Qt=+n.startOf(Qt,"isoWeek",ot)),Qt=+n.startOf(Qt,ct?"day":D),n.diff(d,h,D)>1e5*J)throw new Error(h+" and "+d+" are too far apart with stepSize of "+J+" "+D);const ue="data"===g.ticks.source&&this.getDataTimestamps();for(Mt=Qt,Vt=0;Mt<d;Mt=+n.add(Mt,J,D),Vt++)Da(Pt,Mt,ue);return Mt!==d&&"ticks"!==g.bounds&&1!==Vt||Da(Pt,Mt,ue),Object.keys(Pt).sort((ge,Ae)=>ge-Ae).map(ge=>+ge)}getLabelForValue(n){const d=this.options.time;return this._adapter.format(n,d.tooltipFormat?d.tooltipFormat:d.displayFormats.datetime)}_tickFormatFunction(n,h,d,g){const C=this.options,D=C.time.displayFormats,J=this._unit,ot=this._majorUnit,Pt=ot&&D[ot],Mt=d[h],Qt=this._adapter.format(n,g||(ot&&Pt&&Mt&&Mt.major?Pt:J&&D[J])),ue=C.ticks.callback;return ue?We(ue,[Qt,h,d],this):Qt}generateTickLabels(n){let h,d,g;for(h=0,d=n.length;h<d;++h)g=n[h],g.label=this._tickFormatFunction(g.value,h,n)}getDecimalForValue(n){return null===n?NaN:(n-this.min)/(this.max-this.min)}getPixelForValue(n){const h=this._offsets,d=this.getDecimalForValue(n);return this.getPixelForDecimal((h.start+d)*h.factor)}getValueForPixel(n){const h=this._offsets,d=this.getDecimalForPixel(n)/h.factor-h.end;return this.min+d*(this.max-this.min)}_getLabelSize(n){const h=this.options.ticks,d=this.ctx.measureText(n).width,g=No(this.isHorizontal()?h.maxRotation:h.minRotation),C=Math.cos(g),D=Math.sin(g),J=this._resolveTickFontOptions(0).size;return{w:d*C+J*D,h:d*D+J*C}}_getLabelCapacity(n){const h=this.options.time,d=h.displayFormats,g=d[h.unit]||d.millisecond,C=this._tickFormatFunction(n,0,Pa(this,[n],this._majorUnit),g),D=this._getLabelSize(C),J=Math.floor(this.isHorizontal()?this.width/D.w:this.height/D.h)-1;return J>0?J:1}getDataTimestamps(){let n,h,d=this._cache.data||[];if(d.length)return d;const g=this.getMatchingVisibleMetas();if(this._normalized&&g.length)return this._cache.data=g[0].controller.getAllParsedValues(this);for(n=0,h=g.length;n<h;++n)d=d.concat(g[n].controller.getAllParsedValues(this));return this._cache.data=this.normalize(d)}getLabelTimestamps(){const n=this._cache.labels||[];let h,d;if(n.length)return n;const g=this.getLabels();for(h=0,d=g.length;h<d;++h)n.push(tl(this,g[h]));return this._cache.labels=this._normalized?n:this.normalize(n)}normalize(n){return Hn(n.sort(ia))}}function il(p,n,h){let d,g,C,D,J=0,ot=p.length-1;h?(n>=p[J].pos&&n<=p[ot].pos&&({lo:J,hi:ot}=Zi(p,"pos",n)),({pos:d,time:C}=p[J]),({pos:g,time:D}=p[ot])):(n>=p[J].time&&n<=p[ot].time&&({lo:J,hi:ot}=Zi(p,"time",n)),({time:d,pos:C}=p[J]),({time:g,pos:D}=p[ot]));const ct=g-d;return ct?C+(D-C)*(n-d)/ct:C}el.id="time",el.defaults={bounds:"data",adapters:{},time:{parser:!1,unit:!1,round:!1,isoWeekday:!1,minUnit:"millisecond",displayFormats:{}},ticks:{source:"auto",major:{enabled:!1}}};class Wa extends el{constructor(n){super(n),this._table=[],this._minPos=void 0,this._tableRange=void 0}initOffsets(){const n=this._getTimestampsForTable(),h=this._table=this.buildLookupTable(n);this._minPos=il(h,this.min),this._tableRange=il(h,this.max)-this._minPos,super.initOffsets(n)}buildLookupTable(n){const{min:h,max:d}=this,g=[],C=[];let D,J,ot,ct,Pt;for(D=0,J=n.length;D<J;++D)ct=n[D],ct>=h&&ct<=d&&g.push(ct);if(g.length<2)return[{time:h,pos:0},{time:d,pos:1}];for(D=0,J=g.length;D<J;++D)Pt=g[D+1],ot=g[D-1],ct=g[D],Math.round((Pt+ot)/2)!==ct&&C.push({time:ct,pos:D/(J-1)});return C}_getTimestampsForTable(){let n=this._cache.all||[];if(n.length)return n;const h=this.getDataTimestamps(),d=this.getLabelTimestamps();return n=h.length&&d.length?this.normalize(h.concat(d)):h.length?h:d,n=this._cache.all=n,n}getDecimalForValue(n){return(il(this._table,n)-this._minPos)/this._tableRange}getValueForPixel(n){const h=this._offsets,d=this.getDecimalForPixel(n)/h.factor-h.end;return il(this._table,d*this._tableRange+this._minPos,!0)}}Wa.id="timeseries",Wa.defaults=el.defaults;var ml=Object.freeze({__proto__:null,CategoryScale:Ln,LinearScale:to,LogarithmicScale:Kn,RadialLinearScale:kr,TimeScale:el,TimeSeriesScale:Wa});return So.register(ja,ml,pl,Mn),So.helpers={...ya},So._adapters=Ba,So.Animation=ha,So.Animations=ca,So.animator=zt,So.controllers=ti.controllers.items,So.DatasetController=ri,So.Element=Di,So.elements=pl,So.Interaction=Jo,So.layouts=Be,So.platforms=Fs,So.Scale=Ke,So.Ticks=rn,Object.assign(So,ja,ml,pl,Mn,Fs),So.Chart=So,typeof window<"u"&&(window.Chart=So),So}),function(vt,te){"object"==typeof module&&module.exports?(te.default=te,module.exports=vt.document?te(vt):te):"function"==typeof define&&define.amd?define("highcharts/highcharts",function(){return te(vt)}):(vt.Highcharts&&vt.Highcharts.error(16,!0),vt.Highcharts=te(vt))}(typeof window<"u"?window:this,function(vt){function te(wt,xt,jt,zt){wt.hasOwnProperty(xt)||(wt[xt]=zt.apply(null,jt),"function"==typeof CustomEvent&&vt.dispatchEvent(new CustomEvent("HighchartsModuleLoaded",{detail:{path:xt,module:wt[xt]}})))}var Ct={};return te(Ct,"Core/Globals.js",[],function(){var wt,xt;return(xt=wt||(wt={})).SVG_NS="http://www.w3.org/2000/svg",xt.product="Highcharts",xt.version="10.3.2",xt.win=typeof vt<"u"?vt:{},xt.doc=xt.win.document,xt.svg=xt.doc&&xt.doc.createElementNS&&!!xt.doc.createElementNS(xt.SVG_NS,"svg").createSVGRect,xt.userAgent=xt.win.navigator&&xt.win.navigator.userAgent||"",xt.isChrome=-1!==xt.userAgent.indexOf("Chrome"),xt.isFirefox=-1!==xt.userAgent.indexOf("Firefox"),xt.isMS=/(edge|msie|trident)/i.test(xt.userAgent)&&!xt.win.opera,xt.isSafari=!xt.isChrome&&-1!==xt.userAgent.indexOf("Safari"),xt.isTouchDevice=/(Mobile|Android|Windows Phone)/.test(xt.userAgent),xt.isWebKit=-1!==xt.userAgent.indexOf("AppleWebKit"),xt.deg2rad=2*Math.PI/360,xt.hasBidiBug=xt.isFirefox&&4>parseInt(xt.userAgent.split("Firefox/")[1],10),xt.hasTouch=!!xt.win.TouchEvent,xt.marginNames=["plotTop","marginRight","marginBottom","plotLeft"],xt.noop=function(){},xt.supportsPassiveEvents=function(){var jt=!1;if(!xt.isMS){var zt=Object.defineProperty({},"passive",{get:function(){jt=!0}});xt.win.addEventListener&&xt.win.removeEventListener&&(xt.win.addEventListener("testPassive",xt.noop,zt),xt.win.removeEventListener("testPassive",xt.noop,zt))}return jt}(),xt.charts=[],xt.dateFormats={},xt.seriesTypes={},xt.symbolSizes={},xt.chartCount=0,wt}),te(Ct,"Core/Utilities.js",[Ct["Core/Globals.js"]],function(wt){function xt(_,y,O,B){var H=y?"Highcharts error":"Highcharts warning";32===_&&(_=H+": Deprecated member");var at=st(_),ft=at?H+" #"+_+": www.highcharts.com/errors/"+_+"/":_.toString();if(typeof B<"u"){var rt="";at&&(ft+="?"),w(B,function(z,q){rt+="\n - ".concat(q,": ").concat(z),at&&(ft+=encodeURI(q)+"="+encodeURI(z))}),ft+=rt}it(wt,"displayError",{chart:O,code:_,message:ft,params:B},function(){if(y)throw Error(ft);v.console&&-1===xt.messages.indexOf(ft)&&console.warn(ft)}),xt.messages.push(ft)}function zt(_,y){return parseInt(_,y||10)}function Ut(_){return"string"==typeof _}function Rt(_){return"[object Array]"===(_=Object.prototype.toString.call(_))||"[object Array Iterator]"===_}function It(_,y){return!(!_||"object"!=typeof _||y&&Rt(_))}function K(_){return It(_)&&"number"==typeof _.nodeType}function et(_){var y=_&&_.constructor;return!(!It(_,!0)||K(_)||!y||!y.name||"Object"===y.name)}function st(_){return"number"==typeof _&&!isNaN(_)&&1/0>_&&-1/0<_}function R(_){return typeof _<"u"&&null!==_}function I(_,y,O){var H,B=Ut(y)&&!R(O),at=function(ft,rt){R(ft)?_.setAttribute(rt,ft):B?(H=_.getAttribute(rt))||"class"!==rt||(H=_.getAttribute(rt+"Name")):_.removeAttribute(rt)};return Ut(y)?at(O,y):w(y,at),H}function A(_,y){var O;for(O in _||(_={}),y)_[O]=y[O];return _}function x(){for(var _=arguments,y=_.length,O=0;O<y;O++){var B=_[O];if(typeof B<"u"&&null!==B)return B}}function T(_,y){wt.isMS&&!wt.svg&&y&&R(y.opacity)&&(y.filter="alpha(opacity=".concat(100*y.opacity,")")),A(_.style,y)}function j(_){return Math.pow(10,Math.floor(Math.log(_)/Math.LN10))}function V(_,y){return 1e14<_?_:parseFloat(_.toPrecision(y||14))}function w(_,y,O){for(var B in _)Object.hasOwnProperty.call(_,B)&&y.call(O||_[B],_[B],B,_)}function l(_,y,O){function B(rt,z){var q=_.removeEventListener||wt.removeEventListenerPolyfill;q&&q.call(_,rt,z,!1)}function H(rt){var z;if(_.nodeName){if(y){var q={};q[y]=!0}else q=rt;w(q,function(mt,pt){if(rt[pt])for(z=rt[pt].length;z--;)B(pt,rt[pt][z].fn)})}}var at="function"==typeof _&&_.prototype||_;if(Object.hasOwnProperty.call(at,"hcEvents")){var ft=at.hcEvents;y?(at=ft[y]||[],O?(ft[y]=at.filter(function(rt){return O!==rt.fn}),B(y,O)):(H(ft),ft[y]=[])):(H(ft),delete at.hcEvents)}}function it(_,y,O,B){if(O=O||{},G.createEvent&&(_.dispatchEvent||_.fireEvent&&_!==wt)){var H=G.createEvent("Events");H.initEvent(y,!0,!0),O=A(H,O),_.dispatchEvent?_.dispatchEvent(O):_.fireEvent(y,O)}else if(_.hcEvents){O.target||A(O,{preventDefault:function(){O.defaultPrevented=!0},target:_,type:y}),H=[];for(var at=_,ft=!1;at.hcEvents;)Object.hasOwnProperty.call(at,"hcEvents")&&at.hcEvents[y]&&(H.length&&(ft=!0),H.unshift.apply(H,at.hcEvents[y])),at=Object.getPrototypeOf(at);ft&&H.sort(function(rt,z){return rt.order-z.order}),H.forEach(function(rt){!1===rt.fn.call(_,O)&&O.preventDefault()})}B&&!O.defaultPrevented&&B.call(_,O)}var N=wt.charts,G=wt.doc,v=wt.win;(xt||(xt={})).messages=[],Math.easeInOutSine=function(_){return-.5*(Math.cos(Math.PI*_)-1)};var M=Array.prototype.find?function(_,y){return _.find(y)}:function(_,y){var O,B=_.length;for(O=0;O<B;O++)if(y(_[O],O))return _[O]};w({map:"map",each:"forEach",grep:"filter",reduce:"reduce",some:"some"},function(_,y){wt[y]=function(O){var B;return xt(32,!1,void 0,((B={})["Highcharts.".concat(y)]="use Array.".concat(_),B)),Array.prototype[_].apply(O,[].slice.call(arguments,1))}});var b,_,y,k=(_=Math.random().toString(36).substring(2,9)+"-",y=0,function(){return"highcharts-"+(b?"":_)+y++});return v.jQuery&&(v.jQuery.fn.highcharts=function(){var _=[].slice.call(arguments);if(this[0])return _[0]?(new(wt[Ut(_[0])?_.shift():"Chart"])(this[0],_[0],_[1]),this):N[I(this[0],"data-highcharts-chart")]}),M={addEvent:function(_,y,O,B){void 0===B&&(B={});var H="function"==typeof _&&_.prototype||_;Object.hasOwnProperty.call(H,"hcEvents")||(H.hcEvents={}),H=H.hcEvents,wt.Point&&_ instanceof wt.Point&&_.series&&_.series.chart&&(_.series.chart.runTrackerClick=!0);var at=_.addEventListener||wt.addEventListenerPolyfill;return at&&at.call(_,y,O,!!wt.supportsPassiveEvents&&{passive:void 0===B.passive?-1!==y.indexOf("touch"):B.passive,capture:!1}),H[y]||(H[y]=[]),H[y].push({fn:O,order:"number"==typeof B.order?B.order:1/0}),H[y].sort(function(ft,rt){return ft.order-rt.order}),function(){l(_,y,O)}},arrayMax:function(_){for(var y=_.length,O=_[0];y--;)_[y]>O&&(O=_[y]);return O},arrayMin:function(_){for(var y=_.length,O=_[0];y--;)_[y]<O&&(O=_[y]);return O},attr:I,clamp:function(_,y,O){return _>y?_<O?_:O:y},cleanRecursively:function jt(_,y){var O={};return w(_,function(B,H){It(_[H],!0)&&!_.nodeType&&y[H]?(B=jt(_[H],y[H]),Object.keys(B).length&&(O[H]=B)):(It(_[H])||_[H]!==y[H]||H in _&&!(H in y))&&(O[H]=_[H])}),O},clearTimeout:function(_){R(_)&&clearTimeout(_)},correctFloat:V,createElement:function(_,y,O,B,H){return _=G.createElement(_),y&&A(_,y),H&&T(_,{padding:"0",border:"none",margin:"0"}),O&&T(_,O),B&&B.appendChild(_),_},css:T,defined:R,destroyObjectProperties:function(_,y){w(_,function(O,B){O&&O!==y&&O.destroy&&O.destroy(),delete _[B]})},discardElement:function(_){_&&_.parentElement&&_.parentElement.removeChild(_)},erase:function(_,y){for(var O=_.length;O--;)if(_[O]===y){_.splice(O,1);break}},error:xt,extend:A,extendClass:function(_,y){var O=function(){};return A(O.prototype=new _,y),O},find:M,fireEvent:it,getMagnitude:j,getNestedProperty:function(_,y){for(_=_.split(".");_.length&&R(y);){var O=_.shift();if(typeof O>"u"||"__proto__"===O||!R(y=y[O])||"function"==typeof y||"number"==typeof y.nodeType||y===v)return}return y},getStyle:function nt(_,y,O){var B=wt.getStyle||nt;if("width"===y)return y=Math.min(_.offsetWidth,_.scrollWidth),(O=_.getBoundingClientRect&&_.getBoundingClientRect().width)<y&&O>=y-1&&(y=Math.floor(O)),Math.max(0,y-(B(_,"padding-left",!0)||0)-(B(_,"padding-right",!0)||0));if("height"===y)return Math.max(0,Math.min(_.offsetHeight,_.scrollHeight)-(B(_,"padding-top",!0)||0)-(B(_,"padding-bottom",!0)||0));if(v.getComputedStyle||xt(27,!0),_=v.getComputedStyle(_,void 0)){var H=_.getPropertyValue(y);x(O,"opacity"!==y)&&(H=zt(H))}return H},inArray:function(_,y,O){return xt(32,!1,void 0,{"Highcharts.inArray":"use Array.indexOf"}),y.indexOf(_,O)},isArray:Rt,isClass:et,isDOMElement:K,isFunction:function(_){return"function"==typeof _},isNumber:st,isObject:It,isString:Ut,keys:function(_){return xt(32,!1,void 0,{"Highcharts.keys":"use Object.keys"}),Object.keys(_)},merge:function(){var _,y=arguments,O={},B=function(at,ft){return"object"!=typeof at&&(at={}),w(ft,function(rt,z){"__proto__"!==z&&"constructor"!==z&&(at[z]=!It(rt,!0)||et(rt)||K(rt)?ft[z]:B(at[z]||{},rt))}),at};!0===y[0]&&(O=y[1],y=Array.prototype.slice.call(y,2));var H=y.length;for(_=0;_<H;_++)O=B(O,y[_]);return O},normalizeTickInterval:function(_,y,O,B,H){var at=_,ft=_/(O=x(O,j(_)));for(y||(y=H?[1,1.2,1.5,2,2.5,3,4,5,6,8,10]:[1,2,2.5,5,10],!1===B&&(1===O?y=y.filter(function(rt){return rt%1==0}):.1>=O&&(y=[1/O]))),B=0;B<y.length&&(at=y[B],!(H&&at*O>=_||!H&&ft<=(y[B]+(y[B+1]||y[B]))/2));B++);return V(at*O,-Math.round(Math.log(.001)/Math.LN10))},objectEach:w,offset:function(_){var y=G.documentElement;return{top:(_=_.parentElement||_.parentNode?_.getBoundingClientRect():{top:0,left:0,width:0,height:0}).top+(v.pageYOffset||y.scrollTop)-(y.clientTop||0),left:_.left+(v.pageXOffset||y.scrollLeft)-(y.clientLeft||0),width:_.width,height:_.height}},pad:function(_,y,O){return Array((y||2)+1-String(_).replace("-","").length).join(O||"0")+_},pick:x,pInt:zt,relativeLength:function(_,y,O){return/%$/.test(_)?y*parseFloat(_)/100+(O||0):parseFloat(_)},removeEvent:l,splat:function(_){return Rt(_)?_:[_]},stableSort:function(_,y){var B,H,O=_.length;for(H=0;H<O;H++)_[H].safeI=H;for(_.sort(function(at,ft){return 0===(B=y(at,ft))?at.safeI-ft.safeI:B}),H=0;H<O;H++)delete _[H].safeI},syncTimeout:function(_,y,O){return 0<y?setTimeout(_,y,O):(_.call(0,O),-1)},timeUnits:{millisecond:1,second:1e3,minute:6e4,hour:36e5,day:864e5,week:6048e5,month:24192e5,year:314496e5},uniqueKey:k,useSerialIds:function(_){return b=x(_,b)},wrap:function(_,y,O){var B=_[y];_[y]=function(){var H=arguments,at=this;return O.apply(this,[function(){return B.apply(at,arguments.length?arguments:H)}].concat([].slice.call(arguments)))}}},M}),te(Ct,"Core/Chart/ChartDefaults.js",[],function(){return{alignThresholds:!1,panning:{enabled:!1,type:"x"},styledMode:!1,borderRadius:0,colorCount:10,allowMutatingData:!0,defaultSeriesType:"line",ignoreHiddenSeries:!0,spacing:[10,10,15,10],resetZoomButton:{theme:{zIndex:6},position:{align:"right",x:-10,y:10}},zoomBySingleTouch:!1,zooming:{singleTouch:!1,resetButton:{theme:{zIndex:6},position:{align:"right",x:-10,y:10}}},width:null,height:null,borderColor:"#335cad",backgroundColor:"#ffffff",plotBorderColor:"#cccccc"}}),te(Ct,"Core/Color/Color.js",[Ct["Core/Globals.js"],Ct["Core/Utilities.js"]],function(wt,xt){var jt=xt.isNumber,zt=xt.merge,Ut=xt.pInt;return function(){function Rt(It){this.rgba=[NaN,NaN,NaN,NaN],this.input=It;var K=wt.Color;return K&&K!==Rt?new K(It):this instanceof Rt?void this.init(It):new Rt(It)}return Rt.parse=function(It){return It?new Rt(It):Rt.None},Rt.prototype.init=function(It){var K;if("object"==typeof It&&typeof It.stops<"u")this.stops=It.stops.map(function(I){return new Rt(I[1])});else if("string"==typeof It){if(this.input=It=Rt.names[It.toLowerCase()]||It,"#"===It.charAt(0)){var et=It.length,st=parseInt(It.substr(1),16);7===et?K=[(16711680&st)>>16,(65280&st)>>8,255&st,1]:4===et&&(K=[(3840&st)>>4|(3840&st)>>8,(240&st)>>4|240&st,(15&st)<<4|15&st,1])}if(!K)for(st=Rt.parsers.length;st--&&!K;){var R=Rt.parsers[st];(et=R.regex.exec(It))&&(K=R.parse(et))}}K&&(this.rgba=K)},Rt.prototype.get=function(It){var K=this.input,et=this.rgba;if("object"==typeof K&&typeof this.stops<"u"){var st=zt(K);return st.stops=[].slice.call(st.stops),this.stops.forEach(function(R,I){st.stops[I]=[st.stops[I][0],R.get(It)]}),st}return et&&jt(et[0])?"rgb"===It||!It&&1===et[3]?"rgb("+et[0]+","+et[1]+","+et[2]+")":"a"===It?"".concat(et[3]):"rgba("+et.join(",")+")":K},Rt.prototype.brighten=function(It){var K=this.rgba;if(this.stops)this.stops.forEach(function(st){st.brighten(It)});else if(jt(It)&&0!==It)for(var et=0;3>et;et++)K[et]+=Ut(255*It),0>K[et]&&(K[et]=0),255<K[et]&&(K[et]=255);return this},Rt.prototype.setOpacity=function(It){return this.rgba[3]=It,this},Rt.prototype.tweenTo=function(It,K){var et=this.rgba,st=It.rgba;return jt(et[0])&&jt(st[0])?((It=1!==st[3]||1!==et[3])?"rgba(":"rgb(")+Math.round(st[0]+(et[0]-st[0])*(1-K))+","+Math.round(st[1]+(et[1]-st[1])*(1-K))+","+Math.round(st[2]+(et[2]-st[2])*(1-K))+(It?","+(st[3]+(et[3]-st[3])*(1-K)):"")+")":It.input||"none"},Rt.names={white:"#ffffff",black:"#000000"},Rt.parsers=[{regex:/rgba\(\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]?(?:\.[0-9]+)?)\s*\)/,parse:function(It){return[Ut(It[1]),Ut(It[2]),Ut(It[3]),parseFloat(It[4],10)]}},{regex:/rgb\(\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*\)/,parse:function(It){return[Ut(It[1]),Ut(It[2]),Ut(It[3]),1]}}],Rt.None=new Rt(""),Rt}()}),te(Ct,"Core/Color/Palettes.js",[],function(){return{colors:"#7cb5ec #434348 #90ed7d #f7a35c #8085e9 #f15c80 #e4d354 #2b908f #f45b5b #91e8e1".split(" ")}}),te(Ct,"Core/Time.js",[Ct["Core/Globals.js"],Ct["Core/Utilities.js"]],function(wt,xt){var jt=wt.win,zt=xt.defined,Ut=xt.error,Rt=xt.extend,It=xt.isObject,K=xt.merge,et=xt.objectEach,st=xt.pad,R=xt.pick,I=xt.splat,A=xt.timeUnits,x=wt.isSafari&&jt.Intl&&jt.Intl.DateTimeFormat.prototype.formatRange,T=wt.isSafari&&jt.Intl&&!jt.Intl.DateTimeFormat.prototype.formatRange;return xt=function(){function j(V){this.options={},this.variableTimezone=this.useUTC=!1,this.Date=jt.Date,this.getTimezoneOffset=this.timezoneOffsetFunction(),this.update(V)}return j.prototype.get=function(V,nt){if(this.variableTimezone||this.timezoneOffset){var w=nt.getTime(),l=w-this.getTimezoneOffset(nt);return nt.setTime(l),V=nt["getUTC"+V](),nt.setTime(w),V}return this.useUTC?nt["getUTC"+V]():nt["get"+V]()},j.prototype.set=function(V,nt,w){if(this.variableTimezone||this.timezoneOffset){if("Milliseconds"===V||"Seconds"===V||"Minutes"===V&&this.getTimezoneOffset(nt)%36e5==0)return nt["setUTC"+V](w);var l=this.getTimezoneOffset(nt);return l=nt.getTime()-l,nt.setTime(l),nt["setUTC"+V](w),V=this.getTimezoneOffset(nt),l=nt.getTime()+V,nt.setTime(l)}return this.useUTC||x&&"FullYear"===V?nt["setUTC"+V](w):nt["set"+V](w)},j.prototype.update=function(V){void 0===V&&(V={});var nt=R(V.useUTC,!0);this.options=V=K(!0,this.options,V),this.Date=V.Date||jt.Date||Date,this.timezoneOffset=(this.useUTC=nt)&&V.timezoneOffset||void 0,this.getTimezoneOffset=this.timezoneOffsetFunction(),this.variableTimezone=nt&&!(!V.getTimezoneOffset&&!V.timezone)},j.prototype.makeTime=function(V,nt,w,l,it,N){if(this.useUTC){var G=this.Date.UTC.apply(0,arguments),v=this.getTimezoneOffset(G),M=this.getTimezoneOffset(G+=v);v!==M?G+=M-v:v-36e5!==this.getTimezoneOffset(G-36e5)||T||(G-=36e5)}else G=new this.Date(V,nt,R(w,1),R(l,0),R(it,0),R(N,0)).getTime();return G},j.prototype.timezoneOffsetFunction=function(){var V=this,nt=this.options,w=nt.getTimezoneOffset,l=nt.moment||jt.moment;if(!this.useUTC)return function(it){return 6e4*new Date(it.toString()).getTimezoneOffset()};if(nt.timezone){if(l)return function(it){return 6e4*-l.tz(it,nt.timezone).utcOffset()};Ut(25)}return this.useUTC&&w?function(it){return 6e4*w(it.valueOf())}:function(){return 6e4*(V.timezoneOffset||0)}},j.prototype.dateFormat=function(V,nt,w){if(!zt(nt)||isNaN(nt))return wt.defaultOptions.lang&&wt.defaultOptions.lang.invalidDate||"";V=R(V,"%Y-%m-%d %H:%M:%S");var l=this,it=new this.Date(nt),N=this.get("Hours",it),G=this.get("Day",it),v=this.get("Date",it),M=this.get("Month",it),b=this.get("FullYear",it),k=wt.defaultOptions.lang,_=k&&k.weekdays,y=k&&k.shortWeekdays;return it=Rt({a:y?y[G]:_[G].substr(0,3),A:_[G],d:st(v),e:st(v,2," "),w:G,b:k.shortMonths[M],B:k.months[M],m:st(M+1),o:M+1,y:b.toString().substr(2,2),Y:b,H:st(N),k:N,I:st(N%12||12),l:N%12||12,M:st(this.get("Minutes",it)),p:12>N?"AM":"PM",P:12>N?"am":"pm",S:st(it.getSeconds()),L:st(Math.floor(nt%1e3),3)},wt.dateFormats),et(it,function(O,B){for(;-1!==V.indexOf("%"+B);)V=V.replace("%"+B,"function"==typeof O?O.call(l,nt):O)}),w?V.substr(0,1).toUpperCase()+V.substr(1):V},j.prototype.resolveDTLFormat=function(V){return It(V,!0)?V:{main:(V=I(V))[0],from:V[1],to:V[2]}},j.prototype.getTimeTicks=function(V,nt,w,l){var k,it=this,N=[],G={},v=new it.Date(nt),M=V.unitRange,b=V.count||1;if(l=R(l,1),zt(nt)){if(it.set("Milliseconds",v,M>=A.second?0:b*Math.floor(it.get("Milliseconds",v)/b)),M>=A.second&&it.set("Seconds",v,M>=A.minute?0:b*Math.floor(it.get("Seconds",v)/b)),M>=A.minute&&it.set("Minutes",v,M>=A.hour?0:b*Math.floor(it.get("Minutes",v)/b)),M>=A.hour&&it.set("Hours",v,M>=A.day?0:b*Math.floor(it.get("Hours",v)/b)),M>=A.day&&it.set("Date",v,M>=A.month?1:Math.max(1,b*Math.floor(it.get("Date",v)/b))),M>=A.month){it.set("Month",v,M>=A.year?0:b*Math.floor(it.get("Month",v)/b));var _=it.get("FullYear",v)}M>=A.year&&it.set("FullYear",v,_-_%b),M===A.week&&(_=it.get("Day",v),it.set("Date",v,it.get("Date",v)-_+l+(_<l?-7:0))),_=it.get("FullYear",v),l=it.get("Month",v);var y=it.get("Date",v),O=it.get("Hours",v);for(nt=v.getTime(),!it.variableTimezone&&it.useUTC||!zt(w)||(k=w-nt>4*A.month||it.getTimezoneOffset(nt)!==it.getTimezoneOffset(w)),nt=v.getTime(),v=1;nt<w;)N.push(nt),nt=M===A.year?it.makeTime(_+v*b,0):M===A.month?it.makeTime(_,l+v*b):!k||M!==A.day&&M!==A.week?k&&M===A.hour&&1<b?it.makeTime(_,l,y,O+v*b):nt+M*b:it.makeTime(_,l,y+v*b*(M===A.day?1:7)),v++;N.push(nt),M<=A.hour&&1e4>N.length&&N.forEach(function(B){B%18e5==0&&"000000000"===it.dateFormat("%H%M%S%L",B)&&(G[B]="day")})}return N.info=Rt(V,{higherRanks:G,totalRange:M*b}),N},j.prototype.getDateFormat=function(V,nt,w,l){var it=this.dateFormat("%m-%d %H:%M:%S.%L",nt),N={millisecond:15,second:12,minute:9,hour:6,day:3},G="millisecond";for(v in A){if(V===A.week&&+this.dateFormat("%w",nt)===w&&"00:00:00.000"===it.substr(6)){var v="week";break}if(A[v]>V){v=G;break}if(N[v]&&it.substr(N[v])!=="01-01 00:00:00.000".substr(N[v]))break;"week"!==v&&(G=v)}return this.resolveDTLFormat(l[v]).main},j}(),xt}),te(Ct,"Core/Defaults.js",[Ct["Core/Chart/ChartDefaults.js"],Ct["Core/Color/Color.js"],Ct["Core/Globals.js"],Ct["Core/Color/Palettes.js"],Ct["Core/Time.js"],Ct["Core/Utilities.js"]],function(wt,xt,jt,zt,Ut,Rt){xt=xt.parse;var It=Rt.merge,K={colors:zt.colors,symbols:["circle","diamond","square","triangle","triangle-down"],lang:{loading:"Loading...",months:"January February March April May June July August September October November December".split(" "),shortMonths:"Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" "),weekdays:"Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),decimalPoint:".",numericSymbols:"kMGTPE".split(""),resetZoom:"Reset zoom",resetZoomTitle:"Reset zoom level 1:1",thousandsSep:" "},global:{},time:{Date:void 0,getTimezoneOffset:void 0,timezone:void 0,timezoneOffset:0,useUTC:!0},chart:wt,title:{text:"Chart title",align:"center",margin:15,widthAdjust:-44},subtitle:{text:"",align:"center",widthAdjust:-44},caption:{margin:15,text:"",align:"left",verticalAlign:"bottom"},plotOptions:{},labels:{style:{position:"absolute",color:"#333333"}},legend:{enabled:!0,align:"center",alignColumns:!0,className:"highcharts-no-tooltip",layout:"horizontal",labelFormatter:function(){return this.name},borderColor:"#999999",borderRadius:0,navigation:{activeColor:"#003399",inactiveColor:"#cccccc"},itemStyle:{color:"#333333",cursor:"pointer",fontSize:"12px",fontWeight:"bold",textOverflow:"ellipsis"},itemHoverStyle:{color:"#000000"},itemHiddenStyle:{color:"#cccccc"},shadow:!1,itemCheckboxStyle:{position:"absolute",width:"13px",height:"13px"},squareSymbol:!0,symbolPadding:5,verticalAlign:"bottom",x:0,y:0,title:{style:{fontWeight:"bold"}}},loading:{labelStyle:{fontWeight:"bold",position:"relative",top:"45%"},style:{position:"absolute",backgroundColor:"#ffffff",opacity:.5,textAlign:"center"}},tooltip:{enabled:!0,animation:jt.svg,borderRadius:3,dateTimeLabelFormats:{millisecond:"%A, %b %e, %H:%M:%S.%L",second:"%A, %b %e, %H:%M:%S",minute:"%A, %b %e, %H:%M",hour:"%A, %b %e, %H:%M",day:"%A, %b %e, %Y",week:"Week from %A, %b %e, %Y",month:"%B %Y",year:"%Y"},footerFormat:"",headerShape:"callout",hideDelay:500,padding:8,shape:"callout",shared:!1,snap:jt.isTouchDevice?25:10,headerFormat:'<span style="font-size: 10px">{point.key}</span><br/>',pointFormat:'<span style="color:{point.color}">\u25cf</span> {series.name}: <b>{point.y}</b><br/>',backgroundColor:xt("#f7f7f7").setOpacity(.85).get(),borderWidth:1,shadow:!0,stickOnContact:!1,style:{color:"#333333",cursor:"default",fontSize:"12px",whiteSpace:"nowrap"},useHTML:!1},credits:{enabled:!0,href:"https://www.highcharts.com?credits",position:{align:"right",x:-10,verticalAlign:"bottom",y:-5},style:{cursor:"pointer",color:"#999999",fontSize:"9px"},text:"Highcharts.com"}};K.chart.styledMode=!1;var et=new Ut(It(K.global,K.time));return{defaultOptions:K,defaultTime:et,getOptions:function(){return K},setOptions:function(st){return It(!0,K,st),(st.time||st.global)&&(jt.time?jt.time.update(It(K.global,K.time,st.global,st.time)):jt.time=et),K}}}),te(Ct,"Core/Animation/Fx.js",[Ct["Core/Color/Color.js"],Ct["Core/Globals.js"],Ct["Core/Utilities.js"]],function(wt,xt,jt){var zt=wt.parse,Ut=xt.win,Rt=jt.isNumber,It=jt.objectEach;return function(){function K(et,st,R){this.pos=NaN,this.options=st,this.elem=et,this.prop=R}return K.prototype.dSetter=function(){var et=this.paths,st=et&&et[0];et=et&&et[1];var R=this.now||0,I=[];if(1!==R&&st&&et)if(st.length===et.length&&1>R)for(var A=0;A<et.length;A++){for(var x=st[A],T=et[A],j=[],V=0;V<T.length;V++){var nt=x[V],w=T[V];j[V]=Rt(nt)&&Rt(w)&&("A"!==T[0]||4!==V&&5!==V)?nt+R*(w-nt):w}I.push(j)}else I=et;else I=this.toD||[];this.elem.attr("d",I,void 0,!0)},K.prototype.update=function(){var et=this.elem,st=this.prop,R=this.now,I=this.options.step;this[st+"Setter"]?this[st+"Setter"]():et.attr?et.element&&et.attr(st,R,null,!0):et.style[st]=R+this.unit,I&&I.call(et,R,this)},K.prototype.run=function(et,st,R){var I=this,A=I.options,x=function(V){return!x.stopped&&I.step(V)},T=Ut.requestAnimationFrame||function(V){setTimeout(V,13)},j=function(){for(var V=0;V<K.timers.length;V++)K.timers[V]()||K.timers.splice(V--,1);K.timers.length&&T(j)};et!==st||this.elem["forceAnimate:"+this.prop]?(this.startTime=+new Date,this.start=et,this.end=st,this.unit=R,this.now=this.start,this.pos=0,x.elem=this.elem,x.prop=this.prop,x()&&1===K.timers.push(x)&&T(j)):(delete A.curAnim[this.prop],A.complete&&0===Object.keys(A.curAnim).length&&A.complete.call(this.elem))},K.prototype.step=function(et){var st=+new Date,R=this.options,I=this.elem,A=R.complete,x=R.duration,T=R.curAnim;if(I.attr&&!I.element)et=!1;else if(et||st>=x+this.startTime){this.now=this.end,this.pos=1,this.update();var j=T[this.prop]=!0;It(T,function(V){!0!==V&&(j=!1)}),j&&A&&A.call(I),et=!1}else this.pos=R.easing((st-this.startTime)/x),this.now=this.start+(this.end-this.start)*this.pos,this.update(),et=!0;return et},K.prototype.initPath=function(et,st,R){function I(it,N){for(;it.length<l;){var G=it[0],v=N[l-it.length];v&&"M"===G[0]&&(it[0]="C"===v[0]?["C",G[1],G[2],G[1],G[2],G[1],G[2]]:["L",G[1],G[2]]),it.unshift(G),j&&(G=it.pop(),it.push(it[it.length-1],G))}}function A(it,N){for(;it.length<l;)if("C"===(N=it[Math.floor(it.length/V)-1].slice())[0]&&(N[1]=N[5],N[2]=N[6]),j){var G=it[Math.floor(it.length/V)].slice();it.splice(it.length/2,0,N,G)}else it.push(N)}var x=et.startX,T=et.endX;R=R.slice();var j=et.isArea,V=j?2:1;if(!(st=st&&st.slice()))return[R,R];if(x&&T&&T.length){for(et=0;et<x.length;et++){if(x[et]===T[0]){var nt=et;break}if(x[0]===T[T.length-x.length+et]){nt=et;var w=!0;break}if(x[x.length-1]===T[T.length-x.length+et]){nt=x.length-et;break}}typeof nt>"u"&&(st=[])}if(st.length&&Rt(nt)){var l=R.length+nt*V;w?(I(st,R),A(R,st)):(I(R,st),A(st,R))}return[st,R]},K.prototype.fillSetter=function(){K.prototype.strokeSetter.apply(this,arguments)},K.prototype.strokeSetter=function(){this.elem.attr(this.prop,zt(this.start).tweenTo(zt(this.end),this.pos),void 0,!0)},K.timers=[],K}()}),te(Ct,"Core/Animation/AnimationUtilities.js",[Ct["Core/Animation/Fx.js"],Ct["Core/Utilities.js"]],function(wt,xt){function jt(A){return et(A)?st({duration:500,defer:0},A):{duration:A?500:0,defer:0}}function zt(A,x){for(var T=wt.timers.length;T--;)wt.timers[T].elem!==A||x&&x!==wt.timers[T].prop||(wt.timers[T].stopped=!0)}var Ut=xt.defined,Rt=xt.getStyle,It=xt.isArray,K=xt.isNumber,et=xt.isObject,st=xt.merge,R=xt.objectEach,I=xt.pick;return{animate:function(A,x,T){var j,nt,w,V="";if(!et(T)){var l=arguments;T={duration:l[2],easing:l[3],complete:l[4]}}K(T.duration)||(T.duration=400),T.easing="function"==typeof T.easing?T.easing:Math[T.easing]||Math.easeInOutSine,T.curAnim=st(x),R(x,function(it,N){zt(A,N),w=new wt(A,T,N),nt=void 0,"d"===N&&It(x.d)?(w.paths=w.initPath(A,A.pathArray,x.d),w.toD=x.d,j=0,nt=1):A.attr?j=A.attr(N):(j=parseFloat(Rt(A,N))||0,"opacity"!==N&&(V="px")),nt||(nt=it),"string"==typeof nt&&nt.match("px")&&(nt=nt.replace(/px/g,"")),w.run(j,nt,V)})},animObject:jt,getDeferredAnimation:function(A,x,T){var j=jt(x),V=0,nt=0;return(T?[T]:A.series).forEach(function(w){w=jt(w.options.animation),V=x&&Ut(x.defer)?j.defer:Math.max(V,w.duration+w.defer),nt=Math.min(j.duration,w.duration)}),A.renderer.forExport&&(V=0),{defer:Math.max(0,V-nt),duration:Math.min(V,nt)}},setAnimation:function(A,x){x.renderer.globalAnimation=I(A,x.options.chart.animation,!0)},stop:zt}}),te(Ct,"Core/Renderer/HTML/AST.js",[Ct["Core/Globals.js"],Ct["Core/Utilities.js"]],function(wt,xt){var jt=wt.SVG_NS,zt=xt.attr,Ut=xt.createElement,Rt=xt.css,It=xt.error,K=xt.isFunction,et=xt.isString,st=xt.objectEach,R=xt.splat,I=(xt=wt.win.trustedTypes)&&K(xt.createPolicy)&&xt.createPolicy("highcharts",{createHTML:function(T){return T}}),A=I?I.createHTML(""):"";try{var x=!!(new DOMParser).parseFromString(A,"text/html")}catch{x=!1}return function(){function T(j){this.nodes="string"==typeof j?this.parseMarkup(j):j}return T.filterUserAttributes=function(j){return st(j,function(V,nt){var w=!0;-1===T.allowedAttributes.indexOf(nt)&&(w=!1),-1!==["background","dynsrc","href","lowsrc","src"].indexOf(nt)&&(w=et(V)&&T.allowedReferences.some(function(l){return 0===V.indexOf(l)})),w||(It(33,!1,void 0,{"Invalid attribute in config":"".concat(nt)}),delete j[nt]),et(V)&&j[nt]&&(j[nt]=V.replace(/</g,"&lt;"))}),j},T.parseStyle=function(j){return j.split(";").reduce(function(V,nt){var w=(nt=nt.split(":").map(function(l){return l.trim()})).shift();return w&&nt.length&&(V[w.replace(/-([a-z])/g,function(l){return l[1].toUpperCase()})]=nt.join(":")),V},{})},T.setElementHTML=function(j,V){j.innerHTML=T.emptyHTML,V&&new T(V).addToDOM(j)},T.prototype.addToDOM=function(j){return function V(nt,w){var l;return R(nt).forEach(function(it){var N=it.tagName,G=it.textContent?wt.doc.createTextNode(it.textContent):void 0,v=T.bypassHTMLFiltering;if(N)if("#text"===N)var M=G;else if(-1!==T.allowedTags.indexOf(N)||v){N=wt.doc.createElementNS("svg"===N?jt:w.namespaceURI||jt,N);var b=it.attributes||{};st(it,function(k,_){"tagName"!==_&&"attributes"!==_&&"children"!==_&&"style"!==_&&"textContent"!==_&&(b[_]=k)}),zt(N,v?b:T.filterUserAttributes(b)),it.style&&Rt(N,it.style),G&&N.appendChild(G),V(it.children||[],N),M=N}else It(33,!1,void 0,{"Invalid tagName in config":N});M&&w.appendChild(M),l=M}),l}(this.nodes,j)},T.prototype.parseMarkup=function(j){var V=[];if(j=j.trim().replace(/ style=(["'])/g," data-style=$1"),x)j=(new DOMParser).parseFromString(I?I.createHTML(j):j,"text/html");else{var nt=Ut("div");nt.innerHTML=j,j={body:nt}}var w=function(l,it){var N=l.nodeName.toLowerCase(),G={tagName:N};if("#text"===N&&(G.textContent=l.textContent||""),N=l.attributes){var v={};[].forEach.call(N,function(b){"data-style"===b.name?G.style=T.parseStyle(b.value):v[b.name]=b.value}),G.attributes=v}if(l.childNodes.length){var M=[];[].forEach.call(l.childNodes,function(b){w(b,M)}),M.length&&(G.children=M)}it.push(G)};return[].forEach.call(j.body.childNodes,function(l){return w(l,V)}),V},T.allowedAttributes="aria-controls aria-describedby aria-expanded aria-haspopup aria-hidden aria-label aria-labelledby aria-live aria-pressed aria-readonly aria-roledescription aria-selected class clip-path color colspan cx cy d dx dy disabled fill height href id in markerHeight markerWidth offset opacity orient padding paddingLeft paddingRight patternUnits r refX refY role scope slope src startOffset stdDeviation stroke stroke-linecap stroke-width style tableValues result rowspan summary target tabindex text-align text-anchor textAnchor textLength title type valign width x x1 x2 xlink:href y y1 y2 zIndex".split(" "),T.allowedReferences="https:// http:// mailto: / ../ ./ #".split(" "),T.allowedTags="a abbr b br button caption circle clipPath code dd defs div dl dt em feComponentTransfer feFuncA feFuncB feFuncG feFuncR feGaussianBlur feOffset feMerge feMergeNode filter h1 h2 h3 h4 h5 h6 hr i img li linearGradient marker ol p path pattern pre rect small span stop strong style sub sup svg table text textPath thead title tbody tspan td th tr u ul #text".split(" "),T.emptyHTML=A,T.bypassHTMLFiltering=!1,T}()}),te(Ct,"Core/FormatUtilities.js",[Ct["Core/Defaults.js"],Ct["Core/Utilities.js"]],function(wt,xt){function jt(st,R,I,A){R=+R;var x=zt.lang,T=((st=+st||0).toString().split(".")[1]||"").split("e")[0].length,j=st.toString().split("e"),V=R;if(-1===R)R=Math.min(T,20);else if(It(R)){if(R&&j[1]&&0>j[1]){var nt=R+ +j[1];0<=nt?(j[0]=(+j[0]).toExponential(nt).split("e")[0],R=nt):(j[0]=j[0].split(".")[0]||0,st=20>R?(j[0]*Math.pow(10,j[1])).toFixed(R):0,j[1]=0)}}else R=2;nt=(Math.abs(j[1]?j[0]:st)+Math.pow(10,-Math.max(R,T)-1)).toFixed(R);var w=3<(T=String(et(nt))).length?T.length%3:0;return I=K(I,x.decimalPoint),A=K(A,x.thousandsSep),st=(0>st?"-":"")+(w?T.substr(0,w)+A:""),st=0>+j[1]&&!V?"0":st+T.substr(w).replace(/(\d{3})(?=\d)/g,"$1"+A),R&&(st+=I+nt.slice(-R)),j[1]&&0!=+st&&(st+="e"+j[1]),st}var zt=wt.defaultOptions,Ut=wt.defaultTime,Rt=xt.getNestedProperty,It=xt.isNumber,K=xt.pick,et=xt.pInt;return{dateFormat:function(st,R,I){return Ut.dateFormat(st,R,I)},format:function(st,R,I){var A="{",x=!1,T=/f$/,j=/\.([0-9])/,V=zt.lang,nt=I&&I.time||Ut;I=I&&I.numberFormatter||jt;for(var w=[];st;){var l=st.indexOf(A);if(-1===l)break;var it=st.slice(0,l);if(x){if(it=it.split(":"),A=Rt(it.shift()||"",R),it.length&&"number"==typeof A)if(it=it.join(":"),T.test(it)){var N=parseInt((it.match(j)||["","-1"])[1],10);null!==A&&(A=I(A,N,V.decimalPoint,-1<it.indexOf(",")?V.thousandsSep:""))}else A=nt.dateFormat(it,A);w.push(A)}else w.push(it);st=st.slice(l+1),A=(x=!x)?"}":"{"}return w.push(st),w.join("")},numberFormat:jt}}),te(Ct,"Core/Renderer/RendererUtilities.js",[Ct["Core/Utilities.js"]],function(wt){var Ut,xt=wt.clamp,jt=wt.pick,zt=wt.stableSort;return(Ut||(Ut={})).distribute=function It(K,et,st){var T,R=K,I=R.reducedLen||et,A=function(w,l){return(l.rank||0)-(w.rank||0)},x=function(w,l){return w.target-l.target},j=!0,V=[],nt=0;for(T=K.length;T--;)nt+=K[T].size;if(nt>I){for(zt(K,A),nt=T=0;nt<=I;)nt+=K[T].size,T++;V=K.splice(T-1,K.length)}for(zt(K,x),K=K.map(function(w){return{size:w.size,targets:[w.target],align:jt(w.align,.5)}});j;){for(T=K.length;T--;)I=K[T],A=(Math.min.apply(0,I.targets)+Math.max.apply(0,I.targets))/2,I.pos=xt(A-I.size*I.align,0,et-I.size);for(T=K.length,j=!1;T--;)0<T&&K[T-1].pos+K[T-1].size>K[T].pos&&(K[T-1].size+=K[T].size,K[T-1].targets=K[T-1].targets.concat(K[T].targets),K[T-1].align=.5,K[T-1].pos+K[T-1].size>et&&(K[T-1].pos=et-K[T-1].size),K.splice(T,1),j=!0)}return R.push.apply(R,V),T=0,K.some(function(w){var l=0;return(w.targets||[]).some(function(){return R[T].pos=w.pos+l,typeof st<"u"&&Math.abs(R[T].pos-R[T].target)>st?(R.slice(0,T+1).forEach(function(it){return delete it.pos}),R.reducedLen=(R.reducedLen||et)-.1*et,R.reducedLen>.1*et&&It(R,et,st),!0):(l+=R[T].size,T++,!1)})}),zt(R,x),R},Ut}),te(Ct,"Core/Renderer/SVG/SVGElement.js",[Ct["Core/Animation/AnimationUtilities.js"],Ct["Core/Color/Color.js"],Ct["Core/Globals.js"],Ct["Core/Utilities.js"]],function(wt,xt,jt,zt){var Ut=wt.animate,Rt=wt.animObject,It=wt.stop,K=jt.deg2rad,et=jt.doc,st=jt.svg,R=jt.SVG_NS,I=jt.win,A=zt.addEvent,x=zt.attr,T=zt.createElement,j=zt.css,V=zt.defined,nt=zt.erase,w=zt.extend,l=zt.fireEvent,it=zt.isArray,N=zt.isFunction,G=zt.isString,v=zt.merge,M=zt.objectEach,b=zt.pick,k=zt.pInt,_=zt.syncTimeout,y=zt.uniqueKey;return wt=function(){function O(){this.element=void 0,this.onEvents={},this.opacity=1,this.renderer=void 0,this.SVG_NS=R,this.symbolCustomAttribs="x y width height r start end innerR anchorX anchorY rounded".split(" ")}return O.prototype._defaultGetter=function(B){return B=b(this[B+"Value"],this[B],this.element?this.element.getAttribute(B):null,0),/^[\-0-9\.]+$/.test(B)&&(B=parseFloat(B)),B},O.prototype._defaultSetter=function(B,H,at){at.setAttribute(H,B)},O.prototype.add=function(B){var H=this.renderer,at=this.element;if(B&&(this.parentGroup=B),typeof this.textStr<"u"&&"text"===this.element.nodeName&&H.buildText(this),this.added=!0,!B||B.handleZ||this.zIndex)var ft=this.zIndexSetter();return ft||(B?B.element:H.box).appendChild(at),this.onAdd&&this.onAdd(),this},O.prototype.addClass=function(B,H){var at=H?"":this.attr("class")||"";return(B=(B||"").split(/ /g).reduce(function(ft,rt){return-1===at.indexOf(rt)&&ft.push(rt),ft},at?[at]:[]).join(" "))!==at&&this.attr("class",B),this},O.prototype.afterSetters=function(){this.doTransform&&(this.updateTransform(),this.doTransform=!1)},O.prototype.align=function(B,H,at){var q,mt,pt,ft={},rt=this.renderer,z=rt.alignedObjects;B?(this.alignOptions=B,this.alignByTranslate=H,(!at||G(at))&&(this.alignTo=q=at||"renderer",nt(z,this),z.push(this),at=void 0)):(B=this.alignOptions,H=this.alignByTranslate,q=this.alignTo),at=b(at,rt[q],"scrollablePlotBox"===q?rt.plotBox:void 0,rt);var dt=B.verticalAlign;return rt=(at.x||0)+(B.x||0),z=(at.y||0)+(B.y||0),"right"===(q=B.align)?mt=1:"center"===q&&(mt=2),mt&&(rt+=(at.width-(B.width||0))/mt),ft[H?"translateX":"x"]=Math.round(rt),"bottom"===dt?pt=1:"middle"===dt&&(pt=2),pt&&(z+=(at.height-(B.height||0))/pt),ft[H?"translateY":"y"]=Math.round(z),this[this.placed?"animate":"attr"](ft),this.placed=!0,this.alignAttr=ft,this},O.prototype.alignSetter=function(B){var H={left:"start",center:"middle",right:"end"};H[B]&&(this.alignValue=B,this.element.setAttribute("text-anchor",H[B]))},O.prototype.animate=function(B,H,at){var ft=this,rt=Rt(b(H,this.renderer.globalAnimation,!0));return H=rt.defer,b(et.hidden,et.msHidden,et.webkitHidden,!1)&&(rt.duration=0),0!==rt.duration?(at&&(rt.complete=at),_(function(){ft.element&&Ut(ft,B,rt)},H)):(this.attr(B,void 0,at||rt.complete),M(B,function(z,q){rt.step&&rt.step.call(this,z,{prop:q,pos:1,elem:this})},this)),this},O.prototype.applyTextOutline=function(B){var H=this.element;-1!==B.indexOf("contrast")&&(B=B.replace(/contrast/g,this.renderer.getContrast(H.style.fill)));var at=B.split(" ");if(B=at[at.length-1],(at=at[0])&&"none"!==at&&jt.svg){this.fakeTS=!0,at=at.replace(/(^[\d\.]+)(.*?)$/g,function(z,q,mt){return 2*Number(q)+mt}),this.removeTextOutline();var ft=et.createElementNS(R,"tspan");x(ft,{class:"highcharts-text-outline",fill:B,stroke:B,"stroke-width":at,"stroke-linejoin":"round"}),B=H.querySelector("textPath")||H,[].forEach.call(B.childNodes,function(z){var q=z.cloneNode(!0);q.removeAttribute&&["fill","stroke","stroke-width","stroke"].forEach(function(mt){return q.removeAttribute(mt)}),ft.appendChild(q)});var rt=0;[].forEach.call(B.querySelectorAll("text tspan"),function(z){rt+=Number(z.getAttribute("dy"))}),(at=et.createElementNS(R,"tspan")).textContent="\u200b",x(at,{x:Number(H.getAttribute("x")),dy:-rt}),ft.appendChild(at),B.insertBefore(ft,B.firstChild)}},O.prototype.attr=function(B,H,at,ft){var q,pt,dt,rt=this.element,z=this.symbolCustomAttribs,mt=this;if("string"==typeof B&&typeof H<"u"){var Y=B;(B={})[Y]=H}return"string"==typeof B?mt=(this[B+"Getter"]||this._defaultGetter).call(this,B,rt):(M(B,function(lt,ht){pt=!1,ft||It(this,ht),this.symbolName&&-1!==z.indexOf(ht)&&(q||(this.symbolAttr(B),q=!0),pt=!0),!this.rotation||"x"!==ht&&"y"!==ht||(this.doTransform=!0),pt||((dt=this[ht+"Setter"]||this._defaultSetter).call(this,lt,ht,rt),!this.styledMode&&this.shadows&&/^(width|height|visibility|x|y|d|transform|cx|cy|r)$/.test(ht)&&this.updateShadows(ht,lt,dt))},this),this.afterSetters()),at&&at.call(this),mt},O.prototype.clip=function(B){return this.attr("clip-path",B?"url("+this.renderer.url+"#"+B.id+")":"none")},O.prototype.crisp=function(B,H){H=H||B.strokeWidth||0;var at=Math.round(H)%2/2;return B.x=Math.floor(B.x||this.x||0)+at,B.y=Math.floor(B.y||this.y||0)+at,B.width=Math.floor((B.width||this.width||0)-2*at),B.height=Math.floor((B.height||this.height||0)-2*at),V(B.strokeWidth)&&(B.strokeWidth=H),B},O.prototype.complexColor=function(B,H,at){var rt,z,q,mt,pt,dt,Y,lt,ht,Lt,Wt,ft=this.renderer,At=[];l(this.renderer,"complexColor",{args:arguments},function(){if(B.radialGradient?z="radialGradient":B.linearGradient&&(z="linearGradient"),z){if(pt=ft.gradients,dt=B.stops,ht=at.radialReference,it(q=B[z])&&(B[z]=q={x1:q[0],y1:q[1],x2:q[2],y2:q[3],gradientUnits:"userSpaceOnUse"}),"radialGradient"===z&&ht&&!V(q.gradientUnits)&&(q=v(q,ft.getRadialAttr(ht,mt=q),{gradientUnits:"userSpaceOnUse"})),M(q,function(se,_e){"id"!==_e&&At.push(_e,se)}),M(dt,function(se){At.push(se)}),At=At.join(","),pt[At])Lt=pt[At].attr("id");else{q.id=Lt=y();var Ot=pt[At]=ft.createElement(z).attr(q).add(ft.defs);Ot.radAttr=mt,Ot.stops=[],dt.forEach(function(se){0===se[1].indexOf("rgba")?(rt=xt.parse(se[1]),Y=rt.get("rgb"),lt=rt.get("a")):(Y=se[1],lt=1),se=ft.createElement("stop").attr({offset:se[0],"stop-color":Y,"stop-opacity":lt}).add(Ot),Ot.stops.push(se)})}at.setAttribute(H,Wt="url("+ft.url+"#"+Lt+")"),at.gradient=At,B.toString=function(){return Wt}}})},O.prototype.css=function(B){var H=this.styles,at={},ft=this.element,rt=!H;if(B.color&&(B.fill=B.color),H&&M(B,function(mt,pt){H&&H[pt]!==mt&&(at[pt]=mt,rt=!0)}),rt){if(H&&(B=w(H,at)),null===B.width||"auto"===B.width)delete this.textWidth;else if("text"===ft.nodeName.toLowerCase()&&B.width)var z=this.textWidth=k(B.width);this.styles=B,z&&!st&&this.renderer.forExport&&delete B.width;var q=v(B);ft.namespaceURI===this.SVG_NS&&["textOutline","textOverflow","width"].forEach(function(mt){return q&&delete q[mt]}),j(ft,q),this.added&&("text"===this.element.nodeName&&this.renderer.buildText(this),B.textOutline&&this.applyTextOutline(B.textOutline))}return this},O.prototype.dashstyleSetter=function(B){var H=this["stroke-width"];if("inherit"===H&&(H=1),B=B&&B.toLowerCase()){var at=B.replace("shortdashdotdot","3,1,1,1,1,1,").replace("shortdashdot","3,1,1,1").replace("shortdot","1,1,").replace("shortdash","3,1,").replace("longdash","8,3,").replace(/dot/g,"1,3,").replace("dash","4,3,").replace(/,$/,"").split(",");for(B=at.length;B--;)at[B]=""+k(at[B])*b(H,NaN);B=at.join(",").replace(/NaN/g,"none"),this.element.setAttribute("stroke-dasharray",B)}},O.prototype.destroy=function(){var B=this,H=B.element||{},at=B.renderer,ft=H.ownerSVGElement,rt=at.isSVG&&"SPAN"===H.nodeName&&B.parentGroup||void 0;if(H.onclick=H.onmouseout=H.onmouseover=H.onmousemove=H.point=null,It(B),B.clipPath&&ft){var z=B.clipPath;[].forEach.call(ft.querySelectorAll("[clip-path],[CLIP-PATH]"),function(q){-1<q.getAttribute("clip-path").indexOf(z.element.id)&&q.removeAttribute("clip-path")}),B.clipPath=z.destroy()}if(B.stops){for(ft=0;ft<B.stops.length;ft++)B.stops[ft].destroy();B.stops.length=0,B.stops=void 0}for(B.safeRemoveChild(H),at.styledMode||B.destroyShadows();rt&&rt.div&&0===rt.div.childNodes.length;)H=rt.parentGroup,B.safeRemoveChild(rt.div),delete rt.div,rt=H;B.alignTo&&nt(at.alignedObjects,B),M(B,function(q,mt){B[mt]&&B[mt].parentGroup===B&&B[mt].destroy&&B[mt].destroy(),delete B[mt]})},O.prototype.destroyShadows=function(){(this.shadows||[]).forEach(function(B){this.safeRemoveChild(B)},this),this.shadows=void 0},O.prototype.dSetter=function(B,H,at){it(B)&&("string"==typeof B[0]&&(B=this.renderer.pathToSegments(B)),this.pathArray=B,B=B.reduce(function(ft,rt,z){return rt&&rt.join?(z?ft+" ":"")+rt.join(" "):(rt||"").toString()},"")),/(NaN| {2}|^$)/.test(B)&&(B="M 0 0"),this[H]!==B&&(at.setAttribute(H,B),this[H]=B)},O.prototype.fadeOut=function(B){var H=this;H.animate({opacity:0},{duration:b(B,150),complete:function(){H.hide()}})},O.prototype.fillSetter=function(B,H,at){"string"==typeof B?at.setAttribute(H,B):B&&this.complexColor(B,H,at)},O.prototype.getBBox=function(B,H){var at=this.alignValue,ft=this.element,rt=this.renderer,z=this.styles,q=this.textStr,mt=rt.cache,pt=rt.cacheKeys,dt=ft.namespaceURI===this.SVG_NS;H=b(H,this.rotation,0);var lt,Y=rt.styledMode?ft&&O.prototype.getStyle.call(ft,"font-size"):z&&z.fontSize;if(V(q)){var ht=q.toString();-1===ht.indexOf("<")&&(ht=ht.replace(/[0-9]/g,"0")),ht+=["",H,Y,this.textWidth,at,z&&z.textOverflow,z&&z.fontWeight].join()}if(ht&&!B&&(lt=mt[ht]),!lt){if(dt||rt.forExport){try{var Lt=this.fakeTS&&function(Wt){var Ot=ft.querySelector(".highcharts-text-outline");Ot&&j(Ot,{display:Wt})};N(Lt)&&Lt("none"),lt=ft.getBBox?w({},ft.getBBox()):{width:ft.offsetWidth,height:ft.offsetHeight,x:0,y:0},N(Lt)&&Lt("")}catch{}(!lt||0>lt.width)&&(lt={x:0,y:0,width:0,height:0})}else lt=this.htmlGetBBox();if(rt.isSVG&&(rt=lt.width,B=lt.height,dt&&(lt.height=B={"11px,17":14,"13px,20":16}[""+(Y||"")+",".concat(Math.round(B))]||B),H)){dt=Number(ft.getAttribute("y")||0)-lt.y,at={right:1,center:.5}[at||0]||0,z=H*K,Y=(H-90)*K;var At=rt*Math.cos(z);H=rt*Math.sin(z),Lt=Math.cos(Y),z=Math.sin(Y),At=(Lt=(Y=(rt=lt.x+at*(rt-At)+dt*Lt)+At)-B*Lt)-At,H=(B=(at=(dt=lt.y+dt-at*H+dt*z)+H)-B*z)-H,lt.x=Math.min(rt,Y,Lt,At),lt.y=Math.min(dt,at,B,H),lt.width=Math.max(rt,Y,Lt,At)-lt.x,lt.height=Math.max(dt,at,B,H)-lt.y}if(ht&&(""===q||0<lt.height)){for(;250<pt.length;)delete mt[pt.shift()];mt[ht]||pt.push(ht),mt[ht]=lt}}return lt},O.prototype.getStyle=function(B){return I.getComputedStyle(this.element||this,"").getPropertyValue(B)},O.prototype.hasClass=function(B){return-1!==(""+this.attr("class")).split(" ").indexOf(B)},O.prototype.hide=function(){return this.attr({visibility:"hidden"})},O.prototype.htmlGetBBox=function(){return{height:0,width:0,x:0,y:0}},O.prototype.init=function(B,H){this.element="span"===H?T(H):et.createElementNS(this.SVG_NS,H),this.renderer=B,l(this,"afterInit")},O.prototype.on=function(B,H){var at=this.onEvents;return at[B]&&at[B](),at[B]=A(this.element,B,H),this},O.prototype.opacitySetter=function(B,H,at){this.opacity=B=Number(Number(B).toFixed(3)),at.setAttribute(H,B)},O.prototype.removeClass=function(B){return this.attr("class",(""+this.attr("class")).replace(G(B)?new RegExp("(^| )".concat(B,"( |$)")):B," ").replace(/ +/g," ").trim())},O.prototype.removeTextOutline=function(){var B=this.element.querySelector("tspan.highcharts-text-outline");B&&this.safeRemoveChild(B)},O.prototype.safeRemoveChild=function(B){var H=B.parentNode;H&&H.removeChild(B)},O.prototype.setRadialReference=function(B){var H=this.element.gradient&&this.renderer.gradients[this.element.gradient];return this.element.radialReference=B,H&&H.radAttr&&H.animate(this.renderer.getRadialAttr(B,H.radAttr)),this},O.prototype.setTextPath=function(B,H){var at=this;H=v(!0,{enabled:!0,attributes:{dy:-5,startOffset:"50%",textAnchor:"middle"}},H);var ft=this.renderer.url,rt=this.text||this,z=rt.textPath,q=H.attributes,mt=H.enabled;return B=B||z&&z.path,z&&z.undo(),B&&mt?(H=A(rt,"afterModifyTree",function(pt){if(B&&mt){var dt=B.attr("id");dt||B.attr("id",dt=y());var Y={x:0,y:0};V(q.dx)&&(Y.dx=q.dx,delete q.dx),V(q.dy)&&(Y.dy=q.dy,delete q.dy),rt.attr(Y),at.attr({transform:""}),at.box&&(at.box=at.box.destroy()),Y=pt.nodes.slice(0),pt.nodes.length=0,pt.nodes[0]={tagName:"textPath",attributes:w(q,{"text-anchor":q.textAnchor,href:""+ft+"#".concat(dt)}),children:Y}}}),rt.textPath={path:B,undo:H}):(rt.attr({dx:0,dy:0}),delete rt.textPath),this.added&&(rt.textCache="",this.renderer.buildText(rt)),this},O.prototype.shadow=function(B,H,at){var ft=[],rt=this.element,z=this.oldShadowOptions,q=this.parentGroup,mt=q&&90===q.rotation;q={color:"#000000",offsetX:mt?-1:1,offsetY:mt?-1:1,opacity:.15,width:3};var dt,pt=!1;if(!0===B?dt=q:"object"==typeof B&&(dt=w(q,B)),dt&&(dt&&z&&M(dt,function(Lt,At){Lt!==z[At]&&(pt=!0)}),pt&&this.destroyShadows(),this.oldShadowOptions=dt),dt){if(!this.shadows){q=dt.opacity/dt.width;var Y=mt?"translate(".concat(dt.offsetY,", ").concat(dt.offsetX,")"):"translate(".concat(dt.offsetX,", ").concat(dt.offsetY,")");for(mt=1;mt<=dt.width;mt++){var lt=rt.cloneNode(!1),ht=2*dt.width+1-2*mt;x(lt,{stroke:B.color||"#000000","stroke-opacity":q*mt,"stroke-width":ht,transform:Y,fill:"none"}),lt.setAttribute("class",(lt.getAttribute("class")||"")+" highcharts-shadow"),at&&(x(lt,"height",Math.max(x(lt,"height")-ht,0)),lt.cutHeight=ht),H?H.element.appendChild(lt):rt.parentNode&&rt.parentNode.insertBefore(lt,rt),ft.push(lt)}this.shadows=ft}}else this.destroyShadows();return this},O.prototype.show=function(B){return void 0===B&&(B=!0),this.attr({visibility:B?"inherit":"visible"})},O.prototype["stroke-widthSetter"]=function(B,H,at){this[H]=B,at.setAttribute(H,B)},O.prototype.strokeWidth=function(){if(!this.renderer.styledMode)return this["stroke-width"]||0;var B=this.getStyle("stroke-width"),H=0;if(B.indexOf("px")===B.length-2)H=k(B);else if(""!==B){var at=et.createElementNS(R,"rect");x(at,{width:B,"stroke-width":0}),this.element.parentNode.appendChild(at),H=at.getBBox().width,at.parentNode.removeChild(at)}return H},O.prototype.symbolAttr=function(B){var H=this;"x y r start end width height innerR anchorX anchorY clockwise".split(" ").forEach(function(at){H[at]=b(B[at],H[at])}),H.attr({d:H.renderer.symbols[H.symbolName](H.x,H.y,H.width,H.height,H)})},O.prototype.textSetter=function(B){B!==this.textStr&&(delete this.textPxLength,this.textStr=B,this.added&&this.renderer.buildText(this))},O.prototype.titleSetter=function(B){var H=this.element,at=H.getElementsByTagName("title")[0]||et.createElementNS(this.SVG_NS,"title");H.insertBefore?H.insertBefore(at,H.firstChild):H.appendChild(at),at.textContent=String(b(B,"")).replace(/<[^>]*>/g,"").replace(/&lt;/g,"<").replace(/&gt;/g,">")},O.prototype.toFront=function(){var B=this.element;return B.parentNode.appendChild(B),this},O.prototype.translate=function(B,H){return this.attr({translateX:B,translateY:H})},O.prototype.updateShadows=function(B,H,at){var ft=this.shadows;if(ft)for(var rt=ft.length;rt--;)at.call(ft[rt],"height"===B?Math.max(H-(ft[rt].cutHeight||0),0):"d"===B?this.d:H,B,ft[rt])},O.prototype.updateTransform=function(){var B=this.element,H=this.matrix,at=this.rotation;at=void 0===at?0:at;var ft=this.scaleX,rt=this.scaleY,z=this.translateX,q=this.translateY;z=["translate("+(void 0===z?0:z)+","+(void 0===q?0:q)+")"],V(H)&&z.push("matrix("+H.join(",")+")"),at&&z.push("rotate("+at+" "+b(this.rotationOriginX,B.getAttribute("x"),0)+" "+b(this.rotationOriginY,B.getAttribute("y")||0)+")"),(V(ft)||V(rt))&&z.push("scale("+b(ft,1)+" "+b(rt,1)+")"),z.length&&!(this.text||this).textPath&&B.setAttribute("transform",z.join(" "))},O.prototype.visibilitySetter=function(B,H,at){"inherit"===B?at.removeAttribute(H):this[H]!==B&&at.setAttribute(H,B),this[H]=B},O.prototype.xGetter=function(B){return"circle"===this.element.nodeName&&("x"===B?B="cx":"y"===B&&(B="cy")),this._defaultGetter(B)},O.prototype.zIndexSetter=function(B,H){var at=this.renderer,ft=this.parentGroup,rt=(ft||at).element||at.box,z=this.element;at=rt===at.box;var pt,q=!1,mt=this.added;if(V(B)?(z.setAttribute("data-z-index",B),this[H]===(B=+B)&&(mt=!1)):V(this[H])&&z.removeAttribute("data-z-index"),this[H]=B,mt){for((B=this.zIndex)&&ft&&(ft.handleZ=!0),pt=(H=rt.childNodes).length-1;0<=pt&&!q;pt--){mt=(ft=H[pt]).getAttribute("data-z-index");var dt=!V(mt);ft!==z&&(0>B&&dt&&!at&&!pt?(rt.insertBefore(z,H[pt]),q=!0):(k(mt)<=B||dt&&(!V(B)||0<=B))&&(rt.insertBefore(z,H[pt+1]||null),q=!0))}q||(rt.insertBefore(z,H[at?3:0]||null),q=!0)}return q},O}(),wt.prototype.strokeSetter=wt.prototype.fillSetter,wt.prototype.yGetter=wt.prototype.xGetter,wt.prototype.matrixSetter=wt.prototype.rotationOriginXSetter=wt.prototype.rotationOriginYSetter=wt.prototype.rotationSetter=wt.prototype.scaleXSetter=wt.prototype.scaleYSetter=wt.prototype.translateXSetter=wt.prototype.translateYSetter=wt.prototype.verticalAlignSetter=function(O,B){this[B]=O,this.doTransform=!0},wt}),te(Ct,"Core/Renderer/RendererRegistry.js",[Ct["Core/Globals.js"]],function(wt){var xt,jt,zt;return(jt=xt||(xt={})).rendererTypes={},jt.getRendererType=function(Ut){return void 0===Ut&&(Ut=zt),jt.rendererTypes[Ut]||jt.rendererTypes[zt]},jt.registerRendererType=function(Ut,Rt,It){jt.rendererTypes[Ut]=Rt,(!zt||It)&&(zt=Ut,wt.Renderer=Rt)},xt}),te(Ct,"Core/Renderer/SVG/SVGLabel.js",[Ct["Core/Renderer/SVG/SVGElement.js"],Ct["Core/Utilities.js"]],function(wt,xt){var st,jt=this&&this.__extends||(st=function(R,I){return(st=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(A,x){A.__proto__=x}||function(A,x){for(var T in x)x.hasOwnProperty(T)&&(A[T]=x[T])})(R,I)},function(R,I){function A(){this.constructor=R}st(R,I),R.prototype=null===I?Object.create(I):(A.prototype=I.prototype,new A)}),zt=xt.defined,Ut=xt.extend,Rt=xt.isNumber,It=xt.merge,K=xt.pick,et=xt.removeEvent;return function(st){function R(I,A,x,T,j,V,nt,w,l,it){var G,N=st.call(this)||this;return N.paddingLeftSetter=N.paddingSetter,N.paddingRightSetter=N.paddingSetter,N.init(I,"g"),N.textStr=A,N.x=x,N.y=T,N.anchorX=V,N.anchorY=nt,N.baseline=l,N.className=it,N.addClass("button"===it?"highcharts-no-tooltip":"highcharts-label"),it&&N.addClass("highcharts-"+it),N.text=I.text(void 0,0,0,w).attr({zIndex:1}),"string"==typeof j&&((G=/^url\((.*?)\)$/.test(j))||N.renderer.symbols[j])&&(N.symbolKey=j),N.bBox=R.emptyBBox,N.padding=3,N.baselineOffset=0,N.needsBox=I.styledMode||G,N.deferredAttr={},N.alignFactor=0,N}return jt(R,st),R.prototype.alignSetter=function(I){(I={left:0,center:.5,right:1}[I])!==this.alignFactor&&(this.alignFactor=I,this.bBox&&Rt(this.xSetting)&&this.attr({x:this.xSetting}))},R.prototype.anchorXSetter=function(I,A){this.anchorX=I,this.boxAttr(A,Math.round(I)-this.getCrispAdjust()-this.xSetting)},R.prototype.anchorYSetter=function(I,A){this.anchorY=I,this.boxAttr(A,I-this.ySetting)},R.prototype.boxAttr=function(I,A){this.box?this.box.attr(I,A):this.deferredAttr[I]=A},R.prototype.css=function(I){if(I){var A={};I=It(I),R.textProps.forEach(function(T){typeof I[T]<"u"&&(A[T]=I[T],delete I[T])}),this.text.css(A);var x="width"in A;"fontSize"in A||"fontWeight"in A?this.updateTextPadding():x&&this.updateBoxSize()}return wt.prototype.css.call(this,I)},R.prototype.destroy=function(){et(this.element,"mouseenter"),et(this.element,"mouseleave"),this.text&&this.text.destroy(),this.box&&(this.box=this.box.destroy()),wt.prototype.destroy.call(this)},R.prototype.fillSetter=function(I,A){I&&(this.needsBox=!0),this.fill=I,this.boxAttr(A,I)},R.prototype.getBBox=function(){this.textStr&&0===this.bBox.width&&0===this.bBox.height&&this.updateBoxSize();var I=this.padding,A=K(this.paddingLeft,I);return{width:this.width,height:this.height,x:this.bBox.x-A,y:this.bBox.y-I}},R.prototype.getCrispAdjust=function(){return this.renderer.styledMode&&this.box?this.box.strokeWidth()%2/2:(this["stroke-width"]?parseInt(this["stroke-width"],10):0)%2/2},R.prototype.heightSetter=function(I){this.heightSetting=I},R.prototype.onAdd=function(){this.text.add(this),this.attr({text:K(this.textStr,""),x:this.x||0,y:this.y||0}),this.box&&zt(this.anchorX)&&this.attr({anchorX:this.anchorX,anchorY:this.anchorY})},R.prototype.paddingSetter=function(I,A){Rt(I)?I!==this[A]&&(this[A]=I,this.updateTextPadding()):this[A]=void 0},R.prototype.rSetter=function(I,A){this.boxAttr(A,I)},R.prototype.shadow=function(I){return I&&!this.renderer.styledMode&&(this.updateBoxSize(),this.box&&this.box.shadow(I)),this},R.prototype.strokeSetter=function(I,A){this.stroke=I,this.boxAttr(A,I)},R.prototype["stroke-widthSetter"]=function(I,A){I&&(this.needsBox=!0),this["stroke-width"]=I,this.boxAttr(A,I)},R.prototype["text-alignSetter"]=function(I){this.textAlign=I},R.prototype.textSetter=function(I){typeof I<"u"&&this.text.attr({text:I}),this.updateTextPadding()},R.prototype.updateBoxSize=function(){var I=this.text,A=I.element.style,x={},T=this.padding,j=this.bBox=Rt(this.widthSetting)&&Rt(this.heightSetting)&&!this.textAlign||!zt(I.textStr)?R.emptyBBox:I.getBBox();this.width=this.getPaddedWidth(),this.height=(this.heightSetting||j.height||0)+2*T,A=this.renderer.fontMetrics(A&&A.fontSize,I),this.baselineOffset=T+Math.min((this.text.firstLineMetrics||A).b,j.height||1/0),this.heightSetting&&(this.baselineOffset+=(this.heightSetting-A.h)/2),this.needsBox&&!I.textPath&&(this.box||((I=this.box=this.symbolKey?this.renderer.symbol(this.symbolKey):this.renderer.rect()).addClass(("button"===this.className?"":"highcharts-label-box")+(this.className?" highcharts-"+this.className+"-box":"")),I.add(this)),I=this.getCrispAdjust(),x.x=I,x.y=(this.baseline?-this.baselineOffset:0)+I,x.width=Math.round(this.width),x.height=Math.round(this.height),this.box.attr(Ut(x,this.deferredAttr)),this.deferredAttr={})},R.prototype.updateTextPadding=function(){var I=this.text;if(!I.textPath){this.updateBoxSize();var A=this.baseline?0:this.baselineOffset,x=K(this.paddingLeft,this.padding);zt(this.widthSetting)&&this.bBox&&("center"===this.textAlign||"right"===this.textAlign)&&(x+={center:.5,right:1}[this.textAlign]*(this.widthSetting-this.bBox.width)),(x!==I.x||A!==I.y)&&(I.attr("x",x),I.hasBoxWidthChanged&&(this.bBox=I.getBBox(!0)),typeof A<"u"&&I.attr("y",A)),I.x=x,I.y=A}},R.prototype.widthSetter=function(I){this.widthSetting=Rt(I)?I:void 0},R.prototype.getPaddedWidth=function(){var I=this.padding,A=K(this.paddingLeft,I);return I=K(this.paddingRight,I),(this.widthSetting||this.bBox.width||0)+A+I},R.prototype.xSetter=function(I){this.x=I,this.alignFactor&&(I-=this.alignFactor*this.getPaddedWidth(),this["forceAnimate:x"]=!0),this.xSetting=Math.round(I),this.attr("translateX",this.xSetting)},R.prototype.ySetter=function(I){this.ySetting=this.y=Math.round(I),this.attr("translateY",this.ySetting)},R.emptyBBox={width:0,height:0,x:0,y:0},R.textProps="color direction fontFamily fontSize fontStyle fontWeight lineHeight textAlign textDecoration textOutline textOverflow width".split(" "),R}(wt)}),te(Ct,"Core/Renderer/SVG/Symbols.js",[Ct["Core/Utilities.js"]],function(wt){function xt(K,et,st,R,I){var A=[];if(I){var x=I.start||0,T=It(I.r,st);st=It(I.r,R||st);var j=(I.end||0)-.001;R=I.innerR;var V=It(I.open,.001>Math.abs((I.end||0)-x-2*Math.PI)),nt=Math.cos(x),w=Math.sin(x),l=Math.cos(j),it=Math.sin(j);x=It(I.longArc,.001>j-x-Math.PI?0:1),A.push(["M",K+T*nt,et+st*w],["A",T,st,0,x,It(I.clockwise,1),K+T*l,et+st*it]),Ut(R)&&A.push(V?["M",K+R*l,et+R*it]:["L",K+R*l,et+R*it],["A",R,R,0,x,Ut(I.clockwise)?1-I.clockwise:0,K+R*nt,et+R*w]),V||A.push(["Z"])}return A}function jt(K,et,st,R,I){return I&&I.r?zt(K,et,st,R,I):[["M",K,et],["L",K+st,et],["L",K+st,et+R],["L",K,et+R],["Z"]]}function zt(K,et,st,R,I){return[["M",K+(I=I&&I.r||0),et],["L",K+st-I,et],["C",K+st,et,K+st,et,K+st,et+I],["L",K+st,et+R-I],["C",K+st,et+R,K+st,et+R,K+st-I,et+R],["L",K+I,et+R],["C",K,et+R,K,et+R,K,et+R-I],["L",K,et+I],["C",K,et,K,et,K+I,et]]}var Ut=wt.defined,Rt=wt.isNumber,It=wt.pick;return{arc:xt,callout:function(K,et,st,R,I){var A=Math.min(I&&I.r||0,st,R),x=A+6,T=I&&I.anchorX;I=I&&I.anchorY||0;var j=zt(K,et,st,R,{r:A});return Rt(T)&&(K+T>=st?I>et+x&&I<et+R-x?j.splice(3,1,["L",K+st,I-6],["L",K+st+6,I],["L",K+st,I+6],["L",K+st,et+R-A]):j.splice(3,1,["L",K+st,R/2],["L",T,I],["L",K+st,R/2],["L",K+st,et+R-A]):0>=K+T?I>et+x&&I<et+R-x?j.splice(7,1,["L",K,I+6],["L",K-6,I],["L",K,I-6],["L",K,et+A]):j.splice(7,1,["L",K,R/2],["L",T,I],["L",K,R/2],["L",K,et+A]):I&&I>R&&T>K+x&&T<K+st-x?j.splice(5,1,["L",T+6,et+R],["L",T,et+R+6],["L",T-6,et+R],["L",K+A,et+R]):I&&0>I&&T>K+x&&T<K+st-x&&j.splice(1,1,["L",T-6,et],["L",T,et-6],["L",T+6,et],["L",st-A,et])),j},circle:function(K,et,st,R){return xt(K+st/2,et+R/2,st/2,R/2,{start:.5*Math.PI,end:2.5*Math.PI,open:!1})},diamond:function(K,et,st,R){return[["M",K+st/2,et],["L",K+st,et+R/2],["L",K+st/2,et+R],["L",K,et+R/2],["Z"]]},rect:jt,roundedRect:zt,square:jt,triangle:function(K,et,st,R){return[["M",K+st/2,et],["L",K+st,et+R],["L",K,et+R],["Z"]]},"triangle-down":function(K,et,st,R){return[["M",K,et],["L",K+st,et],["L",K+st/2,et+R],["Z"]]}}}),te(Ct,"Core/Renderer/SVG/TextBuilder.js",[Ct["Core/Renderer/HTML/AST.js"],Ct["Core/Globals.js"],Ct["Core/Utilities.js"]],function(wt,xt,jt){var zt=xt.doc,Ut=xt.SVG_NS,Rt=xt.win,It=jt.attr,K=jt.extend,et=jt.fireEvent,st=jt.isString,R=jt.objectEach,I=jt.pick;return function(){function A(x){var T=x.styles;this.renderer=x.renderer,this.svgElement=x,this.width=x.textWidth,this.textLineHeight=T&&T.lineHeight,this.textOutline=T&&T.textOutline,this.ellipsis=!(!T||"ellipsis"!==T.textOverflow),this.noWrap=!(!T||"nowrap"!==T.whiteSpace),this.fontSize=T&&T.fontSize}return A.prototype.buildSVG=function(){var x=this.svgElement,T=x.element,j=x.renderer,V=I(x.textStr,"").toString(),nt=-1!==V.indexOf("<"),w=T.childNodes;j=this.width&&!x.added&&j.box;var it=[V,this.ellipsis,this.noWrap,this.textLineHeight,this.textOutline,this.fontSize,this.width].join();if(it!==x.textCache){for(x.textCache=it,delete x.actualWidth,it=w.length;it--;)T.removeChild(w[it]);nt||this.ellipsis||this.width||x.textPath||-1!==V.indexOf(" ")&&(!this.noWrap||/<br.*?>/g.test(V))?""!==V&&(j&&j.appendChild(T),V=new wt(V),this.modifyTree(V.nodes),V.addToDOM(T),this.modifyDOM(),this.ellipsis&&-1!==(T.textContent||"").indexOf("\u2026")&&x.attr("title",this.unescapeEntities(x.textStr||"",["&lt;","&gt;"])),j&&j.removeChild(T)):T.appendChild(zt.createTextNode(this.unescapeEntities(V))),st(this.textOutline)&&x.applyTextOutline&&x.applyTextOutline(this.textOutline)}},A.prototype.modifyDOM=function(){var V,x=this,T=this.svgElement,j=It(T.element,"x");for(T.firstLineMetrics=void 0;(V=T.element.firstChild)&&/^[\s\u200B]*$/.test(V.textContent||" ");)T.element.removeChild(V);[].forEach.call(T.element.querySelectorAll("tspan.highcharts-br"),function(it,N){it.nextSibling&&it.previousSibling&&(0===N&&1===it.previousSibling.nodeType&&(T.firstLineMetrics=T.renderer.fontMetrics(void 0,it.previousSibling)),It(it,{dy:x.getLineHeight(it.nextSibling),x:j}))});var nt=this.width||0;if(nt){var l=function(it){[].slice.call(it.childNodes).forEach(function(N){N.nodeType===Rt.Node.TEXT_NODE?function(it,N){var G=it.textContent||"",v=G.replace(/([^\^])-/g,"$1- ").split(" "),M=!x.noWrap&&(1<v.length||1<T.element.childNodes.length),b=x.getLineHeight(N),k=0,_=T.actualWidth;if(x.ellipsis)G&&x.truncate(it,G,void 0,0,Math.max(0,nt-parseInt(x.fontSize||12,10)),function(y,O){return y.substring(0,O)+"\u2026"});else if(M){for(G=[],M=[];N.firstChild&&N.firstChild!==it;)M.push(N.firstChild),N.removeChild(N.firstChild);for(;v.length;)v.length&&!x.noWrap&&0<k&&(G.push(it.textContent||""),it.textContent=v.join(" ").replace(/- /g,"-")),x.truncate(it,void 0,v,0===k&&_||0,nt,function(y,O){return v.slice(0,O).join(" ").replace(/- /g,"-")}),_=T.actualWidth,k++;M.forEach(function(y){N.insertBefore(y,it)}),G.forEach(function(y){N.insertBefore(zt.createTextNode(y),it),(y=zt.createElementNS(Ut,"tspan")).textContent="\u200b",It(y,{dy:b,x:j}),N.insertBefore(y,it)})}}(N,it):(-1!==N.className.baseVal.indexOf("highcharts-br")&&(T.actualWidth=0),l(N))})};l(T.element)}},A.prototype.getLineHeight=function(x){var T;return x=x.nodeType===Rt.Node.TEXT_NODE?x.parentElement:x,this.renderer.styledMode||(T=x&&/(px|em)$/.test(x.style.fontSize)?x.style.fontSize:this.fontSize||this.renderer.style.fontSize||12),this.textLineHeight?parseInt(this.textLineHeight.toString(),10):this.renderer.fontMetrics(T,x||this.svgElement.element).h},A.prototype.modifyTree=function(x){var T=this,j=function(V,nt){var w=V.attributes;w=void 0===w?{}:w;var l=V.children,it=V.style;it=void 0===it?{}:it;var N=V.tagName,G=T.renderer.styledMode;"b"===N||"strong"===N?G?w.class="highcharts-strong":it.fontWeight="bold":("i"===N||"em"===N)&&(G?w.class="highcharts-emphasized":it.fontStyle="italic"),it&&it.color&&(it.fill=it.color),"br"===N?(w.class="highcharts-br",V.textContent="\u200b",(nt=x[nt+1])&&nt.textContent&&(nt.textContent=nt.textContent.replace(/^ +/gm,""))):"a"===N&&l&&l.some(function(v){return"#text"===v.tagName})&&(V.children=[{children:l,tagName:"tspan"}]),"#text"!==N&&"a"!==N&&(V.tagName="tspan"),K(V,{attributes:w,style:it}),l&&l.filter(function(v){return"#text"!==v.tagName}).forEach(j)};x.forEach(j),et(this.svgElement,"afterModifyTree",{nodes:x})},A.prototype.truncate=function(x,T,j,V,nt,w){var k,l=this.svgElement,it=l.renderer,N=l.rotation,G=[],v=j?1:0,M=(T||j||"").length,b=M,_=function(O,B){B=B||O;var H=x.parentNode;if(H&&typeof G[B]>"u")if(H.getSubStringLength)try{G[B]=V+H.getSubStringLength(0,j?B+1:B)}catch{}else it.getSpanWidth&&(x.textContent=w(T||j,O),G[B]=V+it.getSpanWidth(l,x));return G[B]};l.rotation=0;var y=_(x.textContent.length);if(V+y>nt){for(;v<=M;)b=Math.ceil((v+M)/2),j&&(k=w(j,b)),y=_(b,k&&k.length-1),v===M?v=M+1:y>nt?M=b-1:v=b;0===M?x.textContent="":T&&M===T.length-1||(x.textContent=k||w(T||j,b))}j&&j.splice(0,b),l.actualWidth=y,l.rotation=N},A.prototype.unescapeEntities=function(x,T){return R(this.renderer.escapes,function(j,V){T&&-1!==T.indexOf(j)||(x=x.toString().replace(new RegExp(j,"g"),V))}),x},A}()}),te(Ct,"Core/Renderer/SVG/SVGRenderer.js",[Ct["Core/Renderer/HTML/AST.js"],Ct["Core/Color/Color.js"],Ct["Core/Globals.js"],Ct["Core/Renderer/RendererRegistry.js"],Ct["Core/Renderer/SVG/SVGElement.js"],Ct["Core/Renderer/SVG/SVGLabel.js"],Ct["Core/Renderer/SVG/Symbols.js"],Ct["Core/Renderer/SVG/TextBuilder.js"],Ct["Core/Utilities.js"]],function(wt,xt,jt,zt,Ut,Rt,It,K,et){var rt,st=jt.charts,R=jt.deg2rad,I=jt.doc,A=jt.isFirefox,x=jt.isMS,T=jt.isWebKit,j=jt.noop,V=jt.SVG_NS,nt=jt.symbolSizes,w=jt.win,l=et.addEvent,it=et.attr,N=et.createElement,G=et.css,v=et.defined,M=et.destroyObjectProperties,b=et.extend,k=et.isArray,_=et.isNumber,y=et.isObject,O=et.isString,B=et.merge,H=et.pick,at=et.pInt,ft=et.uniqueKey;return jt=function(){function z(q,mt,pt,dt,Y,lt,ht){this.width=this.url=this.style=this.isSVG=this.imgCount=this.height=this.gradients=this.globalAnimation=this.defs=this.chartIndex=this.cacheKeys=this.cache=this.boxWrapper=this.box=this.alignedObjects=void 0,this.init(q,mt,pt,dt,Y,lt,ht)}return z.prototype.init=function(q,mt,pt,dt,Y,lt,ht){var Wt,Lt=this.createElement("svg").attr({version:"1.1",class:"highcharts-root"}),At=Lt.element;ht||Lt.css(this.getStyle(dt)),q.appendChild(At),it(q,"dir","ltr"),-1===q.innerHTML.indexOf("xmlns")&&it(At,"xmlns",this.SVG_NS),this.isSVG=!0,this.box=At,this.boxWrapper=Lt,this.alignedObjects=[],this.url=this.getReferenceURL(),this.createElement("desc").add().element.appendChild(I.createTextNode("Created with Highcharts 10.3.2")),this.defs=this.createElement("defs").add(),this.allowHTML=lt,this.forExport=Y,this.styledMode=ht,this.gradients={},this.cache={},this.cacheKeys=[],this.imgCount=0,this.setSize(mt,pt,!1),A&&q.getBoundingClientRect&&((mt=function(){G(q,{left:0,top:0}),Wt=q.getBoundingClientRect(),G(q,{left:Math.ceil(Wt.left)-Wt.left+"px",top:Math.ceil(Wt.top)-Wt.top+"px"})})(),this.unSubPixelFix=l(w,"resize",mt))},z.prototype.definition=function(q){return new wt([q]).addToDOM(this.defs.element)},z.prototype.getReferenceURL=function(){if((A||T)&&I.getElementsByTagName("base").length){if(!v(rt)){var q=ft();q=new wt([{tagName:"svg",attributes:{width:8,height:8},children:[{tagName:"defs",children:[{tagName:"clipPath",attributes:{id:q},children:[{tagName:"rect",attributes:{width:4,height:4}}]}]},{tagName:"rect",attributes:{id:"hitme",width:8,height:8,"clip-path":"url(#".concat(q,")"),fill:"rgba(0,0,0,0.001)"}}]}]).addToDOM(I.body),G(q,{position:"fixed",top:0,left:0,zIndex:9e5});var mt=I.elementFromPoint(6,6);rt="hitme"===(mt&&mt.id),I.body.removeChild(q)}if(rt)return w.location.href.split("#")[0].replace(/<[^>]*>/g,"").replace(/([\('\)])/g,"\\$1").replace(/ /g,"%20")}return""},z.prototype.getStyle=function(q){return this.style=b({fontFamily:'"Lucida Grande", "Lucida Sans Unicode", Arial, Helvetica, sans-serif',fontSize:"12px"},q)},z.prototype.setStyle=function(q){this.boxWrapper.css(this.getStyle(q))},z.prototype.isHidden=function(){return!this.boxWrapper.getBBox().width},z.prototype.destroy=function(){var q=this.defs;return this.box=null,this.boxWrapper=this.boxWrapper.destroy(),M(this.gradients||{}),this.gradients=null,q&&(this.defs=q.destroy()),this.unSubPixelFix&&this.unSubPixelFix(),this.alignedObjects=null},z.prototype.createElement=function(q){var mt=new this.Element;return mt.init(this,q),mt},z.prototype.getRadialAttr=function(q,mt){return{cx:q[0]-q[2]/2+(mt.cx||0)*q[2],cy:q[1]-q[2]/2+(mt.cy||0)*q[2],r:(mt.r||0)*q[2]}},z.prototype.buildText=function(q){new K(q).buildSVG()},z.prototype.getContrast=function(q){return 1.05/(.05+(q=.2126*(q=xt.parse(q).rgba.map(function(mt){return.03928>=(mt/=255)?mt/12.92:Math.pow((mt+.055)/1.055,2.4)}))[0]+.7152*q[1]+.0722*q[2]))>(q+.05)/.05?"#FFFFFF":"#000000"},z.prototype.button=function(q,mt,pt,dt,Y,lt,ht,Lt,At,Wt){void 0===Y&&(Y={});var Ot=this.label(q,mt,pt,At,void 0,void 0,Wt,void 0,"button"),se=this.styledMode;q=Y.states||{};var _e=0;delete(Y=B(Y)).states;var We=B({color:"#333333",cursor:"pointer",fontWeight:"normal"},Y.style);delete Y.style;var He=wt.filterUserAttributes(Y);if(Ot.attr(B({padding:8,r:2},He)),!se){He=B({fill:"#f7f7f7",stroke:"#cccccc","stroke-width":1},He);var Fe=(lt=B(He,{fill:"#e6e6e6"},wt.filterUserAttributes(lt||q.hover||{}))).style;delete lt.style;var pe=(ht=B(He,{fill:"#e6ebf5",style:{color:"#000000",fontWeight:"bold"}},wt.filterUserAttributes(ht||q.select||{}))).style;delete ht.style;var Me=(Lt=B(He,{style:{color:"#cccccc"}},wt.filterUserAttributes(Lt||q.disabled||{}))).style;delete Lt.style}return l(Ot.element,x?"mouseover":"mouseenter",function(){3!==_e&&Ot.setState(1)}),l(Ot.element,x?"mouseout":"mouseleave",function(){3!==_e&&Ot.setState(_e)}),Ot.setState=function(me){1!==me&&(Ot.state=_e=me),Ot.removeClass(/highcharts-button-(normal|hover|pressed|disabled)/).addClass("highcharts-button-"+["normal","hover","pressed","disabled"][me||0]),se||(Ot.attr([He,lt,ht,Lt][me||0]),y(me=[We,Fe,pe,Me][me||0])&&Ot.css(me))},se||(Ot.attr(He).css(b({cursor:"default"},We)),Wt&&Ot.text.css({pointerEvents:"none"})),Ot.on("touchstart",function(me){return me.stopPropagation()}).on("click",function(me){3!==_e&&dt.call(Ot,me)})},z.prototype.crispLine=function(q,mt,pt){void 0===pt&&(pt="round");var dt=q[0],Y=q[1];return v(dt[1])&&dt[1]===Y[1]&&(dt[1]=Y[1]=Math[pt](dt[1])-mt%2/2),v(dt[2])&&dt[2]===Y[2]&&(dt[2]=Y[2]=Math[pt](dt[2])+mt%2/2),q},z.prototype.path=function(q){var mt=this.styledMode?{}:{fill:"none"};return k(q)?mt.d=q:y(q)&&b(mt,q),this.createElement("path").attr(mt)},z.prototype.circle=function(q,mt,pt){return q=y(q)?q:typeof q>"u"?{}:{x:q,y:mt,r:pt},(mt=this.createElement("circle")).xSetter=mt.ySetter=function(dt,Y,lt){lt.setAttribute("c"+Y,dt)},mt.attr(q)},z.prototype.arc=function(q,mt,pt,dt,Y,lt){return y(q)?(mt=(dt=q).y,pt=dt.r,q=dt.x):dt={innerR:dt,start:Y,end:lt},(q=this.symbol("arc",q,mt,pt,pt,dt)).r=pt,q},z.prototype.rect=function(q,mt,pt,dt,Y,lt){Y=y(q)?q.r:Y;var ht=this.createElement("rect");return q=y(q)?q:typeof q>"u"?{}:{x:q,y:mt,width:Math.max(pt,0),height:Math.max(dt,0)},this.styledMode||(typeof lt<"u"&&(q["stroke-width"]=lt,q=ht.crisp(q)),q.fill="none"),Y&&(q.r=Y),ht.rSetter=function(Lt,At,Wt){ht.r=Lt,it(Wt,{rx:Lt,ry:Lt})},ht.rGetter=function(){return ht.r||0},ht.attr(q)},z.prototype.setSize=function(q,mt,pt){this.width=q,this.height=mt,this.boxWrapper.animate({width:q,height:mt},{step:function(){this.attr({viewBox:"0 0 "+this.attr("width")+" "+this.attr("height")})},duration:H(pt,!0)?void 0:0}),this.alignElements()},z.prototype.g=function(q){var mt=this.createElement("g");return q?mt.attr({class:"highcharts-"+q}):mt},z.prototype.image=function(q,mt,pt,dt,Y,lt){var ht={preserveAspectRatio:"none"},Lt=function(Wt,Ot){Wt.setAttributeNS?Wt.setAttributeNS("http://www.w3.org/1999/xlink","href",Ot):Wt.setAttribute("hc-svg-href",Ot)};_(mt)&&(ht.x=mt),_(pt)&&(ht.y=pt),_(dt)&&(ht.width=dt),_(Y)&&(ht.height=Y);var At=this.createElement("image").attr(ht);return mt=function(Wt){Lt(At.element,q),lt.call(At,Wt)},lt?(Lt(At.element,"data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw=="),pt=new w.Image,l(pt,"load",mt),pt.src=q,pt.complete&&mt({})):Lt(At.element,q),At},z.prototype.symbol=function(q,mt,pt,dt,Y,lt){var se,ht=this,Lt=/^url\((.*?)\)$/,At=Lt.test(q),Wt=!At&&(this.symbols[q]?q:"circle"),Ot=Wt&&this.symbols[Wt];if(Ot){"number"==typeof mt&&(se=Ot.call(this.symbols,Math.round(mt||0),Math.round(pt||0),dt||0,Y||0,lt));var _e=this.path(se);ht.styledMode||_e.attr("fill","none"),b(_e,{symbolName:Wt||void 0,x:mt,y:pt,width:dt,height:Y}),lt&&b(_e,lt)}else if(At){var We=q.match(Lt)[1],He=_e=this.image(We);He.imgwidth=H(nt[We]&&nt[We].width,lt&&lt.width),He.imgheight=H(nt[We]&&nt[We].height,lt&&lt.height);var Fe=function(pe){return pe.attr({width:pe.width,height:pe.height})};["width","height"].forEach(function(pe){He[pe+"Setter"]=function(Me,me){this[me]=Me,Me=this.alignByTranslate;var qt=this.element,Kt=this.width,xe=this.height,be=this.imgwidth,Te=this.imgheight,ye=this["img"+me];if(v(ye)){var oi=1;lt&&"within"===lt.backgroundSize&&Kt&&xe?(oi=Math.min(Kt/be,xe/Te),ye=Math.round(ye*oi),it(qt,{width:Math.round(be*oi),height:Math.round(Te*oi)})):qt&&qt.setAttribute(me,ye),Me||this.translate(((Kt||0)-ye*oi)/2,((xe||0)-ye*oi)/2)}}}),v(mt)&&He.attr({x:mt,y:pt}),He.isImg=!0,v(He.imgwidth)&&v(He.imgheight)?Fe(He):(He.attr({width:0,height:0}),N("img",{onload:function(){var pe=st[ht.chartIndex];0===this.width&&(G(this,{position:"absolute",top:"-999em"}),I.body.appendChild(this)),nt[We]={width:this.width,height:this.height},He.imgwidth=this.width,He.imgheight=this.height,He.element&&Fe(He),this.parentNode&&this.parentNode.removeChild(this),ht.imgCount--,!ht.imgCount&&pe&&!pe.hasLoaded&&pe.onload()},src:We}),this.imgCount++)}return _e},z.prototype.clipRect=function(q,mt,pt,dt){var Y=ft()+"-",lt=this.createElement("clipPath").attr({id:Y}).add(this.defs);return(q=this.rect(q,mt,pt,dt,0).add(lt)).id=Y,q.clipPath=lt,q.count=0,q},z.prototype.text=function(q,mt,pt,dt){var Y={};return!dt||!this.allowHTML&&this.forExport?(Y.x=Math.round(mt||0),pt&&(Y.y=Math.round(pt)),v(q)&&(Y.text=q),q=this.createElement("text").attr(Y),(!dt||this.forExport&&!this.allowHTML)&&(q.xSetter=function(lt,ht,Lt){for(var se,At=Lt.getElementsByTagName("tspan"),Wt=Lt.getAttribute(ht),Ot=0;Ot<At.length;Ot++)(se=At[Ot]).getAttribute(ht)===Wt&&se.setAttribute(ht,lt);Lt.setAttribute(ht,lt)}),q):this.html(q,mt,pt)},z.prototype.fontMetrics=function(q,mt){return q=!this.styledMode&&/px/.test(q)||!w.getComputedStyle?q||mt&&mt.style&&mt.style.fontSize||this.style&&this.style.fontSize:mt&&Ut.prototype.getStyle.call(mt,"font-size"),{h:mt=24>(q=/px/.test(q)?at(q):12)?q+3:Math.round(1.2*q),b:Math.round(.8*mt),f:q}},z.prototype.rotCorr=function(q,mt,pt){var dt=q;return mt&&pt&&(dt=Math.max(dt*Math.cos(mt*R),4)),{x:-q/3*Math.sin(mt*R),y:dt}},z.prototype.pathToSegments=function(q){for(var mt=[],pt=[],dt={A:8,C:7,H:2,L:3,M:3,Q:5,S:5,T:3,V:2},Y=0;Y<q.length;Y++)O(pt[0])&&_(q[Y])&&pt.length===dt[pt[0].toUpperCase()]&&q.splice(Y,0,pt[0].replace("M","L").replace("m","l")),"string"==typeof q[Y]&&(pt.length&&mt.push(pt.slice(0)),pt.length=0),pt.push(q[Y]);return mt.push(pt.slice(0)),mt},z.prototype.label=function(q,mt,pt,dt,Y,lt,ht,Lt,At){return new Rt(this,q,mt,pt,dt,Y,lt,ht,Lt,At)},z.prototype.alignElements=function(){this.alignedObjects.forEach(function(q){return q.align()})},z}(),b(jt.prototype,{Element:Ut,SVG_NS:V,escapes:{"&":"&amp;","<":"&lt;",">":"&gt;","'":"&#39;",'"':"&quot;"},symbols:It,draw:j}),zt.registerRendererType("svg",jt,!0),jt}),te(Ct,"Core/Renderer/HTML/HTMLElement.js",[Ct["Core/Globals.js"],Ct["Core/Renderer/SVG/SVGElement.js"],Ct["Core/Utilities.js"]],function(wt,xt,jt){var x,zt=this&&this.__extends||(x=function(T,j){return(x=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(V,nt){V.__proto__=nt}||function(V,nt){for(var w in nt)nt.hasOwnProperty(w)&&(V[w]=nt[w])})(T,j)},function(T,j){function V(){this.constructor=T}x(T,j),T.prototype=null===j?Object.create(j):(V.prototype=j.prototype,new V)}),Ut=wt.isFirefox,Rt=wt.isMS,It=wt.isWebKit,K=wt.win,et=jt.css,st=jt.defined,R=jt.extend,I=jt.pick,A=jt.pInt;return function(x){function T(){return null!==x&&x.apply(this,arguments)||this}return zt(T,x),T.compose=function(j){if(-1===T.composedClasses.indexOf(j)){T.composedClasses.push(j);var V=T.prototype,nt=j.prototype;nt.getSpanCorrection=V.getSpanCorrection,nt.htmlCss=V.htmlCss,nt.htmlGetBBox=V.htmlGetBBox,nt.htmlUpdateTransform=V.htmlUpdateTransform,nt.setSpanRotation=V.setSpanRotation}return j},T.prototype.getSpanCorrection=function(j,V,nt){this.xCorr=-j*nt,this.yCorr=-V},T.prototype.htmlCss=function(j){var V="SPAN"===this.element.tagName&&j&&"width"in j,nt=I(V&&j.width,void 0);if(V){delete j.width,this.textWidth=nt;var w=!0}return j&&"ellipsis"===j.textOverflow&&(j.whiteSpace="nowrap",j.overflow="hidden"),this.styles=R(this.styles,j),et(this.element,j),w&&this.htmlUpdateTransform(),this},T.prototype.htmlGetBBox=function(){var j=this.element;return{x:j.offsetLeft,y:j.offsetTop,width:j.offsetWidth,height:j.offsetHeight}},T.prototype.htmlUpdateTransform=function(){if(this.added){var j=this.renderer,V=this.element,nt=this.translateX||0,w=this.translateY||0,l=this.x||0,it=this.y||0,N=this.textAlign||"left",G={left:0,center:.5,right:1}[N],v=this.styles;if(v=v&&v.whiteSpace,et(V,{marginLeft:nt,marginTop:w}),!j.styledMode&&this.shadows&&this.shadows.forEach(function(O){et(O,{marginLeft:nt+1,marginTop:w+1})}),this.inverted&&[].forEach.call(V.childNodes,function(O){j.invertChild(O,V)}),"SPAN"===V.tagName){var M=this.rotation,b=this.textWidth&&A(this.textWidth),k=[M,N,V.innerHTML,this.textWidth,this.textAlign].join(),_=void 0;if(_=!1,b!==this.oldTextWidth){if(this.textPxLength)var y=this.textPxLength;else et(V,{width:"",whiteSpace:v||"nowrap"}),y=V.offsetWidth;(b>this.oldTextWidth||y>b)&&(/[ \-]/.test(V.textContent||V.innerText)||"ellipsis"===V.style.textOverflow)&&(et(V,{width:y>b||M?b+"px":"auto",display:"block",whiteSpace:v||"normal"}),this.oldTextWidth=b,_=!0)}this.hasBoxWidthChanged=_,k!==this.cTT&&(_=j.fontMetrics(V.style.fontSize,V).b,!st(M)||M===(this.oldRotation||0)&&N===this.oldAlign||this.setSpanRotation(M,G,_),this.getSpanCorrection(!st(M)&&this.textPxLength||V.offsetWidth,_,G,M,N)),et(V,{left:l+(this.xCorr||0)+"px",top:it+(this.yCorr||0)+"px"}),this.cTT=k,this.oldRotation=M,this.oldAlign=N}}else this.alignOnAdd=!0},T.prototype.setSpanRotation=function(j,V,nt){var w={},l=Rt&&!/Edge/.test(K.navigator.userAgent)?"-ms-transform":It?"-webkit-transform":Ut?"MozTransform":K.opera?"-o-transform":void 0;l&&(w[l]=w.transform="rotate("+j+"deg)",w[l+(Ut?"Origin":"-origin")]=w.transformOrigin=100*V+"% "+nt+"px",et(this.element,w))},T.composedClasses=[],T}(xt)}),te(Ct,"Core/Renderer/HTML/HTMLRenderer.js",[Ct["Core/Renderer/HTML/AST.js"],Ct["Core/Renderer/SVG/SVGElement.js"],Ct["Core/Renderer/SVG/SVGRenderer.js"],Ct["Core/Utilities.js"]],function(wt,xt,jt,zt){var st,Ut=this&&this.__extends||(st=function(R,I){return(st=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(A,x){A.__proto__=x}||function(A,x){for(var T in x)x.hasOwnProperty(T)&&(A[T]=x[T])})(R,I)},function(R,I){function A(){this.constructor=R}st(R,I),R.prototype=null===I?Object.create(I):(A.prototype=I.prototype,new A)}),Rt=zt.attr,It=zt.createElement,K=zt.extend,et=zt.pick;return function(st){function R(){return null!==st&&st.apply(this,arguments)||this}return Ut(R,st),R.compose=function(I){return-1===R.composedClasses.indexOf(I)&&(R.composedClasses.push(I),I.prototype.html=R.prototype.html),I},R.prototype.html=function(I,A,x){var T=this.createElement("span"),j=T.element,V=T.renderer,nt=V.isSVG,w=function(l,it){["opacity","visibility"].forEach(function(N){l[N+"Setter"]=function(G,v,M){var b=l.div?l.div.style:it;xt.prototype[N+"Setter"].call(this,G,v,M),b&&(b[v]=G)}}),l.addedSetters=!0};return T.textSetter=function(l){l!==this.textStr&&(delete this.bBox,delete this.oldTextWidth,wt.setElementHTML(this.element,et(l,"")),this.textStr=l,T.doTransform=!0)},nt&&w(T,T.element.style),T.xSetter=T.ySetter=T.alignSetter=T.rotationSetter=function(l,it){"align"===it?T.alignValue=T.textAlign=l:T[it]=l,T.doTransform=!0},T.afterSetters=function(){this.doTransform&&(this.htmlUpdateTransform(),this.doTransform=!1)},T.attr({text:I,x:Math.round(A),y:Math.round(x)}).css({position:"absolute"}),V.styledMode||T.css({fontFamily:this.style.fontFamily,fontSize:this.style.fontSize}),j.style.whiteSpace="nowrap",T.css=T.htmlCss,nt&&(T.add=function(l){var it=V.box.parentNode,N=[];if(this.parentGroup=l){var G=l.div;if(!G){for(;l;)N.push(l),l=l.parentGroup;N.reverse().forEach(function(v){function M(y,O){v[O]=y,"translateX"===O?_.left=y+"px":_.top=y+"px",v.doTransform=!0}var y,b=Rt(v.element,"class"),k=v.styles||{},_=(G=v.div=v.div||It("div",b?{className:b}:void 0,{position:"absolute",left:(v.translateX||0)+"px",top:(v.translateY||0)+"px",display:v.display,opacity:v.opacity,cursor:k.cursor,pointerEvents:k.pointerEvents,visibility:v.visibility},G||it)).style;K(v,{classSetter:(y=G,function(O){this.element.setAttribute("class",O),y.className=O}),on:function(){return N[0].div&&T.on.apply({element:N[0].div,onEvents:v.onEvents},arguments),v},translateXSetter:M,translateYSetter:M}),v.addedSetters||w(v)})}}else G=it;return G.appendChild(j),T.added=!0,T.alignOnAdd&&T.htmlUpdateTransform(),T}),T},R.composedClasses=[],R}(jt)}),te(Ct,"Core/Axis/AxisDefaults.js",[],function(){var wt,xt;return(xt=wt||(wt={})).defaultXAxisOptions={alignTicks:!0,allowDecimals:void 0,panningEnabled:!0,zIndex:2,zoomEnabled:!0,dateTimeLabelFormats:{millisecond:{main:"%H:%M:%S.%L",range:!1},second:{main:"%H:%M:%S",range:!1},minute:{main:"%H:%M",range:!1},hour:{main:"%H:%M",range:!1},day:{main:"%e. %b"},week:{main:"%e. %b"},month:{main:"%b '%y"},year:{main:"%Y"}},endOnTick:!1,gridLineDashStyle:"Solid",gridZIndex:1,labels:{autoRotation:void 0,autoRotationLimit:80,distance:void 0,enabled:!0,indentation:10,overflow:"justify",padding:5,reserveSpace:void 0,rotation:void 0,staggerLines:0,step:0,useHTML:!1,x:0,zIndex:7,style:{color:"#666666",cursor:"default",fontSize:"11px"}},maxPadding:.01,minorGridLineDashStyle:"Solid",minorTickLength:2,minorTickPosition:"outside",minPadding:.01,offset:void 0,opposite:!1,reversed:void 0,reversedStacks:!1,showEmpty:!0,showFirstLabel:!0,showLastLabel:!0,startOfWeek:1,startOnTick:!1,tickLength:10,tickPixelInterval:100,tickmarkPlacement:"between",tickPosition:"outside",title:{align:"middle",rotation:0,useHTML:!1,x:0,y:0,style:{color:"#666666"}},type:"linear",uniqueNames:!0,visible:!0,minorGridLineColor:"#f2f2f2",minorGridLineWidth:1,minorTickColor:"#999999",lineColor:"#ccd6eb",lineWidth:1,gridLineColor:"#e6e6e6",gridLineWidth:void 0,tickColor:"#ccd6eb"},xt.defaultYAxisOptions={reversedStacks:!0,endOnTick:!0,maxPadding:.05,minPadding:.05,tickPixelInterval:72,showLastLabel:!0,labels:{x:-8},startOnTick:!0,title:{rotation:270,text:"Values"},stackLabels:{animation:{},allowOverlap:!1,enabled:!1,crop:!0,overflow:"justify",formatter:function(){return(0,this.axis.chart.numberFormatter)(this.total||0,-1)},style:{color:"#000000",fontSize:"11px",fontWeight:"bold",textOutline:"1px contrast"}},gridLineWidth:1,lineWidth:0},xt.defaultLeftAxisOptions={labels:{x:-15},title:{rotation:270}},xt.defaultRightAxisOptions={labels:{x:15},title:{rotation:90}},xt.defaultBottomAxisOptions={labels:{autoRotation:[-45],x:0},margin:15,title:{rotation:0}},xt.defaultTopAxisOptions={labels:{autoRotation:[-45],x:0},margin:15,title:{rotation:0}},wt}),te(Ct,"Core/Foundation.js",[Ct["Core/Utilities.js"]],function(wt){var Rt,xt=wt.addEvent,jt=wt.isFunction,zt=wt.objectEach,Ut=wt.removeEvent;return(Rt||(Rt={})).registerEventOptions=function(K,et){K.eventOptions=K.eventOptions||{},zt(et.events,function(st,R){K.eventOptions[R]!==st&&(K.eventOptions[R]&&(Ut(K,R,K.eventOptions[R]),delete K.eventOptions[R]),jt(st)&&(K.eventOptions[R]=st,xt(K,R,st)))})},Rt}),te(Ct,"Core/Axis/Tick.js",[Ct["Core/FormatUtilities.js"],Ct["Core/Globals.js"],Ct["Core/Utilities.js"]],function(wt,xt,jt){var zt=xt.deg2rad,Ut=jt.clamp,Rt=jt.correctFloat,It=jt.defined,K=jt.destroyObjectProperties,et=jt.extend,st=jt.fireEvent,R=jt.isNumber,I=jt.merge,A=jt.objectEach,x=jt.pick;return function(){function T(j,V,nt,w,l){this.isNewLabel=this.isNew=!0,this.axis=j,this.pos=V,this.type=nt||"",this.parameters=l||{},this.tickmarkOffset=this.parameters.tickmarkOffset,this.options=this.parameters.options,st(this,"init"),nt||w||this.addLabel()}return T.prototype.addLabel=function(){var j=this,V=j.axis,nt=V.options,w=V.chart,l=V.categories,it=V.logarithmic,N=V.names,G=j.pos,v=x(j.options&&j.options.labels,nt.labels),M=V.tickPositions,b=G===M[0],k=G===M[M.length-1],_=(!v.step||1===v.step)&&1===V.tickInterval;M=M.info;var O,y=j.label;if(l=this.parameters.category||(l?x(l[G],N[G],G):G),it&&R(l)&&(l=Rt(it.lin2log(l))),V.dateTime)if(M)var B=w.time.resolveDTLFormat(nt.dateTimeLabelFormats[!nt.grid&&M.higherRanks[G]||M.unitName]),H=B.main;else R(l)&&(H=V.dateTime.getXDateFormat(l,nt.dateTimeLabelFormats||{}));j.isFirst=b,j.isLast=k;var at={axis:V,chart:w,dateTimeLabelFormat:H,isFirst:b,isLast:k,pos:G,tick:j,tickPositionInfo:M,value:l};st(this,"labelFormat",at);var ft=function(z){return v.formatter?v.formatter.call(z,z):v.format?(z.text=V.defaultLabelFormatter.call(z,z),wt.format(v.format,z,w)):V.defaultLabelFormatter.call(z,z)};nt=ft.call(at,at);var rt=B&&B.list;j.shortenLabel=rt?function(){for(O=0;O<rt.length;O++)if(et(at,{dateTimeLabelFormat:rt[O]}),y.attr({text:ft.call(at,at)}),y.getBBox().width<V.getSlotWidth(j)-2*v.padding)return;y.attr({text:""})}:void 0,_&&V._addedPlotLB&&j.moveLabel(nt,v),It(y)||j.movedLabel?y&&y.textStr!==nt&&!_&&(!y.textWidth||v.style.width||y.styles.width||y.css({width:null}),y.attr({text:nt}),y.textPxLength=y.getBBox().width):(j.label=y=j.createLabel({x:0,y:0},nt,v),j.rotation=0)},T.prototype.createLabel=function(j,V,nt){var w=this.axis,l=w.chart;return(j=It(V)&&nt.enabled?l.renderer.text(V,j.x,j.y,nt.useHTML).add(w.labelGroup):null)&&(l.styledMode||j.css(I(nt.style)),j.textPxLength=j.getBBox().width),j},T.prototype.destroy=function(){K(this,this.axis)},T.prototype.getPosition=function(j,V,nt,w){var l=this.axis,it=l.chart,N=w&&it.oldChartHeight||it.chartHeight;return(j={x:j?Rt(l.translate(V+nt,void 0,void 0,w)+l.transB):l.left+l.offset+(l.opposite?(w&&it.oldChartWidth||it.chartWidth)-l.right-l.left:0),y:j?N-l.bottom+l.offset-(l.opposite?l.height:0):Rt(N-l.translate(V+nt,void 0,void 0,w)-l.transB)}).y=Ut(j.y,-1e5,1e5),st(this,"afterGetPosition",{pos:j}),j},T.prototype.getLabelPosition=function(j,V,nt,w,l,it,N,G){var v=this.axis,M=v.transA,b=v.isLinked&&v.linkedParent?v.linkedParent.reversed:v.reversed,k=v.staggerLines,_=v.tickRotCorr||{x:0,y:0},y=w||v.reserveSpaceDefault?0:-v.labelOffset*("center"===v.labelAlign?.5:1),O={};return nt=0===v.side?nt.rotation?-8:-nt.getBBox().height:2===v.side?_.y+8:Math.cos(nt.rotation*zt)*(_.y-nt.getBBox(!1,0).height/2),It(l.y)&&(nt=0===v.side&&v.horiz?l.y+nt:l.y),j=j+l.x+y+_.x-(it&&w?it*M*(b?-1:1):0),V=V+nt-(it&&!w?it*M*(b?1:-1):0),k&&(w=N/(G||1)%k,v.opposite&&(w=k-w-1),V+=v.labelOffset/k*w),O.x=j,O.y=Math.round(V),st(this,"afterGetLabelPosition",{pos:O,tickmarkOffset:it,index:N}),O},T.prototype.getLabelSize=function(){return this.label?this.label.getBBox()[this.axis.horiz?"height":"width"]:0},T.prototype.getMarkPath=function(j,V,nt,w,l,it){return it.crispLine([["M",j,V],["L",j+(l?0:-nt),V+(l?nt:0)]],w)},T.prototype.handleOverflow=function(j){var V=this.axis,nt=V.options.labels,w=j.x,l=V.chart.chartWidth,it=V.chart.spacing,N=x(V.labelLeft,Math.min(V.pos,it[3]));it=x(V.labelRight,Math.max(V.isRadial?0:V.pos+V.len,l-it[1]));var B,G=this.label,v=this.rotation,M={left:0,center:.5,right:1}[V.labelAlign||G.attr("align")],b=G.getBBox().width,k=V.getSlotWidth(this),_={},y=k,O=1;v||"justify"!==nt.overflow?0>v&&w-M*b<N?B=Math.round(w/Math.cos(v*zt)-N):0<v&&w+M*b>it&&(B=Math.round((l-w)/Math.cos(v*zt))):(l=w+(1-M)*b,w-M*b<N?y=j.x+y*(1-M)-N:l>it&&(y=it-j.x+y*M,O=-1),(y=Math.min(k,y))<k&&"center"===V.labelAlign&&(j.x+=O*(k-y-M*(k-Math.min(b,y)))),(b>y||V.autoRotation&&(G.styles||{}).width)&&(B=y)),B&&(this.shortenLabel?this.shortenLabel():(_.width=Math.floor(B)+"px",(nt.style||{}).textOverflow||(_.textOverflow="ellipsis"),G.css(_)))},T.prototype.moveLabel=function(j,V){var nt=this,w=nt.label,l=nt.axis,it=l.reversed,N=!1;if(w&&w.textStr===j?(nt.movedLabel=w,N=!0,delete nt.label):A(l.ticks,function(v){N||v.isNew||v===nt||!v.label||v.label.textStr!==j||(nt.movedLabel=v.label,N=!0,v.labelPos=nt.movedLabel.xy,delete v.label)}),!N&&(nt.labelPos||w)){var G=nt.labelPos||w.xy;nt.movedLabel=nt.createLabel({x:w=l.horiz?it?0:l.width+l.left:G.x,y:l=l.horiz?G.y:it?l.width+l.left:0},j,V),nt.movedLabel&&nt.movedLabel.attr({opacity:0})}},T.prototype.render=function(j,V,nt){var w=this.axis,l=w.horiz,it=this.pos,N=x(this.tickmarkOffset,w.tickmarkOffset);N=(it=this.getPosition(l,it,N,V)).x,w=l&&N===w.pos+w.len||!l&&it.y===w.pos?-1:1,l=x(nt,this.label&&this.label.newOpacity,1),nt=x(nt,1),this.isActive=!0,this.renderGridLine(V,nt,w),this.renderMark(it,nt,w),this.renderLabel(it,V,l,j),this.isNew=!1,st(this,"afterRender")},T.prototype.renderGridLine=function(j,V,nt){var w=this.axis,l=w.options,it={},N=this.pos,G=this.type,v=x(this.tickmarkOffset,w.tickmarkOffset),M=w.chart.renderer,b=this.gridLine,k=l.gridLineWidth,_=l.gridLineColor,y=l.gridLineDashStyle;"minor"===this.type&&(k=l.minorGridLineWidth,_=l.minorGridLineColor,y=l.minorGridLineDashStyle),b||(w.chart.styledMode||(it.stroke=_,it["stroke-width"]=k||0,it.dashstyle=y),G||(it.zIndex=1),j&&(V=0),this.gridLine=b=M.path().attr(it).addClass("highcharts-"+(G?G+"-":"")+"grid-line").add(w.gridGroup)),b&&(nt=w.getPlotLinePath({value:N+v,lineWidth:b.strokeWidth()*nt,force:"pass",old:j}))&&b[j||this.isNew?"attr":"animate"]({d:nt,opacity:V})},T.prototype.renderMark=function(j,V,nt){var w=this.axis,l=w.options,it=w.chart.renderer,N=this.type,G=w.tickSize(N?N+"Tick":"tick"),v=j.x;j=j.y;var M=x(l["minor"!==N?"tickWidth":"minorTickWidth"],!N&&w.isXAxis?1:0);l=l["minor"!==N?"tickColor":"minorTickColor"];var b=this.mark,k=!b;G&&(w.opposite&&(G[0]=-G[0]),b||(this.mark=b=it.path().addClass("highcharts-"+(N?N+"-":"")+"tick").add(w.axisGroup),w.chart.styledMode||b.attr({stroke:l,"stroke-width":M})),b[k?"attr":"animate"]({d:this.getMarkPath(v,j,G[0],b.strokeWidth()*nt,w.horiz,it),opacity:V}))},T.prototype.renderLabel=function(j,V,nt,w){var l=this.axis,it=l.horiz,N=l.options,G=this.label,v=N.labels,M=v.step;l=x(this.tickmarkOffset,l.tickmarkOffset);var b=j.x;j=j.y;var k=!0;G&&R(b)&&(G.xy=j=this.getLabelPosition(b,j,G,it,v,l,w,M),this.isFirst&&!this.isLast&&!N.showFirstLabel||this.isLast&&!this.isFirst&&!N.showLastLabel?k=!1:!it||v.step||v.rotation||V||0===nt||this.handleOverflow(j),M&&w%M&&(k=!1),k&&R(j.y)?(j.opacity=nt,G[this.isNewLabel?"attr":"animate"](j).show(!0),this.isNewLabel=!1):(G.hide(),this.isNewLabel=!0))},T.prototype.replaceMovedLabel=function(){var j=this.label,V=this.axis,nt=V.reversed;j&&!this.isNew&&(j.animate({x:V.horiz?nt?V.left:V.width+V.left:j.xy.x,y:nt=V.horiz?j.xy.y:nt?V.width+V.top:V.top,opacity:0},void 0,j.destroy),delete this.label),V.isDirty=!0,this.label=this.movedLabel,delete this.movedLabel},T}()}),te(Ct,"Core/Axis/Axis.js",[Ct["Core/Animation/AnimationUtilities.js"],Ct["Core/Axis/AxisDefaults.js"],Ct["Core/Color/Color.js"],Ct["Core/Defaults.js"],Ct["Core/Foundation.js"],Ct["Core/Globals.js"],Ct["Core/Axis/Tick.js"],Ct["Core/Utilities.js"]],function(wt,xt,jt,zt,Ut,Rt,It,K){var et=wt.animObject,st=zt.defaultOptions,R=Ut.registerEventOptions,I=Rt.deg2rad,A=K.arrayMax,x=K.arrayMin,T=K.clamp,j=K.correctFloat,V=K.defined,nt=K.destroyObjectProperties,w=K.erase,l=K.error,it=K.extend,N=K.fireEvent,G=K.isArray,v=K.isNumber,M=K.isString,b=K.merge,k=K.normalizeTickInterval,_=K.objectEach,y=K.pick,O=K.relativeLength,B=K.removeEvent,H=K.splat,at=K.syncTimeout,ft=function(rt,z){return k(z,void 0,void 0,y(rt.options.allowDecimals,.5>z||void 0!==rt.tickAmount),!!rt.tickAmount)};return function(){function rt(z,q){this.zoomEnabled=this.width=this.visible=this.userOptions=this.translationSlope=this.transB=this.transA=this.top=this.ticks=this.tickRotCorr=this.tickPositions=this.tickmarkOffset=this.tickInterval=this.tickAmount=this.side=this.series=this.right=this.positiveValuesOnly=this.pos=this.pointRangePadding=this.pointRange=this.plotLinesAndBandsGroups=this.plotLinesAndBands=this.paddedTicks=this.overlap=this.options=this.offset=this.names=this.minPixelPadding=this.minorTicks=this.minorTickInterval=this.min=this.maxLabelLength=this.max=this.len=this.left=this.labelFormatter=this.labelEdge=this.isLinked=this.height=this.hasVisibleSeries=this.hasNames=this.eventOptions=this.coll=this.closestPointRange=this.chart=this.bottom=this.alternateBands=void 0,this.init(z,q)}return rt.prototype.init=function(z,q){var mt=q.isX;this.chart=z,this.horiz=z.inverted&&!this.isZAxis?!mt:mt,this.isXAxis=mt,this.coll=this.coll||(mt?"xAxis":"yAxis"),N(this,"init",{userOptions:q}),this.opposite=y(q.opposite,this.opposite),this.side=y(q.side,this.side,this.horiz?this.opposite?0:2:this.opposite?1:3),this.setOptions(q);var pt=this.options,dt=pt.labels,Y=pt.type;this.userOptions=q,this.minPixelPadding=0,this.reversed=y(pt.reversed,this.reversed),this.visible=pt.visible,this.zoomEnabled=pt.zoomEnabled,this.hasNames="category"===Y||!0===pt.categories,this.categories=pt.categories||(this.hasNames?[]:void 0),this.names||(this.names=[],this.names.keys={}),this.plotLinesAndBandsGroups={},this.positiveValuesOnly=!!this.logarithmic,this.isLinked=V(pt.linkedTo),this.ticks={},this.labelEdge=[],this.minorTicks={},this.plotLinesAndBands=[],this.alternateBands={},this.len=0,this.minRange=this.userMinRange=pt.minRange||pt.maxZoom,this.range=pt.range,this.offset=pt.offset||0,this.min=this.max=null,q=y(pt.crosshair,H(z.options.tooltip.crosshairs)[mt?0:1]),this.crosshair=!0===q?{}:q,-1===z.axes.indexOf(this)&&(mt?z.axes.splice(z.xAxis.length,0,this):z.axes.push(this),z[this.coll].push(this)),this.series=this.series||[],z.inverted&&!this.isZAxis&&mt&&typeof this.reversed>"u"&&(this.reversed=!0),this.labelRotation=v(dt.rotation)?dt.rotation:void 0,R(this,pt),N(this,"afterInit")},rt.prototype.setOptions=function(z){this.options=b(xt.defaultXAxisOptions,"yAxis"===this.coll&&xt.defaultYAxisOptions,[xt.defaultTopAxisOptions,xt.defaultRightAxisOptions,xt.defaultBottomAxisOptions,xt.defaultLeftAxisOptions][this.side],b(st[this.coll],z)),N(this,"afterSetOptions",{userOptions:z})},rt.prototype.defaultLabelFormatter=function(z){var q=this.axis;z=this.chart.numberFormatter;var mt=v(this.value)?this.value:NaN,pt=q.chart.time,dt=this.dateTimeLabelFormat,Y=st.lang,lt=Y.numericSymbols;Y=Y.numericSymbolMagnitude||1e3;var ht=q.logarithmic?Math.abs(mt):q.tickInterval,Lt=lt&&lt.length;if(q.categories)var At="".concat(this.value);else if(dt)At=pt.dateFormat(dt,mt);else if(Lt&&1e3<=ht)for(;Lt--&&typeof At>"u";)ht>=(q=Math.pow(Y,Lt+1))&&10*mt%q==0&&null!==lt[Lt]&&0!==mt&&(At=z(mt/q,-1)+lt[Lt]);return typeof At>"u"&&(At=1e4<=Math.abs(mt)?z(mt,-1):z(mt,-1,void 0,"")),At},rt.prototype.getSeriesExtremes=function(){var mt,z=this,q=z.chart;N(this,"getSeriesExtremes",null,function(){z.hasVisibleSeries=!1,z.dataMin=z.dataMax=z.threshold=null,z.softThreshold=!z.isXAxis,z.stacking&&z.stacking.buildStacks(),z.series.forEach(function(pt){if(pt.visible||!q.options.chart.ignoreHiddenSeries){var dt=pt.options,Y=dt.threshold;if(z.hasVisibleSeries=!0,z.positiveValuesOnly&&0>=Y&&(Y=null),z.isXAxis){if((dt=pt.xData).length){dt=z.logarithmic?dt.filter(z.validatePositiveValue):dt;var lt=(mt=pt.getXExtremes(dt)).min,ht=mt.max;v(lt)||lt instanceof Date||(dt=dt.filter(v),lt=(mt=pt.getXExtremes(dt)).min,ht=mt.max),dt.length&&(z.dataMin=Math.min(y(z.dataMin,lt),lt),z.dataMax=Math.max(y(z.dataMax,ht),ht))}}else pt=pt.applyExtremes(),v(pt.dataMin)&&(lt=pt.dataMin,z.dataMin=Math.min(y(z.dataMin,lt),lt)),v(pt.dataMax)&&(ht=pt.dataMax,z.dataMax=Math.max(y(z.dataMax,ht),ht)),V(Y)&&(z.threshold=Y),(!dt.softThreshold||z.positiveValuesOnly)&&(z.softThreshold=!1)}})}),N(this,"afterGetSeriesExtremes")},rt.prototype.translate=function(z,q,mt,pt,dt,Y){var lt=this.linkedParent||this,ht=pt&&lt.old?lt.old.min:lt.min;if(!v(ht))return NaN;var Lt=lt.minPixelPadding;dt=(lt.isOrdinal||lt.brokenAxis&&lt.brokenAxis.hasBreaks||lt.logarithmic&&dt)&&lt.lin2val;var At=1,Wt=0;return(pt=pt&&lt.old?lt.old.transA:lt.transA)||(pt=lt.transA),mt&&(At*=-1,Wt=lt.len),lt.reversed&&(Wt-=(At*=-1)*(lt.sector||lt.len)),q?(Y=(z*At+Wt-Lt)/pt+ht,dt&&(Y=lt.lin2val(Y))):(dt&&(z=lt.val2lin(z)),z=At*(z-ht)*pt,Y=(lt.isRadial?z:j(z))+Wt+At*Lt+(v(Y)?pt*Y:0)),Y},rt.prototype.toPixels=function(z,q){return this.translate(z,!1,!this.horiz,void 0,!0)+(q?0:this.pos)},rt.prototype.toValue=function(z,q){return this.translate(z-(q?0:this.pos),!0,!this.horiz,void 0,!0)},rt.prototype.getPlotLinePath=function(z){function q(me,qt,Kt){return("pass"!==_e&&me<qt||me>Kt)&&(_e?me=T(me,qt,Kt):Me=!0),me}var We,He,Fe,pe,Me,mt=this,pt=mt.chart,dt=mt.left,Y=mt.top,lt=z.old,ht=z.value,Lt=z.lineWidth,At=lt&&pt.oldChartHeight||pt.chartHeight,Wt=lt&&pt.oldChartWidth||pt.chartWidth,Ot=mt.transB,se=z.translatedValue,_e=z.force;return N(this,"getPlotLinePath",z={value:ht,lineWidth:Lt,old:lt,force:_e,acrossPanes:z.acrossPanes,translatedValue:se},function(me){se=y(se,mt.translate(ht,void 0,void 0,lt)),se=T(se,-1e5,1e5),We=Fe=Math.round(se+Ot),He=pe=Math.round(At-se-Ot),v(se)?mt.horiz?(He=Y,pe=At-mt.bottom,We=Fe=q(We,dt,dt+mt.width)):(We=dt,Fe=Wt-mt.right,He=pe=q(He,Y,Y+mt.height)):(Me=!0,_e=!1),me.path=Me&&!_e?null:pt.renderer.crispLine([["M",We,He],["L",Fe,pe]],Lt||1)}),z.path},rt.prototype.getLinearTickPositions=function(z,q,mt){var pt=j(Math.floor(q/z)*z);mt=j(Math.ceil(mt/z)*z);var Y,dt=[];if(j(pt+z)===pt&&(Y=20),this.single)return[q];for(q=pt;q<=mt&&(dt.push(q),(q=j(q+z,Y))!==lt);)var lt=q;return dt},rt.prototype.getMinorTickInterval=function(){var z=this.options;return!0===z.minorTicks?y(z.minorTickInterval,"auto"):!1===z.minorTicks?null:z.minorTickInterval},rt.prototype.getMinorTickPositions=function(){var z=this.options,q=this.tickPositions,mt=this.minorTickInterval,pt=this.pointRangePadding||0,dt=this.min-pt,Y=(pt=this.max+pt)-dt,lt=[];if(Y&&Y/mt<this.len/3){var ht=this.logarithmic;if(ht)this.paddedTicks.forEach(function(Lt,At,Wt){At&&lt.push.apply(lt,ht.getLogTickPositions(mt,Wt[At-1],Wt[At],!0))});else if(this.dateTime&&"auto"===this.getMinorTickInterval())lt=lt.concat(this.getTimeTicks(this.dateTime.normalizeTimeTickInterval(mt),dt,pt,z.startOfWeek));else for(z=dt+(q[0]-dt)%mt;z<=pt&&z!==lt[0];z+=mt)lt.push(z)}return 0!==lt.length&&this.trimTicks(lt),lt},rt.prototype.adjustForMinRange=function(){var Y,lt,ht,Lt,z=this.options,q=this.logarithmic,mt=this.min,pt=this.max,dt=0;if(this.isXAxis&&typeof this.minRange>"u"&&!q&&(V(z.min)||V(z.max)||V(z.floor)||V(z.ceiling)?this.minRange=null:(this.series.forEach(function(se){if(ht=se.xData,Lt=se.xIncrement?1:ht.length-1,1<ht.length)for(Y=Lt;0<Y;Y--)lt=ht[Y]-ht[Y-1],(!dt||lt<dt)&&(dt=lt)}),this.minRange=Math.min(5*dt,this.dataMax-this.dataMin))),pt-mt<this.minRange){var At=this.dataMax-this.dataMin>=this.minRange,Wt=this.minRange,Ot=(Wt-pt+mt)/2;Ot=[mt-Ot,y(z.min,mt-Ot)],At&&(Ot[2]=this.logarithmic?this.logarithmic.log2lin(this.dataMin):this.dataMin),pt=[(mt=A(Ot))+Wt,y(z.max,mt+Wt)],At&&(pt[2]=q?q.log2lin(this.dataMax):this.dataMax),(pt=x(pt))-mt<Wt&&(Ot[0]=pt-Wt,Ot[1]=y(z.min,pt-Wt),mt=A(Ot))}this.min=mt,this.max=pt},rt.prototype.getClosest=function(){var z;return this.categories?z=1:this.series.forEach(function(q){var mt=q.closestPointRange,pt=q.visible||!q.chart.options.chart.ignoreHiddenSeries;!q.noSharedTooltip&&V(mt)&&pt&&(z=V(z)?Math.min(z,mt):mt)}),z},rt.prototype.nameToX=function(z){var q=G(this.options.categories),mt=q?this.categories:this.names,pt=z.options.x;if(z.series.requireSorting=!1,V(pt)||(pt=this.options.uniqueNames&&mt?q?mt.indexOf(z.name):y(mt.keys[z.name],-1):z.series.autoIncrement()),-1===pt){if(!q&&mt)var dt=mt.length}else dt=pt;return typeof dt<"u"?(this.names[dt]=z.name,this.names.keys[z.name]=dt):z.x&&(dt=z.x),dt},rt.prototype.updateNames=function(){var z=this,q=this.names;0<q.length&&(Object.keys(q.keys).forEach(function(mt){delete q.keys[mt]}),q.length=0,this.minRange=this.userMinRange,(this.series||[]).forEach(function(mt){mt.xIncrement=null,(!mt.points||mt.isDirtyData)&&(z.max=Math.max(z.max,mt.xData.length-1),mt.processData(),mt.generatePoints()),mt.data.forEach(function(pt,dt){if(pt&&pt.options&&typeof pt.name<"u"){var Y=z.nameToX(pt);typeof Y<"u"&&Y!==pt.x&&(pt.x=Y,mt.xData[dt]=Y)}})}))},rt.prototype.setAxisTranslation=function(){var Lt,z=this,q=z.max-z.min,mt=z.linkedParent,pt=!!z.categories,dt=z.isXAxis,Y=z.axisPointRange||0,lt=0,ht=0;if(dt||pt||Y){var At=z.getClosest();mt?(lt=mt.minPointOffset,ht=mt.pointRangePadding):z.series.forEach(function(Wt){var Ot=pt?1:dt?y(Wt.options.pointRange,At,0):z.axisPointRange||0,se=Wt.options.pointPlacement;Y=Math.max(Y,Ot),(!z.single||pt)&&(Wt=Wt.is("xrange")?!dt:dt,lt=Math.max(lt,Wt&&M(se)?0:Ot/2),ht=Math.max(ht,Wt&&"on"===se?0:Ot))}),z.minPointOffset=lt*=mt=z.ordinal&&z.ordinal.slope&&At?z.ordinal.slope/At:1,z.pointRangePadding=ht*=mt,z.pointRange=Math.min(Y,z.single&&pt?1:q),dt&&(z.closestPointRange=At)}z.translationSlope=z.transA=Lt=z.staticScale||z.len/(q+ht||1),z.transB=z.horiz?z.left:z.bottom,z.minPixelPadding=Lt*lt,N(this,"afterSetAxisTranslation")},rt.prototype.minFromRange=function(){return this.max-this.range},rt.prototype.setTickInterval=function(z){var q=this.chart,mt=this.logarithmic,pt=this.options,dt=this.isXAxis,Y=this.isLinked,lt=pt.tickPixelInterval,ht=this.categories,Lt=this.softThreshold,At=pt.maxPadding,Wt=pt.minPadding,Ot=v(pt.tickInterval)&&0<=pt.tickInterval?pt.tickInterval:void 0,se=v(this.threshold)?this.threshold:null;this.dateTime||ht||Y||this.getTickAmount();var _e=y(this.userMin,pt.min),We=y(this.userMax,pt.max);if(Y){this.linkedParent=q[this.coll][pt.linkedTo];var He=this.linkedParent.getExtremes();this.min=y(He.min,He.dataMin),this.max=y(He.max,He.dataMax),pt.type!==this.linkedParent.options.type&&l(11,1,q)}else{if(Lt&&V(se))if(this.dataMin>=se)He=se,Wt=0;else if(this.dataMax<=se){var Fe=se;At=0}this.min=y(_e,He,this.dataMin),this.max=y(We,Fe,this.dataMax)}if(mt&&(this.positiveValuesOnly&&!z&&0>=Math.min(this.min,y(this.dataMin,this.min))&&l(10,1,q),this.min=j(mt.log2lin(this.min),16),this.max=j(mt.log2lin(this.max),16)),this.range&&V(this.max)&&(this.userMin=this.min=_e=Math.max(this.dataMin,this.minFromRange()),this.userMax=We=this.max,this.range=null),N(this,"foundExtremes"),this.beforePadding&&this.beforePadding(),this.adjustForMinRange(),!(ht||this.axisPointRange||this.stacking&&this.stacking.usePercentage||Y)&&V(this.min)&&V(this.max)&&(q=this.max-this.min)&&(!V(_e)&&Wt&&(this.min-=q*Wt),!V(We)&&At&&(this.max+=q*At)),v(this.userMin)||(v(pt.softMin)&&pt.softMin<this.min&&(this.min=_e=pt.softMin),v(pt.floor)&&(this.min=Math.max(this.min,pt.floor))),v(this.userMax)||(v(pt.softMax)&&pt.softMax>this.max&&(this.max=We=pt.softMax),v(pt.ceiling)&&(this.max=Math.min(this.max,pt.ceiling))),Lt&&V(this.dataMin)&&(se=se||0,!V(_e)&&this.min<se&&this.dataMin>=se?this.min=this.options.minRange?Math.min(se,this.max-this.minRange):se:!V(We)&&this.max>se&&this.dataMax<=se&&(this.max=this.options.minRange?Math.max(se,this.min+this.minRange):se)),v(this.min)&&v(this.max)&&!this.chart.polar&&this.min>this.max&&(V(this.options.min)?this.max=this.min:V(this.options.max)&&(this.min=this.max)),this.tickInterval=this.min===this.max||typeof this.min>"u"||typeof this.max>"u"?1:Y&&this.linkedParent&&!Ot&&lt===this.linkedParent.options.tickPixelInterval?Ot=this.linkedParent.tickInterval:y(Ot,this.tickAmount?(this.max-this.min)/Math.max(this.tickAmount-1,1):void 0,ht?1:(this.max-this.min)*lt/Math.max(this.len,lt)),dt&&!z){var pe=this.min!==(this.old&&this.old.min)||this.max!==(this.old&&this.old.max);this.series.forEach(function(Me){Me.forceCrop=Me.forceCropping&&Me.forceCropping(),Me.processData(pe)}),N(this,"postProcessData",{hasExtremesChanged:pe})}this.setAxisTranslation(),N(this,"initialAxisTranslation"),this.pointRange&&!Ot&&(this.tickInterval=Math.max(this.pointRange,this.tickInterval)),z=y(pt.minTickInterval,this.dateTime&&!this.series.some(function(Me){return Me.noSharedTooltip})?this.closestPointRange:0),!Ot&&this.tickInterval<z&&(this.tickInterval=z),this.dateTime||this.logarithmic||Ot||(this.tickInterval=ft(this,this.tickInterval)),this.tickAmount||(this.tickInterval=this.unsquish()),this.setTickPositions()},rt.prototype.setTickPositions=function(){var ht,z=this.options,q=z.tickPositions,mt=z.tickPositioner,pt=this.getMinorTickInterval(),dt=this.hasVerticalPanning(),Y="colorAxis"===this.coll,lt=(Y||!dt)&&z.startOnTick;if(dt=(Y||!dt)&&z.endOnTick,Y=[],this.tickmarkOffset=this.categories&&"between"===z.tickmarkPlacement&&1===this.tickInterval?.5:0,this.minorTickInterval="auto"===pt&&this.tickInterval?this.tickInterval/5:pt,this.single=this.min===this.max&&V(this.min)&&!this.tickAmount&&(parseInt(this.min,10)===this.min||!1!==z.allowDecimals),q)Y=q.slice();else if(v(this.min)&&v(this.max)){if(this.ordinal&&this.ordinal.positions||!((this.max-this.min)/this.tickInterval>Math.max(2*this.len,200)))if(this.dateTime)Y=this.getTimeTicks(this.dateTime.normalizeTimeTickInterval(this.tickInterval,z.units),this.min,this.max,z.startOfWeek,this.ordinal&&this.ordinal.positions,this.closestPointRange,!0);else if(this.logarithmic)Y=this.logarithmic.getLogTickPositions(this.tickInterval,this.min,this.max);else for(pt=z=this.tickInterval;pt<=2*z&&(Y=this.getLinearTickPositions(this.tickInterval,this.min,this.max),this.tickAmount&&Y.length>this.tickAmount);)this.tickInterval=ft(this,pt*=1.1);else Y=[this.min,this.max],l(19,!1,this.chart);Y.length>this.len&&(Y=[Y[0],Y[Y.length-1]])[0]===Y[1]&&(Y.length=1),mt&&(this.tickPositions=Y,(ht=mt.apply(this,[this.min,this.max]))&&(Y=ht))}this.tickPositions=Y,this.paddedTicks=Y.slice(0),this.trimTicks(Y,lt,dt),!this.isLinked&&v(this.min)&&v(this.max)&&(this.single&&2>Y.length&&!this.categories&&!this.series.some(function(Lt){return Lt.is("heatmap")&&"between"===Lt.options.pointPlacement})&&(this.min-=.5,this.max+=.5),q||ht||this.adjustTickAmount()),N(this,"afterSetTickPositions")},rt.prototype.trimTicks=function(z,q,mt){var pt=z[0],dt=z[z.length-1],Y=!this.isOrdinal&&this.minPointOffset||0;if(N(this,"trimTicks"),!this.isLinked){if(q&&pt!==-1/0)this.min=pt;else for(;this.min-Y>z[0];)z.shift();if(mt)this.max=dt;else for(;this.max+Y<z[z.length-1];)z.pop();0===z.length&&V(pt)&&!this.options.tickPositions&&z.push((dt+pt)/2)}},rt.prototype.alignToOthers=function(){var Y,z=this,q=[this],mt=z.options,pt="yAxis"===this.coll&&this.chart.options.chart.alignThresholds,dt=[];if(z.thresholdAlignment=void 0,(!1!==this.chart.options.chart.alignTicks&&mt.alignTicks||pt)&&!1!==mt.startOnTick&&!1!==mt.endOnTick&&!z.logarithmic){var lt=function(At){var Wt=At.options;return[At.horiz?Wt.left:Wt.top,Wt.width,Wt.height,Wt.pane].join()},ht=lt(this);this.chart[this.coll].forEach(function(At){var Wt=At.series;Wt.length&&Wt.some(function(Ot){return Ot.visible})&&At!==z&&lt(At)===ht&&(Y=!0,q.push(At))})}if(Y&&pt){q.forEach(function(At){At=At.getThresholdAlignment(z),v(At)&&dt.push(At)});var Lt=1<dt.length?dt.reduce(function(At,Wt){return At+Wt},0)/dt.length:void 0;q.forEach(function(At){At.thresholdAlignment=Lt})}return Y},rt.prototype.getThresholdAlignment=function(z){if((!v(this.dataMin)||this!==z&&this.series.some(function(q){return q.isDirty||q.isDirtyData}))&&this.getSeriesExtremes(),v(this.threshold))return z=T((this.threshold-(this.dataMin||0))/((this.dataMax||0)-(this.dataMin||0)),0,1),this.options.reversed&&(z=1-z),z},rt.prototype.getTickAmount=function(){var z=this.options,q=z.tickPixelInterval,mt=z.tickAmount;!V(z.tickInterval)&&!mt&&this.len<q&&!this.isRadial&&!this.logarithmic&&z.startOnTick&&z.endOnTick&&(mt=2),!mt&&this.alignToOthers()&&(mt=Math.ceil(this.len/q)+1),4>mt&&(this.finalTickAmt=mt,mt=5),this.tickAmount=mt},rt.prototype.adjustTickAmount=function(){var z=this,q=z.finalTickAmt,mt=z.max,pt=z.min,dt=z.options,Y=z.tickPositions,lt=z.tickAmount,ht=z.thresholdAlignment,Lt=Y&&Y.length,At=y(z.threshold,z.softThreshold?0:null),Wt=z.tickInterval;if(v(ht)){var Ot=.5>ht?Math.ceil(ht*(lt-1)):Math.floor(ht*(lt-1));dt.reversed&&(Ot=lt-1-Ot)}if(z.hasData()&&v(pt)&&v(mt)){if(ht=function(){z.transA*=(Lt-1)/(lt-1),z.min=dt.startOnTick?Y[0]:Math.min(pt,Y[0]),z.max=dt.endOnTick?Y[Y.length-1]:Math.max(mt,Y[Y.length-1])},v(Ot)&&v(z.threshold)){for(;Y[Ot]!==At||Y.length!==lt||Y[0]>pt||Y[Y.length-1]<mt;){for(Y.length=0,Y.push(z.threshold);Y.length<lt;)void 0===Y[Ot]||Y[Ot]>z.threshold?Y.unshift(j(Y[0]-Wt)):Y.push(j(Y[Y.length-1]+Wt));if(Wt>8*z.tickInterval)break;Wt*=2}ht()}else if(Lt<lt){for(;Y.length<lt;)Y.length%2||pt===At?Y.push(j(Y[Y.length-1]+Wt)):Y.unshift(j(Y[0]-Wt));ht()}if(V(q)){for(Wt=At=Y.length;Wt--;)(3===q&&Wt%2==1||2>=q&&0<Wt&&Wt<At-1)&&Y.splice(Wt,1);z.finalTickAmt=void 0}}},rt.prototype.setScale=function(){var z=!1,q=!1;this.series.forEach(function(pt){z=z||pt.isDirtyData||pt.isDirty,q=q||pt.xAxis&&pt.xAxis.isDirty||!1}),this.setAxisSize();var mt=this.len!==(this.old&&this.old.len);mt||z||q||this.isLinked||this.forceRedraw||this.userMin!==(this.old&&this.old.userMin)||this.userMax!==(this.old&&this.old.userMax)||this.alignToOthers()?(this.stacking&&this.stacking.resetStacks(),this.forceRedraw=!1,this.getSeriesExtremes(),this.setTickInterval(),this.isDirty||(this.isDirty=mt||this.min!==(this.old&&this.old.min)||this.max!==(this.old&&this.old.max))):this.stacking&&this.stacking.cleanStacks(),z&&this.panningState&&(this.panningState.isDirty=!0),N(this,"afterSetScale")},rt.prototype.setExtremes=function(z,q,mt,pt,dt){var Y=this,lt=Y.chart;mt=y(mt,!0),Y.series.forEach(function(ht){delete ht.kdTree}),dt=it(dt,{min:z,max:q}),N(Y,"setExtremes",dt,function(){Y.userMin=z,Y.userMax=q,Y.eventArgs=dt,mt&&lt.redraw(pt)})},rt.prototype.zoom=function(z,q){var mt=this,pt=this.dataMin,dt=this.dataMax,Y=this.options,lt=Math.min(pt,y(Y.min,pt)),ht=Math.max(dt,y(Y.max,dt));return N(this,"zoom",z={newMin:z,newMax:q},function(Lt){var At=Lt.newMin,Wt=Lt.newMax;(At!==mt.min||Wt!==mt.max)&&(mt.allowZoomOutside||(V(pt)&&(At<lt&&(At=lt),At>ht&&(At=ht)),V(dt)&&(Wt<lt&&(Wt=lt),Wt>ht&&(Wt=ht))),mt.displayBtn=typeof At<"u"||typeof Wt<"u",mt.setExtremes(At,Wt,!1,void 0,{trigger:"zoom"})),Lt.zoomed=!0}),z.zoomed},rt.prototype.setAxisSize=function(){var z=this.chart,q=this.options,mt=q.offsets||[0,0,0,0],pt=this.horiz,dt=this.width=Math.round(O(y(q.width,z.plotWidth-mt[3]+mt[1]),z.plotWidth)),Y=this.height=Math.round(O(y(q.height,z.plotHeight-mt[0]+mt[2]),z.plotHeight)),lt=this.top=Math.round(O(y(q.top,z.plotTop+mt[0]),z.plotHeight,z.plotTop));q=this.left=Math.round(O(y(q.left,z.plotLeft+mt[3]),z.plotWidth,z.plotLeft)),this.bottom=z.chartHeight-Y-lt,this.right=z.chartWidth-dt-q,this.len=Math.max(pt?dt:Y,0),this.pos=pt?q:lt},rt.prototype.getExtremes=function(){var z=this.logarithmic;return{min:z?j(z.lin2log(this.min)):this.min,max:z?j(z.lin2log(this.max)):this.max,dataMin:this.dataMin,dataMax:this.dataMax,userMin:this.userMin,userMax:this.userMax}},rt.prototype.getThreshold=function(z){var q=this.logarithmic,mt=q?q.lin2log(this.min):this.min;return q=q?q.lin2log(this.max):this.max,null===z||z===-1/0?z=mt:z===1/0?z=q:mt>z?z=mt:q<z&&(z=q),this.translate(z,0,1,0,1)},rt.prototype.autoLabelAlign=function(z){var q=(y(z,0)-90*this.side+720)%360;return N(this,"autoLabelAlign",z={align:"center"},function(mt){15<q&&165>q?mt.align="right":195<q&&345>q&&(mt.align="left")}),z.align},rt.prototype.tickSize=function(z){var q=this.options,mt=y(q["tick"===z?"tickWidth":"minorTickWidth"],"tick"===z&&this.isXAxis&&!this.categories?1:0),pt=q["tick"===z?"tickLength":"minorTickLength"];if(mt&&pt){"inside"===q[z+"Position"]&&(pt=-pt);var dt=[pt,mt]}return N(this,"afterTickSize",z={tickSize:dt}),z.tickSize},rt.prototype.labelMetrics=function(){var z=this.tickPositions&&this.tickPositions[0]||0;return this.chart.renderer.fontMetrics(this.options.labels.style.fontSize,this.ticks[z]&&this.ticks[z].label)},rt.prototype.unsquish=function(){var z=this.options.labels,q=this.horiz,mt=this.tickInterval,pt=this.len/(((this.categories?1:0)+this.max-this.min)/mt),dt=z.rotation,Y=this.labelMetrics(),lt=Math.max(this.max-this.min,0),ht=function(Fe){var pe=Fe/(pt||1);return(pe=1<pe?Math.ceil(pe):1)*mt>lt&&Fe!==1/0&&pt!==1/0&&lt&&(pe=Math.ceil(lt/mt)),j(pe*mt)},Lt=mt,At=Number.MAX_VALUE;if(q){if(!z.staggerLines)if(v(dt))var Wt=[dt];else pt<z.autoRotationLimit&&(Wt=z.autoRotation);if(Wt)for(var Ot=q=void 0,se=0,_e=Wt;se<_e.length;se++){var We=_e[se];if((We===dt||We&&-90<=We&&90>=We)&&(Ot=(q=ht(Math.abs(Y.h/Math.sin(I*We))))+Math.abs(We/360))<At){At=Ot;var He=We;Lt=q}}}else Lt=ht(Y.h);return this.autoRotation=Wt,this.labelRotation=y(He,v(dt)?dt:0),z.step?mt:Lt},rt.prototype.getSlotWidth=function(z){var q=this.chart,mt=this.horiz,pt=this.options.labels,dt=Math.max(this.tickPositions.length-(this.categories?0:1),1),Y=q.margin[3];if(z&&v(z.slotWidth))return z.slotWidth;if(mt&&2>pt.step)return pt.rotation?0:(this.staggerLines||1)*this.len/dt;if(!mt){if(void 0!==(z=pt.style.width))return parseInt(String(z),10);if(Y)return Y-q.spacing[3]}return.33*q.chartWidth},rt.prototype.renderUnsquish=function(){var z=this.chart,q=z.renderer,mt=this.tickPositions,pt=this.ticks,dt=this.options.labels,Y=dt.style,lt=this.horiz,ht=this.getSlotWidth(),Lt=Math.max(1,Math.round(ht-2*dt.padding)),At={},Wt=this.labelMetrics(),Ot=Y.textOverflow,se=0;if(M(dt.rotation)||(At.rotation=dt.rotation||0),mt.forEach(function(Fe){(Fe=pt[Fe]).movedLabel&&Fe.replaceMovedLabel(),Fe&&Fe.label&&Fe.label.textPxLength>se&&(se=Fe.label.textPxLength)}),this.maxLabelLength=se,this.autoRotation)se>Lt&&se>Wt.h?At.rotation=this.labelRotation:this.labelRotation=0;else if(ht){var _e=Lt;if(!Ot){var We="clip";for(Lt=mt.length;!lt&&Lt--;){var He=mt[Lt];(He=pt[He].label)&&(He.styles&&"ellipsis"===He.styles.textOverflow?He.css({textOverflow:"clip"}):He.textPxLength>ht&&He.css({width:ht+"px"}),He.getBBox().height>this.len/mt.length-(Wt.h-Wt.f)&&(He.specificTextOverflow="ellipsis"))}}}At.rotation&&(_e=se>.5*z.chartHeight?.33*z.chartHeight:se,Ot||(We="ellipsis")),(this.labelAlign=dt.align||this.autoLabelAlign(this.labelRotation))&&(At.align=this.labelAlign),mt.forEach(function(Fe){var pe=(Fe=pt[Fe])&&Fe.label,Me=Y.width,me={};pe&&(pe.attr(At),Fe.shortenLabel?Fe.shortenLabel():_e&&!Me&&"nowrap"!==Y.whiteSpace&&(_e<pe.textPxLength||"SPAN"===pe.element.tagName)?(me.width=_e+"px",Ot||(me.textOverflow=pe.specificTextOverflow||We),pe.css(me)):pe.styles&&pe.styles.width&&!me.width&&!Me&&pe.css({width:null}),delete pe.specificTextOverflow,Fe.rotation=At.rotation)},this),this.tickRotCorr=q.rotCorr(Wt.b,this.labelRotation||0,0!==this.side)},rt.prototype.hasData=function(){return this.series.some(function(z){return z.hasData()})||this.options.showEmpty&&V(this.min)&&V(this.max)},rt.prototype.addTitle=function(z){var lt,pt=this.opposite,dt=this.options.title,Y=this.chart.styledMode;this.axisTitle||((lt=dt.textAlign)||(lt=(this.horiz?{low:"left",middle:"center",high:"right"}:{low:pt?"right":"left",middle:"center",high:pt?"left":"right"})[dt.align]),this.axisTitle=this.chart.renderer.text(dt.text||"",0,0,dt.useHTML).attr({zIndex:7,rotation:dt.rotation,align:lt}).addClass("highcharts-axis-title"),Y||this.axisTitle.css(b(dt.style)),this.axisTitle.add(this.axisGroup),this.axisTitle.isNew=!0),Y||dt.style.width||this.isRadial||this.axisTitle.css({width:this.len+"px"}),this.axisTitle[z?"show":"hide"](z)},rt.prototype.generateTick=function(z){var q=this.ticks;q[z]?q[z].addLabel():q[z]=new It(this,z)},rt.prototype.getOffset=function(){var z=this,q=this,mt=q.chart,pt=q.horiz,dt=q.options,Y=q.side,lt=q.ticks,ht=q.tickPositions,Lt=q.coll,At=q.axisParent,Wt=mt.renderer,Ot=mt.inverted&&!q.isZAxis?[1,0,3,2][Y]:Y,se=q.hasData(),_e=dt.title,We=dt.labels,He=mt.axisOffset;mt=mt.clipOffset;var Me,Fe=[-1,1,1,-1][Y],pe=dt.className,me=0,qt=0,Kt=0;if(q.showAxis=Me=se||dt.showEmpty,q.staggerLines=q.horiz&&We.staggerLines||void 0,!q.axisGroup){var xe=function(Te,ye,oi){return Wt.g(Te).attr({zIndex:oi}).addClass("highcharts-".concat(Lt.toLowerCase()).concat(ye," ")+(z.isRadial?"highcharts-radial-axis".concat(ye," "):"")+(pe||"")).add(At)};q.gridGroup=xe("grid","-grid",dt.gridZIndex),q.axisGroup=xe("axis","",dt.zIndex),q.labelGroup=xe("axis-labels","-labels",We.zIndex)}if(se||q.isLinked?(ht.forEach(function(Te){q.generateTick(Te)}),q.renderUnsquish(),q.reserveSpaceDefault=0===Y||2===Y||{1:"left",3:"right"}[Y]===q.labelAlign,y(We.reserveSpace,"center"===q.labelAlign||null,q.reserveSpaceDefault)&&ht.forEach(function(Te){Kt=Math.max(lt[Te].getLabelSize(),Kt)}),q.staggerLines&&(Kt*=q.staggerLines),q.labelOffset=Kt*(q.opposite?-1:1)):_(lt,function(Te,ye){Te.destroy(),delete lt[ye]}),_e&&_e.text&&!1!==_e.enabled&&(q.addTitle(Me),Me&&!1!==_e.reserveSpace)){q.titleOffset=me=q.axisTitle.getBBox()[pt?"height":"width"];var be=_e.offset;qt=V(be)?0:y(_e.margin,pt?5:10)}q.renderLine(),q.offset=Fe*y(dt.offset,He[Y]?He[Y]+(dt.margin||0):0),q.tickRotCorr=q.tickRotCorr||{x:0,y:0},_e=0===Y?-q.labelMetrics().h:2===Y?q.tickRotCorr.y:0,se=Math.abs(Kt)+qt,Kt&&(se=se-_e+Fe*(pt?y(We.y,q.tickRotCorr.y+8*Fe):We.x)),q.axisTitleMargin=y(be,se),q.getMaxLabelDimensions&&(q.maxLabelDimensions=q.getMaxLabelDimensions(lt,ht)),"colorAxis"!==Lt&&(pt=this.tickSize("tick"),He[Y]=Math.max(He[Y],(q.axisTitleMargin||0)+me+Fe*q.offset,se,ht&&ht.length&&pt?pt[0]+Fe*q.offset:0),dt=!q.axisLine||dt.offset?0:2*Math.floor(q.axisLine.strokeWidth()/2),mt[Ot]=Math.max(mt[Ot],dt)),N(this,"afterGetOffset")},rt.prototype.getLinePath=function(z){var q=this.chart,mt=this.opposite,pt=this.offset,dt=this.horiz,Y=this.left+(mt?this.width:0)+pt;return pt=q.chartHeight-this.bottom-(mt?this.height:0)+pt,mt&&(z*=-1),q.renderer.crispLine([["M",dt?this.left:Y,dt?pt:this.top],["L",dt?q.chartWidth-this.right:Y,dt?pt:q.chartHeight-this.bottom]],z)},rt.prototype.renderLine=function(){this.axisLine||(this.axisLine=this.chart.renderer.path().addClass("highcharts-axis-line").add(this.axisGroup),this.chart.styledMode||this.axisLine.attr({stroke:this.options.lineColor,"stroke-width":this.options.lineWidth,zIndex:7}))},rt.prototype.getTitlePosition=function(){var z=this.horiz,q=this.left,mt=this.top,pt=this.len,dt=this.options.title,Y=z?q:mt,lt=this.opposite,ht=this.offset,Lt=dt.x,At=dt.y,Wt=this.axisTitle,Ot=this.chart.renderer.fontMetrics(dt.style.fontSize,Wt);return Wt=Wt?Math.max(Wt.getBBox(!1,0).height-Ot.h-1,0):0,pt={low:Y+(z?0:pt),middle:Y+pt/2,high:Y+(z?pt:0)}[dt.align],q=(z?mt+this.height:q)+(z?1:-1)*(lt?-1:1)*(this.axisTitleMargin||0)+[-Wt,Wt,Ot.f,-Wt][this.side],N(this,"afterGetTitlePosition",{titlePosition:z={x:z?pt+Lt:q+(lt?this.width:0)+ht+Lt,y:z?q+At-(lt?this.height:0)+ht:pt+At}}),z},rt.prototype.renderMinorTick=function(z,q){var mt=this.minorTicks;mt[z]||(mt[z]=new It(this,z,"minor")),q&&mt[z].isNew&&mt[z].render(null,!0),mt[z].render(null,!1,1)},rt.prototype.renderTick=function(z,q,mt){var pt=this.ticks;(!this.isLinked||z>=this.min&&z<=this.max||this.grid&&this.grid.isColumn)&&(pt[z]||(pt[z]=new It(this,z)),mt&&pt[z].isNew&&pt[z].render(q,!0,-1),pt[z].render(q))},rt.prototype.render=function(){var Fe,pe,z=this,q=z.chart,mt=z.logarithmic,pt=z.options,dt=z.isLinked,Y=z.tickPositions,lt=z.axisTitle,ht=z.ticks,Lt=z.minorTicks,At=z.alternateBands,Wt=pt.stackLabels,Ot=pt.alternateGridColor,se=z.tickmarkOffset,_e=z.axisLine,We=z.showAxis,He=et(q.renderer.globalAnimation);if(z.labelEdge.length=0,z.overlap=!1,[ht,Lt,At].forEach(function(me){_(me,function(qt){qt.isActive=!1})}),z.hasData()||dt){var Me=z.chart.hasRendered&&z.old&&v(z.old.min);z.minorTickInterval&&!z.categories&&z.getMinorTickPositions().forEach(function(me){z.renderMinorTick(me,Me)}),Y.length&&(Y.forEach(function(me,qt){z.renderTick(me,qt,Me)}),se&&(0===z.min||z.single)&&(ht[-1]||(ht[-1]=new It(z,-1,null,!0)),ht[-1].render(-1))),Ot&&Y.forEach(function(me,qt){pe=typeof Y[qt+1]<"u"?Y[qt+1]+se:z.max-se,qt%2==0&&me<z.max&&pe<=z.max+(q.polar?-se:se)&&(At[me]||(At[me]=new Rt.PlotLineOrBand(z)),Fe=me+se,At[me].options={from:mt?mt.lin2log(Fe):Fe,to:mt?mt.lin2log(pe):pe,color:Ot,className:"highcharts-alternate-grid"},At[me].render(),At[me].isActive=!0)}),z._addedPlotLB||(z._addedPlotLB=!0,(pt.plotLines||[]).concat(pt.plotBands||[]).forEach(function(me){z.addPlotBandOrLine(me)}))}[ht,Lt,At].forEach(function(me){var qt=[],Kt=He.duration;_(me,function(xe,be){xe.isActive||(xe.render(be,!1,0),xe.isActive=!1,qt.push(be))}),at(function(){for(var xe=qt.length;xe--;)me[qt[xe]]&&!me[qt[xe]].isActive&&(me[qt[xe]].destroy(),delete me[qt[xe]])},me!==At&&q.hasRendered&&Kt?Kt:0)}),_e&&(_e[_e.isPlaced?"animate":"attr"]({d:this.getLinePath(_e.strokeWidth())}),_e.isPlaced=!0,_e[We?"show":"hide"](We)),lt&&We&&(pt=z.getTitlePosition(),lt[lt.isNew?"attr":"animate"](pt),lt.isNew=!1),Wt&&Wt.enabled&&z.stacking&&z.stacking.renderStackTotals(),z.old={len:z.len,max:z.max,min:z.min,transA:z.transA,userMax:z.userMax,userMin:z.userMin},z.isDirty=!1,N(this,"afterRender")},rt.prototype.redraw=function(){this.visible&&(this.render(),this.plotLinesAndBands.forEach(function(z){z.render()})),this.series.forEach(function(z){z.isDirty=!0})},rt.prototype.getKeepProps=function(){return this.keepProps||rt.keepProps},rt.prototype.destroy=function(z){var q=this,mt=q.plotLinesAndBands,pt=this.eventOptions;if(N(this,"destroy",{keepEvents:z}),z||B(q),[q.ticks,q.minorTicks,q.alternateBands].forEach(function(Y){nt(Y)}),mt)for(z=mt.length;z--;)mt[z].destroy();for(var dt in"axisLine axisTitle axisGroup gridGroup labelGroup cross scrollbar".split(" ").forEach(function(Y){q[Y]&&(q[Y]=q[Y].destroy())}),q.plotLinesAndBandsGroups)q.plotLinesAndBandsGroups[dt]=q.plotLinesAndBandsGroups[dt].destroy();_(q,function(Y,lt){-1===q.getKeepProps().indexOf(lt)&&delete q[lt]}),this.eventOptions=pt},rt.prototype.drawCrosshair=function(z,q){var Y,mt=this.crosshair,pt=y(mt&&mt.snap,!0),dt=this.chart,lt=this.cross;if(N(this,"drawCrosshair",{e:z,point:q}),z||(z=this.cross&&this.cross.e),mt&&!1!==(V(q)||!pt)){if(pt?V(q)&&(Y=y("colorAxis"!==this.coll?q.crosshairPos:null,this.isXAxis?q.plotX:this.len-q.plotY)):Y=z&&(this.horiz?z.chartX-this.pos:this.len-z.chartY+this.pos),V(Y)){var ht={value:q&&(this.isXAxis?q.x:y(q.stackY,q.y)),translatedValue:Y};dt.polar&&it(ht,{isCrosshair:!0,chartX:z&&z.chartX,chartY:z&&z.chartY,point:q}),ht=this.getPlotLinePath(ht)||null}if(!V(ht))return void this.hideCrosshair();pt=this.categories&&!this.isRadial,lt||(this.cross=lt=dt.renderer.path().addClass("highcharts-crosshair highcharts-crosshair-"+(pt?"category ":"thin ")+(mt.className||"")).attr({zIndex:y(mt.zIndex,2)}).add(),dt.styledMode||(lt.attr({stroke:mt.color||(pt?jt.parse("#ccd6eb").setOpacity(.25).get():"#cccccc"),"stroke-width":y(mt.width,1)}).css({"pointer-events":"none"}),mt.dashStyle&&lt.attr({dashstyle:mt.dashStyle}))),lt.show().attr({d:ht}),pt&&!mt.width&&lt.attr({"stroke-width":this.transA}),this.cross.e=z}else this.hideCrosshair();N(this,"afterDrawCrosshair",{e:z,point:q})},rt.prototype.hideCrosshair=function(){this.cross&&this.cross.hide(),N(this,"afterHideCrosshair")},rt.prototype.hasVerticalPanning=function(){var z=this.chart.options.chart.panning;return!!(z&&z.enabled&&/y/.test(z.type))},rt.prototype.validatePositiveValue=function(z){return v(z)&&0<z},rt.prototype.update=function(z,q){var mt=this.chart;z=b(this.userOptions,z),this.destroy(!0),this.init(mt,z),mt.isDirtyBox=!0,y(q,!0)&&mt.redraw()},rt.prototype.remove=function(z){for(var q=this.chart,mt=this.coll,pt=this.series,dt=pt.length;dt--;)pt[dt]&&pt[dt].remove(!1);w(q.axes,this),w(q[mt],this),q[mt].forEach(function(Y,lt){Y.options.index=Y.userOptions.index=lt}),this.destroy(),q.isDirtyBox=!0,y(z,!0)&&q.redraw()},rt.prototype.setTitle=function(z,q){this.update({title:z},q)},rt.prototype.setCategories=function(z,q){this.update({categories:z},q)},rt.defaultOptions=xt.defaultXAxisOptions,rt.keepProps="extKey hcEvents names series userMax userMin".split(" "),rt}()}),te(Ct,"Core/Axis/DateTimeAxis.js",[Ct["Core/Utilities.js"]],function(wt){var Rt,xt=wt.addEvent,jt=wt.getMagnitude,zt=wt.normalizeTickInterval,Ut=wt.timeUnits;return function(It){function K(){return this.chart.time.getTimeTicks.apply(this.chart.time,arguments)}function et(I){"datetime"!==I.userOptions.type?this.dateTime=void 0:this.dateTime||(this.dateTime=new R(this))}var st=[];It.compose=function(I){return-1===st.indexOf(I)&&(st.push(I),I.keepProps.push("dateTime"),I.prototype.getTimeTicks=K,xt(I,"init",et)),I};var R=function(){function I(A){this.axis=A}return I.prototype.normalizeTimeTickInterval=function(A,x){var nt,T=x||[["millisecond",[1,2,5,10,20,25,50,100,200,500]],["second",[1,2,5,10,15,30]],["minute",[1,2,5,10,15,30]],["hour",[1,2,3,4,6,8,12]],["day",[1,2]],["week",[1,2]],["month",[1,2,3,4,6]],["year",null]],j=Ut[(x=T[T.length-1])[0]],V=x[1];for(nt=0;nt<T.length&&(j=Ut[(x=T[nt])[0]],V=x[1],!(T[nt+1]&&A<=(j*V[V.length-1]+Ut[T[nt+1][0]])/2));nt++);return j===Ut.year&&A<5*j&&(V=[1,2,5]),{unitRange:j,count:A=zt(A/j,V,"year"===x[0]?Math.max(jt(A/j),1):1),unitName:x[0]}},I.prototype.getXDateFormat=function(A,x){var T=this.axis,j=T.chart.time;return T.closestPointRange?j.getDateFormat(T.closestPointRange,A,T.options.startOfWeek,x)||j.resolveDTLFormat(x.year).main:j.resolveDTLFormat(x.day).main},I}();It.Additions=R}(Rt||(Rt={})),Rt}),te(Ct,"Core/Axis/LogarithmicAxis.js",[Ct["Core/Utilities.js"]],function(wt){var Ut,xt=wt.addEvent,jt=wt.normalizeTickInterval,zt=wt.pick;return function(Rt){function It(R){var I=this.logarithmic;"logarithmic"!==R.userOptions.type?this.logarithmic=void 0:I||(this.logarithmic=new st(this))}function K(){var R=this.logarithmic;R&&(this.lin2val=function(I){return R.lin2log(I)},this.val2lin=function(I){return R.log2lin(I)})}var et=[];Rt.compose=function(R){return-1===et.indexOf(R)&&(et.push(R),R.keepProps.push("logarithmic"),xt(R,"init",It),xt(R,"afterInit",K)),R};var st=function(){function R(I){this.axis=I}return R.prototype.getLogTickPositions=function(I,A,x,T){var j=this.axis,V=j.len,nt=j.options,w=[];if(T||(this.minorAutoInterval=void 0),.5<=I)I=Math.round(I),w=j.getLinearTickPositions(I,A,x);else if(.08<=I){var it,l=Math.floor(A),N=nt=void 0;for(V=.3<I?[1,2,4]:.15<I?[1,2,4,6,8]:[1,2,3,4,5,6,7,8,9];l<x+1&&!N;l++){var G=V.length;for(it=0;it<G&&!N;it++){var v=this.log2lin(this.lin2log(l)*V[it]);v>A&&(!T||nt<=x)&&typeof nt<"u"&&w.push(nt),nt>x&&(N=!0),nt=v}}}else A=this.lin2log(A),x=this.lin2log(x),I=T?j.getMinorTickInterval():nt.tickInterval,I=zt("auto"===I?null:I,this.minorAutoInterval,nt.tickPixelInterval/(T?5:1)*(x-A)/((T?V/j.tickPositions.length:V)||1)),I=jt(I),w=j.getLinearTickPositions(I,A,x).map(this.log2lin),T||(this.minorAutoInterval=I/5);return T||(j.tickInterval=I),w},R.prototype.lin2log=function(I){return Math.pow(10,I)},R.prototype.log2lin=function(I){return Math.log(I)/Math.LN10},R}();Rt.Additions=st}(Ut||(Ut={})),Ut}),te(Ct,"Core/Axis/PlotLineOrBand/PlotLineOrBandAxis.js",[Ct["Core/Utilities.js"]],function(wt){var Ut,xt=wt.erase,jt=wt.extend,zt=wt.isNumber;return function(Rt){var K,It=[];Rt.compose=function(st,R){return K||(K=st),-1===It.indexOf(R)&&(It.push(R),jt(R.prototype,et.prototype)),R};var et=function(){function st(){}return st.prototype.getPlotBandPath=function(R,I,A){void 0===A&&(A=this.options);var x=this.getPlotLinePath({value:I,force:!0,acrossPanes:A.acrossPanes}),T=[],j=this.horiz;if(I=!zt(this.min)||!zt(this.max)||R<this.min&&I<this.min||R>this.max&&I>this.max,R=this.getPlotLinePath({value:R,force:!0,acrossPanes:A.acrossPanes}),A=1,R&&x){if(I){var V=R.toString()===x.toString();A=0}for(I=0;I<R.length;I+=2){var nt=R[I],w=R[I+1],l=x[I],it=x[I+1];"M"!==nt[0]&&"L"!==nt[0]||"M"!==w[0]&&"L"!==w[0]||"M"!==l[0]&&"L"!==l[0]||"M"!==it[0]&&"L"!==it[0]||(j&&l[1]===nt[1]?(l[1]+=A,it[1]+=A):j||l[2]!==nt[2]||(l[2]+=A,it[2]+=A),T.push(["M",nt[1],nt[2]],["L",w[1],w[2]],["L",it[1],it[2]],["L",l[1],l[2]],["Z"])),T.isFlat=V}}return T},st.prototype.addPlotBand=function(R){return this.addPlotBandOrLine(R,"plotBands")},st.prototype.addPlotLine=function(R){return this.addPlotBandOrLine(R,"plotLines")},st.prototype.addPlotBandOrLine=function(R,I){var A=this,x=this.userOptions,T=new K(this,R);if(this.visible&&(T=T.render()),T){if(this._addedPlotLB||(this._addedPlotLB=!0,(x.plotLines||[]).concat(x.plotBands||[]).forEach(function(V){A.addPlotBandOrLine(V)})),I){var j=x[I]||[];j.push(R),x[I]=j}this.plotLinesAndBands.push(T)}return T},st.prototype.removePlotBandOrLine=function(R){var I=this.plotLinesAndBands,A=this.options,x=this.userOptions;if(I){for(var T=I.length;T--;)I[T].id===R&&I[T].destroy();[A.plotLines||[],x.plotLines||[],A.plotBands||[],x.plotBands||[]].forEach(function(j){for(T=j.length;T--;)(j[T]||{}).id===R&&xt(j,j[T])})}},st.prototype.removePlotBand=function(R){this.removePlotBandOrLine(R)},st.prototype.removePlotLine=function(R){this.removePlotBandOrLine(R)},st}()}(Ut||(Ut={})),Ut}),te(Ct,"Core/Axis/PlotLineOrBand/PlotLineOrBand.js",[Ct["Core/Axis/PlotLineOrBand/PlotLineOrBandAxis.js"],Ct["Core/Utilities.js"]],function(wt,xt){var jt=xt.arrayMax,zt=xt.arrayMin,Ut=xt.defined,Rt=xt.destroyObjectProperties,It=xt.erase,K=xt.fireEvent,et=xt.merge,st=xt.objectEach,R=xt.pick;return function(){function I(A,x){this.axis=A,x&&(this.options=x,this.id=x.id)}return I.compose=function(A){return wt.compose(I,A)},I.prototype.render=function(){K(this,"render");var A=this,x=A.axis,T=x.horiz,j=x.logarithmic,V=A.options,nt=V.color,w=R(V.zIndex,0),l=V.events,it={},N=x.chart.renderer,G=V.label,v=A.label,M=V.to,b=V.from,k=V.value,_=A.svgElem,y=[],O=Ut(b)&&Ut(M);y=Ut(k);var B=!_,H={class:"highcharts-plot-"+(O?"band ":"line ")+(V.className||"")},at=O?"bands":"lines";if(j&&(b=j.log2lin(b),M=j.log2lin(M),k=j.log2lin(k)),x.chart.styledMode||(y?(H.stroke=nt||"#999999",H["stroke-width"]=R(V.width,1),V.dashStyle&&(H.dashstyle=V.dashStyle)):O&&(H.fill=nt||"#e6ebf5",V.borderWidth&&(H.stroke=V.borderColor,H["stroke-width"]=V.borderWidth))),it.zIndex=w,(j=x.plotLinesAndBandsGroups[at+="-"+w])||(x.plotLinesAndBandsGroups[at]=j=N.g("plot-"+at).attr(it).add()),B&&(A.svgElem=_=N.path().attr(H).add(j)),y)y=x.getPlotLinePath({value:k,lineWidth:_.strokeWidth(),acrossPanes:V.acrossPanes});else{if(!O)return;y=x.getPlotBandPath(b,M,V)}return!A.eventsAdded&&l&&(st(l,function(ft,rt){_.on(rt,function(z){l[rt].apply(A,[z])})}),A.eventsAdded=!0),(B||!_.d)&&y&&y.length?_.attr({d:y}):_&&(y?(_.show(),_.animate({d:y})):_.d&&(_.hide(),v&&(A.label=v=v.destroy()))),G&&(Ut(G.text)||Ut(G.formatter))&&y&&y.length&&0<x.width&&0<x.height&&!y.isFlat?(G=et({align:T&&O&&"center",x:T?!O&&4:10,verticalAlign:!T&&O&&"middle",y:T?O?16:10:O?6:-4,rotation:T&&!O&&90},G),this.renderLabel(G,y,O,w)):v&&v.hide(),A},I.prototype.renderLabel=function(A,x,T,j){var V=this.axis,nt=V.chart.renderer,w=this.label;w||(this.label=w=nt.text(this.getLabelText(A),0,0,A.useHTML).attr({align:A.textAlign||A.align,rotation:A.rotation,class:"highcharts-plot-"+(T?"band":"line")+"-label "+(A.className||""),zIndex:j}).add(),V.chart.styledMode||w.css(et({textOverflow:"ellipsis"},A.style))),j=x.xBounds||[x[0][1],x[1][1],T?x[2][1]:x[0][1]],x=x.yBounds||[x[0][2],x[1][2],T?x[2][2]:x[0][2]],T=zt(j),nt=zt(x),w.align(A,!1,{x:T,y:nt,width:jt(j)-T,height:jt(x)-nt}),w.alignValue&&"left"!==w.alignValue||w.css({width:(90===w.rotation?V.height-(w.alignAttr.y-V.top):V.width-(w.alignAttr.x-V.left))+"px"}),w.show(!0)},I.prototype.getLabelText=function(A){return Ut(A.formatter)?A.formatter.call(this):A.text},I.prototype.destroy=function(){It(this.axis.plotLinesAndBands,this),delete this.axis,Rt(this)},I}()}),te(Ct,"Core/Tooltip.js",[Ct["Core/FormatUtilities.js"],Ct["Core/Globals.js"],Ct["Core/Renderer/RendererUtilities.js"],Ct["Core/Renderer/RendererRegistry.js"],Ct["Core/Utilities.js"]],function(wt,xt,jt,zt,Ut){var Rt=wt.format,It=xt.doc,K=jt.distribute,et=Ut.clamp,st=Ut.css,R=Ut.discardElement,I=Ut.extend,A=Ut.fireEvent,x=Ut.isArray,T=Ut.isNumber,j=Ut.isString,V=Ut.merge,nt=Ut.pick,w=Ut.splat,l=Ut.syncTimeout;return function(){function it(N,G){this.allowShared=!0,this.container=void 0,this.crosshairs=[],this.distance=0,this.isHidden=!0,this.isSticky=!1,this.now={},this.options={},this.outside=!1,this.chart=N,this.init(N,G)}return it.prototype.applyFilter=function(){var N=this.chart;N.renderer.definition({tagName:"filter",attributes:{id:"drop-shadow-"+N.index,opacity:.5},children:[{tagName:"feGaussianBlur",attributes:{in:"SourceAlpha",stdDeviation:1}},{tagName:"feOffset",attributes:{dx:1,dy:1}},{tagName:"feComponentTransfer",children:[{tagName:"feFuncA",attributes:{type:"linear",slope:.3}}]},{tagName:"feMerge",children:[{tagName:"feMergeNode"},{tagName:"feMergeNode",attributes:{in:"SourceGraphic"}}]}]})},it.prototype.bodyFormatter=function(N){return N.map(function(G){var v=G.series.tooltipOptions;return(v[(G.point.formatPrefix||"point")+"Formatter"]||G.point.tooltipFormatter).call(G.point,v[(G.point.formatPrefix||"point")+"Format"]||"")})},it.prototype.cleanSplit=function(N){this.chart.series.forEach(function(G){var v=G&&G.tt;v&&(!v.isActive||N?G.tt=v.destroy():v.isActive=!1)})},it.prototype.defaultFormatter=function(N){var G=this.points||w(this),v=[N.tooltipFooterHeaderFormatter(G[0])];return(v=v.concat(N.bodyFormatter(G))).push(N.tooltipFooterHeaderFormatter(G[0],!0)),v},it.prototype.destroy=function(){this.label&&(this.label=this.label.destroy()),this.split&&this.tt&&(this.cleanSplit(!0),this.tt=this.tt.destroy()),this.renderer&&(this.renderer=this.renderer.destroy(),R(this.container)),Ut.clearTimeout(this.hideTimer),Ut.clearTimeout(this.tooltipTimeout)},it.prototype.getAnchor=function(N,G){var y,O,v=this.chart,M=v.pointer,b=v.inverted,k=v.plotTop,_=v.plotLeft,B=0,H=0;return N=w(N),this.followPointer&&G?(typeof G.chartX>"u"&&(G=M.normalize(G)),M=[G.chartX-_,G.chartY-k]):N[0].tooltipPos?M=N[0].tooltipPos:(N.forEach(function(at){y=at.series.yAxis,B+=at.plotX||0,H+=at.plotLow?(at.plotLow+(at.plotHigh||0))/2:at.plotY||0,(O=at.series.xAxis)&&y&&(b?(B+=k+v.plotHeight-O.len-O.pos,H+=_+v.plotWidth-y.len-y.pos):(B+=O.pos-_,H+=y.pos-k))}),B/=N.length,H/=N.length,M=[b?v.plotWidth-H:B,b?v.plotHeight-B:H],this.shared&&1<N.length&&G&&(b?M[0]=G.chartX-_:M[1]=G.chartY-k)),M.map(Math.round)},it.prototype.getClassName=function(N,G,v){var M=N.series,b=M.options;return[this.options.className,"highcharts-label",v&&"highcharts-tooltip-header",G?"highcharts-tooltip-box":"highcharts-tooltip",!v&&"highcharts-color-"+nt(N.colorIndex,M.colorIndex),b&&b.className].filter(j).join(" ")},it.prototype.getLabel=function(){var k,N=this,G=this.chart.styledMode,v=this.options,M=this.split&&this.allowShared,b=v.style.pointerEvents||(this.shouldStickOnContact()?"auto":"none"),_=this.chart.renderer;if(N.label){var y=!N.label.hasClass("highcharts-label");(M&&!y||!M&&y)&&N.destroy()}if(!this.label){if(this.outside){y=this.chart.options.chart.style;var O=zt.getRendererType();this.container=k=xt.doc.createElement("div"),k.className="highcharts-tooltip-container",st(k,{position:"absolute",top:"1px",pointerEvents:b,zIndex:Math.max(this.options.style.zIndex||0,(y&&y.zIndex||0)+3)}),xt.doc.body.appendChild(k),this.renderer=_=new O(k,0,0,y,void 0,void 0,_.styledMode)}if(M?this.label=_.g("tooltip"):(this.label=_.label("",0,0,v.shape,void 0,void 0,v.useHTML,void 0,"tooltip").attr({padding:v.padding,r:v.borderRadius}),G||this.label.attr({fill:v.backgroundColor,"stroke-width":v.borderWidth}).css(v.style).css({pointerEvents:b}).shadow(v.shadow)),G&&v.shadow&&(this.applyFilter(),this.label.attr({filter:"url(#drop-shadow-"+this.chart.index+")"})),N.outside&&!N.split){var B=this.label,H=B.xSetter,at=B.ySetter;B.xSetter=function(ft){H.call(B,N.distance),k.style.left=ft+"px"},B.ySetter=function(ft){at.call(B,N.distance),k.style.top=ft+"px"}}this.label.attr({zIndex:8}).add()}return this.label},it.prototype.getPosition=function(N,G,v){var z,M=this.chart,b=this.distance,k={},_=M.inverted&&v.h||0,y=this.outside,O=y?It.documentElement.clientWidth-2*b:M.chartWidth,B=y?Math.max(It.body.scrollHeight,It.documentElement.scrollHeight,It.body.offsetHeight,It.documentElement.offsetHeight,It.documentElement.clientHeight):M.chartHeight,H=M.pointer.getChartPosition(),at=function(lt){var ht="x"===lt;return[lt,ht?O:B,ht?N:G].concat(y?[ht?N*H.scaleX:G*H.scaleY,ht?H.left-b+(v.plotX+M.plotLeft)*H.scaleX:H.top-b+(v.plotY+M.plotTop)*H.scaleY,0,ht?O:B]:[ht?N:G,ht?v.plotX+M.plotLeft:v.plotY+M.plotTop,ht?M.plotLeft:M.plotTop,ht?M.plotLeft+M.plotWidth:M.plotTop+M.plotHeight])},ft=at("y"),rt=at("x");at=!!v.negative,!M.polar&&M.hoverSeries&&M.hoverSeries.yAxis&&M.hoverSeries.yAxis.reversed&&(at=!at);var q=!this.followPointer&&nt(v.ttBelow,!M.inverted===at),mt=function(lt,ht,Lt,At,Wt,Ot,se){var _e=y?"y"===lt?b*H.scaleY:b*H.scaleX:b,We=(Lt-At)/2,He=At<Wt-b,Fe=Wt+b+At<ht,pe=Wt-_e-Lt+We;if(Wt=Wt+_e-We,q&&Fe)k[lt]=Wt;else if(!q&&He)k[lt]=pe;else if(He)k[lt]=Math.min(se-At,0>pe-_?pe:pe-_);else{if(!Fe)return!1;k[lt]=Math.max(Ot,Wt+_+Lt>ht?Wt:Wt+_)}},pt=function(lt,ht,Lt,At,Wt){var Ot;return Wt<b||Wt>ht-b?Ot=!1:k[lt]=Wt<Lt/2?1:Wt>ht-At/2?ht-At-2:Wt-Lt/2,Ot},dt=function(lt){var ht=ft;ft=rt,rt=ht,z=lt},Y=function(){!1!==mt.apply(0,ft)?!1!==pt.apply(0,rt)||z||(dt(!0),Y()):z?k.x=k.y=0:(dt(!0),Y())};return(M.inverted||1<this.len)&&dt(),Y(),k},it.prototype.hide=function(N){var G=this;Ut.clearTimeout(this.hideTimer),N=nt(N,this.options.hideDelay),this.isHidden||(this.hideTimer=l(function(){G.getLabel().fadeOut(N&&void 0),G.isHidden=!0},N))},it.prototype.init=function(N,G){this.chart=N,this.options=G,this.crosshairs=[],this.now={x:0,y:0},this.isHidden=!0,this.split=G.split&&!N.inverted&&!N.polar,this.shared=G.shared||this.split,this.outside=nt(G.outside,!(!N.scrollablePixelsX&&!N.scrollablePixelsY))},it.prototype.shouldStickOnContact=function(N){return!(this.followPointer||!this.options.stickOnContact||N&&!this.chart.pointer.inClass(N.target,"highcharts-tooltip"))},it.prototype.move=function(N,G,v,M){var b=this,k=b.now,_=!1!==b.options.animation&&!b.isHidden&&(1<Math.abs(N-k.x)||1<Math.abs(G-k.y)),y=b.followPointer||1<b.len;I(k,{x:_?(2*k.x+N)/3:N,y:_?(k.y+G)/2:G,anchorX:y?void 0:_?(2*k.anchorX+v)/3:v,anchorY:y?void 0:_?(k.anchorY+M)/2:M}),b.getLabel().attr(k),b.drawTracker(),_&&(Ut.clearTimeout(this.tooltipTimeout),this.tooltipTimeout=setTimeout(function(){b&&b.move(N,G,v,M)},32))},it.prototype.refresh=function(N,G){var v=this.chart,M=this.options,b=v.pointer,k=w(N),_=k[0],y=[],O=M.formatter||this.defaultFormatter,B=this.shared,H=v.styledMode,at={};if(M.enabled&&_.series){Ut.clearTimeout(this.hideTimer),this.allowShared=!(!x(N)&&N.series&&N.series.noSharedTooltip),this.followPointer=!this.split&&_.series.tooltipOptions.followPointer;var ft=(N=this.getAnchor(N,G))[0],rt=N[1];if(B&&this.allowShared?(b.applyInactiveState(k),k.forEach(function(mt){mt.setState("hover"),y.push(mt.getLabelConfig())}),(at={x:_.category,y:_.y}).points=y):at=_.getLabelConfig(),this.len=y.length,O=O.call(at,this),this.distance=nt((B=_.series).tooltipOptions.distance,16),!1===O)this.hide();else{if(this.split&&this.allowShared)this.renderSplit(O,k);else{var z=ft,q=rt;if(G&&b.isDirectTouch&&(z=G.chartX-v.plotLeft,q=G.chartY-v.plotTop),!v.polar&&!1!==B.options.clip&&!k.some(function(mt){return b.isDirectTouch||mt.series.shouldShowTooltip(z,q)}))return void this.hide();G=this.getLabel(),M.style.width&&!H||G.css({width:v.spacingBox.width+"px"}),G.attr({text:O&&O.join?O.join(""):O}),G.addClass(this.getClassName(_),!0),H||G.attr({stroke:M.borderColor||_.color||B.color||"#666666"}),this.updatePosition({plotX:ft,plotY:rt,negative:_.negative,ttBelow:_.ttBelow,h:N[2]||0})}this.isHidden&&this.label&&this.label.attr({opacity:1}).show(),this.isHidden=!1}A(this,"refresh")}},it.prototype.renderSplit=function(N,G){function v(Fe,pe,Me,me,qt){return void 0===qt&&(qt=!0),Me?(pe=At?0:_e,Fe=et(Fe-me/2,lt.left,lt.right-me-(M.outside?Wt:0))):(pe-=Ot,Fe=et(Fe=qt?Fe-me-pt:Fe+pt,qt?Fe:lt.left,lt.right)),{x:Fe,y:pe}}var M=this,b=M.chart,k=M.chart,_=k.chartWidth,y=k.chartHeight,O=k.plotHeight,B=k.plotLeft,H=k.plotTop,at=k.pointer,ft=k.scrollablePixelsY;ft=void 0===ft?0:ft;var z=k.scrollingContainer,q=(z=void 0===z?{scrollLeft:0,scrollTop:0}:z).scrollLeft;z=z.scrollTop;var mt=k.styledMode,pt=M.distance,dt=M.options,Y=M.options.positioner,lt=M.outside&&"number"!=typeof k.scrollablePixelsX?It.documentElement.getBoundingClientRect():{left:q,right:q+_,top:z,bottom:z+y},ht=M.getLabel(),Lt=this.renderer||b.renderer,At=!(!b.xAxis[0]||!b.xAxis[0].opposite),Wt=(b=at.getChartPosition()).left;b=b.top;var Ot=H+z,se=0,_e=O-ft;j(N)&&(N=[!1,N]),N=N.slice(0,G.length+1).reduce(function(Fe,pe,Me){if(!1!==pe&&""!==pe){var me=(Me=G[Me-1]||{isHeader:!0,plotX:G[0].plotX,plotY:O,series:{}}).isHeader,qt=me?M:Me.series;pe=pe.toString();var Kt=qt.tt,xe=Me.isHeader,be=Me.series;Kt||(Kt={padding:dt.padding,r:dt.borderRadius},mt||(Kt.fill=dt.backgroundColor,Kt["stroke-width"]=dt.borderWidth),Kt=Lt.label("",0,0,dt[xe?"headerShape":"shape"],void 0,void 0,dt.useHTML).addClass(M.getClassName(Me,!0,xe)).attr(Kt).add(ht)),Kt.isActive=!0,Kt.attr({text:pe}),mt||Kt.css(dt.style).shadow(dt.shadow).attr({stroke:dt.borderColor||Me.color||be.color||"#333333"}),pe=(xe=(qt=qt.tt=Kt).getBBox()).width+qt.strokeWidth(),me&&(_e+=se=xe.height,At&&(Ot-=se)),be=void 0===(be=Me.plotX)?0:be,Kt=void 0===(Kt=Me.plotY)?0:Kt;var Te=Me.series;if(Me.isHeader){be=B+be;var ye=H+O/2}else{var oi=Te.xAxis,fi=Te.yAxis;be=oi.pos+et(be,-pt,oi.len+pt),Te.shouldShowTooltip(0,fi.pos-H+Kt,{ignoreX:!0})&&(ye=fi.pos+Kt)}be=et(be,lt.left-pt,lt.right+pt),"number"==typeof ye?(xe=xe.height+1,Kt=Y?Y.call(M,pe,xe,Me):v(be,ye,me,pe),Fe.push({align:Y?0:void 0,anchorX:be,anchorY:ye,boxWidth:pe,point:Me,rank:nt(Kt.rank,me?1:0),size:xe,target:Kt.y,tt:qt,x:Kt.x})):qt.isActive=!1}return Fe},[]),!Y&&N.some(function(Fe){var pe=(M.outside?Wt:0)+Fe.anchorX;return pe<lt.left&&pe+Fe.boxWidth<lt.right||pe<Wt-lt.left+Fe.boxWidth&&lt.right-pe>pe})&&(N=N.map(function(Fe){var pe=v(Fe.anchorX,Fe.anchorY,Fe.point.isHeader,Fe.boxWidth,!1);return I(Fe,{target:pe.y,x:pe.x})})),M.cleanSplit(),K(N,_e);var We=Wt,He=Wt;N.forEach(function(Fe){var pe=Fe.x,Me=Fe.boxWidth;(Fe=Fe.isHeader)||(M.outside&&Wt+pe<We&&(We=Wt+pe),!Fe&&M.outside&&We+Me>He&&(He=Wt+pe))}),N.forEach(function(Fe){var pe=Fe.x,Me=Fe.anchorX,me=Fe.pos,qt=Fe.point.isHeader;if(me={visibility:typeof me>"u"?"hidden":"inherit",x:pe,y:(me||0)+Ot,anchorX:Me,anchorY:Fe.anchorY},M.outside&&pe<Me){var Kt=Wt-We;0<Kt&&(qt||(me.x=pe+Kt,me.anchorX=Me+Kt),qt&&(me.x=(He-We)/2,me.anchorX=Me+Kt))}Fe.tt.attr(me)}),N=M.container,ft=M.renderer,M.outside&&N&&ft&&(k=ht.getBBox(),ft.setSize(k.width+k.x,k.height+k.y,!1),N.style.left=We+"px",N.style.top=b+"px")},it.prototype.drawTracker=function(){if(this.shouldStickOnContact()){var N=this.chart,G=this.label,v=this.shared?N.hoverPoints:N.hoverPoint;if(G&&v){var M={x:0,y:0,width:0,height:0};v=this.getAnchor(v);var b=G.getBBox();v[0]+=N.plotLeft-G.translateX,v[1]+=N.plotTop-G.translateY,M.x=Math.min(0,v[0]),M.y=Math.min(0,v[1]),M.width=0>v[0]?Math.max(Math.abs(v[0]),b.width-v[0]):Math.max(Math.abs(v[0]),b.width),M.height=0>v[1]?Math.max(Math.abs(v[1]),b.height-Math.abs(v[1])):Math.max(Math.abs(v[1]),b.height),this.tracker?this.tracker.attr(M):(this.tracker=G.renderer.rect(M).addClass("highcharts-tracker").add(G),N.styledMode||this.tracker.attr({fill:"rgba(0,0,0,0)"}))}}else this.tracker&&this.tracker.destroy()},it.prototype.styledModeFormat=function(N){return N.replace('style="font-size: 10px"','class="highcharts-header"').replace(/style="color:{(point|series)\.color}"/g,'class="highcharts-color-{$1.colorIndex} {series.options.className} {point.options.className}"')},it.prototype.tooltipFooterHeaderFormatter=function(N,G){var v=N.series,M=v.tooltipOptions,b=v.xAxis,k=b&&b.dateTime,_=M.xDateFormat,y=M[G?"footerFormat":"headerFormat"];return A(this,"headerFormatter",b={isFooter:G,labelConfig:N},function(O){k&&!_&&T(N.key)&&(_=k.getXDateFormat(N.key,M.dateTimeLabelFormats)),k&&_&&(N.point&&N.point.tooltipDateKeys||["key"]).forEach(function(B){y=y.replace("{point."+B+"}","{point."+B+":"+_+"}")}),v.chart.styledMode&&(y=this.styledModeFormat(y)),O.text=Rt(y,{point:N,series:v},this.chart)}),b.text},it.prototype.update=function(N){this.destroy(),V(!0,this.chart.options.tooltip.userOptions,N),this.init(this.chart,V(!0,this.options,N))},it.prototype.updatePosition=function(N){var G=this.chart,v=this.options,M=G.pointer,b=this.getLabel();M=M.getChartPosition();var k=(v.positioner||this.getPosition).call(this,b.width,b.height,N),_=N.plotX+G.plotLeft;N=N.plotY+G.plotTop,this.outside&&(this.renderer.setSize(b.width+(v=v.borderWidth+2*this.distance),b.height+v,!1),(1!==M.scaleX||1!==M.scaleY)&&(st(this.container,{transform:"scale(".concat(M.scaleX,", ").concat(M.scaleY,")")}),_*=M.scaleX,N*=M.scaleY),_+=M.left-k.x,N+=M.top-k.y),this.move(Math.round(k.x),Math.round(k.y||0),_,N)},it}()}),te(Ct,"Core/Series/Point.js",[Ct["Core/Renderer/HTML/AST.js"],Ct["Core/Animation/AnimationUtilities.js"],Ct["Core/Defaults.js"],Ct["Core/FormatUtilities.js"],Ct["Core/Utilities.js"]],function(wt,xt,jt,zt,Ut){var Rt=xt.animObject,It=jt.defaultOptions,K=zt.format,et=Ut.addEvent,st=Ut.defined,R=Ut.erase,I=Ut.extend,A=Ut.fireEvent,x=Ut.getNestedProperty,T=Ut.isArray,j=Ut.isFunction,V=Ut.isNumber,nt=Ut.isObject,w=Ut.merge,l=Ut.objectEach,it=Ut.pick,N=Ut.syncTimeout,G=Ut.removeEvent,v=Ut.uniqueKey;return function(){function M(){this.category=void 0,this.formatPrefix="point",this.id=void 0,this.isNull=!1,this.percentage=this.options=this.name=void 0,this.selected=!1,this.total=this.shapeArgs=this.series=void 0,this.visible=!0,this.x=void 0}return M.prototype.animateBeforeDestroy=function(){var b=this,k={x:b.startXPos,opacity:0},_=b.getGraphicalProps();_.singular.forEach(function(y){b[y]=b[y].animate("dataLabel"===y?{x:b[y].startXPos,y:b[y].startYPos,opacity:0}:k)}),_.plural.forEach(function(y){b[y].forEach(function(O){O.element&&O.animate(I({x:b.startXPos},O.startYPos?{x:O.startXPos,y:O.startYPos}:{}))})})},M.prototype.applyOptions=function(b,k){var _=this.series,y=_.options.pointValKey||_.pointValKey;return b=M.prototype.optionsToObject.call(this,b),I(this,b),this.options=this.options?I(this.options,b):b,b.group&&delete this.group,b.dataLabels&&delete this.dataLabels,y&&(this.y=M.prototype.getNestedProperty.call(this,y)),this.formatPrefix=(this.isNull=this.isValid&&!this.isValid())?"null":"point",this.selected&&(this.state="select"),"name"in this&&typeof k>"u"&&_.xAxis&&_.xAxis.hasNames&&(this.x=_.xAxis.nameToX(this)),typeof this.x>"u"&&_?this.x=typeof k>"u"?_.autoIncrement():k:V(b.x)&&_.options.relativeXValue&&(this.x=_.autoIncrement(b.x)),this},M.prototype.destroy=function(){function b(){for(H in(k.graphic||k.graphics||k.dataLabel||k.dataLabels)&&(G(k),k.destroyElements()),k)k[H]=null}var k=this,_=k.series,y=_.chart;_=_.options.dataSorting;var H,O=y.hoverPoints,B=Rt(k.series.chart.renderer.globalAnimation);k.legendItem&&y.legend.destroyItem(k),O&&(k.setState(),R(O,k),O.length||(y.hoverPoints=null)),k===y.hoverPoint&&k.onMouseOut(),_&&_.enabled?(this.animateBeforeDestroy(),N(b,B.duration)):b(),y.pointCount--},M.prototype.destroyElements=function(b){var k=this;(b=k.getGraphicalProps(b)).singular.forEach(function(_){k[_]=k[_].destroy()}),b.plural.forEach(function(_){k[_].forEach(function(y){y.element&&y.destroy()}),delete k[_]})},M.prototype.firePointEvent=function(b,k,_){var y=this,O=this.series.options;(O.point.events[b]||y.options&&y.options.events&&y.options.events[b])&&y.importEvents(),"click"===b&&O.allowPointSelect&&(_=function(B){y.select&&y.select(null,B.ctrlKey||B.metaKey||B.shiftKey)}),A(y,b,k,_)},M.prototype.getClassName=function(){return"highcharts-point"+(this.selected?" highcharts-point-select":"")+(this.negative?" highcharts-negative":"")+(this.isNull?" highcharts-null-point":"")+(typeof this.colorIndex<"u"?" highcharts-color-"+this.colorIndex:"")+(this.options.className?" "+this.options.className:"")+(this.zone&&this.zone.className?" "+this.zone.className.replace("highcharts-negative",""):"")},M.prototype.getGraphicalProps=function(b){var O,k=this,_=[],y={singular:[],plural:[]};for((b=b||{graphic:1,dataLabel:1}).graphic&&_.push("graphic","shadowGroup"),b.dataLabel&&_.push("dataLabel","dataLabelPath","dataLabelUpper","connector"),O=_.length;O--;){var B=_[O];k[B]&&y.singular.push(B)}return["graphic","dataLabel","connector"].forEach(function(H){var at=H+"s";b[H]&&k[at]&&y.plural.push(at)}),y},M.prototype.getLabelConfig=function(){return{x:this.category,y:this.y,color:this.color,colorIndex:this.colorIndex,key:this.name||this.category,series:this.series,point:this,percentage:this.percentage,total:this.total||this.stackTotal}},M.prototype.getNestedProperty=function(b){if(b)return 0===b.indexOf("custom.")?x(b,this.options):this[b]},M.prototype.getZone=function(){var b=this.series,k=b.zones;b=b.zoneAxis||"y";var _,y=0;for(_=k[y];this[b]>=_.value;)_=k[++y];return this.nonZonedColor||(this.nonZonedColor=this.color),this.color=_&&_.color&&!this.options.color?_.color:this.nonZonedColor,_},M.prototype.hasNewShapeType=function(){return(this.graphic&&(this.graphic.symbolName||this.graphic.element.nodeName))!==this.shapeType},M.prototype.init=function(b,k,_){return this.series=b,this.applyOptions(k,_),this.id=st(this.id)?this.id:v(),this.resolveColor(),b.chart.pointCount++,A(this,"afterInit"),this},M.prototype.isValid=function(){return null!==this.x&&V(this.y)},M.prototype.optionsToObject=function(b){var k=this.series,_=k.options.keys,y=_||k.pointArrayMap||["y"],O=y.length,B={},H=0,at=0;if(V(b)||null===b)B[y[0]]=b;else if(T(b))for(!_&&b.length>O&&("string"==(k=typeof b[0])?B.name=b[0]:"number"===k&&(B.x=b[0]),H++);at<O;)_&&typeof b[H]>"u"||(0<y[at].indexOf(".")?M.prototype.setNestedProperty(B,b[H],y[at]):B[y[at]]=b[H]),H++,at++;else"object"==typeof b&&(B=b,b.dataLabels&&(k._hasPointLabels=!0),b.marker&&(k._hasPointMarkers=!0));return B},M.prototype.resolveColor=function(){var b=this.series,k=b.chart.styledMode,_=b.chart.options.chart.colorCount;if(delete this.nonZonedColor,b.options.colorByPoint){if(!k){var y=(_=b.options.colors||b.chart.options.colors)[b.colorCounter];_=_.length}k=b.colorCounter,b.colorCounter++,b.colorCounter===_&&(b.colorCounter=0)}else k||(y=b.color),k=b.colorIndex;this.colorIndex=it(this.options.colorIndex,k),this.color=it(this.options.color,y)},M.prototype.setNestedProperty=function(b,k,_){return _.split(".").reduce(function(y,O,B,H){return y[O]=H.length-1===B?k:nt(y[O],!0)?y[O]:{},y[O]},b),b},M.prototype.shouldDraw=function(){return!this.isNull},M.prototype.tooltipFormatter=function(b){var k=this.series,_=k.tooltipOptions,y=it(_.valueDecimals,""),O=_.valuePrefix||"",B=_.valueSuffix||"";return k.chart.styledMode&&(b=k.chart.tooltip.styledModeFormat(b)),(k.pointArrayMap||["y"]).forEach(function(H){H="{point."+H,(O||B)&&(b=b.replace(RegExp(H+"}","g"),O+H+"}"+B)),b=b.replace(RegExp(H+"}","g"),H+":,."+y+"f}")}),K(b,{point:this,series:this.series},k.chart)},M.prototype.update=function(b,k,_,y){function O(){B.applyOptions(b);var q=at&&B.hasMockGraphic;q=null===B.y?!q:q,at&&q&&(B.graphic=at.destroy(),delete B.hasMockGraphic),nt(b,!0)&&(at&&at.element&&b&&b.marker&&typeof b.marker.symbol<"u"&&(B.graphic=at.destroy()),b&&b.dataLabels&&B.dataLabel&&(B.dataLabel=B.dataLabel.destroy()),B.connector&&(B.connector=B.connector.destroy())),H.updateParallelArrays(B,z=B.index),rt.data[z]=nt(rt.data[z],!0)||nt(b,!0)?B.options:it(b,rt.data[z]),H.isDirty=H.isDirtyData=!0,!H.fixedBox&&H.hasCartesianSeries&&(ft.isDirtyBox=!0),"point"===rt.legendType&&(ft.isDirtyLegend=!0),k&&ft.redraw(_)}var z,B=this,H=B.series,at=B.graphic,ft=H.chart,rt=H.options;k=it(k,!0),!1===y?O():B.firePointEvent("update",{options:b},O)},M.prototype.remove=function(b,k){this.series.removePoint(this.series.data.indexOf(this),b,k)},M.prototype.select=function(b,k){var _=this,y=_.series,O=y.chart;this.selectedStaging=b=it(b,!_.selected),_.firePointEvent(b?"select":"unselect",{accumulate:k},function(){_.selected=_.options.selected=b,y.options.data[y.data.indexOf(_)]=_.options,_.setState(b&&"select"),k||O.getSelectedPoints().forEach(function(B){var H=B.series;B.selected&&B!==_&&(B.selected=B.options.selected=!1,H.options.data[H.data.indexOf(B)]=B.options,B.setState(O.hoverPoints&&H.options.inactiveOtherPoints?"inactive":""),B.firePointEvent("unselect"))})}),delete this.selectedStaging},M.prototype.onMouseOver=function(b){var k=this.series.chart,_=k.pointer;b=b?_.normalize(b):_.getChartCoordinatesFromPoint(this,k.inverted),_.runPointActions(b,this)},M.prototype.onMouseOut=function(){var b=this.series.chart;this.firePointEvent("mouseOut"),this.series.options.inactiveOtherPoints||(b.hoverPoints||[]).forEach(function(k){k.setState()}),b.hoverPoints=b.hoverPoint=null},M.prototype.importEvents=function(){if(!this.hasImportedEvents){var b=this,k=w(b.series.options.point,b.options).events;b.events=k,l(k,function(_,y){j(_)&&et(b,y,_)}),this.hasImportedEvents=!0}},M.prototype.setState=function(b,k){var pt,_=this.series,y=this.state,O=_.options.states[b||"normal"]||{},B=It.plotOptions[_.type].marker&&_.options.marker,at=B&&B.states&&B.states[b||"normal"]||{},rt=this.marker||{},z=_.chart,q=B&&_.markerAttribs,mt=_.halo,dt=_.stateMarkerGraphic;if(!((b=b||"")===this.state&&!k||this.selected&&"select"!==b||!1===O.enabled||b&&(!1===at.enabled||B&&!1===B.enabled&&!1===at.enabled)||b&&rt.states&&rt.states[b]&&!1===rt.states[b].enabled)){if(this.state=b,q&&(pt=_.markerAttribs(this,b)),this.graphic&&!this.hasMockGraphic){if(y&&this.graphic.removeClass("highcharts-point-"+y),b&&this.graphic.addClass("highcharts-point-"+b),!z.styledMode){y=_.pointAttribs(this,b);var Y=it(z.options.chart.animation,O.animation),lt=y.opacity;_.options.inactiveOtherPoints&&V(lt)&&((this.dataLabels||[]).forEach(function(ht){ht&&!ht.hasClass("highcharts-data-label-hidden")&&ht.animate({opacity:lt},Y)}),this.connector&&this.connector.animate({opacity:lt},Y)),this.graphic.animate(y,Y)}pt&&this.graphic.animate(pt,it(z.options.chart.animation,at.animation,B.animation)),dt&&dt.hide()}else b&&at&&(B=rt.symbol||_.symbol,dt&&dt.currentSymbol!==B&&(dt=dt.destroy()),pt&&(dt?dt[k?"animate":"attr"]({x:pt.x,y:pt.y}):B&&(_.stateMarkerGraphic=dt=z.renderer.symbol(B,pt.x,pt.y,pt.width,pt.height).add(_.markerGroup),dt.currentSymbol=B)),!z.styledMode&&dt&&"inactive"!==this.state&&dt.attr(_.pointAttribs(this,b))),dt&&(dt[b&&this.isInside?"show":"hide"](),dt.element.point=this,dt.addClass(this.getClassName(),!0));pt=(dt=this.graphic||dt)&&dt.visibility||"inherit",(O=O.halo)&&O.size&&dt&&"hidden"!==pt&&!this.isCluster?(mt||(_.halo=mt=z.renderer.path().add(dt.parentGroup)),mt.show()[k?"animate":"attr"]({d:this.haloPath(O.size)}),mt.attr({class:"highcharts-halo highcharts-color-"+it(this.colorIndex,_.colorIndex)+(this.className?" "+this.className:""),visibility:pt,zIndex:-1}),mt.point=this,z.styledMode||mt.attr(I({fill:this.color||_.color,"fill-opacity":O.opacity},wt.filterUserAttributes(O.attributes||{})))):mt&&mt.point&&mt.point.haloPath&&mt.animate({d:mt.point.haloPath(0)},null,mt.hide),A(this,"afterSetState",{state:b})}},M.prototype.haloPath=function(b){return this.series.chart.renderer.symbols.circle(Math.floor(this.plotX)-b,this.plotY-b,2*b,2*b)},M}()}),te(Ct,"Core/Pointer.js",[Ct["Core/Color/Color.js"],Ct["Core/Globals.js"],Ct["Core/Tooltip.js"],Ct["Core/Utilities.js"]],function(wt,xt,jt,zt){var Ut=wt.parse,Rt=xt.charts,It=xt.noop,K=zt.addEvent,et=zt.attr,st=zt.css,R=zt.defined,I=zt.extend,A=zt.find,x=zt.fireEvent,T=zt.isNumber,j=zt.isObject,V=zt.objectEach,nt=zt.offset,w=zt.pick,l=zt.splat;return function(){function it(N,G){this.lastValidTouch={},this.pinchDown=[],this.runChartClick=!1,this.eventsToUnbind=[],this.chart=N,this.hasDragged=!1,this.options=G,this.init(N,G)}return it.prototype.applyInactiveState=function(N){var v,G=[];(N||[]).forEach(function(M){G.push(v=M.series),v.linkedParent&&G.push(v.linkedParent),v.linkedSeries&&(G=G.concat(v.linkedSeries)),v.navigatorSeries&&G.push(v.navigatorSeries)}),this.chart.series.forEach(function(M){-1===G.indexOf(M)?M.setState("inactive",!0):M.options.inactiveOtherPoints&&M.setAllPointsToState("inactive")})},it.prototype.destroy=function(){var N=this;this.eventsToUnbind.forEach(function(G){return G()}),this.eventsToUnbind=[],xt.chartCount||(it.unbindDocumentMouseUp&&(it.unbindDocumentMouseUp=it.unbindDocumentMouseUp()),it.unbindDocumentTouchEnd&&(it.unbindDocumentTouchEnd=it.unbindDocumentTouchEnd())),clearInterval(N.tooltipTimeout),V(N,function(G,v){N[v]=void 0})},it.prototype.getSelectionMarkerAttrs=function(N,G){var v=this,M={args:{chartX:N,chartY:G},attrs:{},shapeType:"rect"};return x(this,"getSelectionMarkerAttrs",M,function(b){var k=v.chart,_=v.mouseDownX;_=void 0===_?0:_;var y=v.mouseDownY;y=void 0===y?0:y;var O=v.zoomHor,B=v.zoomVert;(b=b.attrs).x=k.plotLeft,b.y=k.plotTop,b.width=O?1:k.plotWidth,b.height=B?1:k.plotHeight,O&&(k=N-_,b.width=Math.abs(k),b.x=(0<k?0:k)+_),B&&(k=G-y,b.height=Math.abs(k),b.y=(0<k?0:k)+y)}),M},it.prototype.drag=function(N){var G=this.chart,v=G.options.chart,M=G.plotLeft,b=G.plotTop,k=G.plotWidth,_=G.plotHeight,y=this.mouseDownX||0,O=this.mouseDownY||0,B=j(v.panning)?v.panning&&v.panning.enabled:v.panning,H=v.panKey&&N[v.panKey+"Key"],at=N.chartX,ft=N.chartY,rt=this.selectionMarker;rt&&rt.touch||(at<M?at=M:at>M+k&&(at=M+k),ft<b?ft=b:ft>b+_&&(ft=b+_),this.hasDragged=Math.sqrt(Math.pow(y-at,2)+Math.pow(O-ft,2)),10<this.hasDragged&&(M=G.isInsidePlot(y-M,O-b,{visiblePlotOnly:!0}),at=(ft=this.getSelectionMarkerAttrs(at,ft)).shapeType,ft=ft.attrs,!G.hasCartesianSeries&&!G.mapView||!this.zoomX&&!this.zoomY||!M||H||rt||(this.selectionMarker=rt=G.renderer[at](),rt.attr({class:"highcharts-selection-marker",zIndex:7}).add(),G.styledMode||rt.attr({fill:v.selectionMarkerFill||Ut("#335cad").setOpacity(.25).get()})),rt&&rt.attr(ft),M&&!rt&&B&&G.pan(N,v.panning)))},it.prototype.dragStart=function(N){var G=this.chart;G.mouseIsDown=N.type,G.cancelClick=!1,G.mouseDownX=this.mouseDownX=N.chartX,G.mouseDownY=this.mouseDownY=N.chartY},it.prototype.getSelectionBox=function(N){var G={args:{marker:N},result:{}};return x(this,"getSelectionBox",G,function(v){v.result={x:N.attr?+N.attr("x"):N.x,y:N.attr?+N.attr("y"):N.y,width:N.attr?N.attr("width"):N.width,height:N.attr?N.attr("height"):N.height}}),G.result},it.prototype.drop=function(N){var G=this,v=this.chart,M=this.hasPinched;if(this.selectionMarker){var b=this.getSelectionBox(this.selectionMarker),k=b.x,_=b.y,y=b.width,O=b.height,B={originalEvent:N,xAxis:[],yAxis:[],x:k,y:_,width:y,height:O},H=!!v.mapView;(this.hasDragged||M)&&(v.axes.forEach(function(at){if(at.zoomEnabled&&R(at.min)&&(M||G[{xAxis:"zoomX",yAxis:"zoomY"}[at.coll]])&&T(k)&&T(_)&&T(y)&&T(O)){var ft=at.horiz,rt="touchend"===N.type?at.minPixelPadding:0,z=at.toValue((ft?k:_)+rt);ft=at.toValue((ft?k+y:_+O)-rt),B[at.coll].push({axis:at,min:Math.min(z,ft),max:Math.max(z,ft)}),H=!0}}),H&&x(v,"selection",B,function(at){v.zoom(I(at,M?{animation:!1}:null))})),T(v.index)&&(this.selectionMarker=this.selectionMarker.destroy()),M&&this.scaleGroups()}v&&T(v.index)&&(st(v.container,{cursor:v._cursor}),v.cancelClick=10<this.hasDragged,v.mouseIsDown=this.hasDragged=this.hasPinched=!1,this.pinchDown=[])},it.prototype.findNearestKDPoint=function(N,G,v){var M;return N.forEach(function(b){var k=!(b.noSharedTooltip&&G)&&0>b.options.findNearestPointBy.indexOf("y");if(b=b.searchPoint(v,k),(k=j(b,!0)&&b.series)&&!(k=!j(M,!0))){var _=M.dist-b.dist,y=(b.series.group&&b.series.group.zIndex)-(M.series.group&&M.series.group.zIndex);k=0<(0!=(k=M.distX-b.distX)&&G?k:0!==_?_:0!==y?y:M.series.index>b.series.index?-1:1)}k&&(M=b)}),M},it.prototype.getChartCoordinatesFromPoint=function(N,G){var v=N.series,M=v.xAxis;v=v.yAxis;var b=N.shapeArgs;if(M&&v){var k=w(N.clientX,N.plotX),_=N.plotY||0;return N.isNode&&b&&T(b.x)&&T(b.y)&&(k=b.x,_=b.y),G?{chartX:v.len+v.pos-_,chartY:M.len+M.pos-k}:{chartX:k+M.pos,chartY:_+v.pos}}if(b&&b.x&&b.y)return{chartX:b.x,chartY:b.y}},it.prototype.getChartPosition=function(){if(this.chartPosition)return this.chartPosition;var N=this.chart.container,G=nt(N);this.chartPosition={left:G.left,top:G.top,scaleX:1,scaleY:1};var v=N.offsetWidth;return N=N.offsetHeight,2<v&&2<N&&(this.chartPosition.scaleX=G.width/v,this.chartPosition.scaleY=G.height/N),this.chartPosition},it.prototype.getCoordinates=function(N){var G={xAxis:[],yAxis:[]};return this.chart.axes.forEach(function(v){G[v.isXAxis?"xAxis":"yAxis"].push({axis:v,value:v.toValue(N[v.horiz?"chartX":"chartY"])})}),G},it.prototype.getHoverData=function(N,G,v,M,b,k){var _=[];M=!(!M||!N);var y=function(at){return at.visible&&!(!b&&at.directTouch)&&w(at.options.enableMouseTracking,!0)},O={chartX:k?k.chartX:void 0,chartY:k?k.chartY:void 0,shared:b};x(this,"beforeGetHoverData",O);var B=G&&!G.stickyTracking?[G]:v.filter(function(at){return at.stickyTracking&&(O.filter||y)(at)}),H=M||!k?N:this.findNearestKDPoint(B,b,k);return G=H&&H.series,H&&(b&&!G.noSharedTooltip?(B=v.filter(function(at){return O.filter?O.filter(at):y(at)&&!at.noSharedTooltip})).forEach(function(at){var ft=A(at.points,function(rt){return rt.x===H.x&&!rt.isNull});j(ft)&&(at.boosted&&at.boost&&(ft=at.boost.getPoint(ft)),_.push(ft))}):_.push(H)),x(this,"afterGetHoverData",O={hoverPoint:H}),{hoverPoint:O.hoverPoint,hoverSeries:G,hoverPoints:_}},it.prototype.getPointFromEvent=function(N){N=N.target;for(var G;N&&!G;)G=N.point,N=N.parentNode;return G},it.prototype.onTrackerMouseOut=function(N){N=N.relatedTarget||N.toElement;var G=this.chart.hoverSeries;this.isDirectTouch=!1,!G||!N||G.stickyTracking||this.inClass(N,"highcharts-tooltip")||this.inClass(N,"highcharts-series-"+G.index)&&this.inClass(N,"highcharts-tracker")||G.onMouseOut()},it.prototype.inClass=function(N,G){for(var v;N;){if(v=et(N,"class")){if(-1!==v.indexOf(G))return!0;if(-1!==v.indexOf("highcharts-container"))return!1}N=N.parentElement}},it.prototype.init=function(N,G){this.options=G,this.chart=N,this.runChartClick=!(!G.chart.events||!G.chart.events.click),this.pinchDown=[],this.lastValidTouch={},jt&&(N.tooltip=new jt(N,G.tooltip)),this.setDOMEvents()},it.prototype.normalize=function(N,G){var v=N.touches,M=v?v.length?v.item(0):w(v.changedTouches,N.changedTouches)[0]:N;return G||(G=this.getChartPosition()),v=M.pageX-G.left,M=M.pageY-G.top,v/=G.scaleX,M/=G.scaleY,I(N,{chartX:Math.round(v),chartY:Math.round(M)})},it.prototype.onContainerClick=function(N){var G=this.chart,v=G.hoverPoint;N=this.normalize(N);var M=G.plotLeft,b=G.plotTop;G.cancelClick||(v&&this.inClass(N.target,"highcharts-tracker")?(x(v.series,"click",I(N,{point:v})),G.hoverPoint&&v.firePointEvent("click",N)):(I(N,this.getCoordinates(N)),G.isInsidePlot(N.chartX-M,N.chartY-b,{visiblePlotOnly:!0})&&x(G,"click",N)))},it.prototype.onContainerMouseDown=function(N){var G=1==(1&(N.buttons||N.button));N=this.normalize(N),xt.isFirefox&&0!==N.button&&this.onContainerMouseMove(N),(typeof N.button>"u"||G)&&(this.zoomOption(N),G&&N.preventDefault&&N.preventDefault(),this.dragStart(N))},it.prototype.onContainerMouseLeave=function(N){var G=Rt[w(it.hoverChartIndex,-1)],v=this.chart.tooltip;N=this.normalize(N),G&&(N.relatedTarget||N.toElement)&&(G.pointer.reset(),G.pointer.chartPosition=void 0),v&&!v.isHidden&&this.reset()},it.prototype.onContainerMouseEnter=function(N){delete this.chartPosition},it.prototype.onContainerMouseMove=function(N){var G=this.chart,v=G.tooltip;N=this.normalize(N),this.setHoverChartIndex(),N.preventDefault||(N.returnValue=!1),("mousedown"===G.mouseIsDown||this.touchSelect(N))&&this.drag(N),G.openMenu||!this.inClass(N.target,"highcharts-tracker")&&!G.isInsidePlot(N.chartX-G.plotLeft,N.chartY-G.plotTop,{visiblePlotOnly:!0})||v&&v.shouldStickOnContact(N)||(this.inClass(N.target,"highcharts-no-tooltip")?this.reset(!1,0):this.runPointActions(N))},it.prototype.onDocumentTouchEnd=function(N){var G=Rt[w(it.hoverChartIndex,-1)];G&&G.pointer.drop(N)},it.prototype.onContainerTouchMove=function(N){this.touchSelect(N)?this.onContainerMouseMove(N):this.touch(N)},it.prototype.onContainerTouchStart=function(N){this.touchSelect(N)?this.onContainerMouseDown(N):(this.zoomOption(N),this.touch(N,!0))},it.prototype.onDocumentMouseMove=function(N){var G=this.chart,v=G.tooltip,M=this.chartPosition;N=this.normalize(N,M),!M||G.isInsidePlot(N.chartX-G.plotLeft,N.chartY-G.plotTop,{visiblePlotOnly:!0})||v&&v.shouldStickOnContact(N)||this.inClass(N.target,"highcharts-tracker")||this.reset()},it.prototype.onDocumentMouseUp=function(N){var G=Rt[w(it.hoverChartIndex,-1)];G&&G.pointer.drop(N)},it.prototype.pinch=function(N){var G=this,v=G.chart,M=G.pinchDown,b=N.touches||[],k=b.length,_=G.lastValidTouch,y=G.hasZoom,O={},B=1===k&&(G.inClass(N.target,"highcharts-tracker")&&v.runTrackerClick||G.runChartClick),H={},at=G.chart.tooltip;at=1===k&&w(at&&at.options.followTouchMove,!0);var ft=G.selectionMarker;1<k?G.initiated=!0:at&&(G.initiated=!1),y&&G.initiated&&!B&&!1!==N.cancelable&&N.preventDefault(),[].map.call(b,function(rt){return G.normalize(rt)}),"touchstart"===N.type?([].forEach.call(b,function(rt,z){M[z]={chartX:rt.chartX,chartY:rt.chartY}}),_.x=[M[0].chartX,M[1]&&M[1].chartX],_.y=[M[0].chartY,M[1]&&M[1].chartY],v.axes.forEach(function(rt){if(rt.zoomEnabled){var z=v.bounds[rt.horiz?"h":"v"],q=rt.minPixelPadding,mt=rt.toPixels(Math.min(w(rt.options.min,rt.dataMin),rt.dataMin)),pt=rt.toPixels(Math.max(w(rt.options.max,rt.dataMax),rt.dataMax)),dt=Math.max(mt,pt);z.min=Math.min(rt.pos,Math.min(mt,pt)-q),z.max=Math.max(rt.pos+rt.len,dt+q)}}),G.res=!0):at?this.runPointActions(G.normalize(N)):M.length&&(x(v,"touchpan",{originalEvent:N},function(){ft||(G.selectionMarker=ft=I({destroy:It,touch:!0},v.plotBox)),G.pinchTranslate(M,b,O,ft,H,_),G.hasPinched=y,G.scaleGroups(O,H)}),G.res&&(G.res=!1,this.reset(!1,0)))},it.prototype.pinchTranslate=function(N,G,v,M,b,k){this.zoomHor&&this.pinchTranslateDirection(!0,N,G,v,M,b,k),this.zoomVert&&this.pinchTranslateDirection(!1,N,G,v,M,b,k)},it.prototype.pinchTranslateDirection=function(N,G,v,M,b,k,_,y){var O=this.chart,B=N?"x":"y",H=N?"X":"Y",at="chart"+H,ft=N?"width":"height",rt=O["plot"+(N?"Left":"Top")],z=O.inverted,q=O.bounds[N?"h":"v"],mt=1===G.length,pt=G[0][at],dt=!mt&&G[1][at];G=function(){"number"==typeof At&&20<Math.abs(pt-dt)&&(ht=y||Math.abs(Lt-At)/Math.abs(pt-dt)),lt=(rt-Lt)/ht+pt,Y=O["plot"+(N?"Width":"Height")]/ht};var Y,lt,ht=y||1,Lt=v[0][at],At=!mt&&v[1][at];if(G(),(v=lt)<q.min){v=q.min;var Wt=!0}else v+Y>q.max&&(v=q.max-Y,Wt=!0);Wt?(Lt-=.8*(Lt-_[B][0]),"number"==typeof At&&(At-=.8*(At-_[B][1])),G()):_[B]=[Lt,At],z||(k[B]=lt-rt,k[ft]=Y),k=z?1/ht:ht,b[ft]=Y,b[B]=v,M[z?N?"scaleY":"scaleX":"scale"+H]=ht,M["translate"+H]=k*rt+(Lt-k*pt)},it.prototype.reset=function(N,G){var v=this.chart,M=v.hoverSeries,b=v.hoverPoint,k=v.hoverPoints,_=v.tooltip,y=_&&_.shared?k:b;N&&y&&l(y).forEach(function(O){O.series.isCartesian&&typeof O.plotX>"u"&&(N=!1)}),N?_&&y&&l(y).length&&(_.refresh(y),_.shared&&k?k.forEach(function(O){O.setState(O.state,!0),O.series.isCartesian&&(O.series.xAxis.crosshair&&O.series.xAxis.drawCrosshair(null,O),O.series.yAxis.crosshair&&O.series.yAxis.drawCrosshair(null,O))}):b&&(b.setState(b.state,!0),v.axes.forEach(function(O){O.crosshair&&b.series[O.coll]===O&&O.drawCrosshair(null,b)}))):(b&&b.onMouseOut(),k&&k.forEach(function(O){O.setState()}),M&&M.onMouseOut(),_&&_.hide(G),this.unDocMouseMove&&(this.unDocMouseMove=this.unDocMouseMove()),v.axes.forEach(function(O){O.hideCrosshair()}),this.hoverX=v.hoverPoints=v.hoverPoint=null)},it.prototype.runPointActions=function(N,G,v){var M=this.chart,b=M.tooltip&&M.tooltip.options.enabled?M.tooltip:void 0,k=!!b&&b.shared,_=G||M.hoverPoint,y=_&&_.series||M.hoverSeries;G=this.getHoverData(_,y,M.series,(!N||"touchmove"!==N.type)&&(!!G||y&&y.directTouch&&this.isDirectTouch),k,N),_=G.hoverPoint;var O=G.hoverPoints;G=(y=G.hoverSeries)&&y.tooltipOptions.followPointer&&!y.tooltipOptions.split;var B=k&&y&&!y.noSharedTooltip;if(_&&(v||_!==M.hoverPoint||b&&b.isHidden)){if((M.hoverPoints||[]).forEach(function(H){-1===O.indexOf(H)&&H.setState()}),M.hoverSeries!==y&&y.onMouseOver(),this.applyInactiveState(O),(O||[]).forEach(function(H){H.setState("hover")}),M.hoverPoint&&M.hoverPoint.firePointEvent("mouseOut"),!_.series)return;M.hoverPoints=O,M.hoverPoint=_,_.firePointEvent("mouseOver",void 0,function(){b&&_&&b.refresh(B?O:_,N)})}else G&&b&&!b.isHidden&&(v=b.getAnchor([{}],N),M.isInsidePlot(v[0],v[1],{visiblePlotOnly:!0})&&b.updatePosition({plotX:v[0],plotY:v[1]}));this.unDocMouseMove||(this.unDocMouseMove=K(M.container.ownerDocument,"mousemove",function(H){var at=Rt[it.hoverChartIndex];at&&at.pointer.onDocumentMouseMove(H)}),this.eventsToUnbind.push(this.unDocMouseMove)),M.axes.forEach(function(H){var ft,at=w((H.crosshair||{}).snap,!0);at&&((ft=M.hoverPoint)&&ft.series[H.coll]===H||(ft=A(O,function(rt){return rt.series&&rt.series[H.coll]===H}))),ft||!at?H.drawCrosshair(N,ft):H.hideCrosshair()})},it.prototype.scaleGroups=function(N,G){var v=this.chart;v.series.forEach(function(M){var b=N||M.getPlotBox();M.group&&(M.xAxis&&M.xAxis.zoomEnabled||v.mapView)&&(M.group.attr(b),M.markerGroup&&(M.markerGroup.attr(b),M.markerGroup.clip(G?v.clipRect:null)),M.dataLabelsGroup&&M.dataLabelsGroup.attr(b))}),v.clipRect.attr(G||v.clipBox)},it.prototype.setDOMEvents=function(){var N=this,G=this.chart.container,v=G.ownerDocument;G.onmousedown=this.onContainerMouseDown.bind(this),G.onmousemove=this.onContainerMouseMove.bind(this),G.onclick=this.onContainerClick.bind(this),this.eventsToUnbind.push(K(G,"mouseenter",this.onContainerMouseEnter.bind(this))),this.eventsToUnbind.push(K(G,"mouseleave",this.onContainerMouseLeave.bind(this))),it.unbindDocumentMouseUp||(it.unbindDocumentMouseUp=K(v,"mouseup",this.onDocumentMouseUp.bind(this)));for(var M=this.chart.renderTo.parentElement;M&&"BODY"!==M.tagName;)this.eventsToUnbind.push(K(M,"scroll",function(){delete N.chartPosition})),M=M.parentElement;xt.hasTouch&&(this.eventsToUnbind.push(K(G,"touchstart",this.onContainerTouchStart.bind(this),{passive:!1})),this.eventsToUnbind.push(K(G,"touchmove",this.onContainerTouchMove.bind(this),{passive:!1})),it.unbindDocumentTouchEnd||(it.unbindDocumentTouchEnd=K(v,"touchend",this.onDocumentTouchEnd.bind(this),{passive:!1})))},it.prototype.setHoverChartIndex=function(){var N=this.chart,G=xt.charts[w(it.hoverChartIndex,-1)];G&&G!==N&&G.pointer.onContainerMouseLeave({relatedTarget:N.container}),G&&G.mouseIsDown||(it.hoverChartIndex=N.index)},it.prototype.touch=function(N,G){var v=this.chart;if(this.setHoverChartIndex(),1===N.touches.length)if(N=this.normalize(N),v.isInsidePlot(N.chartX-v.plotLeft,N.chartY-v.plotTop,{visiblePlotOnly:!0})&&!v.openMenu){if(G&&this.runPointActions(N),"touchmove"===N.type)var b=!!(G=this.pinchDown)[0]&&4<=Math.sqrt(Math.pow(G[0].chartX-N.chartX,2)+Math.pow(G[0].chartY-N.chartY,2));w(b,!0)&&this.pinch(N)}else G&&this.reset();else 2===N.touches.length&&this.pinch(N)},it.prototype.touchSelect=function(N){return!(!this.chart.options.chart.zooming.singleTouch||!N.touches||1!==N.touches.length)},it.prototype.zoomOption=function(N){var G=this.chart,v=G.options.chart;G=G.inverted;var M=v.zooming.type||"";/touch/.test(N.type)&&(M=w(v.zooming.pinchType,M)),this.zoomX=N=/x/.test(M),this.zoomY=v=/y/.test(M),this.zoomHor=N&&!G||v&&G,this.zoomVert=v&&!G||N&&G,this.hasZoom=N||v},it}()}),te(Ct,"Core/MSPointer.js",[Ct["Core/Globals.js"],Ct["Core/Pointer.js"],Ct["Core/Utilities.js"]],function(wt,xt,jt){function zt(){var nt=[];return nt.item=function(w){return this[w]},A(j,function(w){nt.push({pageX:w.pageX,pageY:w.pageY,target:w.target})}),nt}function Ut(nt,w,l,it){var N=It[xt.hoverChartIndex||NaN];"touch"!==nt.pointerType&&nt.pointerType!==nt.MSPOINTER_TYPE_TOUCH||!N||(N=N.pointer,it(nt),N[w]({type:l,target:nt.currentTarget,preventDefault:et,touches:zt()}))}var nt,Rt=this&&this.__extends||(nt=function(w,l){return(nt=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(it,N){it.__proto__=N}||function(it,N){for(var G in N)N.hasOwnProperty(G)&&(it[G]=N[G])})(w,l)},function(w,l){function it(){this.constructor=w}nt(w,l),w.prototype=null===l?Object.create(l):(it.prototype=l.prototype,new it)}),It=wt.charts,K=wt.doc,et=wt.noop,st=wt.win,R=jt.addEvent,I=jt.css,A=jt.objectEach,x=jt.pick,T=jt.removeEvent,j={},V=!!st.PointerEvent;return function(nt){function w(){return null!==nt&&nt.apply(this,arguments)||this}return Rt(w,nt),w.isRequired=function(){return!(wt.hasTouch||!st.PointerEvent&&!st.MSPointerEvent)},w.prototype.batchMSEvents=function(l){l(this.chart.container,V?"pointerdown":"MSPointerDown",this.onContainerPointerDown),l(this.chart.container,V?"pointermove":"MSPointerMove",this.onContainerPointerMove),l(K,V?"pointerup":"MSPointerUp",this.onDocumentPointerUp)},w.prototype.destroy=function(){this.batchMSEvents(T),nt.prototype.destroy.call(this)},w.prototype.init=function(l,it){nt.prototype.init.call(this,l,it),this.hasZoom&&I(l.container,{"-ms-touch-action":"none","touch-action":"none"})},w.prototype.onContainerPointerDown=function(l){Ut(l,"onContainerTouchStart","touchstart",function(it){j[it.pointerId]={pageX:it.pageX,pageY:it.pageY,target:it.currentTarget}})},w.prototype.onContainerPointerMove=function(l){Ut(l,"onContainerTouchMove","touchmove",function(it){j[it.pointerId]={pageX:it.pageX,pageY:it.pageY},j[it.pointerId].target||(j[it.pointerId].target=it.currentTarget)})},w.prototype.onDocumentPointerUp=function(l){Ut(l,"onDocumentTouchEnd","touchend",function(it){delete j[it.pointerId]})},w.prototype.setDOMEvents=function(){var l=this.chart.tooltip;nt.prototype.setDOMEvents.call(this),(this.hasZoom||x(l&&l.options.followTouchMove,!0))&&this.batchMSEvents(R)},w}(xt)}),te(Ct,"Core/Legend/Legend.js",[Ct["Core/Animation/AnimationUtilities.js"],Ct["Core/FormatUtilities.js"],Ct["Core/Globals.js"],Ct["Core/Series/Point.js"],Ct["Core/Renderer/RendererUtilities.js"],Ct["Core/Utilities.js"]],function(wt,xt,jt,zt,Ut,Rt){var It=wt.animObject,K=wt.setAnimation,et=xt.format,st=jt.marginNames,R=Ut.distribute,I=Rt.addEvent,A=Rt.createElement,x=Rt.css,T=Rt.defined,j=Rt.discardElement,V=Rt.find,nt=Rt.fireEvent,w=Rt.isNumber,l=Rt.merge,it=Rt.pick,N=Rt.relativeLength,G=Rt.stableSort,v=Rt.syncTimeout;return function(){function M(b,k){this.allItems=[],this.contentGroup=this.box=void 0,this.display=!1,this.group=void 0,this.offsetWidth=this.maxLegendWidth=this.maxItemWidth=this.legendWidth=this.legendHeight=this.lastLineHeight=this.lastItemY=this.itemY=this.itemX=this.itemMarginTop=this.itemMarginBottom=this.itemHeight=this.initialItemY=0,this.options=void 0,this.padding=0,this.pages=[],this.proximate=!1,this.scrollGroup=void 0,this.widthOption=this.totalItemWidth=this.titleHeight=this.symbolWidth=this.symbolHeight=0,this.chart=b,this.init(b,k)}return M.prototype.init=function(b,k){this.chart=b,this.setOptions(k),k.enabled&&(this.render(),I(this.chart,"endResize",function(){this.legend.positionCheckboxes()}),this.proximate?this.unchartrender=I(this.chart,"render",function(){this.legend.proximatePositions(),this.legend.positionItems()}):this.unchartrender&&this.unchartrender())},M.prototype.setOptions=function(b){var k=it(b.padding,8);this.options=b,this.chart.styledMode||(this.itemStyle=b.itemStyle,this.itemHiddenStyle=l(this.itemStyle,b.itemHiddenStyle)),this.itemMarginTop=b.itemMarginTop||0,this.itemMarginBottom=b.itemMarginBottom||0,this.padding=k,this.initialItemY=k-5,this.symbolWidth=it(b.symbolWidth,16),this.pages=[],this.proximate="proximate"===b.layout&&!this.chart.inverted,this.baseline=void 0},M.prototype.update=function(b,k){var _=this.chart;this.setOptions(l(!0,this.options,b)),this.destroy(),_.isDirtyLegend=_.isDirtyBox=!0,it(k,!0)&&_.redraw(),nt(this,"afterUpdate")},M.prototype.colorizeItem=function(b,k){var _=b.legendItem||{},y=_.group,O=_.label,B=_.line;if(_=_.symbol,y&&y[k?"removeClass":"addClass"]("highcharts-legend-item-hidden"),!this.chart.styledMode){var H=this.options;y=this.itemHiddenStyle.color,H=k?H.itemStyle.color:y;var at=k&&b.color||y,ft=b.options&&b.options.marker,rt={fill:at};O&&O.css({fill:H,color:H}),B&&B.attr({stroke:at}),_&&(ft&&_.isMarker&&(rt=b.pointAttribs(),k||(rt.stroke=rt.fill=y)),_.attr(rt))}nt(this,"afterColorizeItem",{item:b,visible:k})},M.prototype.positionItems=function(){this.allItems.forEach(this.positionItem,this),this.chart.isResizing||this.positionCheckboxes()},M.prototype.positionItem=function(b){var k=this,_=b.legendItem||{},y=_.group,O=_.x;O=void 0===O?0:O,_=void 0===(_=_.y)?0:_;var B=this.options,H=B.symbolPadding,at=!B.rtl;B=b.checkbox,y&&y.element&&(H={translateX:at?O:this.legendWidth-O-2*H-4,translateY:_},y[T(y.translateY)?"animate":"attr"](H,void 0,function(){nt(k,"afterPositionItem",{item:b})})),B&&(B.x=O,B.y=_)},M.prototype.destroyItem=function(b){for(var k=b.checkbox,_=b.legendItem||{},y=0,O=["group","label","line","symbol"];y<O.length;y++){var B=O[y];_[B]&&(_[B]=_[B].destroy())}k&&j(k),b.legendItem=void 0},M.prototype.destroy=function(){for(var b=0,k=this.getAllItems();b<k.length;b++)this.destroyItem(k[b]);for(b=0,k="clipRect up down pager nav box title group".split(" ");b<k.length;b++){var _=k[b];this[_]&&(this[_]=this[_].destroy())}this.display=null},M.prototype.positionCheckboxes=function(){var b=this.group&&this.group.alignAttr,k=this.clipHeight||this.legendHeight,_=this.titleHeight;if(b){var y=b.translateY;this.allItems.forEach(function(O){var B=O.checkbox;if(B){var H=y+_+B.y+(this.scrollOffset||0)+3;x(B,{left:b.translateX+O.checkboxOffset+B.x-20+"px",top:H+"px",display:this.proximate||H>y-6&&H<y+k-6?"":"none"})}},this)}},M.prototype.renderTitle=function(){var b=this.options,k=this.padding,_=b.title,y=0;_.text&&(this.title||(this.title=this.chart.renderer.label(_.text,k-3,k-4,void 0,void 0,void 0,b.useHTML,void 0,"legend-title").attr({zIndex:1}),this.chart.styledMode||this.title.css(_.style),this.title.add(this.group)),_.width||this.title.css({width:this.maxLegendWidth+"px"}),y=(b=this.title.getBBox()).height,this.offsetWidth=b.width,this.contentGroup.attr({translateY:y})),this.titleHeight=y},M.prototype.setText=function(b){var k=this.options;b.legendItem.label.attr({text:k.labelFormat?et(k.labelFormat,b,this.chart):k.labelFormatter.call(b)})},M.prototype.renderItem=function(b){var k=b.legendItem=b.legendItem||{},_=this.chart,y=_.renderer,O=this.options,B=this.symbolWidth,H=O.symbolPadding||0,at=this.itemStyle,ft=this.itemHiddenStyle,rt="horizontal"===O.layout?it(O.itemDistance,20):0,z=!O.rtl,q=!b.series,mt=!q&&b.series.drawLegendSymbol?b.series:b,pt=mt.options,dt=this.createCheckboxForItem&&pt&&pt.showCheckbox,Y=O.useHTML,lt=b.options.className,ht=k.label;pt=B+H+rt+(dt?20:0),ht||(k.group=y.g("legend-item").addClass("highcharts-"+mt.type+"-series highcharts-color-"+b.colorIndex+(lt?" "+lt:"")+(q?" highcharts-series-"+b.index:"")).attr({zIndex:1}).add(this.scrollGroup),k.label=ht=y.text("",z?B+H:-H,this.baseline||0,Y),_.styledMode||ht.css(l(b.visible?at:ft)),ht.attr({align:z?"left":"right",zIndex:2}).add(k.group),this.baseline||(this.fontMetrics=y.fontMetrics(_.styledMode?12:at.fontSize,ht),this.baseline=this.fontMetrics.f+3+this.itemMarginTop,ht.attr("y",this.baseline),this.symbolHeight=O.symbolHeight||this.fontMetrics.f,O.squareSymbol&&(this.symbolWidth=it(O.symbolWidth,Math.max(this.symbolHeight,16)),pt=this.symbolWidth+H+rt+(dt?20:0),z&&ht.attr("x",this.symbolWidth+H))),mt.drawLegendSymbol(this,b),this.setItemEvents&&this.setItemEvents(b,ht,Y)),dt&&!b.checkbox&&this.createCheckboxForItem&&this.createCheckboxForItem(b),this.colorizeItem(b,b.visible),!_.styledMode&&at.width||ht.css({width:(O.itemWidth||this.widthOption||_.spacingBox.width)-pt+"px"}),this.setText(b),_=ht.getBBox(),y=this.fontMetrics&&this.fontMetrics.h||0,b.itemWidth=b.checkboxOffset=O.itemWidth||k.labelWidth||_.width+pt,this.maxItemWidth=Math.max(this.maxItemWidth,b.itemWidth),this.totalItemWidth+=b.itemWidth,this.itemHeight=b.itemHeight=Math.round(k.labelHeight||(_.height>1.5*y?_.height:y))},M.prototype.layoutItem=function(b){var k=this.options,_=this.padding,y="horizontal"===k.layout,O=b.itemHeight,B=this.itemMarginBottom,H=this.itemMarginTop,at=y?it(k.itemDistance,20):0,ft=this.maxLegendWidth;k=k.alignColumns&&this.totalItemWidth>ft?this.maxItemWidth:b.itemWidth;var rt=b.legendItem||{};y&&this.itemX-_+k>ft&&(this.itemX=_,this.lastLineHeight&&(this.itemY+=H+this.lastLineHeight+B),this.lastLineHeight=0),this.lastItemY=H+this.itemY+B,this.lastLineHeight=Math.max(O,this.lastLineHeight),rt.x=this.itemX,rt.y=this.itemY,y?this.itemX+=k:(this.itemY+=H+O+B,this.lastLineHeight=O),this.offsetWidth=this.widthOption||Math.max((y?this.itemX-_-(b.checkbox?0:at):k)+_,this.offsetWidth)},M.prototype.getAllItems=function(){var b=[];return this.chart.series.forEach(function(k){var _=k&&k.options;k&&it(_.showInLegend,!T(_.linkedTo)&&void 0,!0)&&(b=b.concat((k.legendItem||{}).labels||("point"===_.legendType?k.data:k)))}),nt(this,"afterGetAllItems",{allItems:b}),b},M.prototype.getAlignment=function(){var b=this.options;return this.proximate?b.align.charAt(0)+"tv":b.floating?"":b.align.charAt(0)+b.verticalAlign.charAt(0)+b.layout.charAt(0)},M.prototype.adjustMargins=function(b,k){var _=this.chart,y=this.options,O=this.getAlignment();O&&[/(lth|ct|rth)/,/(rtv|rm|rbv)/,/(rbh|cb|lbh)/,/(lbv|lm|ltv)/].forEach(function(B,H){B.test(O)&&!T(b[H])&&(_[st[H]]=Math.max(_[st[H]],_.legend[(H+1)%2?"legendHeight":"legendWidth"]+[1,-1,-1,1][H]*y[H%2?"x":"y"]+it(y.margin,12)+k[H]+(_.titleOffset[H]||0)))})},M.prototype.proximatePositions=function(){var b=this.chart,k=[],_="left"===this.options.align;this.allItems.forEach(function(at){var ft,rt=_;if(at.yAxis){at.xAxis.options.reversed&&(rt=!rt),at.points&&(ft=V(rt?at.points:at.points.slice(0).reverse(),function(q){return w(q.plotY)})),rt=this.itemMarginTop+at.legendItem.label.getBBox().height+this.itemMarginBottom;var z=at.yAxis.top-b.plotTop;at.visible?(ft=ft?ft.plotY:at.yAxis.height,ft+=z-.3*rt):ft=z+at.yAxis.height,k.push({target:ft,size:rt,item:at})}},this);for(var O=0,B=R(k,b.plotHeight);O<B.length;O++){var H=B[O];H.pos&&((H.item.legendItem||{}).y=b.plotTop-b.spacing[0]+H.pos)}},M.prototype.render=function(){var b=this.chart,k=b.renderer,_=this.options,y=this.padding,O=this.getAllItems(),B=this.group,H=this.box;this.itemX=y,this.itemY=this.initialItemY,this.lastItemY=this.offsetWidth=0,this.widthOption=N(_.width,b.spacingBox.width-y);var at=b.spacingBox.width-2*y-_.x;-1<["rm","lm"].indexOf(this.getAlignment().substring(0,2))&&(at/=2),this.maxLegendWidth=this.widthOption||at,B||(this.group=B=k.g("legend").addClass(_.className||"").attr({zIndex:7}).add(),this.contentGroup=k.g().attr({zIndex:1}).add(B),this.scrollGroup=k.g().add(this.contentGroup)),this.renderTitle(),G(O,function(rt,z){return(rt.options&&rt.options.legendIndex||0)-(z.options&&z.options.legendIndex||0)}),_.reversed&&O.reverse(),this.allItems=O,this.display=at=!!O.length,this.itemHeight=this.totalItemWidth=this.maxItemWidth=this.lastLineHeight=0,O.forEach(this.renderItem,this),O.forEach(this.layoutItem,this),O=(this.widthOption||this.offsetWidth)+y;var ft=this.lastItemY+this.lastLineHeight+this.titleHeight;ft=this.handleOverflow(ft),ft+=y,H||(this.box=H=k.rect().addClass("highcharts-legend-box").attr({r:_.borderRadius}).add(B)),b.styledMode||H.attr({stroke:_.borderColor,"stroke-width":_.borderWidth||0,fill:_.backgroundColor||"none"}).shadow(_.shadow),0<O&&0<ft&&H[H.placed?"animate":"attr"](H.crisp.call({},{x:0,y:0,width:O,height:ft},H.strokeWidth())),B[at?"show":"hide"](),b.styledMode&&"none"===B.getStyle("display")&&(O=ft=0),this.legendWidth=O,this.legendHeight=ft,at&&this.align(),this.proximate||this.positionItems(),nt(this,"afterRender")},M.prototype.align=function(b){void 0===b&&(b=this.chart.spacingBox);var k=this.chart,_=this.options,y=b.y;/(lth|ct|rth)/.test(this.getAlignment())&&0<k.titleOffset[0]?y+=k.titleOffset[0]:/(lbh|cb|rbh)/.test(this.getAlignment())&&0<k.titleOffset[2]&&(y-=k.titleOffset[2]),y!==b.y&&(b=l(b,{y})),k.hasRendered||(this.group.placed=!1),this.group.align(l(_,{width:this.legendWidth,height:this.legendHeight,verticalAlign:this.proximate?"top":_.verticalAlign}),!0,b)},M.prototype.handleOverflow=function(b){var lt,ht,Lt,k=this,_=this.chart,y=_.renderer,O=this.options,B=O.y,H="top"===O.verticalAlign,at=this.padding,ft=O.maxHeight,rt=O.navigation,z=it(rt.animation,!0),q=rt.arrowSize||12,mt=this.pages,pt=this.allItems,dt=function(Ot){"number"==typeof Ot?Wt.attr({height:Ot}):Wt&&(k.clipRect=Wt.destroy(),k.contentGroup.clip()),k.contentGroup.div&&(k.contentGroup.div.style.clip=Ot?"rect("+at+"px,9999px,"+(at+Ot)+"px,0)":"auto")},Y=function(Ot){return k[Ot]=y.circle(0,0,1.3*q).translate(q/2,q/2).add(At),_.styledMode||k[Ot].attr("fill","rgba(0,0,0,0.0001)"),k[Ot]};B=_.spacingBox.height+(H?-B:B)-at;var At=this.nav,Wt=this.clipRect;return"horizontal"!==O.layout||"middle"===O.verticalAlign||O.floating||(B/=2),ft&&(B=Math.min(B,ft)),mt.length=0,b&&0<B&&b>B&&!1!==rt.enabled?(this.clipHeight=lt=Math.max(B-20-this.titleHeight-at,0),this.currentPage=it(this.currentPage,1),this.fullHeight=b,pt.forEach(function(Ot,se){Ot=(Lt=Ot.legendItem||{}).y||0;var _e=Math.round(Lt.label.getBBox().height),We=mt.length;(!We||Ot-mt[We-1]>lt&&(ht||Ot)!==mt[We-1])&&(mt.push(ht||Ot),We++),Lt.pageIx=We-1,ht&&((pt[se-1].legendItem||{}).pageIx=We-1),se===pt.length-1&&Ot+_e-mt[We-1]>lt&&_e<=lt&&(mt.push(Ot),Lt.pageIx=We),Ot!==ht&&(ht=Ot)}),Wt||(Wt=k.clipRect=y.clipRect(0,at,9999,0),k.contentGroup.clip(Wt)),dt(lt),At||(this.nav=At=y.g().attr({zIndex:1}).add(this.group),this.up=y.symbol("triangle",0,0,q,q).add(At),Y("upTracker").on("click",function(){k.scroll(-1,z)}),this.pager=y.text("",15,10).addClass("highcharts-legend-navigation"),!_.styledMode&&rt.style&&this.pager.css(rt.style),this.pager.add(At),this.down=y.symbol("triangle-down",0,0,q,q).add(At),Y("downTracker").on("click",function(){k.scroll(1,z)})),k.scroll(0),b=B):At&&(dt(),this.nav=At.destroy(),this.scrollGroup.attr({translateY:1}),this.clipHeight=0),b},M.prototype.scroll=function(b,k){var _=this,y=this.chart,O=this.pages,B=O.length,H=this.clipHeight,at=this.options.navigation,ft=this.pager,rt=this.padding,z=this.currentPage+b;z>B&&(z=B),0<z&&(typeof k<"u"&&K(k,y),this.nav.attr({translateX:rt,translateY:H+this.padding+7+this.titleHeight,visibility:"inherit"}),[this.up,this.upTracker].forEach(function(q){q.attr({class:1===z?"highcharts-legend-nav-inactive":"highcharts-legend-nav-active"})}),ft.attr({text:z+"/"+B}),[this.down,this.downTracker].forEach(function(q){q.attr({x:18+this.pager.getBBox().width,class:z===B?"highcharts-legend-nav-inactive":"highcharts-legend-nav-active"})},this),y.styledMode||(this.up.attr({fill:1===z?at.inactiveColor:at.activeColor}),this.upTracker.css({cursor:1===z?"default":"pointer"}),this.down.attr({fill:z===B?at.inactiveColor:at.activeColor}),this.downTracker.css({cursor:z===B?"default":"pointer"})),this.scrollOffset=-O[z-1]+this.initialItemY,this.scrollGroup.animate({translateY:this.scrollOffset}),this.currentPage=z,this.positionCheckboxes(),b=It(it(k,y.renderer.globalAnimation,!0)),v(function(){nt(_,"afterScroll",{currentPage:z})},b.duration))},M.prototype.setItemEvents=function(b,k,_){var y=this,O=b.legendItem||{},B=y.chart.renderer.boxWrapper,H=b instanceof zt,at="highcharts-legend-"+(H?"point":"series")+"-active",ft=y.chart.styledMode,rt=function(q){y.allItems.forEach(function(mt){b!==mt&&[mt].concat(mt.linkedSeries||[]).forEach(function(pt){pt.setState(q,!H)})})},z=0;for(_=_?[k,O.symbol]:[O.group];z<_.length;z++)(O=_[z])&&O.on("mouseover",function(){b.visible&&rt("inactive"),b.setState("hover"),b.visible&&B.addClass(at),ft||k.css(y.options.itemHoverStyle)}).on("mouseout",function(){y.chart.styledMode||k.css(l(b.visible?y.itemStyle:y.itemHiddenStyle)),rt(""),B.removeClass(at),b.setState()}).on("click",function(q){var mt=function(){b.setVisible&&b.setVisible(),rt(b.visible?"inactive":"")};B.removeClass(at),q={browserEvent:q},b.firePointEvent?b.firePointEvent("legendItemClick",q,mt):nt(b,"legendItemClick",q,mt)})},M.prototype.createCheckboxForItem=function(b){b.checkbox=A("input",{type:"checkbox",className:"highcharts-legend-checkbox",checked:b.selected,defaultChecked:b.selected},this.options.itemCheckboxStyle,this.chart.container),I(b.checkbox,"click",function(k){nt(b.series||b,"checkboxClick",{checked:k.target.checked,item:b},function(){b.select()})})},M}()}),te(Ct,"Core/Series/SeriesRegistry.js",[Ct["Core/Globals.js"],Ct["Core/Defaults.js"],Ct["Core/Series/Point.js"],Ct["Core/Utilities.js"]],function(wt,xt,jt,zt){var K,Ut=xt.defaultOptions,Rt=zt.extendClass,It=zt.merge;return function(et){function st(R,I){var A=Ut.plotOptions||{},x=I.defaultOptions,T=I.prototype;T.type=R,T.pointClass||(T.pointClass=jt),x&&(A[R]=x),et.seriesTypes[R]=I}et.seriesTypes=wt.seriesTypes,et.registerSeriesType=st,et.seriesType=function(R,I,A,x,T){var j=Ut.plotOptions||{};return j[R]=It(j[I=I||""],A),st(R,Rt(et.seriesTypes[I]||function(){},x)),et.seriesTypes[R].prototype.type=R,T&&(et.seriesTypes[R].prototype.pointClass=Rt(jt,T)),et.seriesTypes[R]}}(K||(K={})),K}),te(Ct,"Core/Chart/Chart.js",[Ct["Core/Animation/AnimationUtilities.js"],Ct["Core/Axis/Axis.js"],Ct["Core/Defaults.js"],Ct["Core/FormatUtilities.js"],Ct["Core/Foundation.js"],Ct["Core/Globals.js"],Ct["Core/Legend/Legend.js"],Ct["Core/MSPointer.js"],Ct["Core/Pointer.js"],Ct["Core/Renderer/RendererRegistry.js"],Ct["Core/Series/SeriesRegistry.js"],Ct["Core/Renderer/SVG/SVGRenderer.js"],Ct["Core/Time.js"],Ct["Core/Utilities.js"],Ct["Core/Renderer/HTML/AST.js"]],function(wt,xt,jt,zt,Ut,Rt,It,K,et,st,R,I,A,x,T){var j=wt.animate,V=wt.animObject,nt=wt.setAnimation,w=jt.defaultOptions,l=jt.defaultTime,it=zt.numberFormat,N=Ut.registerEventOptions,G=Rt.charts,v=Rt.doc,M=Rt.marginNames,b=Rt.svg,k=Rt.win,_=R.seriesTypes,y=x.addEvent,O=x.attr,B=x.cleanRecursively,H=x.createElement,at=x.css,ft=x.defined,rt=x.discardElement,z=x.erase,q=x.error,mt=x.extend,pt=x.find,dt=x.fireEvent,Y=x.getStyle,lt=x.isArray,ht=x.isNumber,Lt=x.isObject,At=x.isString,Wt=x.merge,Ot=x.objectEach,se=x.pick,_e=x.pInt,We=x.relativeLength,He=x.removeEvent,Fe=x.splat,pe=x.syncTimeout,Me=x.uniqueKey;return wt=function(){function me(qt,Kt,xe){this.series=this.renderTo=this.renderer=this.pointer=this.pointCount=this.plotWidth=this.plotTop=this.plotLeft=this.plotHeight=this.plotBox=this.options=this.numberFormatter=this.margin=this.legend=this.labelCollectors=this.isResizing=this.index=this.eventOptions=this.container=this.colorCounter=this.clipBox=this.chartWidth=this.chartHeight=this.bounds=this.axisOffset=this.axes=void 0,this.sharedClips={},this.yAxis=this.xAxis=this.userOptions=this.titleOffset=this.time=this.symbolCounter=this.spacingBox=this.spacing=void 0,this.getArgs(qt,Kt,xe)}return me.chart=function(qt,Kt,xe){return new me(qt,Kt,xe)},me.prototype.getArgs=function(qt,Kt,xe){At(qt)||qt.nodeName?(this.renderTo=qt,this.init(Kt,xe)):this.init(qt,Kt)},me.prototype.init=function(qt,Kt){var xe=qt.plotOptions||{};dt(this,"init",{args:arguments},function(){var be=Wt(w,qt),Te=be.chart;Ot(be.plotOptions,function(oi,fi){Lt(oi)&&(oi.tooltip=xe[fi]&&Wt(xe[fi].tooltip)||void 0)}),be.tooltip.userOptions=qt.chart&&qt.chart.forExport&&qt.tooltip.userOptions||qt.tooltip,this.userOptions=qt,this.margin=[],this.spacing=[],this.bounds={h:{},v:{}},this.labelCollectors=[],this.callback=Kt,this.isResizing=0;var ye=Te.zooming=Te.zooming||{};qt.chart&&!qt.chart.zooming&&(ye.resetButton=Te.resetZoomButton),ye.key=se(ye.key,Te.zoomKey),ye.pinchType=se(ye.pinchType,Te.pinchType),ye.singleTouch=se(ye.singleTouch,Te.zoomBySingleTouch),ye.type=se(ye.type,Te.zoomType),this.options=be,this.axes=[],this.series=[],this.time=qt.time&&Object.keys(qt.time).length?new A(qt.time):Rt.time,this.numberFormatter=Te.numberFormatter||it,this.styledMode=Te.styledMode,this.hasCartesianSeries=Te.showAxes,this.index=G.length,G.push(this),Rt.chartCount++,N(this,Te),this.xAxis=[],this.yAxis=[],this.pointCount=this.colorCounter=this.symbolCounter=0,dt(this,"afterInit"),this.firstRender()})},me.prototype.initSeries=function(qt){var Kt=this.options.chart,xe=_[Kt=qt.type||Kt.type||Kt.defaultSeriesType];return xe||q(17,!0,this,{missingModuleFor:Kt}),"function"==typeof(Kt=new xe).init&&Kt.init(this,qt),Kt},me.prototype.setSeriesData=function(){this.getSeriesOrderByLinks().forEach(function(qt){qt.points||qt.data||!qt.enabledDataSorting||qt.setData(qt.options.data,!1)})},me.prototype.getSeriesOrderByLinks=function(){return this.series.concat().sort(function(qt,Kt){return qt.linkedSeries.length||Kt.linkedSeries.length?Kt.linkedSeries.length-qt.linkedSeries.length:0})},me.prototype.orderSeries=function(qt){var Kt=this.series;qt=qt||0;for(var xe=Kt.length;qt<xe;++qt)Kt[qt]&&(Kt[qt].index=qt,Kt[qt].name=Kt[qt].getName())},me.prototype.isInsidePlot=function(qt,Kt,xe){void 0===xe&&(xe={});var be=this.inverted,Te=this.plotBox,ye=this.plotLeft,oi=this.plotTop,fi=this.scrollablePlotBox,tn=0,Ii=0;xe.visiblePlotOnly&&this.scrollingContainer&&(tn=(Ii=this.scrollingContainer).scrollLeft,Ii=Ii.scrollTop);var Pi=xe.series;if(Te=xe.visiblePlotOnly&&fi||Te,qt={x:fi=xe.inverted?Kt:qt,y:Kt=xe.inverted?qt:Kt,isInsidePlot:!0,options:xe},!xe.ignoreX){var Ji=Pi&&(be&&!this.polar?Pi.yAxis:Pi.xAxis)||{pos:ye,len:1/0};(fi=xe.paneCoordinates?Ji.pos+fi:ye+fi)>=Math.max(tn+ye,Ji.pos)&&fi<=Math.min(tn+ye+Te.width,Ji.pos+Ji.len)||(qt.isInsidePlot=!1)}return!xe.ignoreY&&qt.isInsidePlot&&(be=xe.axis&&!xe.axis.isXAxis&&xe.axis||Pi&&(be?Pi.xAxis:Pi.yAxis)||{pos:oi,len:1/0},(xe=xe.paneCoordinates?be.pos+Kt:oi+Kt)>=Math.max(Ii+oi,be.pos)&&xe<=Math.min(Ii+oi+Te.height,be.pos+be.len)||(qt.isInsidePlot=!1)),dt(this,"afterIsInsidePlot",qt),qt.isInsidePlot},me.prototype.redraw=function(qt){dt(this,"beforeRedraw");var Kt=this.hasCartesianSeries?this.axes:this.colorAxis||[],xe=this.series,be=this.pointer,Te=this.legend,ye=this.userOptions.legend,oi=this.renderer,fi=oi.isHidden(),tn=[],Ii=this.isDirtyBox,Pi=this.isDirtyLegend;for(this.setResponsive&&this.setResponsive(!1),nt(!!this.hasRendered&&qt,this),fi&&this.temporaryDisplay(),this.layOutTitles(),qt=xe.length;qt--;){var Ji=xe[qt];if(Ji.options.stacking||Ji.options.centerInCategory){var Mi=!0;if(Ji.isDirty){var nn=!0;break}}}if(nn)for(qt=xe.length;qt--;)(Ji=xe[qt]).options.stacking&&(Ji.isDirty=!0);xe.forEach(function(Ti){Ti.isDirty&&("point"===Ti.options.legendType?("function"==typeof Ti.updateTotals&&Ti.updateTotals(),Pi=!0):ye&&(ye.labelFormatter||ye.labelFormat)&&(Pi=!0)),Ti.isDirtyData&&dt(Ti,"updatedData")}),Pi&&Te&&Te.options.enabled&&(Te.render(),this.isDirtyLegend=!1),Mi&&this.getStacks(),Kt.forEach(function(Ti){Ti.updateNames(),Ti.setScale()}),this.getMargins(),Kt.forEach(function(Ti){Ti.isDirty&&(Ii=!0)}),Kt.forEach(function(Ti){var Cn=Ti.min+","+Ti.max;Ti.extKey!==Cn&&(Ti.extKey=Cn,tn.push(function(){dt(Ti,"afterSetExtremes",mt(Ti.eventArgs,Ti.getExtremes())),delete Ti.eventArgs})),(Ii||Mi)&&Ti.redraw()}),Ii&&this.drawChartBox(),dt(this,"predraw"),xe.forEach(function(Ti){(Ii||Ti.isDirty)&&Ti.visible&&Ti.redraw(),Ti.isDirtyData=!1}),be&&be.reset(!0),oi.draw(),dt(this,"redraw"),dt(this,"render"),fi&&this.temporaryDisplay(!0),tn.forEach(function(Ti){Ti.call()})},me.prototype.get=function(qt){function Kt(ye){return ye.id===qt||ye.options&&ye.options.id===qt}for(var xe=this.series,be=pt(this.axes,Kt)||pt(this.series,Kt),Te=0;!be&&Te<xe.length;Te++)be=pt(xe[Te].points||[],Kt);return be},me.prototype.getAxes=function(){var qt=this,Kt=this.options,xe=Kt.xAxis=Fe(Kt.xAxis||{});Kt=Kt.yAxis=Fe(Kt.yAxis||{}),dt(this,"getAxes"),xe.forEach(function(be,Te){be.index=Te,be.isX=!0}),Kt.forEach(function(be,Te){be.index=Te}),xe.concat(Kt).forEach(function(be){new xt(qt,be)}),dt(this,"afterGetAxes")},me.prototype.getSelectedPoints=function(){return this.series.reduce(function(qt,Kt){return Kt.getPointsCollection().forEach(function(xe){se(xe.selectedStaging,xe.selected)&&qt.push(xe)}),qt},[])},me.prototype.getSelectedSeries=function(){return this.series.filter(function(qt){return qt.selected})},me.prototype.setTitle=function(qt,Kt,xe){this.applyDescription("title",qt),this.applyDescription("subtitle",Kt),this.applyDescription("caption",void 0),this.layOutTitles(xe)},me.prototype.applyDescription=function(qt,Kt){var xe=this,be="title"===qt?{color:"#333333",fontSize:this.options.isStock?"16px":"18px"}:{color:"#666666"};be=this.options[qt]=Wt(!this.styledMode&&{style:be},this.options[qt],Kt);var Te=this[qt];Te&&Kt&&(this[qt]=Te=Te.destroy()),be&&!Te&&((Te=this.renderer.text(be.text,0,0,be.useHTML).attr({align:be.align,class:"highcharts-"+qt,zIndex:be.zIndex||4}).add()).update=function(ye){xe[{title:"setTitle",subtitle:"setSubtitle",caption:"setCaption"}[qt]](ye)},this.styledMode||Te.css(be.style),this[qt]=Te)},me.prototype.layOutTitles=function(qt){var Kt=[0,0,0],xe=this.renderer,be=this.spacingBox;["title","subtitle","caption"].forEach(function(ye){var Ii,oi=this[ye],fi=this.options[ye],tn=fi.verticalAlign||"top";if(ye="title"===ye?"top"===tn?-3:0:"top"===tn?Kt[0]+2:0,oi){this.styledMode||(Ii=fi.style&&fi.style.fontSize),Ii=xe.fontMetrics(Ii,oi).b,oi.css({width:(fi.width||be.width+(fi.widthAdjust||0))+"px"});var Pi=Math.round(oi.getBBox(fi.useHTML).height);oi.align(mt({y:"bottom"===tn?Ii:ye+Ii,height:Pi},fi),!1,"spacingBox"),fi.floating||("top"===tn?Kt[0]=Math.ceil(Kt[0]+Pi):"bottom"===tn&&(Kt[2]=Math.ceil(Kt[2]+Pi)))}},this),Kt[0]&&"top"===(this.options.title.verticalAlign||"top")&&(Kt[0]+=this.options.title.margin),Kt[2]&&"bottom"===this.options.caption.verticalAlign&&(Kt[2]+=this.options.caption.margin);var Te=!this.titleOffset||this.titleOffset.join(",")!==Kt.join(",");this.titleOffset=Kt,dt(this,"afterLayOutTitles"),!this.isDirtyBox&&Te&&(this.isDirtyBox=this.isDirtyLegend=Te,this.hasRendered&&se(qt,!0)&&this.isDirtyBox&&this.redraw())},me.prototype.getChartSize=function(){var qt=this.options.chart,Kt=qt.width;qt=qt.height;var xe=this.renderTo;ft(Kt)||(this.containerWidth=Y(xe,"width")),ft(qt)||(this.containerHeight=Y(xe,"height")),this.chartWidth=Math.max(0,Kt||this.containerWidth||600),this.chartHeight=Math.max(0,We(qt,this.chartWidth)||(1<this.containerHeight?this.containerHeight:400))},me.prototype.temporaryDisplay=function(qt){var Kt=this.renderTo;if(qt)for(;Kt&&Kt.style;)Kt.hcOrigStyle&&(at(Kt,Kt.hcOrigStyle),delete Kt.hcOrigStyle),Kt.hcOrigDetached&&(v.body.removeChild(Kt),Kt.hcOrigDetached=!1),Kt=Kt.parentNode;else for(;Kt&&Kt.style&&(v.body.contains(Kt)||Kt.parentNode||(Kt.hcOrigDetached=!0,v.body.appendChild(Kt)),("none"===Y(Kt,"display",!1)||Kt.hcOricDetached)&&(Kt.hcOrigStyle={display:Kt.style.display,height:Kt.style.height,overflow:Kt.style.overflow},qt={display:"block",overflow:"hidden"},Kt!==this.renderTo&&(qt.height=0),at(Kt,qt),Kt.offsetWidth||Kt.style.setProperty("display","block","important")),(Kt=Kt.parentNode)!==v.body););},me.prototype.setClassName=function(qt){this.container.className="highcharts-container "+(qt||"")},me.prototype.getContainer=function(){var be,qt=this.options,Kt=qt.chart,xe=Me(),Te=this.renderTo;Te||(this.renderTo=Te=Kt.renderTo),At(Te)&&(this.renderTo=Te=v.getElementById(Te)),Te||q(13,!0,this);var ye=_e(O(Te,"data-highcharts-chart"));ht(ye)&&G[ye]&&G[ye].hasRendered&&G[ye].destroy(),O(Te,"data-highcharts-chart",this.index),Te.innerHTML=T.emptyHTML,Kt.skipClone||Te.offsetWidth||this.temporaryDisplay(),this.getChartSize(),ye=this.chartWidth;var oi=this.chartHeight;if(at(Te,{overflow:"hidden"}),this.styledMode||(be=mt({position:"relative",overflow:"hidden",width:ye+"px",height:oi+"px",textAlign:"left",lineHeight:"normal",zIndex:0,"-webkit-tap-highlight-color":"rgba(0,0,0,0)",userSelect:"none","touch-action":"manipulation",outline:"none"},Kt.style||{})),this.container=xe=H("div",{id:xe},be,Te),this._cursor=xe.style.cursor,this.renderer=new(Kt.renderer||!b?st.getRendererType(Kt.renderer):I)(xe,ye,oi,void 0,Kt.forExport,qt.exporting&&qt.exporting.allowHTML,this.styledMode),nt(void 0,this),this.setClassName(Kt.className),this.styledMode)for(var fi in qt.defs)this.renderer.definition(qt.defs[fi]);else this.renderer.setStyle(Kt.style);this.renderer.chartIndex=this.index,dt(this,"afterGetContainer")},me.prototype.getMargins=function(qt){var Kt=this.spacing,xe=this.margin,be=this.titleOffset;this.resetMargins(),be[0]&&!ft(xe[0])&&(this.plotTop=Math.max(this.plotTop,be[0]+Kt[0])),be[2]&&!ft(xe[2])&&(this.marginBottom=Math.max(this.marginBottom,be[2]+Kt[2])),this.legend&&this.legend.display&&this.legend.adjustMargins(xe,Kt),dt(this,"getMargins"),qt||this.getAxisMargins()},me.prototype.getAxisMargins=function(){var qt=this,Kt=qt.axisOffset=[0,0,0,0],xe=qt.colorAxis,be=qt.margin,Te=function(ye){ye.forEach(function(oi){oi.visible&&oi.getOffset()})};qt.hasCartesianSeries?Te(qt.axes):xe&&xe.length&&Te(xe),M.forEach(function(ye,oi){ft(be[oi])||(qt[ye]+=Kt[oi])}),qt.setChartSize()},me.prototype.reflow=function(qt){var Kt=this,xe=Kt.options.chart,be=Kt.renderTo,Te=ft(xe.width)&&ft(xe.height),ye=xe.width||Y(be,"width");xe=xe.height||Y(be,"height"),be=qt?qt.target:k,delete Kt.pointer.chartPosition,!Te&&!Kt.isPrinting&&ye&&xe&&(be===k||be===v)&&((ye!==Kt.containerWidth||xe!==Kt.containerHeight)&&(x.clearTimeout(Kt.reflowTimeout),Kt.reflowTimeout=pe(function(){Kt.container&&Kt.setSize(void 0,void 0,!1)},qt?100:0)),Kt.containerWidth=ye,Kt.containerHeight=xe)},me.prototype.setReflow=function(qt){var Kt=this;!1===qt||this.unbindReflow?!1===qt&&this.unbindReflow&&(this.unbindReflow=this.unbindReflow()):(this.unbindReflow=y(k,"resize",function(xe){Kt.options&&Kt.reflow(xe)}),y(this,"destroy",this.unbindReflow))},me.prototype.setSize=function(qt,Kt,xe){var be=this,Te=be.renderer;be.isResizing+=1,nt(xe,be),xe=Te.globalAnimation,be.oldChartHeight=be.chartHeight,be.oldChartWidth=be.chartWidth,typeof qt<"u"&&(be.options.chart.width=qt),typeof Kt<"u"&&(be.options.chart.height=Kt),be.getChartSize(),be.styledMode||(xe?j:at)(be.container,{width:be.chartWidth+"px",height:be.chartHeight+"px"},xe),be.setChartSize(!0),Te.setSize(be.chartWidth,be.chartHeight,xe),be.axes.forEach(function(ye){ye.isDirty=!0,ye.setScale()}),be.isDirtyLegend=!0,be.isDirtyBox=!0,be.layOutTitles(),be.getMargins(),be.redraw(xe),be.oldChartHeight=null,dt(be,"resize"),pe(function(){be&&dt(be,"endResize",null,function(){--be.isResizing})},V(xe).duration)},me.prototype.setChartSize=function(qt){var tn,Ii,Pi,Ji,Kt=this.inverted,xe=this.renderer,be=this.chartWidth,Te=this.chartHeight,ye=this.options.chart,oi=this.spacing,fi=this.clipOffset;this.plotLeft=tn=Math.round(this.plotLeft),this.plotTop=Ii=Math.round(this.plotTop),this.plotWidth=Pi=Math.max(0,Math.round(be-tn-this.marginRight)),this.plotHeight=Ji=Math.max(0,Math.round(Te-Ii-this.marginBottom)),this.plotSizeX=Kt?Ji:Pi,this.plotSizeY=Kt?Pi:Ji,this.plotBorderWidth=ye.plotBorderWidth||0,this.spacingBox=xe.spacingBox={x:oi[3],y:oi[0],width:be-oi[3]-oi[1],height:Te-oi[0]-oi[2]},this.plotBox=xe.plotBox={x:tn,y:Ii,width:Pi,height:Ji},Kt=2*Math.floor(this.plotBorderWidth/2),be=Math.ceil(Math.max(Kt,fi[3])/2),Te=Math.ceil(Math.max(Kt,fi[0])/2),this.clipBox={x:be,y:Te,width:Math.floor(this.plotSizeX-Math.max(Kt,fi[1])/2-be),height:Math.max(0,Math.floor(this.plotSizeY-Math.max(Kt,fi[2])/2-Te))},qt||(this.axes.forEach(function(Mi){Mi.setAxisSize(),Mi.setAxisTranslation()}),xe.alignElements()),dt(this,"afterSetChartSize",{skipAxes:qt})},me.prototype.resetMargins=function(){dt(this,"resetMargins");var qt=this,Kt=qt.options.chart;["margin","spacing"].forEach(function(xe){var be=Kt[xe],Te=Lt(be)?be:[be,be,be,be];["Top","Right","Bottom","Left"].forEach(function(ye,oi){qt[xe][oi]=se(Kt[xe+ye],Te[oi])})}),M.forEach(function(xe,be){qt[xe]=se(qt.margin[be],qt.spacing[be])}),qt.axisOffset=[0,0,0,0],qt.clipOffset=[0,0,0,0]},me.prototype.drawChartBox=function(){var Gt,qt=this.options.chart,Kt=this.renderer,xe=this.chartWidth,be=this.chartHeight,Te=this.styledMode,ye=this.plotBGImage,oi=qt.backgroundColor,fi=qt.plotBackgroundColor,tn=qt.plotBackgroundImage,Ii=this.plotLeft,Pi=this.plotTop,Ji=this.plotWidth,Mi=this.plotHeight,nn=this.plotBox,Ti=this.clipRect,Cn=this.clipBox,wn=this.chartBackground,X=this.plotBackground,bt=this.plotBorder,ee="animate";if(wn||(this.chartBackground=wn=Kt.rect().addClass("highcharts-background").add(),ee="attr"),Te)var we=Gt=wn.strokeWidth();else Gt=(we=qt.borderWidth||0)+(qt.shadow?8:0),oi={fill:oi||"none"},(we||wn["stroke-width"])&&(oi.stroke=qt.borderColor,oi["stroke-width"]=we),wn.attr(oi).shadow(qt.shadow);wn[ee]({x:Gt/2,y:Gt/2,width:xe-Gt-we%2,height:be-Gt-we%2,r:qt.borderRadius}),ee="animate",X||(ee="attr",this.plotBackground=X=Kt.rect().addClass("highcharts-plot-background").add()),X[ee](nn),Te||(X.attr({fill:fi||"none"}).shadow(qt.plotShadow),tn&&(ye?(tn!==ye.attr("href")&&ye.attr("href",tn),ye.animate(nn)):this.plotBGImage=Kt.image(tn,Ii,Pi,Ji,Mi).add())),Ti?Ti.animate({width:Cn.width,height:Cn.height}):this.clipRect=Kt.clipRect(Cn),ee="animate",bt||(ee="attr",this.plotBorder=bt=Kt.rect().addClass("highcharts-plot-border").attr({zIndex:1}).add()),Te||bt.attr({stroke:qt.plotBorderColor,"stroke-width":qt.plotBorderWidth||0,fill:"none"}),bt[ee](bt.crisp({x:Ii,y:Pi,width:Ji,height:Mi},-bt.strokeWidth())),this.isDirtyBox=!1,dt(this,"afterDrawChartBox")},me.prototype.propFromSeries=function(){var be,Te,ye,qt=this,Kt=qt.options.chart,xe=qt.options.series;["inverted","angular","polar"].forEach(function(oi){for(Te=_[Kt.type||Kt.defaultSeriesType],ye=Kt[oi]||Te&&Te.prototype[oi],be=xe&&xe.length;!ye&&be--;)(Te=_[xe[be].type])&&Te.prototype[oi]&&(ye=!0);qt[oi]=ye})},me.prototype.linkSeries=function(){var qt=this,Kt=qt.series;Kt.forEach(function(xe){xe.linkedSeries.length=0}),Kt.forEach(function(xe){var be=xe.options.linkedTo;At(be)&&(be=":previous"===be?qt.series[xe.index-1]:qt.get(be))&&be.linkedParent!==xe&&(be.linkedSeries.push(xe),xe.linkedParent=be,be.enabledDataSorting&&xe.setDataSortingOptions(),xe.visible=se(xe.options.visible,be.options.visible,xe.visible))}),dt(this,"afterLinkSeries")},me.prototype.renderSeries=function(){this.series.forEach(function(qt){qt.translate(),qt.render()})},me.prototype.renderLabels=function(){var qt=this,Kt=qt.options.labels;Kt.items&&Kt.items.forEach(function(xe){var be=mt(Kt.style,xe.style),Te=_e(be.left)+qt.plotLeft,ye=_e(be.top)+qt.plotTop+12;delete be.left,delete be.top,qt.renderer.text(xe.html,Te,ye).attr({zIndex:2}).css(be).add()})},me.prototype.render=function(){var qt=this.axes,Kt=this.colorAxis,xe=this.renderer,be=this.options,Te=function(Ii){Ii.forEach(function(Pi){Pi.visible&&Pi.render()})},ye=0;this.setTitle(),this.legend=new It(this,be.legend),this.getStacks&&this.getStacks(),this.getMargins(!0),this.setChartSize(),be=this.plotWidth,qt.some(function(Ii){if(Ii.horiz&&Ii.visible&&Ii.options.labels.enabled&&Ii.series.length)return ye=21,!0});var oi=this.plotHeight=Math.max(this.plotHeight-ye,0);qt.forEach(function(Ii){Ii.setScale()}),this.getAxisMargins();var fi=1.1<be/this.plotWidth,tn=1.05<oi/this.plotHeight;(fi||tn)&&(qt.forEach(function(Ii){(Ii.horiz&&fi||!Ii.horiz&&tn)&&Ii.setTickInterval(!0)}),this.getMargins()),this.drawChartBox(),this.hasCartesianSeries?Te(qt):Kt&&Kt.length&&Te(Kt),this.seriesGroup||(this.seriesGroup=xe.g("series-group").attr({zIndex:3}).add()),this.renderSeries(),this.renderLabels(),this.addCredits(),this.setResponsive&&this.setResponsive(),this.hasRendered=!0},me.prototype.addCredits=function(qt){var Kt=this,xe=Wt(!0,this.options.credits,qt);xe.enabled&&!this.credits&&(this.credits=this.renderer.text(xe.text+(this.mapCredits||""),0,0).addClass("highcharts-credits").on("click",function(){xe.href&&(k.location.href=xe.href)}).attr({align:xe.position.align,zIndex:8}),Kt.styledMode||this.credits.css(xe.style),this.credits.add().align(xe.position),this.credits.update=function(be){Kt.credits=Kt.credits.destroy(),Kt.addCredits(be)})},me.prototype.destroy=function(){var ye,qt=this,Kt=qt.axes,xe=qt.series,be=qt.container,Te=be&&be.parentNode;for(dt(qt,"destroy"),qt.renderer.forExport?z(G,qt):G[qt.index]=void 0,Rt.chartCount--,qt.renderTo.removeAttribute("data-highcharts-chart"),He(qt),ye=Kt.length;ye--;)Kt[ye]=Kt[ye].destroy();for(this.scroller&&this.scroller.destroy&&this.scroller.destroy(),ye=xe.length;ye--;)xe[ye]=xe[ye].destroy();"title subtitle chartBackground plotBackground plotBGImage plotBorder seriesGroup clipRect credits pointer rangeSelector legend resetZoomButton tooltip renderer".split(" ").forEach(function(oi){var fi=qt[oi];fi&&fi.destroy&&(qt[oi]=fi.destroy())}),be&&(be.innerHTML=T.emptyHTML,He(be),Te&&rt(be)),Ot(qt,function(oi,fi){delete qt[fi]})},me.prototype.firstRender=function(){var qt=this,Kt=qt.options;(!qt.isReadyToRender||qt.isReadyToRender())&&(qt.getContainer(),qt.resetMargins(),qt.setChartSize(),qt.propFromSeries(),qt.getAxes(),(lt(Kt.series)?Kt.series:[]).forEach(function(xe){qt.initSeries(xe)}),qt.linkSeries(),qt.setSeriesData(),dt(qt,"beforeRender"),et&&(qt.pointer=K.isRequired()?new K(qt,Kt):new et(qt,Kt)),qt.render(),qt.pointer.getChartPosition(),!qt.renderer.imgCount&&!qt.hasLoaded&&qt.onload(),qt.temporaryDisplay(!0))},me.prototype.onload=function(){this.callbacks.concat([this.callback]).forEach(function(qt){qt&&typeof this.index<"u"&&qt.apply(this,[this])},this),dt(this,"load"),dt(this,"render"),ft(this.index)&&this.setReflow(this.options.chart.reflow),this.warnIfA11yModuleNotLoaded(),this.hasLoaded=!0},me.prototype.warnIfA11yModuleNotLoaded=function(){var qt=this.options,Kt=this.title;qt&&!this.accessibility&&(this.renderer.boxWrapper.attr({role:"img","aria-label":(Kt&&Kt.element.textContent||"").replace(/</g,"&lt;")}),qt.accessibility&&!1===qt.accessibility.enabled||q('Highcharts warning: Consider including the "accessibility.js" module to make your chart more usable for people with disabilities. Set the "accessibility.enabled" option to false to remove this warning. See https://www.highcharts.com/docs/accessibility/accessibility-module.',!1,this))},me.prototype.addSeries=function(qt,Kt,xe){var Te,be=this;return qt&&(Kt=se(Kt,!0),dt(be,"addSeries",{options:qt},function(){Te=be.initSeries(qt),be.isDirtyLegend=!0,be.linkSeries(),Te.enabledDataSorting&&Te.setData(qt.data,!1),dt(be,"afterAddSeries",{series:Te}),Kt&&be.redraw(xe)})),Te},me.prototype.addAxis=function(qt,Kt,xe,be){return this.createAxis(Kt?"xAxis":"yAxis",{axis:qt,redraw:xe,animation:be})},me.prototype.addColorAxis=function(qt,Kt,xe){return this.createAxis("colorAxis",{axis:qt,redraw:Kt,animation:xe})},me.prototype.createAxis=function(qt,Kt){return qt=new xt(this,Wt(Kt.axis,{index:this[qt].length,isX:"xAxis"===qt})),se(Kt.redraw,!0)&&this.redraw(Kt.animation),qt},me.prototype.showLoading=function(qt){var Kt=this,xe=Kt.options,be=xe.loading,Te=function(){ye&&at(ye,{left:Kt.plotLeft+"px",top:Kt.plotTop+"px",width:Kt.plotWidth+"px",height:Kt.plotHeight+"px"})},ye=Kt.loadingDiv,oi=Kt.loadingSpan;ye||(Kt.loadingDiv=ye=H("div",{className:"highcharts-loading highcharts-loading-hidden"},null,Kt.container)),oi||(Kt.loadingSpan=oi=H("span",{className:"highcharts-loading-inner"},null,ye),y(Kt,"redraw",Te)),ye.className="highcharts-loading",T.setElementHTML(oi,se(qt,xe.lang.loading,"")),Kt.styledMode||(at(ye,mt(be.style,{zIndex:10})),at(oi,be.labelStyle),Kt.loadingShown||(at(ye,{opacity:0,display:""}),j(ye,{opacity:be.style.opacity||.5},{duration:be.showDuration||0}))),Kt.loadingShown=!0,Te()},me.prototype.hideLoading=function(){var qt=this.options,Kt=this.loadingDiv;Kt&&(Kt.className="highcharts-loading highcharts-loading-hidden",this.styledMode||j(Kt,{opacity:0},{duration:qt.loading.hideDuration||100,complete:function(){at(Kt,{display:"none"})}})),this.loadingShown=!1},me.prototype.update=function(qt,Kt,xe,be){var tn,Ii,Te=this,ye={credits:"addCredits",title:"setTitle",subtitle:"setSubtitle",caption:"setCaption"},oi=qt.isResponsiveOptions,fi=[];dt(Te,"update",{options:qt}),oi||Te.setResponsive(!1,!0),qt=B(qt,Te.options),Te.userOptions=Wt(Te.userOptions,qt);var Pi=qt.chart;if(Pi){if(Wt(!0,Te.options.chart,Pi),"className"in Pi&&Te.setClassName(Pi.className),"reflow"in Pi&&Te.setReflow(Pi.reflow),"inverted"in Pi||"polar"in Pi||"type"in Pi){Te.propFromSeries();var Ji=!0}"alignTicks"in Pi&&(Ji=!0),"events"in Pi&&N(this,Pi),Ot(Pi,function(Mi,nn){-1!==Te.propsRequireUpdateSeries.indexOf("chart."+nn)&&(tn=!0),-1!==Te.propsRequireDirtyBox.indexOf(nn)&&(Te.isDirtyBox=!0),-1!==Te.propsRequireReflow.indexOf(nn)&&(oi?Te.isDirtyBox=!0:Ii=!0)}),!Te.styledMode&&Pi.style&&Te.renderer.setStyle(Te.options.chart.style||{})}!Te.styledMode&&qt.colors&&(this.options.colors=qt.colors),qt.time&&(this.time===l&&(this.time=new A(qt.time)),Wt(!0,Te.options.time,qt.time)),Ot(qt,function(Mi,nn){Te[nn]&&"function"==typeof Te[nn].update?Te[nn].update(Mi,!1):"function"==typeof Te[ye[nn]]?Te[ye[nn]](Mi):"colors"!==nn&&-1===Te.collectionsWithUpdate.indexOf(nn)&&Wt(!0,Te.options[nn],qt[nn]),"chart"!==nn&&-1!==Te.propsRequireUpdateSeries.indexOf(nn)&&(tn=!0)}),this.collectionsWithUpdate.forEach(function(Mi){if(qt[Mi]){var nn=[];Te[Mi].forEach(function(Ti,Cn){Ti.options.isInternal||nn.push(se(Ti.options.index,Cn))}),Fe(qt[Mi]).forEach(function(Ti,Cn){var X,wn=ft(Ti.id);wn&&(X=Te.get(Ti.id)),!X&&Te[Mi]&&(X=Te[Mi][nn?nn[Cn]:Cn])&&wn&&ft(X.options.id)&&(X=void 0),X&&X.coll===Mi&&(X.update(Ti,!1),xe&&(X.touched=!0)),!X&&xe&&Te.collectionsWithInit[Mi]&&(Te.collectionsWithInit[Mi][0].apply(Te,[Ti].concat(Te.collectionsWithInit[Mi][1]||[]).concat([!1])).touched=!0)}),xe&&Te[Mi].forEach(function(Ti){Ti.touched||Ti.options.isInternal?delete Ti.touched:fi.push(Ti)})}}),fi.forEach(function(Mi){Mi.chart&&Mi.remove&&Mi.remove(!1)}),Ji&&Te.axes.forEach(function(Mi){Mi.update({},!1)}),tn&&Te.getSeriesOrderByLinks().forEach(function(Mi){Mi.chart&&Mi.update({},!1)},this),Ji=Pi&&Pi.width,Pi=Pi&&(At(Pi.height)?We(Pi.height,Ji||Te.chartWidth):Pi.height),Ii||ht(Ji)&&Ji!==Te.chartWidth||ht(Pi)&&Pi!==Te.chartHeight?Te.setSize(Ji,Pi,be):se(Kt,!0)&&Te.redraw(be),dt(Te,"afterUpdate",{options:qt,redraw:Kt,animation:be})},me.prototype.setSubtitle=function(qt,Kt){this.applyDescription("subtitle",qt),this.layOutTitles(Kt)},me.prototype.setCaption=function(qt,Kt){this.applyDescription("caption",qt),this.layOutTitles(Kt)},me.prototype.showResetZoom=function(){function qt(){Kt.zoomOut()}var Kt=this,xe=w.lang,be=Kt.options.chart.zooming.resetButton,Te=be.theme,ye="chart"===be.relativeTo||"spacingBox"===be.relativeTo?null:"scrollablePlotBox";dt(this,"beforeShowResetZoom",null,function(){Kt.resetZoomButton=Kt.renderer.button(xe.resetZoom,null,null,qt,Te).attr({align:be.position.align,title:xe.resetZoomTitle}).addClass("highcharts-reset-zoom").add().align(be.position,!1,ye)}),dt(this,"afterShowResetZoom")},me.prototype.zoomOut=function(){dt(this,"selection",{resetSelection:!0},this.zoom)},me.prototype.zoom=function(qt){var Te,Kt=this,xe=Kt.pointer,be=!1;!qt||qt.resetSelection?(Kt.axes.forEach(function(oi){Te=oi.zoom()}),xe.initiated=!1):qt.xAxis.concat(qt.yAxis).forEach(function(oi){var fi=oi.axis;(xe[fi.isXAxis?"zoomX":"zoomY"]&&ft(xe.mouseDownX)&&ft(xe.mouseDownY)&&Kt.isInsidePlot(xe.mouseDownX-Kt.plotLeft,xe.mouseDownY-Kt.plotTop,{axis:fi})||!ft(Kt.inverted?xe.mouseDownX:xe.mouseDownY))&&(Te=fi.zoom(oi.min,oi.max),fi.displayBtn&&(be=!0))});var ye=Kt.resetZoomButton;be&&!ye?Kt.showResetZoom():!be&&Lt(ye)&&(Kt.resetZoomButton=ye.destroy()),Te&&Kt.redraw(se(Kt.options.chart.animation,qt&&qt.animation,100>Kt.pointCount))},me.prototype.pan=function(qt,Kt){var xe=this,be=xe.hoverPoints;Kt="object"==typeof Kt?Kt:{enabled:Kt,type:"x"};var Te=xe.options.chart;Te&&Te.panning&&(Te.panning=Kt);var oi,ye=Kt.type;dt(this,"pan",{originalEvent:qt},function(){be&&be.forEach(function(Ii){Ii.setState()});var fi=xe.xAxis;"xy"===ye?fi=fi.concat(xe.yAxis):"y"===ye&&(fi=xe.yAxis);var tn={};fi.forEach(function(Ii){if(Ii.options.panningEnabled&&!Ii.options.isInternal){var Pi=Ii.horiz,Ji=qt[Pi?"chartX":"chartY"],Mi=xe[Pi=Pi?"mouseDownX":"mouseDownY"],nn=Ii.minPointOffset||0,Ti=Ii.reversed&&!xe.inverted||!Ii.reversed&&xe.inverted?-1:1,Cn=Ii.getExtremes(),wn=Ii.toValue(Mi-Ji,!0)+nn*Ti,X=Ii.toValue(Mi+Ii.len-Ji,!0)-(nn*Ti||Ii.isXAxis&&Ii.pointRangePadding||0),bt=X<wn;Ti=Ii.hasVerticalPanning(),Mi=bt?X:wn,wn=bt?wn:X;var Gt=Ii.panningState;!Ti||Ii.isXAxis||Gt&&!Gt.isDirty||Ii.series.forEach(function(ee){var we=ee.getProcessedData(!0);we=ee.getExtremes(we.yData,!0),Gt||(Gt={startMin:Number.MAX_VALUE,startMax:-Number.MAX_VALUE}),ht(we.dataMin)&&ht(we.dataMax)&&(Gt.startMin=Math.min(se(ee.options.threshold,1/0),we.dataMin,Gt.startMin),Gt.startMax=Math.max(se(ee.options.threshold,-1/0),we.dataMax,Gt.startMax))}),Ti=Math.min(se(Gt&&Gt.startMin,Cn.dataMin),nn?Cn.min:Ii.toValue(Ii.toPixels(Cn.min)-Ii.minPixelPadding)),X=Math.max(se(Gt&&Gt.startMax,Cn.dataMax),nn?Cn.max:Ii.toValue(Ii.toPixels(Cn.max)+Ii.minPixelPadding)),Ii.panningState=Gt,Ii.isOrdinal||(0<(nn=Ti-Mi)&&(wn+=nn,Mi=Ti),0<(nn=wn-X)&&(wn=X,Mi-=nn),Ii.series.length&&Mi!==Cn.min&&wn!==Cn.max&&Mi>=Ti&&wn<=X&&(Ii.setExtremes(Mi,wn,!1,!1,{trigger:"pan"}),!xe.resetZoomButton&&Mi!==Ti&&wn!==X&&ye.match("y")&&(xe.showResetZoom(),Ii.displayBtn=!1),oi=!0),tn[Pi]=Ji)}}),Ot(tn,function(Ii,Pi){xe[Pi]=Ii}),oi&&xe.redraw(!1),at(xe.container,{cursor:"move"})})},me}(),mt(wt.prototype,{callbacks:[],collectionsWithInit:{xAxis:[wt.prototype.addAxis,[!0]],yAxis:[wt.prototype.addAxis,[!1]],series:[wt.prototype.addSeries]},collectionsWithUpdate:["xAxis","yAxis","series"],propsRequireDirtyBox:"backgroundColor borderColor borderWidth borderRadius plotBackgroundColor plotBackgroundImage plotBorderColor plotBorderWidth plotShadow shadow".split(" "),propsRequireReflow:"margin marginTop marginRight marginBottom marginLeft spacing spacingTop spacingRight spacingBottom spacingLeft".split(" "),propsRequireUpdateSeries:"chart.inverted chart.polar chart.ignoreHiddenSeries chart.type colors plotOptions time tooltip".split(" ")}),wt}),te(Ct,"Core/Legend/LegendSymbol.js",[Ct["Core/Utilities.js"]],function(wt){var zt,Ut,xt=wt.merge,jt=wt.pick;return(Ut=zt||(zt={})).drawLineMarker=function(Rt){var It=this.legendItem=this.legendItem||{},K=this.options,et=Rt.symbolWidth,st=Rt.symbolHeight,R=st/2,I=this.chart.renderer,A=It.group;Rt=Rt.baseline-Math.round(.3*Rt.fontMetrics.b);var x={},T=K.marker;this.chart.styledMode||(x={"stroke-width":K.lineWidth||0},K.dashStyle&&(x.dashstyle=K.dashStyle)),It.line=I.path([["M",0,Rt],["L",et,Rt]]).addClass("highcharts-graph").attr(x).add(A),T&&!1!==T.enabled&&et&&(K=Math.min(jt(T.radius,R),R),0===this.symbol.indexOf("url")&&(T=xt(T,{width:st,height:st}),K=0),It.symbol=It=I.symbol(this.symbol,et/2-K,Rt-K,2*K,2*K,T).addClass("highcharts-point").add(A),It.isMarker=!0)},Ut.drawRectangle=function(Rt,It){var K=Rt.symbolHeight,et=Rt.options.squareSymbol;(It=It.legendItem||{}).symbol=this.chart.renderer.rect(et?(Rt.symbolWidth-K)/2:0,Rt.baseline-K+1,et?K:Rt.symbolWidth,K,jt(Rt.options.symbolRadius,K/2)).addClass("highcharts-point").attr({zIndex:3}).add(It.group)},zt}),te(Ct,"Core/Series/SeriesDefaults.js",[],function(){return{lineWidth:2,allowPointSelect:!1,crisp:!0,showCheckbox:!1,animation:{duration:1e3},events:{},marker:{enabledThreshold:2,lineColor:"#ffffff",lineWidth:0,radius:4,states:{normal:{animation:!0},hover:{animation:{duration:50},enabled:!0,radiusPlus:2,lineWidthPlus:1},select:{fillColor:"#cccccc",lineColor:"#000000",lineWidth:2}}},point:{events:{}},dataLabels:{animation:{},align:"center",defer:!0,formatter:function(){return"number"!=typeof this.y?"":(0,this.series.chart.numberFormatter)(this.y,-1)},padding:5,style:{fontSize:"11px",fontWeight:"bold",color:"contrast",textOutline:"1px contrast"},verticalAlign:"bottom",x:0,y:0},cropThreshold:300,opacity:1,pointRange:0,softThreshold:!0,states:{normal:{animation:!0},hover:{animation:{duration:50},lineWidthPlus:1,marker:{},halo:{size:10,opacity:.25}},select:{animation:{duration:0}},inactive:{animation:{duration:50},opacity:.2}},stickyTracking:!0,turboThreshold:1e3,findNearestPointBy:"x"}}),te(Ct,"Core/Series/Series.js",[Ct["Core/Animation/AnimationUtilities.js"],Ct["Core/Defaults.js"],Ct["Core/Foundation.js"],Ct["Core/Globals.js"],Ct["Core/Legend/LegendSymbol.js"],Ct["Core/Series/Point.js"],Ct["Core/Series/SeriesDefaults.js"],Ct["Core/Series/SeriesRegistry.js"],Ct["Core/Renderer/SVG/SVGElement.js"],Ct["Core/Utilities.js"]],function(wt,xt,jt,zt,Ut,Rt,It,K,et,st){var R=wt.animObject,I=wt.setAnimation,A=xt.defaultOptions,x=jt.registerEventOptions,T=zt.hasTouch,j=zt.svg,V=zt.win,nt=K.seriesTypes,w=st.arrayMax,l=st.arrayMin,it=st.clamp,N=st.cleanRecursively,G=st.correctFloat,v=st.defined,M=st.erase,b=st.error,k=st.extend,_=st.find,y=st.fireEvent,O=st.getNestedProperty,B=st.isArray,H=st.isNumber,at=st.isString,ft=st.merge,rt=st.objectEach,z=st.pick,q=st.removeEvent,mt=st.splat,pt=st.syncTimeout;return wt=function(){function dt(){this.zones=this.yAxis=this.xAxis=this.userOptions=this.tooltipOptions=this.processedYData=this.processedXData=this.points=this.options=this.linkedSeries=this.index=this.eventsToUnbind=this.eventOptions=this.data=this.chart=this._i=void 0}return dt.prototype.init=function(Y,lt){y(this,"init",{options:lt});var ht=this,Lt=Y.series;this.eventsToUnbind=[],ht.chart=Y,ht.options=ht.setOptions(lt),lt=ht.options,ht.linkedSeries=[],ht.bindAxes(),k(ht,{name:lt.name,state:"",visible:!1!==lt.visible,selected:!0===lt.selected}),x(this,lt);var Wt,At=lt.events;(At&&At.click||lt.point&&lt.point.events&&lt.point.events.click||lt.allowPointSelect)&&(Y.runTrackerClick=!0),ht.getColor(),ht.getSymbol(),ht.parallelArrays.forEach(function(Ot){ht[Ot+"Data"]||(ht[Ot+"Data"]=[])}),ht.isCartesian&&(Y.hasCartesianSeries=!0),Lt.length&&(Wt=Lt[Lt.length-1]),ht._i=z(Wt&&Wt._i,-1)+1,ht.opacity=ht.options.opacity,Y.orderSeries(this.insert(Lt)),lt.dataSorting&&lt.dataSorting.enabled?ht.setDataSortingOptions():ht.points||ht.data||ht.setData(lt.data,!1),y(this,"afterInit")},dt.prototype.is=function(Y){return nt[Y]&&this instanceof nt[Y]},dt.prototype.insert=function(Y){var ht,lt=this.options.index;if(H(lt)){for(ht=Y.length;ht--;)if(lt>=z(Y[ht].options.index,Y[ht]._i)){Y.splice(ht+1,0,this);break}-1===ht&&Y.unshift(this),ht+=1}else Y.push(this);return z(ht,Y.length-1)},dt.prototype.bindAxes=function(){var Lt,Y=this,lt=Y.options,ht=Y.chart;y(this,"bindAxes",null,function(){(Y.axisTypes||[]).forEach(function(At){var Wt=0;ht[At].forEach(function(Ot){Lt=Ot.options,(lt[At]===Wt&&!Lt.isInternal||typeof lt[At]<"u"&&lt[At]===Lt.id||typeof lt[At]>"u"&&0===Lt.index)&&(Y.insert(Ot.series),Y[At]=Ot,Ot.isDirty=!0),Lt.isInternal||Wt++}),Y[At]||Y.optionalAxis===At||b(18,!0,ht)})}),y(this,"afterBindAxes")},dt.prototype.updateParallelArrays=function(Y,lt){var ht=Y.series,Lt=arguments,At=H(lt)?function(Wt){var Ot="y"===Wt&&ht.toYData?ht.toYData(Y):Y[Wt];ht[Wt+"Data"][lt]=Ot}:function(Wt){Array.prototype[lt].apply(ht[Wt+"Data"],Array.prototype.slice.call(Lt,2))};ht.parallelArrays.forEach(At)},dt.prototype.hasData=function(){return this.visible&&typeof this.dataMax<"u"&&typeof this.dataMin<"u"||this.visible&&this.yData&&0<this.yData.length},dt.prototype.autoIncrement=function(Y){var Ot,lt=this.options,ht=lt.pointIntervalUnit,Lt=lt.relativeXValue,At=this.chart.time,Wt=this.xIncrement;return Wt=z(Wt,lt.pointStart,0),this.pointInterval=Ot=z(this.pointInterval,lt.pointInterval,1),Lt&&H(Y)&&(Ot*=Y),ht&&(lt=new At.Date(Wt),"day"===ht?At.set("Date",lt,At.get("Date",lt)+Ot):"month"===ht?At.set("Month",lt,At.get("Month",lt)+Ot):"year"===ht&&At.set("FullYear",lt,At.get("FullYear",lt)+Ot),Ot=lt.getTime()-Wt),Lt&&H(Y)?Wt+Ot:(this.xIncrement=Wt+Ot,Wt)},dt.prototype.setDataSortingOptions=function(){var Y=this.options;k(this,{requireSorting:!1,sorted:!1,enabledDataSorting:!0,allowDG:!1}),v(Y.pointRange)||(Y.pointRange=1)},dt.prototype.setOptions=function(Y){var lt=this.chart,ht=lt.options,Lt=ht.plotOptions,At=lt.userOptions||{};Y=ft(Y),lt=lt.styledMode;var Wt={plotOptions:Lt,userOptions:Y};y(this,"setOptions",Wt);var Ot=Wt.plotOptions[this.type],se=At.plotOptions||{};return this.userOptions=Wt.userOptions,At=ft(Ot,Lt.series,At.plotOptions&&At.plotOptions[this.type],Y),this.tooltipOptions=ft(A.tooltip,A.plotOptions.series&&A.plotOptions.series.tooltip,A.plotOptions[this.type].tooltip,ht.tooltip.userOptions,Lt.series&&Lt.series.tooltip,Lt[this.type].tooltip,Y.tooltip),this.stickyTracking=z(Y.stickyTracking,se[this.type]&&se[this.type].stickyTracking,se.series&&se.series.stickyTracking,!(!this.tooltipOptions.shared||this.noSharedTooltip)||At.stickyTracking),null===Ot.marker&&delete At.marker,this.zoneAxis=At.zoneAxis,Lt=this.zones=(At.zones||[]).slice(),!At.negativeColor&&!At.negativeFillColor||At.zones||(ht={value:At[this.zoneAxis+"Threshold"]||At.threshold||0,className:"highcharts-negative"},lt||(ht.color=At.negativeColor,ht.fillColor=At.negativeFillColor),Lt.push(ht)),Lt.length&&v(Lt[Lt.length-1].value)&&Lt.push(lt?{}:{color:this.color,fillColor:this.fillColor}),y(this,"afterSetOptions",{options:At}),At},dt.prototype.getName=function(){return z(this.options.name,"Series "+(this.index+1))},dt.prototype.getCyclic=function(Y,lt,ht){var Lt=this.chart,At=this.userOptions,Wt=Y+"Index",Ot=Y+"Counter",se=ht?ht.length:z(Lt.options.chart[Y+"Count"],Lt[Y+"Count"]);if(!lt){var _e=z(At[Wt],At["_"+Wt]);v(_e)||(Lt.series.length||(Lt[Ot]=0),At["_"+Wt]=_e=Lt[Ot]%se,Lt[Ot]+=1),ht&&(lt=ht[_e])}typeof _e<"u"&&(this[Wt]=_e),this[Y]=lt},dt.prototype.getColor=function(){this.chart.styledMode?this.getCyclic("color"):this.options.colorByPoint?this.color="#cccccc":this.getCyclic("color",this.options.color||A.plotOptions[this.type].color,this.chart.options.colors)},dt.prototype.getPointsCollection=function(){return(this.hasGroupedData?this.points:this.data)||[]},dt.prototype.getSymbol=function(){this.getCyclic("symbol",this.options.marker.symbol,this.chart.options.symbols)},dt.prototype.findPointIndex=function(Y,lt){var Ot,se,ht=Y.id,Lt=Y.x,At=this.points,Wt=this.options.dataSorting;if(ht)(Wt=this.chart.get(ht))instanceof Rt&&(Ot=Wt);else if((this.linkedParent||this.enabledDataSorting||this.options.relativeXValue)&&(Ot=function(We){return!We.touched&&We.index===Y.index},Wt&&Wt.matchByName?Ot=function(We){return!We.touched&&We.name===Y.name}:this.options.relativeXValue&&(Ot=function(We){return!We.touched&&We.options.x===Y.x}),!(Ot=_(At,Ot))))return;if(Ot){var _e=Ot&&Ot.index;typeof _e<"u"&&(se=!0)}return typeof _e>"u"&&H(Lt)&&(_e=this.xData.indexOf(Lt,lt)),-1!==_e&&typeof _e<"u"&&this.cropped&&(_e=_e>=this.cropStart?_e-this.cropStart:_e),!se&&H(_e)&&At[_e]&&At[_e].touched&&(_e=void 0),_e},dt.prototype.updateData=function(Y,lt){var _e,We,He,ht=this.options,Lt=ht.dataSorting,At=this.points,Wt=[],Ot=this.requireSorting,se=Y.length===At.length,Fe=!0;if(this.xIncrement=null,Y.forEach(function(pe,Me){var me=v(pe)&&this.pointClass.prototype.optionsToObject.call({series:this},pe)||{};me.id||H(me.x)?(-1===(me=this.findPointIndex(me,He))||typeof me>"u"?Wt.push(pe):At[me]&&pe!==ht.data[me]?(At[me].update(pe,!1,null,!1),At[me].touched=!0,Ot&&(He=me+1)):At[me]&&(At[me].touched=!0),(!se||Me!==me||Lt&&Lt.enabled||this.hasDerivedData)&&(_e=!0)):Wt.push(pe)},this),_e)for(Y=At.length;Y--;)(We=At[Y])&&!We.touched&&We.remove&&We.remove(!1,lt);else!se||Lt&&Lt.enabled?Fe=!1:(Y.forEach(function(pe,Me){pe!==At[Me].y&&At[Me].update&&At[Me].update(pe,!1,null,!1)}),Wt.length=0);return At.forEach(function(pe){pe&&(pe.touched=!1)}),!!Fe&&(Wt.forEach(function(pe){this.addPoint(pe,!1,null,null,!1)},this),null===this.xIncrement&&this.xData&&this.xData.length&&(this.xIncrement=w(this.xData),this.autoIncrement()),!0)},dt.prototype.setData=function(Y,lt,ht,Lt){void 0===lt&&(lt=!0);var At=this,Wt=At.points,Ot=Wt&&Wt.length||0,se=At.options,_e=At.chart,We=se.dataSorting,He=At.xAxis,Fe=se.turboThreshold,pe=this.xData,Me=this.yData,me=At.pointArrayMap;me=me&&me.length;var Kt,qt=se.keys,xe=0,be=1,Te=null;if(!_e.options.chart.allowMutatingData){se.data&&delete At.options.data,At.userOptions.data&&delete At.userOptions.data;var ye=ft(!0,Y)}if(ye=(Y=ye||Y||[]).length,We&&We.enabled&&(Y=this.sortData(Y)),_e.options.chart.allowMutatingData&&!1!==Lt&&ye&&Ot&&!At.cropped&&!At.hasGroupedData&&At.visible&&!At.boosted&&(Kt=this.updateData(Y,ht)),!Kt){if(At.xIncrement=null,At.colorCounter=0,this.parallelArrays.forEach(function(oi){At[oi+"Data"].length=0}),Fe&&ye>Fe)if(Te=At.getFirstValidPoint(Y),H(Te))for(ht=0;ht<ye;ht++)pe[ht]=this.autoIncrement(),Me[ht]=Y[ht];else if(B(Te))if(me)if(Te.length===me)for(ht=0;ht<ye;ht++)pe[ht]=this.autoIncrement(),Me[ht]=Y[ht];else for(ht=0;ht<ye;ht++)pe[ht]=(Lt=Y[ht])[0],Me[ht]=Lt.slice(1,me+1);else if(qt&&(xe=0<=(xe=qt.indexOf("x"))?xe:0,be=0<=(be=qt.indexOf("y"))?be:1),1===Te.length&&(be=0),xe===be)for(ht=0;ht<ye;ht++)pe[ht]=this.autoIncrement(),Me[ht]=Y[ht][be];else for(ht=0;ht<ye;ht++)pe[ht]=(Lt=Y[ht])[xe],Me[ht]=Lt[be];else b(12,!1,_e);else for(ht=0;ht<ye;ht++)typeof Y[ht]<"u"&&(At.pointClass.prototype.applyOptions.apply(Lt={series:At},[Y[ht]]),At.updateParallelArrays(Lt,ht));for(Me&&at(Me[0])&&b(14,!0,_e),At.data=[],At.options.data=At.userOptions.data=Y,ht=Ot;ht--;)Wt[ht]&&Wt[ht].destroy&&Wt[ht].destroy();He&&(He.minRange=He.userMinRange),At.isDirty=_e.isDirtyBox=!0,At.isDirtyData=!!Wt,ht=!1}"point"===se.legendType&&(this.processData(),this.generatePoints()),lt&&_e.redraw(ht)},dt.prototype.sortData=function(Y){var lt=this,ht=lt.options.dataSorting.sortKey||"y",Lt=function(At,Wt){return v(Wt)&&At.pointClass.prototype.optionsToObject.call({series:At},Wt)||{}};return Y.forEach(function(At,Wt){Y[Wt]=Lt(lt,At),Y[Wt].index=Wt},this),Y.concat().sort(function(At,Wt){return At=O(ht,At),(Wt=O(ht,Wt))<At?-1:Wt>At?1:0}).forEach(function(At,Wt){At.x=Wt},this),lt.linkedSeries&&lt.linkedSeries.forEach(function(At){var Wt=At.options,Ot=Wt.data;Wt.dataSorting&&Wt.dataSorting.enabled||!Ot||(Ot.forEach(function(se,_e){Ot[_e]=Lt(At,se),Y[_e]&&(Ot[_e].x=Y[_e].x,Ot[_e].index=_e)}),At.setData(Ot,!1))}),Y},dt.prototype.getProcessedData=function(Y){var lt=this.xAxis,ht=this.options,Lt=ht.cropThreshold,At=Y||this.getExtremesFromAll||ht.getExtremesFromAll,Wt=this.isCartesian;Y=lt&&lt.val2lin,ht=!(!lt||!lt.logarithmic);var Ot=0,se=this.xData,_e=this.yData,We=this.requireSorting,He=!1,Fe=se.length;if(lt){var pe=(He=lt.getExtremes()).min,Me=He.max;He=!(!lt.categories||lt.names.length)}if(Wt&&this.sorted&&!At&&(!Lt||Fe>Lt||this.forceCrop))if(se[Fe-1]<pe||se[0]>Me)se=[],_e=[];else if(this.yData&&(se[0]<pe||se[Fe-1]>Me)){var me=this.cropData(this.xData,this.yData,pe,Me);se=me.xData,_e=me.yData,Ot=me.start,me=!0}for(Lt=se.length||1;--Lt;)if(0<(lt=ht?Y(se[Lt])-Y(se[Lt-1]):se[Lt]-se[Lt-1])&&(typeof qt>"u"||lt<qt))var qt=lt;else 0>lt&&We&&!He&&(b(15,!1,this.chart),We=!1);return{xData:se,yData:_e,cropped:me,cropStart:Ot,closestPointRange:qt}},dt.prototype.processData=function(Y){if(this.isCartesian&&!this.isDirty&&!this.xAxis.isDirty&&!this.yAxis.isDirty&&!Y)return!1;Y=this.getProcessedData(),this.cropped=Y.cropped,this.cropStart=Y.cropStart,this.processedXData=Y.xData,this.processedYData=Y.yData,this.closestPointRange=this.basePointRange=Y.closestPointRange,y(this,"afterProcessData")},dt.prototype.cropData=function(Y,lt,ht,Lt,At){var Ot,Wt=Y.length,se=0,_e=Wt;for(At=z(At,this.cropShoulder),Ot=0;Ot<Wt;Ot++)if(Y[Ot]>=ht){se=Math.max(0,Ot-At);break}for(ht=Ot;ht<Wt;ht++)if(Y[ht]>Lt){_e=ht+At;break}return{xData:Y.slice(se,_e),yData:lt.slice(se,_e),start:se,end:_e}},dt.prototype.generatePoints=function(){var Y=this.options,lt=this.processedData||Y.data,ht=this.processedXData,Lt=this.processedYData,At=this.pointClass,Wt=ht.length,Ot=this.cropStart||0,se=this.hasGroupedData,_e=Y.keys,We=[];Y=Y.dataGrouping&&Y.dataGrouping.groupAll?Ot:0;var He,Fe,pe=this.data;if(!pe&&!se){var Me=[];Me.length=lt.length,pe=this.data=Me}for(_e&&se&&(this.options.keys=!1),Fe=0;Fe<Wt;Fe++){if(Me=Ot+Fe,se){var me=(new At).init(this,[ht[Fe]].concat(mt(Lt[Fe])));me.dataGroup=this.groupMap[Y+Fe],me.dataGroup.options&&(me.options=me.dataGroup.options,k(me,me.dataGroup.options),delete me.dataLabels)}else(me=pe[Me])||typeof lt[Me]>"u"||(pe[Me]=me=(new At).init(this,lt[Me],ht[Fe]));me&&(me.index=se?Y+Fe:Me,We[Fe]=me)}if(this.options.keys=_e,pe&&(Wt!==(He=pe.length)||se))for(Fe=0;Fe<He;Fe++)Fe!==Ot||se||(Fe+=Wt),pe[Fe]&&(pe[Fe].destroyElements(),pe[Fe].plotX=void 0);this.data=pe,this.points=We,y(this,"afterGeneratePoints")},dt.prototype.getXExtremes=function(Y){return{min:l(Y),max:w(Y)}},dt.prototype.getExtremes=function(Y,lt){var ht=this.xAxis,Lt=this.yAxis,At=this.processedXData||this.xData,Wt=[],Ot=this.requireSorting?this.cropShoulder:0;Lt=!!Lt&&Lt.positiveValuesOnly;var se,_e=0,We=0,He=0,Fe=(Y=Y||this.stackedYData||this.processedYData||[]).length;if(ht){var pe=ht.getExtremes();_e=pe.min,We=pe.max}for(se=0;se<Fe;se++){var Me=At[se],me=(H(pe=Y[se])||B(pe))&&(pe.length||0<pe||!Lt);if(Me=lt||this.getExtremesFromAll||this.options.getExtremesFromAll||this.cropped||!ht||(At[se+Ot]||Me)>=_e&&(At[se-Ot]||Me)<=We,me&&Me)if(me=pe.length)for(;me--;)H(pe[me])&&(Wt[He++]=pe[me]);else Wt[He++]=pe}return Y={activeYData:Wt,dataMin:l(Wt),dataMax:w(Wt)},y(this,"afterGetExtremes",{dataExtremes:Y}),Y},dt.prototype.applyExtremes=function(){var Y=this.getExtremes();return this.dataMin=Y.dataMin,this.dataMax=Y.dataMax,Y},dt.prototype.getFirstValidPoint=function(Y){for(var lt=Y.length,ht=0,Lt=null;null===Lt&&ht<lt;)Lt=Y[ht],ht++;return Lt},dt.prototype.translate=function(){this.processedXData||this.processData(),this.generatePoints();var Me,me,Y=this.options,lt=Y.stacking,ht=this.xAxis,Lt=ht.categories,At=this.enabledDataSorting,Wt=this.yAxis,Ot=this.points,se=Ot.length,_e=this.pointPlacementToXValue(),We=!!_e,He=Y.threshold,Fe=Y.startFromThreshold?He:0,pe=this.zoneAxis||"y",qt=Number.MAX_VALUE;for(Me=0;Me<se;Me++){var Kt=Ot[Me],xe=Kt.x,be=void 0,Te=void 0,ye=Kt.y,oi=Kt.low,fi=lt&&Wt.stacking&&Wt.stacking.stacks[(this.negStacks&&ye<(Fe?0:He)?"-":"")+this.stackKey];if((Wt.positiveValuesOnly&&!Wt.validatePositiveValue(ye)||ht.positiveValuesOnly&&!ht.validatePositiveValue(xe))&&(Kt.isNull=!0),Kt.plotX=me=G(it(ht.translate(xe,0,0,0,1,_e,"flags"===this.type),-1e5,1e5)),lt&&this.visible&&fi&&fi[xe]){var tn=this.getStackIndicator(tn,xe,this.index);Kt.isNull||(Te=(be=fi[xe]).points[tn.key])}if(B(Te)&&(ye=Te[1],(oi=Te[0])===Fe&&tn.key===fi[xe].base&&(oi=z(H(He)&&He,Wt.min)),Wt.positiveValuesOnly&&0>=oi&&(oi=null),Kt.total=Kt.stackTotal=be.total,Kt.percentage=be.total&&Kt.y/be.total*100,Kt.stackY=ye,this.irregularWidths||be.setOffset(this.pointXOffset||0,this.barW||0)),Kt.yBottom=v(oi)?it(Wt.translate(oi,0,1,0,1),-1e5,1e5):null,this.dataModify&&(ye=this.dataModify.modifyValue(ye,Me)),Kt.plotY=void 0,H(ye)&&typeof(be=Wt.translate(ye,!1,!0,!1,!0))<"u"&&(Kt.plotY=it(be,-1e5,1e5)),Kt.isInside=this.isPointInside(Kt),Kt.clientX=We?G(ht.translate(xe,0,0,0,1,_e)):me,Kt.negative=Kt[pe]<(Y[pe+"Threshold"]||He||0),Kt.category=z(Lt&&Lt[Kt.x],Kt.x),!Kt.isNull&&!1!==Kt.visible){typeof Ii<"u"&&(qt=Math.min(qt,Math.abs(me-Ii)));var Ii=me}Kt.zone=this.zones.length?Kt.getZone():void 0,!Kt.graphic&&this.group&&At&&(Kt.isNew=!0)}this.closestPointRangePx=qt,y(this,"afterTranslate")},dt.prototype.getValidPoints=function(Y,lt,ht){var Lt=this.chart;return(Y||this.points||[]).filter(function(At){return!(lt&&!Lt.isInsidePlot(At.plotX,At.plotY,{inverted:Lt.inverted}))&&!1!==At.visible&&(ht||!At.isNull)})},dt.prototype.getClipBox=function(){var Y=this.chart,lt=this.xAxis,ht=this.yAxis,Lt=ft(Y.clipBox);return lt&&lt.len!==Y.plotSizeX&&(Lt.width=lt.len),ht&&ht.len!==Y.plotSizeY&&(Lt.height=ht.len),Lt},dt.prototype.getSharedClipKey=function(){return this.sharedClipKey=(this.options.xAxis||0)+","+(this.options.yAxis||0)},dt.prototype.setClip=function(){var Y=this.chart,lt=this.group,ht=this.markerGroup,Lt=Y.sharedClips;Y=Y.renderer;var At=this.getClipBox(),Wt=this.getSharedClipKey(),Ot=Lt[Wt];Ot?Ot.animate(At):Lt[Wt]=Ot=Y.clipRect(At),lt&&lt.clip(!1===this.options.clip?void 0:Ot),ht&&ht.clip()},dt.prototype.animate=function(Y){var lt=this.chart,ht=this.group,Lt=this.markerGroup,At=lt.inverted,Wt=R(this.options.animation),Ot=[this.getSharedClipKey(),Wt.duration,Wt.easing,Wt.defer].join(),se=lt.sharedClips[Ot],_e=lt.sharedClips[Ot+"m"];if(Y&&ht)Wt=this.getClipBox(),se?se.attr("height",Wt.height):(Wt.width=0,At&&(Wt.x=lt.plotHeight),se=lt.renderer.clipRect(Wt),lt.sharedClips[Ot]=se,_e=lt.renderer.clipRect({x:At?(lt.plotSizeX||0)+99:-99,y:At?-lt.plotLeft:-lt.plotTop,width:99,height:At?lt.chartWidth:lt.chartHeight}),lt.sharedClips[Ot+"m"]=_e),ht.clip(se),Lt&&Lt.clip(_e);else if(se&&!se.hasClass("highcharts-animating")){lt=this.getClipBox();var We=Wt.step;Lt&&Lt.element.childNodes.length&&(Wt.step=function(He,Fe){We&&We.apply(Fe,arguments),_e&&_e.element&&_e.attr(Fe.prop,"width"===Fe.prop?He+99:He)}),se.addClass("highcharts-animating").animate(lt,Wt)}},dt.prototype.afterAnimate=function(){var Y=this;this.setClip(),rt(this.chart.sharedClips,function(lt,ht,Lt){lt&&!Y.chart.container.querySelector('[clip-path="url(#'.concat(lt.id,')"]'))&&(lt.destroy(),delete Lt[ht])}),this.finishedAnimating=!0,y(this,"afterAnimate")},dt.prototype.drawPoints=function(Y){void 0===Y&&(Y=this.points);var Ot,se,lt=this.chart,ht=this.options.marker,Lt=this[this.specialGroup]||this.markerGroup,At=this.xAxis,Wt=z(ht.enabled,!(At&&!At.isRadial)||null,this.closestPointRangePx>=ht.enabledThreshold*ht.radius);if(!1!==ht.enabled||this._hasPointMarkers)for(Ot=0;Ot<Y.length;Ot++){var _e=Y[Ot],We=(se=_e.graphic)?"animate":"attr",He=_e.marker||{},Fe=!!_e.marker;if((Wt&&typeof He.enabled>"u"||He.enabled)&&!_e.isNull&&!1!==_e.visible){var pe=z(He.symbol,this.symbol,"rect"),Me=this.markerAttribs(_e,_e.selected&&"select");this.enabledDataSorting&&(_e.startXPos=At.reversed?-(Me.width||0):At.width);var me=!1!==_e.isInside;se?se[me?"show":"hide"](me).animate(Me):me&&(0<(Me.width||0)||_e.hasImage)&&(_e.graphic=se=lt.renderer.symbol(pe,Me.x,Me.y,Me.width,Me.height,Fe?He:ht).add(Lt),this.enabledDataSorting&&lt.hasRendered&&(se.attr({x:_e.startXPos}),We="animate")),se&&"animate"===We&&se[me?"show":"hide"](me).animate(Me),se&&!lt.styledMode&&se[We](this.pointAttribs(_e,_e.selected&&"select")),se&&se.addClass(_e.getClassName(),!0)}else se&&(_e.graphic=se.destroy())}},dt.prototype.markerAttribs=function(Y,lt){var ht=this.options,Lt=ht.marker,At=Y.marker||{},Wt=At.symbol||Lt.symbol,Ot=z(At.radius,Lt&&Lt.radius);return lt&&(Lt=Lt.states[lt],Ot=z((lt=At.states&&At.states[lt])&&lt.radius,Lt&&Lt.radius,Ot&&Ot+(Lt&&Lt.radiusPlus||0))),Y.hasImage=Wt&&0===Wt.indexOf("url"),Y.hasImage&&(Ot=0),Y=H(Ot)?{x:ht.crisp?Math.floor(Y.plotX-Ot):Y.plotX-Ot,y:Y.plotY-Ot}:{},Ot&&(Y.width=Y.height=2*Ot),Y},dt.prototype.pointAttribs=function(Y,lt){var ht=this.options.marker,Lt=Y&&Y.options,At=Lt&&Lt.marker||{},Wt=Lt&&Lt.color,Ot=Y&&Y.color,se=Y&&Y.zone&&Y.zone.color,_e=this.color;return Y=z(At.lineWidth,ht.lineWidth),Lt=1,_e=Wt||se||Ot||_e,Wt=At.fillColor||ht.fillColor||_e,Ot=At.lineColor||ht.lineColor||_e,ht=ht.states[lt=lt||"normal"]||{},Y=z((lt=At.states&&At.states[lt]||{}).lineWidth,ht.lineWidth,Y+z(lt.lineWidthPlus,ht.lineWidthPlus,0)),{stroke:Ot=lt.lineColor||ht.lineColor||Ot,"stroke-width":Y,fill:Wt=lt.fillColor||ht.fillColor||Wt,opacity:Lt=z(lt.opacity,ht.opacity,Lt)}},dt.prototype.destroy=function(Y){var Ot,se,_e,lt=this,ht=lt.chart,Lt=/AppleWebKit\/533/.test(V.navigator.userAgent),At=lt.data||[];for(y(lt,"destroy",{keepEventsForUpdate:Y}),this.removeEvents(Y),(lt.axisTypes||[]).forEach(function(We){(_e=lt[We])&&_e.series&&(M(_e.series,lt),_e.isDirty=_e.forceRedraw=!0)}),lt.legendItem&&lt.chart.legend.destroyItem(lt),Ot=At.length;Ot--;)(se=At[Ot])&&se.destroy&&se.destroy();lt.clips&&lt.clips.forEach(function(We){return We.destroy()}),st.clearTimeout(lt.animationTimeout),rt(lt,function(We,He){We instanceof et&&!We.survive&&We[Lt&&"group"===He?"hide":"destroy"]()}),ht.hoverSeries===lt&&(ht.hoverSeries=void 0),M(ht.series,lt),ht.orderSeries(),rt(lt,function(We,He){Y&&"hcEvents"===He||delete lt[He]})},dt.prototype.applyZones=function(){var He,Fe,pe,Me,me,qt,Kt,xe,Y=this,lt=this.chart,ht=lt.renderer,Lt=this.zones,At=this.clips||[],Wt=this.graph,Ot=this.area,se=Math.max(lt.plotWidth,lt.plotHeight),_e=this[(this.zoneAxis||"y")+"Axis"],We=lt.inverted,be=!1;if(Lt.length&&(Wt||Ot)&&_e&&typeof _e.min<"u"){var Te=_e.reversed,ye=_e.horiz;Wt&&!this.showLine&&Wt.hide(),Ot&&Ot.hide();var oi=_e.getExtremes();Lt.forEach(function(fi,tn){He=Te?ye?lt.plotWidth:0:ye?0:_e.toPixels(oi.min)||0,He=it(z(Fe,He),0,se),Fe=it(Math.round(_e.toPixels(z(fi.value,oi.max),!0)||0),0,se),be&&(He=Fe=_e.toPixels(oi.max)),Me=Math.abs(He-Fe),me=Math.min(He,Fe),qt=Math.max(He,Fe),_e.isXAxis?(pe={x:We?qt:me,y:0,width:Me,height:se},ye||(pe.x=lt.plotHeight-pe.x)):(pe={x:0,y:We?qt:me,width:se,height:Me},ye&&(pe.y=lt.plotWidth-pe.y)),We&&ht.isVML&&(pe=_e.isXAxis?{x:0,y:Te?me:qt,height:pe.width,width:lt.chartWidth}:{x:pe.y-lt.plotLeft-lt.spacingBox.x,y:0,width:pe.height,height:lt.chartHeight}),At[tn]?At[tn].animate(pe):At[tn]=ht.clipRect(pe),Kt=Y["zone-area-"+tn],xe=Y["zone-graph-"+tn],Wt&&xe&&xe.clip(At[tn]),Ot&&Kt&&Kt.clip(At[tn]),be=fi.value>oi.max,Y.resetZones&&0===Fe&&(Fe=void 0)}),this.clips=At}else Y.visible&&(Wt&&Wt.show(),Ot&&Ot.show())},dt.prototype.plotGroup=function(Y,lt,ht,Lt,At){var Wt=this[Y],Ot=!Wt;return ht={visibility:ht,zIndex:Lt||.1},typeof this.opacity>"u"||this.chart.styledMode||"inactive"===this.state||(ht.opacity=this.opacity),Ot&&(this[Y]=Wt=this.chart.renderer.g().add(At)),Wt.addClass("highcharts-"+lt+" highcharts-series-"+this.index+" highcharts-"+this.type+"-series "+(v(this.colorIndex)?"highcharts-color-"+this.colorIndex+" ":"")+(this.options.className||"")+(Wt.hasClass("highcharts-tracker")?" highcharts-tracker":""),!0),Wt.attr(ht)[Ot?"attr":"animate"](this.getPlotBox(lt)),Wt},dt.prototype.getPlotBox=function(Y){var lt=this.xAxis,ht=this.yAxis,Lt=this.chart;return Y=Lt.inverted&&!Lt.polar&&lt&&!1!==this.invertible&&("markers"===Y||"series"===Y),Lt.inverted&&(lt=ht,ht=this.xAxis),{translateX:lt?lt.left:Lt.plotLeft,translateY:ht?ht.top:Lt.plotTop,rotation:Y?90:0,rotationOriginX:Y?(lt.len-ht.len)/2:0,rotationOriginY:Y?(lt.len+ht.len)/2:0,scaleX:Y?-1:1,scaleY:1}},dt.prototype.removeEvents=function(Y){Y||q(this),this.eventsToUnbind.length&&(this.eventsToUnbind.forEach(function(lt){lt()}),this.eventsToUnbind.length=0)},dt.prototype.render=function(){var Y=this,lt=Y.chart,ht=Y.options,Lt=R(ht.animation),At=Y.visible?"inherit":"hidden",Wt=ht.zIndex,Ot=Y.hasRendered,se=lt.seriesGroup;lt=!Y.finishedAnimating&&lt.renderer.isSVG?Lt.duration:0,y(this,"render"),Y.plotGroup("group","series",At,Wt,se),Y.markerGroup=Y.plotGroup("markerGroup","markers",At,Wt,se),!1!==ht.clip&&Y.setClip(),Y.animate&&lt&&Y.animate(!0),Y.drawGraph&&(Y.drawGraph(),Y.applyZones()),Y.visible&&Y.drawPoints(),Y.drawDataLabels&&Y.drawDataLabels(),Y.redrawPoints&&Y.redrawPoints(),Y.drawTracker&&!1!==Y.options.enableMouseTracking&&Y.drawTracker(),Y.animate&&lt&&Y.animate(),Ot||(lt&&Lt.defer&&(lt+=Lt.defer),Y.animationTimeout=pt(function(){Y.afterAnimate()},lt||0)),Y.isDirty=!1,Y.hasRendered=!0,y(Y,"afterRender")},dt.prototype.redraw=function(){var Y=this.isDirty||this.isDirtyData;this.translate(),this.render(),Y&&delete this.kdTree},dt.prototype.searchPoint=function(Y,lt){var ht=this.xAxis,Lt=this.yAxis,At=this.chart.inverted;return this.searchKDTree({clientX:At?ht.len-Y.chartY+ht.pos:Y.chartX-ht.pos,plotY:At?Lt.len-Y.chartX+Lt.pos:Y.chartY-Lt.pos},lt,Y)},dt.prototype.buildKDTree=function(Y){function lt(At,Wt,Ot){var se=At&&At.length;if(se){var _e=ht.kdAxisArray[Wt%Ot];return At.sort(function(We,He){return We[_e]-He[_e]}),{point:At[se=Math.floor(se/2)],left:lt(At.slice(0,se),Wt+1,Ot),right:lt(At.slice(se+1),Wt+1,Ot)}}}this.buildingKdTree=!0;var ht=this,Lt=-1<ht.options.findNearestPointBy.indexOf("y")?2:1;delete ht.kdTree,pt(function(){ht.kdTree=lt(ht.getValidPoints(null,!ht.directTouch),Lt,Lt),ht.buildingKdTree=!1},ht.options.kdNow||Y&&"touchstart"===Y.type?0:1)},dt.prototype.searchKDTree=function(Y,lt,ht){var At=this,Wt=this.kdAxisArray[0],Ot=this.kdAxisArray[1],se=lt?"distX":"dist";if(lt=-1<At.options.findNearestPointBy.indexOf("y")?2:1,this.kdTree||this.buildingKdTree||this.buildKDTree(ht),this.kdTree)return function Lt(_e,We,He,Fe){var pe=We.point,Me=At.kdAxisArray[He%Fe],me=pe,qt=v(_e[Wt])&&v(pe[Wt])?Math.pow(_e[Wt]-pe[Wt],2):null,Kt=v(_e[Ot])&&v(pe[Ot])?Math.pow(_e[Ot]-pe[Ot],2):null;return pe.dist=v(Kt=(qt||0)+(Kt||0))?Math.sqrt(Kt):Number.MAX_VALUE,pe.distX=v(qt)?Math.sqrt(qt):Number.MAX_VALUE,qt=0>(Me=_e[Me]-pe[Me])?"right":"left",We[Kt=0>Me?"left":"right"]&&(me=(Kt=Lt(_e,We[Kt],He+1,Fe))[se]<me[se]?Kt:pe),We[qt]&&Math.sqrt(Me*Me)<me[se]&&(me=(_e=Lt(_e,We[qt],He+1,Fe))[se]<me[se]?_e:me),me}(Y,this.kdTree,lt,lt)},dt.prototype.pointPlacementToXValue=function(){var Y=this.options,lt=Y.pointRange,ht=this.xAxis;return"between"===(Y=Y.pointPlacement)&&(Y=ht.reversed?-.5:.5),H(Y)?Y*(lt||ht.pointRange):0},dt.prototype.isPointInside=function(Y){var lt=this.chart,ht=this.xAxis,Lt=this.yAxis;return typeof Y.plotY<"u"&&typeof Y.plotX<"u"&&0<=Y.plotY&&Y.plotY<=(Lt?Lt.len:lt.plotHeight)&&0<=Y.plotX&&Y.plotX<=(ht?ht.len:lt.plotWidth)},dt.prototype.drawTracker=function(){var Y=this,lt=Y.options,ht=lt.trackByArea,Lt=[].concat(ht?Y.areaPath:Y.graphPath),At=Y.chart,Wt=At.pointer,Ot=At.renderer,se=At.options.tooltip.snap,_e=Y.tracker,We=function(Fe){At.hoverSeries!==Y&&Y.onMouseOver()},He="rgba(192,192,192,"+(j?1e-4:.002)+")";_e?_e.attr({d:Lt}):Y.graph&&(Y.tracker=Ot.path(Lt).attr({visibility:Y.visible?"inherit":"hidden",zIndex:2}).addClass(ht?"highcharts-tracker-area":"highcharts-tracker-line").add(Y.group),At.styledMode||Y.tracker.attr({"stroke-linecap":"round","stroke-linejoin":"round",stroke:He,fill:ht?He:"none","stroke-width":Y.graph.strokeWidth()+(ht?0:2*se)}),[Y.tracker,Y.markerGroup,Y.dataLabelsGroup].forEach(function(Fe){Fe&&(Fe.addClass("highcharts-tracker").on("mouseover",We).on("mouseout",function(pe){Wt.onTrackerMouseOut(pe)}),lt.cursor&&!At.styledMode&&Fe.css({cursor:lt.cursor}),T)&&Fe.on("touchstart",We)})),y(this,"afterDrawTracker")},dt.prototype.addPoint=function(Y,lt,ht,Lt,At){var Wt=this.options,Ot=this.data,se=this.chart,_e=this.xAxis;_e=_e&&_e.hasNames&&_e.names;var Fe,We=Wt.data,He=this.xData;lt=z(lt,!0);var pe={series:this};this.pointClass.prototype.applyOptions.apply(pe,[Y]);var Me=pe.x,me=He.length;if(this.requireSorting&&Me<He[me-1])for(Fe=!0;me&&He[me-1]>Me;)me--;this.updateParallelArrays(pe,"splice",me,0,0),this.updateParallelArrays(pe,me),_e&&pe.name&&(_e[Me]=pe.name),We.splice(me,0,Y),(Fe||this.processedData)&&(this.data.splice(me,0,null),this.processData()),"point"===Wt.legendType&&this.generatePoints(),ht&&(Ot[0]&&Ot[0].remove?Ot[0].remove(!1):(Ot.shift(),this.updateParallelArrays(pe,"shift"),We.shift())),!1!==At&&y(this,"addPoint",{point:pe}),this.isDirtyData=this.isDirty=!0,lt&&se.redraw(Lt)},dt.prototype.removePoint=function(Y,lt,ht){var Lt=this,At=Lt.data,Wt=At[Y],Ot=Lt.points,se=Lt.chart,_e=function(){Ot&&Ot.length===At.length&&Ot.splice(Y,1),At.splice(Y,1),Lt.options.data.splice(Y,1),Lt.updateParallelArrays(Wt||{series:Lt},"splice",Y,1),Wt&&Wt.destroy(),Lt.isDirty=!0,Lt.isDirtyData=!0,lt&&se.redraw()};I(ht,se),lt=z(lt,!0),Wt?Wt.firePointEvent("remove",null,_e):_e()},dt.prototype.remove=function(Y,lt,ht,Lt){function At(){Wt.destroy(Lt),Ot.isDirtyLegend=Ot.isDirtyBox=!0,Ot.linkSeries(),z(Y,!0)&&Ot.redraw(lt)}var Wt=this,Ot=Wt.chart;!1!==ht?y(Wt,"remove",null,At):At()},dt.prototype.update=function(Y,lt){Y=N(Y,this.userOptions),y(this,"update",{options:Y});var ht=this,Lt=ht.chart,At=ht.userOptions,Wt=ht.initialType||ht.type,Ot=Lt.options.plotOptions,se=nt[Wt].prototype,_e=ht.finishedAnimating&&{animation:!1},We={},He=["eventOptions","navigatorSeries","baseSeries"],Fe=Y.type||At.type||Lt.options.chart.type,pe=!(this.hasDerivedData||Fe&&Fe!==this.type||typeof Y.pointStart<"u"||typeof Y.pointInterval<"u"||typeof Y.relativeXValue<"u"||Y.joinBy||Y.mapData||ht.hasOptionChanged("dataGrouping")||ht.hasOptionChanged("pointStart")||ht.hasOptionChanged("pointInterval")||ht.hasOptionChanged("pointIntervalUnit")||ht.hasOptionChanged("keys"));if(Fe=Fe||Wt,pe&&(He.push("data","isDirtyData","points","processedData","processedXData","processedYData","xIncrement","cropped","_hasPointMarkers","_hasPointLabels","clips","nodes","layout","level","mapMap","mapData","minY","maxY","minX","maxX"),!1!==Y.visible&&He.push("area","graph"),ht.parallelArrays.forEach(function(me){He.push(me+"Data")}),Y.data&&(Y.dataSorting&&k(ht.options.dataSorting,Y.dataSorting),this.setData(Y.data,!1))),Y=ft(At,_e,{index:typeof At.index>"u"?ht.index:At.index,pointStart:z(Ot&&Ot.series&&Ot.series.pointStart,At.pointStart,ht.xData[0])},!pe&&{data:ht.options.data},Y),pe&&Y.data&&(Y.data=ht.options.data),(He=["group","markerGroup","dataLabelsGroup","transformGroup","shadowGroup"].concat(He)).forEach(function(me){He[me]=ht[me],delete ht[me]}),Ot=!1,nt[Fe]){if(Ot=Fe!==ht.type,ht.remove(!1,!1,!1,!0),Ot)if(Object.setPrototypeOf)Object.setPrototypeOf(ht,nt[Fe].prototype);else{for(Me in _e=Object.hasOwnProperty.call(ht,"hcEvents")&&ht.hcEvents,se)ht[Me]=void 0;k(ht,nt[Fe].prototype),_e?ht.hcEvents=_e:delete ht.hcEvents}}else b(17,!0,Lt,{missingModuleFor:Fe});if(He.forEach(function(me){ht[me]=He[me]}),ht.init(Lt,Y),pe&&this.points){if(!1===(Y=ht.options).visible)We.graphic=1,We.dataLabel=1;else if(!ht._hasPointLabels){var Me=Y.dataLabels;!(se=Y.marker)||!1!==se.enabled&&(At.marker&&At.marker.symbol)===se.symbol||(We.graphic=1),Me&&!1===Me.enabled&&(We.dataLabel=1)}for(At=0,se=this.points;At<se.length;At++)(Me=se[At])&&Me.series&&(Me.resolveColor(),Object.keys(We).length&&Me.destroyElements(We),!1===Y.showInLegend&&Me.legendItem&&Lt.legend.destroyItem(Me))}ht.initialType=Wt,Lt.linkSeries(),Ot&&ht.linkedSeries.length&&(ht.isDirtyData=!0),y(this,"afterUpdate"),z(lt,!0)&&Lt.redraw(!!pe&&void 0)},dt.prototype.setName=function(Y){this.name=this.options.name=this.userOptions.name=Y,this.chart.isDirtyLegend=!0},dt.prototype.hasOptionChanged=function(Y){var lt=this.options[Y],ht=this.chart.options.plotOptions,Lt=this.userOptions[Y];return Lt?lt!==Lt:lt!==z(ht&&ht[this.type]&&ht[this.type][Y],ht&&ht.series&&ht.series[Y],lt)},dt.prototype.onMouseOver=function(){var Y=this.chart,lt=Y.hoverSeries;Y.pointer.setHoverChartIndex(),lt&&lt!==this&&lt.onMouseOut(),this.options.events.mouseOver&&y(this,"mouseOver"),this.setState("hover"),Y.hoverSeries=this},dt.prototype.onMouseOut=function(){var Y=this.options,lt=this.chart,ht=lt.tooltip,Lt=lt.hoverPoint;lt.hoverSeries=null,Lt&&Lt.onMouseOut(),this&&Y.events.mouseOut&&y(this,"mouseOut"),!ht||this.stickyTracking||ht.shared&&!this.noSharedTooltip||ht.hide(),lt.series.forEach(function(At){At.setState("",!0)})},dt.prototype.setState=function(Y,lt){var ht=this,Lt=ht.options,At=ht.graph,Wt=Lt.inactiveOtherPoints,Ot=Lt.states,se=z(Ot[Y||"normal"]&&Ot[Y||"normal"].animation,ht.chart.options.chart.animation),_e=Lt.lineWidth,We=0,He=Lt.opacity;if(ht.state!==(Y=Y||"")&&([ht.group,ht.markerGroup,ht.dataLabelsGroup].forEach(function(Fe){Fe&&(ht.state&&Fe.removeClass("highcharts-series-"+ht.state),Y&&Fe.addClass("highcharts-series-"+Y))}),ht.state=Y,!ht.chart.styledMode)){if(Ot[Y]&&!1===Ot[Y].enabled)return;if(Y&&(_e=Ot[Y].lineWidth||_e+(Ot[Y].lineWidthPlus||0),He=z(Ot[Y].opacity,He)),At&&!At.dashstyle&&H(_e))for(At.animate(Lt={"stroke-width":_e},se);ht["zone-graph-"+We];)ht["zone-graph-"+We].animate(Lt,se),We+=1;Wt||[ht.group,ht.markerGroup,ht.dataLabelsGroup,ht.labelBySeries].forEach(function(Fe){Fe&&Fe.animate({opacity:He},se)})}lt&&Wt&&ht.points&&ht.setAllPointsToState(Y||void 0)},dt.prototype.setAllPointsToState=function(Y){this.points.forEach(function(lt){lt.setState&&lt.setState(Y)})},dt.prototype.setVisible=function(Y,lt){var ht=this,Lt=ht.chart,At=Lt.options.chart.ignoreHiddenSeries,Ot=(ht.visible=Y=ht.options.visible=ht.userOptions.visible=typeof Y>"u"?!ht.visible:Y)?"show":"hide";["group","dataLabelsGroup","markerGroup","tracker","tt"].forEach(function(se){ht[se]&&ht[se][Ot]()}),(Lt.hoverSeries===ht||(Lt.hoverPoint&&Lt.hoverPoint.series)===ht)&&ht.onMouseOut(),ht.legendItem&&Lt.legend.colorizeItem(ht,Y),ht.isDirty=!0,ht.options.stacking&&Lt.series.forEach(function(se){se.options.stacking&&se.visible&&(se.isDirty=!0)}),ht.linkedSeries.forEach(function(se){se.setVisible(Y,!1)}),At&&(Lt.isDirtyBox=!0),y(ht,Ot),!1!==lt&&Lt.redraw()},dt.prototype.show=function(){this.setVisible(!0)},dt.prototype.hide=function(){this.setVisible(!1)},dt.prototype.select=function(Y){this.selected=Y=this.options.selected=typeof Y>"u"?!this.selected:Y,this.checkbox&&(this.checkbox.checked=Y),y(this,Y?"select":"unselect")},dt.prototype.shouldShowTooltip=function(Y,lt,ht){return void 0===ht&&(ht={}),ht.series=this,ht.visiblePlotOnly=!0,this.chart.isInsidePlot(Y,lt,ht)},dt.defaultOptions=It,dt.types=K.seriesTypes,dt.registerType=K.registerSeriesType,dt}(),k(wt.prototype,{axisTypes:["xAxis","yAxis"],coll:"series",colorCounter:0,cropShoulder:1,directTouch:!1,drawLegendSymbol:Ut.drawLineMarker,isCartesian:!0,kdAxisArray:["clientX","plotY"],parallelArrays:["x","y"],pointClass:Rt,requireSorting:!0,sorted:!0}),K.series=wt,wt}),te(Ct,"Extensions/ScrollablePlotArea.js",[Ct["Core/Animation/AnimationUtilities.js"],Ct["Core/Axis/Axis.js"],Ct["Core/Chart/Chart.js"],Ct["Core/Series/Series.js"],Ct["Core/Renderer/RendererRegistry.js"],Ct["Core/Utilities.js"]],function(wt,xt,jt,zt,Ut,Rt){var It=wt.stop,K=Rt.addEvent,et=Rt.createElement,st=Rt.defined,R=Rt.merge,I=Rt.pick;K(jt,"afterSetChartSize",function(A){var x=this.options.chart.scrollablePlotArea,T=x&&x.minWidth;if(x=x&&x.minHeight,!this.renderer.forExport){if(T){if(this.scrollablePixelsX=T=Math.max(0,T-this.chartWidth)){this.scrollablePlotBox=this.renderer.scrollablePlotBox=R(this.plotBox),this.plotBox.width=this.plotWidth+=T,this.inverted?this.clipBox.height+=T:this.clipBox.width+=T;var j={1:{name:"right",value:T}}}}else x&&(this.scrollablePixelsY=T=Math.max(0,x-this.chartHeight),st(T)&&(this.scrollablePlotBox=this.renderer.scrollablePlotBox=R(this.plotBox),this.plotBox.height=this.plotHeight+=T,this.inverted?this.clipBox.width+=T:this.clipBox.height+=T,j={2:{name:"bottom",value:T}}));j&&!A.skipAxes&&this.axes.forEach(function(V){j[V.side]?V.getPlotLinePath=function(){var nt=j[V.side].name,w=this[nt];this[nt]=w-j[V.side].value;var l=xt.prototype.getPlotLinePath.apply(this,arguments);return this[nt]=w,l}:(V.setAxisSize(),V.setAxisTranslation())})}}),K(jt,"render",function(){this.scrollablePixelsX||this.scrollablePixelsY?(this.setUpScrolling&&this.setUpScrolling(),this.applyFixed()):this.fixedDiv&&this.applyFixed()}),jt.prototype.setUpScrolling=function(){var T,A=this,x={WebkitOverflowScrolling:"touch",overflowX:"hidden",overflowY:"hidden"};this.scrollablePixelsX&&(x.overflowX="auto"),this.scrollablePixelsY&&(x.overflowY="auto"),this.scrollingParent=et("div",{className:"highcharts-scrolling-parent"},{position:"relative"},this.renderTo),this.scrollingContainer=et("div",{className:"highcharts-scrolling"},x,this.scrollingParent),K(this.scrollingContainer,"scroll",function(){A.pointer&&(delete A.pointer.chartPosition,A.hoverPoint&&(T=A.hoverPoint),A.pointer.runPointActions(void 0,T,!0))}),this.innerContainer=et("div",{className:"highcharts-inner-container"},null,this.scrollingContainer),this.innerContainer.appendChild(this.container),this.setUpScrolling=null},jt.prototype.moveFixedElements=function(){var j,A=this.container,x=this.fixedRenderer,T=".highcharts-contextbutton .highcharts-credits .highcharts-legend .highcharts-legend-checkbox .highcharts-navigator-series .highcharts-navigator-xaxis .highcharts-navigator-yaxis .highcharts-navigator .highcharts-reset-zoom .highcharts-drillup-button .highcharts-scrollbar .highcharts-subtitle .highcharts-title".split(" ");this.scrollablePixelsX&&!this.inverted?j=".highcharts-yaxis":this.scrollablePixelsX&&this.inverted||this.scrollablePixelsY&&!this.inverted?j=".highcharts-xaxis":this.scrollablePixelsY&&this.inverted&&(j=".highcharts-yaxis"),j&&T.push(j+":not(.highcharts-radial-axis)",j+"-labels:not(.highcharts-radial-axis-labels)"),T.forEach(function(V){[].forEach.call(A.querySelectorAll(V),function(nt){(nt.namespaceURI===x.SVG_NS?x.box:x.box.parentNode).appendChild(nt),nt.style.pointerEvents="auto"})})},jt.prototype.applyFixed=function(){var A=!this.fixedDiv,x=this.options.chart,T=x.scrollablePlotArea,j=Ut.getRendererType();A?(this.fixedDiv=et("div",{className:"highcharts-fixed"},{position:"absolute",overflow:"hidden",pointerEvents:"none",zIndex:(x.style&&x.style.zIndex||0)+2,top:0},null,!0),this.scrollingContainer&&this.scrollingContainer.parentNode.insertBefore(this.fixedDiv,this.scrollingContainer),this.renderTo.style.overflow="visible",this.fixedRenderer=x=new j(this.fixedDiv,this.chartWidth,this.chartHeight,this.options.chart.style),this.scrollableMask=x.path().attr({fill:this.options.chart.backgroundColor||"#fff","fill-opacity":I(T.opacity,.85),zIndex:-1}).addClass("highcharts-scrollable-mask").add(),K(this,"afterShowResetZoom",this.moveFixedElements),K(this,"afterApplyDrilldown",this.moveFixedElements),K(this,"afterLayOutTitles",this.moveFixedElements)):this.fixedRenderer.setSize(this.chartWidth,this.chartHeight),(this.scrollableDirty||A)&&(this.scrollableDirty=!1,this.moveFixedElements()),x=this.chartWidth+(this.scrollablePixelsX||0),j=this.chartHeight+(this.scrollablePixelsY||0),It(this.container),this.container.style.width=x+"px",this.container.style.height=j+"px",this.renderer.boxWrapper.attr({width:x,height:j,viewBox:[0,0,x,j].join(" ")}),this.chartBackground.attr({width:x,height:j}),this.scrollingContainer.style.height=this.chartHeight+"px",A&&(T.scrollPositionX&&(this.scrollingContainer.scrollLeft=this.scrollablePixelsX*T.scrollPositionX),T.scrollPositionY&&(this.scrollingContainer.scrollTop=this.scrollablePixelsY*T.scrollPositionY)),A=this.plotTop-(j=this.axisOffset)[0]-1,T=this.plotLeft-j[3]-1,x=this.plotTop+this.plotHeight+j[2]+1,j=this.plotLeft+this.plotWidth+j[1]+1;var V=this.plotLeft+this.plotWidth-(this.scrollablePixelsX||0),nt=this.plotTop+this.plotHeight-(this.scrollablePixelsY||0);A=this.scrollablePixelsX?[["M",0,A],["L",this.plotLeft-1,A],["L",this.plotLeft-1,x],["L",0,x],["Z"],["M",V,A],["L",this.chartWidth,A],["L",this.chartWidth,x],["L",V,x],["Z"]]:this.scrollablePixelsY?[["M",T,0],["L",T,this.plotTop-1],["L",j,this.plotTop-1],["L",j,0],["Z"],["M",T,nt],["L",T,this.chartHeight],["L",j,this.chartHeight],["L",j,nt],["Z"]]:[["M",0,0]],"adjustHeight"!==this.redrawTrigger&&this.scrollableMask.attr({d:A})},K(xt,"afterInit",function(){this.chart.scrollableDirty=!0}),K(zt,"show",function(){this.chart.scrollableDirty=!0})}),te(Ct,"Core/Axis/Stacking/StackItem.js",[Ct["Core/FormatUtilities.js"],Ct["Core/Series/SeriesRegistry.js"],Ct["Core/Utilities.js"]],function(wt,xt,jt){var zt=wt.format,Ut=xt.series,Rt=jt.defined,It=jt.destroyObjectProperties,K=jt.isNumber,et=jt.pick;return function(){function st(R,I,A,x,T){var j=R.chart.inverted;this.axis=R,this.isNegative=A,this.options=I=I||{},this.x=x,this.cumulative=this.total=null,this.points={},this.hasValidPoints=!1,this.stack=T,this.rightCliff=this.leftCliff=0,this.alignOptions={align:I.align||(j?A?"left":"right":"center"),verticalAlign:I.verticalAlign||(j?"middle":A?"bottom":"top"),y:I.y,x:I.x},this.textAlign=I.textAlign||(j?A?"right":"left":"center")}return st.prototype.destroy=function(){It(this,this.axis)},st.prototype.render=function(R){var I=this.axis.chart,A=this.options,x=A.format;x=x?zt(x,this,I):A.formatter.call(this),this.label?this.label.attr({text:x,visibility:"hidden"}):(this.label=I.renderer.label(x,null,null,A.shape,null,null,A.useHTML,!1,"stack-labels"),x={r:A.borderRadius||0,text:x,rotation:A.rotation,padding:et(A.padding,5),visibility:"hidden"},I.styledMode||(x.fill=A.backgroundColor,x.stroke=A.borderColor,x["stroke-width"]=A.borderWidth,this.label.css(A.style)),this.label.attr(x),this.label.added||this.label.add(R)),this.label.labelrank=I.plotSizeY},st.prototype.setOffset=function(R,I,A,x,T){var j=this.axis,V=j.chart;x=j.translate(j.stacking.usePercentage?100:x||this.total,0,0,0,1),A=j.translate(A||0),R=et(T,V.xAxis[0].translate(this.x))+R,j=Rt(x)&&this.getStackBox(V,this,R,x,I,Math.abs(x-A),j),A=this.isNegative;var nt=this.textAlign;(I=this.label)&&j&&(R=I.getBBox(),T=I.padding,x="justify"===et(this.options.overflow,"justify"),nt="left"===nt?V.inverted?-T:T:"right"===nt?R.width:V.inverted&&"center"===nt?R.width/2:V.inverted?A?R.width+T:-T:R.width/2,A=V.inverted?R.height/2:A?-T:R.height,this.alignOptions.x=et(this.options.x,0),this.alignOptions.y=et(this.options.y,0),j.x-=nt,j.y-=A,I.align(this.alignOptions,null,j),V.isInsidePlot(I.alignAttr.x+nt-this.alignOptions.x,I.alignAttr.y+A-this.alignOptions.y)?I.show():(I.hide(),x=!1),x&&Ut.prototype.justifyDataLabel.call(this.axis,I,this.alignOptions,I.alignAttr,R,j),I.attr({x:I.alignAttr.x,y:I.alignAttr.y}),et(!x&&this.options.crop,!0)&&((V=K(I.x)&&K(I.y)&&V.isInsidePlot(I.x-T+I.width,I.y)&&V.isInsidePlot(I.x+T,I.y))||I.hide()))},st.prototype.getStackBox=function(R,I,A,x,T,j,V){var nt=I.axis.reversed,w=R.inverted,l=V.height+V.pos-(w?R.plotLeft:R.plotTop);return I=I.isNegative&&!nt||!I.isNegative&&nt,{x:w?I?x-V.right:x-j+V.pos-R.plotLeft:A+R.xAxis[0].transB-R.plotLeft,y:w?V.height-A-T:I?l-x-j:l-x,width:w?j:T,height:w?T:j}},st}()}),te(Ct,"Core/Axis/Stacking/StackingAxis.js",[Ct["Core/Animation/AnimationUtilities.js"],Ct["Core/Axis/Axis.js"],Ct["Core/Series/SeriesRegistry.js"],Ct["Core/Axis/Stacking/StackItem.js"],Ct["Core/Utilities.js"]],function(wt,xt,jt,zt,Ut){function Rt(){var k=this,_=k.inverted;k.yAxis.forEach(function(y){y.stacking&&y.stacking.stacks&&y.hasVisibleSeries&&(y.stacking.oldStacks=y.stacking.stacks)}),k.series.forEach(function(y){var O=y.xAxis&&y.xAxis.options||{};!y.options.stacking||!0!==y.visible&&!1!==k.options.chart.ignoreHiddenSeries||(y.stackKey=[y.type,v(y.options.stack,""),_?O.top:O.left,_?O.height:O.width].join())})}function It(){var k=this.stacking;if(k){var _=k.stacks;G(_,function(y,O){w(y),_[O]=null}),k&&k.stackTotalGroup&&k.stackTotalGroup.destroy()}}function K(){this.stacking||(this.stacking=new M(this))}function et(k,_,y,O){return!nt(k)||k.x!==_||O&&k.stackKey!==O?k={x:_,index:0,key:O,stackKey:O}:k.index++,k.key=[y,_,k.index].join(),k}function st(){var H,k=this,_=k.stackKey,y=k.yAxis.stacking.stacks,O=k.processedXData,B=k[k.options.stacking+"Stacker"];B&&[_,"-"+_].forEach(function(at){for(var rt,z,ft=O.length;ft--;)H=k.getStackIndicator(H,rt=O[ft],k.index,at),(z=(rt=y[at]&&y[at][rt])&&rt.points[H.key])&&B.call(k,z,rt,ft)})}function R(k,_,y){k[0]=V(k[0]*(_=_.total?100/_.total:0)),k[1]=V(k[1]*_),this.stackedYData[y]=k[1]}function I(){var k=this.yAxis.stacking;this.options.centerInCategory&&(this.is("column")||this.is("columnrange"))&&!this.options.stacking&&1<this.chart.series.length?T.setStackedPoints.call(this,"group"):k&&G(k.stacks,function(_,y){"group"===y.slice(-5)&&(G(_,function(O){return O.destroy()}),delete k.stacks[y])})}function A(k){var _=this.chart,y=k||this.options.stacking;if(y&&(!0===this.visible||!1===_.options.chart.ignoreHiddenSeries)){var O=this.processedXData,B=this.processedYData,H=[],at=B.length,ft=this.options,rt=ft.threshold,z=v(ft.startFromThreshold&&rt,0);ft=ft.stack;var Y,lt,q="-"+(k=k?""+this.type+",".concat(y):this.stackKey),mt=this.negStacks,pt=(_="group"===y?_.yAxis[0]:this.yAxis).stacking.stacks,dt=_.stacking.oldStacks;for(_.stacking.stacksTouched+=1,lt=0;lt<at;lt++){var ht=O[lt],Lt=B[lt],At=this.getStackIndicator(At,ht,this.index),Wt=At.key,Ot=(Y=mt&&Lt<(z?0:rt))?q:k;pt[Ot]||(pt[Ot]={}),pt[Ot][ht]||(dt[Ot]&&dt[Ot][ht]?(pt[Ot][ht]=dt[Ot][ht],pt[Ot][ht].total=null):pt[Ot][ht]=new zt(_,_.options.stackLabels,!!Y,ht,ft)),Ot=pt[Ot][ht],null!==Lt?(Ot.points[Wt]=Ot.points[this.index]=[v(Ot.cumulative,z)],nt(Ot.cumulative)||(Ot.base=Wt),Ot.touched=_.stacking.stacksTouched,0<At.index&&!1===this.singleStacks&&(Ot.points[Wt][0]=Ot.points[this.index+","+ht+",0"][0])):Ot.points[Wt]=Ot.points[this.index]=null,"percent"===y?(Y=Y?k:q,Ot.total=mt&&pt[Y]&&pt[Y][ht]?(Y=pt[Y][ht]).total=Math.max(Y.total,Ot.total)+Math.abs(Lt)||0:V(Ot.total+(Math.abs(Lt)||0))):"group"===y?(it(Lt)&&(Lt=Lt[0]),null!==Lt&&(Ot.total=(Ot.total||0)+1)):Ot.total=V(Ot.total+(Lt||0)),Ot.cumulative="group"===y?(Ot.total||1)-1:v(Ot.cumulative,z)+(Lt||0),null!==Lt&&(Ot.points[Wt].push(Ot.cumulative),H[lt]=Ot.cumulative,Ot.hasValidPoints=!0)}"percent"===y&&(_.stacking.usePercentage=!0),"group"!==y&&(this.stackedYData=H),_.stacking.oldStacks={}}}var b,k,_,x=wt.getDeferredAnimation,T=jt.series.prototype,j=Ut.addEvent,V=Ut.correctFloat,nt=Ut.defined,w=Ut.destroyObjectProperties,l=Ut.fireEvent,it=Ut.isArray,N=Ut.isNumber,G=Ut.objectEach,v=Ut.pick,M=function(){function k(_){this.oldStacks={},this.stacks={},this.stacksTouched=0,this.axis=_}return k.prototype.buildStacks=function(){var H,_=this.axis,y=_.series,O=_.options.reversedStacks,B=y.length;if(!_.isXAxis){for(this.usePercentage=!1,H=B;H--;){var at=y[O?H:B-H-1];at.setStackedPoints(),at.setGroupedPoints()}for(H=0;H<B;H++)y[H].modifyStacks();l(_,"afterBuildStacks")}},k.prototype.cleanStacks=function(){if(!this.axis.isXAxis){if(this.oldStacks)var _=this.stacks=this.oldStacks;G(_,function(y){G(y,function(O){O.cumulative=O.total})})}},k.prototype.resetStacks=function(){var _=this;_.axis.isXAxis||G(_.stacks,function(O){G(O,function(B,H){N(B.touched)&&B.touched<_.stacksTouched?(B.destroy(),delete O[H]):(B.total=null,B.cumulative=null)})})},k.prototype.renderStackTotals=function(){var _=this.axis,y=_.chart,O=y.renderer,B=this.stacks;_=x(y,_.options.stackLabels&&_.options.stackLabels.animation||!1);var H=this.stackTotalGroup=this.stackTotalGroup||O.g("stack-labels").attr({zIndex:6,opacity:0}).add();H.translate(y.plotLeft,y.plotTop),G(B,function(at){G(at,function(ft){ft.render(H)})}),H.animate({opacity:1},_)},k}();return k=b||(b={}),_=[],k.compose=function(y,O,B){-1===_.indexOf(y)&&(_.push(y),j(y,"init",K),j(y,"destroy",It)),-1===_.indexOf(O)&&(_.push(O),O.prototype.getStacks=Rt),-1===_.indexOf(B)&&(_.push(B),(y=B.prototype).getStackIndicator=et,y.modifyStacks=st,y.percentStacker=R,y.setGroupedPoints=I,y.setStackedPoints=A)},b}),te(Ct,"Series/Line/LineSeries.js",[Ct["Core/Series/Series.js"],Ct["Core/Series/SeriesRegistry.js"],Ct["Core/Utilities.js"]],function(wt,xt,jt){var It,zt=this&&this.__extends||(It=function(K,et){return(It=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(st,R){st.__proto__=R}||function(st,R){for(var I in R)R.hasOwnProperty(I)&&(st[I]=R[I])})(K,et)},function(K,et){function st(){this.constructor=K}It(K,et),K.prototype=null===et?Object.create(et):(st.prototype=et.prototype,new st)}),Ut=jt.defined,Rt=jt.merge;return jt=function(It){function K(){var et=null!==It&&It.apply(this,arguments)||this;return et.data=void 0,et.options=void 0,et.points=void 0,et}return zt(K,It),K.prototype.drawGraph=function(){var et=this,st=this.options,R=(this.gappedPath||this.getGraphPath).call(this),I=this.chart.styledMode,A=[["graph","highcharts-graph"]];I||A[0].push(st.lineColor||this.color||"#cccccc",st.dashStyle),(A=et.getZonesGraphs(A)).forEach(function(x,T){var j=x[0],V=et[j],nt=V?"animate":"attr";V?(V.endX=et.preventGraphAnimation?null:R.xMap,V.animate({d:R})):R.length&&(et[j]=V=et.chart.renderer.path(R).addClass(x[1]).attr({zIndex:1}).add(et.group)),V&&!I&&(j={stroke:x[2],"stroke-width":st.lineWidth||0,fill:et.fillGraph&&et.color||"none"},x[3]?j.dashstyle=x[3]:"square"!==st.linecap&&(j["stroke-linecap"]=j["stroke-linejoin"]="round"),V[nt](j).shadow(2>T&&st.shadow)),V&&(V.startX=R.xMap,V.isArea=R.isArea)})},K.prototype.getGraphPath=function(et,st,R){var j,I=this,A=I.options,x=[],T=[],V=A.step,nt=(et=et||I.points).reversed;return nt&&et.reverse(),(V={right:1,center:2}[V]||V&&3)&&nt&&(V=4-V),(et=this.getValidPoints(et,!1,!(A.connectNulls&&!st&&!R))).forEach(function(w,l){var it=w.plotX,N=w.plotY,G=et[l-1];(w.leftCliff||G&&G.rightCliff)&&!R&&(j=!0),w.isNull&&!Ut(st)&&0<l?j=!A.connectNulls:w.isNull&&!st?j=!0:(0===l||j?l=[["M",w.plotX,w.plotY]]:I.getPointSpline?l=[I.getPointSpline(et,w,l)]:V?(l=1===V?[["L",G.plotX,N]]:2===V?[["L",(G.plotX+it)/2,G.plotY],["L",(G.plotX+it)/2,N]]:[["L",it,G.plotY]]).push(["L",it,N]):l=[["L",it,N]],T.push(w.x),V&&(T.push(w.x),2===V&&T.push(w.x)),x.push.apply(x,l),j=!1)}),x.xMap=T,I.graphPath=x},K.prototype.getZonesGraphs=function(et){return this.zones.forEach(function(st,R){R=["zone-graph-"+R,"highcharts-graph highcharts-zone-graph-"+R+" "+(st.className||"")],this.chart.styledMode||R.push(st.color||this.color,st.dashStyle||this.options.dashStyle),et.push(R)},this),et},K.defaultOptions=Rt(wt.defaultOptions,{}),K}(wt),xt.registerSeriesType("line",jt),jt}),te(Ct,"Series/Area/AreaSeries.js",[Ct["Core/Color/Color.js"],Ct["Core/Legend/LegendSymbol.js"],Ct["Core/Series/SeriesRegistry.js"],Ct["Core/Utilities.js"]],function(wt,xt,jt,zt){var R,Ut=this&&this.__extends||(R=function(I,A){return(R=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(x,T){x.__proto__=T}||function(x,T){for(var j in T)T.hasOwnProperty(j)&&(x[j]=T[j])})(I,A)},function(I,A){function x(){this.constructor=I}R(I,A),I.prototype=null===A?Object.create(A):(x.prototype=A.prototype,new x)}),Rt=wt.parse,It=jt.seriesTypes.line;wt=zt.extend;var K=zt.merge,et=zt.objectEach,st=zt.pick;return zt=function(R){function I(){var A=null!==R&&R.apply(this,arguments)||this;return A.data=void 0,A.options=void 0,A.points=void 0,A}return Ut(I,R),I.prototype.drawGraph=function(){this.areaPath=[],R.prototype.drawGraph.apply(this);var A=this,x=this.areaPath,T=this.options,j=[["area","highcharts-area",this.color,T.fillColor]];this.zones.forEach(function(V,nt){j.push(["zone-area-"+nt,"highcharts-area highcharts-zone-area-"+nt+" "+V.className,V.color||A.color,V.fillColor||T.fillColor])}),j.forEach(function(V){var nt=V[0],w={},l=A[nt],it=l?"animate":"attr";l?(l.endX=A.preventGraphAnimation?null:x.xMap,l.animate({d:x})):(w.zIndex=0,(l=A[nt]=A.chart.renderer.path(x).addClass(V[1]).add(A.group)).isArea=!0),A.chart.styledMode||(w.fill=st(V[3],Rt(V[2]).setOpacity(st(T.fillOpacity,.75)).get())),l[it](w),l.startX=x.xMap,l.shiftUnit=T.step?2:1})},I.prototype.getGraphPath=function(A){var x=It.prototype.getGraphPath,T=this.options,j=T.stacking,V=this.yAxis,nt=[],w=[],l=this.index,it=V.stacking.stacks[this.stackKey],N=T.threshold,G=Math.round(V.getThreshold(T.threshold));T=st(T.connectNulls,"percent"===j);var v=function(O,B,H){var at=A[O];O=j&&it[at.x].points[l];var ft=at[H+"Null"]||0;if(H=at[H+"Cliff"]||0,at=!0,H||ft){var rt=(ft?O[0]:O[1])+H,z=O[0]+H;at=!!ft}else!j&&A[B]&&A[B].isNull&&(rt=z=N);typeof rt<"u"&&(w.push({plotX:_,plotY:null===rt?G:V.getThreshold(rt),isNull:at,isCliff:!0}),nt.push({plotX:_,plotY:null===z?G:V.getThreshold(z),doCurve:!1}))};A=A||this.points,j&&(A=this.getStackPoints(A));for(var M=0,b=A.length;M<b;++M){j||(A[M].leftCliff=A[M].rightCliff=A[M].leftNull=A[M].rightNull=void 0);var k=A[M].isNull,_=st(A[M].rectPlotX,A[M].plotX),y=j?st(A[M].yBottom,G):G;(!k||T)&&(T||v(M,M-1,"left"),k&&!j&&T||(w.push(A[M]),nt.push({x:M,plotX:_,plotY:y})),T||v(M,M+1,"right"))}return v=x.call(this,w,!0,!0),nt.reversed=!0,(y=(k=x.call(this,nt,!0,!0))[0])&&"M"===y[0]&&(k[0]=["L",y[1],y[2]]),(k=v.concat(k)).length&&k.push(["Z"]),x=x.call(this,w,!1,T),k.xMap=v.xMap,this.areaPath=k,x},I.prototype.getStackPoints=function(A){var x=this,T=[],j=[],V=this.xAxis,nt=this.yAxis,w=nt.stacking.stacks[this.stackKey],l={},it=nt.series,N=it.length,G=nt.options.reversedStacks?1:-1,v=it.indexOf(x);if(A=A||this.points,this.options.stacking){for(var M=0;M<A.length;M++)A[M].leftNull=A[M].rightNull=void 0,l[A[M].x]=A[M];et(w,function(k,_){null!==k.total&&j.push(_)}),j.sort(function(k,_){return k-_});var b=it.map(function(k){return k.visible});j.forEach(function(k,_){var O,B,y=0;if(l[k]&&!l[k].isNull)T.push(l[k]),[-1,1].forEach(function(at){var ft=1===at?"rightNull":"leftNull",rt=w[j[_+at]],z=0;if(rt)for(var q=v;0<=q&&q<N;){var mt=it[q].index;(O=rt.points[mt])||(mt===x.index?l[k][ft]=!0:b[q]&&(B=w[k].points[mt])&&(z-=B[1]-B[0])),q+=G}l[k][1===at?"rightCliff":"leftCliff"]=z});else{for(var H=v;0<=H&&H<N;){if(O=w[k].points[it[H].index]){y=O[1];break}H+=G}y=st(y,0),y=nt.translate(y,0,1,0,1),T.push({isNull:!0,plotX:V.translate(k,0,0,0,1),x:k,plotY:y,yBottom:y})}})}return T},I.defaultOptions=K(It.defaultOptions,{threshold:0}),I}(It),wt(zt.prototype,{singleStacks:!1,drawLegendSymbol:xt.drawRectangle}),jt.registerSeriesType("area",zt),zt}),te(Ct,"Series/Spline/SplineSeries.js",[Ct["Core/Series/SeriesRegistry.js"],Ct["Core/Utilities.js"]],function(wt,xt){var It,jt=this&&this.__extends||(It=function(K,et){return(It=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(st,R){st.__proto__=R}||function(st,R){for(var I in R)R.hasOwnProperty(I)&&(st[I]=R[I])})(K,et)},function(K,et){function st(){this.constructor=K}It(K,et),K.prototype=null===et?Object.create(et):(st.prototype=et.prototype,new st)}),zt=wt.seriesTypes.line,Ut=xt.merge,Rt=xt.pick;return xt=function(It){function K(){var et=null!==It&&It.apply(this,arguments)||this;return et.data=void 0,et.options=void 0,et.points=void 0,et}return jt(K,It),K.prototype.getPointSpline=function(et,st,R){var I=st.plotX||0,A=st.plotY||0,x=et[R-1];if(R=et[R+1],x&&!x.isNull&&!1!==x.doCurve&&!st.isCliff&&R&&!R.isNull&&!1!==R.doCurve&&!st.isCliff){var T=R.plotX||0,j=0,V=(1.5*I+(x.plotX||0))/2.5,nt=(1.5*A+(et=x.plotY||0))/2.5,w=(1.5*A+(R=R.plotY||0))/2.5;(T=(1.5*I+T)/2.5)!==V&&(j=(w-nt)*(T-I)/(T-V)+A-w),w+=j,(nt+=j)>et&&nt>A?w=2*A-(nt=Math.max(et,A)):nt<et&&nt<A&&(w=2*A-(nt=Math.min(et,A))),w>R&&w>A?nt=2*A-(w=Math.max(R,A)):w<R&&w<A&&(nt=2*A-(w=Math.min(R,A))),st.rightContX=T,st.rightContY=w}return st=["C",Rt(x.rightContX,x.plotX,0),Rt(x.rightContY,x.plotY,0),Rt(V,I,0),Rt(nt,A,0),I,A],x.rightContX=x.rightContY=void 0,st},K.defaultOptions=Ut(zt.defaultOptions),K}(zt),wt.registerSeriesType("spline",xt),xt}),te(Ct,"Series/AreaSpline/AreaSplineSeries.js",[Ct["Series/Spline/SplineSeries.js"],Ct["Core/Legend/LegendSymbol.js"],Ct["Core/Series/SeriesRegistry.js"],Ct["Core/Utilities.js"]],function(wt,xt,jt,zt){var st,Ut=this&&this.__extends||(st=function(R,I){return(st=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(A,x){A.__proto__=x}||function(A,x){for(var T in x)x.hasOwnProperty(T)&&(A[T]=x[T])})(R,I)},function(R,I){function A(){this.constructor=R}st(R,I),R.prototype=null===I?Object.create(I):(A.prototype=I.prototype,new A)}),Rt=jt.seriesTypes,It=Rt.area;Rt=Rt.area.prototype;var K=zt.extend,et=zt.merge;return zt=function(st){function R(){var I=null!==st&&st.apply(this,arguments)||this;return I.data=void 0,I.points=void 0,I.options=void 0,I}return Ut(R,st),R.defaultOptions=et(wt.defaultOptions,It.defaultOptions),R}(wt),K(zt.prototype,{getGraphPath:Rt.getGraphPath,getStackPoints:Rt.getStackPoints,drawGraph:Rt.drawGraph,drawLegendSymbol:xt.drawRectangle}),jt.registerSeriesType("areaspline",zt),zt}),te(Ct,"Series/Column/ColumnSeriesDefaults.js",[],function(){return{borderRadius:0,centerInCategory:!1,groupPadding:.2,marker:null,pointPadding:.1,minPointLength:0,cropThreshold:50,pointRange:null,states:{hover:{halo:!1,brightness:.1},select:{color:"#cccccc",borderColor:"#000000"}},dataLabels:{align:void 0,verticalAlign:void 0,y:void 0},startFromThreshold:!0,stickyTracking:!1,tooltip:{distance:6},threshold:0,borderColor:"#ffffff"}}),te(Ct,"Series/Column/ColumnSeries.js",[Ct["Core/Animation/AnimationUtilities.js"],Ct["Core/Color/Color.js"],Ct["Series/Column/ColumnSeriesDefaults.js"],Ct["Core/Globals.js"],Ct["Core/Legend/LegendSymbol.js"],Ct["Core/Series/Series.js"],Ct["Core/Series/SeriesRegistry.js"],Ct["Core/Utilities.js"]],function(wt,xt,jt,zt,Ut,Rt,It,K){var N,et=this&&this.__extends||(N=function(G,v){return(N=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(M,b){M.__proto__=b}||function(M,b){for(var k in b)b.hasOwnProperty(k)&&(M[k]=b[k])})(G,v)},function(G,v){function M(){this.constructor=G}N(G,v),G.prototype=null===v?Object.create(v):(M.prototype=v.prototype,new M)}),st=wt.animObject,R=xt.parse,I=zt.hasTouch;wt=zt.noop;var A=K.clamp,x=K.defined,T=K.extend,j=K.fireEvent,V=K.isArray,nt=K.isNumber,w=K.merge,l=K.pick,it=K.objectEach;return K=function(N){function G(){var v=null!==N&&N.apply(this,arguments)||this;return v.borderWidth=void 0,v.data=void 0,v.group=void 0,v.options=void 0,v.points=void 0,v}return et(G,N),G.prototype.animate=function(v){var M=this,b=this.yAxis,k=M.options,_=this.chart.inverted,y={},O=_?"translateX":"translateY";if(v)y.scaleY=.001,v=A(b.toPixels(k.threshold),b.pos,b.pos+b.len),_?y.translateX=v-b.len:y.translateY=v,M.clipBox&&M.setClip(),M.group.attr(y);else{var B=Number(M.group.attr(O));M.group.animate({scaleY:1},T(st(M.options.animation),{step:function(H,at){M.group&&(y[O]=B+at.pos*(b.pos-B),M.group.attr(y))}}))}},G.prototype.init=function(v,M){N.prototype.init.apply(this,arguments);var b=this;(v=b.chart).hasRendered&&v.series.forEach(function(k){k.type===b.type&&(k.isDirty=!0)})},G.prototype.getColumnMetrics=function(){var v=this,M=v.options,b=v.xAxis,k=v.yAxis,_=b.options.reversedStacks;_=b.reversed&&!_||!b.reversed&&_;var O,y={},B=0;!1===M.grouping?B=1:v.chart.series.forEach(function(rt){var z=rt.yAxis,q=rt.options;if(rt.type===v.type&&(rt.visible||!v.chart.options.chart.ignoreHiddenSeries)&&k.len===z.len&&k.pos===z.pos){if(q.stacking&&"group"!==q.stacking){typeof y[O=rt.stackKey]>"u"&&(y[O]=B++);var mt=y[O]}else!1!==q.grouping&&(mt=B++);rt.columnIndex=mt}});var H=Math.min(Math.abs(b.transA)*(b.ordinal&&b.ordinal.slope||M.pointRange||b.closestPointRange||b.tickInterval||1),b.len),at=H*M.groupPadding,ft=(H-2*at)/(B||1);return M=Math.min(M.maxPointWidth||b.len,l(M.pointWidth,ft*(1-2*M.pointPadding))),v.columnMetrics={width:M,offset:(ft-M)/2+(at+((v.columnIndex||0)+(_?1:0))*ft-H/2)*(_?-1:1),paddedWidth:ft,columnCount:B},v.columnMetrics},G.prototype.crispCol=function(v,M,b,k){var _=this.chart,y=this.borderWidth,O=-(y%2?.5:0);return y=y%2?.5:1,_.inverted&&_.renderer.isVML&&(y+=1),this.options.crisp&&(b=Math.round(v+b)+O,b-=v=Math.round(v)+O),k=Math.round(M+k)+y,O=.5>=Math.abs(M)&&.5<k,k-=M=Math.round(M)+y,O&&k&&(--M,k+=1),{x:v,y:M,width:b,height:k}},G.prototype.adjustForMissingColumns=function(v,M,b,k){var _=this,y=this.options.stacking;if(!b.isNull&&1<k.columnCount){var O=this.yAxis.options.reversedStacks,B=0,H=O?0:-k.columnCount;it(this.yAxis.stacking&&this.yAxis.stacking.stacks,function(at){if("number"==typeof b.x){var ft=at[b.x.toString()];ft&&(at=ft.points[_.index],y?(at&&(B=H),ft.hasValidPoints&&(O?H++:H--)):V(at)&&(at=Object.keys(ft.points).filter(function(rt){return!rt.match(",")&&ft.points[rt]&&1<ft.points[rt].length}).map(parseFloat).sort(function(rt,z){return z-rt}),B=at.indexOf(_.index),H=at.length))}}),v=(b.plotX||0)+((H-1)*k.paddedWidth+M)/2-M-B*k.paddedWidth}return v},G.prototype.translate=function(){var v=this,M=v.chart,b=v.options,k=v.dense=2>v.closestPointRange*v.xAxis.transA;k=v.borderWidth=l(b.borderWidth,k?0:1);var _=v.xAxis,y=v.yAxis,O=b.threshold,B=v.translatedThreshold=y.getThreshold(O),H=l(b.minPointLength,5),at=v.getColumnMetrics(),ft=at.width,rt=v.pointXOffset=at.offset,z=v.dataMin,q=v.dataMax,mt=v.barW=Math.max(ft,1+2*k);M.inverted&&(B-=.5),b.pointPadding&&(mt=Math.ceil(mt)),Rt.prototype.translate.apply(v),v.points.forEach(function(pt){var dt=l(pt.yBottom,B),Y=999+Math.abs(dt),lt=pt.plotX||0;Y=A(pt.plotY,-Y,y.len+Y);var ht=Math.min(Y,dt),Lt=Math.max(Y,dt)-ht,At=ft,Wt=lt+rt,Ot=mt;H&&Math.abs(Lt)<H&&(Lt=H,lt=!y.reversed&&!pt.negative||y.reversed&&pt.negative,nt(O)&&nt(q)&&pt.y===O&&q<=O&&(y.min||0)<O&&(z!==q||(y.max||0)<=O)&&(lt=!lt),ht=Math.abs(ht-B)>H?dt-H:B-(lt?H:0)),x(pt.options.pointWidth)&&(At=Ot=Math.ceil(pt.options.pointWidth),Wt-=Math.round((At-ft)/2)),b.centerInCategory&&(Wt=v.adjustForMissingColumns(Wt,At,pt,at)),pt.barX=Wt,pt.pointWidth=At,pt.tooltipPos=M.inverted?[A(y.len+y.pos-M.plotLeft-Y,y.pos-M.plotLeft,y.len+y.pos-M.plotLeft),_.len+_.pos-M.plotTop-Wt-Ot/2,Lt]:[_.left-M.plotLeft+Wt+Ot/2,A(Y+y.pos-M.plotTop,y.pos-M.plotTop,y.len+y.pos-M.plotTop),Lt],pt.shapeType=v.pointClass.prototype.shapeType||"rect",pt.shapeArgs=v.crispCol.apply(v,pt.isNull?[Wt,B,Ot,0]:[Wt,ht,Ot,Lt])})},G.prototype.drawGraph=function(){this.group[this.dense?"addClass":"removeClass"]("highcharts-dense-data")},G.prototype.pointAttribs=function(v,M){var b=this.options,k=this.pointAttrToOptions||{},_=k.stroke||"borderColor",y=k["stroke-width"]||"borderWidth",O=v&&v.color||this.color,B=v&&v[_]||b[_]||O;k=v&&v.options.dashStyle||b.dashStyle;var H=v&&v[y]||b[y]||this[y]||0,at=l(v&&v.opacity,b.opacity,1);if(v&&this.zones.length){var ft=v.getZone();O=v.options.color||ft&&(ft.color||v.nonZonedColor)||this.color,ft&&(B=ft.borderColor||B,k=ft.dashStyle||k,H=ft.borderWidth||H)}return M&&v&&(M=(v=w(b.states[M],v.options.states&&v.options.states[M]||{})).brightness,O=v.color||typeof M<"u"&&R(O).brighten(v.brightness).get()||O,B=v[_]||B,H=v[y]||H,k=v.dashStyle||k,at=l(v.opacity,at)),_={fill:O,stroke:B,"stroke-width":H,opacity:at},k&&(_.dashstyle=k),_},G.prototype.drawPoints=function(v){void 0===v&&(v=this.points);var O,M=this,b=this.chart,k=M.options,_=b.renderer,y=k.animationLimit||250;v.forEach(function(B){var H=B.graphic,at=!!H,ft=H&&b.pointCount<y?"animate":"attr";nt(B.plotY)&&null!==B.y?(O=B.shapeArgs,H&&B.hasNewShapeType()&&(H=H.destroy()),M.enabledDataSorting&&(B.startXPos=M.xAxis.reversed?-(O&&O.width||0):M.xAxis.width),H||(B.graphic=H=_[B.shapeType](O).add(B.group||M.group))&&M.enabledDataSorting&&b.hasRendered&&b.pointCount<y&&(H.attr({x:B.startXPos}),at=!0,ft="animate"),H&&at&&H[ft](w(O)),k.borderRadius&&H[ft]({r:k.borderRadius}),b.styledMode||H[ft](M.pointAttribs(B,B.selected&&"select")).shadow(!1!==B.allowShadow&&k.shadow,null,k.stacking&&!k.borderRadius),H&&(H.addClass(B.getClassName(),!0),H.attr({visibility:B.visible?"inherit":"hidden"}))):H&&(B.graphic=H.destroy())})},G.prototype.drawTracker=function(v){void 0===v&&(v=this.points);var y,M=this,b=M.chart,k=b.pointer,_=function(O){var B=k.getPointFromEvent(O);typeof B<"u"&&(k.isDirectTouch=!0,B.onMouseOver(O))};v.forEach(function(O){y=V(O.dataLabels)?O.dataLabels:O.dataLabel?[O.dataLabel]:[],O.graphic&&(O.graphic.element.point=O),y.forEach(function(B){B.div?B.div.point=O:B.element.point=O})}),M._hasTracking||(M.trackerGroups.forEach(function(O){M[O]&&(M[O].addClass("highcharts-tracker").on("mouseover",_).on("mouseout",function(B){k.onTrackerMouseOut(B)}),I&&M[O].on("touchstart",_),!b.styledMode&&M.options.cursor&&M[O].css({cursor:M.options.cursor}))}),M._hasTracking=!0),j(this,"afterDrawTracker")},G.prototype.remove=function(){var v=this,M=v.chart;M.hasRendered&&M.series.forEach(function(b){b.type===v.type&&(b.isDirty=!0)}),Rt.prototype.remove.apply(v,arguments)},G.defaultOptions=w(Rt.defaultOptions,jt),G}(Rt),T(K.prototype,{cropShoulder:0,directTouch:!0,drawLegendSymbol:Ut.drawRectangle,getSymbol:wt,negStacks:!0,trackerGroups:["group","dataLabelsGroup"]}),It.registerSeriesType("column",K),K}),te(Ct,"Core/Series/DataLabel.js",[Ct["Core/Animation/AnimationUtilities.js"],Ct["Core/FormatUtilities.js"],Ct["Core/Utilities.js"]],function(wt,xt,jt){var T,zt=wt.getDeferredAnimation,Ut=xt.format,Rt=jt.defined,It=jt.extend,K=jt.fireEvent,et=jt.isArray,st=jt.isString,R=jt.merge,I=jt.objectEach,A=jt.pick,x=jt.splat;return function(j){function V(v,M,b,k,_){var y=this,O=this.chart,B=this.isCartesian&&O.inverted,H=this.enabledDataSorting,at=v.plotX,ft=v.plotY,rt=b.rotation,z=b.align,q=Rt(at)&&Rt(ft)&&O.isInsidePlot(at,Math.round(ft),{inverted:B,paneCoordinates:!0,series:y}),mt=function(ht){H&&y.xAxis&&!pt&&y.setDataLabelStartPos(v,M,_,q,ht)},pt="justify"===A(b.overflow,H?"none":"justify"),dt=this.visible&&!1!==v.visible&&Rt(at)&&(v.series.forceDL||H&&!pt||q||A(b.inside,!!this.options.stacking)&&k&&O.isInsidePlot(at,B?k.x+1:k.y+k.height-1,{inverted:B,paneCoordinates:!0,series:y}));if(dt&&Rt(at)&&Rt(ft)){rt&&M.attr({align:z}),z=M.getBBox(!0);var Y=[0,0],lt=O.renderer.fontMetrics(O.styledMode?void 0:b.style.fontSize,M).b;k=It({x:B?this.yAxis.len-ft:at,y:Math.round(B?this.xAxis.len-at:ft),width:0,height:0},k),It(b,{width:z.width,height:z.height}),rt?(pt=!1,Y=O.renderer.rotCorr(lt,rt),lt={x:k.x+(b.x||0)+k.width/2+Y.x,y:k.y+(b.y||0)+{top:0,middle:.5,bottom:1}[b.verticalAlign]*k.height},Y=[z.x-Number(M.attr("x")),z.y-Number(M.attr("y"))],mt(lt),M[_?"attr":"animate"](lt)):(mt(k),M.align(b,void 0,k),lt=M.alignAttr),pt&&0<=k.height?this.justifyDataLabel(M,b,lt,z,k,_):A(b.crop,!0)&&(k=lt.x,mt=lt.y,dt=O.isInsidePlot(k+=Y[0],mt+=Y[1],{paneCoordinates:!0,series:y})&&O.isInsidePlot(k+z.width,mt+z.height,{paneCoordinates:!0,series:y})),b.shape&&!rt&&M[_?"attr":"animate"]({anchorX:B?O.plotWidth-ft:at,anchorY:B?O.plotHeight-at:ft})}_&&H&&(M.placed=!1),dt||H&&!pt?M.show():(M.hide(),M.placed=!1)}function w(v){void 0===v&&(v=this.points);var M=this,b=M.chart,k=M.options,_=M.hasRendered||0,y=b.renderer,O=b.options.chart,B=O.backgroundColor,H=y.getContrast(st(O=O.plotBackgroundColor)&&O||st(B)&&B||"#000000"),at=k.dataLabels;if(B=at.animation,B=at.defer?zt(b,B,M):{defer:0,duration:0},at=it(it(b.options.plotOptions&&b.options.plotOptions.series&&b.options.plotOptions.series.dataLabels,b.options.plotOptions&&b.options.plotOptions[M.type]&&b.options.plotOptions[M.type].dataLabels),at),K(this,"drawDataLabels"),et(at)||at.enabled||M._hasPointLabels){var rt=M.plotGroup("dataLabelsGroup","data-labels",_?"inherit":"hidden",at.zIndex||6);rt.attr({opacity:+_}),!_&&(_=M.dataLabelsGroup)&&(M.visible&&rt.show(),_[k.animation?"animate":"attr"]({opacity:1},B)),v.forEach(function(z){x(it(at,z.dlOptions||z.options&&z.options.dataLabels)).forEach(function(q,mt){var pt=q.enabled&&(!z.isNull||z.dataLabelOnNull)&&function nt(v,M){var b=M.filter;return!b||(M=b.operator,v=v[b.property],b=b.value,">"===M&&v>b||"<"===M&&v<b||">="===M&&v>=b||"<="===M&&v<=b||"=="===M&&v==b||"==="===M&&v===b)}(z,q),dt=z.connectors?z.connectors[mt]:z.connector,Y=z.dataLabels?z.dataLabels[mt]:z.dataLabel,lt=!Y,ht=A(q.distance,z.labelDistance);if(pt){var Lt=z.getLabelConfig(),At=A(q[z.formatPrefix+"Format"],q.format);Lt=Rt(At)?Ut(At,Lt,b):(q[z.formatPrefix+"Formatter"]||q.formatter).call(Lt,q),At=q.style;var Wt=q.rotation;b.styledMode||(At.color=A(q.color,At.color,M.color,"#000000"),"contrast"===At.color?(z.contrastColor=y.getContrast(z.color||M.color),At.color=!Rt(ht)&&q.inside||0>ht||k.stacking?z.contrastColor:H):delete z.contrastColor,k.cursor&&(At.cursor=k.cursor));var Ot={r:q.borderRadius||0,rotation:Wt,padding:q.padding,zIndex:1};b.styledMode||(Ot.fill=q.backgroundColor,Ot.stroke=q.borderColor,Ot["stroke-width"]=q.borderWidth),I(Ot,function(se,_e){typeof se>"u"&&delete Ot[_e]})}!Y||pt&&Rt(Lt)&&!!Y.div==!!q.useHTML&&(Y.rotation&&q.rotation||Y.rotation===q.rotation)||(lt=!0,z.dataLabel=Y=z.dataLabel&&z.dataLabel.destroy(),z.dataLabels&&(1===z.dataLabels.length?delete z.dataLabels:delete z.dataLabels[mt]),mt||delete z.dataLabel,dt&&(z.connector=z.connector.destroy(),z.connectors&&(1===z.connectors.length?delete z.connectors:delete z.connectors[mt]))),pt&&Rt(Lt)?(Y?Ot.text=Lt:(z.dataLabels=z.dataLabels||[],Y=z.dataLabels[mt]=Wt?y.text(Lt,0,0,q.useHTML).addClass("highcharts-data-label"):y.label(Lt,0,0,q.shape,null,null,q.useHTML,null,"data-label"),mt||(z.dataLabel=Y),Y.addClass(" highcharts-data-label-color-"+z.colorIndex+" "+(q.className||"")+(q.useHTML?" highcharts-tracker":""))),Y.options=q,Y.attr(Ot),b.styledMode||Y.css(At).shadow(q.shadow),(mt=q[z.formatPrefix+"TextPath"]||q.textPath)&&!q.useHTML&&(Y.setTextPath(z.getDataLabelPath&&z.getDataLabelPath(Y)||z.graphic,mt),z.dataLabelPath&&!mt.enabled&&(z.dataLabelPath=z.dataLabelPath.destroy())),Y.added||Y.add(rt),M.alignDataLabel(z,Y,q,null,lt)):Y&&Y.hide()})})}K(this,"afterDrawDataLabels")}function l(v,M,b,k,_,y){var O=this.chart,B=M.align,H=M.verticalAlign,at=v.box?0:v.padding||0,ft=M.x;ft=void 0===ft?0:ft;var rt=M.y;rt=void 0===rt?0:rt;var z=(b.x||0)+at;if(0>z){"right"===B&&0<=ft?(M.align="left",M.inside=!0):ft-=z;var q=!0}return(z=(b.x||0)+k.width-at)>O.plotWidth&&("left"===B&&0>=ft?(M.align="right",M.inside=!0):ft+=O.plotWidth-z,q=!0),0>(z=b.y+at)&&("bottom"===H&&0<=rt?(M.verticalAlign="top",M.inside=!0):rt-=z,q=!0),(z=(b.y||0)+k.height-at)>O.plotHeight&&("top"===H&&0>=rt?(M.verticalAlign="bottom",M.inside=!0):rt+=O.plotHeight-z,q=!0),q&&(M.x=ft,M.y=rt,v.placed=!y,v.align(M,void 0,_)),q}function it(v,M){var k,b=[];if(et(v)&&!et(M))b=v.map(function(_){return R(_,M)});else if(et(M)&&!et(v))b=M.map(function(_){return R(v,_)});else if(et(v)||et(M))for(k=Math.max(v.length,M.length);k--;)b[k]=R(v[k],M[k]);else b=R(v,M);return b}function N(v,M,b,k,_){var y=this.chart,O=y.inverted,B=this.xAxis,H=B.reversed,at=O?M.height/2:M.width/2;v=(v=v.pointWidth)?v/2:0,M.startXPos=O?_.x:H?-at-v:B.width-at+v,M.startYPos=O?H?this.yAxis.height-at+v:-at-v:_.y,k?"hidden"===M.visibility&&(M.show(),M.attr({opacity:0}).animate({opacity:1})):M.attr({opacity:1}).animate({opacity:0},void 0,M.hide),y.hasRendered&&(b&&M.attr({x:M.startXPos,y:M.startYPos}),M.placed=!0)}var G=[];j.compose=function(v){if(-1===G.indexOf(v)){var M=v.prototype;G.push(v),M.alignDataLabel=V,M.drawDataLabels=w,M.justifyDataLabel=l,M.setDataLabelStartPos=N}}}(T||(T={})),T}),te(Ct,"Series/Column/ColumnDataLabel.js",[Ct["Core/Series/DataLabel.js"],Ct["Core/Series/SeriesRegistry.js"],Ct["Core/Utilities.js"]],function(wt,xt,jt){var It,zt=xt.series,Ut=jt.merge,Rt=jt.pick;return function(K){function et(R,I,A,x,T){var j=this.chart.inverted,V=R.series,nt=(V.xAxis?V.xAxis.len:this.chart.plotSizeX)||0,w=R.dlBox||R.shapeArgs,l=Rt(R.below,R.plotY>Rt(this.translatedThreshold,V=(V.yAxis?V.yAxis.len:this.chart.plotSizeY)||0)),it=Rt(A.inside,!!this.options.stacking);w&&(0>(x=Ut(w)).y&&(x.height+=x.y,x.y=0),0<(w=x.y+x.height-V)&&w<x.height&&(x.height-=w),j&&(x={x:V-x.y-x.height,y:nt-x.x-x.width,width:x.height,height:x.width}),it||(j?(x.x+=l?0:x.width,x.width=0):(x.y+=l?x.height:0,x.height=0))),A.align=Rt(A.align,!j||it?"center":l?"right":"left"),A.verticalAlign=Rt(A.verticalAlign,j||it?"middle":l?"top":"bottom"),zt.prototype.alignDataLabel.call(this,R,I,A,x,T),A.inside&&R.contrastColor&&I.css({color:R.contrastColor})}var st=[];K.compose=function(R){wt.compose(zt),-1===st.indexOf(R)&&(st.push(R),R.prototype.alignDataLabel=et)}}(It||(It={})),It}),te(Ct,"Series/Bar/BarSeries.js",[Ct["Series/Column/ColumnSeries.js"],Ct["Core/Series/SeriesRegistry.js"],Ct["Core/Utilities.js"]],function(wt,xt,jt){var It,zt=this&&this.__extends||(It=function(K,et){return(It=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(st,R){st.__proto__=R}||function(st,R){for(var I in R)R.hasOwnProperty(I)&&(st[I]=R[I])})(K,et)},function(K,et){function st(){this.constructor=K}It(K,et),K.prototype=null===et?Object.create(et):(st.prototype=et.prototype,new st)}),Ut=jt.extend,Rt=jt.merge;return jt=function(It){function K(){var et=null!==It&&It.apply(this,arguments)||this;return et.data=void 0,et.options=void 0,et.points=void 0,et}return zt(K,It),K.defaultOptions=Rt(wt.defaultOptions,{}),K}(wt),Ut(jt.prototype,{inverted:!0}),xt.registerSeriesType("bar",jt),jt}),te(Ct,"Series/Scatter/ScatterSeriesDefaults.js",[],function(){return{lineWidth:0,findNearestPointBy:"xy",jitter:{x:0,y:0},marker:{enabled:!0},tooltip:{headerFormat:'<span style="color:{point.color}">\u25cf</span> <span style="font-size: 10px"> {series.name}</span><br/>',pointFormat:"x: <b>{point.x}</b><br/>y: <b>{point.y}</b><br/>"}}}),te(Ct,"Series/Scatter/ScatterSeries.js",[Ct["Series/Scatter/ScatterSeriesDefaults.js"],Ct["Core/Series/SeriesRegistry.js"],Ct["Core/Utilities.js"]],function(wt,xt,jt){var st,zt=this&&this.__extends||(st=function(R,I){return(st=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(A,x){A.__proto__=x}||function(A,x){for(var T in x)x.hasOwnProperty(T)&&(A[T]=x[T])})(R,I)},function(R,I){function A(){this.constructor=R}st(R,I),R.prototype=null===I?Object.create(I):(A.prototype=I.prototype,new A)}),Ut=xt.seriesTypes,Rt=Ut.column,It=Ut.line;Ut=jt.addEvent;var K=jt.extend,et=jt.merge;return jt=function(st){function R(){var I=null!==st&&st.apply(this,arguments)||this;return I.data=void 0,I.options=void 0,I.points=void 0,I}return zt(R,st),R.prototype.applyJitter=function(){var I=this,A=this.options.jitter,x=this.points.length;A&&this.points.forEach(function(T,j){["x","y"].forEach(function(V,nt){var w="plot"+V.toUpperCase();if(A[V]&&!T.isNull){var l=I[V+"Axis"],it=A[V]*l.transA;if(l&&!l.isLog){var N=Math.max(0,T[w]-it);l=Math.min(l.len,T[w]+it),nt=1e4*Math.sin(j+nt*x),T[w]=N+(l-N)*(nt-Math.floor(nt)),"x"===V&&(T.clientX=T.plotX)}}})})},R.prototype.drawGraph=function(){this.options.lineWidth?st.prototype.drawGraph.call(this):this.graph&&(this.graph=this.graph.destroy())},R.defaultOptions=et(It.defaultOptions,wt),R}(It),K(jt.prototype,{drawTracker:Rt.prototype.drawTracker,sorted:!1,requireSorting:!1,noSharedTooltip:!0,trackerGroups:["group","markerGroup","dataLabelsGroup"],takeOrdinalPosition:!1}),Ut(jt,"afterTranslate",function(){this.applyJitter()}),xt.registerSeriesType("scatter",jt),jt}),te(Ct,"Series/CenteredUtilities.js",[Ct["Core/Globals.js"],Ct["Core/Series/Series.js"],Ct["Core/Utilities.js"]],function(wt,xt,jt){var et,st,zt=wt.deg2rad,Ut=jt.fireEvent,Rt=jt.isNumber,It=jt.pick,K=jt.relativeLength;return(st=et||(et={})).getCenter=function(){var R=this.options,I=this.chart,A=2*(R.slicedOffset||0),x=I.plotWidth-2*A,T=I.plotHeight-2*A,j=R.center,V=Math.min(x,T),nt=R.thickness,w=R.size,l=R.innerSize||0;for("string"==typeof w&&(w=parseFloat(w)),"string"==typeof l&&(l=parseFloat(l)),R=[It(j[0],"50%"),It(j[1],"50%"),It(w&&0>w?void 0:R.size,"100%"),It(l&&0>l?void 0:R.innerSize||0,"0%")],!I.angular||this instanceof xt||(R[3]=0),j=0;4>j;++j)w=R[j],I=2>j||2===j&&/%$/.test(w),R[j]=K(w,[x,T,V,R[2]][j])+(I?A:0);return R[3]>R[2]&&(R[3]=R[2]),Rt(nt)&&2*nt<R[2]&&0<nt&&(R[3]=R[2]-2*nt),Ut(this,"afterGetCenter",{positions:R}),R},st.getStartAndEndRadians=function(R,I){return R=Rt(R)?R:0,I=Rt(I)&&I>R&&360>I-R?I:R+360,{start:zt*(R+-90),end:zt*(I+-90)}},et}),te(Ct,"Series/Pie/PiePoint.js",[Ct["Core/Animation/AnimationUtilities.js"],Ct["Core/Series/Point.js"],Ct["Core/Utilities.js"]],function(wt,xt,jt){var R,zt=this&&this.__extends||(R=function(I,A){return(R=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(x,T){x.__proto__=T}||function(x,T){for(var j in T)T.hasOwnProperty(j)&&(x[j]=T[j])})(I,A)},function(I,A){function x(){this.constructor=I}R(I,A),I.prototype=null===A?Object.create(A):(x.prototype=A.prototype,new x)}),Ut=wt.setAnimation,Rt=jt.addEvent,It=jt.defined;wt=jt.extend;var K=jt.isNumber,et=jt.pick,st=jt.relativeLength;return xt=function(R){function I(){var A=null!==R&&R.apply(this,arguments)||this;return A.labelDistance=void 0,A.options=void 0,A.series=void 0,A}return zt(I,R),I.prototype.getConnectorPath=function(){var A=this.labelPosition,x=this.series.options.dataLabels,T=this.connectorShapes,j=x.connectorShape;return T[j]&&(j=T[j]),j.call(this,{x:A.final.x,y:A.final.y,alignment:A.alignment},A.connectorPosition,x)},I.prototype.getTranslate=function(){return this.sliced?this.slicedTranslation:{translateX:0,translateY:0}},I.prototype.haloPath=function(A){var x=this.shapeArgs;return this.sliced||!this.visible?[]:this.series.chart.renderer.symbols.arc(x.x,x.y,x.r+A,x.r+A,{innerR:x.r-1,start:x.start,end:x.end})},I.prototype.init=function(){var A=this;R.prototype.init.apply(this,arguments),this.name=et(this.name,"Slice");var x=function(T){A.slice("select"===T.type)};return Rt(this,"select",x),Rt(this,"unselect",x),this},I.prototype.isValid=function(){return K(this.y)&&0<=this.y},I.prototype.setVisible=function(A,x){var T=this,j=this.series,V=j.chart,nt=j.options.ignoreHiddenPoint;x=et(x,nt),A!==this.visible&&(this.visible=this.options.visible=A=typeof A>"u"?!this.visible:A,j.options.data[j.data.indexOf(this)]=this.options,["graphic","dataLabel","connector","shadowGroup"].forEach(function(w){T[w]&&T[w][A?"show":"hide"](A)}),this.legendItem&&V.legend.colorizeItem(this,A),A||"hover"!==this.state||this.setState(""),nt&&(j.isDirty=!0),x&&V.redraw())},I.prototype.slice=function(A,x,T){var j=this.series;Ut(T,j.chart),et(x,!0),this.sliced=this.options.sliced=It(A)?A:!this.sliced,j.options.data[j.data.indexOf(this)]=this.options,this.graphic&&this.graphic.animate(this.getTranslate()),this.shadowGroup&&this.shadowGroup.animate(this.getTranslate())},I}(xt),wt(xt.prototype,{connectorShapes:{fixedOffset:function(R,I,A){var x=I.breakAt;return I=I.touchingSliceAt,[["M",R.x,R.y],A.softConnector?["C",R.x+("left"===R.alignment?-5:5),R.y,2*x.x-I.x,2*x.y-I.y,x.x,x.y]:["L",x.x,x.y],["L",I.x,I.y]]},straight:function(R,I){return[["M",R.x,R.y],["L",(I=I.touchingSliceAt).x,I.y]]},crookedLine:function(R,I,A){I=I.touchingSliceAt;var x=this.series,T=x.center[0],j=x.chart.plotWidth,V=x.chart.plotLeft;x=R.alignment;var nt=this.shapeArgs.r;return A=st(A.crookDistance,1),A=["L",j="left"===x?T+nt+(j+V-T-nt)*(1-A):V+(T-nt)*A,R.y],T=!0,("left"===x?j>R.x||j<I.x:j<R.x||j>I.x)&&(T=!1),R=[["M",R.x,R.y]],T&&R.push(A),R.push(["L",I.x,I.y]),R}}}),xt}),te(Ct,"Series/Pie/PieSeriesDefaults.js",[],function(){return{center:[null,null],clip:!1,colorByPoint:!0,dataLabels:{allowOverlap:!0,connectorPadding:5,connectorShape:"fixedOffset",crookDistance:"70%",distance:30,enabled:!0,formatter:function(){return this.point.isNull?void 0:this.point.name},softConnector:!0,x:0},fillColor:void 0,ignoreHiddenPoint:!0,inactiveOtherPoints:!0,legendType:"point",marker:null,size:null,showInLegend:!1,slicedOffset:10,stickyTracking:!1,tooltip:{followPointer:!0},borderColor:"#ffffff",borderWidth:1,lineWidth:void 0,states:{hover:{brightness:.1}}}}),te(Ct,"Series/Pie/PieSeries.js",[Ct["Series/CenteredUtilities.js"],Ct["Series/Column/ColumnSeries.js"],Ct["Core/Globals.js"],Ct["Core/Legend/LegendSymbol.js"],Ct["Series/Pie/PiePoint.js"],Ct["Series/Pie/PieSeriesDefaults.js"],Ct["Core/Series/Series.js"],Ct["Core/Series/SeriesRegistry.js"],Ct["Core/Renderer/SVG/Symbols.js"],Ct["Core/Utilities.js"]],function(wt,xt,jt,zt,Ut,Rt,It,K,et,st){var w,R=this&&this.__extends||(w=function(l,it){return(w=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(N,G){N.__proto__=G}||function(N,G){for(var v in G)G.hasOwnProperty(v)&&(N[v]=G[v])})(l,it)},function(l,it){function N(){this.constructor=l}w(l,it),l.prototype=null===it?Object.create(it):(N.prototype=it.prototype,new N)}),I=wt.getStartAndEndRadians;jt=jt.noop;var A=st.clamp,x=st.extend,T=st.fireEvent,j=st.merge,V=st.pick,nt=st.relativeLength;return st=function(w){function l(){var it=null!==w&&w.apply(this,arguments)||this;return it.center=void 0,it.data=void 0,it.maxLabelDistance=void 0,it.options=void 0,it.points=void 0,it}return R(l,w),l.prototype.animate=function(it){var N=this,v=N.startAngleRad;it||N.points.forEach(function(M){var b=M.graphic,k=M.shapeArgs;b&&k&&(b.attr({r:V(M.startR,N.center&&N.center[3]/2),start:v,end:v}),b.animate({r:k.r,start:k.start,end:k.end},N.options.animation))})},l.prototype.drawEmpty=function(){var it=this.startAngleRad,N=this.endAngleRad,G=this.options;if(0===this.total&&this.center){var v=this.center[0],M=this.center[1];this.graph||(this.graph=this.chart.renderer.arc(v,M,this.center[1]/2,0,it,N).addClass("highcharts-empty-series").add(this.group)),this.graph.attr({d:et.arc(v,M,this.center[2]/2,0,{start:it,end:N,innerR:this.center[3]/2})}),this.chart.styledMode||this.graph.attr({"stroke-width":G.borderWidth,fill:G.fillColor||"none",stroke:G.color||"#cccccc"})}else this.graph&&(this.graph=this.graph.destroy())},l.prototype.drawPoints=function(){var it=this.chart.renderer;this.points.forEach(function(N){N.graphic&&N.hasNewShapeType()&&(N.graphic=N.graphic.destroy()),N.graphic||(N.graphic=it[N.shapeType](N.shapeArgs).add(N.series.group),N.delayedRendering=!0)})},l.prototype.generatePoints=function(){w.prototype.generatePoints.call(this),this.updateTotals()},l.prototype.getX=function(it,N,G){var v=this.center,M=this.radii?this.radii[G.index]||0:v[2]/2;return it=Math.asin(A((it-v[1])/(M+G.labelDistance),-1,1)),v[0]+(N?-1:1)*Math.cos(it)*(M+G.labelDistance)+(0<G.labelDistance?(N?-1:1)*this.options.dataLabels.padding:0)},l.prototype.hasData=function(){return!!this.processedXData.length},l.prototype.redrawPoints=function(){var M,b,k,_,it=this,N=it.chart,G=N.renderer,v=it.options.shadow;this.drawEmpty(),!v||it.shadowGroup||N.styledMode||(it.shadowGroup=G.g("shadow").attr({zIndex:-1}).add(it.group)),it.points.forEach(function(y){var O={};if(b=y.graphic,!y.isNull&&b){var B=void 0;_=y.shapeArgs,M=y.getTranslate(),N.styledMode||(B=y.shadowGroup,v&&!B&&(B=y.shadowGroup=G.g("shadow").add(it.shadowGroup)),B&&B.attr(M),k=it.pointAttribs(y,y.selected&&"select")),y.delayedRendering?(b.setRadialReference(it.center).attr(_).attr(M),N.styledMode||b.attr(k).attr({"stroke-linejoin":"round"}).shadow(v,B),y.delayedRendering=!1):(b.setRadialReference(it.center),N.styledMode||j(!0,O,k),j(!0,O,_,M),b.animate(O)),b.attr({visibility:y.visible?"inherit":"hidden"}),b.addClass(y.getClassName(),!0)}else b&&(y.graphic=b.destroy())})},l.prototype.sortByAngle=function(it,N){it.sort(function(G,v){return typeof G.angle<"u"&&(v.angle-G.angle)*N})},l.prototype.translate=function(it){T(this,"translate"),this.generatePoints();var N=this.options,G=N.slicedOffset,v=G+(N.borderWidth||0),M=I(N.startAngle,N.endAngle),b=this.startAngleRad=M.start;M=(this.endAngleRad=M.end)-b;var k=this.points,_=N.dataLabels.distance;N=N.ignoreHiddenPoint;var O,y=k.length,B=0;for(it||(this.center=it=this.getCenter()),O=0;O<y;O++){var H=k[O],at=b+B*M;!H.isValid()||N&&!H.visible||(B+=H.percentage/100);var ft=b+B*M,rt={x:it[0],y:it[1],r:it[2]/2,innerR:it[3]/2,start:Math.round(1e3*at)/1e3,end:Math.round(1e3*ft)/1e3};H.shapeType="arc",H.shapeArgs=rt,H.labelDistance=V(H.options.dataLabels&&H.options.dataLabels.distance,_),H.labelDistance=nt(H.labelDistance,rt.r),this.maxLabelDistance=Math.max(this.maxLabelDistance||0,H.labelDistance),(ft=(ft+at)/2)>1.5*Math.PI?ft-=2*Math.PI:ft<-Math.PI/2&&(ft+=2*Math.PI),H.slicedTranslation={translateX:Math.round(Math.cos(ft)*G),translateY:Math.round(Math.sin(ft)*G)},rt=Math.cos(ft)*it[2]/2;var z=Math.sin(ft)*it[2]/2;H.tooltipPos=[it[0]+.7*rt,it[1]+.7*z],H.half=ft<-Math.PI/2||ft>Math.PI/2?1:0,H.angle=ft,at=Math.min(v,H.labelDistance/5),H.labelPosition={natural:{x:it[0]+rt+Math.cos(ft)*H.labelDistance,y:it[1]+z+Math.sin(ft)*H.labelDistance},final:{},alignment:0>H.labelDistance?"center":H.half?"right":"left",connectorPosition:{breakAt:{x:it[0]+rt+Math.cos(ft)*at,y:it[1]+z+Math.sin(ft)*at},touchingSliceAt:{x:it[0]+rt,y:it[1]+z}}}}T(this,"afterTranslate")},l.prototype.updateTotals=function(){var v,it=this.points,N=it.length,G=this.options.ignoreHiddenPoint,M=0;for(v=0;v<N;v++){var b=it[v];!b.isValid()||G&&!b.visible||(M+=b.y)}for(this.total=M,v=0;v<N;v++)(b=it[v]).percentage=0<M&&(b.visible||!G)?b.y/M*100:0,b.total=M},l.defaultOptions=j(It.defaultOptions,Rt),l}(It),x(st.prototype,{axisTypes:[],directTouch:!0,drawGraph:void 0,drawLegendSymbol:zt.drawRectangle,drawTracker:xt.prototype.drawTracker,getCenter:wt.getCenter,getSymbol:jt,isCartesian:!1,noSharedTooltip:!0,pointAttribs:xt.prototype.pointAttribs,pointClass:Ut,requireSorting:!1,searchPoint:jt,trackerGroups:["group","dataLabelsGroup"]}),K.registerSeriesType("pie",st),st}),te(Ct,"Series/Pie/PieDataLabel.js",[Ct["Core/Series/DataLabel.js"],Ct["Core/Globals.js"],Ct["Core/Renderer/RendererUtilities.js"],Ct["Core/Series/SeriesRegistry.js"],Ct["Core/Utilities.js"]],function(wt,xt,jt,zt,Ut){var T,Rt=xt.noop,It=jt.distribute,K=zt.series,et=Ut.arrayMax,st=Ut.clamp,R=Ut.defined,I=Ut.merge,A=Ut.pick,x=Ut.relativeLength;return function(j){function V(){var q,mt,pt,dt,Y,lt,ht,Lt,At,Wt,Ot,se,N=this,G=N.data,v=N.chart,M=N.options.dataLabels||{},b=M.connectorPadding,k=v.plotWidth,_=v.plotHeight,y=v.plotLeft,O=Math.round(v.chartWidth/3),B=N.center,H=B[2]/2,at=B[1],ft=[[],[]],rt=[0,0,0,0],z=N.dataLabelPositioners;N.visible&&(M.enabled||N._hasPointLabels)&&(G.forEach(function(_e){_e.dataLabel&&_e.visible&&_e.dataLabel.shortened&&(_e.dataLabel.attr({width:"auto"}).css({width:"auto",textOverflow:"clip"}),_e.dataLabel.shortened=!1)}),K.prototype.drawDataLabels.apply(N),G.forEach(function(_e){_e.dataLabel&&(_e.visible?(ft[_e.half].push(_e),_e.dataLabel._pos=null,!R(M.style.width)&&!R(_e.options.dataLabels&&_e.options.dataLabels.style&&_e.options.dataLabels.style.width)&&_e.dataLabel.getBBox().width>O&&(_e.dataLabel.css({width:Math.round(.7*O)+"px"}),_e.dataLabel.shortened=!0)):(_e.dataLabel=_e.dataLabel.destroy(),_e.dataLabels&&1===_e.dataLabels.length&&delete _e.dataLabels))}),ft.forEach(function(_e,We){var pe,He=_e.length,Fe=[];if(He){if(N.sortByAngle(_e,We-.5),0<N.maxLabelDistance){var Me=Math.max(0,at-H-N.maxLabelDistance),me=Math.min(at+H+N.maxLabelDistance,v.plotHeight);_e.forEach(function(qt){0<qt.labelDistance&&qt.dataLabel&&(qt.top=Math.max(0,at-H-qt.labelDistance),qt.bottom=Math.min(at+H+qt.labelDistance,v.plotHeight),pe=qt.dataLabel.getBBox().height||21,qt.distributeBox={target:qt.labelPosition.natural.y-qt.top+pe/2,size:pe,rank:qt.y},Fe.push(qt.distributeBox))}),It(Fe,Me=me+pe-Me,Me/5)}for(Ot=0;Ot<He;Ot++){if(dt=(q=_e[Ot]).dataLabel,Wt=!1===q.visible?"hidden":"inherit",At=Me=(lt=q.labelPosition).natural.y,Fe&&R(q.distributeBox)&&(typeof q.distributeBox.pos>"u"?Wt="hidden":(ht=q.distributeBox.size,At=z.radialDistributionY(q))),delete q.positionIndex,M.justify)Lt=z.justify(q,H,B);else switch(M.alignTo){case"connectors":Lt=z.alignToConnectors(_e,We,k,y);break;case"plotEdges":Lt=z.alignToPlotEdges(dt,We,k,y);break;default:Lt=z.radialDistributionX(N,q,At,Me)}dt._attr={visibility:Wt,align:lt.alignment},dt._pos={x:Lt+A((se=q.options.dataLabels||{}).x,M.x)+({left:b,right:-b}[lt.alignment]||0),y:At+A(se.y,M.y)-10},lt.final.x=Lt,lt.final.y=At,A(M.crop,!0)&&(Y=dt.getBBox().width,Me=null,Lt-Y<b&&1===We?(Me=Math.round(Y-Lt+b),rt[3]=Math.max(Me,rt[3])):Lt+Y>k-b&&0===We&&(Me=Math.round(Lt+Y-k+b),rt[1]=Math.max(Me,rt[1])),0>At-ht/2?rt[0]=Math.max(Math.round(ht/2-At),rt[0]):At+ht/2>_&&(rt[2]=Math.max(Math.round(At+ht/2-_),rt[2])),dt.sideOverflow=Me)}}}),0===et(rt)||this.verifyDataLabelOverflow(rt))&&(this.placeDataLabels(),this.points.forEach(function(_e){var We;se=I(M,_e.options.dataLabels),(mt=A(se.connectorWidth,1))&&(pt=_e.connector,(dt=_e.dataLabel)&&dt._pos&&_e.visible&&0<_e.labelDistance?(Wt=dt._attr.visibility,(We=!pt)&&(_e.connector=pt=v.renderer.path().addClass("highcharts-data-label-connector  highcharts-color-"+_e.colorIndex+(_e.className?" "+_e.className:"")).add(N.dataLabelsGroup),v.styledMode||pt.attr({"stroke-width":mt,stroke:se.connectorColor||_e.color||"#666666"})),pt[We?"attr":"animate"]({d:_e.getConnectorPath()}),pt.attr("visibility",Wt)):pt&&(_e.connector=pt.destroy()))}))}function nt(){this.points.forEach(function(N){var v,G=N.dataLabel;G&&N.visible&&((v=G._pos)?(G.sideOverflow&&(G._attr.width=Math.max(G.getBBox().width-G.sideOverflow,0),G.css({width:G._attr.width+"px",textOverflow:(this.options.dataLabels.style||{}).textOverflow||"ellipsis"}),G.shortened=!0),G.attr(G._attr),G[G.moved?"animate":"attr"](v),G.moved=!0):G&&G.attr({y:-9999})),delete N.distributeBox},this)}function w(N){var G=this.center,v=this.options,M=v.center,b=v.minSize||80,k=null!==v.size;if(!k){if(null!==M[0])var _=Math.max(G[2]-Math.max(N[1],N[3]),b);else _=Math.max(G[2]-N[1]-N[3],b),G[0]+=(N[3]-N[1])/2;null!==M[1]?_=st(_,b,G[2]-Math.max(N[0],N[2])):(_=st(_,b,G[2]-N[0]-N[2]),G[1]+=(N[0]-N[2])/2),_<G[2]?(G[2]=_,G[3]=Math.min(v.thickness?Math.max(0,_-2*v.thickness):Math.max(0,x(v.innerSize||0,_)),_),this.translate(G),this.drawDataLabels&&this.drawDataLabels()):k=!0}return k}var l=[],it={radialDistributionY:function(N){return N.top+N.distributeBox.pos},radialDistributionX:function(N,G,v,M){return N.getX(v<G.top+2||v>G.bottom-2?M:v,G.half,G)},justify:function(N,G,v){return v[0]+(N.half?-1:1)*(G+N.labelDistance)},alignToPlotEdges:function(N,G,v,M){return N=N.getBBox().width,G?N+M:v-N-M},alignToConnectors:function(N,G,v,M){var k,b=0;return N.forEach(function(_){(k=_.dataLabel.getBBox().width)>b&&(b=k)}),G?b+M:v-b-M}};j.compose=function(N){wt.compose(K),-1===l.indexOf(N)&&(l.push(N),(N=N.prototype).dataLabelPositioners=it,N.alignDataLabel=Rt,N.drawDataLabels=V,N.placeDataLabels=nt,N.verifyDataLabelOverflow=w)}}(T||(T={})),T}),te(Ct,"Extensions/OverlappingDataLabels.js",[Ct["Core/Chart/Chart.js"],Ct["Core/Utilities.js"]],function(wt,xt){function jt(st,R){var I=!1;if(st){var A=st.newOpacity;st.oldOpacity!==A&&(st.alignAttr&&st.placed?(st[A?"removeClass":"addClass"]("highcharts-data-label-hidden"),I=!0,st.alignAttr.opacity=A,st[st.isOld?"animate":"attr"](st.alignAttr,null,function(){R.styledMode||st.css({pointerEvents:A?"auto":"none"})}),Ut(R,"afterHideOverlappingLabel")):st.attr({opacity:A})),st.isOld=!0}return I}var Ut=xt.fireEvent,Rt=xt.isArray,It=xt.isNumber,K=xt.objectEach,et=xt.pick;(0,xt.addEvent)(wt,"render",function(){var st=this,R=[];(this.labelCollectors||[]).forEach(function(I){R=R.concat(I())}),(this.yAxis||[]).forEach(function(I){I.stacking&&I.options.stackLabels&&!I.options.stackLabels.allowOverlap&&K(I.stacking.stacks,function(A){K(A,function(x){x.label&&R.push(x.label)})})}),(this.series||[]).forEach(function(I){var A=I.options.dataLabels;I.visible&&(!1!==A.enabled||I._hasPointLabels)&&((A=function(x){return x.forEach(function(T){T.visible&&(Rt(T.dataLabels)?T.dataLabels:T.dataLabel?[T.dataLabel]:[]).forEach(function(j){var V=j.options;j.labelrank=et(V.labelrank,T.labelrank,T.shapeArgs&&T.shapeArgs.height),V.allowOverlap?(j.oldOpacity=j.opacity,j.newOpacity=1,jt(j,st)):R.push(j)})})})(I.nodes||[]),A(I.points))}),this.hideOverlappingLabels(R)}),wt.prototype.hideOverlappingLabels=function(st){var x,T,j,R=this,I=st.length,A=R.renderer,V=!1,nt=function(it){var N,M,G=it.box?0:it.padding||0,v=N=0;if(it&&(!it.alignAttr||it.placed)){var b=it.alignAttr||{x:it.attr("x"),y:it.attr("y")},k=it.parentGroup;return it.width||(N=it.getBBox(),it.width=N.width,it.height=N.height,N=A.fontMetrics(null,it.element).h),(M={left:"0",center:"0.5",right:"1"}[it.alignValue])?v=+M*(it.width-2*G):It(it.x)&&Math.round(it.x)!==it.translateX&&(v=it.x-it.translateX),{x:b.x+(k.translateX||0)+G-(v||0),y:b.y+(k.translateY||0)+G-N,width:it.width-2*G,height:it.height-2*G}}};for(T=0;T<I;T++)(x=st[T])&&(x.oldOpacity=x.opacity,x.newOpacity=1,x.absoluteBox=nt(x));for(st.sort(function(it,N){return(N.labelrank||0)-(it.labelrank||0)}),T=0;T<I;T++){var w=(nt=st[T])&&nt.absoluteBox;for(x=T+1;x<I;++x){var l=(j=st[x])&&j.absoluteBox;!w||!l||nt===j||0===nt.newOpacity||0===j.newOpacity||"hidden"===nt.visibility||"hidden"===j.visibility||l.x>=w.x+w.width||l.x+l.width<=w.x||l.y>=w.y+w.height||l.y+l.height<=w.y||((nt.labelrank<j.labelrank?nt:j).newOpacity=0)}}st.forEach(function(it){jt(it,R)&&(V=!0)}),V&&Ut(R,"afterHideAllOverlappingLabels")}}),te(Ct,"Core/Responsive.js",[Ct["Core/Utilities.js"]],function(wt){var R,xt=wt.extend,jt=wt.find,zt=wt.isArray,Ut=wt.isObject,Rt=wt.merge,It=wt.objectEach,K=wt.pick,et=wt.splat,st=wt.uniqueKey;return function(I){var A=[];I.compose=function(T){return-1===A.indexOf(T)&&(A.push(T),xt(T.prototype,x.prototype)),T};var x=function(){function T(){}return T.prototype.currentOptions=function(j){var nt=this,w={};return function V(l,it,N,G){var v;It(l,function(M,b){if(!G&&-1<nt.collectionsWithUpdate.indexOf(b)&&it[b])for(M=et(M),N[b]=[],v=0;v<Math.max(M.length,it[b].length);v++)it[b][v]&&(void 0===M[v]?N[b][v]=it[b][v]:(N[b][v]={},V(M[v],it[b][v],N[b][v],G+1)));else Ut(M)?(N[b]=zt(M)?[]:{},V(M,it[b]||{},N[b],G+1)):N[b]=typeof it[b]>"u"?null:it[b]})}(j,this.options,w,0),w},T.prototype.matchResponsiveRule=function(j,V){var nt=j.condition;(nt.callback||function(){return this.chartWidth<=K(nt.maxWidth,Number.MAX_VALUE)&&this.chartHeight<=K(nt.maxHeight,Number.MAX_VALUE)&&this.chartWidth>=K(nt.minWidth,0)&&this.chartHeight>=K(nt.minHeight,0)}).call(this)&&V.push(j._id)},T.prototype.setResponsive=function(j,V){var nt=this,w=this.options.responsive,l=this.currentResponsive,it=[];!V&&w&&w.rules&&w.rules.forEach(function(N){typeof N._id>"u"&&(N._id=st()),nt.matchResponsiveRule(N,it)},this),(V=Rt.apply(void 0,it.map(function(N){return jt((w||{}).rules||[],function(G){return G._id===N})}).map(function(N){return N&&N.chartOptions}))).isResponsiveOptions=!0,(it=it.toString()||void 0)!==(l&&l.ruleIds)&&(l&&this.update(l.undoOptions,j,!0),it?((l=this.currentOptions(V)).isResponsiveOptions=!0,this.currentResponsive={ruleIds:it,mergedOptions:V,undoOptions:l},this.update(V,j,!0)):this.currentResponsive=void 0)},T}()}(R||(R={})),R}),te(Ct,"masters/highcharts.src.js",[Ct["Core/Globals.js"],Ct["Core/Utilities.js"],Ct["Core/Defaults.js"],Ct["Core/Animation/Fx.js"],Ct["Core/Animation/AnimationUtilities.js"],Ct["Core/Renderer/HTML/AST.js"],Ct["Core/FormatUtilities.js"],Ct["Core/Renderer/RendererUtilities.js"],Ct["Core/Renderer/SVG/SVGElement.js"],Ct["Core/Renderer/SVG/SVGRenderer.js"],Ct["Core/Renderer/HTML/HTMLElement.js"],Ct["Core/Renderer/HTML/HTMLRenderer.js"],Ct["Core/Axis/Axis.js"],Ct["Core/Axis/DateTimeAxis.js"],Ct["Core/Axis/LogarithmicAxis.js"],Ct["Core/Axis/PlotLineOrBand/PlotLineOrBand.js"],Ct["Core/Axis/Tick.js"],Ct["Core/Tooltip.js"],Ct["Core/Series/Point.js"],Ct["Core/Pointer.js"],Ct["Core/MSPointer.js"],Ct["Core/Legend/Legend.js"],Ct["Core/Chart/Chart.js"],Ct["Core/Axis/Stacking/StackingAxis.js"],Ct["Core/Axis/Stacking/StackItem.js"],Ct["Core/Series/Series.js"],Ct["Core/Series/SeriesRegistry.js"],Ct["Series/Column/ColumnSeries.js"],Ct["Series/Column/ColumnDataLabel.js"],Ct["Series/Pie/PieSeries.js"],Ct["Series/Pie/PieDataLabel.js"],Ct["Core/Series/DataLabel.js"],Ct["Core/Responsive.js"],Ct["Core/Color/Color.js"],Ct["Core/Time.js"]],function(wt,xt,jt,zt,Ut,Rt,It,K,et,st,R,I,A,x,T,j,V,nt,w,l,it,N,G,v,M,b,k,_,y,O,B,H,at,ft,rt){return wt.animate=Ut.animate,wt.animObject=Ut.animObject,wt.getDeferredAnimation=Ut.getDeferredAnimation,wt.setAnimation=Ut.setAnimation,wt.stop=Ut.stop,wt.timers=zt.timers,wt.AST=Rt,wt.Axis=A,wt.Chart=G,wt.chart=G.chart,wt.Fx=zt,wt.Legend=N,wt.PlotLineOrBand=j,wt.Point=w,wt.Pointer=it.isRequired()?it:l,wt.Series=b,wt.StackItem=M,wt.SVGElement=et,wt.SVGRenderer=st,wt.Tick=V,wt.Time=rt,wt.Tooltip=nt,wt.Color=ft,wt.color=ft.parse,I.compose(st),R.compose(et),wt.defaultOptions=jt.defaultOptions,wt.getOptions=jt.getOptions,wt.time=jt.defaultTime,wt.setOptions=jt.setOptions,wt.dateFormat=It.dateFormat,wt.format=It.format,wt.numberFormat=It.numberFormat,wt.addEvent=xt.addEvent,wt.arrayMax=xt.arrayMax,wt.arrayMin=xt.arrayMin,wt.attr=xt.attr,wt.clearTimeout=xt.clearTimeout,wt.correctFloat=xt.correctFloat,wt.createElement=xt.createElement,wt.css=xt.css,wt.defined=xt.defined,wt.destroyObjectProperties=xt.destroyObjectProperties,wt.discardElement=xt.discardElement,wt.distribute=K.distribute,wt.erase=xt.erase,wt.error=xt.error,wt.extend=xt.extend,wt.extendClass=xt.extendClass,wt.find=xt.find,wt.fireEvent=xt.fireEvent,wt.getMagnitude=xt.getMagnitude,wt.getStyle=xt.getStyle,wt.inArray=xt.inArray,wt.isArray=xt.isArray,wt.isClass=xt.isClass,wt.isDOMElement=xt.isDOMElement,wt.isFunction=xt.isFunction,wt.isNumber=xt.isNumber,wt.isObject=xt.isObject,wt.isString=xt.isString,wt.keys=xt.keys,wt.merge=xt.merge,wt.normalizeTickInterval=xt.normalizeTickInterval,wt.objectEach=xt.objectEach,wt.offset=xt.offset,wt.pad=xt.pad,wt.pick=xt.pick,wt.pInt=xt.pInt,wt.relativeLength=xt.relativeLength,wt.removeEvent=xt.removeEvent,wt.seriesType=k.seriesType,wt.splat=xt.splat,wt.stableSort=xt.stableSort,wt.syncTimeout=xt.syncTimeout,wt.timeUnits=xt.timeUnits,wt.uniqueKey=xt.uniqueKey,wt.useSerialIds=xt.useSerialIds,wt.wrap=xt.wrap,y.compose(_),H.compose(b),x.compose(A),T.compose(A),B.compose(O),j.compose(A),at.compose(G),v.compose(A,G,b),wt}),Ct["masters/highcharts.src.js"]._modules=Ct,Ct["masters/highcharts.src.js"]}),function(vt){"object"==typeof module&&module.exports?(vt.default=vt,module.exports=vt):"function"==typeof define&&define.amd?define("highcharts/modules/heatmap",["highcharts"],function(te){return vt(te),vt.Highcharts=te,vt}):vt(typeof Highcharts<"u"?Highcharts:void 0)}(function(vt){function te(Ct,wt,xt,jt){Ct.hasOwnProperty(wt)||(Ct[wt]=jt.apply(null,xt),"function"==typeof CustomEvent&&window.dispatchEvent(new CustomEvent("HighchartsModuleLoaded",{detail:{path:wt,module:Ct[wt]}})))}te(vt=vt?vt._modules:{},"Core/Axis/Color/ColorAxisComposition.js",[vt["Core/Color/Color.js"],vt["Core/Utilities.js"]],function(Ct,wt){var K,xt=Ct.parse,jt=wt.addEvent,zt=wt.extend,Ut=wt.merge,Rt=wt.pick,It=wt.splat;return function(et){function st(){var G=this,v=this.options;this.colorAxis=[],v.colorAxis&&(v.colorAxis=It(v.colorAxis),v.colorAxis.forEach(function(M,b){M.index=b,new N(G,M)}))}function R(G){var k,_,v=this,M=function(y){-1!==(y=G.allItems.indexOf(y))&&(v.destroyItem(G.allItems[y]),G.allItems.splice(y,1))},b=[];for((this.chart.colorAxis||[]).forEach(function(y){(k=y.options)&&k.showInLegend&&(k.dataClasses&&k.visible?b=b.concat(y.getDataClassLegendSymbols()):k.visible&&b.push(y),y.series.forEach(function(O){(!O.options.showInLegend||k.dataClasses)&&("point"===O.options.legendType?O.points.forEach(function(B){M(B)}):M(O))}))}),_=b.length;_--;)G.allItems.unshift(b[_])}function I(G){G.visible&&G.item.legendColor&&G.item.legendItem.symbol.attr({fill:G.item.legendColor})}function A(){var G=this.chart.colorAxis;G&&G.forEach(function(v,M,b){v.update({},b)})}function x(){(this.chart.colorAxis&&this.chart.colorAxis.length||this.colorAttribs)&&this.translateColors()}function T(){var G=this.axisTypes;G?-1===G.indexOf("colorAxis")&&G.push("colorAxis"):this.axisTypes=["colorAxis"]}function j(G){var v=this,M=G?"show":"hide";v.visible=v.options.visible=!!G,["graphic","dataLabel"].forEach(function(b){v[b]&&v[b][M]()}),this.series.buildKDTree()}function V(){var G=this,v=this.options.nullColor,M=this.colorAxis,b=this.colorKey;(this.data.length?this.data:this.points).forEach(function(k){var _=k.getNestedProperty(b);(_=k.options.color||(k.isNull||null===k.value?v:M&&typeof _<"u"?M.toColor(_,k):k.color||G.color))&&k.color!==_&&(k.color=_,"point"===G.options.legendType&&k.legendItem&&k.legendItem.label&&G.chart.legend.colorizeItem(k,k.visible))})}function w(){this.elem.attr("fill",xt(this.start).tweenTo(xt(this.end),this.pos),void 0,!0)}function l(){this.elem.attr("stroke",xt(this.start).tweenTo(xt(this.end),this.pos),void 0,!0)}var N,it=[];et.compose=function(G,v,M,b,k){N||(N=G),-1===it.indexOf(v)&&(it.push(v),(G=v.prototype).collectionsWithUpdate.push("colorAxis"),G.collectionsWithInit.colorAxis=[G.addColorAxis],jt(v,"afterGetAxes",st),function nt(G){var v=G.prototype.createAxis;G.prototype.createAxis=function(M,b){if("colorAxis"!==M)return v.apply(this,arguments);var k=new N(this,Ut(b.axis,{index:this[M].length,isX:!1}));return this.isDirtyLegend=!0,this.axes.forEach(function(_){_.series=[]}),this.series.forEach(function(_){_.bindAxes(),_.isDirtyData=!0}),Rt(b.redraw,!0)&&this.redraw(b.animation),k}}(v)),-1===it.indexOf(M)&&(it.push(M),(v=M.prototype).fillSetter=w,v.strokeSetter=l),-1===it.indexOf(b)&&(it.push(b),jt(b,"afterGetAllItems",R),jt(b,"afterColorizeItem",I),jt(b,"afterUpdate",A)),-1===it.indexOf(k)&&(it.push(k),zt(k.prototype,{optionalAxis:"colorAxis",translateColors:V}),zt(k.prototype.pointClass.prototype,{setVisible:j}),jt(k,"afterTranslate",x,{order:1}),jt(k,"bindAxes",T))},et.pointSetVisible=j}(K||(K={})),K}),te(vt,"Core/Axis/Color/ColorAxisDefaults.js",[],function(){return{lineWidth:0,minPadding:0,maxPadding:0,gridLineWidth:1,tickPixelInterval:72,startOnTick:!0,endOnTick:!0,offset:0,marker:{animation:{duration:50},width:.01,color:"#999999"},labels:{overflow:"justify",rotation:0},minColor:"#e6ebf5",maxColor:"#003399",tickLength:5,showInLegend:!0}}),te(vt,"Core/Axis/Color/ColorAxis.js",[vt["Core/Axis/Axis.js"],vt["Core/Color/Color.js"],vt["Core/Axis/Color/ColorAxisComposition.js"],vt["Core/Axis/Color/ColorAxisDefaults.js"],vt["Core/Globals.js"],vt["Core/Legend/LegendSymbol.js"],vt["Core/Series/SeriesRegistry.js"],vt["Core/Utilities.js"]],function(Ct,wt,xt,jt,zt,Ut,Rt,It){var T,K=this&&this.__extends||(T=function(j,V){return(T=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(nt,w){nt.__proto__=w}||function(nt,w){for(var l in w)w.hasOwnProperty(l)&&(nt[l]=w[l])})(j,V)},function(j,V){function nt(){this.constructor=j}T(j,V),j.prototype=null===V?Object.create(V):(nt.prototype=V.prototype,new nt)}),et=wt.parse,st=Rt.series,R=It.extend,I=It.isNumber,A=It.merge,x=It.pick;return wt=function(T){function j(V,nt){var w=T.call(this,V,nt)||this;return w.beforePadding=!1,w.chart=void 0,w.coll="colorAxis",w.dataClasses=void 0,w.name="",w.options=void 0,w.stops=void 0,w.visible=!0,w.init(V,nt),w}return K(j,T),j.compose=function(V,nt,w,l){xt.compose(j,V,nt,w,l)},j.prototype.init=function(V,nt){var w=V.options.legend||{},l=nt.layout?"vertical"!==nt.layout:"vertical"!==w.layout,it=nt.visible;w=A(j.defaultColorAxisOptions,nt,{showEmpty:!1,title:null,visible:w.enabled&&!1!==it}),this.coll="colorAxis",this.side=nt.side||l?2:1,this.reversed=nt.reversed||!l,this.opposite=!l,T.prototype.init.call(this,V,w),this.userOptions.visible=it,nt.dataClasses&&this.initDataClasses(nt),this.initStops(),this.horiz=l,this.zoomEnabled=!1},j.prototype.initDataClasses=function(V){var N,nt=this.chart,w=this.legendItem=this.legendItem||{},l=V.dataClasses.length,it=this.options,G=0,v=nt.options.chart.colorCount;this.dataClasses=N=[],w.labels=[],(V.dataClasses||[]).forEach(function(M,b){M=A(M),N.push(M),(nt.styledMode||!M.color)&&("category"===it.dataClassColor?(nt.styledMode||(v=(b=nt.options.colors).length,M.color=b[G]),M.colorIndex=G,++G===v&&(G=0)):M.color=et(it.minColor).tweenTo(et(it.maxColor),2>l?.5:b/(l-1)))})},j.prototype.hasData=function(){return!!(this.tickPositions||[]).length},j.prototype.setTickPositions=function(){if(!this.dataClasses)return T.prototype.setTickPositions.call(this)},j.prototype.initStops=function(){this.stops=this.options.stops||[[0,this.options.minColor],[1,this.options.maxColor]],this.stops.forEach(function(V){V.color=et(V[1])})},j.prototype.setOptions=function(V){T.prototype.setOptions.call(this,V),this.options.crosshair=this.options.marker},j.prototype.setAxisSize=function(){var l,it,V=this.legendItem&&this.legendItem.symbol,nt=this.chart,w=nt.options.legend||{};V?(this.left=w=V.attr("x"),this.top=l=V.attr("y"),this.width=it=V.attr("width"),this.height=V=V.attr("height"),this.right=nt.chartWidth-w-it,this.bottom=nt.chartHeight-l-V,this.len=this.horiz?it:V,this.pos=this.horiz?w:l):this.len=(this.horiz?w.symbolWidth:w.symbolHeight)||j.defaultLegendLength},j.prototype.normalizedValue=function(V){return this.logarithmic&&(V=this.logarithmic.log2lin(V)),1-(this.max-V)/(this.max-this.min||1)},j.prototype.toColor=function(V,nt){var it,w=this.dataClasses,l=this.stops;if(w)for(it=w.length;it--;){var N=w[it],G=N.from;if(l=N.to,(typeof G>"u"||V>=G)&&(typeof l>"u"||V<=l)){var v=N.color;nt&&(nt.dataClass=it,nt.colorIndex=N.colorIndex);break}}else{for(V=this.normalizedValue(V),it=l.length;it--&&!(V>l[it][0]););v=(G=l[it]||l[it+1]).color.tweenTo((l=l[it+1]||G).color,V=1-(l[0]-V)/(l[0]-G[0]||1))}return v},j.prototype.getOffset=function(){var V=this.legendItem&&this.legendItem.group,nt=this.chart.axisOffset[this.side];if(V){this.axisParent=V,T.prototype.getOffset.call(this);var w=this.chart.legend;w.allItems.forEach(function(l){l instanceof j&&l.drawLegendSymbol(w,l)}),w.render(),this.chart.getMargins(!0),this.added||(this.added=!0,this.labelLeft=0,this.labelRight=this.width),this.chart.axisOffset[this.side]=nt}},j.prototype.setLegendColor=function(){var V=this.reversed,nt=V?1:0;V=V?0:1,this.legendColor={linearGradient:{x1:(nt=this.horiz?[nt,0,V,0]:[0,V,0,nt])[0],y1:nt[1],x2:nt[2],y2:nt[3]},stops:this.stops}},j.prototype.drawLegendSymbol=function(V,nt){nt=nt.legendItem||{};var w=V.padding,l=V.options,it=x(l.itemDistance,10),N=this.horiz,G=x(l.symbolWidth,N?j.defaultLegendLength:12),v=x(l.symbolHeight,N?12:j.defaultLegendLength);l=x(l.labelPadding,N?16:30),this.setLegendColor(),nt.symbol||(nt.symbol=this.chart.renderer.rect(0,V.baseline-11,G,v).attr({zIndex:1}).add(nt.group)),nt.labelWidth=G+w+(N?it:this.options.labels.x+this.maxLabelLength),nt.labelHeight=v+w+(N?l:0)},j.prototype.setState=function(V){this.series.forEach(function(nt){nt.setState(V)})},j.prototype.setVisible=function(){},j.prototype.getSeriesExtremes=function(){var w,V=this.series,nt=V.length;for(this.dataMin=1/0,this.dataMax=-1/0;nt--;){var l=V[nt],it=l.colorKey=x(l.options.colorKey,l.colorKey,l.pointValKey,l.zoneAxis,"y"),N=l.pointArrayMap,G=l[it+"Min"]&&l[it+"Max"];if(l[it+"Data"])var v=l[it+"Data"];else if(N){v=[],N=N.indexOf(it);var M=l.yData;if(0<=N&&M)for(w=0;w<M.length;w++)v.push(x(M[w][N],M[w]))}else v=l.yData;G?(l.minColorValue=l[it+"Min"],l.maxColorValue=l[it+"Max"]):(v=st.prototype.getExtremes.call(l,v),l.minColorValue=v.dataMin,l.maxColorValue=v.dataMax),typeof l.minColorValue<"u"&&(this.dataMin=Math.min(this.dataMin,l.minColorValue),this.dataMax=Math.max(this.dataMax,l.maxColorValue)),G||st.prototype.applyExtremes.call(l)}},j.prototype.drawCrosshair=function(V,nt){var w=this.legendItem||{},l=nt&&nt.plotX,it=nt&&nt.plotY,N=this.pos,G=this.len;if(nt){var v=this.toPixels(nt.getNestedProperty(nt.series.colorKey));v<N?v=N-2:v>N+G&&(v=N+G+2),nt.plotX=v,nt.plotY=this.len-v,T.prototype.drawCrosshair.call(this,V,nt),nt.plotX=l,nt.plotY=it,this.cross&&!this.cross.addedToColorAxis&&w.group&&(this.cross.addClass("highcharts-coloraxis-marker").add(w.group),this.cross.addedToColorAxis=!0,this.chart.styledMode||"object"!=typeof this.crosshair||this.cross.attr({fill:this.crosshair.color}))}},j.prototype.getPlotLinePath=function(V){var nt=this.left,w=V.translatedValue,l=this.top;return I(w)?this.horiz?[["M",w-4,l-6],["L",w+4,l-6],["L",w,l],["Z"]]:[["M",nt,w],["L",nt-6,w+6],["L",nt-6,w-6],["Z"]]:T.prototype.getPlotLinePath.call(this,V)},j.prototype.update=function(V,nt){var w=this.chart.legend;this.series.forEach(function(l){l.isDirtyData=!0}),(V.dataClasses&&w.allItems||this.dataClasses)&&this.destroyItems(),T.prototype.update.call(this,V,nt),this.legendItem&&this.legendItem.label&&(this.setLegendColor(),w.colorizeItem(this,!0))},j.prototype.destroyItems=function(){var V=this.chart,nt=this.legendItem||{};if(nt.label)V.legend.destroyItem(this);else if(nt.labels){var w=0;for(nt=nt.labels;w<nt.length;w++)V.legend.destroyItem(nt[w])}V.isDirtyLegend=!0},j.prototype.destroy=function(){this.chart.isDirtyLegend=!0,this.destroyItems(),T.prototype.destroy.apply(this,[].slice.call(arguments))},j.prototype.remove=function(V){this.destroyItems(),T.prototype.remove.call(this,V)},j.prototype.getDataClassLegendSymbols=function(){var v,V=this,nt=V.chart,w=V.legendItem&&V.legendItem.labels||[],l=nt.options.legend,it=x(l.valueDecimals,-1),N=x(l.valueSuffix,""),G=function(M){return V.series.reduce(function(b,k){return b.push.apply(b,k.points.filter(function(_){return _.dataClass===M})),b},[])};return w.length||V.dataClasses.forEach(function(M,b){var k=M.from,_=M.to,y=nt.numberFormatter,O=!0;v="",typeof k>"u"?v="< ":typeof _>"u"&&(v="> "),typeof k<"u"&&(v+=y(k,it)+N),typeof k<"u"&&typeof _<"u"&&(v+=" - "),typeof _<"u"&&(v+=y(_,it)+N),w.push(R({chart:nt,name:v,options:{},drawLegendSymbol:Ut.drawRectangle,visible:!0,isDataClass:!0,setState:function(B){for(var H=0,at=G(b);H<at.length;H++)at[H].setState(B)},setVisible:function(){this.visible=O=V.visible=!O;for(var B=0,H=G(b);B<H.length;B++)H[B].setVisible(O);nt.legend.colorizeItem(this,O)}},M))}),w},j.defaultColorAxisOptions=jt,j.defaultLegendLength=200,j.keepProps=["legendItem"],j}(Ct),Array.prototype.push.apply(Ct.keepProps,wt.keepProps),wt}),te(vt,"Series/ColorMapComposition.js",[vt["Core/Series/SeriesRegistry.js"],vt["Core/Utilities.js"]],function(Ct,wt){var Ut,xt=Ct.seriesTypes.column.prototype,jt=wt.addEvent,zt=wt.defined;return function(Rt){function It(et){this.moveToTopOnHover&&this.graphic&&this.graphic.attr({zIndex:et&&"hover"===et.state?1:0})}var K=[];Rt.pointMembers={dataLabelOnNull:!0,moveToTopOnHover:!0,isValid:function(){return null!==this.value&&this.value!==1/0&&this.value!==-1/0&&(void 0===this.value||!isNaN(this.value))}},Rt.seriesMembers={colorKey:"value",axisTypes:["xAxis","yAxis","colorAxis"],parallelArrays:["x","y","value"],pointArrayMap:["value"],trackerGroups:["group","markerGroup","dataLabelsGroup"],colorAttribs:function(et){var st={};return!zt(et.color)||et.state&&"normal"!==et.state||(st[this.colorProp||"fill"]=et.color),st},pointAttribs:xt.pointAttribs},Rt.compose=function(et){var st=et.prototype.pointClass;return-1===K.indexOf(st)&&(K.push(st),jt(st,"afterSetState",It)),et}}(Ut||(Ut={})),Ut}),te(vt,"Series/Heatmap/HeatmapPoint.js",[vt["Core/Series/SeriesRegistry.js"],vt["Core/Utilities.js"]],function(Ct,wt){var It,xt=this&&this.__extends||(It=function(K,et){return(It=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(st,R){st.__proto__=R}||function(st,R){for(var I in R)R.hasOwnProperty(I)&&(st[I]=R[I])})(K,et)},function(K,et){function st(){this.constructor=K}It(K,et),K.prototype=null===et?Object.create(et):(st.prototype=et.prototype,new st)}),jt=wt.clamp,zt=wt.defined,Ut=wt.extend,Rt=wt.pick;return Ct=function(It){function K(){var et=null!==It&&It.apply(this,arguments)||this;return et.options=void 0,et.series=void 0,et.value=void 0,et.x=void 0,et.y=void 0,et}return xt(K,It),K.prototype.applyOptions=function(et,st){return(this.isNull||null===this.value)&&delete this.color,It.prototype.applyOptions.call(this,et,st),this.formatPrefix=this.isNull||null===this.value?"null":"point",this},K.prototype.getCellAttributes=function(){var et=this.series,st=et.options,R=(st.colsize||1)/2,I=(st.rowsize||1)/2,A=et.xAxis,x=et.yAxis,T=this.options.marker||et.options.marker;et=et.pointPlacementToXValue();var j=Rt(this.pointPadding,st.pointPadding,0),V={x1:jt(Math.round(A.len-A.translate(this.x-R,!1,!0,!1,!0,-et)),-A.len,2*A.len),x2:jt(Math.round(A.len-A.translate(this.x+R,!1,!0,!1,!0,-et)),-A.len,2*A.len),y1:jt(Math.round(x.translate(this.y-I,!1,!0,!1,!0)),-x.len,2*x.len),y2:jt(Math.round(x.translate(this.y+I,!1,!0,!1,!0)),-x.len,2*x.len)};return[["width","x"],["height","y"]].forEach(function(nt){var w=nt[0],l=(nt=nt[1])+"1",it=nt+"2",N=Math.abs(V[l]-V[it]),G=T&&T.lineWidth||0,v=Math.abs(V[l]+V[it])/2;zt(w=T&&T[w])&&w<N&&(V[l]=v-(w=w/2+G/2),V[it]=v+w),j&&("y"===nt&&(l=it,it=nt+"1"),V[l]+=j,V[it]-=j)}),V},K.prototype.haloPath=function(et){if(!et)return[];var st=this.shapeArgs||{},R=st.x,I=st.y,A=st.width;return[["M",(R=void 0===R?0:R)-et,(I=void 0===I?0:I)-et],["L",R-et,I+(st=void 0===(st=st.height)?0:st)+et],["L",R+(A=void 0===A?0:A)+et,I+st+et],["L",R+A+et,I-et],["Z"]]},K.prototype.isValid=function(){return this.value!==1/0&&this.value!==-1/0},K}(Ct.seriesTypes.scatter.prototype.pointClass),Ut(Ct.prototype,{dataLabelOnNull:!0,moveToTopOnHover:!0,ttBelow:!1}),Ct}),te(vt,"Series/Heatmap/HeatmapSeries.js",[vt["Core/Color/Color.js"],vt["Series/ColorMapComposition.js"],vt["Series/Heatmap/HeatmapPoint.js"],vt["Core/Legend/LegendSymbol.js"],vt["Core/Series/SeriesRegistry.js"],vt["Core/Renderer/SVG/SVGRenderer.js"],vt["Core/Utilities.js"]],function(Ct,wt,xt,jt,zt,Ut,Rt){var V,It=this&&this.__extends||(V=function(nt,w){return(V=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,it){l.__proto__=it}||function(l,it){for(var N in it)it.hasOwnProperty(N)&&(l[N]=it[N])})(nt,w)},function(nt,w){function l(){this.constructor=nt}V(nt,w),nt.prototype=null===w?Object.create(w):(l.prototype=w.prototype,new l)}),K=zt.series,et=zt.seriesTypes,st=et.column,R=et.scatter,I=Ut.prototype.symbols;Ut=Rt.extend;var A=Rt.fireEvent,x=Rt.isNumber,T=Rt.merge,j=Rt.pick;return Rt=function(V){function nt(){var w=null!==V&&V.apply(this,arguments)||this;return w.colorAxis=void 0,w.data=void 0,w.options=void 0,w.points=void 0,w.valueMax=NaN,w.valueMin=NaN,w}return It(nt,V),nt.prototype.drawPoints=function(){var w=this;((this.options.marker||{}).enabled||this._hasPointMarkers)&&(K.prototype.drawPoints.call(this),this.points.forEach(function(l){l.graphic&&(l.graphic[w.chart.styledMode?"css":"animate"](w.colorAttribs(l)),null===l.value&&l.graphic.addClass("highcharts-null-point"))}))},nt.prototype.getExtremes=function(){var w=K.prototype.getExtremes.call(this,this.valueData),l=w.dataMin;return w=w.dataMax,x(l)&&(this.valueMin=l),x(w)&&(this.valueMax=w),K.prototype.getExtremes.call(this)},nt.prototype.getValidPoints=function(w,l){return K.prototype.getValidPoints.call(this,w,l,!0)},nt.prototype.hasData=function(){return!!this.processedXData.length},nt.prototype.init=function(){V.prototype.init.apply(this,arguments);var w=this.options;w.pointRange=j(w.pointRange,w.colsize||1),this.yAxis.axisPointRange=w.rowsize||1,I.ellipse=I.circle,w.marker&&(w.marker.r=w.borderRadius)},nt.prototype.markerAttribs=function(w,l){var it=w.shapeArgs||{};if(w.hasImage)return{x:w.plotX,y:w.plotY};if(l&&"normal"!==l){var N=w.options.marker||{};return w=(w=this.options.marker||{}).states&&w.states[l]||{},{x:(it.x||0)+((it.width||0)-(l=((N=N.states&&N.states[l]||{}).width||w.width||it.width||0)+(N.widthPlus||w.widthPlus||0)))/2,y:(it.y||0)+((it.height||0)-(w=(N.height||w.height||it.height||0)+(N.heightPlus||w.heightPlus||0)))/2,width:l,height:w}}return it},nt.prototype.pointAttribs=function(w,l){var it=K.prototype.pointAttribs.call(this,w,l),N=this.options||{},G=this.chart.options.plotOptions||{},v=G.series||{},M=G.heatmap||{};return G=w&&w.options.borderColor||N.borderColor||M.borderColor||v.borderColor,v=w&&w.options.borderWidth||N.borderWidth||M.borderWidth||v.borderWidth||it["stroke-width"],it.stroke=w&&w.marker&&w.marker.lineColor||N.marker&&N.marker.lineColor||G||this.color,it["stroke-width"]=v,l&&"normal"!==l&&(w=T(N.states&&N.states[l],N.marker&&N.marker.states&&N.marker.states[l],w&&w.options.states&&w.options.states[l]||{}),it.fill=w.color||Ct.parse(it.fill).brighten(w.brightness||0).get(),it.stroke=w.lineColor||it.stroke),it},nt.prototype.translate=function(){var w=this.options,l=w.marker&&w.marker.symbol||"rect",it=I[l]?l:"rect",N=-1!==["circle","square"].indexOf(it);this.generatePoints(),this.points.forEach(function(G){var v=G.getCellAttributes(),M=Math.min(v.x1,v.x2),b=Math.min(v.y1,v.y2),k=Math.max(Math.abs(v.x2-v.x1),0),_=Math.max(Math.abs(v.y2-v.y1),0);G.hasImage=0===(G.marker&&G.marker.symbol||l||"").indexOf("url"),N&&(b=Math.abs(k-_),M=Math.min(v.x1,v.x2)+(k<_?0:b/2),b=Math.min(v.y1,v.y2)+(k<_?b/2:0),k=_=Math.min(k,_)),G.hasImage&&(G.marker={width:k,height:_}),G.plotX=G.clientX=(v.x1+v.x2)/2,G.plotY=(v.y1+v.y2)/2,G.shapeType="path",G.shapeArgs=T(!0,{x:M,y:b,width:k,height:_},{d:I[it](M,b,k,_,{r:w.borderRadius})})}),A(this,"afterTranslate")},nt.defaultOptions=T(R.defaultOptions,{animation:!1,borderRadius:0,borderWidth:0,nullColor:"#f7f7f7",dataLabels:{formatter:function(){var w=this.series.chart.numberFormatter,l=this.point.value;return x(l)?w(l,-1):""},inside:!0,verticalAlign:"middle",crop:!1,overflow:"allow",padding:0},marker:{symbol:"rect",radius:0,lineColor:void 0,states:{hover:{lineWidthPlus:0},select:{}}},clip:!0,pointRange:null,tooltip:{pointFormat:"{point.x}, {point.y}: {point.value}<br/>"},states:{hover:{halo:!1,brightness:.2}}}),nt}(R),Ut(Rt.prototype,{axisTypes:wt.seriesMembers.axisTypes,colorKey:wt.seriesMembers.colorKey,directTouch:!0,getExtremesFromAll:!0,parallelArrays:wt.seriesMembers.parallelArrays,pointArrayMap:["y","value"],pointClass:xt,specialGroup:"group",trackerGroups:wt.seriesMembers.trackerGroups,alignDataLabel:st.prototype.alignDataLabel,colorAttribs:wt.seriesMembers.colorAttribs,drawLegendSymbol:jt.drawRectangle,getSymbol:K.prototype.getSymbol}),wt.compose(Rt),zt.registerSeriesType("heatmap",Rt),Rt}),te(vt,"masters/modules/heatmap.src.js",[vt["Core/Globals.js"],vt["Core/Axis/Color/ColorAxis.js"]],function(Ct,wt){Ct.ColorAxis=wt,wt.compose(Ct.Chart,Ct.Fx,Ct.Legend,Ct.Series)})}),function(vt){"object"==typeof module&&module.exports?(vt.default=vt,module.exports=vt):"function"==typeof define&&define.amd?define("highcharts/modules/treemap",["highcharts"],function(te){return vt(te),vt.Highcharts=te,vt}):vt(typeof Highcharts<"u"?Highcharts:void 0)}(function(vt){function te(Ct,wt,xt,jt){Ct.hasOwnProperty(wt)||(Ct[wt]=jt.apply(null,xt),"function"==typeof CustomEvent&&window.dispatchEvent(new CustomEvent("HighchartsModuleLoaded",{detail:{path:wt,module:Ct[wt]}})))}te(vt=vt?vt._modules:{},"Series/ColorMapComposition.js",[vt["Core/Series/SeriesRegistry.js"],vt["Core/Utilities.js"]],function(Ct,wt){var Ut,xt=Ct.seriesTypes.column.prototype,jt=wt.addEvent,zt=wt.defined;return function(Rt){function It(et){this.moveToTopOnHover&&this.graphic&&this.graphic.attr({zIndex:et&&"hover"===et.state?1:0})}var K=[];Rt.pointMembers={dataLabelOnNull:!0,moveToTopOnHover:!0,isValid:function(){return null!==this.value&&this.value!==1/0&&this.value!==-1/0&&(void 0===this.value||!isNaN(this.value))}},Rt.seriesMembers={colorKey:"value",axisTypes:["xAxis","yAxis","colorAxis"],parallelArrays:["x","y","value"],pointArrayMap:["value"],trackerGroups:["group","markerGroup","dataLabelsGroup"],colorAttribs:function(et){var st={};return!zt(et.color)||et.state&&"normal"!==et.state||(st[this.colorProp||"fill"]=et.color),st},pointAttribs:xt.pointAttribs},Rt.compose=function(et){var st=et.prototype.pointClass;return-1===K.indexOf(st)&&(K.push(st),jt(st,"afterSetState",It)),et}}(Ut||(Ut={})),Ut}),te(vt,"Series/Treemap/TreemapAlgorithmGroup.js",[],function(){return function(){function Ct(wt,xt,jt,zt){this.height=wt,this.width=xt,this.plot=zt,this.startDirection=this.direction=jt,this.lH=this.nH=this.lW=this.nW=this.total=0,this.elArr=[],this.lP={total:0,lH:0,nH:0,lW:0,nW:0,nR:0,lR:0,aspectRatio:function(Ut,Rt){return Math.max(Ut/Rt,Rt/Ut)}}}return Ct.prototype.addElement=function(wt){this.lP.total=this.elArr[this.elArr.length-1],this.total+=wt,0===this.direction?(this.lW=this.nW,this.lP.lH=this.lP.total/this.lW,this.lP.lR=this.lP.aspectRatio(this.lW,this.lP.lH),this.nW=this.total/this.height,this.lP.nH=this.lP.total/this.nW,this.lP.nR=this.lP.aspectRatio(this.nW,this.lP.nH)):(this.lH=this.nH,this.lP.lW=this.lP.total/this.lH,this.lP.lR=this.lP.aspectRatio(this.lP.lW,this.lH),this.nH=this.total/this.width,this.lP.nW=this.lP.total/this.nH,this.lP.nR=this.lP.aspectRatio(this.lP.nW,this.nH)),this.elArr.push(wt)},Ct.prototype.reset=function(){this.lW=this.nW=0,this.elArr=[],this.total=0},Ct}()}),te(vt,"Series/DrawPointUtilities.js",[vt["Core/Utilities.js"]],function(Ct){return{draw:function(wt,xt){var jt=xt.animatableAttribs,zt=xt.onComplete,Ut=xt.css,Rt=xt.renderer,It=wt.series&&wt.series.chart.hasRendered?void 0:wt.series&&wt.series.options.animation,K=wt.graphic;if(xt.attribs=xt.attribs||{},xt.attribs.class=wt.getClassName(),wt.shouldDraw())K||(wt.graphic=K="text"===xt.shapeType?Rt.text():Rt[xt.shapeType](xt.shapeArgs||{}),K.add(xt.group)),Ut&&K.css(Ut),K.attr(xt.attribs).animate(jt,!xt.isNew&&It,zt);else if(K){var et=function(){wt.graphic=K=K&&K.destroy(),"function"==typeof zt&&zt()};Object.keys(jt).length?K.animate(jt,void 0,function(){return et()}):et()}}}}),te(vt,"Series/Treemap/TreemapPoint.js",[vt["Series/DrawPointUtilities.js"],vt["Core/Series/SeriesRegistry.js"],vt["Core/Utilities.js"]],function(Ct,wt,xt){var et,jt=this&&this.__extends||(et=function(st,R){return(et=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(I,A){I.__proto__=A}||function(I,A){for(var x in A)A.hasOwnProperty(x)&&(I[x]=A[x])})(st,R)},function(st,R){function I(){this.constructor=st}et(st,R),st.prototype=null===R?Object.create(R):(I.prototype=R.prototype,new I)}),zt=wt.series.prototype.pointClass,Ut=wt.seriesTypes;wt=Ut.pie.prototype.pointClass;var Rt=xt.extend,It=xt.isNumber,K=xt.pick;return xt=function(et){function st(){var R=null!==et&&et.apply(this,arguments)||this;return R.name=void 0,R.node=void 0,R.options=void 0,R.series=void 0,R.shapeType="rect",R.value=void 0,R}return jt(st,et),st.prototype.draw=function(R){Ct.draw(this,R)},st.prototype.getClassName=function(){var R=zt.prototype.getClassName.call(this),I=this.series,A=I.options;return this.node.level<=I.nodeMap[I.rootNode].level?R+=" highcharts-above-level":this.node.isLeaf||K(A.interactByLeaf,!A.allowTraversingTree)?this.node.isLeaf||(R+=" highcharts-internal-node"):R+=" highcharts-internal-node-interactive",R},st.prototype.isValid=function(){return!(!this.id&&!It(this.value))},st.prototype.setState=function(R){zt.prototype.setState.call(this,R),this.graphic&&this.graphic.attr({zIndex:"hover"===R?1:0})},st.prototype.shouldDraw=function(){return It(this.plotY)&&null!==this.y},st}(Ut.scatter.prototype.pointClass),Rt(xt.prototype,{setVisible:wt.prototype.setVisible}),xt}),te(vt,"Series/Treemap/TreemapUtilities.js",[vt["Core/Utilities.js"]],function(Ct){var xt,jt,wt=Ct.objectEach;return(jt=xt||(xt={})).AXIS_MAX=100,jt.isBoolean=function(Ut){return"boolean"==typeof Ut},jt.eachObject=function(Ut,Rt,It){It=It||this,wt(Ut,function(K,et){Rt.call(It,K,et,Ut)})},jt.recursive=function zt(Ut,Rt,It){void 0===It&&(It=this),!1!==(Ut=Rt.call(It,Ut))&&zt(Ut,Rt,It)},xt}),te(vt,"Series/TreeUtilities.js",[vt["Core/Color/Color.js"],vt["Core/Utilities.js"]],function(Ct,wt){var jt=wt.extend,zt=wt.isArray,Ut=wt.isNumber,Rt=wt.isObject,It=wt.merge,K=wt.pick;return{getColor:function(et,st){var l,R=st.index,I=st.mapOptionsToLevel,A=st.parentColor,x=st.parentColorIndex,T=st.series,j=st.colors,V=st.siblings,nt=T.points,w=T.chart.options.chart;if(et){if(nt=nt[et.i],et=I[et.level]||{},I=nt&&et.colorByPoint)var it=nt.index%(j?j.length:w.colorCount),N=j&&j[it];T.chart.styledMode||(j=nt&&nt.options.color,w=et&&et.color,(l=A)&&(l=(l=et&&et.colorVariation)&&"brightness"===l.key&&R&&V?Ct.parse(A).brighten(R/V*l.to).get():A),l=K(j,w,N,l,T.color));var G=K(nt&&nt.options.colorIndex,et&&et.colorIndex,it,x,st.colorIndex)}return{color:l,colorIndex:G}},getLevelOptions:function(et){var st={};if(Rt(et)){var R=Ut(et.from)?et.from:1,I=et.levels,A={},x=Rt(et.defaults)?et.defaults:{};for(zt(I)&&(A=I.reduce(function(T,j){if(Rt(j)&&Ut(j.level)){var V=It({},j),nt=K(V.levelIsConstant,x.levelIsConstant);delete V.levelIsConstant,delete V.level,Rt(T[j=j.level+(nt?0:R-1)])?It(!0,T[j],V):T[j]=V}return T},{})),I=Ut(et.to)?et.to:1,et=0;et<=I;et++)st[et]=It({},x,Rt(A[et])?A[et]:{})}return st},setTreeValues:function xt(et,st){var R=st.before,I=st.idRoot,x=st.points[et.i],T=x&&x.options||{},j=[],V=0;return et.levelDynamic=et.level-(!1!==st.levelIsConstant?0:st.mapIdToNode[I].level),et.name=K(x&&x.name,""),et.visible=I===et.id||!0===st.visible,"function"==typeof R&&(et=R(et,st)),et.children.forEach(function(nt,w){var l=jt({},st);jt(l,{index:w,siblings:et.children.length,visible:et.visible}),nt=xt(nt,l),j.push(nt),nt.visible&&(V+=nt.val)}),R=K(T.value,V),et.visible=0<=R&&(0<V||et.visible),et.children=j,et.childrenTotal=V,et.isLeaf=et.visible&&!V,et.val=R,et},updateRootId:function(et){if(Rt(et)){var st=Rt(et.options)?et.options:{};st=K(et.rootNode,st.rootId,""),Rt(et.userOptions)&&(et.userOptions.rootId=st),et.rootNode=st}return st}}}),te(vt,"Extensions/Breadcrumbs.js",[vt["Core/Chart/Chart.js"],vt["Core/Defaults.js"],vt["Core/Globals.js"],vt["Core/Utilities.js"],vt["Core/FormatUtilities.js"]],function(Ct,wt,xt,jt,zt){var Ut=zt.format;zt=jt.addEvent;var Rt=jt.objectEach,K=jt.fireEvent,et=jt.merge,st=jt.pick,R=jt.defined,I=jt.isString;return(0,jt.extend)(wt.defaultOptions.lang,{mainBreadcrumb:"Main"}),wt=function(){function A(x,T){this.group=void 0,this.list=[],this.elementList={},this.isDirty=!0,this.level=0,this.options=void 0,T=et(x.options.drilldown&&x.options.drilldown.drillUpButton,A.defaultBreadcrumbsOptions,x.options.navigation&&x.options.navigation.breadcrumbs,T),this.chart=x,this.options=T||{}}return A.prototype.updateProperties=function(x){this.setList(x),this.setLevel(),this.isDirty=!0},A.prototype.setList=function(x){this.list=x},A.prototype.setLevel=function(){this.level=this.list.length&&this.list.length-1},A.prototype.getLevel=function(){return this.level},A.prototype.getButtonText=function(x){var T=this.chart,j=this.options,V=T.options.lang,nt=st(j.format,j.showFullPath?"{level.name}":"\u2190 {level.name}");return V=V&&st(V.drillUpText,V.mainBreadcrumb),x=j.formatter&&j.formatter(x)||Ut(nt,{level:x.levelOptions},T)||"",(I(x)&&!x.length||"\u2190 "===x)&&R(V)&&(x=j.showFullPath?V:"\u2190 "+V),x},A.prototype.redraw=function(){this.isDirty&&this.render(),this.group&&this.group.align(),this.isDirty=!1},A.prototype.render=function(){var T=this.options;!this.group&&T&&(this.group=this.chart.renderer.g("breadcrumbs-group").addClass("highcharts-no-tooltip highcharts-breadcrumbs").attr({zIndex:T.zIndex}).add()),T.showFullPath?this.renderFullPathButtons():this.renderSingleButton(),this.alignBreadcrumbsGroup()},A.prototype.renderFullPathButtons=function(){this.destroySingleButton(),this.resetElementListState(),this.updateListElements(),this.destroyListElements()},A.prototype.renderSingleButton=function(){var x=this.chart,T=this.list,j=this.options.buttonSpacing;this.destroyListElements();var V=this.group?this.group.getBBox().width:j;T=T[T.length-2],!x.drillUpButton&&0<this.level?x.drillUpButton=this.renderButton(T,V,j):x.drillUpButton&&(0<this.level?this.updateSingleButton():this.destroySingleButton())},A.prototype.alignBreadcrumbsGroup=function(x){if(this.group){var T=this.options,j=T.buttonTheme,V=T.position,nt="chart"===T.relativeTo||"spacingBox"===T.relativeTo?void 0:"scrollablePlotBox",w=this.group.getBBox();V.width=w.width+(T=2*(j.padding||0)+T.buttonSpacing),V.height=w.height+T,w=et(V),x&&(w.x+=x),this.options.rtl&&(w.x+=V.width),w.y=st(w.y,this.yOffset,0),this.group.align(w,!0,nt)}},A.prototype.renderButton=function(x,T,j){var V=this,nt=this.chart,w=V.options,l=et(w.buttonTheme);return T=nt.renderer.button(V.getButtonText(x),T,j,function(it){var G,N=w.events&&w.events.click;N&&(G=N.call(V,it,x)),!1!==G&&(it.newLevel=w.showFullPath?x.level:V.level-1,K(V,"up",it))},l).addClass("highcharts-breadcrumbs-button").add(V.group),nt.styledMode||T.attr(w.style),T},A.prototype.renderSeparator=function(x,T){var j=this.chart,V=this.options.separator;return x=j.renderer.label(V.text,x,T,void 0,void 0,void 0,!1).addClass("highcharts-breadcrumbs-separator").add(this.group),j.styledMode||x.css(V.style),x},A.prototype.update=function(x){et(!0,this.options,x),this.destroy(),this.isDirty=!0},A.prototype.updateSingleButton=function(){var x=this.chart;x.drillUpButton&&x.drillUpButton.attr({text:this.getButtonText(this.list[this.level-1])})},A.prototype.destroy=function(){this.destroySingleButton(),this.destroyListElements(!0),this.group&&this.group.destroy(),this.group=void 0},A.prototype.destroyListElements=function(x){var T=this.elementList;Rt(T,function(j,V){(x||!T[V].updated)&&((j=T[V]).button&&j.button.destroy(),j.separator&&j.separator.destroy(),delete j.button,delete j.separator,delete T[V])}),x&&(this.elementList={})},A.prototype.destroySingleButton=function(){this.chart.drillUpButton&&(this.chart.drillUpButton.destroy(),this.chart.drillUpButton=void 0)},A.prototype.resetElementListState=function(){Rt(this.elementList,function(x){x.updated=!1})},A.prototype.updateListElements=function(){var N,x=this,T=x.elementList,j=x.options.buttonSpacing,V=x.list,nt=x.options.rtl,w=nt?-1:1,l=function(G,v){return w*G.getBBox().width+w*v},it=x.group?l(x.group,j):j;V.forEach(function(G,v){if(v=v===V.length-1,T[G.level]){var M=(N=T[G.level]).button;if(N.separator||v)N.separator&&v&&(N.separator.destroy(),delete N.separator);else{if(N.separator=x.renderSeparator(it+=w*j,j),nt){var b=N.separator;b.translate(it-b.getBBox().width,j)}it+=l(N.separator,j)}T[G.level].updated=!0}else M=x.renderButton(G,it,j),nt&&M.translate(it-M.getBBox().width,j),it+=l(M,j),v||(b=x.renderSeparator(it,j),nt&&b.translate(it-b.getBBox().width,j),it+=l(b,j)),T[G.level]={button:M,separator:b,updated:!0};M&&M.setState(v?2:0)})},A.defaultBreadcrumbsOptions={buttonTheme:{fill:"none",height:18,padding:2,"stroke-width":0,zIndex:7,states:{select:{fill:"none"}},style:{color:"#335cad"}},buttonSpacing:5,floating:!1,format:void 0,relativeTo:"plotBox",rtl:!1,position:{align:"left",verticalAlign:"top",x:0,y:void 0},separator:{text:"/",style:{color:"#666666"}},showFullPath:!0,style:{},useHTML:!1,zIndex:7},A}(),xt.Breadcrumbs||(xt.Breadcrumbs=wt,zt(Ct,"getMargins",function(){var A=this.breadcrumbs;if(A&&!A.options.floating&&A.level){var x=A.options,T=x.buttonTheme;T=(T.height||0)+2*(T.padding||0)+x.buttonSpacing,"bottom"===(x=x.position.verticalAlign)?(this.marginBottom=(this.marginBottom||0)+T,A.yOffset=T):"middle"!==x?(this.plotTop+=T,A.yOffset=-T):A.yOffset=void 0}}),zt(Ct,"redraw",function(){this.breadcrumbs&&this.breadcrumbs.redraw()}),zt(Ct,"destroy",function(){this.breadcrumbs&&(this.breadcrumbs.destroy(),this.breadcrumbs=void 0)}),zt(Ct,"afterShowResetZoom",function(){if(this.breadcrumbs){var A=this.resetZoomButton&&this.resetZoomButton.getBBox(),x=this.breadcrumbs.options;A&&"right"===x.position.align&&"plotBox"===x.relativeTo&&this.breadcrumbs.alignBreadcrumbsGroup(-A.width-x.buttonSpacing)}}),zt(Ct,"selection",function(A){!0===A.resetSelection&&this.breadcrumbs&&this.breadcrumbs.alignBreadcrumbsGroup()})),wt}),te(vt,"Series/Treemap/TreemapComposition.js",[vt["Core/Series/SeriesRegistry.js"],vt["Series/Treemap/TreemapUtilities.js"],vt["Core/Utilities.js"]],function(Ct,wt,xt){var zt=xt.extend,Ut=!1;(0,xt.addEvent)(Ct.series,"afterBindAxes",function(){var Rt=this.xAxis,It=this.yAxis;if(Rt&&It)if(this.is("treemap")){var K={endOnTick:!1,gridLineWidth:0,lineWidth:0,min:0,minPadding:0,max:wt.AXIS_MAX,maxPadding:0,startOnTick:!1,title:void 0,tickPositions:[]};zt(It.options,K),zt(Rt.options,K),Ut=!0}else Ut&&(It.setOptions(It.userOptions),Rt.setOptions(Rt.userOptions),Ut=!1)})}),te(vt,"Series/Treemap/TreemapNode.js",[],function(){return function(){function Ct(){this.childrenTotal=0,this.visible=!1}return Ct.prototype.init=function(wt,xt,jt,zt,Ut,Rt,It){return this.id=wt,this.i=xt,this.children=jt,this.height=zt,this.level=Ut,this.series=Rt,this.parent=It,this},Ct}()}),te(vt,"Series/Treemap/TreemapSeries.js",[vt["Core/Color/Color.js"],vt["Series/ColorMapComposition.js"],vt["Core/Globals.js"],vt["Core/Legend/LegendSymbol.js"],vt["Core/Series/SeriesRegistry.js"],vt["Series/Treemap/TreemapAlgorithmGroup.js"],vt["Series/Treemap/TreemapPoint.js"],vt["Series/Treemap/TreemapUtilities.js"],vt["Series/TreeUtilities.js"],vt["Extensions/Breadcrumbs.js"],vt["Core/Utilities.js"],vt["Series/Treemap/TreemapNode.js"]],function(Ct,wt,xt,jt,zt,Ut,Rt,It,K,et,st,R){var at,I=this&&this.__extends||(at=function(ft,rt){return(at=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(z,q){z.__proto__=q}||function(z,q){for(var mt in q)q.hasOwnProperty(mt)&&(z[mt]=q[mt])})(ft,rt)},function(ft,rt){function z(){this.constructor=ft}at(ft,rt),ft.prototype=null===rt?Object.create(rt):(z.prototype=rt.prototype,new z)}),A=Ct.parse;Ct=xt.noop;var x=zt.series,T=(xt=zt.seriesTypes).column,j=xt.heatmap,V=xt.scatter,nt=K.getColor,w=K.getLevelOptions,l=K.updateRootId,it=st.addEvent,N=st.correctFloat,G=st.defined,v=st.error,M=st.extend,b=st.fireEvent,k=st.isArray,_=st.isObject,y=st.isString,O=st.merge,B=st.pick,H=st.stableSort;return K=function(at){function ft(){var rt=null!==at&&at.apply(this,arguments)||this;return rt.axisRatio=void 0,rt.data=void 0,rt.mapOptionsToLevel=void 0,rt.nodeMap=void 0,rt.nodeList=void 0,rt.options=void 0,rt.points=void 0,rt.rootNode=void 0,rt.tree=void 0,rt.level=void 0,rt}return I(ft,at),ft.prototype.algorithmCalcPoints=function(rt,z,q,mt){var pt,dt,Y,lt,ht=q.lW,Lt=q.lH,At=q.plot,Wt=0,Ot=q.elArr.length-1;if(z)ht=q.nW,Lt=q.nH;else var se=q.elArr[q.elArr.length-1];q.elArr.forEach(function(_e){(z||Wt<Ot)&&(0===q.direction?(pt=At.x,dt=At.y,lt=_e/(Y=ht)):(pt=At.x,dt=At.y,Y=_e/(lt=Lt)),mt.push({x:pt,y:dt,width:Y,height:N(lt)}),0===q.direction?At.y+=lt:At.x+=Y),Wt+=1}),q.reset(),0===q.direction?q.width-=ht:q.height-=Lt,At.y=At.parent.y+(At.parent.height-q.height),At.x=At.parent.x+(At.parent.width-q.width),rt&&(q.direction=1-q.direction),z||q.addElement(se)},ft.prototype.algorithmFill=function(rt,z,q){var pt,At,Wt,Ot,se,mt=[],dt=z.direction,Y=z.x,lt=z.y,ht=z.width,Lt=z.height;return q.forEach(function(_e){pt=_e.val/z.val*z.height*z.width,At=Y,Wt=lt,0===dt?(ht-=Ot=pt/(se=Lt),Y+=Ot):(Lt-=se=pt/(Ot=ht),lt+=se),mt.push({x:At,y:Wt,width:Ot,height:se}),rt&&(dt=1-dt)}),mt},ft.prototype.algorithmLowAspectRatio=function(rt,z,q){var mt=[],pt=this,Y={x:z.x,y:z.y,parent:z},lt=0,ht=q.length-1,Lt=new Ut(z.height,z.width,z.direction,Y);return q.forEach(function(At){Lt.addElement(At.val/z.val*z.height*z.width),Lt.lP.nR>Lt.lP.lR&&pt.algorithmCalcPoints(rt,!1,Lt,mt,Y),lt===ht&&pt.algorithmCalcPoints(rt,!0,Lt,mt,Y),lt+=1}),mt},ft.prototype.alignDataLabel=function(rt,z,q){var mt=q.style;mt&&!G(mt.textOverflow)&&z.text&&z.getBBox().width>z.text.textWidth&&z.css({textOverflow:"ellipsis",width:mt.width+="px"}),T.prototype.alignDataLabel.apply(this,arguments),rt.dataLabel&&rt.dataLabel.attr({zIndex:(rt.node.zIndex||0)+1})},ft.prototype.calculateChildrenAreas=function(rt,z){var lt,q=this,mt=q.options,pt=q.mapOptionsToLevel[rt.level+1],dt=B(q[pt&&pt.layoutAlgorithm]&&pt.layoutAlgorithm,mt.layoutAlgorithm),Y=mt.alternateStartingDirection;rt=rt.children.filter(function(ht){return!ht.ignore}),pt&&pt.layoutStartingDirection&&(z.direction="vertical"===pt.layoutStartingDirection?0:1),lt=q[dt](z,rt),rt.forEach(function(ht,Lt){ht.values=O(Lt=lt[Lt],{val:ht.childrenTotal,direction:Y?1-z.direction:z.direction}),ht.pointValues=O(Lt,{x:Lt.x/q.axisRatio,y:It.AXIS_MAX-Lt.y-Lt.height,width:Lt.width/q.axisRatio}),ht.children.length&&q.calculateChildrenAreas(ht,ht.values)})},ft.prototype.createList=function(rt){var z=this.chart,q=[];if(z.breadcrumbs){var mt=0;q.push({level:mt,levelOptions:z.series[0]}),z=rt.target.nodeMap[rt.newRootId];for(var pt=[];z.parent||""===z.parent;)pt.push(z),z=rt.target.nodeMap[z.parent];pt.reverse().forEach(function(dt){q.push({level:++mt,levelOptions:dt})}),1>=q.length&&(q.length=0)}return q},ft.prototype.drawDataLabels=function(){var q,mt,rt=this,z=rt.mapOptionsToLevel;rt.points.filter(function(pt){return pt.node.visible}).forEach(function(pt){mt=z[pt.node.level],q={style:{}},pt.node.isLeaf||(q.enabled=!1),mt&&mt.dataLabels&&(q=O(q,mt.dataLabels),rt._hasPointLabels=!0),pt.shapeArgs&&(q.style.width=pt.shapeArgs.width,pt.dataLabel&&pt.dataLabel.css({width:pt.shapeArgs.width+"px"})),pt.dlOptions=O(q,pt.options.dataLabels)}),x.prototype.drawDataLabels.call(this)},ft.prototype.drawPoints=function(rt){void 0===rt&&(rt=this.points);var z=this,q=z.chart,mt=q.renderer,pt=q.styledMode,dt=z.options,Y=pt?{}:dt.shadow,lt=dt.borderRadius,ht=q.pointCount<dt.animationLimit,Lt=dt.allowTraversingTree;rt.forEach(function(At){var Wt=At.node.levelDynamic,Ot={},se={},_e={},We="level-group-"+At.node.level,He=!!At.graphic,Fe=ht&&He,pe=At.shapeArgs;At.shouldDraw()&&(At.isInside=!0,lt&&(se.r=lt),O(!0,Fe?Ot:se,He?pe:{},pt?{}:z.pointAttribs(At,At.selected?"select":void 0)),z.colorAttribs&&pt&&M(_e,z.colorAttribs(At)),z[We]||(z[We]=mt.g(We).attr({zIndex:1e3-(Wt||0)}).add(z.group),z[We].survive=!0)),At.draw({animatableAttribs:Ot,attribs:se,css:_e,group:z[We],renderer:mt,shadow:Y,shapeArgs:pe,shapeType:At.shapeType}),Lt&&At.graphic&&(At.drillId=dt.interactByLeaf?z.drillToByLeaf(At):z.drillToByGroup(At))})},ft.prototype.drillToByGroup=function(rt){var z=!1;return rt.node.level-this.nodeMap[this.rootNode].level!=1||rt.node.isLeaf||(z=rt.id),z},ft.prototype.drillToByLeaf=function(rt){var z=!1;if(rt.node.parent!==this.rootNode&&rt.node.isLeaf)for(rt=rt.node;!z;)(rt=this.nodeMap[rt.parent]).parent===this.rootNode&&(z=rt.id);return z},ft.prototype.drillToNode=function(rt,z){v(32,!1,void 0,{"treemap.drillToNode":"use treemap.setRootNode"}),this.setRootNode(rt,z)},ft.prototype.drillUp=function(){var rt=this.nodeMap[this.rootNode];rt&&y(rt.parent)&&this.setRootNode(rt.parent,!0,{trigger:"traverseUpButton"})},ft.prototype.getExtremes=function(){var rt=x.prototype.getExtremes.call(this,this.colorValueData),z=rt.dataMax;return this.valueMin=rt.dataMin,this.valueMax=z,x.prototype.getExtremes.call(this)},ft.prototype.getListOfParents=function(rt,z){rt=k(rt)?rt:[];var q=k(z)?z:[];return z=rt.reduce(function(mt,pt,dt){return typeof mt[pt=B(pt.parent,"")]>"u"&&(mt[pt]=[]),mt[pt].push(dt),mt},{"":[]}),It.eachObject(z,function(mt,pt,dt){""!==pt&&-1===q.indexOf(pt)&&(mt.forEach(function(Y){dt[""].push(Y)}),delete dt[pt])}),z},ft.prototype.getTree=function(){var rt=this.data.map(function(z){return z.id});return rt=this.getListOfParents(this.data,rt),this.nodeMap={},this.nodeList=[],this.buildTree("",-1,0,rt)},ft.prototype.buildTree=function(rt,z,q,mt,pt){var Lt,dt=this,Y=[],lt=dt.points[z],ht=0;(mt[rt]||[]).forEach(function(Wt){Lt=dt.buildTree(dt.points[Wt].id,Wt,q+1,mt,rt),ht=Math.max(Lt.height+1,ht),Y.push(Lt)});var At=(new dt.NodeClass).init(rt,z,Y,ht,q,dt,pt);return Y.forEach(function(Wt){Wt.parentNode=At}),dt.nodeMap[At.id]=At,dt.nodeList.push(At),lt&&(lt.node=At,At.point=lt),At},ft.prototype.hasData=function(){return!!this.processedXData.length},ft.prototype.init=function(rt,z){var q=this,mt=O(z.drillUpButton,z.breadcrumbs),pt=it(q,"setOptions",function(dt){G((dt=dt.userOptions).allowDrillToNode)&&!G(dt.allowTraversingTree)&&(dt.allowTraversingTree=dt.allowDrillToNode,delete dt.allowDrillToNode),G(dt.drillUpButton)&&!G(dt.traverseUpButton)&&(dt.traverseUpButton=dt.drillUpButton,delete dt.drillUpButton)});x.prototype.init.call(q,rt,z),delete q.opacity,q.eventsToUnbind.push(pt),q.options.allowTraversingTree&&(q.eventsToUnbind.push(it(q,"click",q.onClickDrillToNode)),q.eventsToUnbind.push(it(q,"setRootNode",function(dt){var Y=q.chart;Y.breadcrumbs&&Y.breadcrumbs.updateProperties(q.createList(dt))})),q.eventsToUnbind.push(it(q,"update",function(dt,Y){(Y=this.chart.breadcrumbs)&&dt.options.breadcrumbs&&Y.update(dt.options.breadcrumbs)})),q.eventsToUnbind.push(it(q,"destroy",function(dt){var Y=this.chart;Y.breadcrumbs&&(Y.breadcrumbs.destroy(),dt.keepEventsForUpdate||(Y.breadcrumbs=void 0))}))),rt.breadcrumbs||(rt.breadcrumbs=new et(rt,mt)),q.eventsToUnbind.push(it(rt.breadcrumbs,"up",function(dt){dt=this.level-dt.newLevel;for(var Y=0;Y<dt;Y++)q.drillUp()}))},ft.prototype.onClickDrillToNode=function(rt){var z=(rt=rt.point)&&rt.drillId;y(z)&&(rt.setState(""),this.setRootNode(z,!0,{trigger:"click"}))},ft.prototype.pointAttribs=function(rt,z){var q=_(this.mapOptionsToLevel)?this.mapOptionsToLevel:{},mt=rt&&q[rt.node.level]||{};q=this.options;var pt=z&&q.states&&q.states[z]||{},dt=rt&&rt.getClassName()||"";return rt={stroke:rt&&rt.borderColor||mt.borderColor||pt.borderColor||q.borderColor,"stroke-width":B(rt&&rt.borderWidth,mt.borderWidth,pt.borderWidth,q.borderWidth),dashstyle:rt&&rt.borderDashStyle||mt.borderDashStyle||pt.borderDashStyle||q.borderDashStyle,fill:rt&&rt.color||this.color},-1!==dt.indexOf("highcharts-above-level")?(rt.fill="none",rt["stroke-width"]=0):-1!==dt.indexOf("highcharts-internal-node-interactive")?(z=B(pt.opacity,q.opacity),rt.fill=A(rt.fill).setOpacity(z).get(),rt.cursor="pointer"):-1!==dt.indexOf("highcharts-internal-node")?rt.fill="none":z&&(rt.fill=A(rt.fill).brighten(pt.brightness).get()),rt},ft.prototype.setColorRecursive=function(rt,z,q,mt,pt){var dt=this,Y=dt&&dt.chart;if(Y=Y&&Y.options&&Y.options.colors,rt){var lt=nt(rt,{colors:Y,index:mt,mapOptionsToLevel:dt.mapOptionsToLevel,parentColor:z,parentColorIndex:q,series:dt,siblings:pt});(z=dt.points[rt.i])&&(z.color=lt.color,z.colorIndex=lt.colorIndex),(rt.children||[]).forEach(function(ht,Lt){dt.setColorRecursive(ht,lt.color,lt.colorIndex,Lt,rt.children.length)})}},ft.prototype.setPointValues=function(){var rt=this,z=rt.xAxis,q=rt.yAxis,mt=rt.chart.styledMode;rt.points.forEach(function(pt){var dt=pt.node,Y=dt.pointValues;if(dt=dt.visible,Y&&dt){dt=Y.height;var lt=Y.width,ht=Y.x,Lt=Y.y,At=mt?0:(rt.pointAttribs(pt)["stroke-width"]||0)%2/2;Y=Math.round(z.toPixels(ht,!0))-At,lt=Math.round(z.toPixels(ht+lt,!0))-At,ht=Math.round(q.toPixels(Lt,!0))-At,dt=Math.round(q.toPixels(Lt+dt,!0))-At,dt={x:Math.min(Y,lt),y:Math.min(ht,dt),width:Math.abs(lt-Y),height:Math.abs(dt-ht)},pt.plotX=dt.x+dt.width/2,pt.plotY=dt.y+dt.height/2,pt.shapeArgs=dt}else delete pt.plotX,delete pt.plotY})},ft.prototype.setRootNode=function(rt,z,q){rt=M({newRootId:rt,previousRootId:this.rootNode,redraw:B(z,!0),series:this},q),b(this,"setRootNode",rt,function(mt){var pt=mt.series;pt.idPreviousRoot=mt.previousRootId,pt.rootNode=mt.newRootId,pt.isDirty=!0,mt.redraw&&pt.chart.redraw()})},ft.prototype.setState=function(rt){this.options.inactiveOtherPoints=!0,x.prototype.setState.call(this,rt,!1),this.options.inactiveOtherPoints=!1},ft.prototype.setTreeValues=function(rt){var z=this,q=z.options,mt=z.nodeMap[z.rootNode];q=!It.isBoolean(q.levelIsConstant)||q.levelIsConstant;var pt=0,dt=[],Y=z.points[rt.i];rt.children.forEach(function(ht){ht=z.setTreeValues(ht),dt.push(ht),ht.ignore||(pt+=ht.val)}),H(dt,function(ht,Lt){return(ht.sortIndex||0)-(Lt.sortIndex||0)});var lt=B(Y&&Y.options.value,pt);return Y&&(Y.value=lt),M(rt,{children:dt,childrenTotal:pt,ignore:!(B(Y&&Y.visible,!0)&&0<lt),isLeaf:rt.visible&&!pt,levelDynamic:rt.level-(q?0:mt.level),name:B(Y&&Y.name,""),sortIndex:B(Y&&Y.sortIndex,-lt),val:lt}),rt},ft.prototype.sliceAndDice=function(rt,z){return this.algorithmFill(!0,rt,z)},ft.prototype.squarified=function(rt,z){return this.algorithmLowAspectRatio(!0,rt,z)},ft.prototype.strip=function(rt,z){return this.algorithmLowAspectRatio(!1,rt,z)},ft.prototype.stripes=function(rt,z){return this.algorithmFill(!1,rt,z)},ft.prototype.translate=function(){var rt=this,z=rt.options,q=l(rt);x.prototype.translate.call(rt);var mt=rt.tree=rt.getTree(),pt=rt.nodeMap[q];""===q||pt&&pt.children.length||(rt.setRootNode("",!1),pt=rt.nodeMap[q=rt.rootNode]),rt.mapOptionsToLevel=w({from:pt.level+1,levels:z.levels,to:mt.height,defaults:{levelIsConstant:rt.options.levelIsConstant,colorByPoint:z.colorByPoint}}),It.recursive(rt.nodeMap[rt.rootNode],function(dt){var Y=!1,lt=dt.parent;return dt.visible=!0,(lt||""===lt)&&(Y=rt.nodeMap[lt]),Y}),It.recursive(rt.nodeMap[rt.rootNode].children,function(dt){var Y=!1;return dt.forEach(function(lt){lt.visible=!0,lt.children.length&&(Y=(Y||[]).concat(lt.children))}),Y}),rt.setTreeValues(mt),rt.axisRatio=rt.xAxis.len/rt.yAxis.len,rt.nodeMap[""].pointValues=q={x:0,y:0,width:It.AXIS_MAX,height:It.AXIS_MAX},rt.nodeMap[""].values=q=O(q,{width:q.width*rt.axisRatio,direction:"vertical"===z.layoutStartingDirection?0:1,val:mt.val}),rt.calculateChildrenAreas(mt,q),rt.colorAxis||z.colorByPoint||rt.setColorRecursive(rt.tree),z.allowTraversingTree&&(rt.xAxis.setExtremes((z=pt.pointValues).x,z.x+z.width,!1),rt.yAxis.setExtremes(z.y,z.y+z.height,!1),rt.xAxis.setScale(),rt.yAxis.setScale()),rt.setPointValues()},ft.defaultOptions=O(V.defaultOptions,{allowTraversingTree:!1,animationLimit:250,borderRadius:0,showInLegend:!1,marker:void 0,colorByPoint:!1,dataLabels:{defer:!1,enabled:!0,formatter:function(){var rt=this&&this.point?this.point:{};return y(rt.name)?rt.name:""},inside:!0,verticalAlign:"middle"},tooltip:{headerFormat:"",pointFormat:"<b>{point.name}</b>: {point.value}<br/>"},ignoreHiddenPoint:!0,layoutAlgorithm:"sliceAndDice",layoutStartingDirection:"vertical",alternateStartingDirection:!1,levelIsConstant:!0,traverseUpButton:{position:{align:"right",x:-10,y:10}},borderColor:"#e6e6e6",borderWidth:1,colorKey:"colorValue",opacity:.15,states:{hover:{borderColor:"#999999",brightness:j?0:.1,halo:!1,opacity:.75,shadow:!1}}}),ft}(V),M(K.prototype,{buildKDTree:Ct,colorAttribs:wt.seriesMembers.colorAttribs,colorKey:"colorValue",directTouch:!0,drawLegendSymbol:jt.drawRectangle,getExtremesFromAll:!0,getSymbol:Ct,optionalAxis:"colorAxis",parallelArrays:["x","y","value","colorValue"],pointArrayMap:["value"],pointClass:Rt,NodeClass:R,trackerGroups:["group","dataLabelsGroup"],utils:{recursive:It.recursive}}),wt.compose(K),zt.registerSeriesType("treemap",K),K}),te(vt,"masters/modules/treemap.src.js",[vt["Core/Globals.js"],vt["Extensions/Breadcrumbs.js"]],function(Ct,wt){Ct.Breadcrumbs=wt})}),function(vt){"object"==typeof module&&module.exports?(vt.default=vt,module.exports=vt):"function"==typeof define&&define.amd?define("highcharts/modules/accessibility",["highcharts"],function(te){return vt(te),vt.Highcharts=te,vt}):vt(typeof Highcharts<"u"?Highcharts:void 0)}(function(vt){function te(Ct,wt,xt,jt){Ct.hasOwnProperty(wt)||(Ct[wt]=jt.apply(null,xt),"function"==typeof CustomEvent&&window.dispatchEvent(new CustomEvent("HighchartsModuleLoaded",{detail:{path:wt,module:Ct[wt]}})))}te(vt=vt?vt._modules:{},"Accessibility/Utils/HTMLUtilities.js",[vt["Core/Globals.js"],vt["Core/Utilities.js"]],function(Ct,wt){function xt(K){if("function"==typeof Ut.MouseEvent)return new Ut.MouseEvent(K.type,K);if(zt.createEvent){var et=zt.createEvent("MouseEvent");if(et.initMouseEvent)return et.initMouseEvent(K.type,K.bubbles,K.cancelable,K.view||Ut,K.detail,K.screenX,K.screenY,K.clientX,K.clientY,K.ctrlKey,K.altKey,K.shiftKey,K.metaKey,K.button,K.relatedTarget),et}return jt(K.type)}function jt(K,et,st){return et=et||{x:0,y:0},"function"==typeof Ut.MouseEvent?new Ut.MouseEvent(K,{bubbles:!0,cancelable:!0,composed:!0,button:0,buttons:1,relatedTarget:st||It,view:Ut,detail:"click"===K?1:0,screenX:et.x,screenY:et.y,clientX:et.x,clientY:et.y}):zt.createEvent&&(st=zt.createEvent("MouseEvent")).initMouseEvent?(st.initMouseEvent(K,!0,!0,Ut,"click"===K?1:0,et.x,et.y,et.x,et.y,!1,!1,!1,!1,0,null),st):{type:K}}var zt=Ct.doc,Ut=Ct.win,Rt=wt.css,It=Ut.EventTarget&&new Ut.EventTarget||"none";return{addClass:function(K,et){K.classList?K.classList.add(et):0>K.className.indexOf(et)&&(K.className+=" "+et)},cloneMouseEvent:xt,cloneTouchEvent:function(K){var et=function(st){for(var R=[],I=0;I<st.length;++I){var A=st.item(I);A&&R.push(A)}return R};return"function"==typeof Ut.TouchEvent?(et=new Ut.TouchEvent(K.type,{touches:et(K.touches),targetTouches:et(K.targetTouches),changedTouches:et(K.changedTouches),ctrlKey:K.ctrlKey,shiftKey:K.shiftKey,altKey:K.altKey,metaKey:K.metaKey,bubbles:K.bubbles,cancelable:K.cancelable,composed:K.composed,detail:K.detail,view:K.view}),K.defaultPrevented&&et.preventDefault(),et):((et=xt(K)).touches=K.touches,et.changedTouches=K.changedTouches,et.targetTouches=K.targetTouches,et)},escapeStringForHTML:function(K){return K.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#x27;").replace(/\//g,"&#x2F;")},getElement:function(K){return zt.getElementById(K)},getFakeMouseEvent:jt,getHeadingTagNameForElement:function(K){var et=function(R){return R=parseInt(R.slice(1),10),"h"+Math.min(6,R+1)},st=function(R){var I;t:{for(I=R;I=I.previousSibling;){var A=I.tagName||"";if(/H[1-6]/.test(A)){I=A;break t}}I=""}return I?et(I):(R=R.parentElement)?/H[1-6]/.test(I=R.tagName)?et(I):st(R):"p"};return st(K)},removeChildNodes:function(K){for(;K.lastChild;)K.removeChild(K.lastChild)},removeClass:function(K,et){K.classList?K.classList.remove(et):K.className=K.className.replace(new RegExp(et,"g"),"")},removeElement:function(K){K&&K.parentNode&&K.parentNode.removeChild(K)},reverseChildNodes:function(K){for(var et=K.childNodes.length;et--;)K.appendChild(K.childNodes[et])},simulatedEventTarget:It,stripHTMLTagsFromString:function(K){return"string"==typeof K?K.replace(/<\/?[^>]+(>|$)/g,""):K},visuallyHideElement:function(K){Rt(K,{position:"absolute",width:"1px",height:"1px",overflow:"hidden",whiteSpace:"nowrap",clip:"rect(1px, 1px, 1px, 1px)",marginTop:"-3px","-ms-filter":"progid:DXImageTransform.Microsoft.Alpha(Opacity=1)",filter:"alpha(opacity=1)",opacity:.01})}}}),te(vt,"Accessibility/A11yI18n.js",[vt["Core/FormatUtilities.js"],vt["Core/Utilities.js"]],function(Ct,wt){var Ut,xt=Ct.format,jt=wt.getNestedProperty,zt=wt.pick;return function(Rt){function K(R,I,A){var x=function(w,l){var it=(w=w.slice(l||0)).indexOf("{"),N=w.indexOf("}");if(-1<it&&N>it)return{statement:w.substring(it+1,N),begin:l+it+1,end:l+N}},T=[],j=0;do{var V=x(R,j),nt=R.substring(j,V&&V.begin-1);nt.length&&T.push({value:nt,type:"constant"}),V&&T.push({value:V.statement,type:"statement"}),j=V?V.end+1:j+1}while(V);return T.forEach(function(w){"statement"===w.type&&(w.value=function It(R,I){var A=R.indexOf("#each("),x=R.indexOf("#plural("),T=R.indexOf("["),j=R.indexOf("]");if(-1<A){if(j=R.slice(A).indexOf(")")+A,x=R.substring(0,A),T=R.substring(j+1),j=R.substring(A+6,j).split(","),A=Number(j[1]),R="",I=jt(j[0],I))for(A=0>(A=isNaN(A)?I.length:A)?I.length+A:Math.min(A,I.length),j=0;j<A;++j)R+=x+I[j]+T;return R.length?R:""}if(-1<x){switch(T=R.slice(x).indexOf(")")+x,x=R.substring(x+8,T).split(","),Number(jt(x[0],I))){case 0:R=zt(x[4],x[1]);break;case 1:R=zt(x[2],x[1]);break;case 2:R=zt(x[3],x[1]);break;default:R=x[1]}return R?(I=R).trim&&I.trim()||I.replace(/^\s+|\s+$/g,""):""}return-1<T?(x=R.substring(0,T),T=Number(R.substring(T+1,j)),R=void 0,I=jt(x,I),!isNaN(T)&&I&&(0>T?typeof(R=I[I.length+T])>"u"&&(R=I[0]):typeof(R=I[T])>"u"&&(R=I[I.length-1])),typeof R<"u"?R:""):"{"+R+"}"}(w.value,I))}),xt(T.reduce(function(w,l){return w+l.value},""),I,A)}function et(R,I){R=R.split(".");for(var A=this.options.lang,x=0;x<R.length;++x)A=A&&A[R[x]];return"string"==typeof A?K(A,I,this):""}var st=[];Rt.compose=function(R){return-1===st.indexOf(R)&&(st.push(R),R.prototype.langFormat=et),R},Rt.i18nFormat=K}(Ut||(Ut={})),Ut}),te(vt,"Accessibility/Utils/ChartUtilities.js",[vt["Core/Globals.js"],vt["Accessibility/Utils/HTMLUtilities.js"],vt["Core/Utilities.js"]],function(Ct,wt,xt){function Rt(x){if(x.points&&x.points.length)return(x=I(x.points,function(T){return!!T.graphic}))&&x.graphic&&x.graphic.element}function It(x){var T=Rt(x);return T&&T.parentNode||x.graph&&x.graph.element||x.group&&x.group.element}var et=Ct.doc,st=wt.stripHTMLTagsFromString,R=xt.defined,I=xt.find,A=xt.fireEvent;return{fireEventOnWrappedOrUnwrappedElement:function jt(x,T){var j=T.type,V=x.hcEvents;et.createEvent&&(x.dispatchEvent||x.fireEvent)?x.dispatchEvent?x.dispatchEvent(T):x.fireEvent(j,T):V&&V[j]?A(x,j,T):x.element&&jt(x.element,T)},getChartTitle:function(x){return st(x.options.title.text||x.langFormat("accessibility.defaultChartTitle",{chart:x}))},getAxisDescription:function(x){return x&&(x.userOptions&&x.userOptions.accessibility&&x.userOptions.accessibility.description||x.axisTitle&&x.axisTitle.textStr||x.options.id||x.categories&&"categories"||x.dateTime&&"Time"||"values")},getAxisRangeDescription:function(x){var T=x.options||{};return T.accessibility&&typeof T.accessibility.rangeDescription<"u"?T.accessibility.rangeDescription:x.categories?(T=x.chart,x=x.dataMax&&x.dataMin?T.langFormat("accessibility.axis.rangeCategories",{chart:T,axis:x,numCategories:x.dataMax-x.dataMin+1}):""):!x.dateTime||0!==x.min&&0!==x.dataMin?function Ut(x){var T=x.chart,j=T.options,V=j&&j.accessibility&&j.accessibility.screenReaderSection.axisRangeDateFormat||"",nt={min:x.dataMin||x.min||0,max:x.dataMax||x.max||0};return j=function(w){return x.dateTime?T.time.dateFormat(V,nt[w]):nt[w].toString()},T.langFormat("accessibility.axis.rangeFromTo",{chart:T,axis:x,rangeFrom:j("min"),rangeTo:j("max")})}(x):function zt(x){var T=x.chart,j={},V="Seconds";j.Seconds=((x.dataMax||x.max||0)-(x.dataMin||x.min||0))/1e3,j.Minutes=j.Seconds/60,j.Hours=j.Minutes/60,j.Days=j.Hours/24,["Minutes","Hours","Days"].forEach(function(w){2<j[w]&&(V=w)});var nt=j[V].toFixed("Seconds"!==V&&"Minutes"!==V?1:0);return T.langFormat("accessibility.axis.timeRange"+V,{chart:T,axis:x,range:nt.replace(".0","")})}(x)},getPointFromXY:function(x,T,j){for(var nt,V=x.length;V--;)if(nt=I(x[V].points||[],function(w){return w.x===T&&w.y===j}))return nt},getSeriesFirstPointElement:Rt,getSeriesFromName:function(x,T){return T?(x.series||[]).filter(function(j){return j.name===T}):x.series},getSeriesA11yElement:It,unhideChartElementFromAT:function K(x,T){T.setAttribute("aria-hidden",!1),T!==x.renderTo&&T.parentNode&&T.parentNode!==et.body&&(Array.prototype.forEach.call(T.parentNode.childNodes,function(j){j.hasAttribute("aria-hidden")||j.setAttribute("aria-hidden",!0)}),K(x,T.parentNode))},hideSeriesFromAT:function(x){(x=It(x))&&x.setAttribute("aria-hidden",!0)},scrollToPoint:function(x){var T=x.series.xAxis,j=x.series.yAxis,V=T&&T.scrollbar?T:j;if((T=V&&V.scrollbar)&&R(T.to)&&R(T.from)){if(j=T.to-T.from,R(V.dataMin)&&R(V.dataMax)){var nt=V.toPixels(V.dataMin),w=V.toPixels(V.dataMax);x=(V.toPixels(x["xAxis"===V.coll?"x":"y"]||0)-nt)/(w-nt)}else x=0;T.updatePosition(x-j/2,x+j/2),A(T,"changed",{from:T.from,to:T.to,trigger:"scrollbar",DOMEvent:null})}}}}),te(vt,"Accessibility/Utils/DOMElementProvider.js",[vt["Core/Globals.js"],vt["Accessibility/Utils/HTMLUtilities.js"]],function(Ct,wt){var xt=Ct.doc,jt=wt.removeElement;return function(){function zt(){this.elements=[]}return zt.prototype.createElement=function(){var Ut=xt.createElement.apply(xt,arguments);return this.elements.push(Ut),Ut},zt.prototype.destroyCreatedElements=function(){this.elements.forEach(function(Ut){jt(Ut)}),this.elements=[]},zt}()}),te(vt,"Accessibility/Utils/EventProvider.js",[vt["Core/Globals.js"],vt["Core/Utilities.js"]],function(Ct,wt){var xt=wt.addEvent;return function(){function jt(){this.eventRemovers=[]}return jt.prototype.addEvent=function(){var zt=xt.apply(Ct,arguments);return this.eventRemovers.push(zt),zt},jt.prototype.removeAddedEvents=function(){this.eventRemovers.forEach(function(zt){return zt()}),this.eventRemovers=[]},jt}()}),te(vt,"Accessibility/AccessibilityComponent.js",[vt["Accessibility/Utils/ChartUtilities.js"],vt["Accessibility/Utils/DOMElementProvider.js"],vt["Accessibility/Utils/EventProvider.js"],vt["Accessibility/Utils/HTMLUtilities.js"],vt["Core/Utilities.js"]],function(Ct,wt,xt,jt,zt){var Ut=Ct.fireEventOnWrappedOrUnwrappedElement,Rt=jt.getFakeMouseEvent;return(Ct=zt.extend)((jt=function(){function It(){this.proxyProvider=this.keyCodes=this.eventProvider=this.domElementProvider=this.chart=void 0}return It.prototype.initBase=function(K,et){this.chart=K,this.eventProvider=new xt,this.domElementProvider=new wt,this.proxyProvider=et,this.keyCodes={left:37,right:39,up:38,down:40,enter:13,space:32,esc:27,tab:9,pageUp:33,pageDown:34,end:35,home:36}},It.prototype.addEvent=function(K,et,st,R){return this.eventProvider.addEvent(K,et,st,R)},It.prototype.createElement=function(K,et){return this.domElementProvider.createElement(K,et)},It.prototype.fakeClickEvent=function(K){var et=Rt("click");Ut(K,et)},It.prototype.destroyBase=function(){this.domElementProvider.destroyCreatedElements(),this.eventProvider.removeAddedEvents()},It}()).prototype,{init:function(){},getKeyboardNavigation:function(){},onChartUpdate:function(){},onChartRender:function(){},destroy:function(){}}),jt}),te(vt,"Accessibility/KeyboardNavigationHandler.js",[vt["Core/Utilities.js"]],function(Ct){var wt=Ct.find;return function(){function xt(jt,zt){this.chart=jt,this.keyCodeMap=zt.keyCodeMap||[],this.validate=zt.validate,this.init=zt.init,this.terminate=zt.terminate,this.response={success:1,prev:2,next:3,noHandler:4,fail:5}}return xt.prototype.run=function(jt){var zt=jt.which||jt.keyCode,Ut=this.response.noHandler,Rt=wt(this.keyCodeMap,function(It){return-1<It[0].indexOf(zt)});return Rt?Ut=Rt[1].call(this,zt,jt):9===zt&&(Ut=this.response[jt.shiftKey?"prev":"next"]),Ut},xt}()}),te(vt,"Accessibility/Components/ContainerComponent.js",[vt["Accessibility/AccessibilityComponent.js"],vt["Accessibility/KeyboardNavigationHandler.js"],vt["Accessibility/Utils/ChartUtilities.js"],vt["Core/Globals.js"],vt["Accessibility/Utils/HTMLUtilities.js"]],function(Ct,wt,xt,jt,zt){var st,Ut=this&&this.__extends||(st=function(R,I){return(st=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(A,x){A.__proto__=x}||function(A,x){for(var T in x)x.hasOwnProperty(T)&&(A[T]=x[T])})(R,I)},function(R,I){function A(){this.constructor=R}st(R,I),R.prototype=null===I?Object.create(I):(A.prototype=I.prototype,new A)}),Rt=xt.unhideChartElementFromAT,It=xt.getChartTitle,K=jt.doc,et=zt.stripHTMLTagsFromString;return function(st){function R(){return null!==st&&st.apply(this,arguments)||this}return Ut(R,st),R.prototype.onChartUpdate=function(){this.handleSVGTitleElement(),this.setSVGContainerLabel(),this.setGraphicContainerAttrs(),this.setRenderToAttrs(),this.makeCreditsAccessible()},R.prototype.handleSVGTitleElement=function(){var I=this.chart,A="highcharts-title-"+I.index,x=et(I.langFormat("accessibility.svgContainerTitle",{chartTitle:It(I)}));if(x.length){var T=this.svgTitleElement=this.svgTitleElement||K.createElementNS("http://www.w3.org/2000/svg","title");T.textContent=x,T.id=A,I.renderTo.insertBefore(T,I.renderTo.firstChild)}},R.prototype.setSVGContainerLabel=function(){var I=this.chart,A=I.langFormat("accessibility.svgContainerLabel",{chartTitle:It(I)});I.renderer.box&&A.length&&I.renderer.box.setAttribute("aria-label",A)},R.prototype.setGraphicContainerAttrs=function(){var I=this.chart,A=I.langFormat("accessibility.graphicContainerLabel",{chartTitle:It(I)});A.length&&I.container.setAttribute("aria-label",A)},R.prototype.setRenderToAttrs=function(){var I=this.chart,A="disabled"!==I.options.accessibility.landmarkVerbosity,x=I.langFormat("accessibility.chartContainerLabel",{title:It(I),chart:I});x&&(I.renderTo.setAttribute("role",A?"region":"group"),I.renderTo.setAttribute("aria-label",x))},R.prototype.makeCreditsAccessible=function(){var I=this.chart,A=I.credits;A&&(A.textStr&&A.element.setAttribute("aria-label",I.langFormat("accessibility.credits",{creditsStr:et(A.textStr)})),Rt(I,A.element))},R.prototype.getKeyboardNavigation=function(){var I=this.chart;return new wt(I,{keyCodeMap:[],validate:function(){return!0},init:function(){var A=I.accessibility;A&&A.keyboardNavigation.tabindexContainer.focus()}})},R.prototype.destroy=function(){this.chart.renderTo.setAttribute("aria-hidden",!0)},R}(Ct)}),te(vt,"Accessibility/FocusBorder.js",[vt["Core/Renderer/SVG/SVGLabel.js"],vt["Core/Utilities.js"]],function(Ct,wt){var zt,xt=wt.addEvent,jt=wt.pick;return function(Ut){function Rt(){var T=this.focusElement,j=this.options.accessibility.keyboardNavigation.focusBorder;T&&(T.removeFocusBorder(),j.enabled&&T.addFocusBorder(j.margin,{stroke:j.style.color,strokeWidth:j.style.lineWidth,r:j.style.borderRadius}))}function It(T,j){var V=this.options.accessibility.keyboardNavigation.focusBorder;(j=j||T.element)&&j.focus&&(j.hcEvents&&j.hcEvents.focusin||xt(j,"focusin",function(){}),j.focus(),V.hideBrowserFocusOutline&&(j.style.outline="none")),this.focusElement&&this.focusElement.removeFocusBorder(),this.focusElement=T,this.renderFocusBorder()}function et(T,j){this.focusBorder&&this.removeFocusBorder();var V=this.getBBox(),nt=jt(T,3),w=this.parentGroup,l=this.scaleX||w&&w.scaleX,it=this.scaleY||w&&w.scaleY;l=(l?!it:it)?Math.abs(l||it||1):(Math.abs(l||1)+Math.abs(it||1))/2,V.x+=this.translateX?this.translateX:0,V.y+=this.translateY?this.translateY:0,it=V.x-nt;var N=V.y-nt,G=V.width+2*nt,v=V.height+2*nt,M=this instanceof Ct;if("text"===this.element.nodeName||M){var b=!!this.rotation;if(M)var k={x:b?1:0,y:0};else{var _=k=0;"middle"===this.attr("text-anchor")?k=_=.5:this.rotation?k=.25:_=.75,k={x:k,y:_}}_=+this.attr("x");var y=+this.attr("y");isNaN(_)||(it=_-V.width*k.x-nt),isNaN(y)||(N=y-V.height*k.y-nt),M&&b&&(M=G,G=v,v=M,isNaN(_)||(it=_-V.height*k.x-nt),isNaN(y)||(N=y-V.width*k.y-nt))}this.focusBorder=this.renderer.rect(it,N,G,v,parseInt((j&&j.r||0).toString(),10)/l).addClass("highcharts-focus-border").attr({zIndex:99}).add(w),this.renderer.styledMode||this.focusBorder.attr({stroke:j&&j.stroke,"stroke-width":(j&&j.strokeWidth||0)/l}),function st(T){for(var j=[],V=1;V<arguments.length;V++)j[V-1]=arguments[V];T.focusBorderUpdateHooks||(T.focusBorderUpdateHooks={},x.forEach(function(nt){var w=T[nt+="Setter"]||T._defaultSetter;T.focusBorderUpdateHooks[nt]=w,T[nt]=function(){var l=w.apply(T,arguments);return T.addFocusBorder.apply(T,j),l}}))}(this,T,j),function K(T){if(!T.focusBorderDestroyHook){var j=T.destroy;T.destroy=function(){return T.focusBorder&&T.focusBorder.destroy&&T.focusBorder.destroy(),j.apply(T,arguments)},T.focusBorderDestroyHook=j}}(this)}function R(){(function I(T){T.focusBorderUpdateHooks&&(Object.keys(T.focusBorderUpdateHooks).forEach(function(j){var V=T.focusBorderUpdateHooks[j];V===T._defaultSetter?delete T[j]:T[j]=V}),delete T.focusBorderUpdateHooks)})(this),this.focusBorderDestroyHook&&(this.destroy=this.focusBorderDestroyHook,delete this.focusBorderDestroyHook),this.focusBorder&&(this.focusBorder.destroy(),delete this.focusBorder)}var A=[],x="x y transform width height r d stroke-width".split(" ");Ut.compose=function(T,j){-1===A.indexOf(T)&&(A.push(T),(T=T.prototype).renderFocusBorder=Rt,T.setFocusToElement=It),-1===A.indexOf(j)&&(A.push(j),(j=j.prototype).addFocusBorder=et,j.removeFocusBorder=R)}}(zt||(zt={})),zt}),te(vt,"Accessibility/Utils/Announcer.js",[vt["Core/Renderer/HTML/AST.js"],vt["Accessibility/Utils/DOMElementProvider.js"],vt["Core/Globals.js"],vt["Accessibility/Utils/HTMLUtilities.js"],vt["Core/Utilities.js"]],function(Ct,wt,xt,jt,zt){var Ut=xt.doc,Rt=jt.addClass,It=jt.visuallyHideElement,K=zt.attr;return function(){function et(st,R){this.chart=st,this.domElementProvider=new wt,this.announceRegion=this.addAnnounceRegion(R)}return et.prototype.destroy=function(){this.domElementProvider.destroyCreatedElements()},et.prototype.announce=function(st){var R=this;Ct.setElementHTML(this.announceRegion,st),this.clearAnnouncementRegionTimer&&clearTimeout(this.clearAnnouncementRegionTimer),this.clearAnnouncementRegionTimer=setTimeout(function(){R.announceRegion.innerHTML=Ct.emptyHTML,delete R.clearAnnouncementRegionTimer},1e3)},et.prototype.addAnnounceRegion=function(st){var R=this.chart.announcerContainer||this.createAnnouncerContainer(),I=this.domElementProvider.createElement("div");return K(I,{"aria-hidden":!1,"aria-live":st}),this.chart.styledMode?Rt(I,"highcharts-visually-hidden"):It(I),R.appendChild(I),I},et.prototype.createAnnouncerContainer=function(){var st=this.chart,R=Ut.createElement("div");return K(R,{"aria-hidden":!1,class:"highcharts-announcer-container"}),R.style.position="relative",st.renderTo.insertBefore(R,st.renderTo.firstChild),st.announcerContainer=R},et}()}),te(vt,"Accessibility/Components/AnnotationsA11y.js",[vt["Accessibility/Utils/HTMLUtilities.js"]],function(Ct){function wt(It){return(It.annotations||[]).reduce(function(K,et){return et.options&&!1!==et.options.visible&&(K=K.concat(et.labels)),K},[])}function xt(It){return It.options&&It.options.accessibility&&It.options.accessibility.description||It.graphic&&It.graphic.text&&It.graphic.text.textStr||""}function jt(It){var K=It.options&&It.options.accessibility&&It.options.accessibility.description;if(K)return K;K=It.chart;var et=xt(It),st=It.points.filter(function(A){return!!A.graphic}).map(function(A){var x=A.accessibility&&A.accessibility.valueDescription||A.graphic&&A.graphic.element&&A.graphic.element.getAttribute("aria-label")||"";return((A=A&&A.series.name||"")?A+", ":"")+"data point "+x}).filter(function(A){return!!A}),R=st.length,I="accessibility.screenReaderSection.annotations.description"+(1<R?"MultiplePoints":R?"SinglePoint":"NoPoints");return It={annotationText:et,annotation:It,numPoints:R,annotationPoint:st[0],additionalAnnotationPoints:st.slice(1)},K.langFormat(I,It)}function zt(It){return wt(It).map(function(K){return(K=Ut(Rt(jt(K))))?"<li>".concat(K,"</li>"):""})}var Ut=Ct.escapeStringForHTML,Rt=Ct.stripHTMLTagsFromString;return{getAnnotationsInfoHTML:function(It){var K=It.annotations;return K&&K.length?(It=zt(It),'<ul style="list-style-type: none">'.concat(It.join(" "),"</ul>")):""},getAnnotationLabelDescription:jt,getAnnotationListItems:zt,getPointAnnotationTexts:function(It){var K=wt(It.series.chart).filter(function(et){return-1<et.points.indexOf(It)});return K.length?K.map(function(et){return"".concat(xt(et))}):[]}}}),te(vt,"Accessibility/Components/InfoRegionsComponent.js",[vt["Accessibility/A11yI18n.js"],vt["Accessibility/AccessibilityComponent.js"],vt["Accessibility/Utils/Announcer.js"],vt["Accessibility/Components/AnnotationsA11y.js"],vt["Core/Renderer/HTML/AST.js"],vt["Accessibility/Utils/ChartUtilities.js"],vt["Core/FormatUtilities.js"],vt["Core/Globals.js"],vt["Accessibility/Utils/HTMLUtilities.js"],vt["Core/Utilities.js"]],function(Ct,wt,xt,jt,zt,Ut,Rt,It,K,et){var b,R=this&&this.__extends||(b=function(k,_){return(b=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(y,O){y.__proto__=O}||function(y,O){for(var B in O)O.hasOwnProperty(B)&&(y[B]=O[B])})(k,_)},function(k,_){function y(){this.constructor=k}b(k,_),k.prototype=null===_?Object.create(_):(y.prototype=_.prototype,new y)}),I=jt.getAnnotationsInfoHTML,A=Ut.getAxisDescription,x=Ut.getAxisRangeDescription,T=Ut.getChartTitle,j=Ut.unhideChartElementFromAT,V=Rt.format,nt=It.doc,w=K.addClass,l=K.getElement,it=K.getHeadingTagNameForElement,N=K.stripHTMLTagsFromString,G=K.visuallyHideElement,v=et.attr,M=et.pick;return function(b){function k(){var _=null!==b&&b.apply(this,arguments)||this;return _.announcer=void 0,_.screenReaderSections={},_}return R(k,b),k.prototype.init=function(){var _=this.chart,y=this;this.initRegionsDefinitions(),this.addEvent(_,"aftergetTableAST",function(O){y.onDataTableCreated(O)}),this.addEvent(_,"afterViewData",function(O){O.wasHidden&&(y.dataTableDiv=O.element,setTimeout(function(){y.focusDataTable()},300))}),this.announcer=new xt(_,"assertive")},k.prototype.initRegionsDefinitions=function(){var _=this;this.screenReaderSections={before:{element:null,buildContent:function(y){var O=y.options.accessibility.screenReaderSection.beforeChartFormatter;return O?O(y):_.defaultBeforeChartFormatter(y)},insertIntoDOM:function(y,O){O.renderTo.insertBefore(y,O.renderTo.firstChild)},afterInserted:function(){typeof _.sonifyButtonId<"u"&&_.initSonifyButton(_.sonifyButtonId),typeof _.dataTableButtonId<"u"&&_.initDataTableButton(_.dataTableButtonId)}},after:{element:null,buildContent:function(y){var O=y.options.accessibility.screenReaderSection.afterChartFormatter;return O?O(y):_.defaultAfterChartFormatter()},insertIntoDOM:function(y,O){O.renderTo.insertBefore(y,O.container.nextSibling)},afterInserted:function(){_.chart.accessibility&&_.chart.accessibility.keyboardNavigation.updateExitAnchor()}}}},k.prototype.onChartRender=function(){var _=this;this.linkedDescriptionElement=this.getLinkedDescriptionElement(),this.setLinkedDescriptionAttrs(),Object.keys(this.screenReaderSections).forEach(function(y){_.updateScreenReaderSection(y)})},k.prototype.getLinkedDescriptionElement=function(){var _=this.chart.options.accessibility.linkedDescription;if(_){if("string"!=typeof _)return _;if(_=V(_,this.chart),1===(_=nt.querySelectorAll(_)).length)return _[0]}},k.prototype.setLinkedDescriptionAttrs=function(){var _=this.linkedDescriptionElement;_&&(_.setAttribute("aria-hidden","true"),w(_,"highcharts-linked-description"))},k.prototype.updateScreenReaderSection=function(_){var y=this.chart,O=this.screenReaderSections[_],B=O.buildContent(y),H=O.element=O.element||this.createElement("div"),at=H.firstChild||this.createElement("div");B?(this.setScreenReaderSectionAttribs(H,_),zt.setElementHTML(at,B),H.appendChild(at),O.insertIntoDOM(H,y),y.styledMode?w(at,"highcharts-visually-hidden"):G(at),j(y,at),O.afterInserted&&O.afterInserted()):(H.parentNode&&H.parentNode.removeChild(H),O.element=null)},k.prototype.setScreenReaderSectionAttribs=function(_,y){var O=this.chart,B=O.langFormat("accessibility.screenReaderSection."+y+"RegionLabel",{chart:O,chartTitle:T(O)});y="highcharts-screen-reader-region-".concat(y,"-").concat(O.index),v(_,{id:y,"aria-label":B||void 0}),_.style.position="relative",B&&_.setAttribute("role","all"===O.options.accessibility.landmarkVerbosity?"region":"group")},k.prototype.defaultBeforeChartFormatter=function(){var _=this.chart,y=_.options.accessibility.screenReaderSection.beforeChartFormat;if(!y)return"";var O=this.getAxesDescription(),B=_.sonify&&_.options.sonification&&_.options.sonification.enabled,H="highcharts-a11y-sonify-data-btn-"+_.index,at="hc-linkto-highcharts-data-table-"+_.index,ft=I(_),rt=_.langFormat("accessibility.screenReaderSection.annotations.heading",{chart:_});return O={headingTagName:it(_.renderTo),chartTitle:T(_),typeDescription:this.getTypeDescriptionText(),chartSubtitle:this.getSubtitleText(),chartLongdesc:this.getLongdescText(),xAxisDescription:O.xAxis,yAxisDescription:O.yAxis,playAsSoundButton:B?this.getSonifyButtonText(H):"",viewTableButton:_.getCSV?this.getDataTableButtonText(at):"",annotationsTitle:ft?rt:"",annotationsList:ft},_=Ct.i18nFormat(y,O,_),this.dataTableButtonId=at,this.sonifyButtonId=H,_.replace(/<(\w+)[^>]*?>\s*<\/\1>/g,"")},k.prototype.defaultAfterChartFormatter=function(){var _=this.chart,y=_.options.accessibility.screenReaderSection.afterChartFormat;if(!y)return"";var O={endOfChartMarker:this.getEndOfChartMarkerText()};return Ct.i18nFormat(y,O,_).replace(/<(\w+)[^>]*?>\s*<\/\1>/g,"")},k.prototype.getLinkedDescription=function(){var _=this.linkedDescriptionElement;return N(_&&_.innerHTML||"")},k.prototype.getLongdescText=function(){var _=this.chart.options,y=_.caption;y=y&&y.text;var O=this.getLinkedDescription();return _.accessibility.description||O||y||""},k.prototype.getTypeDescriptionText=function(){var _=this.chart;return _.types?_.options.accessibility.typeDescription||function st(b,k){var _=k[0],y=b.series&&b.series[0]||{};if(y={numSeries:b.series.length,numPoints:y.points&&y.points.length,chart:b,mapTitle:b.mapView&&b.mapView.geoMap&&b.mapView.geoMap.title},!_)return b.langFormat("accessibility.chartTypes.emptyChart",y);if("map"===_)return b.langFormat(y.mapTitle?"accessibility.chartTypes.mapTypeDescription":"accessibility.chartTypes.unknownMap",y);if(1<b.types.length)return b.langFormat("accessibility.chartTypes.combinationChart",y);_=b.langFormat("accessibility.seriesTypeDescriptions."+(k=k[0]),y);var O=b.series&&2>b.series.length?"Single":"Multiple";return(b.langFormat("accessibility.chartTypes."+k+O,y)||b.langFormat("accessibility.chartTypes.default"+O,y))+(_?" "+_:"")}(_,_.types):""},k.prototype.getDataTableButtonText=function(_){var y=this.chart;return'<button id="'+_+'">'+(y=y.langFormat("accessibility.table.viewAsDataTableButtonText",{chart:y,chartTitle:T(y)}))+"</button>"},k.prototype.getSonifyButtonText=function(_){var y=this.chart;return y.options.sonification&&!1===y.options.sonification.enabled?"":'<button id="'+_+'">'+(y=y.langFormat("accessibility.sonification.playAsSoundButtonText",{chart:y,chartTitle:T(y)}))+"</button>"},k.prototype.getSubtitleText=function(){var _=this.chart.options.subtitle;return N(_&&_.text||"")},k.prototype.getEndOfChartMarkerText=function(){var _=this.chart,y=_.langFormat("accessibility.screenReaderSection.endOfChartMarker",{chart:_});return'<div id="highcharts-end-of-chart-marker-'+_.index+'">'+y+"</div>"},k.prototype.onDataTableCreated=function(_){var y=this.chart;if(y.options.accessibility.enabled){this.viewDataTableButton&&this.viewDataTableButton.setAttribute("aria-expanded","true");var O=_.tree.attributes||{};O.tabindex=-1,O.summary=y.langFormat("accessibility.table.tableSummary",{chart:y}),_.tree.attributes=O}},k.prototype.focusDataTable=function(){var _=this.dataTableDiv;(_=_&&_.getElementsByTagName("table")[0])&&_.focus&&_.focus()},k.prototype.initSonifyButton=function(_){var y=this,O=this.sonifyButton=l(_),B=this.chart,H=function(at){O&&(O.setAttribute("aria-hidden","true"),O.setAttribute("aria-label","")),at.preventDefault(),at.stopPropagation(),at=B.langFormat("accessibility.sonification.playAsSoundClickAnnouncement",{chart:B}),y.announcer.announce(at),setTimeout(function(){O&&(O.removeAttribute("aria-hidden"),O.removeAttribute("aria-label")),B.sonify&&B.sonify()},1e3)};O&&B&&(O.setAttribute("tabindex",-1),O.onclick=function(at){(B.options.accessibility&&B.options.accessibility.screenReaderSection.onPlayAsSoundClick||H).call(this,at,B)})},k.prototype.initDataTableButton=function(_){var y=this.viewDataTableButton=l(_),O=this.chart;_=_.replace("hc-linkto-",""),y&&(v(y,{tabindex:-1,"aria-expanded":!!l(_)}),y.onclick=O.options.accessibility.screenReaderSection.onViewDataTableClick||function(){O.viewData()})},k.prototype.getAxesDescription=function(){var _=this.chart,y=function(at,ft){return 1<(at=_[at]).length||at[0]&&M(at[0].options.accessibility&&at[0].options.accessibility.enabled,ft)},O=!!_.types&&0>_.types.indexOf("map")&&0>_.types.indexOf("treemap")&&0>_.types.indexOf("tilemap"),B=!!_.hasCartesianSeries,H=y("xAxis",!_.angular&&B&&O);return y=y("yAxis",B&&O),O={},H&&(O.xAxis=this.getAxisDescriptionText("xAxis")),y&&(O.yAxis=this.getAxisDescriptionText("yAxis")),O},k.prototype.getAxisDescriptionText=function(_){var y=this.chart,O=y[_];return y.langFormat("accessibility.axis."+_+"Description"+(1<O.length?"Plural":"Singular"),{chart:y,names:O.map(function(B){return A(B)}),ranges:O.map(function(B){return x(B)}),numAxes:O.length})},k.prototype.destroy=function(){this.announcer&&this.announcer.destroy()},k}(wt)}),te(vt,"Accessibility/Components/MenuComponent.js",[vt["Core/Chart/Chart.js"],vt["Core/Utilities.js"],vt["Accessibility/AccessibilityComponent.js"],vt["Accessibility/KeyboardNavigationHandler.js"],vt["Accessibility/Utils/ChartUtilities.js"],vt["Accessibility/Utils/HTMLUtilities.js"]],function(Ct,wt,xt,jt,zt,Ut){var R,Rt=this&&this.__extends||(R=function(I,A){return(R=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(x,T){x.__proto__=T}||function(x,T){for(var j in T)T.hasOwnProperty(j)&&(x[j]=T[j])})(I,A)},function(I,A){function x(){this.constructor=I}R(I,A),I.prototype=null===A?Object.create(A):(x.prototype=A.prototype,new x)}),It=wt.attr,K=zt.getChartTitle,et=zt.unhideChartElementFromAT,st=Ut.getFakeMouseEvent;return wt=function(R){function I(){return null!==R&&R.apply(this,arguments)||this}return Rt(I,R),I.prototype.init=function(){var A=this.chart,x=this;this.addEvent(A,"exportMenuShown",function(){x.onMenuShown()}),this.addEvent(A,"exportMenuHidden",function(){x.onMenuHidden()}),this.createProxyGroup()},I.prototype.onMenuHidden=function(){var A=this.chart.exportContextMenu;A&&A.setAttribute("aria-hidden","true"),this.setExportButtonExpandedState("false")},I.prototype.onMenuShown=function(){var A=this.chart,x=A.exportContextMenu;x&&(this.addAccessibleContextMenuAttribs(),et(A,x)),this.setExportButtonExpandedState("true")},I.prototype.setExportButtonExpandedState=function(A){this.exportButtonProxy&&this.exportButtonProxy.buttonElement.setAttribute("aria-expanded",A)},I.prototype.onChartRender=function(){var A=this.chart,x=A.focusElement,T=A.accessibility;this.proxyProvider.clearGroup("chartMenu"),this.proxyMenuButton(),this.exportButtonProxy&&x&&x===A.exportingGroup&&(x.focusBorder?A.setFocusToElement(x,this.exportButtonProxy.buttonElement):T&&T.keyboardNavigation.tabindexContainer.focus())},I.prototype.proxyMenuButton=function(){var A=this.chart,T=A.exportSVGElements&&A.exportSVGElements[0],j=A.options.exporting,V=A.exportSVGElements&&A.exportSVGElements[0];j&&!1!==j.enabled&&j.accessibility&&j.accessibility.enabled&&V&&V.element&&T&&(this.exportButtonProxy=this.proxyProvider.addProxyElement("chartMenu",{click:T},{"aria-label":A.langFormat("accessibility.exporting.menuButtonLabel",{chart:A,chartTitle:K(A)}),"aria-expanded":!1,title:A.options.lang.contextButtonTitle||null}))},I.prototype.createProxyGroup=function(){this.chart&&this.proxyProvider&&this.proxyProvider.addGroup("chartMenu","div")},I.prototype.addAccessibleContextMenuAttribs=function(){var A=this.chart,x=A.exportDivElements;x&&x.length&&(x.forEach(function(T){T&&("LI"!==T.tagName||T.children&&T.children.length?T.setAttribute("aria-hidden","true"):T.setAttribute("tabindex",-1))}),(x=x[0]&&x[0].parentNode)&&It(x,{"aria-hidden":void 0,"aria-label":A.langFormat("accessibility.exporting.chartMenuLabel",{chart:A}),role:"list"}))},I.prototype.getKeyboardNavigation=function(){var A=this.keyCodes,x=this.chart,T=this;return new jt(x,{keyCodeMap:[[[A.left,A.up],function(){return T.onKbdPrevious(this)}],[[A.right,A.down],function(){return T.onKbdNext(this)}],[[A.enter,A.space],function(){return T.onKbdClick(this)}]],validate:function(){return!!x.exporting&&!1!==x.options.exporting.enabled&&!1!==x.options.exporting.accessibility.enabled},init:function(){var j=T.exportButtonProxy,V=T.chart.exportingGroup;j&&V&&x.setFocusToElement(V,j.buttonElement)},terminate:function(){x.hideExportMenu()}})},I.prototype.onKbdPrevious=function(A){var x=this.chart,T=x.options.accessibility;A=A.response;for(var j=x.highlightedExportItemIx||0;j--;)if(x.highlightExportItem(j))return A.success;return T.keyboardNavigation.wrapAround?(x.highlightLastExportItem(),A.success):A.prev},I.prototype.onKbdNext=function(A){var x=this.chart,T=x.options.accessibility;A=A.response;for(var j=(x.highlightedExportItemIx||0)+1;j<x.exportDivElements.length;++j)if(x.highlightExportItem(j))return A.success;return T.keyboardNavigation.wrapAround?(x.highlightExportItem(0),A.success):A.next},I.prototype.onKbdClick=function(A){var x=this.chart,j=(x.exportSVGElements&&x.exportSVGElements[0]).element;return x.openMenu?this.fakeClickEvent(x.exportDivElements[x.highlightedExportItemIx]):(this.fakeClickEvent(j),x.highlightExportItem(0)),A.response.success},I}(xt),function(R){function I(){var V=this.exportSVGElements&&this.exportSVGElements[0];V&&(V=V.element).onclick&&V.onclick(st("click"))}function A(){var V=this.exportDivElements;V&&this.exportContextMenu&&this.openMenu&&(V.forEach(function(nt){nt&&"highcharts-menu-item"===nt.className&&nt.onmouseout&&nt.onmouseout(st("mouseout"))}),this.highlightedExportItemIx=0,this.exportContextMenu.hideMenu(),this.container.focus())}function x(V){var nt=this.exportDivElements&&this.exportDivElements[V],w=this.exportDivElements&&this.exportDivElements[this.highlightedExportItemIx];if(nt&&"LI"===nt.tagName&&(!nt.children||!nt.children.length)){var l=!!(this.renderTo.getElementsByTagName("g")[0]||{}).focus;return nt.focus&&l&&nt.focus(),w&&w.onmouseout&&w.onmouseout(st("mouseout")),nt.onmouseover&&nt.onmouseover(st("mouseover")),this.highlightedExportItemIx=V,!0}return!1}function T(){if(this.exportDivElements)for(var V=this.exportDivElements.length;V--;)if(this.highlightExportItem(V))return!0;return!1}var j=[];R.compose=function(V){-1===j.indexOf(V)&&(j.push(V),(V=Ct.prototype).hideExportMenu=A,V.highlightExportItem=x,V.highlightLastExportItem=T,V.showExportMenu=I)}}(wt||(wt={})),wt}),te(vt,"Accessibility/KeyboardNavigation.js",[vt["Core/Globals.js"],vt["Accessibility/Components/MenuComponent.js"],vt["Core/Utilities.js"],vt["Accessibility/Utils/EventProvider.js"],vt["Accessibility/Utils/HTMLUtilities.js"]],function(Ct,wt,xt,jt,zt){var Ut=Ct.doc,Rt=Ct.win,It=xt.addEvent,K=xt.fireEvent,et=zt.getElement,st=zt.simulatedEventTarget;return function(R){function I(){var T=this;K(this,"dismissPopupContent",{},function(){T.tooltip&&T.tooltip.hide(0),T.hideExportMenu()})}function A(T){27===(T.which||T.keyCode)&&Ct.charts&&Ct.charts.forEach(function(j){j&&j.dismissPopupContent&&j.dismissPopupContent()})}var x=[];R.compose=function(T){return wt.compose(T),-1===x.indexOf(T)&&(x.push(T),T.prototype.dismissPopupContent=I),-1===x.indexOf(Ut)&&(x.push(Ut),It(Ut,"keydown",A)),T}}((xt=function(){function R(I,A){this.components=this.chart=void 0,this.currentModuleIx=NaN,this.exitAnchor=this.eventProvider=void 0,this.modules=[],this.tabindexContainer=void 0,this.init(I,A)}return R.prototype.init=function(I,A){var x=this,T=this.eventProvider=new jt;this.chart=I,this.components=A,this.modules=[],this.currentModuleIx=0,this.update(),T.addEvent(this.tabindexContainer,"keydown",function(j){return x.onKeydown(j)}),T.addEvent(this.tabindexContainer,"focus",function(j){return x.onFocus(j)}),["mouseup","touchend"].forEach(function(j){return T.addEvent(Ut,j,function(V){return x.onMouseUp(V)})}),["mousedown","touchstart"].forEach(function(j){return T.addEvent(I.renderTo,j,function(){x.isClickingChart=!0})}),T.addEvent(I.renderTo,"mouseover",function(){x.pointerIsOverChart=!0}),T.addEvent(I.renderTo,"mouseout",function(){x.pointerIsOverChart=!1})},R.prototype.update=function(I){var A=this.chart.options.accessibility;A=A&&A.keyboardNavigation;var x=this.components;this.updateContainerTabindex(),A&&A.enabled&&I&&I.length?(this.modules=I.reduce(function(T,j){return j=x[j].getKeyboardNavigation(),T.concat(j)},[]),this.updateExitAnchor()):(this.modules=[],this.currentModuleIx=0,this.removeExitAnchor())},R.prototype.updateExitAnchor=function(){var I="highcharts-end-of-chart-marker-".concat(this.chart.index);I=et(I),this.removeExitAnchor(),I?(this.makeElementAnExitAnchor(I),this.exitAnchor=I):this.createExitAnchor()},R.prototype.move=function(I){var A=this.modules&&this.modules[this.currentModuleIx];if(A&&A.terminate&&A.terminate(I),this.chart.focusElement&&this.chart.focusElement.removeFocusBorder(),this.currentModuleIx+=I,A=this.modules&&this.modules[this.currentModuleIx]){if(A.validate&&!A.validate())return this.move(I);if(A.init)return A.init(I),!0}return this.currentModuleIx=0,this.exiting=!0,0<I?this.exitAnchor&&this.exitAnchor.focus():this.tabindexContainer.focus(),!1},R.prototype.onFocus=function(I){I=I.relatedTarget&&this.chart.container.contains(I.relatedTarget),this.exiting||this.tabbingInBackwards||this.isClickingChart||I||null!==(I=this.getFirstValidModuleIx())&&(this.currentModuleIx=I,this.modules[I].init(1)),this.exiting=!1},R.prototype.onMouseUp=function(I){if(delete this.isClickingChart,!this.keyboardReset&&I.relatedTarget!==st){if(I=this.chart,!this.pointerIsOverChart){var A=this.modules&&this.modules[this.currentModuleIx||0];A&&A.terminate&&A.terminate(),this.currentModuleIx=0}I.focusElement&&(I.focusElement.removeFocusBorder(),delete I.focusElement),this.keyboardReset=!0}},R.prototype.onKeydown=function(I){I=I||Rt.event;var x,A=this.modules&&this.modules.length&&this.modules[this.currentModuleIx];if(this.exiting=this.keyboardReset=!1,A){var T=A.run(I);T===A.response.success?x=!0:T===A.response.prev?x=this.move(-1):T===A.response.next&&(x=this.move(1)),x&&(I.preventDefault(),I.stopPropagation())}},R.prototype.updateContainerTabindex=function(){var I=this.chart.options.accessibility;I=!((I=I&&I.keyboardNavigation)&&!1===I.enabled);var A=this.chart,x=A.container;A.renderTo.hasAttribute("tabindex")&&(x.removeAttribute("tabindex"),x=A.renderTo),this.tabindexContainer=x;var T=x.getAttribute("tabindex");I&&!T?x.setAttribute("tabindex","0"):I||A.container.removeAttribute("tabindex")},R.prototype.createExitAnchor=function(){var I=this.chart,A=this.exitAnchor=Ut.createElement("div");I.renderTo.appendChild(A),this.makeElementAnExitAnchor(A)},R.prototype.makeElementAnExitAnchor=function(I){var A=this.tabindexContainer.getAttribute("tabindex")||0;I.setAttribute("class","highcharts-exit-anchor"),I.setAttribute("tabindex",A),I.setAttribute("aria-hidden",!1),this.addExitAnchorEventsToEl(I)},R.prototype.removeExitAnchor=function(){this.exitAnchor&&this.exitAnchor.parentNode&&(this.exitAnchor.parentNode.removeChild(this.exitAnchor),delete this.exitAnchor)},R.prototype.addExitAnchorEventsToEl=function(I){var A=this.chart,x=this;this.eventProvider.addEvent(I,"focus",function(T){var j=!((T=T||Rt.event).relatedTarget&&A.container.contains(T.relatedTarget)||x.exiting);A.focusElement&&delete A.focusElement,j?(x.tabbingInBackwards=!0,x.tabindexContainer.focus(),delete x.tabbingInBackwards,T.preventDefault(),x.modules&&x.modules.length&&(x.currentModuleIx=x.modules.length-1,(T=x.modules[x.currentModuleIx])&&T.validate&&!T.validate()?x.move(-1):T&&T.init(-1))):x.exiting=!1})},R.prototype.getFirstValidModuleIx=function(){for(var I=this.modules.length,A=0;A<I;++A){var x=this.modules[A];if(!x.validate||x.validate())return A}return null},R.prototype.destroy=function(){this.removeExitAnchor(),this.eventProvider.removeAddedEvents(),this.chart.container.removeAttribute("tabindex")},R}())||(xt={})),xt}),te(vt,"Accessibility/Components/LegendComponent.js",[vt["Core/Animation/AnimationUtilities.js"],vt["Core/Globals.js"],vt["Core/Legend/Legend.js"],vt["Core/Utilities.js"],vt["Accessibility/AccessibilityComponent.js"],vt["Accessibility/KeyboardNavigationHandler.js"],vt["Accessibility/Utils/ChartUtilities.js"],vt["Accessibility/Utils/HTMLUtilities.js"]],function(Ct,wt,xt,jt,zt,Ut,Rt,It){function K(N){var G=N.legend&&N.legend.allItems,v=N.options.legend.accessibility||{};return N=N.colorAxis&&N.colorAxis.some(function(M){return!M.dataClasses||!M.dataClasses.length}),!(!G||!G.length||N||!1===v.enabled)}function et(N,G){var v=G.legendItem||{};G.setState(N?"hover":"",!0),G=0;for(var M=["group","label","symbol"];G<M.length;G++){var b=v[M[G]];(b=b&&b.element||b)&&x(b,N?"mouseover":"mouseout")}}var N,st=this&&this.__extends||(N=function(G,v){return(N=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(M,b){M.__proto__=b}||function(M,b){for(var k in b)b.hasOwnProperty(k)&&(M[k]=b[k])})(G,v)},function(G,v){function M(){this.constructor=G}N(G,v),G.prototype=null===v?Object.create(v):(M.prototype=v.prototype,new M)}),R=Ct.animObject,I=wt.doc,A=jt.addEvent,x=jt.fireEvent,T=jt.isNumber,j=jt.pick,V=jt.syncTimeout,nt=Rt.getChartTitle,w=It.stripHTMLTagsFromString,l=It.addClass,it=It.removeClass;return Ct=function(N){function G(){var v=null!==N&&N.apply(this,arguments)||this;return v.highlightedLegendItemIx=NaN,v.proxyGroup=null,v}return st(G,N),G.prototype.init=function(){var v=this;this.recreateProxies(),this.addEvent(xt,"afterScroll",function(){this.chart===v.chart&&(v.proxyProvider.updateGroupProxyElementPositions("legend"),v.updateLegendItemProxyVisibility(),-1<v.highlightedLegendItemIx&&this.chart.highlightLegendItem(v.highlightedLegendItemIx))}),this.addEvent(xt,"afterPositionItem",function(M){this.chart===v.chart&&this.chart.renderer&&v.updateProxyPositionForItem(M.item)}),this.addEvent(xt,"afterRender",function(){this.chart===v.chart&&this.chart.renderer&&v.recreateProxies()&&V(function(){return v.proxyProvider.updateGroupProxyElementPositions("legend")},R(j(this.chart.renderer.globalAnimation,!0)).duration)})},G.prototype.updateLegendItemProxyVisibility=function(){var _,v=this.chart,M=v.legend,b=M.currentPage||1,k=M.clipHeight||0;(M.allItems||[]).forEach(function(y){if(y.a11yProxyElement){var O=M.pages&&M.pages.length,B=y.a11yProxyElement.element,H=!1;_=y.legendItem||{},O&&(y=_.pageIx||0,H=(O=_.y||0)+(H=_.label?Math.round(_.label.getBBox().height):0)-M.pages[y]>k||y!==b-1),H?v.styledMode?l(B,"highcharts-a11y-invisible"):B.style.visibility="hidden":(it(B,"highcharts-a11y-invisible"),B.style.visibility="")}})},G.prototype.onChartRender=function(){K(this.chart)||this.removeProxies()},G.prototype.highlightAdjacentLegendPage=function(v){var M=this.chart,b=M.legend,k=b.pages||[];if(0<(v=(b.currentPage||1)+v)&&v<=k.length)for(var _=k=0,y=b.allItems;_<y.length;_++)((y[_].legendItem||{}).pageIx||0)+1===v&&(b=M.highlightLegendItem(k))&&(this.highlightedLegendItemIx=k),++k},G.prototype.updateProxyPositionForItem=function(v){v.a11yProxyElement&&v.a11yProxyElement.refreshPosition()},G.prototype.recreateProxies=function(){var v=I.activeElement,M=this.proxyGroup;return v=v&&M&&M.contains(v),this.removeProxies(),!!K(this.chart)&&(this.addLegendProxyGroup(),this.proxyLegendItems(),this.updateLegendItemProxyVisibility(),this.updateLegendTitle(),v&&this.chart.highlightLegendItem(this.highlightedLegendItemIx),!0)},G.prototype.removeProxies=function(){this.proxyProvider.removeGroup("legend")},G.prototype.updateLegendTitle=function(){var v=this.chart,M=w((v.legend&&v.legend.options.title&&v.legend.options.title.text||"").replace(/<br ?\/?>/g," "));v=v.langFormat("accessibility.legend.legendLabel"+(M?"":"NoTitle"),{chart:v,legendTitle:M,chartTitle:nt(v)}),this.proxyProvider.updateGroupAttrs("legend",{"aria-label":v})},G.prototype.addLegendProxyGroup=function(){this.proxyGroup=this.proxyProvider.addGroup("legend","ul",{"aria-label":"_placeholder_",role:"all"===this.chart.options.accessibility.landmarkVerbosity?"region":null})},G.prototype.proxyLegendItems=function(){var M,v=this;((this.chart.legend||{}).allItems||[]).forEach(function(b){(M=b.legendItem||{}).label&&M.label.element&&v.proxyLegendItem(b)})},G.prototype.proxyLegendItem=function(v){var M=v.legendItem||{};if(M.label&&M.group){var b=this.chart.langFormat("accessibility.legend.legendItem",{chart:this.chart,itemName:w(v.name),item:v});v.a11yProxyElement=this.proxyProvider.addProxyElement("legend",{click:M.label,visual:(M.group.div?M.label:M.group).element},{tabindex:-1,"aria-pressed":v.visible,"aria-label":b})}},G.prototype.getKeyboardNavigation=function(){var v=this.keyCodes,M=this,b=this.chart;return new Ut(b,{keyCodeMap:[[[v.left,v.right,v.up,v.down],function(k){return M.onKbdArrowKey(this,k)}],[[v.enter,v.space],function(){return M.onKbdClick(this)}],[[v.pageDown,v.pageUp],function(k){return M.highlightAdjacentLegendPage(k===v.pageDown?1:-1),this.response.success}]],validate:function(){return M.shouldHaveLegendNavigation()},init:function(){b.highlightLegendItem(0),M.highlightedLegendItemIx=0},terminate:function(){M.highlightedLegendItemIx=-1,b.legend.allItems.forEach(function(k){return et(!1,k)})}})},G.prototype.onKbdArrowKey=function(v,M){var b=this.keyCodes,k=v.response,_=this.chart,y=_.options.accessibility,O=_.legend.allItems.length;return _.highlightLegendItem(this.highlightedLegendItemIx+(M=M===b.left||M===b.up?-1:1))?(this.highlightedLegendItemIx+=M,k.success):(1<O&&y.keyboardNavigation.wrapAround&&v.init(M),k.success)},G.prototype.onKbdClick=function(v){var M=this.chart.legend.allItems[this.highlightedLegendItemIx];return M&&M.a11yProxyElement&&M.a11yProxyElement.click(),v.response.success},G.prototype.shouldHaveLegendNavigation=function(){if(!K(this.chart))return!1;var v=this.chart,M=(v.options.legend||{}).accessibility||{};return!!(v.legend.display&&M.keyboardNavigation&&M.keyboardNavigation.enabled)},G}(zt),function(N){function G(b){var k=this.legend.allItems,_=this.accessibility&&this.accessibility.components.legend.highlightedLegendItemIx,y=k[b],O=y.legendItem||{};return!!y&&(T(_)&&k[_]&&et(!1,k[_]),_=(k=this.legend).currentPage,typeof(b=(k.allItems[b].legendItem||{}).pageIx)<"u"&&b+1!==_&&k.scroll(1+b-_),b=y.a11yProxyElement&&y.a11yProxyElement.buttonElement,(O=O.label)&&O.element&&b&&this.setFocusToElement(O,b),et(!0,y),!0)}function v(b){var k=b.item;this.chart.options.accessibility.enabled&&k&&k.a11yProxyElement&&k.a11yProxyElement.buttonElement.setAttribute("aria-pressed",b.visible?"true":"false")}var M=[];N.compose=function(b,k){-1===M.indexOf(b)&&(M.push(b),b.prototype.highlightLegendItem=G),-1===M.indexOf(k)&&(M.push(k),A(k,"afterColorizeItem",v))}}(Ct||(Ct={})),Ct}),te(vt,"Accessibility/Components/SeriesComponent/SeriesDescriber.js",[vt["Accessibility/Components/AnnotationsA11y.js"],vt["Accessibility/Utils/ChartUtilities.js"],vt["Core/FormatUtilities.js"],vt["Accessibility/Utils/HTMLUtilities.js"],vt["Core/Utilities.js"]],function(Ct,wt,xt,jt,zt){function Rt(y){var O=y.chart.options.accessibility.series.pointDescriptionEnabledThreshold;return!!(!1!==O&&y.points&&y.points.length>=O)}function et(y,O){var B=y.series,H=B.chart;y=H.options.accessibility.point||{};var at=B.options.accessibility&&B.options.accessibility.point||{};return B=B.tooltipOptions||{},H=H.options.lang,b(O)?N(O,at.valueDecimals||y.valueDecimals||B.valueDecimals||-1,H.decimalPoint,H.accessibility.thousandsSep||H.thousandsSep):O}function R(y,O){return y.chart.langFormat("accessibility.series."+O+"Description",{name:V(y[O]),series:y})}function A(y){var O=y.series,B=1<O.chart.series.length||O.options.name,H=y.series,at=H.chart,ft=H.options.accessibility;if(ft=ft&&ft.point&&ft.point.valueDescriptionFormat||at.options.accessibility.point.valueDescriptionFormat,H=k(H.xAxis&&H.xAxis.options.accessibility&&H.xAxis.options.accessibility.enabled,!at.angular)){var rt=y.series,z=rt.chart,q=rt.options.accessibility&&rt.options.accessibility.point||{},mt=z.options.accessibility.point||{};(rt=rt.xAxis&&rt.xAxis.dateTime)?(rt=rt.getXDateFormat(y.x||0,z.options.tooltip.dateTimeLabelFormats),q=q.dateFormatter&&q.dateFormatter(y)||mt.dateFormatter&&mt.dateFormatter(y)||q.dateFormat||mt.dateFormat||rt,z=z.time.dateFormat(q,y.x||0,void 0)):z=void 0,q=(y.series.xAxis||{}).categories&&_(y.category)&&(""+y.category).replace("<br/>"," "),mt=_(y.id)&&0>(""+y.id).indexOf("highcharts-"),rt="x, "+y.x,z=y.name||z||q||(mt?y.id:rt)}else z="";q=_(y.index)?y.index+1:"";var pt=(mt=y.series).chart.options.accessibility.point||{},dt=mt.chart.options.accessibility&&mt.chart.options.accessibility.point||{},Y=mt.tooltipOptions||{};return rt=dt.valuePrefix||pt.valuePrefix||Y.valuePrefix||"",pt=dt.valueSuffix||pt.valueSuffix||Y.valueSuffix||"",dt=et(y,y[typeof y.value<"u"?"value":"y"]),mt=y.isNull?mt.chart.langFormat("accessibility.series.nullPointValue",{point:y}):mt.pointArrayMap?function I(y,O,B){var H=O||"",at=B||"";return y.series.pointArrayMap.reduce(function(ft,rt){ft+=ft.length?", ":"";var z=et(y,k(y[rt],y.options[rt]));return ft+(rt+": ")+H+z+at},"")}(y,rt,pt):rt+dt+pt,at=it(ft,{point:y,index:q,xDescription:z,value:mt,separator:H?", ":""},at),ft=(ft=y.options&&y.options.accessibility&&y.options.accessibility.description)?" "+ft:"",O=B?" "+O.name+".":"",B=y.series.chart,z={point:y,annotations:H=j(y)},B=H.length?B.langFormat("accessibility.series.pointAnnotationsDescription",z):"",y.accessibility=y.accessibility||{},y.accessibility.valueDescription=at,at+ft+O+(B?" "+B:"")}function T(y){var O=y.chart,B=O.types||[],H=function st(y){var O=(y.options.accessibility||{}).description;return O&&y.chart.langFormat("accessibility.series.description",{description:O,series:y})||""}(y),at=function(mt){return O[mt]&&1<O[mt].length&&y[mt]},ft=y.index+1,rt=R(y,"xAxis"),z=R(y,"yAxis"),q={seriesNumber:ft,series:y,chart:O};return q=O.langFormat("accessibility.series.summary."+y.type+(B=1<B.length?"Combination":""),q)||O.langFormat("accessibility.series.summary.default"+B,q),at=(at("yAxis")?" "+z+".":"")+(at("xAxis")?" "+rt+".":""),it(O.options.accessibility.series.descriptionFormat||"",{seriesDescription:q,authorDescription:H?" "+H:"",axisDescription:at,series:y,chart:O,seriesNumber:ft},void 0)}var j=Ct.getPointAnnotationTexts,V=wt.getAxisDescription,nt=wt.getSeriesFirstPointElement,w=wt.getSeriesA11yElement,l=wt.unhideChartElementFromAT,it=xt.format,N=xt.numberFormat,G=jt.reverseChildNodes,v=jt.stripHTMLTagsFromString,M=zt.find,b=zt.isNumber,k=zt.pick,_=zt.defined;return{defaultPointDescriptionFormatter:A,defaultSeriesDescriptionFormatter:T,describeSeries:function(y){var O=y.chart,B=nt(y),H=w(y),at=O.is3d&&O.is3d();H&&(H.lastChild!==B||at||G(H),function x(y){var O=function It(y){var O=y.options.accessibility||{};return!Rt(y)&&!O.exposeAsGroupOnly}(y),B=function K(y){var O=y.chart.options.accessibility.keyboardNavigation.seriesNavigation;return!(!y.points||!(y.points.length<O.pointNavigationEnabledThreshold||!1===O.pointNavigationEnabledThreshold))}(y),H=y.chart.options.accessibility.point.describeNull;(O||B)&&y.points.forEach(function(at){var ft;if(!(ft=at.graphic&&at.graphic.element)){var rt=at.series;if(ft=rt&&rt.chart,rt=rt&&rt.is("sunburst"),ft=ft&&ft.options.accessibility.point.describeNull,ft=at.isNull&&!rt&&ft){rt=at.series;var z=function Ut(y){var O=y.index;return y.series&&y.series.data&&_(O)&&M(y.series.data,function(B){return!!(B&&typeof B.index<"u"&&B.index>O&&B.graphic&&B.graphic.element)})||null}(at);rt=(ft=z&&z.graphic)?ft.parentGroup:rt.graph||rt.group,z=z?{x:k(at.plotX,z.plotX,0),y:k(at.plotY,z.plotY,0)}:{x:k(at.plotX,0),y:k(at.plotY,0)},(z=at.series.chart.renderer.rect(z.x,z.y,1,1)).attr({class:"highcharts-a11y-mock-point",fill:"none",opacity:0,"fill-opacity":0,"stroke-opacity":0}),rt&&rt.element?(at.graphic=z,at.hasMockGraphic=!0,z.add(rt),rt.element.insertBefore(z.element,ft?ft.element:null),ft=z.element):ft=void 0}}rt=at.options&&at.options.accessibility&&!1===at.options.accessibility.enabled,ft&&(at.isNull&&!H?ft.setAttribute("aria-hidden",!0):(ft.setAttribute("tabindex","-1"),y.chart.styledMode||(ft.style.outline="none"),O&&!rt?(rt=(z=at.series).chart.options.accessibility.point||{},at=v((z=z.options.accessibility&&z.options.accessibility.point||{}).descriptionFormatter&&z.descriptionFormatter(at)||rt.descriptionFormatter&&rt.descriptionFormatter(at)||A(at)),ft.setAttribute("role","img"),ft.setAttribute("aria-label",at)):ft.setAttribute("aria-hidden",!0)))})}(y),l(O,H),O=(at=y.chart).options.chart,B=1<at.series.length,at=at.options.accessibility.series.describeSingleSeries,O.options3d&&O.options3d.enabled&&B||!(B||at||(y.options.accessibility||{}).exposeAsGroupOnly||Rt(y))?H.removeAttribute("aria-label"):(B=(O=y.chart.options.accessibility).landmarkVerbosity,H.setAttribute("role",(y.options.accessibility||{}).exposeAsGroupOnly?"img":"all"===B?"region":"group"),H.setAttribute("tabindex","-1"),y.chart.styledMode||(H.style.outline="none"),H.setAttribute("aria-label",v(O.series.descriptionFormatter&&O.series.descriptionFormatter(y)||T(y)))))}}}),te(vt,"Accessibility/Components/SeriesComponent/NewDataAnnouncer.js",[vt["Core/Globals.js"],vt["Core/Utilities.js"],vt["Accessibility/Utils/Announcer.js"],vt["Accessibility/Utils/ChartUtilities.js"],vt["Accessibility/Utils/EventProvider.js"],vt["Accessibility/Components/SeriesComponent/SeriesDescriber.js"]],function(Ct,wt,xt,jt,zt,Ut){var K=wt.addEvent,et=wt.defined,st=jt.getChartTitle,R=Ut.defaultPointDescriptionFormatter,I=Ut.defaultSeriesDescriptionFormatter;return function(A){function x(j){var V=this.chart,nt=this.newDataAnnouncer;nt&&nt.chart===V&&V.options.accessibility.announceNewData.enabled&&(nt.dirty.newPoint=et(nt.dirty.newPoint)?void 0:j.point)}function T(){var j=this.chart,V=this.newDataAnnouncer;V&&V.chart===j&&j.options.accessibility.announceNewData.enabled&&(V.dirty.hasDirty=!0,V.dirty.allSeries[this.name+this.index]=this)}A.composedClasses=[],A.compose=function(j){-1===A.composedClasses.indexOf(j)&&(A.composedClasses.push(j),K(j,"addPoint",x),K(j,"updatedData",T))}}((wt=function(){function A(x){this.announcer=void 0,this.dirty={allSeries:{}},this.eventProvider=void 0,this.lastAnnouncementTime=0,this.chart=x}return A.prototype.init=function(){var x=this.chart,T=x.options.accessibility.announceNewData.interruptUser?"assertive":"polite";this.lastAnnouncementTime=0,this.dirty={allSeries:{}},this.eventProvider=new zt,this.announcer=new xt(x,T),this.addEventListeners()},A.prototype.destroy=function(){this.eventProvider.removeAddedEvents(),this.announcer.destroy()},A.prototype.addEventListeners=function(){var x=this,T=this.chart,j=this.eventProvider;j.addEvent(T,"afterApplyDrilldown",function(){x.lastAnnouncementTime=0}),j.addEvent(T,"afterAddSeries",function(V){x.onSeriesAdded(V.series)}),j.addEvent(T,"redraw",function(){x.announceDirtyData()})},A.prototype.onSeriesAdded=function(x){this.chart.options.accessibility.announceNewData.enabled&&(this.dirty.hasDirty=!0,this.dirty.allSeries[x.name+x.index]=x,this.dirty.newSeries=et(this.dirty.newSeries)?void 0:x)},A.prototype.announceDirtyData=function(){var x=this;if(this.chart.options.accessibility.announceNewData&&this.dirty.hasDirty){var T=this.dirty.newPoint;T&&(T=function Rt(A){var x=A.series.data.filter(function(T){return A.x===T.x&&A.y===T.y});return 1===x.length?x[0]:A}(T)),this.queueAnnouncement(Object.keys(this.dirty.allSeries).map(function(j){return x.dirty.allSeries[j]}),this.dirty.newSeries,T),this.dirty={allSeries:{}}}},A.prototype.queueAnnouncement=function(x,T,j){var V=this,nt=this.chart.options.accessibility.announceNewData;if(nt.enabled){var w=+new Date;nt=Math.max(0,nt.minAnnounceInterval-(w-this.lastAnnouncementTime)),x=function It(A,x){var T=(A||[]).concat(x||[]).reduce(function(j,V){return j[V.name+V.index]=V,j},{});return Object.keys(T).map(function(j){return T[j]})}(this.queuedAnnouncement&&this.queuedAnnouncement.series,x),(T=this.buildAnnouncementMessage(x,T,j))&&(this.queuedAnnouncement&&clearTimeout(this.queuedAnnouncementTimer),this.queuedAnnouncement={time:w,message:T,series:x},this.queuedAnnouncementTimer=setTimeout(function(){V&&V.announcer&&(V.lastAnnouncementTime=+new Date,V.announcer.announce(V.queuedAnnouncement.message),delete V.queuedAnnouncement,delete V.queuedAnnouncementTimer)},nt))}},A.prototype.buildAnnouncementMessage=function(x,T,j){var V=this.chart,nt=V.options.accessibility.announceNewData;return nt.announcementFormatter&&!1!==(x=nt.announcementFormatter(x,T,j))?x.length?x:null:(x=Ct.charts&&1<Ct.charts.length?"Multiple":"Single",x=T?"newSeriesAnnounce"+x:j?"newPointAnnounce"+x:"newDataAnnounce",nt=st(V),V.langFormat("accessibility.announceNewData."+x,{chartTitle:nt,seriesDesc:T?I(T):null,pointDesc:j?R(j):null,point:j,series:T}))},A}())||(wt={})),wt}),te(vt,"Accessibility/ProxyElement.js",[vt["Core/Globals.js"],vt["Core/Utilities.js"],vt["Accessibility/Utils/EventProvider.js"],vt["Accessibility/Utils/ChartUtilities.js"],vt["Accessibility/Utils/HTMLUtilities.js"]],function(Ct,wt,xt,jt,zt){var Ut=Ct.doc,Rt=wt.attr,It=wt.css,K=wt.merge,et=jt.fireEventOnWrappedOrUnwrappedElement,st=zt.cloneMouseEvent,R=zt.cloneTouchEvent,I=zt.getFakeMouseEvent,A=zt.removeElement;return function(){function x(T,j,V,nt){this.chart=T,this.target=j,this.groupType=V,V="ul"===V,this.eventProvider=new xt;var w=V?Ut.createElement("li"):null,l=this.buttonElement=Ut.createElement("button");T.styledMode||this.hideButtonVisually(l),w?(V&&!T.styledMode&&(w.style.listStyle="none"),w.appendChild(l),this.element=w):this.element=l,this.updateTarget(j,nt)}return x.prototype.click=function(){var T=this.getTargetPosition();T.x+=T.width/2,T.y+=T.height/2,T=I("click",T),et(this.target.click,T)},x.prototype.updateTarget=function(T,j){this.target=T,this.updateCSSClassName();var V=j||{};Object.keys(V).forEach(function(nt){null===V[nt]&&delete V[nt]}),Rt(this.buttonElement,K({"aria-label":this.getTargetAttr(T.click,"aria-label")},V)),this.eventProvider.removeAddedEvents(),this.addProxyEventsToButton(this.buttonElement,T.click),this.refreshPosition()},x.prototype.refreshPosition=function(){var T=this.getTargetPosition();It(this.buttonElement,{width:(T.width||1)+"px",height:(T.height||1)+"px",left:(Math.round(T.x)||0)+"px",top:(Math.round(T.y)||0)+"px"})},x.prototype.remove=function(){this.eventProvider.removeAddedEvents(),A(this.element)},x.prototype.updateCSSClassName=function(){var T=this.chart.legend;T=-1<((T=T.group&&T.group.div)&&T.className||"").indexOf("highcharts-no-tooltip");var j=-1<(this.getTargetAttr(this.target.click,"class")||"").indexOf("highcharts-no-tooltip");this.buttonElement.className=T||j?"highcharts-a11y-proxy-button highcharts-no-tooltip":"highcharts-a11y-proxy-button"},x.prototype.addProxyEventsToButton=function(T,j){var V=this;"click touchstart touchend touchcancel touchmove mouseover mouseenter mouseleave mouseout".split(" ").forEach(function(nt){var w=0===nt.indexOf("touch");V.eventProvider.addEvent(T,nt,function(l){var it=w?R(l):st(l);j&&et(j,it),l.stopPropagation(),w||l.preventDefault()},{passive:!1})})},x.prototype.hideButtonVisually=function(T){It(T,{borderWidth:0,backgroundColor:"transparent",cursor:"pointer",outline:"none",opacity:.001,filter:"alpha(opacity=1)",zIndex:999,overflow:"hidden",padding:0,margin:0,display:"block",position:"absolute","-ms-filter":"progid:DXImageTransform.Microsoft.Alpha(Opacity=1)"})},x.prototype.getTargetPosition=function(){var T=this.target.click;if(T=T.element?T.element:T,T=this.target.visual||T,this.chart.renderTo&&T&&T.getBoundingClientRect){T=T.getBoundingClientRect();var j=this.chart.pointer.getChartPosition();return{x:(T.left-j.left)/j.scaleX,y:(T.top-j.top)/j.scaleY,width:T.right/j.scaleX-T.left/j.scaleX,height:T.bottom/j.scaleY-T.top/j.scaleY}}return{x:0,y:0,width:1,height:1}},x.prototype.getTargetAttr=function(T,j){return T.element?T.element.getAttribute(j):T.getAttribute(j)},x}()}),te(vt,"Accessibility/ProxyProvider.js",[vt["Core/Globals.js"],vt["Core/Utilities.js"],vt["Accessibility/Utils/ChartUtilities.js"],vt["Accessibility/Utils/DOMElementProvider.js"],vt["Accessibility/Utils/HTMLUtilities.js"],vt["Accessibility/ProxyElement.js"]],function(Ct,wt,xt,jt,zt,Ut){var Rt=Ct.doc,It=wt.attr,K=wt.css,et=xt.unhideChartElementFromAT,st=zt.removeElement,R=zt.removeChildNodes;return function(){function I(A){this.chart=A,this.domElementProvider=new jt,this.groups={},this.groupOrder=[],this.beforeChartProxyPosContainer=this.createProxyPosContainer("before"),this.afterChartProxyPosContainer=this.createProxyPosContainer("after"),this.update()}return I.prototype.addProxyElement=function(A,x,T){var j=this.groups[A];if(!j)throw Error("ProxyProvider.addProxyElement: Invalid group key "+A);return A=new Ut(this.chart,x,j.type,T),j.proxyContainerElement.appendChild(A.element),j.proxyElements.push(A),A},I.prototype.addGroup=function(A,x,T){var j=this.groups[A];if(j)return j.groupElement;if(j=this.domElementProvider.createElement(x),T&&T.role&&"div"!==x){var V=this.domElementProvider.createElement("div");V.appendChild(j)}else V=j;return V.className="highcharts-a11y-proxy-group highcharts-a11y-proxy-group-"+A.replace(/\W/g,"-"),this.groups[A]={proxyContainerElement:j,groupElement:V,type:x,proxyElements:[]},It(V,T||{}),"ul"===x&&j.setAttribute("role","list"),this.afterChartProxyPosContainer.appendChild(V),this.updateGroupOrder(this.groupOrder),V},I.prototype.updateGroupAttrs=function(A,x){var T=this.groups[A];if(!T)throw Error("ProxyProvider.updateGroupAttrs: Invalid group key "+A);It(T.groupElement,x)},I.prototype.updateGroupOrder=function(A){var x=this;if(this.groupOrder=A.slice(),!this.isDOMOrderGroupOrder()){var T=A.indexOf("series"),j=-1<T?A.slice(0,T):A,V=-1<T?A.slice(T+1):[];A=Rt.activeElement,["before","after"].forEach(function(nt){var w=x["before"===nt?"beforeChartProxyPosContainer":"afterChartProxyPosContainer"];nt="before"===nt?j:V,R(w),nt.forEach(function(l){(l=x.groups[l])&&w.appendChild(l.groupElement)})}),(this.beforeChartProxyPosContainer.contains(A)||this.afterChartProxyPosContainer.contains(A))&&A&&A.focus&&A.focus()}},I.prototype.clearGroup=function(A){var x=this.groups[A];if(!x)throw Error("ProxyProvider.clearGroup: Invalid group key "+A);R(x.proxyContainerElement)},I.prototype.removeGroup=function(A){var x=this.groups[A];x&&(st(x.groupElement),delete this.groups[A])},I.prototype.update=function(){this.updatePosContainerPositions(),this.updateGroupOrder(this.groupOrder),this.updateProxyElementPositions()},I.prototype.updateProxyElementPositions=function(){Object.keys(this.groups).forEach(this.updateGroupProxyElementPositions.bind(this))},I.prototype.updateGroupProxyElementPositions=function(A){(A=this.groups[A])&&A.proxyElements.forEach(function(x){return x.refreshPosition()})},I.prototype.destroy=function(){this.domElementProvider.destroyCreatedElements()},I.prototype.createProxyPosContainer=function(A){var x=this.domElementProvider.createElement("div");return x.setAttribute("aria-hidden","false"),x.className="highcharts-a11y-proxy-container"+(A?"-"+A:""),K(x,{top:"0",left:"0"}),this.chart.styledMode||(x.style.whiteSpace="nowrap",x.style.position="absolute"),x},I.prototype.getCurrentGroupOrderInDOM=function(){var A=this,x=function(j){var V=[];j=j.children;for(var nt=0;nt<j.length;++nt){t:{for(var w=j[nt],l=Object.keys(A.groups),it=l.length;it--;){var N=l[it],G=A.groups[N];if(G&&w===G.groupElement){w=N;break t}}w=void 0}w&&V.push(w)}return V},T=x(this.beforeChartProxyPosContainer);return x=x(this.afterChartProxyPosContainer),T.push("series"),T.concat(x)},I.prototype.isDOMOrderGroupOrder=function(){var A=this,x=this.getCurrentGroupOrderInDOM(),T=this.groupOrder.filter(function(V){return"series"===V||!!A.groups[V]}),j=x.length;if(j!==T.length)return!1;for(;j--;)if(x[j]!==T[j])return!1;return!0},I.prototype.updatePosContainerPositions=function(){var A=this.chart;if(!A.renderer.forExport){var x=A.renderer.box;A.container.insertBefore(this.afterChartProxyPosContainer,x.nextSibling),A.container.insertBefore(this.beforeChartProxyPosContainer,x),et(this.chart,this.afterChartProxyPosContainer),et(this.chart,this.beforeChartProxyPosContainer)}},I}()}),te(vt,"Stock/RangeSelector/RangeSelectorDefaults.js",[],function(){return{lang:{rangeSelectorZoom:"Zoom",rangeSelectorFrom:"",rangeSelectorTo:"\u2192"},rangeSelector:{allButtonsEnabled:!1,buttons:void 0,buttonSpacing:5,dropdown:"responsive",enabled:void 0,verticalAlign:"top",buttonTheme:{width:28,height:18,padding:2,zIndex:7},floating:!1,x:0,y:0,height:void 0,inputBoxBorderColor:"none",inputBoxHeight:17,inputBoxWidth:void 0,inputDateFormat:"%b %e, %Y",inputDateParser:void 0,inputEditDateFormat:"%Y-%m-%d",inputEnabled:!0,inputPosition:{align:"right",x:0,y:0},inputSpacing:5,selected:void 0,buttonPosition:{align:"left",x:0,y:0},inputStyle:{color:"#335cad",cursor:"pointer"},labelStyle:{color:"#666666"}}}}),te(vt,"Stock/RangeSelector/RangeSelectorComposition.js",[vt["Core/Defaults.js"],vt["Stock/RangeSelector/RangeSelectorDefaults.js"],vt["Core/Utilities.js"]],function(Ct,wt,xt){function jt(){var G=this.range,v=G.type,M=this.max,b=this.chart.time,k=function(B,H){var at="year"===v?"FullYear":"Month",ft=new b.Date(B),rt=b.get(at,ft);return b.set(at,ft,rt+H),rt===b.get(at,ft)&&b.set("Date",ft,0),ft.getTime()-B};if(V(G))var _=M-G,y=G;else G&&(_=M+k(M,-(G.count||1)),this.chart&&(this.chart.fixedRange=M-_));var O=w(this.dataMin,Number.MIN_VALUE);return V(_)||(_=O),_<=O&&(_=O,typeof y>"u"&&(y=k(_,G.count)),this.newMax=Math.min(_+y,w(this.dataMax,Number.MAX_VALUE))),V(M)?!V(G)&&G&&G._offsetMin&&(_+=G._offsetMin):_=void 0,_}function zt(){this.options.rangeSelector&&this.options.rangeSelector.enabled&&(this.rangeSelector=new N(this))}function Ut(){var G=this.axes,v=this.rangeSelector;v&&(V(v.deferredYTDClick)&&(v.clickButton(v.deferredYTDClick),delete v.deferredYTDClick),G.forEach(function(M){M.updateNames(),M.setScale()}),this.getAxisMargins(),v.render(),G=v.options.verticalAlign,v.options.floating||("bottom"===G?this.extraBottomMargin=!0:"middle"!==G&&(this.extraTopMargin=!0)))}function Rt(G){var v,M,b,k,_=G.rangeSelector,y=function(){_&&(v=G.xAxis[0].getExtremes(),M=G.legend,k=_&&_.options.verticalAlign,V(v.min)&&_.render(v.min,v.max),M.display&&"top"===k&&k===M.options.verticalAlign&&((b=nt(G.spacingBox)).y="vertical"===M.options.layout?G.plotTop:b.y+_.getHeight(),M.group.placed=!1,M.align(b)))};_&&(j(l,function(O){return O[0]===G})||l.push([G,[A(G.xAxis[0],"afterSetExtremes",function(O){_&&_.render(O.min,O.max)}),A(G,"redraw",y)]]),y())}function It(){for(var G=0,v=l.length;G<v;++G){var M=l[G];if(M[0]===this){M[1].forEach(function(b){return b()}),l.splice(G,1);break}}}function K(){var G=this.rangeSelector;G&&(G=G.getHeight(),this.extraTopMargin&&(this.plotTop+=G),this.extraBottomMargin&&(this.marginBottom+=G))}function et(){var G=this.rangeSelector;G&&!G.options.floating&&(G.render(),"bottom"===(G=G.options.verticalAlign)?this.extraBottomMargin=!0:"middle"!==G&&(this.extraTopMargin=!0))}function st(G){var v=G.options.rangeSelector;G=this.extraBottomMargin;var M=this.extraTopMargin,b=this.rangeSelector;v&&v.enabled&&!x(b)&&this.options.rangeSelector&&(this.options.rangeSelector.enabled=!0,this.rangeSelector=b=new N(this)),this.extraTopMargin=this.extraBottomMargin=!1,b&&(Rt(this),v=v&&v.verticalAlign||b.options&&b.options.verticalAlign,b.options.floating||("bottom"===v?this.extraBottomMargin=!0:"middle"!==v&&(this.extraTopMargin=!0)),this.extraBottomMargin!==G||this.extraTopMargin!==M)&&(this.isDirtyBox=!0)}var N,R=Ct.defaultOptions,I=Ct.setOptions,A=xt.addEvent,x=xt.defined,T=xt.extend,j=xt.find,V=xt.isNumber,nt=xt.merge,w=xt.pick,l=[],it=[];return{compose:function(G,v,M){N=M,-1===it.indexOf(G)&&(it.push(G),G.prototype.minFromRange=jt),-1===it.indexOf(v)&&(it.push(v),A(v,"afterGetContainer",zt),A(v,"beforeRender",Ut),A(v,"destroy",It),A(v,"getMargins",K),A(v,"render",et),A(v,"update",st),v.prototype.callbacks.push(Rt)),-1===it.indexOf(I)&&(T(R,{rangeSelector:wt.rangeSelector}),T(R.lang,wt.lang))}}}),te(vt,"Stock/RangeSelector/RangeSelector.js",[vt["Core/Axis/Axis.js"],vt["Core/Defaults.js"],vt["Core/Globals.js"],vt["Stock/RangeSelector/RangeSelectorComposition.js"],vt["Core/Renderer/SVG/SVGElement.js"],vt["Core/Utilities.js"]],function(Ct,wt,xt,jt,zt,Ut){var It=wt.defaultOptions,K=Ut.addEvent,et=Ut.createElement,st=Ut.css,R=Ut.defined,I=Ut.destroyObjectProperties,A=Ut.discardElement,x=Ut.extend,T=Ut.fireEvent,j=Ut.isNumber,V=Ut.merge,nt=Ut.objectEach,w=Ut.pad,l=Ut.pick,it=Ut.pInt,N=Ut.splat;return wt=function(){function G(v){this.buttons=void 0,this.buttonOptions=G.prototype.defaultButtons,this.initialButtonGroupWidth=0,this.options=void 0,this.chart=v,this.init(v)}return G.compose=function(v,M){jt.compose(v,M,G)},G.prototype.clickButton=function(v,M){var b=this.chart,k=this.buttonOptions[v],_=b.xAxis[0],y=b.scroller&&b.scroller.getUnionExtremes()||_||{},O=k.type,B=k.dataGrouping,H=y.dataMin,at=y.dataMax,ft=_&&Math.round(Math.min(_.max,l(at,_.max)));y=k._range;var rt,z=!0;if(null!==H&&null!==at){if(b.fixedRange=y,this.setSelected(v),B&&(this.forcedDataGrouping=!0,Ct.prototype.setDataGrouping.call(_||{chart:this.chart},B,!1),this.frozenStates=k.preserveDataGrouping),"month"===O||"year"===O)if(_){var q=_.minFromRange.call(O={range:k,max:ft,chart:b,dataMin:H,dataMax:at});j(O.newMax)&&(ft=O.newMax),z=!1}else y=k;else if(y)q=Math.max(ft-y,H),ft=Math.min(q+y,at),z=!1;else if("ytd"===O){if(!_)return void(this.deferredYTDClick=v);(typeof at>"u"||typeof H>"u")&&(H=Number.MAX_VALUE,at=Number.MIN_VALUE,b.series.forEach(function(Y){(Y=Y.xData)&&(H=Math.min(Y[0],H),at=Math.max(Y[Y.length-1],at))}),M=!1),q=rt=(O=this.getYTDExtremes(at,H,b.time.useUTC)).min,ft=O.max}else"all"===O&&_&&(b.navigator&&b.navigator.baseSeries[0]&&(b.navigator.baseSeries[0].xAxis.options.range=void 0),q=H,ft=at);if(z&&k._offsetMin&&R(q)&&(q+=k._offsetMin),k._offsetMax&&R(ft)&&(ft+=k._offsetMax),this.dropdown&&(this.dropdown.selectedIndex=v+1),_)_.setExtremes(q,ft,l(M,!0),void 0,{trigger:"rangeSelectorButton",rangeSelectorButton:k});else{var mt=N(b.options.xAxis)[0],pt=mt.range;mt.range=y;var dt=mt.min;mt.min=rt,K(b,"load",function(){mt.range=pt,mt.min=dt})}T(this,"afterBtnClick")}},G.prototype.setSelected=function(v){this.selected=this.options.selected=v},G.prototype.init=function(v){var M=this,b=v.options.rangeSelector,k=b.buttons||M.defaultButtons.slice(),_=b.selected,y=function(){var O=M.minInput,B=M.maxInput;O&&O.blur&&T(O,"blur"),B&&B.blur&&T(B,"blur")};M.chart=v,M.options=b,M.buttons=[],M.buttonOptions=k,this.eventsToUnbind=[],this.eventsToUnbind.push(K(v.container,"mousedown",y)),this.eventsToUnbind.push(K(v,"resize",y)),k.forEach(M.computeButtonRange),typeof _<"u"&&k[_]&&this.clickButton(_,!1),this.eventsToUnbind.push(K(v,"load",function(){v.xAxis&&v.xAxis[0]&&K(v.xAxis[0],"setExtremes",function(O){this.max-this.min!==v.fixedRange&&"rangeSelectorButton"!==O.trigger&&"updatedData"!==O.trigger&&M.forcedDataGrouping&&!M.frozenStates&&this.setDataGrouping(!1,!1)})}))},G.prototype.updateButtonStates=function(){var v=this,M=this.chart,b=this.dropdown,k=M.xAxis[0],_=Math.round(k.max-k.min),y=!k.hasVisibleSeries,O=M.scroller&&M.scroller.getUnionExtremes()||k,B=O.dataMin,H=O.dataMax,at=(M=v.getYTDExtremes(H,B,M.time.useUTC)).min,ft=M.max,rt=v.selected,z=v.options.allButtonsEnabled,q=v.buttons,mt=j(rt);v.buttonOptions.forEach(function(pt,dt){var Y=pt._range,lt=pt.type,ht=pt.count||1,Lt=q[dt],At=pt._offsetMax-pt._offsetMin,Wt=dt===rt,Ot=Y>H-B,se=Y<k.minRange;pt=0;var _e=!1,We=!1;Y=Y===_,("month"===lt||"year"===lt)&&_+36e5>=864e5*{month:28,year:365}[lt]*ht-At&&_-36e5<=864e5*{month:31,year:366}[lt]*ht+At?Y=!0:"ytd"===lt?(Y=ft-at+At===_,_e=!Wt):"all"===lt&&(Y=k.max-k.min>=H-B,We=!Wt&&mt&&Y),ht=Wt&&Y||Y&&!mt&&!_e||Wt&&v.frozenStates,(lt=!z&&(Ot||se||We||y))?pt=3:ht&&(mt=!0,pt=2),Lt.state!==pt&&(Lt.setState(pt),b&&(b.options[dt+1].disabled=lt,2===pt&&(b.selectedIndex=dt+1)),0===pt&&rt===dt&&v.setSelected())})},G.prototype.computeButtonRange=function(v){var M=v.type,b=v.count||1,k={millisecond:1,second:1e3,minute:6e4,hour:36e5,day:864e5,week:6048e5};k[M]?v._range=k[M]*b:("month"===M||"year"===M)&&(v._range=864e5*{month:30,year:365}[M]*b),v._offsetMin=l(v.offsetMin,0),v._offsetMax=l(v.offsetMax,0),v._range+=v._offsetMax-v._offsetMin},G.prototype.getInputValue=function(v){var b=this.chart.time;return(v="min"===v?this.minInput:this.maxInput)?("text"===v.type&&this.chart.options.rangeSelector.inputDateParser||this.defaultInputDateParser)(v.value,b.useUTC,b):0},G.prototype.setInputValue=function(v,M){var b=this.options,k=this.chart.time,_="min"===v?this.minInput:this.maxInput;if(v="min"===v?this.minDateBox:this.maxDateBox,_){var y=_.getAttribute("data-hc-time");y=R(y)?Number(y):void 0,R(M)&&(R(y)&&_.setAttribute("data-hc-time-previous",y),_.setAttribute("data-hc-time",M),y=M),_.value=k.dateFormat(this.inputTypeFormats[_.type]||b.inputEditDateFormat,y),v&&v.attr({text:k.dateFormat(b.inputDateFormat,y)})}},G.prototype.setInputExtremes=function(v,M,b){if(v="min"===v?this.minInput:this.maxInput){var k=this.inputTypeFormats[v.type],_=this.chart.time;k&&(M=_.dateFormat(k,M),v.min!==M&&(v.min=M),b=_.dateFormat(k,b),v.max!==b&&(v.max=b))}},G.prototype.showInput=function(v){var M="min"===v?this.minDateBox:this.maxDateBox;if((v="min"===v?this.minInput:this.maxInput)&&M&&this.inputGroup){var b="text"===v.type,k=this.inputGroup,_=k.translateX;k=k.translateY;var y=this.options.inputBoxWidth;st(v,{width:b?M.width+(y?-2:20)+"px":"auto",height:b?M.height-2+"px":"auto",border:"2px solid silver"}),st(v,b&&y?{left:_+M.x+"px",top:k+"px"}:{left:Math.min(Math.round(M.x+_-(v.offsetWidth-M.width)/2),this.chart.chartWidth-v.offsetWidth)+"px",top:k-(v.offsetHeight-M.height)/2+"px"})}},G.prototype.hideInput=function(v){(v="min"===v?this.minInput:this.maxInput)&&st(v,{top:"-9999em",border:0,width:"1px",height:"1px"})},G.prototype.defaultInputDateParser=function(v,M,b){var _,k=v.split("/").join("-").split(" ").join("T");return-1===k.indexOf("T")&&(k+="T00:00"),M?k+="Z":((_=xt.isSafari)&&(_=!(6<(_=k).length&&(_.lastIndexOf("-")===_.length-6||_.lastIndexOf("+")===_.length-6))),_&&(k+=0>=(_=new Date(k).getTimezoneOffset()/60)?"+".concat(w(-_),":00"):"-".concat(w(_),":00"))),k=Date.parse(k),j(k)||(v=v.split("-"),k=Date.UTC(it(v[0]),it(v[1])-1,it(v[2]))),b&&M&&j(k)&&(k+=b.getTimezoneOffset(k)),k},G.prototype.drawInput=function(v){function M(){var q=y.maxInput,mt=y.minInput,pt=b.xAxis[0],dt=b.scroller&&b.scroller.xAxis?b.scroller.xAxis:pt,Y=dt.dataMin;dt=dt.dataMax;var lt=y.getInputValue(v);lt!==Number(rt.getAttribute("data-hc-time-previous"))&&j(lt)&&(rt.setAttribute("data-hc-time-previous",lt),at&&q&&j(Y)?lt>Number(q.getAttribute("data-hc-time"))?lt=void 0:lt<Y&&(lt=Y):mt&&j(dt)&&(lt<Number(mt.getAttribute("data-hc-time"))?lt=void 0:lt>dt&&(lt=dt)),typeof lt<"u"&&pt.setExtremes(at?lt:pt.min,at?pt.max:lt,void 0,void 0,{trigger:"rangeSelectorInput"}))}var b=this.chart,k=this.div,_=this.inputGroup,y=this,O=b.renderer.style||{},B=b.renderer,H=b.options.rangeSelector,at="min"===v,ft=It.lang[at?"rangeSelectorFrom":"rangeSelectorTo"]||"";ft=B.label(ft,0).addClass("highcharts-range-label").attr({padding:ft?2:0,height:ft?H.inputBoxHeight:0}).add(_),B=B.label("",0).addClass("highcharts-range-input").attr({padding:2,width:H.inputBoxWidth,height:H.inputBoxHeight,"text-align":"center"}).on("click",function(){y.showInput(v),y[v+"Input"].focus()}),b.styledMode||B.attr({stroke:H.inputBoxBorderColor,"stroke-width":1}),B.add(_);var rt=et("input",{name:v,className:"highcharts-range-selector"},void 0,k);rt.setAttribute("type",function Rt(G){if(-1!==G.indexOf("%L"))return"text";var v="aAdewbBmoyY".split("").some(function(b){return-1!==G.indexOf("%"+b)}),M="HkIlMS".split("").some(function(b){return-1!==G.indexOf("%"+b)});return v&&M?"datetime-local":v?"date":M?"time":"text"}(H.inputDateFormat||"%b %e, %Y")),b.styledMode||(ft.css(V(O,H.labelStyle)),B.css(V({color:"#333333"},O,H.inputStyle)),st(rt,x({position:"absolute",border:0,boxShadow:"0 0 15px rgba(0,0,0,0.3)",width:"1px",height:"1px",padding:0,textAlign:"center",fontSize:O.fontSize,fontFamily:O.fontFamily,top:"-9999em"},H.inputStyle))),rt.onfocus=function(){y.showInput(v)},rt.onblur=function(){rt===xt.doc.activeElement&&M(),y.hideInput(v),y.setInputValue(v),rt.blur()};var z=!1;return rt.onchange=function(){z||(M(),y.hideInput(v),rt.blur())},rt.onkeypress=function(q){13===q.keyCode&&M()},rt.onkeydown=function(q){z=!0,38!==q.keyCode&&40!==q.keyCode||M()},rt.onkeyup=function(){z=!1},{dateBox:B,input:rt,label:ft}},G.prototype.getPosition=function(){var v=this.chart,M=v.options.rangeSelector;return{buttonTop:(v="top"===M.verticalAlign?v.plotTop-v.axisOffset[0]:0)+M.buttonPosition.y,inputTop:v+M.inputPosition.y-10}},G.prototype.getYTDExtremes=function(v,M,b){var k=this.chart.time,_=new k.Date(v),y=k.get("FullYear",_);return b=b?k.Date.UTC(y,0,1):+new k.Date(y,0,1),M=Math.max(M,b),_=_.getTime(),{max:Math.min(v||_,_),min:M}},G.prototype.render=function(v,M){var b=this.chart,k=b.renderer,_=b.container,y=b.options,O=y.rangeSelector,B=l(y.chart.style&&y.chart.style.zIndex,0)+1;if(y=O.inputEnabled,!1!==O.enabled){if(this.rendered||(this.group=k.g("range-selector-group").attr({zIndex:7}).add(),this.div=et("div",void 0,{position:"relative",height:0,zIndex:B}),this.buttonOptions.length&&this.renderButtons(),_.parentNode&&_.parentNode.insertBefore(this.div,_),y&&(this.inputGroup=k.g("input-group").add(this.group),k=this.drawInput("min"),this.minDateBox=k.dateBox,this.minLabel=k.label,this.minInput=k.input,k=this.drawInput("max"),this.maxDateBox=k.dateBox,this.maxLabel=k.label,this.maxInput=k.input)),y&&(this.setInputValue("min",v),this.setInputValue("max",M),v=b.scroller&&b.scroller.getUnionExtremes()||b.xAxis[0]||{},R(v.dataMin)&&R(v.dataMax)&&(b=b.xAxis[0].minRange||0,this.setInputExtremes("min",v.dataMin,Math.min(v.dataMax,this.getInputValue("max"))-b),this.setInputExtremes("max",Math.max(v.dataMin,this.getInputValue("min"))+b,v.dataMax)),this.inputGroup)){var H=0;[this.minLabel,this.minDateBox,this.maxLabel,this.maxDateBox].forEach(function(at){if(at){var ft=at.getBBox().width;ft&&(at.attr({x:H}),H+=ft+O.inputSpacing)}})}this.alignElements(),this.rendered=!0}},G.prototype.renderButtons=function(){var v=this,M=this.buttons,b=this.options,k=It.lang,_=this.chart.renderer,y=V(b.buttonTheme),O=y&&y.states,B=y.width||28;delete y.width,delete y.states,this.buttonGroup=_.g("range-selector-buttons").add(this.group);var H=this.dropdown=et("select",void 0,{position:"absolute",width:"1px",height:"1px",padding:0,border:0,top:"-9999em",cursor:"pointer",opacity:1e-4},this.div);K(H,"touchstart",function(){H.style.fontSize="16px"}),[[xt.isMS?"mouseover":"mouseenter"],[xt.isMS?"mouseout":"mouseleave"],["change","click"]].forEach(function(at){var ft=at[0],rt=at[1];K(H,ft,function(){var z=M[v.currentButtonIndex()];z&&T(z.element,rt||ft)})}),this.zoomText=_.label(k&&k.rangeSelectorZoom||"",0).attr({padding:b.buttonTheme.padding,height:b.buttonTheme.height,paddingLeft:0,paddingRight:0}).add(this.buttonGroup),this.chart.styledMode||(this.zoomText.css(b.labelStyle),y["stroke-width"]=l(y["stroke-width"],0)),et("option",{textContent:this.zoomText.textStr,disabled:!0},void 0,H),this.buttonOptions.forEach(function(at,ft){et("option",{textContent:at.title||at.text},void 0,H),M[ft]=_.button(at.text,0,0,function(rt){var q,z=at.events&&at.events.click;z&&(q=z.call(at,rt)),!1!==q&&v.clickButton(ft),v.isActive=!0},y,O&&O.hover,O&&O.select,O&&O.disabled).attr({"text-align":"center",width:B}).add(v.buttonGroup),at.title&&M[ft].attr("title",at.title)})},G.prototype.alignElements=function(){var v=this,M=this.buttonGroup,b=this.buttons,k=this.chart,_=this.group,y=this.inputGroup,O=this.options,B=this.zoomText,H=k.options,at=H.exporting&&!1!==H.exporting.enabled&&H.navigation&&H.navigation.buttonOptions;H=O.buttonPosition;var ft=O.inputPosition,rt=O.verticalAlign,z=function(dt,Y){return at&&v.titleCollision(k)&&"top"===rt&&"right"===Y.align&&Y.y-dt.getBBox().height-12<(at.y||0)+(at.height||0)+k.spacing[0]?-40:0},q=k.plotLeft;if(_&&H&&ft){var mt=H.x-k.spacing[3];if(M){if(this.positionButtons(),!this.initialButtonGroupWidth){var pt=0;B&&(pt+=B.getBBox().width+5),b.forEach(function(dt,Y){pt+=dt.width,Y!==b.length-1&&(pt+=O.buttonSpacing)}),this.initialButtonGroupWidth=pt}q-=k.spacing[3],this.updateButtonStates(),B=z(M,H),this.alignButtonGroup(B),_.placed=M.placed=k.hasLoaded}M=0,y&&(M=z(y,ft),"left"===ft.align?mt=q:"right"===ft.align&&(mt=-Math.max(k.axisOffset[1],-M)),y.align({y:ft.y,width:y.getBBox().width,align:ft.align,x:ft.x+mt-2},!0,k.spacingBox),y.placed=k.hasLoaded),this.handleCollision(M),_.align({verticalAlign:rt},!0,k.spacingBox),y=_.alignAttr.translateY,M=_.getBBox().height+20,z=0,"bottom"===rt&&(z=y-(M=M+(z=(z=k.legend&&k.legend.options)&&"bottom"===z.verticalAlign&&z.enabled&&!z.floating?k.legend.legendHeight+l(z.margin,10):0)-20)-(O.floating?0:O.y)-(k.titleOffset?k.titleOffset[2]:0)-10),"top"===rt?(O.floating&&(z=0),k.titleOffset&&k.titleOffset[0]&&(z=k.titleOffset[0]),z+=k.margin[0]-k.spacing[0]||0):"middle"===rt&&(ft.y===H.y?z=y:(ft.y||H.y)&&(z=0>ft.y||0>H.y?z-Math.min(ft.y,H.y):y-M)),_.translate(O.x,O.y+Math.floor(z)),H=this.minInput,ft=this.maxInput,y=this.dropdown,O.inputEnabled&&H&&ft&&(H.style.marginTop=_.translateY+"px",ft.style.marginTop=_.translateY+"px"),y&&(y.style.marginTop=_.translateY+"px")}},G.prototype.alignButtonGroup=function(v,M){var b=this.chart,k=this.buttonGroup,_=this.options.buttonPosition,y=b.plotLeft-b.spacing[3],O=_.x-b.spacing[3];"right"===_.align?O+=v-y:"center"===_.align&&(O-=y/2),k&&k.align({y:_.y,width:l(M,this.initialButtonGroupWidth),align:_.align,x:O},!0,b.spacingBox)},G.prototype.positionButtons=function(){var v=this.buttons,M=this.chart,b=this.options,k=this.zoomText,_=M.hasLoaded?"animate":"attr",y=b.buttonPosition,O=M=M.plotLeft;for(k&&"hidden"!==k.visibility&&(k[_]({x:l(M+y.x,M)}),O+=y.x+k.getBBox().width+5),k=0,y=this.buttonOptions.length;k<y;++k)"hidden"!==v[k].visibility?(v[k][_]({x:O}),O+=v[k].width+b.buttonSpacing):v[k][_]({x:M})},G.prototype.handleCollision=function(v){var M=this,b=this.chart,k=this.buttonGroup,_=this.inputGroup,y=this.options,O=y.buttonPosition,B=y.dropdown,H=y.inputPosition;y=function(){var rt=0;return M.buttons.forEach(function(z){(z=z.getBBox()).width>rt&&(rt=z.width)}),rt};var at=function(rt){if(_&&k){var z=_.alignAttr.translateX+_.alignOptions.x-v+_.getBBox().x+2,q=_.alignOptions.width,mt=k.alignAttr.translateX+k.getBBox().x;return mt+rt>z&&z+q>mt&&O.y<H.y+_.getBBox().height}return!1},ft=function(){_&&k&&_.attr({translateX:_.alignAttr.translateX+(b.axisOffset[1]>=-v?0:-v),translateY:_.alignAttr.translateY+k.getBBox().height+10})};if(k){if("always"===B)return this.collapseButtons(v),void(at(y())&&ft());"never"===B&&this.expandButtons()}_&&k?H.align===O.align||at(this.initialButtonGroupWidth+20)?"responsive"===B?(this.collapseButtons(v),at(y())&&ft()):ft():"responsive"===B&&this.expandButtons():k&&"responsive"===B&&(this.initialButtonGroupWidth>b.plotWidth?this.collapseButtons(v):this.expandButtons())},G.prototype.collapseButtons=function(v){var M=this.buttons,b=this.buttonOptions,k=this.chart,_=this.dropdown,y=this.options,O=this.zoomText,B=k.userOptions.rangeSelector&&k.userOptions.rangeSelector.buttonTheme||{},H=function(ft){return{text:ft?ft+" \u25be":"\u25be",width:"auto",paddingLeft:l(y.buttonTheme.paddingLeft,B.padding,8),paddingRight:l(y.buttonTheme.paddingRight,B.padding,8)}};O&&O.hide();var at=!1;b.forEach(function(ft,rt){2!==(rt=M[rt]).state?rt.hide():(rt.show(),rt.attr(H(ft.text)),at=!0)}),at||(_&&(_.selectedIndex=0),M[0].show(),M[0].attr(H(this.zoomText&&this.zoomText.textStr))),b=y.buttonPosition.align,this.positionButtons(),"right"!==b&&"center"!==b||this.alignButtonGroup(v,M[this.currentButtonIndex()].getBBox().width),this.showDropdown()},G.prototype.expandButtons=function(){var v=this.buttons,M=this.buttonOptions,b=this.options,k=this.zoomText;this.hideDropdown(),k&&k.show(),M.forEach(function(_,y){(y=v[y]).show(),y.attr({text:_.text,width:b.buttonTheme.width||28,paddingLeft:l(b.buttonTheme.paddingLeft,"unset"),paddingRight:l(b.buttonTheme.paddingRight,"unset")}),2>y.state&&y.setState(0)}),this.positionButtons()},G.prototype.currentButtonIndex=function(){var v=this.dropdown;return v&&0<v.selectedIndex?v.selectedIndex-1:0},G.prototype.showDropdown=function(){var v=this.buttonGroup,M=this.buttons,b=this.chart,k=this.dropdown;if(v&&k){var _=v.translateX;v=v.translateY,M=M[this.currentButtonIndex()].getBBox(),st(k,{left:b.plotLeft+_+"px",top:v+.5+"px",width:M.width+"px",height:M.height+"px"}),this.hasVisibleDropdown=!0}},G.prototype.hideDropdown=function(){var v=this.dropdown;v&&(st(v,{top:"-9999em",width:"1px",height:"1px"}),this.hasVisibleDropdown=!1)},G.prototype.getHeight=function(){var v=this.options,M=this.group,b=v.y,k=v.buttonPosition.y,_=v.inputPosition.y;return v.height?v.height:(this.alignElements(),v=M?M.getBBox(!0).height+13+b:0,M=Math.min(_,k),(0>_&&0>k||0<_&&0<k)&&(v+=Math.abs(M)),v)},G.prototype.titleCollision=function(v){return!(v.options.title.text||v.options.subtitle.text)},G.prototype.update=function(v){var M=this.chart;V(!0,M.options.rangeSelector,v),this.destroy(),this.init(M),this.render()},G.prototype.destroy=function(){var v=this,M=v.minInput,b=v.maxInput;v.eventsToUnbind&&(v.eventsToUnbind.forEach(function(k){return k()}),v.eventsToUnbind=void 0),I(v.buttons),M&&(M.onfocus=M.onblur=M.onchange=null),b&&(b.onfocus=b.onblur=b.onchange=null),nt(v,function(k,_){k&&"chart"!==_&&(k instanceof zt?k.destroy():k instanceof window.HTMLElement&&A(k)),k!==G.prototype[_]&&(v[_]=null)},this)},G}(),x(wt.prototype,{defaultButtons:[{type:"month",count:1,text:"1m",title:"View 1 month"},{type:"month",count:3,text:"3m",title:"View 3 months"},{type:"month",count:6,text:"6m",title:"View 6 months"},{type:"ytd",text:"YTD",title:"View year to date"},{type:"year",count:1,text:"1y",title:"View 1 year"},{type:"all",text:"All",title:"View all"}],inputTypeFormats:{"datetime-local":"%Y-%m-%dT%H:%M:%S",date:"%Y-%m-%d",time:"%H:%M:%S"}}),wt}),te(vt,"Accessibility/Components/RangeSelectorComponent.js",[vt["Stock/RangeSelector/RangeSelector.js"],vt["Accessibility/AccessibilityComponent.js"],vt["Accessibility/Utils/ChartUtilities.js"],vt["Accessibility/Utils/Announcer.js"],vt["Accessibility/KeyboardNavigationHandler.js"],vt["Core/Utilities.js"]],function(Ct,wt,xt,jt,zt,Ut){var R,Rt=this&&this.__extends||(R=function(I,A){return(R=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(x,T){x.__proto__=T}||function(x,T){for(var j in T)T.hasOwnProperty(j)&&(x[j]=T[j])})(I,A)},function(I,A){function x(){this.constructor=I}R(I,A),I.prototype=null===A?Object.create(A):(x.prototype=A.prototype,new x)}),It=xt.unhideChartElementFromAT,K=xt.getAxisRangeDescription,et=Ut.addEvent,st=Ut.attr;return wt=function(R){function I(){var A=null!==R&&R.apply(this,arguments)||this;return A.announcer=void 0,A}return Rt(I,R),I.prototype.init=function(){this.announcer=new jt(this.chart,"polite")},I.prototype.onChartUpdate=function(){var A=this.chart,x=this,T=A.rangeSelector;T&&(this.updateSelectorVisibility(),this.setDropdownAttrs(),T.buttons&&T.buttons.length&&T.buttons.forEach(function(j){x.setRangeButtonAttrs(j)}),T.maxInput&&T.minInput&&["minInput","maxInput"].forEach(function(j,V){(j=T[j])&&(It(A,j),x.setRangeInputAttrs(j,"accessibility.rangeSelector."+(V?"max":"min")+"InputLabel"))}))},I.prototype.updateSelectorVisibility=function(){var A=this.chart,x=A.rangeSelector,T=x&&x.dropdown,j=x&&x.buttons||[];x&&x.hasVisibleDropdown&&T?(It(A,T),j.forEach(function(V){return V.element.setAttribute("aria-hidden",!0)})):(T&&T.setAttribute("aria-hidden",!0),j.forEach(function(V){return It(A,V.element)}))},I.prototype.setDropdownAttrs=function(){var A=this.chart,x=A.rangeSelector&&A.rangeSelector.dropdown;x&&(A=A.langFormat("accessibility.rangeSelector.dropdownLabel",{rangeTitle:A.options.lang.rangeSelectorZoom}),x.setAttribute("aria-label",A),x.setAttribute("tabindex",-1))},I.prototype.setRangeButtonAttrs=function(A){st(A.element,{tabindex:-1,role:"button"})},I.prototype.setRangeInputAttrs=function(A,x){var T=this.chart;st(A,{tabindex:-1,"aria-label":T.langFormat(x,{chart:T})})},I.prototype.onButtonNavKbdArrowKey=function(A,x){var T=A.response,j=this.keyCodes,V=this.chart,nt=V.options.accessibility.keyboardNavigation.wrapAround;return V.highlightRangeSelectorButton(V.highlightedRangeSelectorItemIx+(x=x===j.left||x===j.up?-1:1))?T.success:nt?(A.init(x),T.success):T[0<x?"next":"prev"]},I.prototype.onButtonNavKbdClick=function(A){A=A.response;var x=this.chart;return 3!==x.oldRangeSelectorItemState&&this.fakeClickEvent(x.rangeSelector.buttons[x.highlightedRangeSelectorItemIx].element),A.success},I.prototype.onAfterBtnClick=function(){var A=this.chart,x=K(A.xAxis[0]);(A=A.langFormat("accessibility.rangeSelector.clickButtonAnnouncement",{chart:A,axisRangeDescription:x}))&&this.announcer.announce(A)},I.prototype.onInputKbdMove=function(A){var x=this.chart,T=x.rangeSelector,j=x.highlightedInputRangeIx=(x.highlightedInputRangeIx||0)+A;1<j||0>j?x.accessibility&&(x.accessibility.keyboardNavigation.tabindexContainer.focus(),x.accessibility.keyboardNavigation.move(A)):T&&(A=T[j?"maxDateBox":"minDateBox"],T=T[j?"maxInput":"minInput"],A&&T&&x.setFocusToElement(A,T))},I.prototype.onInputNavInit=function(A){var x=this,T=this,j=this.chart,V=0<A?0:1,nt=j.rangeSelector,w=nt&&nt[V?"maxDateBox":"minDateBox"];if(A=nt&&nt.minInput,nt=nt&&nt.maxInput,j.highlightedInputRangeIx=V,w&&A&&nt){j.setFocusToElement(w,V?nt:A),this.removeInputKeydownHandler&&this.removeInputKeydownHandler();var l=et(A,"keydown",j=function(N){(N.which||N.keyCode)===x.keyCodes.tab&&(N.preventDefault(),N.stopPropagation(),T.onInputKbdMove(N.shiftKey?-1:1))}),it=et(nt,"keydown",j);this.removeInputKeydownHandler=function(){l(),it()}}},I.prototype.onInputNavTerminate=function(){var A=this.chart.rangeSelector||{};A.maxInput&&A.hideInput("max"),A.minInput&&A.hideInput("min"),this.removeInputKeydownHandler&&(this.removeInputKeydownHandler(),delete this.removeInputKeydownHandler)},I.prototype.initDropdownNav=function(){var A=this,x=this.chart,T=x.rangeSelector,j=T&&T.dropdown;T&&j&&(x.setFocusToElement(T.buttonGroup,j),this.removeDropdownKeydownHandler&&this.removeDropdownKeydownHandler(),this.removeDropdownKeydownHandler=et(j,"keydown",function(V){var nt=x.accessibility;(V.which||V.keyCode)===A.keyCodes.tab&&(V.preventDefault(),V.stopPropagation(),nt&&(nt.keyboardNavigation.tabindexContainer.focus(),nt.keyboardNavigation.move(V.shiftKey?-1:1)))}))},I.prototype.getRangeSelectorButtonNavigation=function(){var A=this.chart,x=this.keyCodes,T=this;return new zt(A,{keyCodeMap:[[[x.left,x.right,x.up,x.down],function(j){return T.onButtonNavKbdArrowKey(this,j)}],[[x.enter,x.space],function(){return T.onButtonNavKbdClick(this)}]],validate:function(){return!!(A.rangeSelector&&A.rangeSelector.buttons&&A.rangeSelector.buttons.length)},init:function(j){var V=A.rangeSelector;V&&V.hasVisibleDropdown?T.initDropdownNav():V&&(V=V.buttons.length-1,A.highlightRangeSelectorButton(0<j?0:V))},terminate:function(){T.removeDropdownKeydownHandler&&(T.removeDropdownKeydownHandler(),delete T.removeDropdownKeydownHandler)}})},I.prototype.getRangeSelectorInputNavigation=function(){var A=this.chart,x=this;return new zt(A,{keyCodeMap:[],validate:function(){return!!(A.rangeSelector&&A.rangeSelector.inputGroup&&"hidden"!==A.rangeSelector.inputGroup.element.style.visibility&&!1!==A.options.rangeSelector.inputEnabled&&A.rangeSelector.minInput&&A.rangeSelector.maxInput)},init:function(T){x.onInputNavInit(T)},terminate:function(){x.onInputNavTerminate()}})},I.prototype.getKeyboardNavigation=function(){return[this.getRangeSelectorButtonNavigation(),this.getRangeSelectorInputNavigation()]},I.prototype.destroy=function(){this.removeDropdownKeydownHandler&&this.removeDropdownKeydownHandler(),this.removeInputKeydownHandler&&this.removeInputKeydownHandler(),this.announcer&&this.announcer.destroy()},I}(wt),function(R){function I(T){var j=this.rangeSelector&&this.rangeSelector.buttons||[],V=this.highlightedRangeSelectorItemIx,nt=this.rangeSelector&&this.rangeSelector.selected;return typeof V<"u"&&j[V]&&V!==nt&&j[V].setState(this.oldRangeSelectorItemState||0),this.highlightedRangeSelectorItemIx=T,!!j[T]&&(this.setFocusToElement(j[T].box,j[T].element),T!==nt&&(this.oldRangeSelectorItemState=j[T].state,j[T].setState(1)),!0)}function A(){var T=this.chart.accessibility;if(T&&T.components.rangeSelector)return T.components.rangeSelector.onAfterBtnClick()}var x=[];R.compose=function(T,j){-1===x.indexOf(T)&&(x.push(T),T.prototype.highlightRangeSelectorButton=I),-1===x.indexOf(j)&&(x.push(j),et(Ct,"afterBtnClick",A))}}(wt||(wt={})),wt}),te(vt,"Accessibility/Components/SeriesComponent/ForcedMarkers.js",[vt["Core/Utilities.js"]],function(Ct){var jt,wt=Ct.addEvent,xt=Ct.merge;return function(zt){function Ut(R){xt(!0,R,{marker:{enabled:!0,states:{normal:{opacity:0}}}})}function Rt(R){return R.marker.states&&R.marker.states.normal&&R.marker.states.normal.opacity}function It(){this.chart.styledMode&&(this.markerGroup&&this.markerGroup[this.a11yMarkersForced?"addClass":"removeClass"]("highcharts-a11y-markers-hidden"),this._hasPointMarkers&&this.points&&this.points.length&&this.points.forEach(function(R){R.graphic&&(R.graphic[R.hasForcedA11yMarker?"addClass":"removeClass"]("highcharts-a11y-marker-hidden"),R.graphic[!1===R.hasForcedA11yMarker?"addClass":"removeClass"]("highcharts-a11y-marker-visible"))}))}function K(R){this.resetA11yMarkerOptions=xt(R.options.marker||{},this.userOptions.marker||{})}function et(){var R=this.options,I=!1!==(this.options.accessibility&&this.options.accessibility.enabled);if((I=this.chart.options.accessibility.enabled&&I)&&(I=this.points.length<(I=this.chart.options.accessibility).series.pointDescriptionEnabledThreshold||!1===I.series.pointDescriptionEnabledThreshold),I){if(R.marker&&!1===R.marker.enabled&&(this.a11yMarkersForced=!0,Ut(this.options)),this._hasPointMarkers&&this.points&&this.points.length)for(R=this.points.length;R--;){var A=(I=this.points[R]).options,x=I.hasForcedA11yMarker;delete I.hasForcedA11yMarker,A.marker&&(x=x&&0===Rt(A),A.marker.enabled&&!x?(xt(!0,A.marker,{states:{normal:{opacity:Rt(A)||1}}}),I.hasForcedA11yMarker=!1):!1===A.marker.enabled&&(Ut(A),I.hasForcedA11yMarker=!0))}}else this.a11yMarkersForced&&(delete this.a11yMarkersForced,(R=this.resetA11yMarkerOptions)&&this.update({marker:{enabled:R.enabled,states:{normal:{opacity:R.states&&R.states.normal&&R.states.normal.opacity}}}}),delete this.resetA11yMarkerOptions)}var st=[];zt.compose=function(R){-1===st.indexOf(R)&&(st.push(R),wt(R,"afterSetOptions",K),wt(R,"render",et),wt(R,"afterRender",It))}}(jt||(jt={})),jt}),te(vt,"Accessibility/Components/SeriesComponent/SeriesKeyboardNavigation.js",[vt["Core/Series/Point.js"],vt["Core/Series/Series.js"],vt["Core/Series/SeriesRegistry.js"],vt["Core/Globals.js"],vt["Core/Utilities.js"],vt["Accessibility/KeyboardNavigationHandler.js"],vt["Accessibility/Utils/EventProvider.js"],vt["Accessibility/Utils/ChartUtilities.js"]],function(Ct,wt,xt,jt,zt,Ut,Rt,It){function K(it){var N=it.index,G=it.series.points,v=G.length;if(G[N]===it)return N;for(;v--;)if(G[v]===it)return v}function et(it){var N=it.chart.options.accessibility.keyboardNavigation.seriesNavigation,G=it.options.accessibility||{},v=G.keyboardNavigation;return v&&!1===v.enabled||!1===G.enabled||!1===it.options.enableMouseTracking||!it.visible||N.pointNavigationEnabledThreshold&&N.pointNavigationEnabledThreshold<=it.points.length}function st(it){return it.isNull&&it.series.chart.options.accessibility.keyboardNavigation.seriesNavigation.skipNullPoints||!1===it.visible||!1===it.isInside||it.options.accessibility&&!1===it.options.accessibility.enabled||et(it.series)}function R(it){for(var N=(it=it.series||[]).length,G=0;G<N;++G)if(!et(it[G])){t:{for(var v=it[G].points||[],M=v.length,b=0;b<M;++b)if(!st(v[b])){v=v[b];break t}v=null}if(v)return v}return null}function I(it){for(var N=it.series.length,G=!1;N--&&(it.highlightedPoint=it.series[N].points[it.series[N].points.length-1],!(G=it.series[N].highlightNextValidPoint())););return G}function A(it){return delete it.highlightedPoint,!!(it=R(it))&&it.highlight()}var x=xt.seriesTypes,T=jt.doc,j=zt.defined,V=zt.fireEvent,nt=It.getPointFromXY,w=It.getSeriesFromName,l=It.scrollToPoint;return function(it){function N(y){var O=this.series,B=this.highlightedPoint,H=B&&K(B)||0,ft=this.series&&this.series[this.series.length-1];if(ft=ft&&ft.points&&ft.points[ft.points.length-1],!O[0]||!O[0].points)return!1;if(B){if(O=O[B.series.index+(y?1:-1)],!(H=(B&&B.series.points||[])[H+(y?1:-1)])&&O&&(H=O.points[y?0:O.points.length-1]),!H)return!1}else H=y?O[0].points[0]:ft;return st(H)?(this.highlightedPoint=et(O=H.series)?y?O.points[O.points.length-1]:O.points[0]:H,this.highlightAdjacentPoint(y)):H.highlight()}function G(y){var H,O=this.highlightedPoint,B=1/0;return!(!j(O.plotX)||!j(O.plotY))&&(this.series.forEach(function(at){et(at)||at.points.forEach(function(ft){if(j(ft.plotY)&&j(ft.plotX)&&ft!==O){var rt=ft.plotY-O.plotY,z=Math.abs(ft.plotX-O.plotX);z=Math.abs(rt)*Math.abs(rt)+z*z*4,at.yAxis&&at.yAxis.reversed&&(rt*=-1),!(0>=rt&&y||0<=rt&&!y||5>z||st(ft))&&z<B&&(B=z,H=ft)}})}),!!H&&H.highlight())}function v(y){var O=this.highlightedPoint,B=this.series&&this.series[this.series.length-1],H=B&&B.points&&B.points[B.points.length-1];return this.highlightedPoint?!(!(B=this.series[O.series.index+(y?-1:1)])||(H=function M(y,O,B,H){var at=1/0,ft=O.points.length,rt=function(mt){return!(j(mt.plotX)&&j(mt.plotY))};if(!rt(y)){for(;ft--;){var z=O.points[ft];if(!rt(z)&&(z=(y.plotX-z.plotX)*(y.plotX-z.plotX)*(B||1)+(y.plotY-z.plotY)*(y.plotY-z.plotY)*(H||1))<at){at=z;var q=ft}}return j(q)?O.points[q]:void 0}}(O,B,4),!H))&&(et(B)?(H.highlight(),(y=this.highlightAdjacentSeries(y))||(O.highlight(),!1)):(H.highlight(),H.series.highlightNextValidPoint())):(B=y?this.series&&this.series[0]:B,!!(H=y?B&&B.points&&B.points[0]:H)&&H.highlight())}function b(y){void 0===y&&(y=!0);var O=this.series.chart;return!this.isNull&&y?this.onMouseOver():O.tooltip&&O.tooltip.hide(0),l(this),this.graphic&&(O.setFocusToElement(this.graphic),!y&&O.focusElement&&O.focusElement.removeFocusBorder()),O.highlightedPoint=this,this}function k(){var y=this.chart.highlightedPoint,O=(y&&y.series)===this?K(y):0,B=(y=this.points).length;if(y&&B){for(var H=O;H<B;++H)if(!st(y[H]))return y[H].highlight();for(;0<=O;--O)if(!st(y[O]))return y[O].highlight()}return!1}var _=[];it.compose=function(y,O,B){-1===_.indexOf(y)&&(_.push(y),(y=y.prototype).highlightAdjacentPoint=N,y.highlightAdjacentPointVertical=G,y.highlightAdjacentSeries=v),-1===_.indexOf(O)&&(_.push(O),O.prototype.highlight=b),-1===_.indexOf(B)&&(_.push(B),(O=B.prototype).keyboardMoveVertical=!0,["column","gantt","pie"].forEach(function(H){x[H]&&(x[H].prototype.keyboardMoveVertical=!1)}),O.highlightNextValidPoint=k)}}((xt=function(){function it(N,G){this.keyCodes=G,this.chart=N}return it.prototype.init=function(){var N=this,G=this.chart,v=this.eventProvider=new Rt;v.addEvent(wt,"destroy",function(){return N.onSeriesDestroy(this)}),v.addEvent(G,"afterApplyDrilldown",function(){var M=R(this);M&&M.highlight(!1)}),v.addEvent(G,"drilldown",function(M){var b=(M=M.point).series;N.lastDrilledDownPoint={x:M.x,y:M.y,seriesName:b?b.name:""}}),v.addEvent(G,"drillupall",function(){setTimeout(function(){N.onDrillupAll()},10)}),v.addEvent(Ct,"afterSetState",function(){var M=this.graphic&&this.graphic.element,b=T.activeElement,k=b&&b.getAttribute("class");k=k&&-1<k.indexOf("highcharts-a11y-proxy-button"),G.highlightedPoint===this&&b!==M&&!k&&M&&M.focus&&M.focus()})},it.prototype.onDrillupAll=function(){var M,N=this.lastDrilledDownPoint,G=this.chart,v=N&&w(G,N.seriesName);N&&v&&j(N.x)&&j(N.y)&&(M=nt(v,N.x,N.y)),M=M||R(G),G.container&&G.container.focus(),M&&M.highlight&&M.highlight(!1)},it.prototype.getKeyboardNavigationHandler=function(){var N=this,G=this.keyCodes,v=this.chart,M=v.inverted;return new Ut(v,{keyCodeMap:[[M?[G.up,G.down]:[G.left,G.right],function(b){return N.onKbdSideways(this,b)}],[M?[G.left,G.right]:[G.up,G.down],function(b){return N.onKbdVertical(this,b)}],[[G.enter,G.space],function(b,k){return(b=v.highlightedPoint)&&(k.point=b,V(b.series,"click",k),b.firePointEvent("click")),this.response.success}],[[G.home],function(){return A(v),this.response.success}],[[G.end],function(){return I(v),this.response.success}],[[G.pageDown,G.pageUp],function(b){return v.highlightAdjacentSeries(b===G.pageDown),this.response.success}]],init:function(){return N.onHandlerInit(this)},validate:function(){return!!R(v)},terminate:function(){return N.onHandlerTerminate()}})},it.prototype.onKbdSideways=function(N,G){var v=this.keyCodes;return this.attemptHighlightAdjacentPoint(N,G===v.right||G===v.down)},it.prototype.onHandlerInit=function(N){var G=this.chart;return G.options.accessibility.keyboardNavigation.seriesNavigation.rememberPointFocus&&G.highlightedPoint?G.highlightedPoint.highlight():A(G),N.response.success},it.prototype.onKbdVertical=function(N,G){var v=this.chart,M=this.keyCodes;return G=G===M.down||G===M.right,(M=v.options.accessibility.keyboardNavigation.seriesNavigation).mode&&"serialize"===M.mode?this.attemptHighlightAdjacentPoint(N,G):(v[v.highlightedPoint&&v.highlightedPoint.series.keyboardMoveVertical?"highlightAdjacentPointVertical":"highlightAdjacentSeries"](G),N.response.success)},it.prototype.onHandlerTerminate=function(){var N=this.chart,G=N.options.accessibility.keyboardNavigation;N.tooltip&&N.tooltip.hide(0);var v=N.highlightedPoint&&N.highlightedPoint.series;v&&v.onMouseOut&&v.onMouseOut(),N.highlightedPoint&&N.highlightedPoint.onMouseOut&&N.highlightedPoint.onMouseOut(),G.seriesNavigation.rememberPointFocus||delete N.highlightedPoint},it.prototype.attemptHighlightAdjacentPoint=function(N,G){var v=this.chart,M=v.options.accessibility.keyboardNavigation.wrapAround;return v.highlightAdjacentPoint(G)||M&&(G?A(v):I(v))?N.response.success:N.response[G?"next":"prev"]},it.prototype.onSeriesDestroy=function(N){var G=this.chart;G.highlightedPoint&&G.highlightedPoint.series===N&&(delete G.highlightedPoint,G.focusElement&&G.focusElement.removeFocusBorder())},it.prototype.destroy=function(){this.eventProvider.removeAddedEvents()},it}())||(xt={})),xt}),te(vt,"Accessibility/Components/SeriesComponent/SeriesComponent.js",[vt["Accessibility/AccessibilityComponent.js"],vt["Accessibility/Utils/ChartUtilities.js"],vt["Accessibility/Components/SeriesComponent/ForcedMarkers.js"],vt["Accessibility/Components/SeriesComponent/NewDataAnnouncer.js"],vt["Accessibility/Components/SeriesComponent/SeriesDescriber.js"],vt["Accessibility/Components/SeriesComponent/SeriesKeyboardNavigation.js"],vt["Core/Tooltip.js"]],function(Ct,wt,xt,jt,zt,Ut,Rt){var st,It=this&&this.__extends||(st=function(R,I){return(st=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(A,x){A.__proto__=x}||function(A,x){for(var T in x)x.hasOwnProperty(T)&&(A[T]=x[T])})(R,I)},function(R,I){function A(){this.constructor=R}st(R,I),R.prototype=null===I?Object.create(I):(A.prototype=I.prototype,new A)}),K=wt.hideSeriesFromAT,et=zt.describeSeries;return function(st){function R(){return null!==st&&st.apply(this,arguments)||this}return It(R,st),R.compose=function(I,A,x){jt.compose(x),xt.compose(x),Ut.compose(I,A,x)},R.prototype.init=function(){this.newDataAnnouncer=new jt(this.chart),this.newDataAnnouncer.init(),this.keyboardNavigation=new Ut(this.chart,this.keyCodes),this.keyboardNavigation.init(),this.hideTooltipFromATWhenShown(),this.hideSeriesLabelsFromATWhenShown()},R.prototype.hideTooltipFromATWhenShown=function(){var I=this;this.addEvent(Rt,"refresh",function(){this.chart===I.chart&&this.label&&this.label.element&&this.label.element.setAttribute("aria-hidden",!0)})},R.prototype.hideSeriesLabelsFromATWhenShown=function(){this.addEvent(this.chart,"afterDrawSeriesLabels",function(){this.series.forEach(function(I){I.labelBySeries&&I.labelBySeries.attr("aria-hidden",!0)})})},R.prototype.onChartRender=function(){this.chart.series.forEach(function(I){!1!==(I.options.accessibility&&I.options.accessibility.enabled)&&I.visible?et(I):K(I)})},R.prototype.getKeyboardNavigation=function(){return this.keyboardNavigation.getKeyboardNavigationHandler()},R.prototype.destroy=function(){this.newDataAnnouncer.destroy(),this.keyboardNavigation.destroy()},R}(Ct)}),te(vt,"Accessibility/Components/ZoomComponent.js",[vt["Accessibility/AccessibilityComponent.js"],vt["Accessibility/Utils/ChartUtilities.js"],vt["Accessibility/Utils/HTMLUtilities.js"],vt["Accessibility/KeyboardNavigationHandler.js"],vt["Core/Utilities.js"]],function(Ct,wt,xt,jt,zt){var st,Ut=this&&this.__extends||(st=function(R,I){return(st=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(A,x){A.__proto__=x}||function(A,x){for(var T in x)x.hasOwnProperty(T)&&(A[T]=x[T])})(R,I)},function(R,I){function A(){this.constructor=R}st(R,I),R.prototype=null===I?Object.create(I):(A.prototype=I.prototype,new A)}),Rt=wt.unhideChartElementFromAT,It=xt.getFakeMouseEvent,K=zt.attr,et=zt.pick;return function(st){function R(){var I=null!==st&&st.apply(this,arguments)||this;return I.focusedMapNavButtonIx=-1,I}return Ut(R,st),R.prototype.init=function(){var I=this,A=this.chart;this.proxyProvider.addGroup("zoom","div"),["afterShowResetZoom","afterApplyDrilldown","drillupall"].forEach(function(x){I.addEvent(A,x,function(){I.updateProxyOverlays()})})},R.prototype.onChartUpdate=function(){var I=this.chart,A=this;I.mapNavigation&&I.mapNavigation.navButtons.forEach(function(x,T){Rt(I,x.element),A.setMapNavButtonAttrs(x.element,"accessibility.zoom.mapZoom"+(T?"Out":"In"))})},R.prototype.setMapNavButtonAttrs=function(I,A){var x=this.chart;A=x.langFormat(A,{chart:x}),K(I,{tabindex:-1,role:"button","aria-label":A})},R.prototype.onChartRender=function(){this.updateProxyOverlays()},R.prototype.updateProxyOverlays=function(){var I=this.chart;this.proxyProvider.clearGroup("zoom"),I.resetZoomButton&&this.createZoomProxyButton(I.resetZoomButton,"resetZoomProxyButton",I.langFormat("accessibility.zoom.resetZoomButton",{chart:I})),I.drillUpButton&&I.breadcrumbs&&I.breadcrumbs.list&&this.createZoomProxyButton(I.drillUpButton,"drillUpProxyButton",I.langFormat("accessibility.drillUpButton",{chart:I,buttonText:I.breadcrumbs.getButtonText(I.breadcrumbs.list[I.breadcrumbs.list.length-1])}))},R.prototype.createZoomProxyButton=function(I,A,x){this[A]=this.proxyProvider.addProxyElement("zoom",{click:I},{"aria-label":x,tabindex:-1})},R.prototype.getMapZoomNavigation=function(){var I=this.keyCodes,A=this.chart,x=this;return new jt(A,{keyCodeMap:[[[I.up,I.down,I.left,I.right],function(T){return x.onMapKbdArrow(this,T)}],[[I.tab],function(T,j){return x.onMapKbdTab(this,j)}],[[I.space,I.enter],function(){return x.onMapKbdClick(this)}]],validate:function(){return!!(A.mapView&&A.mapNavigation&&A.mapNavigation.navButtons.length)},init:function(T){return x.onMapNavInit(T)}})},R.prototype.onMapKbdArrow=function(I,A){var x=this.chart,T=this.keyCodes,j=x.container,V=A===T.up||A===T.down;return A=(V?x.plotHeight:x.plotWidth)/10*(A===T.left||A===T.up?1:-1),T=10*Math.random(),x={x:j.offsetLeft+x.plotLeft+x.plotWidth/2+T,y:j.offsetTop+x.plotTop+x.plotHeight/2+T},V=V?{x:x.x,y:x.y+A}:{x:x.x+A,y:x.y},[It("mousedown",x),It("mousemove",V),It("mouseup",V)].forEach(function(nt){return j.dispatchEvent(nt)}),I.response.success},R.prototype.onMapKbdTab=function(I,A){var x=this.chart;I=I.response;var T=(A=A.shiftKey)&&!this.focusedMapNavButtonIx||!A&&this.focusedMapNavButtonIx;return x.mapNavigation.navButtons[this.focusedMapNavButtonIx].setState(0),T?(x.mapView&&x.mapView.zoomBy(),I[A?"prev":"next"]):(this.focusedMapNavButtonIx+=A?-1:1,x.setFocusToElement((A=x.mapNavigation.navButtons[this.focusedMapNavButtonIx]).box,A.element),A.setState(2),I.success)},R.prototype.onMapKbdClick=function(I){return this.fakeClickEvent(this.chart.mapNavigation.navButtons[this.focusedMapNavButtonIx].element),I.response.success},R.prototype.onMapNavInit=function(I){var A=this.chart,x=A.mapNavigation.navButtons[0];A.setFocusToElement((x=0<I?x:A.mapNavigation.navButtons[1]).box,x.element),x.setState(2),this.focusedMapNavButtonIx=0<I?0:1},R.prototype.simpleButtonNavigation=function(I,A,x){var T=this.keyCodes,j=this,V=this.chart;return new jt(V,{keyCodeMap:[[[T.tab,T.up,T.down,T.left,T.right],function(nt,w){return this.response[nt===T.tab&&w.shiftKey||nt===T.left||nt===T.up?"prev":"next"]}],[[T.space,T.enter],function(){var nt=x(this,V);return et(nt,this.response.success)}]],validate:function(){return V[I]&&V[I].box&&j[A].buttonElement},init:function(){V.setFocusToElement(V[I].box,j[A].buttonElement)}})},R.prototype.getKeyboardNavigation=function(){return[this.simpleButtonNavigation("resetZoomButton","resetZoomProxyButton",function(I,A){A.zoomOut()}),this.simpleButtonNavigation("drillUpButton","drillUpProxyButton",function(I,A){return A.drillUp(),I.response.prev}),this.getMapZoomNavigation()]},R}(Ct)}),te(vt,"Accessibility/HighContrastMode.js",[vt["Core/Globals.js"]],function(Ct){var wt=Ct.doc,xt=Ct.isMS,jt=Ct.win;return{isHighContrastModeActive:function(){var zt=/(Edg)/.test(jt.navigator.userAgent);if(jt.matchMedia&&zt)return jt.matchMedia("(-ms-high-contrast: active)").matches;if(xt&&jt.getComputedStyle){(zt=wt.createElement("div")).style.backgroundImage="url(".concat("data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==",")"),wt.body.appendChild(zt);var Ut=(zt.currentStyle||jt.getComputedStyle(zt)).backgroundImage;return wt.body.removeChild(zt),"none"===Ut}return jt.matchMedia&&jt.matchMedia("(forced-colors: active)").matches},setHighContrastTheme:function(zt){zt.highContrastModeActive=!0;var Ut=zt.options.accessibility.highContrastTheme;zt.update(Ut,!1),zt.series.forEach(function(Rt){var It=Ut.plotOptions[Rt.type]||{};Rt.update({color:It.color||"windowText",colors:[It.color||"windowText"],borderColor:It.borderColor||"window"}),Rt.points.forEach(function(K){K.options&&K.options.color&&K.update({color:It.color||"windowText",borderColor:It.borderColor||"window"},!1)})}),zt.redraw()}}}),te(vt,"Accessibility/HighContrastTheme.js",[],function(){return{chart:{backgroundColor:"window"},title:{style:{color:"windowText"}},subtitle:{style:{color:"windowText"}},colorAxis:{minColor:"windowText",maxColor:"windowText",stops:[]},colors:["windowText"],xAxis:{gridLineColor:"windowText",labels:{style:{color:"windowText"}},lineColor:"windowText",minorGridLineColor:"windowText",tickColor:"windowText",title:{style:{color:"windowText"}}},yAxis:{gridLineColor:"windowText",labels:{style:{color:"windowText"}},lineColor:"windowText",minorGridLineColor:"windowText",tickColor:"windowText",title:{style:{color:"windowText"}}},tooltip:{backgroundColor:"window",borderColor:"windowText",style:{color:"windowText"}},plotOptions:{series:{lineColor:"windowText",fillColor:"window",borderColor:"windowText",edgeColor:"windowText",borderWidth:1,dataLabels:{connectorColor:"windowText",color:"windowText",style:{color:"windowText",textOutline:"none"}},marker:{lineColor:"windowText",fillColor:"windowText"}},pie:{color:"window",colors:["window"],borderColor:"windowText",borderWidth:1},boxplot:{fillColor:"window"},candlestick:{lineColor:"windowText",fillColor:"window"},errorbar:{fillColor:"window"}},legend:{backgroundColor:"window",itemStyle:{color:"windowText"},itemHoverStyle:{color:"windowText"},itemHiddenStyle:{color:"#555"},title:{style:{color:"windowText"}}},credits:{style:{color:"windowText"}},labels:{style:{color:"windowText"}},drilldown:{activeAxisLabelStyle:{color:"windowText"},activeDataLabelStyle:{color:"windowText"}},navigation:{buttonOptions:{symbolStroke:"windowText",theme:{fill:"window"}}},rangeSelector:{buttonTheme:{fill:"window",stroke:"windowText",style:{color:"windowText"},states:{hover:{fill:"window",stroke:"windowText",style:{color:"windowText"}},select:{fill:"#444",stroke:"windowText",style:{color:"windowText"}}}},inputBoxBorderColor:"windowText",inputStyle:{backgroundColor:"window",color:"windowText"},labelStyle:{color:"windowText"}},navigator:{handles:{backgroundColor:"window",borderColor:"windowText"},outlineColor:"windowText",maskFill:"transparent",series:{color:"windowText",lineColor:"windowText"},xAxis:{gridLineColor:"windowText"}},scrollbar:{barBackgroundColor:"#444",barBorderColor:"windowText",buttonArrowColor:"windowText",buttonBackgroundColor:"window",buttonBorderColor:"windowText",rifleColor:"windowText",trackBackgroundColor:"window",trackBorderColor:"windowText"}}}),te(vt,"Accessibility/Options/A11yDefaults.js",[],function(){return{accessibility:{enabled:!0,screenReaderSection:{beforeChartFormat:"<{headingTagName}>{chartTitle}</{headingTagName}><div>{typeDescription}</div><div>{chartSubtitle}</div><div>{chartLongdesc}</div><div>{playAsSoundButton}</div><div>{viewTableButton}</div><div>{xAxisDescription}</div><div>{yAxisDescription}</div><div>{annotationsTitle}{annotationsList}</div>",afterChartFormat:"{endOfChartMarker}",axisRangeDateFormat:"%Y-%m-%d %H:%M:%S"},series:{descriptionFormat:"{seriesDescription}{authorDescription}{axisDescription}",describeSingleSeries:!1,pointDescriptionEnabledThreshold:200},point:{valueDescriptionFormat:"{xDescription}{separator}{value}.",describeNull:!0},landmarkVerbosity:"all",linkedDescription:'*[data-highcharts-chart="{index}"] + .highcharts-description',keyboardNavigation:{enabled:!0,focusBorder:{enabled:!0,hideBrowserFocusOutline:!0,style:{color:"#335cad",lineWidth:2,borderRadius:3},margin:2},order:["series","zoom","rangeSelector","legend","chartMenu"],wrapAround:!0,seriesNavigation:{skipNullPoints:!0,pointNavigationEnabledThreshold:!1,rememberPointFocus:!1}},announceNewData:{enabled:!1,minAnnounceInterval:5e3,interruptUser:!1}},legend:{accessibility:{enabled:!0,keyboardNavigation:{enabled:!0}}},exporting:{accessibility:{enabled:!0}}}}),te(vt,"Accessibility/Options/LangDefaults.js",[],function(){return{accessibility:{defaultChartTitle:"Chart",chartContainerLabel:"{title}. Highcharts interactive chart.",svgContainerLabel:"Interactive chart",drillUpButton:"{buttonText}",credits:"Chart credits: {creditsStr}",thousandsSep:",",svgContainerTitle:"",graphicContainerLabel:"",screenReaderSection:{beforeRegionLabel:"",afterRegionLabel:"",annotations:{heading:"Chart annotations summary",descriptionSinglePoint:"{annotationText}. Related to {annotationPoint}",descriptionMultiplePoints:"{annotationText}. Related to {annotationPoint}{ Also related to, #each(additionalAnnotationPoints)}",descriptionNoPoints:"{annotationText}"},endOfChartMarker:"End of interactive chart."},sonification:{playAsSoundButtonText:"Play as sound, {chartTitle}",playAsSoundClickAnnouncement:"Play"},legend:{legendLabelNoTitle:"Toggle series visibility, {chartTitle}",legendLabel:"Chart legend: {legendTitle}",legendItem:"Show {itemName}"},zoom:{mapZoomIn:"Zoom chart",mapZoomOut:"Zoom out chart",resetZoomButton:"Reset zoom"},rangeSelector:{dropdownLabel:"{rangeTitle}",minInputLabel:"Select start date.",maxInputLabel:"Select end date.",clickButtonAnnouncement:"Viewing {axisRangeDescription}"},table:{viewAsDataTableButtonText:"View as data table, {chartTitle}",tableSummary:"Table representation of chart."},announceNewData:{newDataAnnounce:"Updated data for chart {chartTitle}",newSeriesAnnounceSingle:"New data series: {seriesDesc}",newPointAnnounceSingle:"New data point: {pointDesc}",newSeriesAnnounceMultiple:"New data series in chart {chartTitle}: {seriesDesc}",newPointAnnounceMultiple:"New data point in chart {chartTitle}: {pointDesc}"},seriesTypeDescriptions:{boxplot:"Box plot charts are typically used to display groups of statistical data. Each data point in the chart can have up to 5 values: minimum, lower quartile, median, upper quartile, and maximum.",arearange:"Arearange charts are line charts displaying a range between a lower and higher value for each point.",areasplinerange:"These charts are line charts displaying a range between a lower and higher value for each point.",bubble:"Bubble charts are scatter charts where each data point also has a size value.",columnrange:"Columnrange charts are column charts displaying a range between a lower and higher value for each point.",errorbar:"Errorbar series are used to display the variability of the data.",funnel:"Funnel charts are used to display reduction of data in stages.",pyramid:"Pyramid charts consist of a single pyramid with item heights corresponding to each point value.",waterfall:"A waterfall chart is a column chart where each column contributes towards a total end value."},chartTypes:{emptyChart:"Empty chart",mapTypeDescription:"Map of {mapTitle} with {numSeries} data series.",unknownMap:"Map of unspecified region with {numSeries} data series.",combinationChart:"Combination chart with {numSeries} data series.",defaultSingle:"Chart with {numPoints} data {#plural(numPoints, points, point)}.",defaultMultiple:"Chart with {numSeries} data series.",splineSingle:"Line chart with {numPoints} data {#plural(numPoints, points, point)}.",splineMultiple:"Line chart with {numSeries} lines.",lineSingle:"Line chart with {numPoints} data {#plural(numPoints, points, point)}.",lineMultiple:"Line chart with {numSeries} lines.",columnSingle:"Bar chart with {numPoints} {#plural(numPoints, bars, bar)}.",columnMultiple:"Bar chart with {numSeries} data series.",barSingle:"Bar chart with {numPoints} {#plural(numPoints, bars, bar)}.",barMultiple:"Bar chart with {numSeries} data series.",pieSingle:"Pie chart with {numPoints} {#plural(numPoints, slices, slice)}.",pieMultiple:"Pie chart with {numSeries} pies.",scatterSingle:"Scatter chart with {numPoints} {#plural(numPoints, points, point)}.",scatterMultiple:"Scatter chart with {numSeries} data series.",boxplotSingle:"Boxplot with {numPoints} {#plural(numPoints, boxes, box)}.",boxplotMultiple:"Boxplot with {numSeries} data series.",bubbleSingle:"Bubble chart with {numPoints} {#plural(numPoints, bubbles, bubble)}.",bubbleMultiple:"Bubble chart with {numSeries} data series."},axis:{xAxisDescriptionSingular:"The chart has 1 X axis displaying {names[0]}. {ranges[0]}",xAxisDescriptionPlural:"The chart has {numAxes} X axes displaying {#each(names, -1) }and {names[-1]}.",yAxisDescriptionSingular:"The chart has 1 Y axis displaying {names[0]}. {ranges[0]}",yAxisDescriptionPlural:"The chart has {numAxes} Y axes displaying {#each(names, -1) }and {names[-1]}.",timeRangeDays:"Data range: {range} days.",timeRangeHours:"Data range: {range} hours.",timeRangeMinutes:"Data range: {range} minutes.",timeRangeSeconds:"Data range: {range} seconds.",rangeFromTo:"Data ranges from {rangeFrom} to {rangeTo}.",rangeCategories:"Data range: {numCategories} categories."},exporting:{chartMenuLabel:"Chart menu",menuButtonLabel:"View chart menu, {chartTitle}"},series:{summary:{default:"{series.name}, series {seriesNumber} of {chart.series.length} with {series.points.length} data {#plural(series.points.length, points, point)}.",defaultCombination:"{series.name}, series {seriesNumber} of {chart.series.length} with {series.points.length} data {#plural(series.points.length, points, point)}.",line:"{series.name}, line {seriesNumber} of {chart.series.length} with {series.points.length} data {#plural(series.points.length, points, point)}.",lineCombination:"{series.name}, series {seriesNumber} of {chart.series.length}. Line with {series.points.length} data {#plural(series.points.length, points, point)}.",spline:"{series.name}, line {seriesNumber} of {chart.series.length} with {series.points.length} data {#plural(series.points.length, points, point)}.",splineCombination:"{series.name}, series {seriesNumber} of {chart.series.length}. Line with {series.points.length} data {#plural(series.points.length, points, point)}.",column:"{series.name}, bar series {seriesNumber} of {chart.series.length} with {series.points.length} {#plural(series.points.length, bars, bar)}.",columnCombination:"{series.name}, series {seriesNumber} of {chart.series.length}. Bar series with {series.points.length} {#plural(series.points.length, bars, bar)}.",bar:"{series.name}, bar series {seriesNumber} of {chart.series.length} with {series.points.length} {#plural(series.points.length, bars, bar)}.",barCombination:"{series.name}, series {seriesNumber} of {chart.series.length}. Bar series with {series.points.length} {#plural(series.points.length, bars, bar)}.",pie:"{series.name}, pie {seriesNumber} of {chart.series.length} with {series.points.length} {#plural(series.points.length, slices, slice)}.",pieCombination:"{series.name}, series {seriesNumber} of {chart.series.length}. Pie with {series.points.length} {#plural(series.points.length, slices, slice)}.",scatter:"{series.name}, scatter plot {seriesNumber} of {chart.series.length} with {series.points.length} {#plural(series.points.length, points, point)}.",scatterCombination:"{series.name}, series {seriesNumber} of {chart.series.length}, scatter plot with {series.points.length} {#plural(series.points.length, points, point)}.",boxplot:"{series.name}, boxplot {seriesNumber} of {chart.series.length} with {series.points.length} {#plural(series.points.length, boxes, box)}.",boxplotCombination:"{series.name}, series {seriesNumber} of {chart.series.length}. Boxplot with {series.points.length} {#plural(series.points.length, boxes, box)}.",bubble:"{series.name}, bubble series {seriesNumber} of {chart.series.length} with {series.points.length} {#plural(series.points.length, bubbles, bubble)}.",bubbleCombination:"{series.name}, series {seriesNumber} of {chart.series.length}. Bubble series with {series.points.length} {#plural(series.points.length, bubbles, bubble)}.",map:"{series.name}, map {seriesNumber} of {chart.series.length} with {series.points.length} {#plural(series.points.length, areas, area)}.",mapCombination:"{series.name}, series {seriesNumber} of {chart.series.length}. Map with {series.points.length} {#plural(series.points.length, areas, area)}.",mapline:"{series.name}, line {seriesNumber} of {chart.series.length} with {series.points.length} data {#plural(series.points.length, points, point)}.",maplineCombination:"{series.name}, series {seriesNumber} of {chart.series.length}. Line with {series.points.length} data {#plural(series.points.length, points, point)}.",mapbubble:"{series.name}, bubble series {seriesNumber} of {chart.series.length} with {series.points.length} {#plural(series.points.length, bubbles, bubble)}.",mapbubbleCombination:"{series.name}, series {seriesNumber} of {chart.series.length}. Bubble series with {series.points.length} {#plural(series.points.length, bubbles, bubble)}."},description:"{description}",xAxisDescription:"X axis, {name}",yAxisDescription:"Y axis, {name}",nullPointValue:"No value",pointAnnotationsDescription:"{Annotation: #each(annotations). }"}}}}),te(vt,"Accessibility/Options/DeprecatedOptions.js",[vt["Core/Utilities.js"]],function(Ct){function wt(K,et,st){for(var R,I=0;I<et.length-1;++I)K=K[R=et[I]]=It(K[R],{});K[et[et.length-1]]=st}function xt(K,et,st,R){function I(T,j){return j.reduce(function(V,nt){return V[nt]},T)}var A=I(K.options,et),x=I(K.options,st);Object.keys(R).forEach(function(T){var j,V=A[T];typeof V<"u"&&(wt(x,R[T],V),Rt(32,!1,K,((j={})[et.join(".")+"."+T]=st.join(".")+"."+R[T].join("."),j)))})}var Rt=Ct.error,It=Ct.pick;return function(K){(function jt(K){var et=K.options.chart,st=K.options.accessibility||{};["description","typeDescription"].forEach(function(R){var I;et[R]&&(st[R]=et[R],Rt(32,!1,K,((I={})["chart.".concat(R)]="use accessibility.".concat(R),I)))})})(K),function zt(K){K.axes.forEach(function(et){(et=et.options)&&et.description&&(et.accessibility=et.accessibility||{},et.accessibility.description=et.description,Rt(32,!1,K,{"axis.description":"use axis.accessibility.description"}))})}(K),K.series&&function Ut(K){var et={description:["accessibility","description"],exposeElementToA11y:["accessibility","exposeAsGroupOnly"],pointDescriptionFormatter:["accessibility","point","descriptionFormatter"],skipKeyboardNavigation:["accessibility","keyboardNavigation","enabled"],"accessibility.pointDescriptionFormatter":["accessibility","point","descriptionFormatter"]};K.series.forEach(function(st){Object.keys(et).forEach(function(R){var I,A=st.options[R];"accessibility.pointDescriptionFormatter"===R&&(A=st.options.accessibility&&st.options.accessibility.pointDescriptionFormatter),typeof A<"u"&&(wt(st.options,et[R],"skipKeyboardNavigation"===R?!A:A),Rt(32,!1,K,((I={})["series.".concat(R)]="series."+et[R].join("."),I)))})})}(K),xt(K,["accessibility"],["accessibility"],{pointDateFormat:["point","dateFormat"],pointDateFormatter:["point","dateFormatter"],pointDescriptionFormatter:["point","descriptionFormatter"],pointDescriptionThreshold:["series","pointDescriptionEnabledThreshold"],pointNavigationThreshold:["keyboardNavigation","seriesNavigation","pointNavigationEnabledThreshold"],pointValueDecimals:["point","valueDecimals"],pointValuePrefix:["point","valuePrefix"],pointValueSuffix:["point","valueSuffix"],screenReaderSectionFormatter:["screenReaderSection","beforeChartFormatter"],describeSingleSeries:["series","describeSingleSeries"],seriesDescriptionFormatter:["series","descriptionFormatter"],onTableAnchorClick:["screenReaderSection","onViewDataTableClick"],axisRangeDateFormat:["screenReaderSection","axisRangeDateFormat"]}),xt(K,["accessibility","keyboardNavigation"],["accessibility","keyboardNavigation","seriesNavigation"],{skipNullPoints:["skipNullPoints"],mode:["mode"]}),xt(K,["lang","accessibility"],["lang","accessibility"],{legendItem:["legend","legendItem"],legendLabel:["legend","legendLabel"],mapZoomIn:["zoom","mapZoomIn"],mapZoomOut:["zoom","mapZoomOut"],resetZoomButton:["zoom","resetZoomButton"],screenReaderRegionLabel:["screenReaderSection","beforeRegionLabel"],rangeSelectorButton:["rangeSelector","buttonText"],rangeSelectorMaxInput:["rangeSelector","maxInputLabel"],rangeSelectorMinInput:["rangeSelector","minInputLabel"],svgContainerEnd:["screenReaderSection","endOfChartMarker"],viewAsDataTable:["table","viewAsDataTableButtonText"],tableSummary:["table","tableSummary"]})}}),te(vt,"Accessibility/Accessibility.js",[vt["Core/Defaults.js"],vt["Core/Globals.js"],vt["Core/Utilities.js"],vt["Accessibility/Utils/HTMLUtilities.js"],vt["Accessibility/A11yI18n.js"],vt["Accessibility/Components/ContainerComponent.js"],vt["Accessibility/FocusBorder.js"],vt["Accessibility/Components/InfoRegionsComponent.js"],vt["Accessibility/KeyboardNavigation.js"],vt["Accessibility/Components/LegendComponent.js"],vt["Accessibility/Components/MenuComponent.js"],vt["Accessibility/Components/SeriesComponent/NewDataAnnouncer.js"],vt["Accessibility/ProxyProvider.js"],vt["Accessibility/Components/RangeSelectorComponent.js"],vt["Accessibility/Components/SeriesComponent/SeriesComponent.js"],vt["Accessibility/Components/ZoomComponent.js"],vt["Accessibility/HighContrastMode.js"],vt["Accessibility/HighContrastTheme.js"],vt["Accessibility/Options/A11yDefaults.js"],vt["Accessibility/Options/LangDefaults.js"],vt["Accessibility/Options/DeprecatedOptions.js"]],function(Ct,wt,xt,jt,zt,Ut,Rt,It,K,et,st,R,I,A,x,T,j,V,nt,w,l){Ct=Ct.defaultOptions;var it=wt.doc,N=xt.addEvent,G=xt.extend,v=xt.fireEvent,M=xt.merge,b=jt.removeElement;return function(k){function _(){this.accessibility&&this.accessibility.destroy()}function y(){this.a11yDirty&&this.renderTo&&(delete this.a11yDirty,this.updateA11yEnabled());var ft=this.accessibility;ft&&!ft.zombie&&(ft.proxyProvider.updateProxyElementPositions(),ft.getComponentOrder().forEach(function(rt){ft.components[rt].onChartRender()}))}function O(ft){(ft=ft.options.accessibility)&&(ft.customComponents&&(this.options.accessibility.customComponents=ft.customComponents,delete ft.customComponents),M(!0,this.options.accessibility,ft),this.accessibility&&this.accessibility.destroy&&(this.accessibility.destroy(),delete this.accessibility)),this.a11yDirty=!0}function B(){var ft=this.accessibility,rt=this.options.accessibility;rt&&rt.enabled?ft&&!ft.zombie?ft.update():(this.accessibility=ft=new k(this),!ft.zombie&&ft.update()):ft?(ft.destroy&&ft.destroy(),delete this.accessibility):this.renderTo.setAttribute("aria-hidden",!0)}function H(){this.series.chart.accessibility&&(this.series.chart.a11yDirty=!0)}var at=[];k.i18nFormat=zt.i18nFormat,k.compose=function(ft,rt,z,q,mt,pt){K.compose(ft),R.compose(q),et.compose(ft,rt),st.compose(ft),x.compose(ft,z,q),zt.compose(ft),Rt.compose(ft,mt),pt&&A.compose(ft,pt),-1===at.indexOf(ft)&&(at.push(ft),ft.prototype.updateA11yEnabled=B,N(ft,"destroy",_),N(ft,"render",y),N(ft,"update",O),["addSeries","init"].forEach(function(dt){N(ft,dt,function(){this.a11yDirty=!0})}),["afterApplyDrilldown","drillupall"].forEach(function(dt){N(ft,dt,function(){var Y=this.accessibility;Y&&!Y.zombie&&Y.update()})})),-1===at.indexOf(z)&&(at.push(z),N(z,"update",H)),-1===at.indexOf(q)&&(at.push(q),["update","updatedData","remove"].forEach(function(dt){N(q,dt,function(){this.chart.accessibility&&(this.chart.a11yDirty=!0)})}))}}((wt=function(){function k(_){this.proxyProvider=this.keyboardNavigation=this.components=this.chart=void 0,this.init(_)}return k.prototype.init=function(_){this.chart=_,it.addEventListener&&_.renderer.isSVG?(l(_),this.proxyProvider=new I(this.chart),this.initComponents(),this.keyboardNavigation=new K(_,this.components)):(this.zombie=!0,this.components={},_.renderTo.setAttribute("aria-hidden",!0))},k.prototype.initComponents=function(){var _=this.chart,y=this.proxyProvider,O=_.options.accessibility;this.components={container:new Ut,infoRegions:new It,legend:new et,chartMenu:new st,rangeSelector:new A,series:new x,zoom:new T},O.customComponents&&G(this.components,O.customComponents);var B=this.components;this.getComponentOrder().forEach(function(H){B[H].initBase(_,y),B[H].init()})},k.prototype.getComponentOrder=function(){if(!this.components)return[];if(!this.components.series)return Object.keys(this.components);var _=Object.keys(this.components).filter(function(y){return"series"!==y});return["series"].concat(_)},k.prototype.update=function(){var _=this.components,y=this.chart,O=y.options.accessibility;v(y,"beforeA11yUpdate"),y.types=this.getChartTypes(),this.proxyProvider.updateGroupOrder(O=O.keyboardNavigation.order),this.getComponentOrder().forEach(function(B){_[B].onChartUpdate(),v(y,"afterA11yComponentUpdate",{name:B,component:_[B]})}),this.keyboardNavigation.update(O),!y.highContrastModeActive&&j.isHighContrastModeActive()&&j.setHighContrastTheme(y),v(y,"afterA11yUpdate",{accessibility:this})},k.prototype.destroy=function(){var _=this.chart||{},y=this.components;Object.keys(y).forEach(function(O){y[O].destroy(),y[O].destroyBase()}),this.proxyProvider&&this.proxyProvider.destroy(),_.announcerContainer&&b(_.announcerContainer),this.keyboardNavigation&&this.keyboardNavigation.destroy(),_.renderTo&&_.renderTo.setAttribute("aria-hidden",!0),_.focusElement&&_.focusElement.removeFocusBorder()},k.prototype.getChartTypes=function(){var _={};return this.chart.series.forEach(function(y){_[y.type]=1}),Object.keys(_)},k}())||(wt={})),M(!0,Ct,nt,{accessibility:{highContrastTheme:V},lang:w}),wt}),te(vt,"masters/modules/accessibility.src.js",[vt["Core/Globals.js"],vt["Accessibility/Accessibility.js"],vt["Accessibility/AccessibilityComponent.js"],vt["Accessibility/Utils/ChartUtilities.js"],vt["Accessibility/Utils/HTMLUtilities.js"],vt["Accessibility/KeyboardNavigationHandler.js"],vt["Accessibility/Components/SeriesComponent/SeriesDescriber.js"]],function(Ct,wt,xt,jt,zt,Ut,Rt){Ct.i18nFormat=wt.i18nFormat,Ct.A11yChartUtilities=jt,Ct.A11yHTMLUtilities=zt,Ct.AccessibilityComponent=xt,Ct.KeyboardNavigationHandler=Ut,Ct.SeriesAccessibilityDescriber=Rt,wt.compose(Ct.Chart,Ct.Legend,Ct.Point,Ct.Series,Ct.SVGElement,Ct.RangeSelector)})}),function(vt){"object"==typeof module&&module.exports?(vt.default=vt,module.exports=vt):"function"==typeof define&&define.amd?define("highcharts/modules/export-data",["highcharts","highcharts/modules/exporting"],function(te){return vt(te),vt.Highcharts=te,vt}):vt(typeof Highcharts<"u"?Highcharts:void 0)}(function(vt){function te(Ct,wt,xt,jt){Ct.hasOwnProperty(wt)||(Ct[wt]=jt.apply(null,xt),"function"==typeof CustomEvent&&window.dispatchEvent(new CustomEvent("HighchartsModuleLoaded",{detail:{path:wt,module:Ct[wt]}})))}te(vt=vt?vt._modules:{},"Extensions/ExportData/ExportDataDefaults.js",[],function(){return{exporting:{csv:{annotations:{itemDelimiter:"; ",join:!1},columnHeaderFormatter:null,dateFormat:"%Y-%m-%d %H:%M:%S",decimalPoint:null,itemDelimiter:null,lineDelimiter:"\n"},showTable:!1,useMultiLevelHeaders:!0,useRowspanHeaders:!0},lang:{downloadCSV:"Download CSV",downloadXLS:"Download XLS",exportData:{annotationHeader:"Annotations",categoryHeader:"Category",categoryDatetimeHeader:"DateTime"},viewData:"View data table",hideData:"Hide data table"}}}),te(vt,"Extensions/DownloadURL.js",[vt["Core/Globals.js"]],function(Ct){var wt=Ct.isSafari,xt=Ct.win,jt=xt.document,zt=xt.URL||xt.webkitURL||xt,Ut=Ct.dataURLtoBlob=function(Rt){if((Rt=Rt.replace(/filename=.*;/,"").match(/data:([^;]*)(;base64)?,([0-9A-Za-z+/]+)/))&&3<Rt.length&&xt.atob&&xt.ArrayBuffer&&xt.Uint8Array&&xt.Blob&&zt.createObjectURL){var It=xt.atob(Rt[3]),K=new xt.ArrayBuffer(It.length);K=new xt.Uint8Array(K);for(var et=0;et<K.length;++et)K[et]=It.charCodeAt(et);return Rt=new xt.Blob([K],{type:Rt[1]}),zt.createObjectURL(Rt)}};return Ct=Ct.downloadURL=function(Rt,It){var K=xt.navigator,et=jt.createElement("a");if("string"==typeof Rt||Rt instanceof String||!K.msSaveOrOpenBlob){if(Rt="".concat(Rt),K=/Edge\/\d+/.test(K.userAgent),(wt&&"string"==typeof Rt&&0===Rt.indexOf("data:application/pdf")||K||2e6<Rt.length)&&!(Rt=Ut(Rt)||""))throw Error("Failed to convert to blob");if(typeof et.download<"u")et.href=Rt,et.download=It,jt.body.appendChild(et),et.click(),jt.body.removeChild(et);else try{var st=xt.open(Rt,"chart");if(typeof st>"u"||null===st)throw Error("Failed to open window")}catch{xt.location.href=Rt}}else K.msSaveOrOpenBlob(Rt,It)},{dataURLtoBlob:Ut,downloadURL:Ct}}),te(vt,"Extensions/ExportData/ExportData.js",[vt["Core/Renderer/HTML/AST.js"],vt["Extensions/ExportData/ExportDataDefaults.js"],vt["Core/Globals.js"],vt["Core/Defaults.js"],vt["Extensions/DownloadURL.js"],vt["Core/Series/SeriesRegistry.js"],vt["Core/Utilities.js"]],function(Ct,wt,xt,jt,zt,Ut,Rt){function It(){var pt=this.getCSV(!0);v(j(pt,"text/csv")||"data:text/csv,\ufeff"+encodeURIComponent(pt),this.getFilename()+".csv")}function K(){var pt='<html xmlns:o="urn:schemas-microsoft-com:office:office" xmlns:x="urn:schemas-microsoft-com:office:excel" xmlns="http://www.w3.org/TR/REC-html40"><head>\x3c!--[if gte mso 9]><xml><x:ExcelWorkbook><x:ExcelWorksheets><x:ExcelWorksheet><x:Name>Ark1</x:Name><x:WorksheetOptions><x:DisplayGridlines/></x:WorksheetOptions></x:ExcelWorksheet></x:ExcelWorksheets></x:ExcelWorkbook></xml><![endif]--\x3e<style>td{border:none;font-family: Calibri, sans-serif;} .number{mso-number-format:"0.00";} .text{ mso-number-format:"@";}</style><meta name=ProgId content=Excel.Sheet><meta charset=UTF-8></head><body>'+this.getTable(!0)+"</body></html>";v(j(pt,"application/vnd.ms-excel")||"data:application/vnd.ms-excel;base64,"+it.btoa(unescape(encodeURIComponent(pt))),this.getFilename()+".xls")}function et(pt){var dt="",Y=this.getDataRows(),lt=this.options.exporting.csv,ht=q(lt.decimalPoint,","!==lt.itemDelimiter&&pt?1.1.toLocaleString()[1]:"."),Lt=q(lt.itemDelimiter,","===ht?";":","),At=lt.lineDelimiter;return Y.forEach(function(Wt,Ot){for(var se,_e=Wt.length;_e--;)"string"==typeof(se=Wt[_e])&&(se='"'+se+'"'),"number"==typeof se&&"."!==ht&&(se=se.toString().replace(".",ht)),Wt[_e]=se;Wt.length=Y.length?Y[0].length:0,dt+=Wt.join(Lt),Ot<Y.length-1&&(dt+=At)}),dt}function st(pt){var me,dt=this.hasParallelCoordinates,Y=this.time,lt=this.options.exporting&&this.options.exporting.csv||{},ht=this.xAxis,Lt={},At=[],Wt=[],Ot=[],se=this.options.lang.exportData,_e=se.categoryHeader,We=se.categoryDatetimeHeader,He=function(ye,oi,fi){if(lt.columnHeaderFormatter){var tn=lt.columnHeaderFormatter(ye,oi,fi);if(!1!==tn)return tn}return ye?ye instanceof M?pt?{columnTitle:1<fi?oi:ye.name,topLevelColumnTitle:ye.name}:ye.name+(1<fi?" ("+oi+")":""):ye.options.title&&ye.options.title.text||(ye.dateTime?We:_e):_e},Fe=function(ye,oi,fi){var tn={},Ii={};return oi.forEach(function(Pi){var Ji=(ye.keyToAxis&&ye.keyToAxis[Pi]||Pi)+"Axis";Ji=z(fi)?ye.chart[Ji][fi]:ye[Ji],tn[Pi]=Ji&&Ji.categories||[],Ii[Pi]=Ji&&Ji.dateTime}),{categoryMap:tn,dateTimeValueAxisMap:Ii}},Me=[],qt=0;for(Te in this.series.forEach(function(ye){var Mi,oi=ye.xAxis,fi=ye.options.keys||function(ye,oi){return ye.data.filter(function(fi){return typeof fi.y<"u"&&fi.name}).length&&oi&&!oi.categories&&!ye.keyToAxis?ye.pointArrayMap&&ye.pointArrayMap.filter(function(fi){return"x"===fi}).length?(ye.pointArrayMap.unshift("x"),ye.pointArrayMap):["x","y"]:ye.pointArrayMap||["y"]}(ye,oi),tn=fi.length,Ii=!ye.requireSorting&&{},Pi=ht.indexOf(oi),Ji=Fe(ye,fi);if(!1!==ye.options.includeInDataExport&&!ye.options.isInternal&&!1!==ye.visible){for(ft(Me,function(Ti){return Ti[0]===Pi})||Me.push([Pi,qt]),Mi=0;Mi<tn;)me=He(ye,fi[Mi],fi.length),Ot.push(me.columnTitle||me),pt&&Wt.push(me.topLevelColumnTitle||me),Mi++;var nn={chart:ye.chart,autoIncrement:ye.autoIncrement,options:ye.options,pointArrayMap:ye.pointArrayMap,index:ye.index};ye.options.data.forEach(function(Ti,Cn){var wn={series:nn};dt&&(Ji=Fe(ye,fi,Cn)),ye.pointClass.prototype.applyOptions.apply(wn,[Ti]);var X=wn.x;for(H(Lt[X])&&Lt[X].seriesIndices.includes(nn.index)&&(Ti=Object.keys(Lt).filter(function(bt){return Lt[bt].seriesIndices.includes(nn.index)&&X}).filter(function(bt){return 0===bt.indexOf(String(X))}),X=X.toString()+","+Ti.length),Ti=ye.data[Cn]&&ye.data[Cn].name,Mi=0,(!oi||"name"===ye.exportKey||!dt&&oi&&oi.hasNames&&Ti)&&(X=Ti),Ii&&(Ii[X]&&(X+="|"+Cn),Ii[X]=!0),Lt[X]||(Lt[X]=[],Lt[X].xValues=[]),Lt[X].x=wn.x,Lt[X].name=Ti,Lt[X].xValues[Pi]=wn.x,H(Lt[X].seriesIndices)||(Lt[X].seriesIndices=[]),Lt[X].seriesIndices=w(w([],Lt[X].seriesIndices,!0),[nn.index],!1);Mi<tn;)Lt[X][qt+Mi]=q(Ji.categoryMap[Cn=fi[Mi]][Ti=wn[Cn]],Ji.dateTimeValueAxisMap[Cn]?Y.dateFormat(lt.dateFormat,Ti):null,Ti),Mi++}),qt+=Mi}}),Lt)Object.hasOwnProperty.call(Lt,Te)&&At.push(Lt[Te]);for(se=pt?[Wt,Ot]:[Ot],qt=Me.length;qt--;){var Kt=Me[qt][0],xe=Me[qt][1],be=ht[Kt];At.sort(function(ye,oi){return ye.xValues[Kt]-oi.xValues[Kt]});var Te=He(be);se[0].splice(xe,0,Te),pt&&se[1]&&se[1].splice(xe,0,Te),At.forEach(function(ye){var oi=ye.name;be&&!H(oi)&&(be.dateTime?(ye.x instanceof Date&&(ye.x=ye.x.getTime()),oi=Y.dateFormat(lt.dateFormat,ye.x)):oi=be.categories?q(be.names[ye.x],be.categories[ye.x],ye.x):ye.x),ye.splice(xe,0,oi)})}return se=se.concat(At),rt(this,"exportData",{dataRows:se}),se}function R(pt){var dt=function(Y){if(!Y.tagName||"#text"===Y.tagName)return Y.textContent||"";var lt=Y.attributes,ht="<".concat(Y.tagName);return lt&&Object.keys(lt).forEach(function(Lt){var At=lt[Lt];ht+=" ".concat(Lt,'="').concat(At,'"')}),ht+=">",ht+=Y.textContent||"",(Y.children||[]).forEach(function(Lt){ht+=dt(Lt)}),ht+="</".concat(Y.tagName,">")};return pt=this.getTableAST(pt),dt(pt)}function I(pt){var dt=0,Y=[],lt=this.options,ht=pt?1.1.toLocaleString()[1]:".",Lt=q(lt.exporting.useMultiLevelHeaders,!0);pt=this.getDataRows(Lt);var At=Lt?pt.shift():null,Wt=pt.shift(),Ot=function(He,Fe,pe,Me){var me=q(Me,"");return Fe="highcharts-text"+(Fe?" "+Fe:""),"number"==typeof me?(me=me.toString(),","===ht&&(me=me.replace(".",ht)),Fe="highcharts-number"):Me||(Fe="highcharts-empty"),{tagName:He,attributes:pe=at({class:Fe},pe),textContent:me}};!1!==lt.exporting.tableCaption&&Y.push({tagName:"caption",attributes:{class:"highcharts-table-caption"},textContent:q(lt.exporting.tableCaption,lt.title.text?lt.title.text:"Chart")});for(var se=0,_e=pt.length;se<_e;++se)pt[se].length>dt&&(dt=pt[se].length);Y.push(function(He,Fe,pe){var Me=[],me=0;pe=pe||Fe&&Fe.length;var Kt,qt=0;if(Kt=Lt&&He&&Fe){t:if(Kt=He.length,Fe.length===Kt){for(;Kt--;)if(He[Kt]!==Fe[Kt]){Kt=!1;break t}Kt=!0}else Kt=!1;Kt=!Kt}if(Kt){for(Kt=[];me<pe;++me){var xe=He[me],be=He[me+1];xe===be?++qt:qt?(Kt.push(Ot("th","highcharts-table-topheading",{scope:"col",colspan:qt+1},xe)),qt=0):(xe===Fe[me]?lt.exporting.useRowspanHeaders?(be=2,delete Fe[me]):(be=1,Fe[me]=""):be=1,xe=Ot("th","highcharts-table-topheading",{scope:"col"},xe),1<be&&xe.attributes&&(xe.attributes.valign="top",xe.attributes.rowspan=be),Kt.push(xe))}Me.push({tagName:"tr",children:Kt})}if(Fe){for(Kt=[],me=0,pe=Fe.length;me<pe;++me)typeof Fe[me]<"u"&&Kt.push(Ot("th",null,{scope:"col"},Fe[me]));Me.push({tagName:"tr",children:Kt})}return{tagName:"thead",children:Me}}(At,Wt,Math.max(dt,Wt.length)));var We=[];return pt.forEach(function(He){for(var Fe=[],pe=0;pe<dt;pe++)Fe.push(Ot(pe?"td":"th",null,pe?{}:{scope:"row"},He[pe]));We.push({tagName:"tr",children:Fe})}),Y.push({tagName:"tbody",children:We}),Y={tree:{tagName:"table",id:"highcharts-data-table-".concat(this.index),children:Y}},rt(this,"aftergetTableAST",Y),Y.tree}function A(){this.toggleDataTable(!1)}function x(pt){var dt=(pt=q(pt,!this.isDataTableVisible))&&!this.dataTableDiv;if(dt&&(this.dataTableDiv=l.createElement("div"),this.dataTableDiv.className="highcharts-data-table",this.renderTo.parentNode.insertBefore(this.dataTableDiv,this.renderTo.nextSibling)),this.dataTableDiv){var Y=this.dataTableDiv.style,lt=Y.display;Y.display=pt?"block":"none",pt&&(this.dataTableDiv.innerHTML=Ct.emptyHTML,new Ct([this.getTableAST()]).addToDOM(this.dataTableDiv),rt(this,"afterViewData",{element:this.dataTableDiv,wasHidden:dt||lt!==Y.display}))}this.isDataTableVisible=pt,dt=this.exportDivElements,lt=(Y=this.options.exporting)&&Y.buttons&&Y.buttons.contextButton.menuItems,pt=this.options.lang,Y&&Y.menuItemDefinitions&&pt&&pt.viewData&&pt.hideData&&lt&&dt&&(dt=dt[lt.indexOf("viewData")])&&Ct.setElementHTML(dt,this.isDataTableVisible?pt.hideData:pt.viewData)}function T(){this.toggleDataTable(!0)}function j(pt,dt){var Y=it.navigator,lt=-1<Y.userAgent.indexOf("WebKit")&&0>Y.userAgent.indexOf("Chrome"),ht=it.URL||it.webkitURL||it;try{if(Y.msSaveOrOpenBlob&&it.MSBlobBuilder){var Lt=new it.MSBlobBuilder;return Lt.append(pt),Lt.getBlob("image/svg+xml")}if(!lt)return ht.createObjectURL(new it.Blob(["\ufeff"+pt],{type:dt}))}catch{}}function V(){var pt=this,dt=pt.dataTableDiv,Y=document.querySelectorAll("thead")[0].querySelectorAll("tr")[0];dt&&Y.childNodes.forEach(function(ht){var Lt=ht.closest("table");ht.addEventListener("click",function(){var At=w([],dt.querySelectorAll("tr:not(thead tr)"),!0),Wt=w([],ht.parentNode.children,!0);At.sort(function(ht,Lt){return function(At,Wt){var Ot=(Lt?At:Wt).children[ht].textContent;return At=(Lt?Wt:At).children[ht].textContent,""===Ot||""===At||isNaN(Ot)||isNaN(At)?Ot.toString().localeCompare(At):Ot-At}}(Wt.indexOf(ht),pt.ascendingOrderInTable=!pt.ascendingOrderInTable)).forEach(function(Ot){Lt.appendChild(Ot)}),Wt.forEach(function(Ot){["highcharts-sort-ascending","highcharts-sort-descending"].forEach(function(se){Ot.classList.contains(se)&&Ot.classList.remove(se)})}),ht.classList.add(pt.ascendingOrderInTable?"highcharts-sort-ascending":"highcharts-sort-descending")})})}function nt(){this.options&&this.options.exporting&&this.options.exporting.showTable&&!this.options.chart.forExport&&this.viewData()}var w=this&&this.__spreadArray||function(pt,dt,Y){if(Y||2===arguments.length)for(var Lt,lt=0,ht=dt.length;lt<ht;lt++)!Lt&&lt in dt||(Lt||(Lt=Array.prototype.slice.call(dt,0,lt)),Lt[lt]=dt[lt]);return pt.concat(Lt||Array.prototype.slice.call(dt))},l=xt.doc,it=xt.win,N=jt.getOptions,G=jt.setOptions,v=zt.downloadURL,M=Ut.series,b=(xt=Ut.seriesTypes).arearange,k=xt.gantt,_=xt.map,y=xt.mapbubble,O=xt.treemap,B=Rt.addEvent,H=Rt.defined,at=Rt.extend,ft=Rt.find,rt=Rt.fireEvent,z=Rt.isNumber,q=Rt.pick,mt=[];return{compose:function(pt){-1===mt.indexOf(pt)&&(mt.push(pt),B(pt,"afterViewData",V),B(pt,"render",nt),(pt=pt.prototype).downloadCSV=It,pt.downloadXLS=K,pt.getCSV=et,pt.getDataRows=st,pt.getTable=R,pt.getTableAST=I,pt.hideData=A,pt.toggleDataTable=x,pt.viewData=T),-1===mt.indexOf(G)&&(mt.push(G),(pt=N().exporting)&&(at(pt.menuItemDefinitions,{downloadCSV:{textKey:"downloadCSV",onclick:function(){this.downloadCSV()}},downloadXLS:{textKey:"downloadXLS",onclick:function(){this.downloadXLS()}},viewData:{textKey:"viewData",onclick:function(){this.toggleDataTable()}}}),pt.buttons&&pt.buttons.contextButton.menuItems&&pt.buttons.contextButton.menuItems.push("separator","downloadCSV","downloadXLS","viewData")),G(wt)),b&&-1===mt.indexOf(b)&&(mt.push(b),b.prototype.keyToAxis={low:"y",high:"y"}),k&&-1===mt.indexOf(k)&&(mt.push(k),k.prototype.keyToAxis={start:"x",end:"x"}),_&&-1===mt.indexOf(_)&&(mt.push(_),_.prototype.exportKey="name"),y&&-1===mt.indexOf(y)&&(mt.push(y),y.prototype.exportKey="name"),O&&-1===mt.indexOf(O)&&(mt.push(O),O.prototype.exportKey="name")}}}),te(vt,"masters/modules/export-data.src.js",[vt["Core/Globals.js"],vt["Extensions/ExportData/ExportData.js"]],function(Ct,wt){wt.compose(Ct.Chart)})}),function(vt){"object"==typeof module&&module.exports?(vt.default=vt,module.exports=vt):"function"==typeof define&&define.amd?define("highcharts/modules/exporting",["highcharts"],function(te){return vt(te),vt.Highcharts=te,vt}):vt(typeof Highcharts<"u"?Highcharts:void 0)}(function(vt){function te(Ct,wt,xt,jt){Ct.hasOwnProperty(wt)||(Ct[wt]=jt.apply(null,xt),"function"==typeof CustomEvent&&window.dispatchEvent(new CustomEvent("HighchartsModuleLoaded",{detail:{path:wt,module:Ct[wt]}})))}te(vt=vt?vt._modules:{},"Core/Chart/ChartNavigationComposition.js",[],function(){var Ct;return function(wt){wt.compose=function(jt){return jt.navigation||(jt.navigation=new xt(jt)),jt};var xt=function(){function jt(zt){this.updates=[],this.chart=zt}return jt.prototype.addUpdate=function(zt){this.chart.navigation.updates.push(zt)},jt.prototype.update=function(zt,Ut){var Rt=this;this.updates.forEach(function(It){It.call(Rt.chart,zt,Ut)})},jt}();wt.Additions=xt}(Ct||(Ct={})),Ct}),te(vt,"Extensions/Exporting/ExportingDefaults.js",[vt["Core/Globals.js"]],function(Ct){return Ct=Ct.isTouchDevice,{exporting:{type:"image/png",url:"https://export.highcharts.com/",pdfFont:{normal:void 0,bold:void 0,bolditalic:void 0,italic:void 0},printMaxWidth:780,scale:2,buttons:{contextButton:{className:"highcharts-contextbutton",menuClassName:"highcharts-contextmenu",symbol:"menu",titleKey:"contextButtonTitle",menuItems:"viewFullscreen printChart separator downloadPNG downloadJPEG downloadPDF downloadSVG".split(" ")}},menuItemDefinitions:{viewFullscreen:{textKey:"viewFullscreen",onclick:function(){this.fullscreen&&this.fullscreen.toggle()}},printChart:{textKey:"printChart",onclick:function(){this.print()}},separator:{separator:!0},downloadPNG:{textKey:"downloadPNG",onclick:function(){this.exportChart()}},downloadJPEG:{textKey:"downloadJPEG",onclick:function(){this.exportChart({type:"image/jpeg"})}},downloadPDF:{textKey:"downloadPDF",onclick:function(){this.exportChart({type:"application/pdf"})}},downloadSVG:{textKey:"downloadSVG",onclick:function(){this.exportChart({type:"image/svg+xml"})}}}},lang:{viewFullscreen:"View in full screen",exitFullscreen:"Exit from full screen",printChart:"Print chart",downloadPNG:"Download PNG image",downloadJPEG:"Download JPEG image",downloadPDF:"Download PDF document",downloadSVG:"Download SVG vector image",contextButtonTitle:"Chart context menu"},navigation:{buttonOptions:{symbolSize:14,symbolX:12.5,symbolY:10.5,align:"right",buttonSpacing:3,height:22,verticalAlign:"top",width:24,symbolFill:"#666666",symbolStroke:"#666666",symbolStrokeWidth:3,theme:{padding:5}},menuStyle:{border:"1px solid ".concat("#999999"),background:"#ffffff",padding:"5px 0"},menuItemStyle:{padding:"0.5em 1em",color:"#333333",background:"none",fontSize:Ct?"14px":"11px",transition:"background 250ms, color 250ms"},menuItemHoverStyle:{background:"#335cad",color:"#ffffff"}}}}),te(vt,"Extensions/Exporting/ExportingSymbols.js",[],function(){var Ct;return function(wt){function xt(Ut,Rt,It,K){return[["M",Ut,Rt+2.5],["L",Ut+It,Rt+2.5],["M",Ut,Rt+K/2+.5],["L",Ut+It,Rt+K/2+.5],["M",Ut,Rt+K-1.5],["L",Ut+It,Rt+K-1.5]]}function jt(Ut,Rt,It,K){return Ut=K/3-2,(K=[]).concat(this.circle(It-Ut,Rt,Ut,Ut),this.circle(It-Ut,Rt+Ut+4,Ut,Ut),this.circle(It-Ut,Rt+2*(Ut+4),Ut,Ut))}var zt=[];wt.compose=function(Ut){-1===zt.indexOf(Ut)&&(zt.push(Ut),(Ut=Ut.prototype.symbols).menu=xt,Ut.menuball=jt.bind(Ut))}}(Ct||(Ct={})),Ct}),te(vt,"Extensions/Exporting/Fullscreen.js",[vt["Core/Renderer/HTML/AST.js"],vt["Core/Utilities.js"]],function(Ct,wt){function xt(){this.fullscreen=new Rt(this)}var jt=wt.addEvent,zt=wt.fireEvent,Ut=[],Rt=function(){function It(K){this.chart=K,this.isOpen=!1,K=K.renderTo,this.browserProps||("function"==typeof K.requestFullscreen?this.browserProps={fullscreenChange:"fullscreenchange",requestFullscreen:"requestFullscreen",exitFullscreen:"exitFullscreen"}:K.mozRequestFullScreen?this.browserProps={fullscreenChange:"mozfullscreenchange",requestFullscreen:"mozRequestFullScreen",exitFullscreen:"mozCancelFullScreen"}:K.webkitRequestFullScreen?this.browserProps={fullscreenChange:"webkitfullscreenchange",requestFullscreen:"webkitRequestFullScreen",exitFullscreen:"webkitExitFullscreen"}:K.msRequestFullscreen&&(this.browserProps={fullscreenChange:"MSFullscreenChange",requestFullscreen:"msRequestFullscreen",exitFullscreen:"msExitFullscreen"}))}return It.compose=function(K){-1===Ut.indexOf(K)&&(Ut.push(K),jt(K,"beforeRender",xt))},It.prototype.close=function(){var K=this,et=K.chart,st=et.options.chart;zt(et,"fullscreenClose",null,function(){K.isOpen&&K.browserProps&&et.container.ownerDocument instanceof Document&&et.container.ownerDocument[K.browserProps.exitFullscreen](),K.unbindFullscreenEvent&&(K.unbindFullscreenEvent=K.unbindFullscreenEvent()),et.setSize(K.origWidth,K.origHeight,!1),K.origWidth=void 0,K.origHeight=void 0,st.width=K.origWidthOption,st.height=K.origHeightOption,K.origWidthOption=void 0,K.origHeightOption=void 0,K.isOpen=!1,K.setButtonText()})},It.prototype.open=function(){var K=this,et=K.chart,st=et.options.chart;zt(et,"fullscreenOpen",null,function(){if(st&&(K.origWidthOption=st.width,K.origHeightOption=st.height),K.origWidth=et.chartWidth,K.origHeight=et.chartHeight,K.browserProps){var R=jt(et.container.ownerDocument,K.browserProps.fullscreenChange,function(){K.isOpen?(K.isOpen=!1,K.close()):(et.setSize(null,null,!1),K.isOpen=!0,K.setButtonText())}),I=jt(et,"destroy",R);K.unbindFullscreenEvent=function(){R(),I()};var A=et.renderTo[K.browserProps.requestFullscreen]();A&&A.catch(function(){alert("Full screen is not supported inside a frame.")})}})},It.prototype.setButtonText=function(){var K=this.chart,et=K.exportDivElements,st=K.options.exporting,R=st&&st.buttons&&st.buttons.contextButton.menuItems;K=K.options.lang,st&&st.menuItemDefinitions&&K&&K.exitFullscreen&&K.viewFullscreen&&R&&et&&(et=et[R.indexOf("viewFullscreen")])&&Ct.setElementHTML(et,this.isOpen?K.exitFullscreen:st.menuItemDefinitions.viewFullscreen.text||K.viewFullscreen)},It.prototype.toggle=function(){this.isOpen?this.close():this.open()},It}();return Rt}),te(vt,"Core/HttpUtilities.js",[vt["Core/Globals.js"],vt["Core/Utilities.js"]],function(Ct,wt){var xt=Ct.doc,jt=wt.createElement,zt=wt.discardElement,Ut=wt.merge,Rt=wt.objectEach,It={ajax:function(K){var et={json:"application/json",xml:"application/xml",text:"text/plain",octet:"application/octet-stream"},st=new XMLHttpRequest;if(!K.url)return!1;st.open((K.type||"get").toUpperCase(),K.url,!0),K.headers&&K.headers["Content-Type"]||st.setRequestHeader("Content-Type",et[K.dataType||"json"]||et.text),Rt(K.headers,function(R,I){st.setRequestHeader(I,R)}),K.responseType&&(st.responseType=K.responseType),st.onreadystatechange=function(){if(4===st.readyState){if(200===st.status){if("blob"!==K.responseType){var R=st.responseText;if("json"===K.dataType)try{R=JSON.parse(R)}catch(I){if(I instanceof Error)return void(K.error&&K.error(st,I))}}return K.success&&K.success(R,st)}K.error&&K.error(st,st.responseText)}},K.data&&"string"!=typeof K.data&&(K.data=JSON.stringify(K.data)),st.send(K.data)},getJSON:function(K,et){It.ajax({url:K,success:et,dataType:"json",headers:{"Content-Type":"text/plain"}})},post:function(K,et,st){var R=jt("form",Ut({method:"post",action:K,enctype:"multipart/form-data"},st),{display:"none"},xt.body);Rt(et,function(I,A){jt("input",{type:"hidden",name:A,value:I},void 0,R)}),R.submit(),zt(R)}};return It}),te(vt,"Extensions/Exporting/Exporting.js",[vt["Core/Renderer/HTML/AST.js"],vt["Core/Chart/Chart.js"],vt["Core/Chart/ChartNavigationComposition.js"],vt["Core/Defaults.js"],vt["Extensions/Exporting/ExportingDefaults.js"],vt["Extensions/Exporting/ExportingSymbols.js"],vt["Extensions/Exporting/Fullscreen.js"],vt["Core/Globals.js"],vt["Core/HttpUtilities.js"],vt["Core/Utilities.js"]],function(Ct,wt,xt,jt,zt,Ut,Rt,It,K,et){var _,st=jt.defaultOptions,R=jt.setOptions,I=It.doc,A=It.SVG_NS,x=It.win,T=et.addEvent,j=et.css,V=et.createElement,nt=et.discardElement,w=et.extend,l=et.find,it=et.fireEvent,N=et.isObject,G=et.merge,v=et.objectEach,M=et.pick,b=et.removeEvent,k=et.uniqueKey;return function(y){function O(pe){var Me=this,me=Me.renderer,qt=G(Me.options.navigation.buttonOptions,pe),Kt=qt.onclick,xe=qt.menuItems,be=qt.symbolSize||12;if(Me.btnCount||(Me.btnCount=0),Me.exportDivElements||(Me.exportDivElements=[],Me.exportSVGElements=[]),!1!==qt.enabled&&qt.theme){var ye,Te=qt.theme;Me.styledMode||(Te.fill=M(Te.fill,"#ffffff"),Te.stroke=M(Te.stroke,"none")),Kt?ye=function(tn){tn&&tn.stopPropagation(),Kt.call(Me,tn)}:xe&&(ye=function(tn){tn&&tn.stopPropagation(),Me.contextMenu(oi.menuClassName,xe,oi.translateX,oi.translateY,oi.width,oi.height,oi),oi.setState(2)}),qt.text&&qt.symbol?Te.paddingLeft=M(Te.paddingLeft,30):qt.text||w(Te,{width:qt.width,height:qt.height,padding:0}),Me.styledMode||(Te["stroke-linecap"]="round",Te.fill=M(Te.fill,"#ffffff"),Te.stroke=M(Te.stroke,"none"));var oi=me.button(qt.text,0,0,ye,Te,void 0,void 0,void 0,void 0,qt.useHTML).addClass(pe.className).attr({title:M(Me.options.lang[qt._titleKey||qt.titleKey],"")});if(oi.menuClassName=pe.menuClassName||"highcharts-menu-"+Me.btnCount++,qt.symbol){var fi=me.symbol(qt.symbol,qt.symbolX-be/2,qt.symbolY-be/2,be,be,{width:be,height:be}).addClass("highcharts-button-symbol").attr({zIndex:1}).add(oi);Me.styledMode||fi.attr({stroke:qt.symbolStroke,fill:qt.symbolFill,"stroke-width":qt.symbolStrokeWidth||1})}oi.add(Me.exportingGroup).align(w(qt,{width:oi.width,x:M(qt.x,Me.buttonOffset)}),!0,"spacingBox"),Me.buttonOffset+=(oi.width+qt.buttonSpacing)*("right"===qt.align?-1:1),Me.exportSVGElements.push(oi,fi)}}function B(){if(this.printReverseInfo){var pe=this.printReverseInfo,Me=pe.childNodes,me=pe.origDisplay;pe=pe.resetParams,this.moveContainers(this.renderTo),[].forEach.call(Me,function(qt,Kt){1===qt.nodeType&&(qt.style.display=me[Kt]||"")}),this.isPrinting=!1,pe&&this.setSize.apply(this,pe),delete this.printReverseInfo,Fe=void 0,it(this,"afterPrint")}}function H(){var pe=I.body,Me=this.options.exporting.printMaxWidth,me={childNodes:pe.childNodes,origDisplay:[],resetParams:void 0};this.isPrinting=!0,this.pointer.reset(null,0),it(this,"beforePrint"),Me&&this.chartWidth>Me&&(me.resetParams=[this.options.chart.width,void 0,!1],this.setSize(Me,void 0,!1)),[].forEach.call(me.childNodes,function(qt,Kt){1===qt.nodeType&&(me.origDisplay[Kt]=qt.style.display,qt.style.display="none")}),this.moveContainers(pe),this.printReverseInfo=me}function at(pe){pe.renderExporting(),T(pe,"redraw",pe.renderExporting),T(pe,"destroy",pe.destroyExport)}function ft(pe,Me,me,qt,Kt,xe,be){var Te=this,ye=Te.options.navigation,oi=Te.chartWidth,fi=Te.chartHeight,tn="cache-"+pe,Ii=Math.max(Kt,xe),Pi=Te[tn];if(!Pi){Te.exportContextMenu=Te[tn]=Pi=V("div",{className:pe},{position:"absolute",zIndex:1e3,padding:Ii+"px",pointerEvents:"auto"},Te.fixedDiv||Te.container);var Ji=V("ul",{className:"highcharts-menu"},{listStyle:"none",margin:0,padding:0},Pi);Te.styledMode||j(Ji,w({MozBoxShadow:"3px 3px 10px #888",WebkitBoxShadow:"3px 3px 10px #888",boxShadow:"3px 3px 10px #888"},ye.menuStyle)),Pi.hideMenu=function(){j(Pi,{display:"none"}),be&&be.setState(0),Te.openMenu=!1,j(Te.renderTo,{overflow:"hidden"}),j(Te.container,{overflow:"hidden"}),et.clearTimeout(Pi.hideTimer),it(Te,"exportMenuHidden")},Te.exportEvents.push(T(Pi,"mouseleave",function(){Pi.hideTimer=x.setTimeout(Pi.hideMenu,500)}),T(Pi,"mouseenter",function(){et.clearTimeout(Pi.hideTimer)}),T(I,"mouseup",function(Mi){Te.pointer.inClass(Mi.target,pe)||Pi.hideMenu()}),T(Pi,"click",function(){Te.openMenu&&Pi.hideMenu()})),Me.forEach(function(Mi){if("string"==typeof Mi&&(Mi=Te.options.exporting.menuItemDefinitions[Mi]),N(Mi,!0)){var nn=void 0;Mi.separator?nn=V("hr",void 0,void 0,Ji):("viewData"===Mi.textKey&&Te.isDataTableVisible&&(Mi.textKey="hideData"),nn=V("li",{className:"highcharts-menu-item",onclick:function(Ti){Ti&&Ti.stopPropagation(),Pi.hideMenu(),Mi.onclick&&Mi.onclick.apply(Te,arguments)}},void 0,Ji),Ct.setElementHTML(nn,Mi.text||Te.options.lang[Mi.textKey]),Te.styledMode||(nn.onmouseover=function(){j(this,ye.menuItemHoverStyle)},nn.onmouseout=function(){j(this,ye.menuItemStyle)},j(nn,w({cursor:"pointer"},ye.menuItemStyle||{})))),Te.exportDivElements.push(nn)}}),Te.exportDivElements.push(Ji,Pi),Te.exportMenuWidth=Pi.offsetWidth,Te.exportMenuHeight=Pi.offsetHeight}Me={display:"block"},me+Te.exportMenuWidth>oi?Me.right=oi-me-Kt-Ii+"px":Me.left=me-Ii+"px",qt+xe+Te.exportMenuHeight>fi&&"top"!==be.alignOptions.verticalAlign?Me.bottom=fi-qt-Ii+"px":Me.top=qt+xe-Ii+"px",j(Pi,Me),j(Te.renderTo,{overflow:""}),j(Te.container,{overflow:""}),Te.openMenu=!0,it(Te,"exportMenuShown")}function rt(pe){var Kt,Me=pe?pe.target:this,me=Me.exportSVGElements,qt=Me.exportDivElements;pe=Me.exportEvents,me&&(me.forEach(function(xe,be){xe&&(xe.onclick=xe.ontouchstart=null,Me[Kt="cache-"+xe.menuClassName]&&delete Me[Kt],me[be]=xe.destroy())}),me.length=0),Me.exportingGroup&&(Me.exportingGroup.destroy(),delete Me.exportingGroup),qt&&(qt.forEach(function(xe,be){xe&&(et.clearTimeout(xe.hideTimer),b(xe,"mouseleave"),qt[be]=xe.onmouseout=xe.onmouseover=xe.ontouchstart=xe.onclick=null,nt(xe))}),qt.length=0),pe&&(pe.forEach(function(xe){xe()}),pe.length=0)}function z(pe,Me){Me=this.getSVGForExport(pe,Me),pe=G(this.options.exporting,pe),K.post(pe.url,{filename:pe.filename?pe.filename.replace(/\//g,"-"):this.getFilename(),type:pe.type,width:pe.width||0,scale:pe.scale,svg:Me},pe.formAttributes)}function q(){return this.styledMode&&this.inlineStyles(),this.container.innerHTML}function mt(){var pe=this.userOptions.title&&this.userOptions.title.text,Me=this.options.exporting.filename;return Me?Me.replace(/\//g,"-"):("string"==typeof pe&&(Me=pe.toLowerCase().replace(/<\/?[^>]+(>|$)/g,"").replace(/[\s_]+/g,"-").replace(/[^a-z0-9\-]/g,"").replace(/^[\-]+/g,"").replace(/[\-]+/g,"-").substr(0,24).replace(/[\-]+$/g,"")),(!Me||5>Me.length)&&(Me="chart"),Me)}function pt(pe){var Me,me=G(this.options,pe);me.plotOptions=G(this.userOptions.plotOptions,pe&&pe.plotOptions),me.time=G(this.userOptions.time,pe&&pe.time);var qt=V("div",null,{position:"absolute",top:"-9999em",width:this.chartWidth+"px",height:this.chartHeight+"px"},I.body),Kt=this.renderTo.style.width,xe=this.renderTo.style.height;Kt=me.exporting.sourceWidth||me.chart.width||/px$/.test(Kt)&&parseInt(Kt,10)||(me.isGantt?800:600),xe=me.exporting.sourceHeight||me.chart.height||/px$/.test(xe)&&parseInt(xe,10)||400,w(me.chart,{animation:!1,renderTo:qt,forExport:!0,renderer:"SVGRenderer",width:Kt,height:xe}),me.exporting.enabled=!1,delete me.data,me.series=[],this.series.forEach(function(ye){(Me=G(ye.userOptions,{animation:!1,enableMouseTracking:!1,showCheckbox:!1,visible:ye.visible})).isInternal||me.series.push(Me)});var be={};this.axes.forEach(function(ye){ye.userOptions.internalKey||(ye.userOptions.internalKey=k()),ye.options.isInternal||(be[ye.coll]||(be[ye.coll]=!0,me[ye.coll]=[]),me[ye.coll].push(G(ye.userOptions,{visible:ye.visible})))});var Te=new this.constructor(me,this.callback);return pe&&["xAxis","yAxis","series"].forEach(function(ye){var oi={};pe[ye]&&(oi[ye]=pe[ye],Te.update(oi))}),this.axes.forEach(function(ye){var oi=l(Te.axes,function(Ii){return Ii.options.internalKey===ye.userOptions.internalKey}),fi=ye.getExtremes(),tn=fi.userMin;fi=fi.userMax,oi&&(typeof tn<"u"&&tn!==oi.min||typeof fi<"u"&&fi!==oi.max)&&oi.setExtremes(tn,fi,!0,!1)}),xe=Te.getChartHTML(),it(this,"getSVG",{chartCopy:Te}),xe=this.sanitizeSVG(xe,me),me=null,Te.destroy(),nt(qt),xe}function dt(pe,Me){var me=this.options.exporting;return this.getSVG(G({chart:{borderRadius:0}},me.chartOptions,Me,{exporting:{sourceWidth:pe&&pe.sourceWidth||me.sourceWidth,sourceHeight:pe&&pe.sourceHeight||me.sourceHeight}}))}function Y(pe){return pe.replace(/([A-Z])/g,function(Me,me){return"-"+me.toLowerCase()})}function lt(){var Kt,Me=_e,me=y.inlineAllowlist,qt={},xe=I.createElement("iframe");j(xe,{width:"1px",height:"1px",visibility:"hidden"}),I.body.appendChild(xe);var be=xe.contentWindow&&xe.contentWindow.document;be&&be.body.appendChild(be.createElementNS(A,"svg")),function pe(Te){var ye={};if(be&&1===Te.nodeType&&-1===He.indexOf(Te.nodeName)){var oi=x.getComputedStyle(Te,null),fi="svg"===Te.nodeName?{}:x.getComputedStyle(Te.parentNode,null);if(!qt[Te.nodeName]){Kt=be.getElementsByTagName("svg")[0];var tn=be.createElementNS(Te.namespaceURI,Te.nodeName);Kt.appendChild(tn);var Ii=x.getComputedStyle(tn,null),Pi={};for(var Ji in Ii)"string"!=typeof Ii[Ji]||/^[0-9]+$/.test(Ji)||(Pi[Ji]=Ii[Ji]);qt[Te.nodeName]=Pi,"text"===Te.nodeName&&delete qt.text.fill,Kt.removeChild(tn)}for(var Mi in oi)if(It.isFirefox||It.isMS||It.isSafari||Object.hasOwnProperty.call(oi,Mi)){Ji=oi[Mi];var nn=Mi;if(tn=Ii=!1,me.length){for(Pi=me.length;Pi--&&!Ii;)Ii=me[Pi].test(nn);tn=!Ii}for("transform"===nn&&"none"===Ji&&(tn=!0),Pi=Me.length;Pi--&&!tn;)tn=Me[Pi].test(nn)||"function"==typeof Ji;tn||fi[nn]===Ji&&"svg"!==Te.nodeName||qt[Te.nodeName][nn]===Ji||(We&&-1===We.indexOf(nn)?ye[nn]=Ji:Ji&&Te.setAttribute(Y(nn),Ji))}j(Te,ye),"svg"===Te.nodeName&&Te.setAttribute("stroke-width","1px"),"text"!==Te.nodeName&&[].forEach.call(Te.children||Te.childNodes,pe)}}(this.container.querySelector("svg")),Kt.parentNode.removeChild(Kt),xe.parentNode.removeChild(xe)}function ht(pe){(this.fixedDiv?[this.fixedDiv,this.scrollingContainer]:[this.container]).forEach(function(Me){pe.appendChild(Me)})}function Lt(){var pe=this;pe.exporting={update:function(Me,me){pe.isDirtyExporting=!0,G(!0,pe.options.exporting,Me),M(me,!0)&&pe.redraw()}},xt.compose(pe).navigation.addUpdate(function(Me,me){pe.isDirtyExporting=!0,G(!0,pe.options.navigation,Me),M(me,!0)&&pe.redraw()})}function At(){var pe=this;pe.isPrinting||(Fe=pe,It.isSafari||pe.beforePrint(),setTimeout(function(){x.focus(),x.print(),It.isSafari||setTimeout(function(){pe.afterPrint()},1e3)},1))}function Wt(){var pe=this,Me=pe.options.exporting,me=Me.buttons,qt=pe.isDirtyExporting||!pe.exportSVGElements;pe.buttonOffset=0,pe.isDirtyExporting&&pe.destroyExport(),qt&&!1!==Me.enabled&&(pe.exportEvents=[],pe.exportingGroup=pe.exportingGroup||pe.renderer.g("exporting-group").attr({zIndex:3}).add(),v(me,function(Kt){pe.addButton(Kt)}),pe.isDirtyExporting=!1)}function Ot(pe,Me){var me=pe.indexOf("</svg>")+6,qt=pe.substr(me);return pe=pe.substr(0,me),Me&&Me.exporting&&Me.exporting.allowHTML&&qt&&(qt='<foreignObject x="0" y="0" width="'+Me.chart.width+'" height="'+Me.chart.height+'"><body xmlns="http://www.w3.org/1999/xhtml">'+qt.replace(/(<(?:img|br).*?(?=>))>/g,"$1 />")+"</body></foreignObject>",pe=pe.replace("</svg>",qt+"</svg>")),pe=pe.replace(/zIndex="[^"]+"/g,"").replace(/symbolName="[^"]+"/g,"").replace(/jQuery[0-9]+="[^"]+"/g,"").replace(/url\(("|&quot;)(.*?)("|&quot;);?\)/g,"url($2)").replace(/url\([^#]+#/g,"url(#").replace(/<svg /,'<svg xmlns:xlink="http://www.w3.org/1999/xlink" ').replace(/ (|NS[0-9]+:)href=/g," xlink:href=").replace(/\n/," ").replace(/(fill|stroke)="rgba\(([ 0-9]+,[ 0-9]+,[ 0-9]+),([ 0-9\.]+)\)"/g,'$1="rgb($2)" $1-opacity="$3"').replace(/&nbsp;/g,"\xa0").replace(/&shy;/g,"\xad"),this.ieSanitizeSVG&&(pe=this.ieSanitizeSVG(pe)),pe}var se=[],_e=[/-/,/^(clipPath|cssText|d|height|width)$/,/^font$/,/[lL]ogical(Width|Height)$/,/^parentRule$/,/perspective/,/TapHighlightColor/,/^transition/,/^length$/,/^[0-9]+$/],We="fill stroke strokeLinecap strokeLinejoin strokeWidth textAnchor x y".split(" ");y.inlineAllowlist=[];var Fe,He=["clipPath","defs","desc"];y.compose=function(pe,Me){Ut.compose(Me),Rt.compose(pe),-1===se.indexOf(pe)&&(se.push(pe),(Me=pe.prototype).afterPrint=B,Me.exportChart=z,Me.inlineStyles=lt,Me.print=At,Me.sanitizeSVG=Ot,Me.getChartHTML=q,Me.getSVG=pt,Me.getSVGForExport=dt,Me.getFilename=mt,Me.moveContainers=ht,Me.beforePrint=H,Me.contextMenu=ft,Me.addButton=O,Me.destroyExport=rt,Me.renderExporting=Wt,Me.callbacks.push(at),T(pe,"init",Lt),It.isSafari&&It.win.matchMedia("print").addListener(function(me){Fe&&(me.matches?Fe.beforePrint():Fe.afterPrint())})),-1===se.indexOf(R)&&(se.push(R),st.exporting=G(zt.exporting,st.exporting),st.lang=G(zt.lang,st.lang),st.navigation=G(zt.navigation,st.navigation))}}(_||(_={})),_}),te(vt,"masters/modules/exporting.src.js",[vt["Core/Globals.js"],vt["Extensions/Exporting/Exporting.js"],vt["Core/HttpUtilities.js"]],function(Ct,wt,xt){Ct.HttpUtilities=xt,Ct.ajax=xt.ajax,Ct.getJSON=xt.getJSON,Ct.post=xt.post,wt.compose(Ct.Chart,Ct.Renderer)})}),function(vt){"object"==typeof module&&module.exports?(vt.default=vt,module.exports=vt):"function"==typeof define&&define.amd?define("highcharts/highcharts-3d",["highcharts"],function(te){return vt(te),vt.Highcharts=te,vt}):vt(typeof Highcharts<"u"?Highcharts:void 0)}(function(vt){function te(Ct,wt,xt,jt){Ct.hasOwnProperty(wt)||(Ct[wt]=jt.apply(null,xt),"function"==typeof CustomEvent&&window.dispatchEvent(new CustomEvent("HighchartsModuleLoaded",{detail:{path:wt,module:Ct[wt]}})))}te(vt=vt?vt._modules:{},"Core/Math3D.js",[vt["Core/Globals.js"],vt["Core/Utilities.js"]],function(Ct,wt){function xt(It,K,et,st){var R=K.options.chart.options3d,I=Rt(st,!!et&&K.inverted),A={x:K.plotWidth/2,y:K.plotHeight/2,z:R.depth/2,vd:Rt(R.depth,1)*Rt(R.viewDistance,0)},x=K.scale3d||1;st=Ut*R.beta*(I?-1:1),R=Ut*R.alpha*(I?-1:1);var T=Math.cos(R),j=Math.cos(-st),V=Math.sin(R),nt=Math.sin(-st);return et||(A.x+=K.plotLeft,A.y+=K.plotTop),It.map(function(w){var l=(I?w.y:w.x)-A.x,it=(I?w.x:w.y)-A.y;return(it=jt(l={x:j*l-nt*(w=(w.z||0)-A.z),y:-V*nt*l+T*it-j*V*w,z:T*nt*l+V*it+T*j*w},A,A.vd)).x=it.x*x+A.x,it.y=it.y*x+A.y,it.z=l.z*x+A.z,{x:I?it.y:it.x,y:I?it.x:it.y,z:it.z}})}function jt(It,K,et){return{x:It.x*(K=0<et&&et<Number.POSITIVE_INFINITY?et/(It.z+K.z+et):1),y:It.y*K}}function zt(It){var et,K=0;for(et=0;et<It.length;et++){var st=(et+1)%It.length;K+=It[et].x*It[st].y-It[st].x*It[et].y}return K/2}var Ut=Ct.deg2rad,Rt=wt.pick;return{perspective:xt,perspective3D:jt,pointCameraDistance:function(It,K){var et=K.options.chart.options3d,st=K.plotWidth/2;return K=K.plotHeight/2,et=Rt(et.depth,1)*Rt(et.viewDistance,0)+et.depth,Math.sqrt(Math.pow(st-Rt(It.plotX,It.x),2)+Math.pow(K-Rt(It.plotY,It.y),2)+Math.pow(et-Rt(It.plotZ,It.z),2))},shapeArea:zt,shapeArea3D:function(It,K,et){return zt(xt(It,K,et))}}}),te(vt,"Core/Renderer/SVG/SVGElement3D.js",[vt["Core/Color/Color.js"],vt["Core/Renderer/SVG/SVGElement.js"],vt["Core/Utilities.js"]],function(Ct,wt,xt){var jt=Ct.parse,zt=xt.defined,Ut=xt.objectEach,Rt=xt.pick,It={base:{initArgs:function(K){var et=this,st=et.renderer,R=st[et.pathType+"Path"](K),I=R.zIndexes;et.parts.forEach(function(A){var x={class:"highcharts-3d-"+A,zIndex:I[A]||0};st.styledMode&&("top"===A?x.filter="url(#highcharts-brighter)":"side"===A&&(x.filter="url(#highcharts-darker)")),et[A]=st.path(R[A]).attr(x).add(et)}),et.attr({"stroke-linejoin":"round",zIndex:I.group}),et.originalDestroy=et.destroy,et.destroy=et.destroyParts,et.forcedSides=R.forcedSides},singleSetterForParts:function(K,et,st,R,I,A){var x={};R=[null,null,R||"attr",I,A];var T=st&&st.zIndexes;return st?(T&&T.group&&this.attr({zIndex:T.group}),Ut(st,function(j,V){x[V]={},x[V][K]=j,T&&(x[V].zIndex=st.zIndexes[V]||0)}),R[1]=x):(x[K]=et,R[0]=x),this.processParts.apply(this,R)},processParts:function(K,et,st,R,I){var A=this;return A.parts.forEach(function(x){et&&(K=Rt(et[x],!1)),!1!==K&&A[x][st](K,R,I)}),A},destroyParts:function(){return this.processParts(null,null,"destroy"),this.originalDestroy()}}};return It.cuboid=(Ct=xt.merge)(It.base,{parts:["front","top","side"],pathType:"cuboid",attr:function(K,et,st,R){if("string"==typeof K&&typeof et<"u"){var I=K;(K={})[I]=et}return K.shapeArgs||zt(K.x)?this.singleSetterForParts("d",null,this.renderer[this.pathType+"Path"](K.shapeArgs||K)):wt.prototype.attr.call(this,K,void 0,st,R)},animate:function(K,et,st){if(zt(K.x)&&zt(K.y)){var R=(K=this.renderer[this.pathType+"Path"](K)).forcedSides;this.singleSetterForParts("d",null,K,"animate",et,st),this.attr({zIndex:K.zIndexes.group}),R!==this.forcedSides&&(this.forcedSides=R,this.renderer.styledMode||It.cuboid.fillSetter.call(this,this.fill))}else wt.prototype.animate.call(this,K,et,st);return this},fillSetter:function(K){return this.forcedSides=this.forcedSides||[],this.singleSetterForParts("fill",null,{front:K,top:jt(K).brighten(0<=this.forcedSides.indexOf("top")?0:.1).get(),side:jt(K).brighten(0<=this.forcedSides.indexOf("side")?0:-.1).get()}),this.color=this.fill=K,this}}),It}),te(vt,"Core/Renderer/SVG/SVGRenderer3D.js",[vt["Core/Animation/AnimationUtilities.js"],vt["Core/Color/Color.js"],vt["Core/Globals.js"],vt["Core/Math3D.js"],vt["Core/Renderer/SVG/SVGElement.js"],vt["Core/Renderer/SVG/SVGElement3D.js"],vt["Core/Renderer/SVG/SVGRenderer.js"],vt["Core/Utilities.js"]],function(Ct,wt,xt,jt,zt,Ut,Rt,It){var G,K=this&&this.__extends||(G=function(v,M){return(G=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(b,k){b.__proto__=k}||function(b,k){for(var _ in k)k.hasOwnProperty(_)&&(b[_]=k[_])})(v,M)},function(v,M){function b(){this.constructor=v}G(v,M),v.prototype=null===M?Object.create(M):(b.prototype=M.prototype,new b)}),et=Ct.animObject,st=wt.parse,R=xt.charts,I=xt.deg2rad,A=jt.perspective,x=jt.shapeArea,T=It.defined,j=It.extend,V=It.merge,nt=It.pick,w=Math.cos,l=Math.sin,it=Math.PI,N=4*(Math.sqrt(2)-1)/3/(it/2);return function(G){function v(){return null!==G&&G.apply(this,arguments)||this}return K(v,G),v.compose=function(M){var b=v.prototype;(M=M.prototype).elements3d=Ut,M.arc3d=b.arc3d,M.arc3dPath=b.arc3dPath,M.cuboid=b.cuboid,M.cuboidPath=b.cuboidPath,M.element3d=b.element3d,M.face3d=b.face3d,M.polyhedron=b.polyhedron,M.toLinePath=b.toLinePath,M.toLineSegments=b.toLineSegments},v.curveTo=function(M,b,k,_,y,O,B,H){var at=[],ft=O-y;return O>y&&O-y>Math.PI/2+1e-4?at=(at=at.concat(this.curveTo(M,b,k,_,y,y+Math.PI/2,B,H))).concat(this.curveTo(M,b,k,_,y+Math.PI/2,O,B,H)):O<y&&y-O>Math.PI/2+1e-4?at=(at=at.concat(this.curveTo(M,b,k,_,y,y-Math.PI/2,B,H))).concat(this.curveTo(M,b,k,_,y-Math.PI/2,O,B,H)):[["C",M+k*Math.cos(y)-k*N*ft*Math.sin(y)+B,b+_*Math.sin(y)+_*N*ft*Math.cos(y)+H,M+k*Math.cos(O)+k*N*ft*Math.sin(O)+B,b+_*Math.sin(O)-_*N*ft*Math.cos(O)+H,M+k*Math.cos(O)+B,b+_*Math.sin(O)+H]]},v.prototype.toLinePath=function(M,b){var k=[];return M.forEach(function(_){k.push(["L",_.x,_.y])}),M.length&&(k[0][0]="M",b&&k.push(["Z"])),k},v.prototype.toLineSegments=function(M){var b=[],k=!0;return M.forEach(function(_){b.push(k?["M",_.x,_.y]:["L",_.x,_.y]),k=!k}),b},v.prototype.face3d=function(M){var b=this,k=this.createElement("path");return k.vertexes=[],k.insidePlotArea=!1,k.enabled=!0,k.attr=function(_){if("object"==typeof _&&(T(_.enabled)||T(_.vertexes)||T(_.insidePlotArea))){this.enabled=nt(_.enabled,this.enabled),this.vertexes=nt(_.vertexes,this.vertexes),this.insidePlotArea=nt(_.insidePlotArea,this.insidePlotArea),delete _.enabled,delete _.vertexes,delete _.insidePlotArea;var y=A(this.vertexes,R[b.chartIndex],this.insidePlotArea),O=b.toLinePath(y,!0);y=x(y),_.d=O,_.visibility=this.enabled&&0<y?"inherit":"hidden"}return zt.prototype.attr.apply(this,arguments)},k.animate=function(_){if("object"==typeof _&&(T(_.enabled)||T(_.vertexes)||T(_.insidePlotArea))){this.enabled=nt(_.enabled,this.enabled),this.vertexes=nt(_.vertexes,this.vertexes),this.insidePlotArea=nt(_.insidePlotArea,this.insidePlotArea),delete _.enabled,delete _.vertexes,delete _.insidePlotArea;var y=A(this.vertexes,R[b.chartIndex],this.insidePlotArea),O=b.toLinePath(y,!0);y=x(y),y=this.enabled&&0<y?"visible":"hidden",_.d=O,this.attr("visibility",y)}return zt.prototype.animate.apply(this,arguments)},k.attr(M)},v.prototype.polyhedron=function(M){var b=this,k=this.g(),_=k.destroy;return this.styledMode||k.attr({"stroke-linejoin":"round"}),k.faces=[],k.destroy=function(){for(var y=0;y<k.faces.length;y++)k.faces[y].destroy();return _.call(this)},k.attr=function(y,O,B,H){if("object"==typeof y&&T(y.faces)){for(;k.faces.length>y.faces.length;)k.faces.pop().destroy();for(;k.faces.length<y.faces.length;)k.faces.push(b.face3d().add(k));for(var at=0;at<y.faces.length;at++)b.styledMode&&delete y.faces[at].fill,k.faces[at].attr(y.faces[at],null,B,H);delete y.faces}return zt.prototype.attr.apply(this,arguments)},k.animate=function(y,O,B){if(y&&y.faces){for(;k.faces.length>y.faces.length;)k.faces.pop().destroy();for(;k.faces.length<y.faces.length;)k.faces.push(b.face3d().add(k));for(var H=0;H<y.faces.length;H++)k.faces[H].animate(y.faces[H],O,B);delete y.faces}return zt.prototype.animate.apply(this,arguments)},k.attr(M)},v.prototype.element3d=function(M,b){var k=this.g();return j(k,this.elements3d[M]),k.initArgs(b),k},v.prototype.cuboid=function(M){return this.element3d("cuboid",M)},v.prototype.cuboidPath=function(M){function b(ht){return 0===B&&1<ht&&6>ht?{x:q[ht].x,y:q[ht].y+10,z:q[ht].z}:q[0].x===q[7].x&&4<=ht?{x:q[ht].x+10,y:q[ht].y,z:q[ht].z}:0===at&&2>ht||5<ht?{x:q[ht].x,y:q[ht].y,z:q[ht].z+10}:q[ht]}function k(ht){return q[ht]}var _=M.x||0,y=M.y||0,O=M.z||0,B=M.height||0,H=M.width||0,at=M.depth||0,ft=R[this.chartIndex],rt=ft.options.chart.options3d.alpha,z=0,q=[{x:_,y,z:O},{x:_+H,y,z:O},{x:_+H,y:y+B,z:O},{x:_,y:y+B,z:O},{x:_,y:y+B,z:O+at},{x:_+H,y:y+B,z:O+at},{x:_+H,y,z:O+at},{x:_,y,z:O+at}],mt=[];q=A(q,ft,M.insidePlotArea);var pt=function(ht,Lt,At){var Wt=[[],-1],Ot=ht.map(k),se=Lt.map(k);return ht=ht.map(b),Lt=Lt.map(b),0>x(Ot)?Wt=[Ot,0]:0>x(se)?Wt=[se,1]:At&&(mt.push(At),Wt=0>x(ht)?[Ot,0]:0>x(Lt)?[se,1]:[Ot,0]),Wt},dt=pt([3,2,1,0],[7,6,5,4],"front");M=dt[0];var Y=dt[1];H=(dt=pt([1,6,7,0],[4,5,2,3],"top"))[0];var lt=dt[1];return dt=pt([1,2,5,6],[0,7,4,3],"side"),pt=dt[0],1===(dt=dt[1])?z+=1e6*(ft.plotWidth-_):dt||(z+=1e6*_),z+=10*(!lt||0<=rt&&180>=rt||360>rt&&357.5<rt?ft.plotHeight-y:10+y),1===Y?z+=100*O:Y||(z+=100*(1e3-O)),{front:this.toLinePath(M,!0),top:this.toLinePath(H,!0),side:this.toLinePath(pt,!0),zIndexes:{group:Math.round(z)},forcedSides:mt,isFront:Y,isTop:lt}},v.prototype.arc3d=function(M){function b(O){var at,B=!1,H={};for(at in O=V(O))-1!==y.indexOf(at)&&(H[at]=O[at],delete O[at],B=!0);return!!B&&[H,O]}var k=this.g(),_=k.renderer,y="x y r innerR start end depth".split(" ");return(M=V(M)).alpha=(M.alpha||0)*I,M.beta=(M.beta||0)*I,k.top=_.path(),k.side1=_.path(),k.side2=_.path(),k.inn=_.path(),k.out=_.path(),k.onAdd=function(){var O=k.parentGroup,B=k.attr("class");k.top.add(k),["out","inn","side1","side2"].forEach(function(H){k[H].attr({class:B+" highcharts-3d-side"}).add(O)})},["addClass","removeClass"].forEach(function(O){k[O]=function(){var B=arguments;["top","out","inn","side1","side2"].forEach(function(H){k[H][O].apply(k[H],B)})}}),k.setPaths=function(O){var B=k.renderer.arc3dPath(O),H=100*B.zTop;k.attribs=O,k.top.attr({d:B.top,zIndex:B.zTop}),k.inn.attr({d:B.inn,zIndex:B.zInn}),k.out.attr({d:B.out,zIndex:B.zOut}),k.side1.attr({d:B.side1,zIndex:B.zSide1}),k.side2.attr({d:B.side2,zIndex:B.zSide2}),k.zIndex=H,k.attr({zIndex:H}),O.center&&(k.top.setRadialReference(O.center),delete O.center)},k.setPaths(M),k.fillSetter=function(O){var B=st(O).brighten(-.1).get();return this.fill=O,this.side1.attr({fill:B}),this.side2.attr({fill:B}),this.inn.attr({fill:B}),this.out.attr({fill:B}),this.top.attr({fill:O}),this},["opacity","translateX","translateY","visibility"].forEach(function(O){k[O+"Setter"]=function(B,H){k[H]=B,["out","inn","side1","side2","top"].forEach(function(at){k[at].attr(H,B)})}}),k.attr=function(O){var B;if("object"==typeof O&&(B=b(O))){var H=B[0];arguments[0]=B[1],j(k.attribs,H),k.setPaths(k.attribs)}return zt.prototype.attr.apply(k,arguments)},k.animate=function(O,B,H){var at=this.attribs,ft="data-"+Math.random().toString(26).substring(2,9);delete O.center,delete O.z,delete O.alpha,delete O.beta;var rt=et(nt(B,this.renderer.globalAnimation));if(rt.duration){if(B=b(O),k[ft]=0,O[ft]=1,k[ft+"Setter"]=xt.noop,B){var z=B[0];rt.step=function(q,mt){function pt(dt){return at[dt]+(nt(z[dt],at[dt])-at[dt])*mt.pos}mt.prop===ft&&mt.elem.setPaths(V(at,{x:pt("x"),y:pt("y"),r:pt("r"),innerR:pt("innerR"),start:pt("start"),end:pt("end"),depth:pt("depth")}))}}B=rt}return zt.prototype.animate.call(this,O,B,H)},k.destroy=function(){return this.top.destroy(),this.out.destroy(),this.inn.destroy(),this.side1.destroy(),this.side2.destroy(),zt.prototype.destroy.call(this)},k.hide=function(){this.top.hide(),this.out.hide(),this.inn.hide(),this.side1.hide(),this.side2.hide()},k.show=function(O){this.top.show(O),this.out.show(O),this.inn.show(O),this.side1.show(O),this.side2.show(O)},k},v.prototype.arc3dPath=function(M){function b(Wt){return(Wt%=2*Math.PI)>Math.PI&&(Wt=2*Math.PI-Wt),Wt}var k=M.x||0,_=M.y||0,y=M.start||0,O=(M.end||0)-1e-5,B=M.r||0,H=M.innerR||0,at=M.depth||0,ft=M.alpha||0,rt=M.beta||0,z=Math.cos(y),q=Math.sin(y);M=Math.cos(O);var mt=Math.sin(O),pt=B*Math.cos(rt);B*=Math.cos(ft);var dt=H*Math.cos(rt),Y=H*Math.cos(ft);H=at*Math.sin(rt);var lt=at*Math.sin(ft);(at=(at=[["M",k+pt*z,_+B*q]]).concat(v.curveTo(k,_,pt,B,y,O,0,0))).push(["L",k+dt*M,_+Y*mt]),(at=at.concat(v.curveTo(k,_,dt,Y,O,y,0,0))).push(["Z"]);var ht=0<rt?Math.PI/2:0;rt=0<ft?0:Math.PI/2;var Lt=O<it-rt?O:y<it-rt?it-rt:O,At=2*it-rt;return ft=(ft=[["M",k+pt*w(ht=y>-ht?y:O>-ht?-ht:y),_+B*l(ht)]]).concat(v.curveTo(k,_,pt,B,ht,Lt,0,0)),O>At&&y<At?(ft.push(["L",k+pt*w(Lt)+H,_+B*l(Lt)+lt]),(ft=ft.concat(v.curveTo(k,_,pt,B,Lt,At,H,lt))).push(["L",k+pt*w(At),_+B*l(At)]),(ft=ft.concat(v.curveTo(k,_,pt,B,At,O,0,0))).push(["L",k+pt*w(O)+H,_+B*l(O)+lt]),(ft=ft.concat(v.curveTo(k,_,pt,B,O,At,H,lt))).push(["L",k+pt*w(At),_+B*l(At)]),ft=ft.concat(v.curveTo(k,_,pt,B,At,Lt,0,0))):O>it-rt&&y<it-rt&&(ft.push(["L",k+pt*Math.cos(Lt)+H,_+B*Math.sin(Lt)+lt]),(ft=ft.concat(v.curveTo(k,_,pt,B,Lt,O,H,lt))).push(["L",k+pt*Math.cos(O),_+B*Math.sin(O)]),ft=ft.concat(v.curveTo(k,_,pt,B,O,Lt,0,0))),ft.push(["L",k+pt*Math.cos(Lt)+H,_+B*Math.sin(Lt)+lt]),(ft=ft.concat(v.curveTo(k,_,pt,B,Lt,ht,H,lt))).push(["Z"]),(rt=(rt=[["M",k+dt*z,_+Y*q]]).concat(v.curveTo(k,_,dt,Y,y,O,0,0))).push(["L",k+dt*Math.cos(O)+H,_+Y*Math.sin(O)+lt]),(rt=rt.concat(v.curveTo(k,_,dt,Y,O,y,H,lt))).push(["Z"]),z=[["M",k+pt*z,_+B*q],["L",k+pt*z+H,_+B*q+lt],["L",k+dt*z+H,_+Y*q+lt],["L",k+dt*z,_+Y*q],["Z"]],k=[["M",k+pt*M,_+B*mt],["L",k+pt*M+H,_+B*mt+lt],["L",k+dt*M+H,_+Y*mt+lt],["L",k+dt*M,_+Y*mt],["Z"]],mt=Math.atan2(lt,-H),_=Math.abs(O+mt),M=Math.abs(y+mt),y=Math.abs((y+O)/2+mt),_=b(_),M=b(M),y=b(y),y*=1e5,O=1e5*M,_*=1e5,{top:at,zTop:1e5*Math.PI+1,out:ft,zOut:Math.max(y,O,_),inn:rt,zInn:Math.max(y,O,_),side1:z,zSide1:.99*_,side2:k,zSide2:.99*O}},v}(Rt)}),te(vt,"Core/Chart/Chart3D.js",[vt["Core/Color/Color.js"],vt["Core/Defaults.js"],vt["Core/Math3D.js"],vt["Core/Utilities.js"]],function(Ct,wt,xt,jt){var A,zt=Ct.parse,Ut=wt.defaultOptions,Rt=xt.perspective,It=xt.shapeArea3D,K=jt.addEvent,et=jt.isArray,st=jt.merge,R=jt.pick,I=jt.wrap;return function(x){function T(k){this.is3d()&&"scatter"===k.options.type&&(k.options.type="scatter3d")}function j(){if(this.chart3d&&this.is3d()){var k=this.renderer,_=this.options.chart.options3d,y=this.chart3d.get3dFrame(),O=this.plotLeft,B=this.plotLeft+this.plotWidth,H=this.plotTop,at=this.plotTop+this.plotHeight,ft=O-(y.left.visible?y.left.size:0),rt=B+(y.right.visible?y.right.size:0),z=H-(y.top.visible?y.top.size:0),q=at+(y.bottom.visible?y.bottom.size:0),mt=0-(y.front.visible?y.front.size:0),pt=(_=_.depth)+(y.back.visible?y.back.size:0),dt=this.hasRendered?"animate":"attr";this.chart3d.frame3d=y,this.frameShapes||(this.frameShapes={bottom:k.polyhedron().add(),top:k.polyhedron().add(),left:k.polyhedron().add(),right:k.polyhedron().add(),back:k.polyhedron().add(),front:k.polyhedron().add()}),this.frameShapes.bottom[dt]({class:"highcharts-3d-frame highcharts-3d-frame-bottom",zIndex:y.bottom.frontFacing?-1e3:1e3,faces:[{fill:zt(y.bottom.color).brighten(.1).get(),vertexes:[{x:ft,y:q,z:mt},{x:rt,y:q,z:mt},{x:rt,y:q,z:pt},{x:ft,y:q,z:pt}],enabled:y.bottom.visible},{fill:zt(y.bottom.color).brighten(.1).get(),vertexes:[{x:O,y:at,z:_},{x:B,y:at,z:_},{x:B,y:at,z:0},{x:O,y:at,z:0}],enabled:y.bottom.visible},{fill:zt(y.bottom.color).brighten(-.1).get(),vertexes:[{x:ft,y:q,z:mt},{x:ft,y:q,z:pt},{x:O,y:at,z:_},{x:O,y:at,z:0}],enabled:y.bottom.visible&&!y.left.visible},{fill:zt(y.bottom.color).brighten(-.1).get(),vertexes:[{x:rt,y:q,z:pt},{x:rt,y:q,z:mt},{x:B,y:at,z:0},{x:B,y:at,z:_}],enabled:y.bottom.visible&&!y.right.visible},{fill:zt(y.bottom.color).get(),vertexes:[{x:rt,y:q,z:mt},{x:ft,y:q,z:mt},{x:O,y:at,z:0},{x:B,y:at,z:0}],enabled:y.bottom.visible&&!y.front.visible},{fill:zt(y.bottom.color).get(),vertexes:[{x:ft,y:q,z:pt},{x:rt,y:q,z:pt},{x:B,y:at,z:_},{x:O,y:at,z:_}],enabled:y.bottom.visible&&!y.back.visible}]}),this.frameShapes.top[dt]({class:"highcharts-3d-frame highcharts-3d-frame-top",zIndex:y.top.frontFacing?-1e3:1e3,faces:[{fill:zt(y.top.color).brighten(.1).get(),vertexes:[{x:ft,y:z,z:pt},{x:rt,y:z,z:pt},{x:rt,y:z,z:mt},{x:ft,y:z,z:mt}],enabled:y.top.visible},{fill:zt(y.top.color).brighten(.1).get(),vertexes:[{x:O,y:H,z:0},{x:B,y:H,z:0},{x:B,y:H,z:_},{x:O,y:H,z:_}],enabled:y.top.visible},{fill:zt(y.top.color).brighten(-.1).get(),vertexes:[{x:ft,y:z,z:pt},{x:ft,y:z,z:mt},{x:O,y:H,z:0},{x:O,y:H,z:_}],enabled:y.top.visible&&!y.left.visible},{fill:zt(y.top.color).brighten(-.1).get(),vertexes:[{x:rt,y:z,z:mt},{x:rt,y:z,z:pt},{x:B,y:H,z:_},{x:B,y:H,z:0}],enabled:y.top.visible&&!y.right.visible},{fill:zt(y.top.color).get(),vertexes:[{x:ft,y:z,z:mt},{x:rt,y:z,z:mt},{x:B,y:H,z:0},{x:O,y:H,z:0}],enabled:y.top.visible&&!y.front.visible},{fill:zt(y.top.color).get(),vertexes:[{x:rt,y:z,z:pt},{x:ft,y:z,z:pt},{x:O,y:H,z:_},{x:B,y:H,z:_}],enabled:y.top.visible&&!y.back.visible}]}),this.frameShapes.left[dt]({class:"highcharts-3d-frame highcharts-3d-frame-left",zIndex:y.left.frontFacing?-1e3:1e3,faces:[{fill:zt(y.left.color).brighten(.1).get(),vertexes:[{x:ft,y:q,z:mt},{x:O,y:at,z:0},{x:O,y:at,z:_},{x:ft,y:q,z:pt}],enabled:y.left.visible&&!y.bottom.visible},{fill:zt(y.left.color).brighten(.1).get(),vertexes:[{x:ft,y:z,z:pt},{x:O,y:H,z:_},{x:O,y:H,z:0},{x:ft,y:z,z:mt}],enabled:y.left.visible&&!y.top.visible},{fill:zt(y.left.color).brighten(-.1).get(),vertexes:[{x:ft,y:q,z:pt},{x:ft,y:z,z:pt},{x:ft,y:z,z:mt},{x:ft,y:q,z:mt}],enabled:y.left.visible},{fill:zt(y.left.color).brighten(-.1).get(),vertexes:[{x:O,y:H,z:_},{x:O,y:at,z:_},{x:O,y:at,z:0},{x:O,y:H,z:0}],enabled:y.left.visible},{fill:zt(y.left.color).get(),vertexes:[{x:ft,y:q,z:mt},{x:ft,y:z,z:mt},{x:O,y:H,z:0},{x:O,y:at,z:0}],enabled:y.left.visible&&!y.front.visible},{fill:zt(y.left.color).get(),vertexes:[{x:ft,y:z,z:pt},{x:ft,y:q,z:pt},{x:O,y:at,z:_},{x:O,y:H,z:_}],enabled:y.left.visible&&!y.back.visible}]}),this.frameShapes.right[dt]({class:"highcharts-3d-frame highcharts-3d-frame-right",zIndex:y.right.frontFacing?-1e3:1e3,faces:[{fill:zt(y.right.color).brighten(.1).get(),vertexes:[{x:rt,y:q,z:pt},{x:B,y:at,z:_},{x:B,y:at,z:0},{x:rt,y:q,z:mt}],enabled:y.right.visible&&!y.bottom.visible},{fill:zt(y.right.color).brighten(.1).get(),vertexes:[{x:rt,y:z,z:mt},{x:B,y:H,z:0},{x:B,y:H,z:_},{x:rt,y:z,z:pt}],enabled:y.right.visible&&!y.top.visible},{fill:zt(y.right.color).brighten(-.1).get(),vertexes:[{x:B,y:H,z:0},{x:B,y:at,z:0},{x:B,y:at,z:_},{x:B,y:H,z:_}],enabled:y.right.visible},{fill:zt(y.right.color).brighten(-.1).get(),vertexes:[{x:rt,y:q,z:mt},{x:rt,y:z,z:mt},{x:rt,y:z,z:pt},{x:rt,y:q,z:pt}],enabled:y.right.visible},{fill:zt(y.right.color).get(),vertexes:[{x:rt,y:z,z:mt},{x:rt,y:q,z:mt},{x:B,y:at,z:0},{x:B,y:H,z:0}],enabled:y.right.visible&&!y.front.visible},{fill:zt(y.right.color).get(),vertexes:[{x:rt,y:q,z:pt},{x:rt,y:z,z:pt},{x:B,y:H,z:_},{x:B,y:at,z:_}],enabled:y.right.visible&&!y.back.visible}]}),this.frameShapes.back[dt]({class:"highcharts-3d-frame highcharts-3d-frame-back",zIndex:y.back.frontFacing?-1e3:1e3,faces:[{fill:zt(y.back.color).brighten(.1).get(),vertexes:[{x:rt,y:q,z:pt},{x:ft,y:q,z:pt},{x:O,y:at,z:_},{x:B,y:at,z:_}],enabled:y.back.visible&&!y.bottom.visible},{fill:zt(y.back.color).brighten(.1).get(),vertexes:[{x:ft,y:z,z:pt},{x:rt,y:z,z:pt},{x:B,y:H,z:_},{x:O,y:H,z:_}],enabled:y.back.visible&&!y.top.visible},{fill:zt(y.back.color).brighten(-.1).get(),vertexes:[{x:ft,y:q,z:pt},{x:ft,y:z,z:pt},{x:O,y:H,z:_},{x:O,y:at,z:_}],enabled:y.back.visible&&!y.left.visible},{fill:zt(y.back.color).brighten(-.1).get(),vertexes:[{x:rt,y:z,z:pt},{x:rt,y:q,z:pt},{x:B,y:at,z:_},{x:B,y:H,z:_}],enabled:y.back.visible&&!y.right.visible},{fill:zt(y.back.color).get(),vertexes:[{x:O,y:H,z:_},{x:B,y:H,z:_},{x:B,y:at,z:_},{x:O,y:at,z:_}],enabled:y.back.visible},{fill:zt(y.back.color).get(),vertexes:[{x:ft,y:q,z:pt},{x:rt,y:q,z:pt},{x:rt,y:z,z:pt},{x:ft,y:z,z:pt}],enabled:y.back.visible}]}),this.frameShapes.front[dt]({class:"highcharts-3d-frame highcharts-3d-frame-front",zIndex:y.front.frontFacing?-1e3:1e3,faces:[{fill:zt(y.front.color).brighten(.1).get(),vertexes:[{x:ft,y:q,z:mt},{x:rt,y:q,z:mt},{x:B,y:at,z:0},{x:O,y:at,z:0}],enabled:y.front.visible&&!y.bottom.visible},{fill:zt(y.front.color).brighten(.1).get(),vertexes:[{x:rt,y:z,z:mt},{x:ft,y:z,z:mt},{x:O,y:H,z:0},{x:B,y:H,z:0}],enabled:y.front.visible&&!y.top.visible},{fill:zt(y.front.color).brighten(-.1).get(),vertexes:[{x:ft,y:z,z:mt},{x:ft,y:q,z:mt},{x:O,y:at,z:0},{x:O,y:H,z:0}],enabled:y.front.visible&&!y.left.visible},{fill:zt(y.front.color).brighten(-.1).get(),vertexes:[{x:rt,y:q,z:mt},{x:rt,y:z,z:mt},{x:B,y:H,z:0},{x:B,y:at,z:0}],enabled:y.front.visible&&!y.right.visible},{fill:zt(y.front.color).get(),vertexes:[{x:B,y:H,z:0},{x:O,y:H,z:0},{x:O,y:at,z:0},{x:B,y:at,z:0}],enabled:y.front.visible},{fill:zt(y.front.color).get(),vertexes:[{x:rt,y:q,z:mt},{x:ft,y:q,z:mt},{x:ft,y:z,z:mt},{x:rt,y:z,z:mt}],enabled:y.front.visible}]})}}function V(){this.styledMode&&[{name:"darker",slope:.6},{name:"brighter",slope:1.4}].forEach(function(k){this.renderer.definition({tagName:"filter",attributes:{id:"highcharts-"+k.name},children:[{tagName:"feComponentTransfer",children:[{tagName:"feFuncR",attributes:{type:"linear",slope:k.slope}},{tagName:"feFuncG",attributes:{type:"linear",slope:k.slope}},{tagName:"feFuncB",attributes:{type:"linear",slope:k.slope}}]}]})},this)}function nt(){var k=this.options;this.is3d()&&(k.series||[]).forEach(function(_){"scatter"===(_.type||k.chart.type||k.chart.defaultSeriesType)&&(_.type="scatter3d")})}function w(){var k=this.options.chart.options3d;if(this.chart3d&&this.is3d()){k&&(k.alpha=k.alpha%360+(0<=k.alpha?0:360),k.beta=k.beta%360+(0<=k.beta?0:360));var _=this.inverted,y=this.clipBox,O=this.margin;y[_?"y":"x"]=-(O[3]||0),y[_?"x":"y"]=-(O[0]||0),y[_?"height":"width"]=this.chartWidth+(O[3]||0)+(O[1]||0),y[_?"width":"height"]=this.chartHeight+(O[0]||0)+(O[2]||0),this.scale3d=1,!0===k.fitToPlot&&(this.scale3d=this.chart3d.getScale(k.depth)),this.chart3d.frame3d=this.chart3d.get3dFrame()}}function l(){this.is3d()&&(this.isDirtyBox=!0)}function it(){this.chart3d&&this.is3d()&&(this.chart3d.frame3d=this.chart3d.get3dFrame())}function N(){this.chart3d||(this.chart3d=new b(this))}function G(k){return this.is3d()||k.apply(this,[].slice.call(arguments,1))}function v(k){var _=this.series.length;if(this.is3d())for(;_--;)(k=this.series[_]).translate(),k.render();else k.call(this)}function M(k){k.apply(this,[].slice.call(arguments,1)),this.is3d()&&(this.container.className+=" highcharts-3d-chart")}var b=function(){function k(_){this.frame3d=void 0,this.chart=_}return k.prototype.get3dFrame=function(){var _=this.chart,y=_.options.chart.options3d,O=y.frame,B=_.plotLeft,H=_.plotLeft+_.plotWidth,at=_.plotTop,ft=_.plotTop+_.plotHeight,rt=y.depth,z=function(Ot){return.5<(Ot=It(Ot,_))?1:-.5>Ot?-1:0},q=z([{x:B,y:ft,z:rt},{x:H,y:ft,z:rt},{x:H,y:ft,z:0},{x:B,y:ft,z:0}]),mt=z([{x:B,y:at,z:0},{x:H,y:at,z:0},{x:H,y:at,z:rt},{x:B,y:at,z:rt}]),pt=z([{x:B,y:at,z:0},{x:B,y:at,z:rt},{x:B,y:ft,z:rt},{x:B,y:ft,z:0}]),dt=z([{x:H,y:at,z:rt},{x:H,y:at,z:0},{x:H,y:ft,z:0},{x:H,y:ft,z:rt}]),Y=z([{x:B,y:ft,z:0},{x:H,y:ft,z:0},{x:H,y:at,z:0},{x:B,y:at,z:0}]);z=z([{x:B,y:at,z:rt},{x:H,y:at,z:rt},{x:H,y:ft,z:rt},{x:B,y:ft,z:rt}]);var lt=!1,ht=!1,Lt=!1,At=!1;[].concat(_.xAxis,_.yAxis,_.zAxis).forEach(function(Ot){Ot&&(Ot.horiz?Ot.opposite?ht=!0:lt=!0:Ot.opposite?At=!0:Lt=!0)});var Wt=function(Ot,se,_e){for(var We=["size","color","visible"],He={},Fe=0;Fe<We.length;Fe++)for(var pe=We[Fe],Me=0;Me<Ot.length;Me++)if("object"==typeof Ot[Me]){var me=Ot[Me][pe];if(typeof me<"u"&&null!==me){He[pe]=me;break}}return Ot=_e,!0===He.visible||!1===He.visible?Ot=He.visible:"auto"===He.visible&&(Ot=0<se),{size:R(He.size,1),color:R(He.color,"none"),frontFacing:0<se,visible:Ot}};return O={axes:{},bottom:Wt([O.bottom,O.top,O],q,lt),top:Wt([O.top,O.bottom,O],mt,ht),left:Wt([O.left,O.right,O.side,O],pt,Lt),right:Wt([O.right,O.left,O.side,O],dt,At),back:Wt([O.back,O.front,O],z,!0),front:Wt([O.front,O.back,O],Y,!1)},"auto"===y.axisLabelPosition?(y=[],(dt=function(Ot,se){return Ot.visible!==se.visible||Ot.visible&&se.visible&&Ot.frontFacing!==se.frontFacing})(O.left,O.front)&&y.push({y:(at+ft)/2,x:B,z:0,xDir:{x:1,y:0,z:0}}),dt(O.left,O.back)&&y.push({y:(at+ft)/2,x:B,z:rt,xDir:{x:0,y:0,z:-1}}),dt(O.right,O.front)&&y.push({y:(at+ft)/2,x:H,z:0,xDir:{x:0,y:0,z:1}}),dt(O.right,O.back)&&y.push({y:(at+ft)/2,x:H,z:rt,xDir:{x:-1,y:0,z:0}}),q=[],dt(O.bottom,O.front)&&q.push({x:(B+H)/2,y:ft,z:0,xDir:{x:1,y:0,z:0}}),dt(O.bottom,O.back)&&q.push({x:(B+H)/2,y:ft,z:rt,xDir:{x:-1,y:0,z:0}}),mt=[],dt(O.top,O.front)&&mt.push({x:(B+H)/2,y:at,z:0,xDir:{x:1,y:0,z:0}}),dt(O.top,O.back)&&mt.push({x:(B+H)/2,y:at,z:rt,xDir:{x:-1,y:0,z:0}}),pt=[],dt(O.bottom,O.left)&&pt.push({z:(0+rt)/2,y:ft,x:B,xDir:{x:0,y:0,z:-1}}),dt(O.bottom,O.right)&&pt.push({z:(0+rt)/2,y:ft,x:H,xDir:{x:0,y:0,z:1}}),ft=[],dt(O.top,O.left)&&ft.push({z:(0+rt)/2,y:at,x:B,xDir:{x:0,y:0,z:-1}}),dt(O.top,O.right)&&ft.push({z:(0+rt)/2,y:at,x:H,xDir:{x:0,y:0,z:1}}),O.axes={y:{left:(B=function(Ot,se,_e){if(0===Ot.length)return null;if(1===Ot.length)return Ot[0];for(var We=Rt(Ot,_,!1),He=0,Fe=1;Fe<We.length;Fe++)(_e*We[Fe][se]>_e*We[He][se]||_e*We[Fe][se]==_e*We[He][se]&&We[Fe].z<We[He].z)&&(He=Fe);return Ot[He]})(y,"x",-1),right:B(y,"x",1)},x:{top:B(mt,"y",-1),bottom:B(q,"y",1)},z:{top:B(ft,"y",-1),bottom:B(pt,"y",1)}}):O.axes={y:{left:{x:B,z:0,xDir:{x:1,y:0,z:0}},right:{x:H,z:0,xDir:{x:0,y:0,z:1}}},x:{top:{y:at,z:0,xDir:{x:1,y:0,z:0}},bottom:{y:ft,z:0,xDir:{x:1,y:0,z:0}}},z:{top:{x:Lt?H:B,y:at,xDir:Lt?{x:0,y:0,z:1}:{x:0,y:0,z:-1}},bottom:{x:Lt?H:B,y:ft,xDir:Lt?{x:0,y:0,z:1}:{x:0,y:0,z:-1}}}},O},k.prototype.getScale=function(_){var y=this.chart,O=y.plotLeft,B=y.plotWidth+O,H=y.plotTop,at=y.plotHeight+H,ft=O+y.plotWidth/2,rt=H+y.plotHeight/2,z=Number.MAX_VALUE,q=-Number.MAX_VALUE,mt=Number.MAX_VALUE,pt=-Number.MAX_VALUE,dt=1,Y=[{x:O,y:H,z:0},{x:O,y:H,z:_}];return[0,1].forEach(function(lt){Y.push({x:B,y:Y[lt].y,z:Y[lt].z})}),[0,1,2,3].forEach(function(lt){Y.push({x:Y[lt].x,y:at,z:Y[lt].z})}),(Y=Rt(Y,y,!1)).forEach(function(lt){z=Math.min(z,lt.x),q=Math.max(q,lt.x),mt=Math.min(mt,lt.y),pt=Math.max(pt,lt.y)}),O>z&&(dt=Math.min(dt,1-Math.abs((O+ft)/(z+ft))%1)),B<q&&(dt=Math.min(dt,(B-ft)/(q-ft))),H>mt&&(dt=0>mt?Math.min(dt,(H+rt)/(-mt+H+rt)):Math.min(dt,1-(H+rt)/(mt+rt)%1)),at<pt&&(dt=Math.min(dt,Math.abs((at-rt)/(pt-rt)))),dt},k}();x.Composition=b,x.defaultOptions={chart:{options3d:{enabled:!1,alpha:0,beta:0,depth:100,fitToPlot:!0,viewDistance:25,axisLabelPosition:null,frame:{visible:"default",size:1,bottom:{},top:{},left:{},right:{},back:{},front:{}}}}},x.compose=function(k,_){var y=k.prototype;_=_.prototype,y.is3d=function(){return!(!this.options.chart.options3d||!this.options.chart.options3d.enabled)},y.propsRequireDirtyBox.push("chart.options3d"),y.propsRequireUpdateSeries.push("chart.options3d"),_.matrixSetter=function(){if(1>this.pos&&(et(this.start)||et(this.end)))for(var O=this.start||[1,0,0,1,0,0],B=this.end||[1,0,0,1,0,0],H=[],at=0;6>at;at++)H.push(this.pos*B[at]+(1-this.pos)*O[at]);else H=this.end;this.elem.attr(this.prop,H,null,!0)},st(!0,Ut,x.defaultOptions),K(k,"init",N),K(k,"addSeries",T),K(k,"afterDrawChartBox",j),K(k,"afterGetContainer",V),K(k,"afterInit",nt),K(k,"afterSetChartSize",w),K(k,"beforeRedraw",l),K(k,"beforeRender",it),I(y,"isInsidePlot",G),I(y,"renderSeries",v),I(y,"setClassName",M)}}(A||(A={})),A}),te(vt,"Core/Axis/ZAxis.js",[vt["Core/Axis/Axis.js"],vt["Core/Utilities.js"]],function(Ct,wt){function xt(R){return new st(this,R)}function jt(){var R=this,I=this.options.zAxis=K(this.options.zAxis||{});this.is3d()&&(this.zAxis=[],I.forEach(function(A,x){A.index=x,A.isX=!0,R.addZAxis(A).setScale()}))}var R,zt=this&&this.__extends||(R=function(I,A){return(R=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(x,T){x.__proto__=T}||function(x,T){for(var j in T)T.hasOwnProperty(j)&&(x[j]=T[j])})(I,A)},function(I,A){function x(){this.constructor=I}R(I,A),I.prototype=null===A?Object.create(A):(x.prototype=A.prototype,new x)}),Ut=wt.addEvent,Rt=wt.merge,It=wt.pick,K=wt.splat,et=[],st=function(R){function I(A,x){return(A=R.call(this,A,x)||this).isZAxis=!0,A}return zt(I,R),I.compose=function(A){-1===et.indexOf(A)&&(et.push(A),Ut(A,"afterGetAxes",jt),(A=A.prototype).addZAxis=xt,A.collectionsWithInit.zAxis=[A.addZAxis],A.collectionsWithUpdate.push("zAxis"))},I.prototype.getSeriesExtremes=function(){var A=this,x=this.chart;this.hasVisibleSeries=!1,this.dataMin=this.dataMax=this.ignoreMinPadding=this.ignoreMaxPadding=void 0,this.stacking&&this.stacking.buildStacks(),this.series.forEach(function(T){(T.visible||!x.options.chart.ignoreHiddenSeries)&&(A.hasVisibleSeries=!0,(T=T.zData).length&&(A.dataMin=Math.min(It(A.dataMin,T[0]),Math.min.apply(null,T)),A.dataMax=Math.max(It(A.dataMax,T[0]),Math.max.apply(null,T))))})},I.prototype.setAxisSize=function(){var A=this.chart;R.prototype.setAxisSize.call(this),this.width=this.len=A.options.chart.options3d&&A.options.chart.options3d.depth||0,this.right=A.chartWidth-this.width-this.left},I.prototype.setOptions=function(A){A=Rt({offset:0,lineWidth:0},A),this.isZAxis=!0,R.prototype.setOptions.call(this,A),this.coll="zAxis"},I}(Ct);return st}),te(vt,"Core/Axis/Axis3DDefaults.js",[],function(){return{labels:{position3d:"offset",skew3d:!1},title:{position3d:null,skew3d:null}}}),te(vt,"Core/Axis/Tick3DComposition.js",[vt["Core/Utilities.js"]],function(Ct){function wt(It){var K=this.axis.axis3D;K&&zt(It.pos,K.fix3dPosition(It.pos))}function xt(It){var K=this.axis.axis3D,et=It.apply(this,[].slice.call(arguments,1));if(K){var st=et[0],R=et[1];if("M"===st[0]&&"L"===R[0])return K=[K.fix3dPosition({x:st[1],y:st[2],z:0}),K.fix3dPosition({x:R[1],y:R[2],z:0})],this.axis.chart.renderer.toLineSegments(K)}return et}var jt=Ct.addEvent,zt=Ct.extend,Ut=Ct.wrap,Rt=[];return{compose:function(It){-1===Rt.indexOf(It)&&(Rt.push(It),jt(It,"afterGetLabelPosition",wt),Ut(It.prototype,"getMarkPath",xt))}}}),te(vt,"Core/Axis/Axis3DComposition.js",[vt["Core/Axis/Axis3DDefaults.js"],vt["Core/Globals.js"],vt["Core/Math3D.js"],vt["Core/Axis/Tick3DComposition.js"],vt["Core/Utilities.js"]],function(Ct,wt,xt,jt,zt){function Ut(){var G=this.chart,v=this.options;G.is3d&&G.is3d()&&"colorAxis"!==this.coll&&(v.tickWidth=w(v.tickWidth,0),v.gridLineWidth=w(v.gridLineWidth,1))}function Rt(G){this.chart.is3d()&&"colorAxis"!==this.coll&&G.point&&(G.point.crosshairPos=this.isXAxis?G.point.axisXpos:this.len-G.point.axisYpos)}function It(){this.axis3D||(this.axis3D=new N(this))}function K(G){return this.chart.is3d()&&"colorAxis"!==this.coll?[]:G.apply(this,[].slice.call(arguments,1))}function et(G){if(!this.chart.is3d()||"colorAxis"===this.coll)return G.apply(this,[].slice.call(arguments,1));var v=arguments,M=v[2],b=[];if(v=this.getPlotLinePath({value:v[1]}),M=this.getPlotLinePath({value:M}),v&&M)for(var k=0;k<v.length;k+=2){var _=v[k],y=v[k+1],O=M[k],B=M[k+1];"M"===_[0]&&"L"===y[0]&&"M"===O[0]&&"L"===B[0]&&b.push(_,y,B,["L",O[1],O[2]],["Z"])}return b}function st(G){var v=this.axis3D,M=this.chart,b=G.apply(this,[].slice.call(arguments,1));if("colorAxis"===this.coll||!M.chart3d||!M.is3d()||null===b)return b;var k=M.options.chart.options3d,_=this.isZAxis?M.plotWidth:k.depth;k=M.chart3d.frame3d;var y=b[0],O=b[1];return b=[],"M"===y[0]&&"L"===O[0]&&(v=[v.swapZ({x:y[1],y:y[2],z:0}),v.swapZ({x:y[1],y:y[2],z:_}),v.swapZ({x:O[1],y:O[2],z:0}),v.swapZ({x:O[1],y:O[2],z:_})],this.horiz?(this.isZAxis?(k.left.visible&&b.push(v[0],v[2]),k.right.visible&&b.push(v[1],v[3])):(k.front.visible&&b.push(v[0],v[2]),k.back.visible&&b.push(v[1],v[3])),k.top.visible&&b.push(v[0],v[1]),k.bottom.visible&&b.push(v[2],v[3])):(k.front.visible&&b.push(v[0],v[2]),k.back.visible&&b.push(v[1],v[3]),k.left.visible&&b.push(v[0],v[1]),k.right.visible&&b.push(v[2],v[3])),b=x(b,this.chart,!1)),M.renderer.toLineSegments(b)}function R(G,v){var M=this.chart,b=this.ticks,k=this.gridGroup;if(this.categories&&M.frameShapes&&M.is3d()&&k&&v&&v.label){k=k.element.childNodes[0].getBBox();var _=M.frameShapes.left.getBBox(),y=M.options.chart.options3d;M={x:M.plotWidth/2,y:M.plotHeight/2,z:y.depth/2,vd:w(y.depth,1)*w(y.viewDistance,0)};var O=b[(y=v.pos)-1],B=b[y+1],H=b=void 0;return 0!==y&&O&&O.label&&O.label.xy&&(b=T({x:O.label.xy.x,y:O.label.xy.y,z:null},M,M.vd)),B&&B.label&&B.label.xy&&(H=T({x:B.label.xy.x,y:B.label.xy.y,z:null},M,M.vd)),y=T(y={x:v.label.xy.x,y:v.label.xy.y,z:null},M,M.vd),Math.abs(b?y.x-b.x:H?H.x-y.x:k.x-_.x)}return G.apply(this,[].slice.call(arguments,1))}function I(G){var v=G.apply(this,[].slice.call(arguments,1));return this.axis3D?this.axis3D.fix3dPosition(v,!0):v}var A=wt.deg2rad,x=xt.perspective,T=xt.perspective3D,j=xt.shapeArea,V=zt.addEvent,nt=zt.merge,w=zt.pick,l=zt.wrap,it=[],N=function(){function G(v){this.axis=v}return G.compose=function(v,M){jt.compose(M),-1===it.indexOf(v)&&(it.push(v),nt(!0,v.defaultOptions,Ct),v.keepProps.push("axis3D"),V(v,"init",It),V(v,"afterSetOptions",Ut),V(v,"drawCrosshair",Rt),l(v=v.prototype,"getLinePath",K),l(v,"getPlotBandPath",et),l(v,"getPlotLinePath",st),l(v,"getSlotWidth",R),l(v,"getTitlePosition",I))},G.prototype.fix3dPosition=function(v,M){var b=this.axis,k=b.chart;if("colorAxis"===b.coll||!k.chart3d||!k.is3d())return v;var _=A*k.options.chart.options3d.alpha,y=A*k.options.chart.options3d.beta,O=w(M&&b.options.title.position3d,b.options.labels.position3d);M=w(M&&b.options.title.skew3d,b.options.labels.skew3d);var B=k.chart3d.frame3d,H=k.plotLeft,at=k.plotWidth+H,ft=k.plotTop,rt=k.plotHeight+ft,z=k=0,q={x:0,y:1,z:0},mt=!1;if(v=b.axis3D.swapZ({x:v.x,y:v.y,z:0}),b.isZAxis)if(b.opposite){if(null===B.axes.z.top)return{};z=v.y-ft,v.x=B.axes.z.top.x,v.y=B.axes.z.top.y,H=B.axes.z.top.xDir,mt=!B.top.frontFacing}else{if(null===B.axes.z.bottom)return{};z=v.y-rt,v.x=B.axes.z.bottom.x,v.y=B.axes.z.bottom.y,H=B.axes.z.bottom.xDir,mt=!B.bottom.frontFacing}else if(b.horiz)if(b.opposite){if(null===B.axes.x.top)return{};z=v.y-ft,v.y=B.axes.x.top.y,v.z=B.axes.x.top.z,H=B.axes.x.top.xDir,mt=!B.top.frontFacing}else{if(null===B.axes.x.bottom)return{};z=v.y-rt,v.y=B.axes.x.bottom.y,v.z=B.axes.x.bottom.z,H=B.axes.x.bottom.xDir,mt=!B.bottom.frontFacing}else if(b.opposite){if(null===B.axes.y.right)return{};k=v.x-at,v.x=B.axes.y.right.x,v.z=B.axes.y.right.z,H={x:(H=B.axes.y.right.xDir).z,y:H.y,z:-H.x}}else{if(null===B.axes.y.left)return{};k=v.x-H,v.x=B.axes.y.left.x,v.z=B.axes.y.left.z,H=B.axes.y.left.xDir}return"chart"!==O&&("flap"===O?b.horiz?(y=Math.sin(_),_=Math.cos(_),b.opposite&&(y=-y),mt&&(y=-y),q={x:H.z*y,y:_,z:-H.x*y}):H={x:Math.cos(y),y:0,z:Math.sin(y)}:"ortho"===O?b.horiz?(q=Math.cos(_),O=Math.sin(y)*q,_=-Math.sin(_),y=-q*Math.cos(y),q={x:H.y*y-H.z*_,y:H.z*O-H.x*y,z:H.x*_-H.y*O},_=1/Math.sqrt(q.x*q.x+q.y*q.y+q.z*q.z),mt&&(_=-_),q={x:_*q.x,y:_*q.y,z:_*q.z}):H={x:Math.cos(y),y:0,z:Math.sin(y)}:b.horiz?q={x:Math.sin(y)*Math.sin(_),y:Math.cos(_),z:-Math.cos(y)*Math.sin(_)}:H={x:Math.cos(y),y:0,z:Math.sin(y)}),v.x+=k*H.x+z*q.x,v.y+=k*H.y+z*q.y,v.z+=k*H.z+z*q.z,k=x([v],b.chart)[0],M&&(0>j(x([v,{x:v.x+H.x,y:v.y+H.y,z:v.z+H.z},{x:v.x+q.x,y:v.y+q.y,z:v.z+q.z}],b.chart))&&(H={x:-H.x,y:-H.y,z:-H.z}),v=x([{x:v.x,y:v.y,z:v.z},{x:v.x+H.x,y:v.y+H.y,z:v.z+H.z},{x:v.x+q.x,y:v.y+q.y,z:v.z+q.z}],b.chart),k.matrix=[v[1].x-v[0].x,v[1].y-v[0].y,v[2].x-v[0].x,v[2].y-v[0].y,k.x,k.y],k.matrix[4]-=k.x*k.matrix[0]+k.y*k.matrix[2],k.matrix[5]-=k.x*k.matrix[1]+k.y*k.matrix[3]),k},G.prototype.swapZ=function(v,M){var b=this.axis;return b.isZAxis?{x:(M=M?0:b.chart.plotLeft)+v.z,y:v.y,z:v.x-M}:v},G}();return N}),te(vt,"Core/Series/Series3D.js",[vt["Core/Math3D.js"],vt["Core/Series/Series.js"],vt["Core/Utilities.js"]],function(Ct,wt,xt){var et,jt=this&&this.__extends||(et=function(st,R){return(et=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(I,A){I.__proto__=A}||function(I,A){for(var x in A)A.hasOwnProperty(x)&&(I[x]=A[x])})(st,R)},function(st,R){function I(){this.constructor=st}et(st,R),st.prototype=null===R?Object.create(R):(I.prototype=R.prototype,new I)}),zt=Ct.perspective;Ct=xt.addEvent;var Ut=xt.extend,Rt=xt.merge,It=xt.pick,K=xt.isNumber;return xt=function(et){function st(){return null!==et&&et.apply(this,arguments)||this}return jt(st,et),st.prototype.translate=function(){et.prototype.translate.apply(this,arguments),this.chart.is3d()&&this.translate3dPoints()},st.prototype.translate3dPoints=function(){var T,R=this.options,I=this.chart,A=It(this.zAxis,I.options.zAxis[0]),x=[],j=[];for(this.zPadding=(R.stacking?K(R.stack)?R.stack:0:this.index||0)*(R.depth||0+(R.groupZPadding||1)),T=0;T<this.data.length;T++){if(R=this.data[T],A&&A.translate){var V=A.logarithmic&&A.val2lin?A.val2lin(R.z):R.z;R.plotZ=A.translate(V),R.isInside=!!R.isInside&&V>=A.min&&V<=A.max}else R.plotZ=this.zPadding;R.axisXpos=R.plotX,R.axisYpos=R.plotY,R.axisZpos=R.plotZ,x.push({x:R.plotX,y:R.plotY,z:R.plotZ}),j.push(R.plotX||0)}for(this.rawPointsX=j,I=zt(x,I,!0),T=0;T<this.data.length;T++)(R=this.data[T]).plotX=(A=I[T]).x,R.plotY=A.y,R.plotZ=A.z},st.defaultOptions=Rt(wt.defaultOptions),st}(wt),Ct(wt,"afterTranslate",function(){this.chart.is3d()&&this.translate3dPoints()}),Ut(wt.prototype,{translate3dPoints:xt.prototype.translate3dPoints}),xt}),te(vt,"Series/Area3D/Area3DSeries.js",[vt["Core/Math3D.js"],vt["Core/Series/SeriesRegistry.js"],vt["Core/Utilities.js"]],function(Ct,wt,xt){function jt(K){var et=K.apply(this,[].slice.call(arguments,1));if(!this.chart.is3d())return et;var st=Ut.getGraphPath,R=this.options,I=Math.round(this.yAxis.getThreshold(R.threshold)),A=[];if(this.rawPointsX)for(var x=0;x<this.points.length;x++)A.push({x:this.rawPointsX[x],y:R.stacking?this.points[x].yBottom:I,z:this.zPadding});return R=this.chart.options.chart.options3d,A=zt(A,this.chart,!0).map(function(T){return{plotX:T.x,plotY:T.y,plotZ:T.z}}),this.group&&R&&R.depth&&R.beta&&(this.markerGroup&&(this.markerGroup.add(this.group),this.markerGroup.attr({translateX:0,translateY:0})),this.group.attr({zIndex:Math.max(1,270<R.beta||90>R.beta?R.depth-Math.round(this.zPadding||0):Math.round(this.zPadding||0))})),A.reversed=!0,(st=st.call(this,A,!0,!0))[0]&&"M"===st[0][0]&&(st[0]=["L",st[0][1],st[0][2]]),this.areaPath&&((st=this.areaPath.splice(0,this.areaPath.length/2).concat(st)).xMap=this.areaPath.xMap,this.areaPath=st),et}var zt=Ct.perspective,Ut=wt.seriesTypes.line.prototype,Rt=xt.wrap,It=[];return{compose:function(K){-1===It.indexOf(K)&&(It.push(K),Rt(K.prototype,"getGraphPath",jt))}}}),te(vt,"Series/Column3D/Column3DComposition.js",[vt["Series/Column/ColumnSeries.js"],vt["Core/Globals.js"],vt["Core/Series/Series.js"],vt["Core/Math3D.js"],vt["Core/Series/SeriesRegistry.js"],vt["Core/Axis/Stacking/StackItem.js"],vt["Core/Utilities.js"]],function(Ct,wt,xt,jt,zt,Ut,Rt){function K(T){var j=T.apply(this,[].slice.call(arguments,1));return this.chart.is3d&&this.chart.is3d()&&(j.stroke=this.options.edgeColor||j.fill,j["stroke-width"]=x(this.options.edgeWidth,1)),j}function et(T,j,V){var nt=this.chart.is3d&&this.chart.is3d();nt&&(this.options.inactiveOtherPoints=!0),T.call(this,j,V),nt&&(this.options.inactiveOtherPoints=!1)}function st(T){for(var j=[],V=1;V<arguments.length;V++)j[V-1]=arguments[V];return this.series.chart.is3d()?this.graphic&&"g"!==this.graphic.element.nodeName:T.apply(this,j)}var R=Ct.prototype,I=wt.svg,A=jt.perspective;wt=Rt.addEvent;var x=Rt.pick;return(Rt=Rt.wrap)(R,"translate",function(T){T.apply(this,[].slice.call(arguments,1)),this.chart.is3d()&&this.translate3dShapes()}),Rt(xt.prototype,"justifyDataLabel",function(T){return!arguments[2].outside3dPlot&&T.apply(this,[].slice.call(arguments,1))}),R.translate3dPoints=function(){},R.translate3dShapes=function(){var it,T=this,j=T.chart,V=T.options,nt=V.depth,w=(V.stacking?V.stack||0:T.index)*(nt+(V.groupZPadding||1)),l=T.borderWidth%2?.5:0;j.inverted&&!T.yAxis.reversed&&(l*=-1),!1!==V.grouping&&(w=0),w+=V.groupZPadding||1,T.data.forEach(function(N){if(N.outside3dPlot=null,null!==N.y){var M,G=N.shapeArgs,v=N.tooltipPos;[["x","width"],["y","height"]].forEach(function(b){if(0>(M=G[b[0]]-l)&&(G[b[1]]+=G[b[0]]+l,G[b[0]]=-l,M=0),M+G[b[1]]>T[b[0]+"Axis"].len&&0!==G[b[1]]&&(G[b[1]]=T[b[0]+"Axis"].len-G[b[0]]),0!==G[b[1]]&&(G[b[0]]>=T[b[0]+"Axis"].len||G[b[0]]+G[b[1]]<=l)){for(var k in G)G[k]="y"===k?-9999:0;N.outside3dPlot=!0}}),"rect"===N.shapeType&&(N.shapeType="cuboid"),G.z=w,G.depth=nt,G.insidePlotArea=!0,it={x:G.x+G.width/2,y:G.y,z:w+nt/2},j.inverted&&(it.x=G.height,it.y=N.clientX),N.plot3d=A([it],j,!0,!1)[0],v=A([{x:v[0],y:v[1],z:w+nt/2}],j,!0,!1)[0],N.tooltipPos=[v.x,v.y]}}),T.z=w},Rt(R,"animate",function(T){if(this.chart.is3d()){var j=arguments[1],V=this.yAxis,nt=this,w=this.yAxis.reversed;I&&(j?nt.data.forEach(function(l){null!==l.y&&(l.height=l.shapeArgs.height,l.shapey=l.shapeArgs.y,l.shapeArgs.height=1,w||(l.shapeArgs.y=l.stackY?l.plotY+V.translate(l.stackY):l.plotY+(l.negative?-l.height:l.height)))}):(nt.data.forEach(function(l){null!==l.y&&(l.shapeArgs.height=l.height,l.shapeArgs.y=l.shapey,l.graphic)&&l.graphic[l.outside3dPlot?"attr":"animate"](l.shapeArgs,nt.options.animation)}),this.drawDataLabels()))}else T.apply(this,[].slice.call(arguments,1))}),Rt(R,"plotGroup",function(T,j,V,nt,w,l){return"dataLabelsGroup"!==j&&"markerGroup"!==j&&this.chart.is3d()&&(this[j]&&delete this[j],l&&(this.chart.columnGroup||(this.chart.columnGroup=this.chart.renderer.g("columnGroup").add(l)),this[j]=this.chart.columnGroup,this.chart.columnGroup.attr(this.getPlotBox()),this[j].survive=!0,"group"===j&&(arguments[3]="visible"))),T.apply(this,Array.prototype.slice.call(arguments,1))}),Rt(R,"setVisible",function(T,j){var V=this;V.chart.is3d()&&V.data.forEach(function(nt){nt.visible=nt.options.visible=j=typeof j>"u"?!x(V.visible,nt.visible):j,V.options.data[V.data.indexOf(nt)]=nt.options,nt.graphic&&nt.graphic.attr({visibility:j?"visible":"hidden"})}),T.apply(this,Array.prototype.slice.call(arguments,1))}),wt(Ct,"afterInit",function(){if(this.chart.is3d()){var T=this.options,j=T.grouping,V=T.stacking,nt=this.yAxis.options.reversedStacks,w=0;if(typeof j>"u"||j){for(j=function It(T,j){var w,V=T.series,nt={totalStacks:0},l=1;return V.forEach(function(it){w=x(it.options.stack,j?0:V.length-1-it.index),nt[w]?nt[w].series.push(it):(nt[w]={series:[it],position:l},l++)}),nt.totalStacks=l+1,nt}(this.chart,V),w=T.stack||0,V=0;V<j[w].series.length&&j[w].series[V]!==this;V++);w=10*(j.totalStacks-j[w].position)+(nt?V:-V),this.xAxis.reversed||(w=10*j.totalStacks-w)}T.depth=T.depth||25,this.z=this.z||0,T.zIndex=w}}),Rt(R,"pointAttribs",K),Rt(R,"setState",et),Rt(R.pointClass.prototype,"hasNewShapeType",st),zt.seriesTypes.columnRange&&(Rt(wt=zt.seriesTypes.columnrange.prototype,"pointAttribs",K),Rt(wt,"setState",et),Rt(wt.pointClass.prototype,"hasNewShapeType",st),wt.plotGroup=R.plotGroup,wt.setVisible=R.setVisible),Rt(xt.prototype,"alignDataLabel",function(T,j,V,nt,w){var l=this.chart;if(nt.outside3dPlot=j.outside3dPlot,l.is3d()&&this.is("column")){var it=this.options,N=x(nt.inside,!!this.options.stacking),G=l.options.chart.options3d,v=j.pointWidth/2||0;it={x:w.x+v,y:w.y,z:this.z+it.depth/2},l.inverted&&(N&&(w.width=0,it.x+=j.shapeArgs.height/2),90<=G.alpha&&270>=G.alpha&&(it.y+=j.shapeArgs.width)),it=A([it],l,!0,!1)[0],w.x=it.x-v,w.y=j.outside3dPlot?-9e9:it.y}T.apply(this,[].slice.call(arguments,1))}),Rt(Ut.prototype,"getStackBox",function(T,j){var V=T.apply(this,[].slice.call(arguments,1)),nt=this.axis.chart,w=j.width;if(nt.is3d()&&this.base){var l=+this.base.split(",")[0],it=nt.series[l];l=nt.options.chart.options3d,it&&it instanceof zt.seriesTypes.column&&(it={x:V.x+(nt.inverted?V.height:w/2),y:V.y,z:it.options.depth/2},nt.inverted&&(V.width=0,90<=l.alpha&&270>=l.alpha&&(it.y+=w)),it=A([it],nt,!0,!1)[0],V.x=it.x-w/2,V.y=it.y)}return V}),Ct}),te(vt,"Series/Pie3D/Pie3DPoint.js",[vt["Core/Series/SeriesRegistry.js"]],function(Ct){var jt,wt=this&&this.__extends||(jt=function(zt,Ut){return(jt=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(Rt,It){Rt.__proto__=It}||function(Rt,It){for(var K in It)It.hasOwnProperty(K)&&(Rt[K]=It[K])})(zt,Ut)},function(zt,Ut){function Rt(){this.constructor=zt}jt(zt,Ut),zt.prototype=null===Ut?Object.create(Ut):(Rt.prototype=Ut.prototype,new Rt)}),xt=(Ct=Ct.seriesTypes.pie.prototype.pointClass).prototype.haloPath;return function(jt){function zt(){var Ut=null!==jt&&jt.apply(this,arguments)||this;return Ut.series=void 0,Ut}return wt(zt,jt),zt.prototype.haloPath=function(){return this.series.chart.is3d()?[]:xt.apply(this,arguments)},zt}(Ct)}),te(vt,"Series/Pie3D/Pie3DSeries.js",[vt["Core/Globals.js"],vt["Series/Pie3D/Pie3DPoint.js"],vt["Core/Series/SeriesRegistry.js"],vt["Core/Utilities.js"]],function(Ct,wt,xt,jt){var K,zt=this&&this.__extends||(K=function(et,st){return(K=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(R,I){R.__proto__=I}||function(R,I){for(var A in I)I.hasOwnProperty(A)&&(R[A]=I[A])})(et,st)},function(et,st){function R(){this.constructor=et}K(et,st),et.prototype=null===st?Object.create(st):(R.prototype=st.prototype,new R)}),Ut=Ct.deg2rad,Rt=Ct.svg;Ct=jt.extend;var It=jt.pick;return xt=function(K){function et(){return null!==K&&K.apply(this,arguments)||this}return zt(et,K),et.prototype.addPoint=function(){K.prototype.addPoint.apply(this,arguments),this.chart.is3d()&&this.update(this.userOptions,!0)},et.prototype.animate=function(st){if(this.chart.is3d()){var R=this.options.animation,I=this.center,A=this.group,x=this.markerGroup;Rt&&(!0===R&&(R={}),st?(A.oldtranslateX=It(A.oldtranslateX,A.translateX),A.oldtranslateY=It(A.oldtranslateY,A.translateY),A.attr(I={translateX:I[0],translateY:I[1],scaleX:.001,scaleY:.001}),x&&(x.attrSetters=A.attrSetters,x.attr(I))):(A.animate(I={translateX:A.oldtranslateX,translateY:A.oldtranslateY,scaleX:1,scaleY:1},R),x&&x.animate(I,R)))}else K.prototype.animate.apply(this,arguments)},et.prototype.drawDataLabels=function(){if(this.chart.is3d()){var st=this.chart.options.chart.options3d;this.data.forEach(function(R){var I=R.shapeArgs,A=I.r,x=(I.start+I.end)/2,T=(R=R.labelPosition).connectorPosition,j=-A*(1-Math.cos((I.alpha||st.alpha)*Ut))*Math.sin(x),V=A*(Math.cos((I.beta||st.beta)*Ut)-1)*Math.cos(x);[R.natural,T.breakAt,T.touchingSliceAt].forEach(function(nt){nt.x+=V,nt.y+=j})})}K.prototype.drawDataLabels.apply(this,arguments)},et.prototype.pointAttribs=function(st){var R=K.prototype.pointAttribs.apply(this,arguments),I=this.options;return this.chart.is3d()&&!this.chart.styledMode&&(R.stroke=I.edgeColor||st.color||this.color,R["stroke-width"]=It(I.edgeWidth,1)),R},et.prototype.translate=function(){if(K.prototype.translate.apply(this,arguments),this.chart.is3d()){var st=this,R=st.options,I=R.depth||0,A=st.chart.options.chart.options3d,x=A.alpha,T=A.beta,j=R.stacking?(R.stack||0)*I:st._i*I;j+=I/2,!1!==R.grouping&&(j=0),st.data.forEach(function(V){var nt=V.shapeArgs;V.shapeType="arc3d",nt.z=j,nt.depth=.75*I,nt.alpha=x,nt.beta=T,nt.center=st.center,nt=(nt.end+nt.start)/2,V.slicedTranslation={translateX:Math.round(Math.cos(nt)*R.slicedOffset*Math.cos(x*Ut)),translateY:Math.round(Math.sin(nt)*R.slicedOffset*Math.cos(x*Ut))}})}},et.prototype.drawTracker=function(){K.prototype.drawTracker.apply(this,arguments),this.chart.is3d()&&this.points.forEach(function(st){st.graphic&&["out","inn","side1","side2"].forEach(function(R){st.graphic&&(st.graphic[R].element.point=st)})})},et}(xt.seriesTypes.pie),Ct(xt.prototype,{pointClass:wt}),xt}),te(vt,"Series/Pie3D/Pie3DComposition.js",[vt["Series/Pie3D/Pie3DPoint.js"],vt["Series/Pie3D/Pie3DSeries.js"],vt["Core/Series/SeriesRegistry.js"]],function(Ct,wt,xt){xt.seriesTypes.pie.prototype.pointClass.prototype.haloPath=Ct.prototype.haloPath,xt.seriesTypes.pie=wt}),te(vt,"Series/Scatter3D/Scatter3DPoint.js",[vt["Series/Scatter/ScatterSeries.js"],vt["Core/Utilities.js"]],function(Ct,wt){var zt,xt=this&&this.__extends||(zt=function(Ut,Rt){return(zt=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(It,K){It.__proto__=K}||function(It,K){for(var et in K)K.hasOwnProperty(et)&&(It[et]=K[et])})(Ut,Rt)},function(Ut,Rt){function It(){this.constructor=Ut}zt(Ut,Rt),Ut.prototype=null===Rt?Object.create(Rt):(It.prototype=Rt.prototype,new It)}),jt=wt.defined;return function(zt){function Ut(){var Rt=null!==zt&&zt.apply(this,arguments)||this;return Rt.options=void 0,Rt.series=void 0,Rt}return xt(Ut,zt),Ut.prototype.applyOptions=function(){return zt.prototype.applyOptions.apply(this,arguments),jt(this.z)||(this.z=0),this},Ut}(Ct.prototype.pointClass)}),te(vt,"Series/Scatter3D/Scatter3DSeries.js",[vt["Core/Math3D.js"],vt["Series/Scatter3D/Scatter3DPoint.js"],vt["Series/Scatter/ScatterSeries.js"],vt["Core/Series/SeriesRegistry.js"],vt["Core/Utilities.js"]],function(Ct,wt,xt,jt,zt){var K,Ut=this&&this.__extends||(K=function(et,st){return(K=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(R,I){R.__proto__=I}||function(R,I){for(var A in I)I.hasOwnProperty(A)&&(R[A]=I[A])})(et,st)},function(et,st){function R(){this.constructor=et}K(et,st),et.prototype=null===st?Object.create(st):(R.prototype=st.prototype,new R)}),Rt=Ct.pointCameraDistance;Ct=zt.extend;var It=zt.merge;return zt=function(K){function et(){var st=null!==K&&K.apply(this,arguments)||this;return st.data=void 0,st.options=void 0,st.points=void 0,st}return Ut(et,K),et.prototype.pointAttribs=function(st){var R=K.prototype.pointAttribs.apply(this,arguments);return this.chart.is3d()&&st&&(R.zIndex=Rt(st,this.chart)),R},et.defaultOptions=It(xt.defaultOptions,{tooltip:{pointFormat:"x: <b>{point.x}</b><br/>y: <b>{point.y}</b><br/>z: <b>{point.z}</b><br/>"}}),et}(xt),Ct(zt.prototype,{axisTypes:["xAxis","yAxis","zAxis"],directTouch:!0,parallelArrays:["x","y","z"],pointArrayMap:["x","y","z"],pointClass:wt}),jt.registerSeriesType("scatter3d",zt),zt}),te(vt,"masters/highcharts-3d.src.js",[vt["Core/Globals.js"],vt["Core/Renderer/SVG/SVGRenderer3D.js"],vt["Core/Chart/Chart3D.js"],vt["Core/Axis/ZAxis.js"],vt["Core/Axis/Axis3DComposition.js"],vt["Series/Area3D/Area3DSeries.js"]],function(Ct,wt,xt,jt,zt,Ut){wt.compose(Ct.SVGRenderer),xt.compose(Ct.Chart,Ct.Fx),jt.compose(Ct.Chart),zt.compose(Ct.Axis,Ct.Tick),Ut.compose(Ct.seriesTypes.area)})});