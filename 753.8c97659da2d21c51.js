"use strict";(self.webpackChunkreadiness_intelligence=self.webpackChunkreadiness_intelligence||[]).push([[753],{7753:(v,p,n)=>{n.r(p),n.d(p,{UsersModule:()=>K});var c=n(6895),o=n(433),e=n(8256),f=n(7185),u=n(8423),g=n(2340),l=n(529);let _=(()=>{class r{constructor(t){this.httpClient=t,this.url=g.N.apiURL+"/user"}getAll(){return this.httpClient.get(this.url)}find(t){return this.httpClient.get(this.url+"/"+t)}create(t){return this.httpClient.post(this.url,t)}update(t,s){return this.httpClient.put(this.url+"/"+t,s)}delete(t){return this.httpClient.delete(this.url+"/"+t)}checkEmail(t){return this.httpClient.get(this.url+"/checkmail/"+t)}}return r.\u0275fac=function(t){return new(t||r)(e.LFG(l.eN))},r.\u0275prov=e.Yz7({token:r,factory:r.\u0275fac,providedIn:"root"}),r})();var U=n(6888),Z=n(3787),C=n(1215),b=n(8482),A=n(3488);function T(r,i){1&r&&(e.TgZ(0,"p"),e._uU(1,"Name is Required"),e.qZA())}function y(r,i){if(1&r&&(e.TgZ(0,"div",32),e.YNc(1,T,2,0,"p",33),e.qZA()),2&r){const t=e.oxw();e.xp6(1),e.Q6J("ngIf",t.f.name.errors.required)}}function q(r,i){1&r&&(e.TgZ(0,"p"),e._uU(1,"Email is Required"),e.qZA())}function I(r,i){1&r&&(e.TgZ(0,"p"),e._uU(1,"Email is Invalid"),e.qZA())}function F(r,i){1&r&&(e.TgZ(0,"p"),e._uU(1,"Email already in use"),e.qZA())}function N(r,i){if(1&r&&(e.TgZ(0,"div",32),e.YNc(1,q,2,0,"p",33),e.YNc(2,I,2,0,"p",33),e.YNc(3,F,2,0,"p",33),e.qZA()),2&r){const t=e.oxw();e.xp6(1),e.Q6J("ngIf",null==t.f.email.errors?null:t.f.email.errors.required),e.xp6(1),e.Q6J("ngIf",null==t.f.email.errors?null:t.f.email.errors.pattern),e.xp6(1),e.Q6J("ngIf",null==t.f.email.errors?null:t.f.email.errors.emailExists)}}function S(r,i){1&r&&(e.TgZ(0,"p"),e._uU(1,"Password is Required"),e.qZA())}function x(r,i){if(1&r&&(e.TgZ(0,"div",32),e.YNc(1,S,2,0,"p",33),e.qZA()),2&r){const t=e.oxw();e.xp6(1),e.Q6J("ngIf",t.f.password.errors.required)}}function J(r,i){if(1&r&&(e.TgZ(0,"option",34),e._uU(1),e.qZA()),2&r){const t=i.$implicit;e.s9C("value",t.id),e.xp6(1),e.Oqu(t.name)}}function E(r,i){1&r&&(e.TgZ(0,"p"),e._uU(1,"Role is Required"),e.qZA())}function Y(r,i){if(1&r&&(e.TgZ(0,"div",32),e.YNc(1,E,2,0,"p",33),e.qZA()),2&r){const t=e.oxw();e.xp6(1),e.Q6J("ngIf",t.f.roleId.errors.required)}}function O(r,i){if(1&r&&(e.TgZ(0,"option",34),e._uU(1),e.qZA()),2&r){const t=i.$implicit;e.s9C("value",t.id),e.xp6(1),e.Oqu(t.name)}}function Q(r,i){if(1&r&&(e.TgZ(0,"option",34),e._uU(1),e.qZA()),2&r){const t=i.$implicit;e.s9C("value",t.id),e.xp6(1),e.Oqu(t.name)}}function w(r,i){if(1&r&&(e.TgZ(0,"option",34),e._uU(1),e.qZA()),2&r){const t=i.$implicit;e.s9C("value",t.id),e.xp6(1),e.Oqu(t.name)}}function z(r,i){if(1&r&&(e.TgZ(0,"option",34),e._uU(1),e.qZA()),2&r){const t=i.$implicit;e.s9C("value",t.id),e.xp6(1),e.Oqu(t.name)}}function R(r,i){1&r&&(e.TgZ(0,"button",35),e._uU(1,"Submit"),e.qZA())}function k(r,i){1&r&&(e.TgZ(0,"button",35),e._uU(1,"Update"),e.qZA())}function M(r,i){if(1&r){const t=e.EpF();e.TgZ(0,"tr")(1,"td"),e._uU(2),e.qZA(),e.TgZ(3,"td"),e._uU(4),e.qZA(),e.TgZ(5,"td"),e._uU(6),e.qZA(),e.TgZ(7,"td"),e._uU(8),e.qZA(),e.TgZ(9,"td")(10,"ul",36)(11,"li",37)(12,"a",38),e.NdJ("click",function(){const a=e.CHM(t).$implicit,m=e.oxw();return e.KtG(m.findUser(a.id))}),e._UZ(13,"i",39),e.qZA()(),e.TgZ(14,"li",37)(15,"a",38),e.NdJ("click",function(){const a=e.CHM(t).$implicit,m=e.oxw();return e.KtG(m.removeUser(a.id))}),e._UZ(16,"i",40),e.qZA()()()()()}if(2&r){const t=i.$implicit;e.xp6(2),e.Oqu(t.name),e.xp6(2),e.Oqu(t.email),e.xp6(2),e.Oqu(t.role.name),e.xp6(2),e.Oqu(t.country?t.country.name:"-")}}const h=function(r){return{"is-invalid":r}};let V=(()=>{class r{constructor(t,s,d,a,m,$,B,L,P){this.toastr=t,this.spinner=s,this.fb=d,this.serviceUser=a,this.serviceRole=m,this.serviceCountry=$,this.serviceState=B,this.serviceCity=L,this.serviceOrganization=P,this.FormSubmitted=!1}ngOnInit(){this.getAll(),this.getAllRole(),this.getAllCountry(),this.getAllorganization(),this.Form=this.fb.group({name:["",o.kI.required],email:["",o.kI.compose([o.kI.required,o.kI.pattern("^[a-z0-9._%+-]+@[a-z0-9.-]+\\.[a-z]{2,4}$")])],password:["",o.kI.required],roleId:["",o.kI.required],countryId:[""],stateId:[""],cityId:[""],organizationId:[""]})}getAll(){this.serviceUser.getAll().subscribe(t=>{this.users=t})}getAllRole(){this.serviceRole.getAll().subscribe(t=>{this.roles=t})}getAllCountry(){this.serviceCountry.getAll().subscribe(t=>{this.countries=t})}onSelectCountry(t){this.serviceState.getByCountry(t.value).subscribe(s=>{this.states=s})}onSelectState(t){this.serviceCity.getByState(t.value).subscribe(s=>{this.cities=s})}getAllorganization(){this.serviceOrganization.getAll().subscribe(t=>{this.organizations=t})}get f(){return this.Form.controls}submitForm(){this.FormSubmitted=!0,!this.Form.invalid&&(this.isAddUser?(this.updateUser(),this.isAddUser=!1):this.addUser(),this.FormSubmitted=!1,this.Form.reset({roleId:"",countryId:"",stateId:"",cityId:"",organizationId:"",password:""}),this.Form.controls.password.setValidators([o.kI.required]),this.Form.get("password")?.updateValueAndValidity())}addUser(){this.spinner.show(),this.serviceUser.create(this.Form.value).subscribe({next:t=>{this.checkEmail=t,this.getAll()},error:()=>{this.spinner.hide(),this.toastr.error("Failed to save!","Error")},complete:()=>{this.checkEmail&&400==this.checkEmail.code?(this.spinner.hide(),this.toastr.error(this.checkEmail.message,"Error")):(this.spinner.hide(),this.toastr.success("Data saved successfully!","Success"))}})}findUser(t){this.spinner.show(),this.serviceUser.find(t).subscribe(s=>{this.Form.patchValue(s),this.spinner.hide()}),this.idUser=t,this.isAddUser=!0,this.Form.controls.password.clearValidators(),this.Form.controls.password.updateValueAndValidity()}updateUser(){this.spinner.show(),this.serviceUser.update(this.idUser,this.Form.value).subscribe({next:t=>{this.checkEmail=t,this.getAll()},error:()=>{this.spinner.hide(),this.toastr.error("Failed to update!","Error")},complete:()=>{this.checkEmail&&400==this.checkEmail.code?(this.spinner.hide(),this.toastr.error(this.checkEmail.message,"Error")):(this.spinner.hide(),this.toastr.success("Data saved successfully!","Success"))}})}removeUser(t){this.spinner.show(),this.serviceUser.delete(t).subscribe({next:()=>{this.getAll()},error:()=>{this.spinner.hide(),this.toastr.error("Failed to delete!","Error")},complete:()=>{this.spinner.hide(),this.toastr.success("Data deleted successfully!","Success")}}),this.Form.reset({roleId:"",countryId:""}),this.isAddUser=!1,this.FormSubmitted=!1}}return r.\u0275fac=function(t){return new(t||r)(e.Y36(f._W),e.Y36(u.t2),e.Y36(o.qu),e.Y36(_),e.Y36(U.N),e.Y36(Z.T),e.Y36(C.b),e.Y36(b.Z),e.Y36(A.M))},r.\u0275cmp=e.Xpm({type:r,selectors:[["app-users"]],decls:85,vars:26,consts:[[1,"container","mt-4"],[1,"row"],[1,"col-12","fs-12"],[1,"card","mb-4","border-0"],[1,"card-body","px-5"],[1,"py-2","border","border-5","border-top-0","border-end-0","border-bottom-0","ps-2","border-primary"],[1,"card","mb-4","shadow-sm"],[1,"card-body"],[1,"row","py-2"],[1,"col-12"],[1,"card","mb-3"],[1,"card-body","py-2",2,"background-color","#fbfbfb"],[3,"formGroup","ngSubmit"],[1,"col-sm-6","mb-2"],["type","text","formControlName","name",1,"form-control","fs-12",3,"ngClass"],["class","invalid-feedback",4,"ngIf"],["type","email","formControlName","email",1,"form-control","fs-12",3,"ngClass"],["type","password","formControlName","password",1,"form-control","fs-12",3,"ngClass"],["formControlName","roleId",1,"form-select","fs-12",3,"ngClass"],["value",""],[3,"value",4,"ngFor","ngForOf"],["formControlName","countryId",1,"form-select","fs-12",3,"change"],["formControlName","stateId",1,"form-select","fs-12",3,"change"],["formControlName","cityId",1,"form-select","fs-12"],[1,"col-sm-6","mb-4"],["formControlName","organizationId",1,"form-select","fs-12"],["type","submit","class","btn btn-primary fs-12",4,"ngIf"],[1,"card-body","py-4",2,"background-color","#fbfbfb"],[1,"table","mb-0"],[1,"text-white",2,"background-color","#024664"],[3,"width"],[4,"ngFor","ngForOf"],[1,"invalid-feedback"],[4,"ngIf"],[3,"value"],["type","submit",1,"btn","btn-primary","fs-12"],[1,"nav"],[1,"nav-item"],[1,"btn",3,"click"],[1,"bi","bi-pencil-square"],[1,"bi","bi-trash3"]],template:function(t,s){1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"h4",5),e._uU(6,"CRUD - USER"),e.qZA(),e.TgZ(7,"div",6)(8,"div",7)(9,"div",8)(10,"div",9)(11,"div",10)(12,"div",11)(13,"form",12),e.NdJ("ngSubmit",function(){return s.submitForm()}),e.TgZ(14,"div",13)(15,"label"),e._uU(16,"Name :"),e.qZA(),e._UZ(17,"input",14),e.YNc(18,y,2,1,"div",15),e.qZA(),e.TgZ(19,"div",13)(20,"label"),e._uU(21,"E-Mail :"),e.qZA(),e._UZ(22,"input",16),e.YNc(23,N,4,3,"div",15),e.qZA(),e.TgZ(24,"div",13)(25,"label"),e._uU(26,"Password :"),e.qZA(),e._UZ(27,"input",17),e.YNc(28,x,2,1,"div",15),e.qZA(),e.TgZ(29,"div",13)(30,"label"),e._uU(31,"Role :"),e.qZA(),e.TgZ(32,"select",18)(33,"option",19),e._uU(34,"Choose Role"),e.qZA(),e.YNc(35,J,2,2,"option",20),e.qZA(),e.YNc(36,Y,2,1,"div",15),e.qZA(),e.TgZ(37,"div",13)(38,"label"),e._uU(39,"Country :"),e.qZA(),e.TgZ(40,"select",21),e.NdJ("change",function(a){return s.onSelectCountry(a.target)}),e.TgZ(41,"option",19),e._uU(42,"Choose Country"),e.qZA(),e.YNc(43,O,2,2,"option",20),e.qZA()(),e.TgZ(44,"div",13)(45,"label"),e._uU(46,"State :"),e.qZA(),e.TgZ(47,"select",22),e.NdJ("change",function(a){return s.onSelectState(a.target)}),e.TgZ(48,"option",19),e._uU(49,"Choose State"),e.qZA(),e.YNc(50,Q,2,2,"option",20),e.qZA()(),e.TgZ(51,"div",13)(52,"label"),e._uU(53,"City :"),e.qZA(),e.TgZ(54,"select",23)(55,"option",19),e._uU(56,"Choose City"),e.qZA(),e.YNc(57,w,2,2,"option",20),e.qZA()(),e.TgZ(58,"div",24)(59,"label"),e._uU(60,"Organization :"),e.qZA(),e.TgZ(61,"select",25)(62,"option",19),e._uU(63,"Choose Organization"),e.qZA(),e.YNc(64,z,2,2,"option",20),e.qZA()(),e.YNc(65,R,2,0,"button",26),e.YNc(66,k,2,0,"button",26),e.qZA()()()(),e.TgZ(67,"div",9)(68,"div",10)(69,"div",27)(70,"table",28)(71,"thead",29)(72,"tr")(73,"th"),e._uU(74,"Name"),e.qZA(),e.TgZ(75,"th"),e._uU(76,"E-Mail"),e.qZA(),e.TgZ(77,"th"),e._uU(78,"Role"),e.qZA(),e.TgZ(79,"th"),e._uU(80,"Country"),e.qZA(),e.TgZ(81,"th",30),e._uU(82,"Action"),e.qZA()()(),e.TgZ(83,"tbody"),e.YNc(84,M,17,4,"tr",31),e.qZA()()()()()()()()()()()()()),2&t&&(e.xp6(13),e.Q6J("formGroup",s.Form),e.xp6(4),e.Q6J("ngClass",e.VKq(18,h,s.FormSubmitted&&s.f.name.errors)),e.xp6(1),e.Q6J("ngIf",s.FormSubmitted&&s.f.name.errors),e.xp6(4),e.Q6J("ngClass",e.VKq(20,h,s.f.email.errors&&(s.f.email.dirty||s.f.email.touched)||s.FormSubmitted&&s.f.email.errors)),e.xp6(1),e.Q6J("ngIf",s.f.email.errors&&(s.f.email.dirty||s.f.email.touched)||s.FormSubmitted&&s.f.email.errors),e.xp6(4),e.Q6J("ngClass",e.VKq(22,h,s.FormSubmitted&&s.f.password.errors)),e.xp6(1),e.Q6J("ngIf",s.FormSubmitted&&s.f.password.errors),e.xp6(4),e.Q6J("ngClass",e.VKq(24,h,s.FormSubmitted&&s.f.roleId.errors)),e.xp6(3),e.Q6J("ngForOf",s.roles),e.xp6(1),e.Q6J("ngIf",s.FormSubmitted&&s.f.roleId.errors),e.xp6(7),e.Q6J("ngForOf",s.countries),e.xp6(7),e.Q6J("ngForOf",s.states),e.xp6(7),e.Q6J("ngForOf",s.cities),e.xp6(7),e.Q6J("ngForOf",s.organizations),e.xp6(1),e.Q6J("ngIf",!s.isAddUser),e.xp6(1),e.Q6J("ngIf",s.isAddUser),e.xp6(15),e.Q6J("width",100),e.xp6(3),e.Q6J("ngForOf",s.users))},dependencies:[c.mk,c.sg,c.O5,o._Y,o.YN,o.Kr,o.Fj,o.EJ,o.JJ,o.JL,o.sg,o.u]}),r})();var D=n(5808);let K=(()=>{class r{}return r.\u0275fac=function(t){return new(t||r)},r.\u0275mod=e.oAB({type:r}),r.\u0275inj=e.cJS({imports:[c.ez,D.Bz.forChild([{path:"",component:V}]),o.u5,o.UX]}),r})()},3787:(v,p,n)=>{n.d(p,{T:()=>f});var c=n(2340),o=n(8256),e=n(529);let f=(()=>{class u{constructor(l){this.httpClient=l,this.url=c.N.apiURL+"/country"}getAll(){return this.httpClient.get(this.url)}getByCode(l){return this.httpClient.get(this.url+"/"+l+"/getbycode")}find(l){return this.httpClient.get(this.url+"/"+l)}create(l){return this.httpClient.post(this.url,l)}update(l,_){return this.httpClient.put(this.url+"/"+l,_)}delete(l){return this.httpClient.delete(this.url+"/"+l)}}return u.\u0275fac=function(l){return new(l||u)(o.LFG(e.eN))},u.\u0275prov=o.Yz7({token:u,factory:u.\u0275fac,providedIn:"root"}),u})()}}]);